begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|"appenv.h"
end_include

begin_include
include|#
directive|include
file|"about_dialog.h"
end_include

begin_include
include|#
directive|include
file|"actionarea.h"
end_include

begin_include
include|#
directive|include
file|"app_procs.h"
end_include

begin_include
include|#
directive|include
file|"brightness_contrast.h"
end_include

begin_include
include|#
directive|include
file|"by_color_select.h"
end_include

begin_include
include|#
directive|include
file|"channels_dialog.h"
end_include

begin_include
include|#
directive|include
file|"colormaps.h"
end_include

begin_include
include|#
directive|include
file|"color_balance.h"
end_include

begin_include
include|#
directive|include
file|"commands.h"
end_include

begin_include
include|#
directive|include
file|"convert.h"
end_include

begin_include
include|#
directive|include
file|"curves.h"
end_include

begin_include
include|#
directive|include
file|"desaturate.h"
end_include

begin_include
include|#
directive|include
file|"devices.h"
end_include

begin_include
include|#
directive|include
file|"channel_ops.h"
end_include

begin_include
include|#
directive|include
file|"drawable.h"
end_include

begin_include
include|#
directive|include
file|"equalize.h"
end_include

begin_include
include|#
directive|include
file|"fileops.h"
end_include

begin_include
include|#
directive|include
file|"floating_sel.h"
end_include

begin_include
include|#
directive|include
file|"gdisplay_ops.h"
end_include

begin_include
include|#
directive|include
file|"general.h"
end_include

begin_include
include|#
directive|include
file|"gimage_mask.h"
end_include

begin_include
include|#
directive|include
file|"gimprc.h"
end_include

begin_include
include|#
directive|include
file|"global_edit.h"
end_include

begin_include
include|#
directive|include
file|"gradient.h"
end_include

begin_include
include|#
directive|include
file|"histogram_tool.h"
end_include

begin_include
include|#
directive|include
file|"hue_saturation.h"
end_include

begin_include
include|#
directive|include
file|"image_render.h"
end_include

begin_include
include|#
directive|include
file|"info_window.h"
end_include

begin_include
include|#
directive|include
file|"interface.h"
end_include

begin_include
include|#
directive|include
file|"invert.h"
end_include

begin_include
include|#
directive|include
file|"layers_dialog.h"
end_include

begin_include
include|#
directive|include
file|"layer_select.h"
end_include

begin_include
include|#
directive|include
file|"levels.h"
end_include

begin_include
include|#
directive|include
file|"palette.h"
end_include

begin_include
include|#
directive|include
file|"patterns.h"
end_include

begin_include
include|#
directive|include
file|"plug_in.h"
end_include

begin_include
include|#
directive|include
file|"posterize.h"
end_include

begin_include
include|#
directive|include
file|"resize.h"
end_include

begin_include
include|#
directive|include
file|"scale.h"
end_include

begin_include
include|#
directive|include
file|"session.h"
end_include

begin_include
include|#
directive|include
file|"threshold.h"
end_include

begin_include
include|#
directive|include
file|"tips_dialog.h"
end_include

begin_include
include|#
directive|include
file|"tools.h"
end_include

begin_include
include|#
directive|include
file|"undo.h"
end_include

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpintl.h"
end_include

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon2a33efdc0108
block|{
DECL|member|shell
name|GtkWidget
modifier|*
name|shell
decl_stmt|;
DECL|member|resize
name|Resize
modifier|*
name|resize
decl_stmt|;
DECL|member|gimage_id
name|int
name|gimage_id
decl_stmt|;
DECL|typedef|ImageResize
block|}
name|ImageResize
typedef|;
end_typedef

begin_comment
comment|/*  preferences local functions  */
end_comment

begin_function_decl
specifier|static
name|void
name|file_prefs_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_save_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gint
name|file_prefs_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GdkEvent
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* static void file_prefs_text_callback (GtkWidget *, gpointer); */
end_comment

begin_function_decl
specifier|static
name|void
name|file_prefs_spinbutton_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_preview_size_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_mem_size_unit_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_clear_session_info_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/*  static variables  */
end_comment

begin_decl_stmt
DECL|variable|last_type
specifier|static
name|int
name|last_type
init|=
name|RGB
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|prefs_dlg
specifier|static
name|GtkWidget
modifier|*
name|prefs_dlg
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_perfectmouse
specifier|static
name|int
name|old_perfectmouse
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_transparency_type
specifier|static
name|int
name|old_transparency_type
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_transparency_size
specifier|static
name|int
name|old_transparency_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_levels_of_undo
specifier|static
name|int
name|old_levels_of_undo
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_marching_speed
specifier|static
name|int
name|old_marching_speed
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_allow_resize_windows
specifier|static
name|int
name|old_allow_resize_windows
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_auto_save
specifier|static
name|int
name|old_auto_save
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_preview_size
specifier|static
name|int
name|old_preview_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_no_cursor_updating
specifier|static
name|int
name|old_no_cursor_updating
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_show_tool_tips
specifier|static
name|int
name|old_show_tool_tips
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_show_rulers
specifier|static
name|int
name|old_show_rulers
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_show_statusbar
specifier|static
name|int
name|old_show_statusbar
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_cubic_interpolation
specifier|static
name|int
name|old_cubic_interpolation
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_confirm_on_close
specifier|static
name|int
name|old_confirm_on_close
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_save_session_info
specifier|static
name|int
name|old_save_session_info
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_save_device_status
specifier|static
name|int
name|old_save_device_status
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_always_restore_session
specifier|static
name|int
name|old_always_restore_session
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_width
specifier|static
name|int
name|old_default_width
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_height
specifier|static
name|int
name|old_default_height
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_type
specifier|static
name|int
name|old_default_type
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_stingy_memory_use
specifier|static
name|int
name|old_stingy_memory_use
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_tile_cache_size
specifier|static
name|int
name|old_tile_cache_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_install_cmap
specifier|static
name|int
name|old_install_cmap
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_cycled_marching_ants
specifier|static
name|int
name|old_cycled_marching_ants
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_last_opened_size
specifier|static
name|int
name|old_last_opened_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_temp_path
specifier|static
name|char
modifier|*
name|old_temp_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_swap_path
specifier|static
name|char
modifier|*
name|old_swap_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_brush_path
specifier|static
name|char
modifier|*
name|old_brush_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_pattern_path
specifier|static
name|char
modifier|*
name|old_pattern_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_palette_path
specifier|static
name|char
modifier|*
name|old_palette_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_plug_in_path
specifier|static
name|char
modifier|*
name|old_plug_in_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_gradient_path
specifier|static
name|char
modifier|*
name|old_gradient_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_monitor_xres
specifier|static
name|float
name|old_monitor_xres
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_monitor_yres
specifier|static
name|float
name|old_monitor_yres
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_using_xserver_resolution
specifier|static
name|int
name|old_using_xserver_resolution
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_num_processors
specifier|static
name|int
name|old_num_processors
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_image_title_format
specifier|static
name|char
modifier|*
name|old_image_title_format
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_temp_path
specifier|static
name|char
modifier|*
name|edit_temp_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_swap_path
specifier|static
name|char
modifier|*
name|edit_swap_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_brush_path
specifier|static
name|char
modifier|*
name|edit_brush_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_pattern_path
specifier|static
name|char
modifier|*
name|edit_pattern_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_palette_path
specifier|static
name|char
modifier|*
name|edit_palette_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_plug_in_path
specifier|static
name|char
modifier|*
name|edit_plug_in_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_gradient_path
specifier|static
name|char
modifier|*
name|edit_gradient_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_stingy_memory_use
specifier|static
name|int
name|edit_stingy_memory_use
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_tile_cache_size
specifier|static
name|int
name|edit_tile_cache_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_install_cmap
specifier|static
name|int
name|edit_install_cmap
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_cycled_marching_ants
specifier|static
name|int
name|edit_cycled_marching_ants
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_last_opened_size
specifier|static
name|int
name|edit_last_opened_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_num_processors
specifier|static
name|int
name|edit_num_processors
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|tile_cache_size_spinbutton
specifier|static
name|GtkWidget
modifier|*
name|tile_cache_size_spinbutton
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|divided_tile_cache_size
specifier|static
name|int
name|divided_tile_cache_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|mem_size_unit
specifier|static
name|int
name|mem_size_unit
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|xres_spinbutton
specifier|static
name|GtkWidget
modifier|*
name|xres_spinbutton
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|yres_spinbutton
specifier|static
name|GtkWidget
modifier|*
name|yres_spinbutton
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|num_processors_spinbutton
specifier|static
name|GtkWidget
modifier|*
name|num_processors_spinbutton
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Some information regarding preferences, compiled by Raph Levien 11/3/97.     The following preference items cannot be set on the fly (at least    according to the existing pref code - it may be that changing them    so they're set on the fly is not hard).     temp-path    swap-path    brush-path    pattern-path    plug-in-path    palette-path    gradient-path    stingy-memory-use    tile-cache-size    install-cmap    cycled-marching-ants    last-opened-size     All of these now have variables of the form edit_temp_path, which    are copied from the actual variables (e.g. temp_path) the first time    the dialog box is started.     Variables of the form old_temp_path represent the values at the    time the dialog is opened - a cancel copies them back from old to    the real variables or the edit variables, depending on whether they    can be set on the fly.     Here are the remaining issues as I see them:     Still no settings for default-brush, default-gradient,    default-palette, default-pattern, gamma-correction, color-cube,    show-rulers, ruler-units. No widget for confirm-on-close although    a lot of stuff is there.     No UI feedback for the fact that some settings won't take effect    until the next Gimp restart.     The semantics of "save" are a little funny - it only saves the    settings that are different from the way they were when the dialog    was opened. So you can set something, close the window, open it    up again, click "save" and have nothing happen. To change this    to more intuitive semantics, we should have a whole set of init_    variables that are set the first time the dialog is opened (along    with the edit_ variables that are currently set). Then, the save    callback checks against the init_ variable rather than the old_.     */
end_comment

begin_comment
comment|/* Copy the string from source to destination, freeing the string stored    in the destination if there is one there already. */
end_comment

begin_function
specifier|static
name|void
DECL|function|file_prefs_strset (char ** dst,char * src)
name|file_prefs_strset
parameter_list|(
name|char
modifier|*
modifier|*
name|dst
parameter_list|,
name|char
modifier|*
name|src
parameter_list|)
block|{
if|if
condition|(
operator|*
name|dst
operator|!=
name|NULL
condition|)
name|g_free
argument_list|(
operator|*
name|dst
argument_list|)
expr_stmt|;
operator|*
name|dst
operator|=
name|g_strdup
argument_list|(
name|src
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Duplicate the string, but treat NULL as the empty string. */
end_comment

begin_function
specifier|static
name|char
modifier|*
DECL|function|file_prefs_strdup (char * src)
name|file_prefs_strdup
parameter_list|(
name|char
modifier|*
name|src
parameter_list|)
block|{
return|return
name|g_strdup
argument_list|(
name|src
operator|==
name|NULL
condition|?
literal|""
else|:
name|src
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* Compare two strings, but treat NULL as the empty string. */
end_comment

begin_function
specifier|static
name|int
DECL|function|file_prefs_strcmp (char * src1,char * src2)
name|file_prefs_strcmp
parameter_list|(
name|char
modifier|*
name|src1
parameter_list|,
name|char
modifier|*
name|src2
parameter_list|)
block|{
return|return
name|strcmp
argument_list|(
name|src1
operator|==
name|NULL
condition|?
literal|""
else|:
name|src1
argument_list|,
name|src2
operator|==
name|NULL
condition|?
literal|""
else|:
name|src2
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_ok_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|edit_tile_cache_size
operator|=
name|mem_size_unit
operator|*
name|divided_tile_cache_size
expr_stmt|;
if|if
condition|(
name|levels_of_undo
operator|<
literal|0
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Levels of undo must be zero or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|levels_of_undo
operator|=
name|old_levels_of_undo
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|num_processors
operator|<
literal|1
operator|||
name|num_processors
operator|>
literal|30
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Number of processors must be between 1 and 30."
argument_list|)
argument_list|)
expr_stmt|;
name|num_processors
operator|=
name|old_num_processors
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|marching_speed
operator|<
literal|50
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Marching speed must be 50 or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|marching_speed
operator|=
name|old_marching_speed
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_width
operator|<
literal|1
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Default width must be one or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|default_width
operator|=
name|old_default_width
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_height
operator|<
literal|1
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Default height must be one or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|default_height
operator|=
name|old_default_height
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|monitor_xres
operator|<
literal|1e-5
operator|||
name|monitor_yres
operator|<
literal|1e-5
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: monitor resolution must not be zero."
argument_list|)
argument_list|)
expr_stmt|;
name|monitor_xres
operator|=
name|old_monitor_xres
expr_stmt|;
name|monitor_yres
operator|=
name|old_monitor_yres
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|image_title_format
operator|==
name|NULL
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: image_title_format should never be NULL."
argument_list|)
argument_list|)
expr_stmt|;
name|image_title_format
operator|=
name|old_image_title_format
expr_stmt|;
return|return;
block|}
name|gtk_widget_destroy
argument_list|(
name|dlg
argument_list|)
expr_stmt|;
name|prefs_dlg
operator|=
name|NULL
expr_stmt|;
name|xres_spinbutton
operator|=
name|NULL
expr_stmt|;
name|yres_spinbutton
operator|=
name|NULL
expr_stmt|;
if|if
condition|(
name|show_tool_tips
condition|)
name|gtk_tooltips_enable
argument_list|(
name|tool_tips
argument_list|)
expr_stmt|;
else|else
name|gtk_tooltips_disable
argument_list|(
name|tool_tips
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_save_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_save_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|GList
modifier|*
name|update
init|=
name|NULL
decl_stmt|;
comment|/* options that should be updated in .gimprc */
name|GList
modifier|*
name|remove
init|=
name|NULL
decl_stmt|;
comment|/* options that should be commented out */
name|int
name|save_stingy_memory_use
decl_stmt|;
name|int
name|save_tile_cache_size
decl_stmt|;
name|int
name|save_num_processors
decl_stmt|;
name|int
name|save_install_cmap
decl_stmt|;
name|int
name|save_cycled_marching_ants
decl_stmt|;
name|int
name|save_last_opened_size
decl_stmt|;
name|gchar
modifier|*
name|save_temp_path
decl_stmt|;
name|gchar
modifier|*
name|save_swap_path
decl_stmt|;
name|gchar
modifier|*
name|save_brush_path
decl_stmt|;
name|gchar
modifier|*
name|save_pattern_path
decl_stmt|;
name|gchar
modifier|*
name|save_palette_path
decl_stmt|;
name|gchar
modifier|*
name|save_plug_in_path
decl_stmt|;
name|gchar
modifier|*
name|save_gradient_path
decl_stmt|;
name|int
name|restart_notification
init|=
name|FALSE
decl_stmt|;
name|file_prefs_ok_callback
argument_list|(
name|widget
argument_list|,
name|dlg
argument_list|)
expr_stmt|;
comment|/* Save variables so that we can restore them later */
name|save_stingy_memory_use
operator|=
name|stingy_memory_use
expr_stmt|;
name|save_tile_cache_size
operator|=
name|tile_cache_size
expr_stmt|;
name|save_install_cmap
operator|=
name|install_cmap
expr_stmt|;
name|save_cycled_marching_ants
operator|=
name|cycled_marching_ants
expr_stmt|;
name|save_last_opened_size
operator|=
name|last_opened_size
expr_stmt|;
name|save_temp_path
operator|=
name|temp_path
expr_stmt|;
name|save_swap_path
operator|=
name|swap_path
expr_stmt|;
name|save_brush_path
operator|=
name|brush_path
expr_stmt|;
name|save_pattern_path
operator|=
name|pattern_path
expr_stmt|;
name|save_palette_path
operator|=
name|palette_path
expr_stmt|;
name|save_plug_in_path
operator|=
name|plug_in_path
expr_stmt|;
name|save_gradient_path
operator|=
name|gradient_path
expr_stmt|;
name|save_num_processors
operator|=
name|num_processors
expr_stmt|;
if|if
condition|(
name|levels_of_undo
operator|!=
name|old_levels_of_undo
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"undo-levels"
argument_list|)
expr_stmt|;
if|if
condition|(
name|marching_speed
operator|!=
name|old_marching_speed
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"marching-ants-speed"
argument_list|)
expr_stmt|;
if|if
condition|(
name|last_opened_size
operator|!=
name|old_last_opened_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"last-opened-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|allow_resize_windows
operator|!=
name|old_allow_resize_windows
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"allow-resize-windows"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-allow-resize-windows"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|auto_save
operator|!=
name|old_auto_save
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"auto-save"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-auto-save"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|no_cursor_updating
operator|!=
name|old_no_cursor_updating
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"cursor-updating"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"no-cursor-updating"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|show_tool_tips
operator|!=
name|old_show_tool_tips
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"show-tool-tips"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-show-tool-tips"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|show_rulers
operator|!=
name|old_show_rulers
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"show-rulers"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-show-rulers"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|show_statusbar
operator|!=
name|old_show_statusbar
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"show-statusbar"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-show-statusbar"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|cubic_interpolation
operator|!=
name|old_cubic_interpolation
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"cubic-interpolation"
argument_list|)
expr_stmt|;
if|if
condition|(
name|confirm_on_close
operator|!=
name|old_confirm_on_close
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"confirm-on-close"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-confirm-on-close"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|save_session_info
operator|!=
name|old_save_session_info
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"save-session-info"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-save-session-info"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|save_device_status
operator|!=
name|old_save_device_status
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"save-device-status"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-save-device-status"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|always_restore_session
operator|!=
name|old_always_restore_session
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"always-restore-session"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_width
operator|!=
name|old_default_width
operator|||
name|default_height
operator|!=
name|old_default_height
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-image-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_type
operator|!=
name|old_default_type
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-image-type"
argument_list|)
expr_stmt|;
if|if
condition|(
name|preview_size
operator|!=
name|old_preview_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"preview-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|perfectmouse
operator|!=
name|old_perfectmouse
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"perfect-mouse"
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_type
operator|!=
name|old_transparency_type
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"transparency-type"
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_size
operator|!=
name|old_transparency_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"transparency-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|using_xserver_resolution
operator|!=
name|old_using_xserver_resolution
operator|||
name|ABS
argument_list|(
name|monitor_xres
operator|-
name|old_monitor_xres
argument_list|)
operator|>
literal|1e-5
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"monitor-xresolution"
argument_list|)
expr_stmt|;
if|if
condition|(
name|using_xserver_resolution
operator|!=
name|old_using_xserver_resolution
operator|||
name|ABS
argument_list|(
name|monitor_yres
operator|-
name|old_monitor_yres
argument_list|)
operator|>
literal|1e-5
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"monitor-yresolution"
argument_list|)
expr_stmt|;
if|if
condition|(
name|edit_num_processors
operator|!=
name|num_processors
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"num-processors"
argument_list|)
expr_stmt|;
if|if
condition|(
name|edit_stingy_memory_use
operator|!=
name|stingy_memory_use
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"stingy-memory-use"
argument_list|)
expr_stmt|;
name|stingy_memory_use
operator|=
name|edit_stingy_memory_use
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_tile_cache_size
operator|!=
name|tile_cache_size
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"tile-cache-size"
argument_list|)
expr_stmt|;
name|tile_cache_size
operator|=
name|edit_tile_cache_size
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_install_cmap
operator|!=
name|old_install_cmap
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"install-colormap"
argument_list|)
expr_stmt|;
name|install_cmap
operator|=
name|edit_install_cmap
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_cycled_marching_ants
operator|!=
name|cycled_marching_ants
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"colormap-cycling"
argument_list|)
expr_stmt|;
name|cycled_marching_ants
operator|=
name|edit_cycled_marching_ants
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_last_opened_size
operator|!=
name|last_opened_size
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"last-opened-size"
argument_list|)
expr_stmt|;
name|last_opened_size
operator|=
name|edit_last_opened_size
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|temp_path
argument_list|,
name|edit_temp_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"temp-path"
argument_list|)
expr_stmt|;
name|temp_path
operator|=
name|edit_temp_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|swap_path
argument_list|,
name|edit_swap_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"swap-path"
argument_list|)
expr_stmt|;
name|swap_path
operator|=
name|edit_swap_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|brush_path
argument_list|,
name|edit_brush_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"brush-path"
argument_list|)
expr_stmt|;
name|brush_path
operator|=
name|edit_brush_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|pattern_path
argument_list|,
name|edit_pattern_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"pattern-path"
argument_list|)
expr_stmt|;
name|pattern_path
operator|=
name|edit_pattern_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|palette_path
argument_list|,
name|edit_palette_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"palette-path"
argument_list|)
expr_stmt|;
name|palette_path
operator|=
name|edit_palette_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|plug_in_path
argument_list|,
name|edit_plug_in_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"plug-in-path"
argument_list|)
expr_stmt|;
name|plug_in_path
operator|=
name|edit_plug_in_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|gradient_path
argument_list|,
name|edit_gradient_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"gradient-path"
argument_list|)
expr_stmt|;
name|gradient_path
operator|=
name|edit_gradient_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|using_xserver_resolution
condition|)
block|{
comment|/* special value of 0 for either x or y res in the gimprc file        * means use the xserver's current resolution */
name|monitor_xres
operator|=
literal|0.0
expr_stmt|;
name|monitor_yres
operator|=
literal|0.0
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|image_title_format
argument_list|,
name|old_image_title_format
argument_list|)
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"image-title-format"
argument_list|)
expr_stmt|;
name|save_gimprc
argument_list|(
operator|&
name|update
argument_list|,
operator|&
name|remove
argument_list|)
expr_stmt|;
if|if
condition|(
name|using_xserver_resolution
condition|)
name|gdisplay_xserver_resolution
argument_list|(
operator|&
name|monitor_xres
argument_list|,
operator|&
name|monitor_yres
argument_list|)
expr_stmt|;
comment|/* Restore variables which must not change */
name|stingy_memory_use
operator|=
name|save_stingy_memory_use
expr_stmt|;
name|tile_cache_size
operator|=
name|save_tile_cache_size
expr_stmt|;
name|install_cmap
operator|=
name|save_install_cmap
expr_stmt|;
name|cycled_marching_ants
operator|=
name|save_cycled_marching_ants
expr_stmt|;
name|last_opened_size
operator|=
name|save_last_opened_size
expr_stmt|;
name|temp_path
operator|=
name|save_temp_path
expr_stmt|;
name|swap_path
operator|=
name|save_swap_path
expr_stmt|;
name|brush_path
operator|=
name|save_brush_path
expr_stmt|;
name|pattern_path
operator|=
name|save_pattern_path
expr_stmt|;
name|palette_path
operator|=
name|save_palette_path
expr_stmt|;
name|plug_in_path
operator|=
name|save_plug_in_path
expr_stmt|;
name|gradient_path
operator|=
name|save_gradient_path
expr_stmt|;
if|if
condition|(
name|restart_notification
condition|)
name|g_message
argument_list|(
name|_
argument_list|(
literal|"You will need to restart GIMP for these changes to take effect."
argument_list|)
argument_list|)
expr_stmt|;
name|g_list_free
argument_list|(
name|update
argument_list|)
expr_stmt|;
name|g_list_free
argument_list|(
name|remove
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|file_prefs_delete_callback (GtkWidget * widget,GdkEvent * event,GtkWidget * dlg)
name|file_prefs_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEvent
modifier|*
name|event
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|file_prefs_cancel_callback
argument_list|(
name|widget
argument_list|,
name|dlg
argument_list|)
expr_stmt|;
comment|/* the widget is already destroyed here no need to try again */
return|return
name|TRUE
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_cancel_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|gtk_widget_destroy
argument_list|(
name|dlg
argument_list|)
expr_stmt|;
name|prefs_dlg
operator|=
name|NULL
expr_stmt|;
name|xres_spinbutton
operator|=
name|NULL
expr_stmt|;
name|yres_spinbutton
operator|=
name|NULL
expr_stmt|;
name|levels_of_undo
operator|=
name|old_levels_of_undo
expr_stmt|;
name|marching_speed
operator|=
name|old_marching_speed
expr_stmt|;
name|allow_resize_windows
operator|=
name|old_allow_resize_windows
expr_stmt|;
name|auto_save
operator|=
name|old_auto_save
expr_stmt|;
name|no_cursor_updating
operator|=
name|old_no_cursor_updating
expr_stmt|;
name|perfectmouse
operator|=
name|old_perfectmouse
expr_stmt|;
name|show_tool_tips
operator|=
name|old_show_tool_tips
expr_stmt|;
name|show_rulers
operator|=
name|old_show_rulers
expr_stmt|;
name|show_statusbar
operator|=
name|old_show_statusbar
expr_stmt|;
name|cubic_interpolation
operator|=
name|old_cubic_interpolation
expr_stmt|;
name|confirm_on_close
operator|=
name|old_confirm_on_close
expr_stmt|;
name|save_session_info
operator|=
name|old_save_session_info
expr_stmt|;
name|save_device_status
operator|=
name|old_save_device_status
expr_stmt|;
name|default_width
operator|=
name|old_default_width
expr_stmt|;
name|default_height
operator|=
name|old_default_height
expr_stmt|;
name|default_type
operator|=
name|old_default_type
expr_stmt|;
name|monitor_xres
operator|=
name|old_monitor_xres
expr_stmt|;
name|monitor_yres
operator|=
name|old_monitor_yres
expr_stmt|;
name|using_xserver_resolution
operator|=
name|old_using_xserver_resolution
expr_stmt|;
name|num_processors
operator|=
name|old_num_processors
expr_stmt|;
if|if
condition|(
name|preview_size
operator|!=
name|old_preview_size
condition|)
block|{
name|lc_dialog_rebuild
argument_list|(
name|old_preview_size
argument_list|)
expr_stmt|;
name|layer_select_update_preview_size
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|transparency_type
operator|!=
name|old_transparency_type
operator|)
operator|||
operator|(
name|transparency_size
operator|!=
name|old_transparency_size
operator|)
condition|)
block|{
name|transparency_type
operator|=
name|old_transparency_type
expr_stmt|;
name|transparency_size
operator|=
name|old_transparency_size
expr_stmt|;
name|render_setup
argument_list|(
name|transparency_type
argument_list|,
name|transparency_size
argument_list|)
expr_stmt|;
name|gimage_foreach
argument_list|(
operator|(
name|GFunc
operator|)
name|layer_invalidate_previews
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimage_invalidate_previews
argument_list|()
expr_stmt|;
name|gdisplays_expose_full
argument_list|()
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
name|edit_stingy_memory_use
operator|=
name|old_stingy_memory_use
expr_stmt|;
name|edit_tile_cache_size
operator|=
name|old_tile_cache_size
expr_stmt|;
name|edit_install_cmap
operator|=
name|old_install_cmap
expr_stmt|;
name|edit_cycled_marching_ants
operator|=
name|old_cycled_marching_ants
expr_stmt|;
name|edit_last_opened_size
operator|=
name|old_last_opened_size
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_temp_path
argument_list|,
name|old_temp_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_swap_path
argument_list|,
name|old_swap_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_brush_path
argument_list|,
name|old_brush_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_pattern_path
argument_list|,
name|old_pattern_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_palette_path
argument_list|,
name|old_palette_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_plug_in_path
argument_list|,
name|old_plug_in_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_gradient_path
argument_list|,
name|old_gradient_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|image_title_format
argument_list|,
name|old_image_title_format
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_toggle_callback (GtkWidget * widget,gpointer data)
name|file_prefs_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|val
decl_stmt|;
if|if
condition|(
name|data
operator|==
operator|&
name|allow_resize_windows
condition|)
name|allow_resize_windows
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|auto_save
condition|)
name|auto_save
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|no_cursor_updating
condition|)
name|no_cursor_updating
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|perfectmouse
condition|)
name|perfectmouse
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|show_tool_tips
condition|)
name|show_tool_tips
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|show_rulers
condition|)
name|show_rulers
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|show_statusbar
condition|)
name|show_statusbar
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|cubic_interpolation
condition|)
name|cubic_interpolation
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|confirm_on_close
condition|)
name|confirm_on_close
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|save_session_info
condition|)
name|save_session_info
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|save_device_status
condition|)
name|save_device_status
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|always_restore_session
condition|)
name|always_restore_session
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_stingy_memory_use
condition|)
name|edit_stingy_memory_use
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_install_cmap
condition|)
name|edit_install_cmap
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_cycled_marching_ants
condition|)
name|edit_cycled_marching_ants
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|default_type
condition|)
block|{
name|default_type
operator|=
operator|(
name|long
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
condition|)
block|{
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
operator|(
name|long
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|render_setup
argument_list|(
name|transparency_type
argument_list|,
name|transparency_size
argument_list|)
expr_stmt|;
name|gimage_foreach
argument_list|(
operator|(
name|GFunc
operator|)
name|layer_invalidate_previews
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimage_invalidate_previews
argument_list|()
expr_stmt|;
name|gdisplays_expose_full
argument_list|()
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_preview_size_callback (GtkWidget * widget,gpointer data)
name|file_prefs_preview_size_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|lc_dialog_rebuild
argument_list|(
operator|(
name|long
operator|)
name|data
argument_list|)
expr_stmt|;
name|layer_select_update_preview_size
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_mem_size_unit_callback (GtkWidget * widget,gpointer data)
name|file_prefs_mem_size_unit_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
name|new_unit
decl_stmt|;
name|new_unit
operator|=
operator|(
name|int
operator|)
name|data
expr_stmt|;
if|if
condition|(
name|new_unit
operator|!=
name|mem_size_unit
condition|)
block|{
name|divided_tile_cache_size
operator|=
name|divided_tile_cache_size
operator|*
name|mem_size_unit
operator|/
name|new_unit
expr_stmt|;
name|mem_size_unit
operator|=
name|new_unit
expr_stmt|;
name|gtk_spin_button_set_value
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|tile_cache_size_spinbutton
argument_list|)
argument_list|,
operator|(
name|float
operator|)
name|divided_tile_cache_size
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*  commented out because it's not used  static void file_prefs_text_callback (GtkWidget *widget, 			  gpointer   data) {   int *val;      val = data;   *val = atoi (gtk_entry_get_text (GTK_ENTRY (widget))); } */
end_comment

begin_function
specifier|static
name|void
DECL|function|file_prefs_spinbutton_callback (GtkWidget * widget,gpointer data)
name|file_prefs_spinbutton_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gtk_spin_button_get_value_as_int
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_float_spinbutton_callback (GtkWidget * widget,gpointer data)
name|file_prefs_float_spinbutton_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|float
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gtk_spin_button_get_value_as_int
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_string_callback (GtkWidget * widget,gpointer data)
name|file_prefs_string_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
name|file_prefs_strset
argument_list|(
name|val
argument_list|,
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_clear_session_info_callback (GtkWidget * widget,gpointer data)
name|file_prefs_clear_session_info_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|g_list_free
argument_list|(
name|session_info_updates
argument_list|)
expr_stmt|;
name|session_info_updates
operator|=
name|NULL
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_res_source_callback (GtkWidget * widget,gpointer data)
name|file_prefs_res_source_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
if|if
condition|(
name|xres_spinbutton
condition|)
name|gtk_widget_set_sensitive
argument_list|(
name|xres_spinbutton
argument_list|,
operator|!
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
argument_list|)
expr_stmt|;
if|if
condition|(
name|yres_spinbutton
condition|)
name|gtk_widget_set_sensitive
argument_list|(
name|yres_spinbutton
argument_list|,
operator|!
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
argument_list|)
expr_stmt|;
if|if
condition|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
condition|)
block|{
name|gdisplay_xserver_resolution
argument_list|(
operator|&
name|monitor_xres
argument_list|,
operator|&
name|monitor_yres
argument_list|)
expr_stmt|;
name|using_xserver_resolution
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|xres_spinbutton
condition|)
name|monitor_xres
operator|=
name|gtk_spin_button_get_value_as_float
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|xres_spinbutton
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|yres_spinbutton
condition|)
name|monitor_yres
operator|=
name|gtk_spin_button_get_value_as_float
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|yres_spinbutton
argument_list|)
argument_list|)
expr_stmt|;
name|using_xserver_resolution
operator|=
name|FALSE
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|file_pref_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_pref_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|out_frame
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|hbox
decl_stmt|;
name|GtkWidget
modifier|*
name|abox
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkWidget
modifier|*
name|radio_box
decl_stmt|;
name|GtkWidget
modifier|*
name|entry
decl_stmt|;
name|GtkWidget
modifier|*
name|spinbutton
decl_stmt|;
name|GtkWidget
modifier|*
name|combo
decl_stmt|;
name|GtkWidget
modifier|*
name|comboitem
decl_stmt|;
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GtkWidget
modifier|*
name|menuitem
decl_stmt|;
name|GtkWidget
modifier|*
name|optionmenu
decl_stmt|;
name|GtkWidget
modifier|*
name|notebook
decl_stmt|;
name|GtkWidget
modifier|*
name|table
decl_stmt|;
name|GtkAdjustment
modifier|*
name|adj
decl_stmt|;
name|GSList
modifier|*
name|group
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|transparencies
index|[]
init|=
block|{
name|N_
argument_list|(
literal|"Light Checks"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Mid-Tone Checks"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Dark Checks"
argument_list|)
block|,
name|N_
argument_list|(
literal|"White Only"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Gray Only"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Black Only"
argument_list|)
block|,   }
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|checks
index|[]
init|=
block|{
name|N_
argument_list|(
literal|"Small Checks"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Medium Checks"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Large Checks"
argument_list|)
block|,   }
decl_stmt|;
specifier|static
specifier|const
name|int
name|transparency_vals
index|[]
init|=
block|{
name|LIGHT_CHECKS
block|,
name|GRAY_CHECKS
block|,
name|DARK_CHECKS
block|,
name|WHITE_ONLY
block|,
name|GRAY_ONLY
block|,
name|BLACK_ONLY
block|,   }
decl_stmt|;
specifier|static
specifier|const
name|int
name|check_vals
index|[]
init|=
block|{
name|SMALL_CHECKS
block|,
name|MEDIUM_CHECKS
block|,
name|LARGE_CHECKS
block|,   }
decl_stmt|;
DECL|struct|__anon2a33efdc0208
specifier|static
specifier|const
struct|struct
block|{
DECL|member|label
name|char
modifier|*
name|label
decl_stmt|;
DECL|member|unit
name|int
name|unit
decl_stmt|;
block|}
name|mem_size_units
index|[]
init|=
block|{
block|{
name|N_
argument_list|(
literal|"Bytes"
argument_list|)
block|,
literal|1
block|}
block|,
block|{
name|N_
argument_list|(
literal|"KiloBytes"
argument_list|)
block|,
literal|1024
block|}
block|,
block|{
name|N_
argument_list|(
literal|"MegaBytes"
argument_list|)
block|,
operator|(
literal|1024
operator|*
literal|1024
operator|)
block|}
block|}
struct|;
DECL|struct|__anon2a33efdc0308
specifier|static
specifier|const
struct|struct
block|{
DECL|member|label
name|char
modifier|*
name|label
decl_stmt|;
DECL|member|mpath
name|char
modifier|*
modifier|*
name|mpath
decl_stmt|;
block|}
name|dirs
index|[]
init|=
block|{
block|{
name|N_
argument_list|(
literal|"Temp dir:"
argument_list|)
block|,
operator|&
name|edit_temp_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Swap dir:"
argument_list|)
block|,
operator|&
name|edit_swap_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Brushes dir:"
argument_list|)
block|,
operator|&
name|edit_brush_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Gradients dir:"
argument_list|)
block|,
operator|&
name|edit_gradient_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Patterns dir:"
argument_list|)
block|,
operator|&
name|edit_pattern_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Palette dir:"
argument_list|)
block|,
operator|&
name|edit_palette_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Plug-in dir:"
argument_list|)
block|,
operator|&
name|edit_plug_in_path
block|}
block|}
struct|;
DECL|struct|__anon2a33efdc0408
specifier|static
specifier|const
struct|struct
block|{
DECL|member|label
name|char
modifier|*
name|label
decl_stmt|;
DECL|member|size
name|int
name|size
decl_stmt|;
block|}
name|preview_sizes
index|[]
init|=
block|{
block|{
name|N_
argument_list|(
literal|"None"
argument_list|)
block|,
literal|0
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Small"
argument_list|)
block|,
literal|32
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Medium"
argument_list|)
block|,
literal|64
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Large"
argument_list|)
block|,
literal|128
block|}
block|}
struct|;
name|int
name|ntransparencies
init|=
sizeof|sizeof
argument_list|(
name|transparencies
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|transparencies
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|nchecks
init|=
sizeof|sizeof
argument_list|(
name|checks
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|checks
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|ndirs
init|=
sizeof|sizeof
argument_list|(
name|dirs
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|dirs
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|npreview_sizes
init|=
sizeof|sizeof
argument_list|(
name|preview_sizes
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|preview_sizes
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|nmem_size_units
init|=
sizeof|sizeof
argument_list|(
name|mem_size_units
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|mem_size_units
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|i
decl_stmt|;
if|if
condition|(
operator|!
name|prefs_dlg
condition|)
block|{
if|if
condition|(
name|edit_temp_path
operator|==
name|NULL
condition|)
block|{
comment|/* first time dialog is opened - copy config vals to edit              variables. */
name|edit_temp_path
operator|=
name|file_prefs_strdup
argument_list|(
name|temp_path
argument_list|)
expr_stmt|;
name|edit_swap_path
operator|=
name|file_prefs_strdup
argument_list|(
name|swap_path
argument_list|)
expr_stmt|;
name|edit_brush_path
operator|=
name|file_prefs_strdup
argument_list|(
name|brush_path
argument_list|)
expr_stmt|;
name|edit_pattern_path
operator|=
name|file_prefs_strdup
argument_list|(
name|pattern_path
argument_list|)
expr_stmt|;
name|edit_palette_path
operator|=
name|file_prefs_strdup
argument_list|(
name|palette_path
argument_list|)
expr_stmt|;
name|edit_plug_in_path
operator|=
name|file_prefs_strdup
argument_list|(
name|plug_in_path
argument_list|)
expr_stmt|;
name|edit_gradient_path
operator|=
name|file_prefs_strdup
argument_list|(
name|gradient_path
argument_list|)
expr_stmt|;
name|edit_stingy_memory_use
operator|=
name|stingy_memory_use
expr_stmt|;
name|edit_tile_cache_size
operator|=
name|tile_cache_size
expr_stmt|;
name|edit_install_cmap
operator|=
name|install_cmap
expr_stmt|;
name|edit_cycled_marching_ants
operator|=
name|cycled_marching_ants
expr_stmt|;
name|edit_last_opened_size
operator|=
name|last_opened_size
expr_stmt|;
block|}
name|old_perfectmouse
operator|=
name|perfectmouse
expr_stmt|;
name|old_transparency_type
operator|=
name|transparency_type
expr_stmt|;
name|old_transparency_size
operator|=
name|transparency_size
expr_stmt|;
name|old_levels_of_undo
operator|=
name|levels_of_undo
expr_stmt|;
name|old_marching_speed
operator|=
name|marching_speed
expr_stmt|;
name|old_allow_resize_windows
operator|=
name|allow_resize_windows
expr_stmt|;
name|old_auto_save
operator|=
name|auto_save
expr_stmt|;
name|old_preview_size
operator|=
name|preview_size
expr_stmt|;
name|old_no_cursor_updating
operator|=
name|no_cursor_updating
expr_stmt|;
name|old_show_tool_tips
operator|=
name|show_tool_tips
expr_stmt|;
name|old_show_rulers
operator|=
name|show_rulers
expr_stmt|;
name|old_show_statusbar
operator|=
name|show_statusbar
expr_stmt|;
name|old_cubic_interpolation
operator|=
name|cubic_interpolation
expr_stmt|;
name|old_confirm_on_close
operator|=
name|confirm_on_close
expr_stmt|;
name|old_save_session_info
operator|=
name|save_session_info
expr_stmt|;
name|old_save_device_status
operator|=
name|save_device_status
expr_stmt|;
name|old_always_restore_session
operator|=
name|always_restore_session
expr_stmt|;
name|old_default_width
operator|=
name|default_width
expr_stmt|;
name|old_default_height
operator|=
name|default_height
expr_stmt|;
name|old_default_type
operator|=
name|default_type
expr_stmt|;
name|old_stingy_memory_use
operator|=
name|edit_stingy_memory_use
expr_stmt|;
name|old_tile_cache_size
operator|=
name|edit_tile_cache_size
expr_stmt|;
name|old_install_cmap
operator|=
name|edit_install_cmap
expr_stmt|;
name|old_cycled_marching_ants
operator|=
name|edit_cycled_marching_ants
expr_stmt|;
name|old_last_opened_size
operator|=
name|edit_last_opened_size
expr_stmt|;
name|old_monitor_xres
operator|=
name|monitor_xres
expr_stmt|;
name|old_monitor_yres
operator|=
name|monitor_yres
expr_stmt|;
name|old_using_xserver_resolution
operator|=
name|using_xserver_resolution
expr_stmt|;
name|old_num_processors
operator|=
name|num_processors
expr_stmt|;
name|old_image_title_format
operator|=
name|file_prefs_strdup
argument_list|(
name|image_title_format
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_temp_path
argument_list|,
name|edit_temp_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_swap_path
argument_list|,
name|edit_swap_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_brush_path
argument_list|,
name|edit_brush_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_pattern_path
argument_list|,
name|edit_pattern_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_palette_path
argument_list|,
name|edit_palette_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_plug_in_path
argument_list|,
name|edit_plug_in_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_gradient_path
argument_list|,
name|edit_gradient_path
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nmem_size_units
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|edit_tile_cache_size
operator|%
name|mem_size_units
index|[
name|i
index|]
operator|.
name|unit
operator|==
literal|0
condition|)
name|mem_size_unit
operator|=
name|mem_size_units
index|[
name|i
index|]
operator|.
name|unit
expr_stmt|;
block|}
name|divided_tile_cache_size
operator|=
name|edit_tile_cache_size
operator|/
name|mem_size_unit
expr_stmt|;
name|prefs_dlg
operator|=
name|gtk_dialog_new
argument_list|()
expr_stmt|;
name|gtk_window_set_wmclass
argument_list|(
name|GTK_WINDOW
argument_list|(
name|prefs_dlg
argument_list|)
argument_list|,
literal|"preferences"
argument_list|,
literal|"Gimp"
argument_list|)
expr_stmt|;
name|gtk_window_set_title
argument_list|(
name|GTK_WINDOW
argument_list|(
name|prefs_dlg
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Preferences"
argument_list|)
argument_list|)
expr_stmt|;
comment|/* handle the wm close signal */
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|prefs_dlg
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_delete_callback
argument_list|)
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
comment|/* Action area */
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"OK"
argument_list|)
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_ok_callback
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_grab_default
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Save"
argument_list|)
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_save_callback
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_grab_default
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Cancel"
argument_list|)
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_cancel_callback
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|notebook
operator|=
name|gtk_notebook_new
argument_list|()
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|vbox
argument_list|)
argument_list|,
name|notebook
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Display page */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Display settings"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Default image size"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|abox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|abox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|abox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|abox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|2
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|abox
argument_list|)
argument_list|,
name|table
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Width: "
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Height: "
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|default_width
argument_list|,
literal|1.0
argument_list|,
literal|32767.0
argument_list|,
literal|1.0
argument_list|,
literal|50.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|spinbutton
argument_list|,
literal|50
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_spinbutton_callback
argument_list|,
operator|&
name|default_width
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|spinbutton
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|default_height
argument_list|,
literal|1.0
argument_list|,
literal|32767.0
argument_list|,
literal|1.0
argument_list|,
literal|50.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|spinbutton
argument_list|,
literal|50
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_spinbutton_callback
argument_list|,
operator|&
name|default_height
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|spinbutton
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Default image type"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|NULL
argument_list|,
name|_
argument_list|(
literal|"RGB"
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|RGB
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_type
operator|==
name|RGB
condition|)
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|default_type
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|_
argument_list|(
literal|"Grayscale"
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|GRAY
argument_list|)
expr_stmt|;
if|if
condition|(
name|last_type
operator|==
name|GRAY
condition|)
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|default_type
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Preview size: "
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_menu_new
argument_list|()
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|npreview_sizes
condition|;
name|i
operator|++
control|)
block|{
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
name|gettext
argument_list|(
name|preview_sizes
index|[
name|i
index|]
operator|.
name|label
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_preview_size_callback
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
operator|(
name|long
operator|)
name|preview_sizes
index|[
name|i
index|]
operator|.
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
block|}
name|optionmenu
operator|=
name|gtk_option_menu_new
argument_list|()
expr_stmt|;
name|gtk_option_menu_set_menu
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|optionmenu
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|optionmenu
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|npreview_sizes
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|preview_size
operator|==
name|preview_sizes
index|[
name|i
index|]
operator|.
name|size
condition|)
name|gtk_option_menu_set_history
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Cubic interpolation"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|cubic_interpolation
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|cubic_interpolation
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Transparency Type"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|group
operator|=
name|NULL
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|ntransparencies
condition|;
name|i
operator|++
control|)
block|{
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|gettext
argument_list|(
name|transparencies
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
operator|(
name|long
operator|)
name|transparency_vals
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_vals
index|[
name|i
index|]
operator|==
name|transparency_type
condition|)
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|transparency_type
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Check Size"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|group
operator|=
name|NULL
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nchecks
condition|;
name|i
operator|++
control|)
block|{
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|gettext
argument_list|(
name|checks
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
operator|(
name|long
operator|)
name|check_vals
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|check_vals
index|[
name|i
index|]
operator|==
name|transparency_size
condition|)
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|transparency_size
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Display"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
comment|/* Interface */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Interface settings"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Resize window on zoom"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|allow_resize_windows
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|allow_resize_windows
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Perfect-but-slow pointer tracking"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|perfectmouse
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|perfectmouse
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* Don't show the Auto-save button until we really  	 have auto-saving in the gimp.        	 button = gtk_check_button_new_with_label(_("Auto save")); 	 gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (button),                                        auto_save); 	 gtk_box_pack_start (GTK_BOX (vbox), button, FALSE, FALSE, 0); 	 gtk_signal_connect (GTK_OBJECT (button), "toggled", 	                           (GtkSignalFunc) file_prefs_toggle_callback,&auto_save);          gtk_widget_show (button);       */
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Disable cursor updating"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|no_cursor_updating
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|no_cursor_updating
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show tool tips"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|show_tool_tips
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|show_tool_tips
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show rulers"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|show_rulers
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|show_rulers
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show statusbar"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|show_statusbar
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|show_statusbar
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* The title format string */
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Image title format:"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|combo
operator|=
name|gtk_combo_new
argument_list|()
expr_stmt|;
name|gtk_combo_set_use_arrows
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_combo_set_value_in_list
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
comment|/* Set the currently used string as "Custom" */
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Custom"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
name|image_title_format
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
comment|/* set some commonly used format strings */
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Standard"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t)"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show zoom percentage"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t) %z%%"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show zoom ratio"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t) %d:%s"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show reversed zoom ratio"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t) %s:%d"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|combo
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|combo
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_string_callback
argument_list|)
argument_list|,
operator|&
name|image_title_format
argument_list|)
expr_stmt|;
comment|/* End of the title format string */
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Levels of undo:"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|levels_of_undo
argument_list|,
literal|0.0
argument_list|,
literal|255.0
argument_list|,
literal|1.0
argument_list|,
literal|5.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|spinbutton
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_spinbutton_callback
argument_list|,
operator|&
name|levels_of_undo
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|spinbutton
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Marching ants speed:"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|marching_speed
argument_list|,
literal|0.0
argument_list|,
literal|32000.0
argument_list|,
literal|50.0
argument_list|,
literal|100.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|spinbutton
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_spinbutton_callback
argument_list|,
operator|&
name|marching_speed
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|spinbutton
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Recent Documents list size:"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|last_opened_size
argument_list|,
literal|0.0
argument_list|,
literal|256.0
argument_list|,
literal|1.0
argument_list|,
literal|5.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|spinbutton
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_spinbutton_callback
argument_list|,
operator|&
name|edit_last_opened_size
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|spinbutton
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Interface"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
comment|/* Environment */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Environment settings"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|out_frame
argument_list|,
literal|320
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Conservative memory usage"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|stingy_memory_use
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_stingy_memory_use
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Tile cache size:"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|divided_tile_cache_size
argument_list|,
literal|0.0
argument_list|,
operator|(
literal|4069.0
operator|*
literal|1024
operator|*
literal|1024
operator|)
argument_list|,
literal|1.0
argument_list|,
literal|16.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|tile_cache_size_spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|tile_cache_size_spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|tile_cache_size_spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|tile_cache_size_spinbutton
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|tile_cache_size_spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|tile_cache_size_spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_spinbutton_callback
argument_list|,
operator|&
name|divided_tile_cache_size
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|tile_cache_size_spinbutton
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_menu_new
argument_list|()
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nmem_size_units
condition|;
name|i
operator|++
control|)
block|{
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
name|gettext
argument_list|(
name|mem_size_units
index|[
name|i
index|]
operator|.
name|label
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_mem_size_unit_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|mem_size_units
index|[
name|i
index|]
operator|.
name|unit
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
block|}
name|optionmenu
operator|=
name|gtk_option_menu_new
argument_list|()
expr_stmt|;
name|gtk_option_menu_set_menu
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|optionmenu
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|optionmenu
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nmem_size_units
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|mem_size_unit
operator|==
name|mem_size_units
index|[
name|i
index|]
operator|.
name|unit
condition|)
name|gtk_option_menu_set_history
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Number of processors to use:"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|num_processors
argument_list|,
literal|1
argument_list|,
literal|30
argument_list|,
literal|1.0
argument_list|,
literal|2.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|num_processors_spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|num_processors_spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|num_processors_spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|num_processors_spinbutton
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|num_processors_spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|num_processors_spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_spinbutton_callback
argument_list|,
operator|&
name|num_processors
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|num_processors_spinbutton
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Install colormap (8-bit only)"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|install_cmap
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_install_cmap
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|g_visual
operator|->
name|depth
operator|!=
literal|8
condition|)
name|gtk_widget_set_sensitive
argument_list|(
name|GTK_WIDGET
argument_list|(
name|button
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Colormap cycling (8-bit only)"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|cycled_marching_ants
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_cycled_marching_ants
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|g_visual
operator|->
name|depth
operator|!=
literal|8
condition|)
name|gtk_widget_set_sensitive
argument_list|(
name|GTK_WIDGET
argument_list|(
name|button
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Environment"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
comment|/* Session Management */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Session managment"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|out_frame
argument_list|,
literal|320
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Save window positions on exit"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|save_session_info
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|save_session_info
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|hbox
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Clear saved window positions"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_clear_session_info_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Always try to restore session"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|always_restore_session
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|always_restore_session
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Save device status on exit"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|save_device_status
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|save_device_status
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Session"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|notebook
argument_list|)
expr_stmt|;
comment|/* Directories */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Directories settings"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|out_frame
argument_list|,
literal|320
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
name|ndirs
operator|+
literal|1
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|table
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|ndirs
condition|;
name|i
operator|++
control|)
block|{
name|label
operator|=
name|gtk_label_new
argument_list|(
name|gettext
argument_list|(
name|dirs
index|[
name|i
index|]
operator|.
name|label
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|i
argument_list|,
name|i
operator|+
literal|1
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|entry
argument_list|,
literal|25
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
operator|*
operator|(
name|dirs
index|[
name|i
index|]
operator|.
name|mpath
operator|)
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_string_callback
argument_list|,
name|dirs
index|[
name|i
index|]
operator|.
name|mpath
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|entry
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|i
argument_list|,
name|i
operator|+
literal|1
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|entry
argument_list|)
expr_stmt|;
block|}
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Directories"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
comment|/* Monitor */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Monitor information"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|out_frame
argument_list|,
literal|320
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Get monitor resolution"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|group
operator|=
name|NULL
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|_
argument_list|(
literal|"from X server"
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_res_source_callback
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|{
name|float
name|xres
decl_stmt|,
name|yres
decl_stmt|;
name|char
name|buf
index|[
literal|80
index|]
decl_stmt|;
name|gdisplay_xserver_resolution
argument_list|(
operator|&
name|xres
argument_list|,
operator|&
name|yres
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"(currently %d x %d dpi)"
argument_list|)
argument_list|,
call|(
name|int
call|)
argument_list|(
name|xres
operator|+
literal|0.5
argument_list|)
argument_list|,
call|(
name|int
call|)
argument_list|(
name|yres
operator|+
literal|0.5
argument_list|)
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|buf
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
block|}
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|_
argument_list|(
literal|"manually:"
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|using_xserver_resolution
condition|)
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|abox
operator|=
name|gtk_alignment_new
argument_list|(
literal|0.5
argument_list|,
literal|0.5
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|abox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|abox
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|abox
argument_list|)
argument_list|,
name|hbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|monitor_xres
argument_list|,
literal|1.0
argument_list|,
literal|32768
argument_list|,
literal|1.0
argument_list|,
literal|15.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|xres_spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|2.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|xres_spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|xres_spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|xres_spinbutton
argument_list|,
literal|70
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|xres_spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|xres_spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_float_spinbutton_callback
argument_list|)
argument_list|,
operator|&
name|monitor_xres
argument_list|)
expr_stmt|;
name|gtk_widget_set_sensitive
argument_list|(
name|xres_spinbutton
argument_list|,
operator|!
name|using_xserver_resolution
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|xres_spinbutton
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|" by "
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|adj
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|gtk_adjustment_new
argument_list|(
name|monitor_yres
argument_list|,
literal|1.0
argument_list|,
literal|32768
argument_list|,
literal|1.0
argument_list|,
literal|15.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|yres_spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|adj
argument_list|,
literal|1.0
argument_list|,
literal|2.0
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|yres_spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|yres_spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|yres_spinbutton
argument_list|,
literal|70
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|yres_spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|yres_spinbutton
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_float_spinbutton_callback
argument_list|)
argument_list|,
operator|&
name|monitor_yres
argument_list|)
expr_stmt|;
name|gtk_widget_set_sensitive
argument_list|(
name|yres_spinbutton
argument_list|,
operator|!
name|using_xserver_resolution
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|yres_spinbutton
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"dpi"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"Monitor"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|notebook
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|prefs_dlg
argument_list|)
expr_stmt|;
block|}
block|}
end_function

end_unit

