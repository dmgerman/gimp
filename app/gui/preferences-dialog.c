begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|"appenv.h"
end_include

begin_include
include|#
directive|include
file|"colormaps.h"
end_include

begin_include
include|#
directive|include
file|"gdisplay_ops.h"
end_include

begin_include
include|#
directive|include
file|"gimprc.h"
end_include

begin_include
include|#
directive|include
file|"image_render.h"
end_include

begin_include
include|#
directive|include
file|"interface.h"
end_include

begin_include
include|#
directive|include
file|"layers_dialog.h"
end_include

begin_include
include|#
directive|include
file|"layer_select.h"
end_include

begin_include
include|#
directive|include
file|"paint_options.h"
end_include

begin_include
include|#
directive|include
file|"session.h"
end_include

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpchainbutton.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpfileselection.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimppatheditor.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpsizeentry.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimplimits.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpintl.h"
end_include

begin_comment
comment|/*  preferences local functions  */
end_comment

begin_function_decl
specifier|static
name|void
name|file_prefs_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_save_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_preview_size_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_mem_size_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_mem_size_unit_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_int_adjustment_callback
parameter_list|(
name|GtkAdjustment
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_string_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_filename_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_path_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_clear_session_info_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_default_size_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_default_resolution_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_res_source_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_monitor_resolution_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/*  static variables  */
end_comment

begin_decl_stmt
DECL|variable|old_perfectmouse
specifier|static
name|int
name|old_perfectmouse
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_transparency_type
specifier|static
name|int
name|old_transparency_type
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_transparency_size
specifier|static
name|int
name|old_transparency_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_levels_of_undo
specifier|static
name|int
name|old_levels_of_undo
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_marching_speed
specifier|static
name|int
name|old_marching_speed
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_allow_resize_windows
specifier|static
name|int
name|old_allow_resize_windows
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_auto_save
specifier|static
name|int
name|old_auto_save
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_preview_size
specifier|static
name|int
name|old_preview_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_no_cursor_updating
specifier|static
name|int
name|old_no_cursor_updating
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_show_tool_tips
specifier|static
name|int
name|old_show_tool_tips
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_show_rulers
specifier|static
name|int
name|old_show_rulers
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_show_statusbar
specifier|static
name|int
name|old_show_statusbar
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_cubic_interpolation
specifier|static
name|int
name|old_cubic_interpolation
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_confirm_on_close
specifier|static
name|int
name|old_confirm_on_close
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_save_session_info
specifier|static
name|int
name|old_save_session_info
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_save_device_status
specifier|static
name|int
name|old_save_device_status
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_always_restore_session
specifier|static
name|int
name|old_always_restore_session
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_width
specifier|static
name|int
name|old_default_width
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_height
specifier|static
name|int
name|old_default_height
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_units
specifier|static
name|GUnit
name|old_default_units
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_xresolution
specifier|static
name|double
name|old_default_xresolution
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_yresolution
specifier|static
name|double
name|old_default_yresolution
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_resolution_units
specifier|static
name|GUnit
name|old_default_resolution_units
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_type
specifier|static
name|int
name|old_default_type
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_stingy_memory_use
specifier|static
name|int
name|old_stingy_memory_use
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_tile_cache_size
specifier|static
name|int
name|old_tile_cache_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_install_cmap
specifier|static
name|int
name|old_install_cmap
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_cycled_marching_ants
specifier|static
name|int
name|old_cycled_marching_ants
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_last_opened_size
specifier|static
name|int
name|old_last_opened_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_temp_path
specifier|static
name|char
modifier|*
name|old_temp_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_swap_path
specifier|static
name|char
modifier|*
name|old_swap_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_plug_in_path
specifier|static
name|char
modifier|*
name|old_plug_in_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_module_path
specifier|static
name|char
modifier|*
name|old_module_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_brush_path
specifier|static
name|char
modifier|*
name|old_brush_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_pattern_path
specifier|static
name|char
modifier|*
name|old_pattern_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_palette_path
specifier|static
name|char
modifier|*
name|old_palette_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_gradient_path
specifier|static
name|char
modifier|*
name|old_gradient_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_monitor_xres
specifier|static
name|double
name|old_monitor_xres
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_monitor_yres
specifier|static
name|double
name|old_monitor_yres
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_using_xserver_resolution
specifier|static
name|int
name|old_using_xserver_resolution
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_num_processors
specifier|static
name|int
name|old_num_processors
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_image_title_format
specifier|static
name|char
modifier|*
name|old_image_title_format
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_global_paint_options
specifier|static
name|int
name|old_global_paint_options
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_max_new_image_size
specifier|static
name|int
name|old_max_new_image_size
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  variables which can't be changed on the fly  */
end_comment

begin_decl_stmt
DECL|variable|edit_stingy_memory_use
specifier|static
name|int
name|edit_stingy_memory_use
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_tile_cache_size
specifier|static
name|int
name|edit_tile_cache_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_install_cmap
specifier|static
name|int
name|edit_install_cmap
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_cycled_marching_ants
specifier|static
name|int
name|edit_cycled_marching_ants
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_last_opened_size
specifier|static
name|int
name|edit_last_opened_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_num_processors
specifier|static
name|int
name|edit_num_processors
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_temp_path
specifier|static
name|char
modifier|*
name|edit_temp_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_swap_path
specifier|static
name|char
modifier|*
name|edit_swap_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_plug_in_path
specifier|static
name|char
modifier|*
name|edit_plug_in_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_module_path
specifier|static
name|char
modifier|*
name|edit_module_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_brush_path
specifier|static
name|char
modifier|*
name|edit_brush_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_pattern_path
specifier|static
name|char
modifier|*
name|edit_pattern_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_palette_path
specifier|static
name|char
modifier|*
name|edit_palette_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_gradient_path
specifier|static
name|char
modifier|*
name|edit_gradient_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|prefs_dlg
specifier|static
name|GtkWidget
modifier|*
name|prefs_dlg
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Some information regarding preferences, compiled by Raph Levien 11/3/97.    updated by Michael Natterer 27/3/99     The following preference items cannot be set on the fly (at least    according to the existing pref code - it may be that changing them    so they're set on the fly is not hard).     stingy-memory-use    tile-cache-size    install-cmap    cycled-marching-ants    last-opened-size    num-processors    temp-path    swap-path    plug-in-path    module-path    brush-path    pattern-path    palette-path    gradient-path     All of these now have variables of the form edit_temp_path, which    are copied from the actual variables (e.g. temp_path) the first time    the dialog box is started.     Variables of the form old_temp_path represent the values at the    time the dialog is opened - a cancel copies them back from old to    the real variables or the edit variables, depending on whether they    can be set on the fly.     Here are the remaining issues as I see them:     Still no settings for default-gradient, default-palette,    gamma-correction, color-cube.     No widget for confirm-on-close although a lot of stuff is there.     The semantics of "save" are a little funny - it only saves the    settings that are different from the way they were when the dialog    was opened. So you can set something, close the window, open it    up again, click "save" and have nothing happen. To change this    to more intuitive semantics, we should have a whole set of init_    variables that are set the first time the dialog is opened (along    with the edit_ variables that are currently set). Then, the save    callback checks against the init_ variable rather than the old_. */
end_comment

begin_comment
comment|/* Copy the string from source to destination, freeing the string stored    in the destination if there is one there already. */
end_comment

begin_function
specifier|static
name|void
DECL|function|file_prefs_strset (char ** dst,char * src)
name|file_prefs_strset
parameter_list|(
name|char
modifier|*
modifier|*
name|dst
parameter_list|,
name|char
modifier|*
name|src
parameter_list|)
block|{
if|if
condition|(
operator|*
name|dst
operator|!=
name|NULL
condition|)
name|g_free
argument_list|(
operator|*
name|dst
argument_list|)
expr_stmt|;
operator|*
name|dst
operator|=
name|g_strdup
argument_list|(
name|src
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Duplicate the string, but treat NULL as the empty string. */
end_comment

begin_function
specifier|static
name|char
modifier|*
DECL|function|file_prefs_strdup (char * src)
name|file_prefs_strdup
parameter_list|(
name|char
modifier|*
name|src
parameter_list|)
block|{
return|return
name|g_strdup
argument_list|(
name|src
operator|==
name|NULL
condition|?
literal|""
else|:
name|src
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* Compare two strings, but treat NULL as the empty string. */
end_comment

begin_function
specifier|static
name|int
DECL|function|file_prefs_strcmp (char * src1,char * src2)
name|file_prefs_strcmp
parameter_list|(
name|char
modifier|*
name|src1
parameter_list|,
name|char
modifier|*
name|src2
parameter_list|)
block|{
return|return
name|strcmp
argument_list|(
name|src1
operator|==
name|NULL
condition|?
literal|""
else|:
name|src1
argument_list|,
name|src2
operator|==
name|NULL
condition|?
literal|""
else|:
name|src2
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_ok_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
if|if
condition|(
name|levels_of_undo
operator|<
literal|0
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Levels of undo must be zero or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|levels_of_undo
operator|=
name|old_levels_of_undo
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|num_processors
operator|<
literal|1
operator|||
name|num_processors
operator|>
literal|30
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Number of processors must be between 1 and 30."
argument_list|)
argument_list|)
expr_stmt|;
name|num_processors
operator|=
name|old_num_processors
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|marching_speed
operator|<
literal|50
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Marching speed must be 50 or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|marching_speed
operator|=
name|old_marching_speed
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_width
operator|<
literal|1
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Default width must be one or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|default_width
operator|=
name|old_default_width
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_height
operator|<
literal|1
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Default height must be one or greater."
argument_list|)
argument_list|)
expr_stmt|;
name|default_height
operator|=
name|old_default_height
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_units
operator|<
name|UNIT_INCH
operator|||
name|default_units
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Default unit must be within unit range."
argument_list|)
argument_list|)
expr_stmt|;
name|default_units
operator|=
name|old_default_units
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_xresolution
operator|<
name|GIMP_MIN_RESOLUTION
operator|||
name|default_yresolution
operator|<
name|GIMP_MIN_RESOLUTION
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: default resolution must not be zero."
argument_list|)
argument_list|)
expr_stmt|;
name|default_xresolution
operator|=
name|old_default_xresolution
expr_stmt|;
name|default_yresolution
operator|=
name|old_default_yresolution
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_resolution_units
operator|<
name|UNIT_INCH
operator|||
name|default_resolution_units
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Default resolution unit must be within unit range."
argument_list|)
argument_list|)
expr_stmt|;
name|default_resolution_units
operator|=
name|old_default_resolution_units
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|monitor_xres
operator|<
name|GIMP_MIN_RESOLUTION
operator|||
name|monitor_yres
operator|<
name|GIMP_MIN_RESOLUTION
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Monitor resolution must not be zero."
argument_list|)
argument_list|)
expr_stmt|;
name|monitor_xres
operator|=
name|old_monitor_xres
expr_stmt|;
name|monitor_yres
operator|=
name|old_monitor_yres
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|image_title_format
operator|==
name|NULL
condition|)
block|{
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error: Image title format must not be NULL."
argument_list|)
argument_list|)
expr_stmt|;
name|image_title_format
operator|=
name|old_image_title_format
expr_stmt|;
return|return;
block|}
name|gtk_widget_destroy
argument_list|(
name|dlg
argument_list|)
expr_stmt|;
name|prefs_dlg
operator|=
name|NULL
expr_stmt|;
if|if
condition|(
name|show_tool_tips
condition|)
name|gtk_tooltips_enable
argument_list|(
name|tool_tips
argument_list|)
expr_stmt|;
else|else
name|gtk_tooltips_disable
argument_list|(
name|tool_tips
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_save_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_save_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|GList
modifier|*
name|update
init|=
name|NULL
decl_stmt|;
comment|/* options that should be updated in .gimprc */
name|GList
modifier|*
name|remove
init|=
name|NULL
decl_stmt|;
comment|/* options that should be commented out */
name|int
name|save_stingy_memory_use
decl_stmt|;
name|int
name|save_tile_cache_size
decl_stmt|;
name|int
name|save_install_cmap
decl_stmt|;
name|int
name|save_cycled_marching_ants
decl_stmt|;
name|int
name|save_last_opened_size
decl_stmt|;
name|int
name|save_num_processors
decl_stmt|;
name|gchar
modifier|*
name|save_temp_path
decl_stmt|;
name|gchar
modifier|*
name|save_swap_path
decl_stmt|;
name|gchar
modifier|*
name|save_plug_in_path
decl_stmt|;
name|gchar
modifier|*
name|save_module_path
decl_stmt|;
name|gchar
modifier|*
name|save_brush_path
decl_stmt|;
name|gchar
modifier|*
name|save_pattern_path
decl_stmt|;
name|gchar
modifier|*
name|save_palette_path
decl_stmt|;
name|gchar
modifier|*
name|save_gradient_path
decl_stmt|;
name|int
name|restart_notification
init|=
name|FALSE
decl_stmt|;
name|file_prefs_ok_callback
argument_list|(
name|widget
argument_list|,
name|dlg
argument_list|)
expr_stmt|;
comment|/* Save variables so that we can restore them later */
name|save_stingy_memory_use
operator|=
name|stingy_memory_use
expr_stmt|;
name|save_tile_cache_size
operator|=
name|tile_cache_size
expr_stmt|;
name|save_install_cmap
operator|=
name|install_cmap
expr_stmt|;
name|save_cycled_marching_ants
operator|=
name|cycled_marching_ants
expr_stmt|;
name|save_last_opened_size
operator|=
name|last_opened_size
expr_stmt|;
name|save_num_processors
operator|=
name|num_processors
expr_stmt|;
name|save_temp_path
operator|=
name|temp_path
expr_stmt|;
name|save_swap_path
operator|=
name|swap_path
expr_stmt|;
name|save_plug_in_path
operator|=
name|plug_in_path
expr_stmt|;
name|save_module_path
operator|=
name|module_path
expr_stmt|;
name|save_brush_path
operator|=
name|brush_path
expr_stmt|;
name|save_pattern_path
operator|=
name|pattern_path
expr_stmt|;
name|save_palette_path
operator|=
name|palette_path
expr_stmt|;
name|save_gradient_path
operator|=
name|gradient_path
expr_stmt|;
if|if
condition|(
name|levels_of_undo
operator|!=
name|old_levels_of_undo
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"undo-levels"
argument_list|)
expr_stmt|;
if|if
condition|(
name|marching_speed
operator|!=
name|old_marching_speed
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"marching-ants-speed"
argument_list|)
expr_stmt|;
if|if
condition|(
name|last_opened_size
operator|!=
name|old_last_opened_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"last-opened-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|allow_resize_windows
operator|!=
name|old_allow_resize_windows
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"allow-resize-windows"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-allow-resize-windows"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|auto_save
operator|!=
name|old_auto_save
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"auto-save"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-auto-save"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|no_cursor_updating
operator|!=
name|old_no_cursor_updating
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"cursor-updating"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"no-cursor-updating"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|show_tool_tips
operator|!=
name|old_show_tool_tips
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"show-tool-tips"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-show-tool-tips"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|show_rulers
operator|!=
name|old_show_rulers
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"show-rulers"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-show-rulers"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|show_statusbar
operator|!=
name|old_show_statusbar
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"show-statusbar"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-show-statusbar"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|cubic_interpolation
operator|!=
name|old_cubic_interpolation
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"cubic-interpolation"
argument_list|)
expr_stmt|;
if|if
condition|(
name|confirm_on_close
operator|!=
name|old_confirm_on_close
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"confirm-on-close"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-confirm-on-close"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|save_session_info
operator|!=
name|old_save_session_info
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"save-session-info"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-save-session-info"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|save_device_status
operator|!=
name|old_save_device_status
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"save-device-status"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-save-device-status"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|always_restore_session
operator|!=
name|old_always_restore_session
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"always-restore-session"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_width
operator|!=
name|old_default_width
operator|||
name|default_height
operator|!=
name|old_default_height
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-image-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_units
operator|!=
name|old_default_units
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-units"
argument_list|)
expr_stmt|;
if|if
condition|(
name|ABS
argument_list|(
name|default_xresolution
operator|-
name|old_default_xresolution
argument_list|)
operator|>
name|GIMP_MIN_RESOLUTION
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-xresolution"
argument_list|)
expr_stmt|;
if|if
condition|(
name|ABS
argument_list|(
name|default_yresolution
operator|-
name|old_default_yresolution
argument_list|)
operator|>
name|GIMP_MIN_RESOLUTION
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-yresolution"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_resolution_units
operator|!=
name|old_default_resolution_units
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-resolution-units"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_type
operator|!=
name|old_default_type
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-image-type"
argument_list|)
expr_stmt|;
if|if
condition|(
name|preview_size
operator|!=
name|old_preview_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"preview-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|perfectmouse
operator|!=
name|old_perfectmouse
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"perfect-mouse"
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_type
operator|!=
name|old_transparency_type
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"transparency-type"
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_size
operator|!=
name|old_transparency_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"transparency-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|using_xserver_resolution
operator|!=
name|old_using_xserver_resolution
operator|||
name|ABS
argument_list|(
name|monitor_xres
operator|-
name|old_monitor_xres
argument_list|)
operator|>
name|GIMP_MIN_RESOLUTION
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"monitor-xresolution"
argument_list|)
expr_stmt|;
if|if
condition|(
name|using_xserver_resolution
operator|!=
name|old_using_xserver_resolution
operator|||
name|ABS
argument_list|(
name|monitor_yres
operator|-
name|old_monitor_yres
argument_list|)
operator|>
name|GIMP_MIN_RESOLUTION
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"monitor-yresolution"
argument_list|)
expr_stmt|;
if|if
condition|(
name|edit_num_processors
operator|!=
name|num_processors
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"num-processors"
argument_list|)
expr_stmt|;
if|if
condition|(
name|edit_stingy_memory_use
operator|!=
name|stingy_memory_use
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"stingy-memory-use"
argument_list|)
expr_stmt|;
name|stingy_memory_use
operator|=
name|edit_stingy_memory_use
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_tile_cache_size
operator|!=
name|tile_cache_size
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"tile-cache-size"
argument_list|)
expr_stmt|;
name|tile_cache_size
operator|=
name|edit_tile_cache_size
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_install_cmap
operator|!=
name|old_install_cmap
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"install-colormap"
argument_list|)
expr_stmt|;
name|install_cmap
operator|=
name|edit_install_cmap
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_cycled_marching_ants
operator|!=
name|cycled_marching_ants
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"colormap-cycling"
argument_list|)
expr_stmt|;
name|cycled_marching_ants
operator|=
name|edit_cycled_marching_ants
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_last_opened_size
operator|!=
name|last_opened_size
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"last-opened-size"
argument_list|)
expr_stmt|;
name|last_opened_size
operator|=
name|edit_last_opened_size
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|temp_path
argument_list|,
name|edit_temp_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"temp-path"
argument_list|)
expr_stmt|;
name|temp_path
operator|=
name|edit_temp_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|swap_path
argument_list|,
name|edit_swap_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"swap-path"
argument_list|)
expr_stmt|;
name|swap_path
operator|=
name|edit_swap_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|plug_in_path
argument_list|,
name|edit_plug_in_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"plug-in-path"
argument_list|)
expr_stmt|;
name|plug_in_path
operator|=
name|edit_plug_in_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|module_path
argument_list|,
name|edit_module_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"module-path"
argument_list|)
expr_stmt|;
name|module_path
operator|=
name|edit_module_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|brush_path
argument_list|,
name|edit_brush_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"brush-path"
argument_list|)
expr_stmt|;
name|brush_path
operator|=
name|edit_brush_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|pattern_path
argument_list|,
name|edit_pattern_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"pattern-path"
argument_list|)
expr_stmt|;
name|pattern_path
operator|=
name|edit_pattern_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|palette_path
argument_list|,
name|edit_palette_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"palette-path"
argument_list|)
expr_stmt|;
name|palette_path
operator|=
name|edit_palette_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|gradient_path
argument_list|,
name|edit_gradient_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"gradient-path"
argument_list|)
expr_stmt|;
name|gradient_path
operator|=
name|edit_gradient_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|using_xserver_resolution
condition|)
block|{
comment|/* special value of 0 for either x or y res in the gimprc file        * means use the xserver's current resolution */
name|monitor_xres
operator|=
literal|0.0
expr_stmt|;
name|monitor_yres
operator|=
literal|0.0
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|image_title_format
argument_list|,
name|old_image_title_format
argument_list|)
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"image-title-format"
argument_list|)
expr_stmt|;
if|if
condition|(
name|global_paint_options
operator|!=
name|old_global_paint_options
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"global-paint-options"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"no-global-paint-options"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|max_new_image_size
operator|!=
name|old_max_new_image_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"max-new-image-size"
argument_list|)
expr_stmt|;
name|save_gimprc
argument_list|(
operator|&
name|update
argument_list|,
operator|&
name|remove
argument_list|)
expr_stmt|;
if|if
condition|(
name|using_xserver_resolution
condition|)
name|gdisplay_xserver_resolution
argument_list|(
operator|&
name|monitor_xres
argument_list|,
operator|&
name|monitor_yres
argument_list|)
expr_stmt|;
comment|/* Restore variables which must not change */
name|stingy_memory_use
operator|=
name|save_stingy_memory_use
expr_stmt|;
name|tile_cache_size
operator|=
name|save_tile_cache_size
expr_stmt|;
name|install_cmap
operator|=
name|save_install_cmap
expr_stmt|;
name|cycled_marching_ants
operator|=
name|save_cycled_marching_ants
expr_stmt|;
name|last_opened_size
operator|=
name|save_last_opened_size
expr_stmt|;
name|num_processors
operator|=
name|save_num_processors
expr_stmt|;
name|temp_path
operator|=
name|save_temp_path
expr_stmt|;
name|swap_path
operator|=
name|save_swap_path
expr_stmt|;
name|plug_in_path
operator|=
name|save_plug_in_path
expr_stmt|;
name|module_path
operator|=
name|save_module_path
expr_stmt|;
name|brush_path
operator|=
name|save_brush_path
expr_stmt|;
name|pattern_path
operator|=
name|save_pattern_path
expr_stmt|;
name|palette_path
operator|=
name|save_palette_path
expr_stmt|;
name|gradient_path
operator|=
name|save_gradient_path
expr_stmt|;
if|if
condition|(
name|restart_notification
condition|)
name|g_message
argument_list|(
name|_
argument_list|(
literal|"You will need to restart GIMP for these changes to take "
literal|"effect."
argument_list|)
argument_list|)
expr_stmt|;
name|g_list_free
argument_list|(
name|update
argument_list|)
expr_stmt|;
name|g_list_free
argument_list|(
name|remove
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_cancel_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|gtk_widget_destroy
argument_list|(
name|dlg
argument_list|)
expr_stmt|;
name|prefs_dlg
operator|=
name|NULL
expr_stmt|;
name|levels_of_undo
operator|=
name|old_levels_of_undo
expr_stmt|;
name|marching_speed
operator|=
name|old_marching_speed
expr_stmt|;
name|allow_resize_windows
operator|=
name|old_allow_resize_windows
expr_stmt|;
name|auto_save
operator|=
name|old_auto_save
expr_stmt|;
name|no_cursor_updating
operator|=
name|old_no_cursor_updating
expr_stmt|;
name|perfectmouse
operator|=
name|old_perfectmouse
expr_stmt|;
name|show_tool_tips
operator|=
name|old_show_tool_tips
expr_stmt|;
name|show_rulers
operator|=
name|old_show_rulers
expr_stmt|;
name|show_statusbar
operator|=
name|old_show_statusbar
expr_stmt|;
name|cubic_interpolation
operator|=
name|old_cubic_interpolation
expr_stmt|;
name|confirm_on_close
operator|=
name|old_confirm_on_close
expr_stmt|;
name|save_session_info
operator|=
name|old_save_session_info
expr_stmt|;
name|save_device_status
operator|=
name|old_save_device_status
expr_stmt|;
name|default_width
operator|=
name|old_default_width
expr_stmt|;
name|default_height
operator|=
name|old_default_height
expr_stmt|;
name|default_units
operator|=
name|old_default_units
expr_stmt|;
name|default_xresolution
operator|=
name|old_default_xresolution
expr_stmt|;
name|default_yresolution
operator|=
name|old_default_yresolution
expr_stmt|;
name|default_resolution_units
operator|=
name|old_default_resolution_units
expr_stmt|;
name|default_type
operator|=
name|old_default_type
expr_stmt|;
name|monitor_xres
operator|=
name|old_monitor_xres
expr_stmt|;
name|monitor_yres
operator|=
name|old_monitor_yres
expr_stmt|;
name|using_xserver_resolution
operator|=
name|old_using_xserver_resolution
expr_stmt|;
name|num_processors
operator|=
name|old_num_processors
expr_stmt|;
name|max_new_image_size
operator|=
name|old_max_new_image_size
expr_stmt|;
if|if
condition|(
name|preview_size
operator|!=
name|old_preview_size
condition|)
block|{
name|lc_dialog_rebuild
argument_list|(
name|old_preview_size
argument_list|)
expr_stmt|;
name|layer_select_update_preview_size
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|transparency_type
operator|!=
name|old_transparency_type
operator|)
operator|||
operator|(
name|transparency_size
operator|!=
name|old_transparency_size
operator|)
condition|)
block|{
name|transparency_type
operator|=
name|old_transparency_type
expr_stmt|;
name|transparency_size
operator|=
name|old_transparency_size
expr_stmt|;
name|render_setup
argument_list|(
name|transparency_type
argument_list|,
name|transparency_size
argument_list|)
expr_stmt|;
name|gimage_foreach
argument_list|(
operator|(
name|GFunc
operator|)
name|layer_invalidate_previews
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimage_invalidate_previews
argument_list|()
expr_stmt|;
name|gdisplays_expose_full
argument_list|()
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
name|edit_stingy_memory_use
operator|=
name|old_stingy_memory_use
expr_stmt|;
name|edit_tile_cache_size
operator|=
name|old_tile_cache_size
expr_stmt|;
name|edit_install_cmap
operator|=
name|old_install_cmap
expr_stmt|;
name|edit_cycled_marching_ants
operator|=
name|old_cycled_marching_ants
expr_stmt|;
name|edit_last_opened_size
operator|=
name|old_last_opened_size
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_temp_path
argument_list|,
name|old_temp_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_swap_path
argument_list|,
name|old_swap_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_plug_in_path
argument_list|,
name|old_plug_in_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_module_path
argument_list|,
name|old_module_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_brush_path
argument_list|,
name|old_brush_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_pattern_path
argument_list|,
name|old_pattern_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_palette_path
argument_list|,
name|old_palette_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_gradient_path
argument_list|,
name|old_gradient_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|image_title_format
argument_list|,
name|old_image_title_format
argument_list|)
expr_stmt|;
name|paint_options_set_global
argument_list|(
name|old_global_paint_options
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_toggle_callback (GtkWidget * widget,gpointer data)
name|file_prefs_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|val
decl_stmt|;
if|if
condition|(
name|data
operator|==
operator|&
name|allow_resize_windows
condition|)
name|allow_resize_windows
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|auto_save
condition|)
name|auto_save
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|no_cursor_updating
condition|)
name|no_cursor_updating
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|perfectmouse
condition|)
name|perfectmouse
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|show_tool_tips
condition|)
name|show_tool_tips
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|show_rulers
condition|)
name|show_rulers
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|show_statusbar
condition|)
name|show_statusbar
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|cubic_interpolation
condition|)
name|cubic_interpolation
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|confirm_on_close
condition|)
name|confirm_on_close
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|save_session_info
condition|)
name|save_session_info
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|save_device_status
condition|)
name|save_device_status
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|always_restore_session
condition|)
name|always_restore_session
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_stingy_memory_use
condition|)
name|edit_stingy_memory_use
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_install_cmap
condition|)
name|edit_install_cmap
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_cycled_marching_ants
condition|)
name|edit_cycled_marching_ants
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|default_type
condition|)
block|{
name|default_type
operator|=
operator|(
name|long
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|data
operator|==
operator|&
name|transparency_type
operator|)
operator|||
operator|(
name|data
operator|==
operator|&
name|transparency_size
operator|)
condition|)
block|{
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
operator|(
name|long
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|render_setup
argument_list|(
name|transparency_type
argument_list|,
name|transparency_size
argument_list|)
expr_stmt|;
name|gimage_foreach
argument_list|(
operator|(
name|GFunc
operator|)
name|layer_invalidate_previews
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimage_invalidate_previews
argument_list|()
expr_stmt|;
name|gdisplays_expose_full
argument_list|()
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|global_paint_options
condition|)
name|paint_options_set_global
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_preview_size_callback (GtkWidget * widget,gpointer data)
name|file_prefs_preview_size_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|lc_dialog_rebuild
argument_list|(
operator|(
name|long
operator|)
name|data
argument_list|)
expr_stmt|;
name|layer_select_update_preview_size
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_mem_size_callback (GtkWidget * widget,gpointer data)
name|file_prefs_mem_size_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|mem_size
decl_stmt|;
name|int
name|divided_mem_size
decl_stmt|;
name|int
name|mem_size_unit
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|mem_size
operator|=
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"mem_size"
argument_list|)
operator|)
condition|)
return|return;
name|divided_mem_size
operator|=
operator|(
name|int
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"divided_mem_size"
argument_list|)
expr_stmt|;
name|mem_size_unit
operator|=
operator|(
name|int
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"mem_size_unit"
argument_list|)
expr_stmt|;
name|divided_mem_size
operator|=
name|GTK_ADJUSTMENT
argument_list|(
name|widget
argument_list|)
operator|->
name|value
expr_stmt|;
operator|*
name|mem_size
operator|=
name|divided_mem_size
operator|*
name|mem_size_unit
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"divided_mem_size"
argument_list|,
operator|(
name|gpointer
operator|)
name|divided_mem_size
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_mem_size_unit_callback (GtkWidget * widget,gpointer data)
name|file_prefs_mem_size_unit_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkObject
modifier|*
name|adjustment
decl_stmt|;
name|int
name|new_unit
decl_stmt|;
name|int
modifier|*
name|mem_size
decl_stmt|;
name|int
name|divided_mem_size
decl_stmt|;
name|int
name|mem_size_unit
decl_stmt|;
name|adjustment
operator|=
name|GTK_OBJECT
argument_list|(
name|data
argument_list|)
expr_stmt|;
name|new_unit
operator|=
operator|(
name|int
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|mem_size
operator|=
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"mem_size"
argument_list|)
operator|)
condition|)
return|return;
name|divided_mem_size
operator|=
operator|(
name|int
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"divided_mem_size"
argument_list|)
expr_stmt|;
name|mem_size_unit
operator|=
operator|(
name|int
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"mem_size_unit"
argument_list|)
expr_stmt|;
if|if
condition|(
name|new_unit
operator|!=
name|mem_size_unit
condition|)
block|{
name|divided_mem_size
operator|=
operator|*
name|mem_size
operator|/
name|new_unit
expr_stmt|;
name|mem_size_unit
operator|=
name|new_unit
expr_stmt|;
name|gtk_signal_handler_block_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
name|mem_size
argument_list|)
expr_stmt|;
name|gtk_adjustment_set_value
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
name|divided_mem_size
argument_list|)
expr_stmt|;
name|gtk_signal_handler_unblock_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
name|mem_size
argument_list|)
expr_stmt|;
block|}
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"divided_mem_size"
argument_list|,
operator|(
name|gpointer
operator|)
name|divided_mem_size
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"mem_size_unit"
argument_list|,
operator|(
name|gpointer
operator|)
name|mem_size_unit
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_int_adjustment_callback (GtkAdjustment * adj,gpointer data)
name|file_prefs_int_adjustment_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adj
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
operator|(
name|int
operator|)
name|adj
operator|->
name|value
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_string_callback (GtkWidget * widget,gpointer data)
name|file_prefs_string_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
name|file_prefs_strset
argument_list|(
name|val
argument_list|,
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_filename_callback (GtkWidget * widget,gpointer data)
name|file_prefs_filename_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
name|file_prefs_strset
argument_list|(
name|val
argument_list|,
name|gimp_file_selection_get_filename
argument_list|(
name|GIMP_FILE_SELECTION
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_path_callback (GtkWidget * widget,gpointer data)
name|file_prefs_path_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
name|file_prefs_strset
argument_list|(
name|val
argument_list|,
name|gimp_path_editor_get_path
argument_list|(
name|GIMP_PATH_EDITOR
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_clear_session_info_callback (GtkWidget * widget,gpointer data)
name|file_prefs_clear_session_info_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|g_list_free
argument_list|(
name|session_info_updates
argument_list|)
expr_stmt|;
name|session_info_updates
operator|=
name|NULL
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_default_size_callback (GtkWidget * widget,gpointer data)
name|file_prefs_default_size_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|default_width
operator|=
call|(
name|int
call|)
argument_list|(
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
operator|+
literal|0.5
argument_list|)
expr_stmt|;
name|default_height
operator|=
call|(
name|int
call|)
argument_list|(
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|1
argument_list|)
operator|+
literal|0.5
argument_list|)
expr_stmt|;
name|default_units
operator|=
name|gimp_size_entry_get_unit
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_default_resolution_callback (GtkWidget * widget,gpointer data)
name|file_prefs_default_resolution_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|size_sizeentry
decl_stmt|;
specifier|static
name|gdouble
name|xres
init|=
literal|0.0
decl_stmt|;
specifier|static
name|gdouble
name|yres
init|=
literal|0.0
decl_stmt|;
name|gdouble
name|new_xres
decl_stmt|;
name|gdouble
name|new_yres
decl_stmt|;
name|new_xres
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|new_yres
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|size_sizeentry
operator|=
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"size_sizeentry"
argument_list|)
expr_stmt|;
if|if
condition|(
name|gimp_chain_button_get_active
argument_list|(
name|GIMP_CHAIN_BUTTON
argument_list|(
name|data
argument_list|)
argument_list|)
condition|)
block|{
if|if
condition|(
name|new_xres
operator|!=
name|xres
condition|)
block|{
name|yres
operator|=
name|new_yres
operator|=
name|xres
operator|=
name|new_xres
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|1
argument_list|,
name|yres
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|new_yres
operator|!=
name|yres
condition|)
block|{
name|xres
operator|=
name|new_xres
operator|=
name|yres
operator|=
name|new_yres
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|,
name|xres
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|new_xres
operator|!=
name|xres
condition|)
name|xres
operator|=
name|new_xres
expr_stmt|;
if|if
condition|(
name|new_yres
operator|!=
name|yres
condition|)
name|yres
operator|=
name|new_yres
expr_stmt|;
block|}
name|gimp_size_entry_set_resolution
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|size_sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|xres
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_resolution
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|size_sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|yres
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|default_width
operator|=
call|(
name|gint
call|)
argument_list|(
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|size_sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|)
operator|+
literal|0.5
argument_list|)
expr_stmt|;
name|default_height
operator|=
call|(
name|gint
call|)
argument_list|(
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|size_sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|)
operator|+
literal|0.5
argument_list|)
expr_stmt|;
name|default_xresolution
operator|=
name|xres
expr_stmt|;
name|default_yresolution
operator|=
name|yres
expr_stmt|;
name|default_resolution_units
operator|=
name|gimp_size_entry_get_unit
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_res_source_callback (GtkWidget * widget,gpointer data)
name|file_prefs_res_source_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|resolution_xserver_label
decl_stmt|;
name|GtkWidget
modifier|*
name|monitor_resolution_sizeentry
decl_stmt|;
name|resolution_xserver_label
operator|=
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"resolution_xserver_label"
argument_list|)
expr_stmt|;
name|monitor_resolution_sizeentry
operator|=
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"monitor_resolution_sizeentry"
argument_list|)
expr_stmt|;
name|gtk_widget_set_sensitive
argument_list|(
name|resolution_xserver_label
argument_list|,
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
argument_list|)
expr_stmt|;
name|gtk_widget_set_sensitive
argument_list|(
name|monitor_resolution_sizeentry
argument_list|,
operator|!
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
argument_list|)
expr_stmt|;
if|if
condition|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
condition|)
block|{
name|gdisplay_xserver_resolution
argument_list|(
operator|&
name|monitor_xres
argument_list|,
operator|&
name|monitor_yres
argument_list|)
expr_stmt|;
name|using_xserver_resolution
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|monitor_resolution_sizeentry
condition|)
block|{
name|monitor_xres
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|monitor_resolution_sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|monitor_yres
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|monitor_resolution_sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
name|using_xserver_resolution
operator|=
name|FALSE
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_monitor_resolution_callback (GtkWidget * widget,gpointer data)
name|file_prefs_monitor_resolution_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
specifier|static
name|gdouble
name|xres
init|=
literal|0.0
decl_stmt|;
specifier|static
name|gdouble
name|yres
init|=
literal|0.0
decl_stmt|;
name|gdouble
name|new_xres
decl_stmt|;
name|gdouble
name|new_yres
decl_stmt|;
name|new_xres
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|new_yres
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|gimp_chain_button_get_active
argument_list|(
name|GIMP_CHAIN_BUTTON
argument_list|(
name|data
argument_list|)
argument_list|)
condition|)
block|{
if|if
condition|(
name|new_xres
operator|!=
name|xres
condition|)
block|{
name|yres
operator|=
name|new_yres
operator|=
name|xres
operator|=
name|new_xres
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|1
argument_list|,
name|yres
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|new_yres
operator|!=
name|yres
condition|)
block|{
name|xres
operator|=
name|new_xres
operator|=
name|yres
operator|=
name|new_yres
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|,
name|xres
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|new_xres
operator|!=
name|xres
condition|)
name|xres
operator|=
name|new_xres
expr_stmt|;
if|if
condition|(
name|new_yres
operator|!=
name|yres
condition|)
name|yres
operator|=
name|new_yres
expr_stmt|;
block|}
name|monitor_xres
operator|=
name|xres
expr_stmt|;
name|monitor_yres
operator|=
name|yres
expr_stmt|;
block|}
end_function

begin_comment
comment|/* ********************************************************************  *  convenience constructors test site ;)  */
end_comment

begin_comment
comment|/*  local callbacks of gimp_dialog_new ()  */
end_comment

begin_function
specifier|static
name|int
DECL|function|gimp_dialog_delete_callback (GtkWidget * widget,GdkEvent * event,gpointer data)
name|gimp_dialog_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEvent
modifier|*
name|event
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkSignalFunc
name|cancel_callback
decl_stmt|;
name|GtkWidget
modifier|*
name|cancel_widget
decl_stmt|;
name|cancel_callback
operator|=
operator|(
name|GtkSignalFunc
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"gimp_dialog_cancel_callback"
argument_list|)
expr_stmt|;
name|cancel_widget
operator|=
operator|(
name|GtkWidget
operator|*
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"gimp_dialog_cancel_widget"
argument_list|)
expr_stmt|;
comment|/* the cancel callback has to destroy the dialog */
if|if
condition|(
name|cancel_callback
condition|)
call|(
modifier|*
name|cancel_callback
call|)
argument_list|(
name|cancel_widget
argument_list|,
name|data
argument_list|)
expr_stmt|;
return|return
name|TRUE
return|;
block|}
end_function

begin_comment
comment|/* #include "/home/mitschel/wilber3.xpm"  static void gimp_dialog_realize_callback (GtkWidget *widget, 			      gpointer   data)  {   static GdkPixmap *wilber_pixmap = NULL;   static GdkBitmap *wilber_mask   = NULL;   GtkStyle         *style;    style = gtk_widget_get_style (widget);    if (wilber_pixmap == NULL)     wilber_pixmap =       gdk_pixmap_create_from_xpm_d (widget->window,&wilber_mask,&style->bg[GTK_STATE_NORMAL], 				    wilber3_xpm);    gdk_window_set_icon (widget->window, NULL, 		       wilber_pixmap, wilber_mask); } */
end_comment

begin_comment
comment|/*  this is an experimental one  *  I tried to fold the entire dialog creation and the ActionArea stuff  *  into one function. Might be not general enough.  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_dialog_new (const gchar * title,const gchar * wmclass_name,GtkWindowPosition position,gint allow_shrink,gint allow_grow,gint auto_shrink,...)
name|gimp_dialog_new
parameter_list|(
specifier|const
name|gchar
modifier|*
name|title
parameter_list|,
specifier|const
name|gchar
modifier|*
name|wmclass_name
parameter_list|,
name|GtkWindowPosition
name|position
parameter_list|,
name|gint
name|allow_shrink
parameter_list|,
name|gint
name|allow_grow
parameter_list|,
name|gint
name|auto_shrink
parameter_list|,
comment|/* specify action area buttons as va_list: 		  *  gchar         *label, 		  *  GtkSignalFunc  callback, 		  *  gpointer       data, 		  *  gboolean       default_action, 		  *  gboolean       connect_delete, 		  */
modifier|...
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|dialog
decl_stmt|;
name|GtkWidget
modifier|*
name|hbbox
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
comment|/*  action area variables  */
name|gchar
modifier|*
name|label
decl_stmt|;
name|GtkSignalFunc
name|callback
decl_stmt|;
name|gpointer
name|data
decl_stmt|;
name|gboolean
name|default_action
decl_stmt|;
name|gboolean
name|connect_delete
decl_stmt|;
name|va_list
name|args
decl_stmt|;
name|gboolean
name|delete_connected
init|=
name|FALSE
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|title
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|wmclass_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|dialog
operator|=
name|gtk_dialog_new
argument_list|()
expr_stmt|;
name|gtk_window_set_wmclass
argument_list|(
name|GTK_WINDOW
argument_list|(
name|dialog
argument_list|)
argument_list|,
name|wmclass_name
argument_list|,
literal|"Gimp"
argument_list|)
expr_stmt|;
name|gtk_window_set_title
argument_list|(
name|GTK_WINDOW
argument_list|(
name|dialog
argument_list|)
argument_list|,
name|title
argument_list|)
expr_stmt|;
name|gtk_window_set_position
argument_list|(
name|GTK_WINDOW
argument_list|(
name|dialog
argument_list|)
argument_list|,
name|position
argument_list|)
expr_stmt|;
name|gtk_window_set_policy
argument_list|(
name|GTK_WINDOW
argument_list|(
name|dialog
argument_list|)
argument_list|,
name|allow_grow
argument_list|,
name|allow_shrink
argument_list|,
name|auto_shrink
argument_list|)
expr_stmt|;
comment|/*  prepare the action_area  */
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dialog
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_set_homogeneous
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dialog
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|hbbox
operator|=
name|gtk_hbutton_box_new
argument_list|()
expr_stmt|;
name|gtk_button_box_set_spacing
argument_list|(
name|GTK_BUTTON_BOX
argument_list|(
name|hbbox
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_end
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dialog
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|hbbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbbox
argument_list|)
expr_stmt|;
comment|/*  the action_area buttons  */
name|va_start
argument_list|(
name|args
argument_list|,
name|auto_shrink
argument_list|)
expr_stmt|;
name|label
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gchar
operator|*
argument_list|)
expr_stmt|;
while|while
condition|(
name|label
condition|)
block|{
name|callback
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|GtkSignalFunc
argument_list|)
expr_stmt|;
name|data
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gpointer
argument_list|)
expr_stmt|;
name|default_action
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gboolean
argument_list|)
expr_stmt|;
name|connect_delete
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gboolean
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/*  pass data as user_data if data != NULL, or the dialog otherwise  */
if|if
condition|(
name|callback
condition|)
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|callback
argument_list|)
argument_list|,
name|data
condition|?
name|data
else|:
name|dialog
argument_list|)
expr_stmt|;
if|if
condition|(
name|connect_delete
operator|&&
name|callback
operator|&&
operator|!
name|delete_connected
condition|)
block|{
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|dialog
argument_list|)
argument_list|,
literal|"gimp_dialog_cancel_callback"
argument_list|,
name|callback
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|dialog
argument_list|)
argument_list|,
literal|"gimp_dialog_cancel_widget"
argument_list|,
name|button
argument_list|)
expr_stmt|;
comment|/*  catch the WM delete event  */
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|dialog
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
operator|(
name|GdkEventFunc
operator|)
name|gimp_dialog_delete_callback
argument_list|,
name|data
condition|?
name|data
else|:
name|dialog
argument_list|)
expr_stmt|;
name|delete_connected
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|default_action
condition|)
name|gtk_widget_grab_default
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|label
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gchar
operator|*
argument_list|)
expr_stmt|;
block|}
name|va_end
argument_list|(
name|args
argument_list|)
expr_stmt|;
comment|/*  catch the WM delete event if not already done  */
if|if
condition|(
operator|!
name|delete_connected
condition|)
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|dialog
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
operator|(
name|GdkEventFunc
operator|)
name|gimp_dialog_delete_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/*  the realize callback sets the WM icon  */
comment|/*   gtk_signal_connect (GTK_OBJECT (dialog), "realize", 		      (GtkSignalFunc) gimp_dialog_realize_callback, 		      NULL);   */
return|return
name|dialog
return|;
block|}
end_function

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_option_menu_new (GtkSignalFunc menu_item_callback,gpointer initial,...)
name|gimp_option_menu_new
parameter_list|(
name|GtkSignalFunc
name|menu_item_callback
parameter_list|,
name|gpointer
name|initial
parameter_list|,
comment|/* user_data */
comment|/* specify menu items as va_list: 		       *  gchar     *label, 		       *  gpointer   data, 		       *  gpointer   user_data, 		       */
modifier|...
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GtkWidget
modifier|*
name|menuitem
decl_stmt|;
name|GtkWidget
modifier|*
name|optionmenu
decl_stmt|;
comment|/*  menu item variables  */
name|gchar
modifier|*
name|label
decl_stmt|;
name|gpointer
name|data
decl_stmt|;
name|gpointer
name|user_data
decl_stmt|;
name|va_list
name|args
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|gint
name|initial_index
decl_stmt|;
name|menu
operator|=
name|gtk_menu_new
argument_list|()
expr_stmt|;
comment|/*  create the menu items  */
name|initial_index
operator|=
literal|0
expr_stmt|;
name|va_start
argument_list|(
name|args
argument_list|,
name|initial
argument_list|)
expr_stmt|;
name|label
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gchar
operator|*
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|label
condition|;
name|i
operator|++
control|)
block|{
name|data
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gpointer
argument_list|)
expr_stmt|;
name|user_data
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gpointer
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
name|menu_item_callback
argument_list|,
name|data
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
name|user_data
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
comment|/*  remember the initial menu item  */
if|if
condition|(
name|user_data
operator|==
name|initial
condition|)
name|initial_index
operator|=
name|i
expr_stmt|;
name|label
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gchar
operator|*
argument_list|)
expr_stmt|;
block|}
name|va_end
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|optionmenu
operator|=
name|gtk_option_menu_new
argument_list|()
expr_stmt|;
name|gtk_option_menu_set_menu
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
comment|/*  select the initial menu item  */
name|gtk_option_menu_set_history
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|initial_index
argument_list|)
expr_stmt|;
return|return
name|optionmenu
return|;
block|}
end_function

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_radio_group_new (GtkSignalFunc radio_button_callback,gpointer initial,...)
name|gimp_radio_group_new
parameter_list|(
name|GtkSignalFunc
name|radio_button_callback
parameter_list|,
name|gpointer
name|initial
parameter_list|,
comment|/* user_data */
comment|/* specify radio buttons as va_list: 		       *  gchar     *label, 		       *  gpointer   data, 		       *  gpointer   user_data, 		       */
modifier|...
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|GSList
modifier|*
name|group
decl_stmt|;
comment|/*  radio button variables  */
name|gchar
modifier|*
name|label
decl_stmt|;
name|gpointer
name|data
decl_stmt|;
name|gpointer
name|user_data
decl_stmt|;
name|va_list
name|args
decl_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|group
operator|=
name|NULL
expr_stmt|;
comment|/*  create the radio buttons  */
name|va_start
argument_list|(
name|args
argument_list|,
name|initial
argument_list|)
expr_stmt|;
name|label
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gchar
operator|*
argument_list|)
expr_stmt|;
while|while
condition|(
name|label
condition|)
block|{
name|data
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gpointer
argument_list|)
expr_stmt|;
name|user_data
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gpointer
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|radio_button_callback
argument_list|,
name|data
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|user_data
argument_list|)
expr_stmt|;
comment|/*  press the initially active radio button  */
if|if
condition|(
name|user_data
operator|==
name|initial
condition|)
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|label
operator|=
name|va_arg
argument_list|(
name|args
argument_list|,
name|gchar
operator|*
argument_list|)
expr_stmt|;
block|}
name|va_end
argument_list|(
name|args
argument_list|)
expr_stmt|;
return|return
name|vbox
return|;
block|}
end_function

begin_comment
comment|/*  this might be the standard gimp spinbutton  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_spin_button_new (GtkObject ** adjustment,gfloat value,gfloat lower,gfloat upper,gfloat step_increment,gfloat page_increment,gfloat page_size,gfloat climb_rate,guint digits)
name|gimp_spin_button_new
parameter_list|(
name|GtkObject
modifier|*
modifier|*
name|adjustment
parameter_list|,
comment|/* return value */
name|gfloat
name|value
parameter_list|,
name|gfloat
name|lower
parameter_list|,
name|gfloat
name|upper
parameter_list|,
name|gfloat
name|step_increment
parameter_list|,
name|gfloat
name|page_increment
parameter_list|,
name|gfloat
name|page_size
parameter_list|,
name|gfloat
name|climb_rate
parameter_list|,
name|guint
name|digits
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|spinbutton
decl_stmt|;
operator|*
name|adjustment
operator|=
name|gtk_adjustment_new
argument_list|(
name|value
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|,
name|step_increment
argument_list|,
name|page_increment
argument_list|,
name|page_size
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gtk_spin_button_new
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
operator|*
name|adjustment
argument_list|)
argument_list|,
name|climb_rate
argument_list|,
name|digits
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_shadow_type
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|GTK_SHADOW_NONE
argument_list|)
expr_stmt|;
name|gtk_spin_button_set_numeric
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|spinbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|spinbutton
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|spinbutton
return|;
block|}
end_function

begin_comment
comment|/*  add aligned label& widget to a two-column table  */
end_comment

begin_function
name|void
DECL|function|gimp_table_attach_aligned (GtkTable * table,gint row,gchar * text,gfloat xalign,gfloat yalign,GtkWidget * widget,gboolean left_adjust)
name|gimp_table_attach_aligned
parameter_list|(
name|GtkTable
modifier|*
name|table
parameter_list|,
name|gint
name|row
parameter_list|,
name|gchar
modifier|*
name|text
parameter_list|,
name|gfloat
name|xalign
parameter_list|,
name|gfloat
name|yalign
parameter_list|,
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gboolean
name|left_adjust
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|text
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
name|xalign
argument_list|,
name|yalign
argument_list|)
expr_stmt|;
name|gtk_label_set_justify
argument_list|(
name|GTK_LABEL
argument_list|(
name|label
argument_list|)
argument_list|,
name|GTK_JUSTIFY_RIGHT
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|table
argument_list|,
name|GTK_WIDGET
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|row
argument_list|,
name|row
operator|+
literal|1
argument_list|,
name|GTK_SHRINK
operator||
name|GTK_FILL
argument_list|,
name|GTK_SHRINK
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
if|if
condition|(
name|left_adjust
condition|)
block|{
name|GtkWidget
modifier|*
name|alignment
decl_stmt|;
name|alignment
operator|=
name|gtk_alignment_new
argument_list|(
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|table
argument_list|,
name|alignment
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|row
argument_list|,
name|row
operator|+
literal|1
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|alignment
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|alignment
argument_list|)
argument_list|,
name|widget
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|gtk_table_attach_defaults
argument_list|(
name|table
argument_list|,
name|widget
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|row
argument_list|,
name|row
operator|+
literal|1
argument_list|)
expr_stmt|;
block|}
name|gtk_widget_show
argument_list|(
name|widget
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**********************************************************************  *  preferences-specific GUI helpers  */
end_comment

begin_comment
comment|/*  create a new notebook page  */
end_comment

begin_function
specifier|static
name|GtkWidget
modifier|*
DECL|function|file_prefs_notebook_append_page (GtkNotebook * notebook,gchar * notebook_label,GtkCTree * ctree,gchar * tree_label,GtkCTreeNode * parent,GtkCTreeNode ** new_node,gint page_index)
name|file_prefs_notebook_append_page
parameter_list|(
name|GtkNotebook
modifier|*
name|notebook
parameter_list|,
name|gchar
modifier|*
name|notebook_label
parameter_list|,
name|GtkCTree
modifier|*
name|ctree
parameter_list|,
name|gchar
modifier|*
name|tree_label
parameter_list|,
name|GtkCTreeNode
modifier|*
name|parent
parameter_list|,
name|GtkCTreeNode
modifier|*
modifier|*
name|new_node
parameter_list|,
name|gint
name|page_index
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|out_vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|gchar
modifier|*
name|titles
index|[
literal|1
index|]
decl_stmt|;
name|out_vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_vbox
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|NULL
argument_list|)
expr_stmt|;
name|gtk_frame_set_shadow_type
argument_list|(
name|GTK_FRAME
argument_list|(
name|frame
argument_list|)
argument_list|,
name|GTK_SHADOW_OUT
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|out_vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|notebook_label
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_misc_set_padding
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_vbox
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|titles
index|[
literal|0
index|]
operator|=
name|tree_label
expr_stmt|;
operator|*
name|new_node
operator|=
name|gtk_ctree_insert_node
argument_list|(
name|ctree
argument_list|,
name|parent
argument_list|,
name|NULL
argument_list|,
name|titles
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_ctree_node_set_row_data
argument_list|(
name|ctree
argument_list|,
operator|*
name|new_node
argument_list|,
operator|(
name|gpointer
operator|)
name|page_index
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|notebook
argument_list|,
name|out_vbox
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|vbox
return|;
block|}
end_function

begin_comment
comment|/*  select a notebook page  */
end_comment

begin_function
specifier|static
name|void
DECL|function|file_pref_tree_select_callback (GtkWidget * widget,GtkCTreeNode * node)
name|file_pref_tree_select_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkCTreeNode
modifier|*
name|node
parameter_list|)
block|{
name|GtkNotebook
modifier|*
name|notebook
decl_stmt|;
name|gint
name|page
decl_stmt|;
if|if
condition|(
operator|!
name|GTK_CLIST
argument_list|(
name|widget
argument_list|)
operator|->
name|selection
condition|)
return|return;
name|notebook
operator|=
operator|(
name|GtkNotebook
operator|*
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|page
operator|=
operator|(
name|gint
operator|)
name|gtk_ctree_node_get_row_data
argument_list|(
name|GTK_CTREE
argument_list|(
name|widget
argument_list|)
argument_list|,
name|node
argument_list|)
expr_stmt|;
name|gtk_notebook_set_page
argument_list|(
name|notebook
argument_list|,
name|page
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/************************************************************************  *  create the preferences dialog  */
end_comment

begin_function
name|void
DECL|function|file_pref_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_pref_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|ctree
decl_stmt|;
name|gchar
modifier|*
name|titles
index|[
literal|1
index|]
decl_stmt|;
name|GtkCTreeNode
modifier|*
name|top_insert
decl_stmt|;
name|GtkCTreeNode
modifier|*
name|child_insert
decl_stmt|;
name|gint
name|page_index
decl_stmt|;
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|notebook
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox2
decl_stmt|;
name|GtkWidget
modifier|*
name|hbox
decl_stmt|;
name|GtkWidget
modifier|*
name|abox
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|GtkWidget
modifier|*
name|fileselection
decl_stmt|;
name|GtkWidget
modifier|*
name|patheditor
decl_stmt|;
name|GtkWidget
modifier|*
name|spinbutton
decl_stmt|;
name|GtkWidget
modifier|*
name|combo
decl_stmt|;
name|GtkWidget
modifier|*
name|comboitem
decl_stmt|;
name|GtkWidget
modifier|*
name|optionmenu
decl_stmt|;
name|GtkWidget
modifier|*
name|table
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkObject
modifier|*
name|adjustment
decl_stmt|;
name|GtkWidget
modifier|*
name|sizeentry
decl_stmt|;
name|GtkWidget
modifier|*
name|sizeentry2
decl_stmt|;
name|GSList
modifier|*
name|group
decl_stmt|;
name|int
name|i
decl_stmt|;
name|int
name|divided_mem_size
decl_stmt|;
name|int
name|mem_size_unit
decl_stmt|;
if|if
condition|(
name|prefs_dlg
condition|)
block|{
name|gdk_window_raise
argument_list|(
name|GTK_WIDGET
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|window
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|edit_temp_path
operator|==
name|NULL
condition|)
block|{
comment|/* first time dialog is opened - copy config vals to edit 	 variables. */
name|edit_stingy_memory_use
operator|=
name|stingy_memory_use
expr_stmt|;
name|edit_tile_cache_size
operator|=
name|tile_cache_size
expr_stmt|;
name|edit_install_cmap
operator|=
name|install_cmap
expr_stmt|;
name|edit_cycled_marching_ants
operator|=
name|cycled_marching_ants
expr_stmt|;
name|edit_last_opened_size
operator|=
name|last_opened_size
expr_stmt|;
name|edit_temp_path
operator|=
name|file_prefs_strdup
argument_list|(
name|temp_path
argument_list|)
expr_stmt|;
name|edit_swap_path
operator|=
name|file_prefs_strdup
argument_list|(
name|swap_path
argument_list|)
expr_stmt|;
name|edit_brush_path
operator|=
name|file_prefs_strdup
argument_list|(
name|brush_path
argument_list|)
expr_stmt|;
name|edit_pattern_path
operator|=
name|file_prefs_strdup
argument_list|(
name|pattern_path
argument_list|)
expr_stmt|;
name|edit_palette_path
operator|=
name|file_prefs_strdup
argument_list|(
name|palette_path
argument_list|)
expr_stmt|;
name|edit_plug_in_path
operator|=
name|file_prefs_strdup
argument_list|(
name|plug_in_path
argument_list|)
expr_stmt|;
name|edit_module_path
operator|=
name|file_prefs_strdup
argument_list|(
name|module_path
argument_list|)
expr_stmt|;
name|edit_gradient_path
operator|=
name|file_prefs_strdup
argument_list|(
name|gradient_path
argument_list|)
expr_stmt|;
block|}
name|old_perfectmouse
operator|=
name|perfectmouse
expr_stmt|;
name|old_transparency_type
operator|=
name|transparency_type
expr_stmt|;
name|old_transparency_size
operator|=
name|transparency_size
expr_stmt|;
name|old_levels_of_undo
operator|=
name|levels_of_undo
expr_stmt|;
name|old_marching_speed
operator|=
name|marching_speed
expr_stmt|;
name|old_allow_resize_windows
operator|=
name|allow_resize_windows
expr_stmt|;
name|old_auto_save
operator|=
name|auto_save
expr_stmt|;
name|old_preview_size
operator|=
name|preview_size
expr_stmt|;
name|old_no_cursor_updating
operator|=
name|no_cursor_updating
expr_stmt|;
name|old_show_tool_tips
operator|=
name|show_tool_tips
expr_stmt|;
name|old_show_rulers
operator|=
name|show_rulers
expr_stmt|;
name|old_show_statusbar
operator|=
name|show_statusbar
expr_stmt|;
name|old_cubic_interpolation
operator|=
name|cubic_interpolation
expr_stmt|;
name|old_confirm_on_close
operator|=
name|confirm_on_close
expr_stmt|;
name|old_save_session_info
operator|=
name|save_session_info
expr_stmt|;
name|old_save_device_status
operator|=
name|save_device_status
expr_stmt|;
name|old_always_restore_session
operator|=
name|always_restore_session
expr_stmt|;
name|old_default_width
operator|=
name|default_width
expr_stmt|;
name|old_default_height
operator|=
name|default_height
expr_stmt|;
name|old_default_units
operator|=
name|default_units
expr_stmt|;
name|old_default_xresolution
operator|=
name|default_xresolution
expr_stmt|;
name|old_default_yresolution
operator|=
name|default_yresolution
expr_stmt|;
name|old_default_resolution_units
operator|=
name|default_resolution_units
expr_stmt|;
name|old_default_type
operator|=
name|default_type
expr_stmt|;
name|old_stingy_memory_use
operator|=
name|edit_stingy_memory_use
expr_stmt|;
name|old_tile_cache_size
operator|=
name|edit_tile_cache_size
expr_stmt|;
name|old_install_cmap
operator|=
name|edit_install_cmap
expr_stmt|;
name|old_cycled_marching_ants
operator|=
name|edit_cycled_marching_ants
expr_stmt|;
name|old_last_opened_size
operator|=
name|edit_last_opened_size
expr_stmt|;
name|old_monitor_xres
operator|=
name|monitor_xres
expr_stmt|;
name|old_monitor_yres
operator|=
name|monitor_yres
expr_stmt|;
name|old_using_xserver_resolution
operator|=
name|using_xserver_resolution
expr_stmt|;
name|old_num_processors
operator|=
name|num_processors
expr_stmt|;
name|old_image_title_format
operator|=
name|file_prefs_strdup
argument_list|(
name|image_title_format
argument_list|)
expr_stmt|;
name|old_global_paint_options
operator|=
name|global_paint_options
expr_stmt|;
name|old_max_new_image_size
operator|=
name|max_new_image_size
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_temp_path
argument_list|,
name|edit_temp_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_swap_path
argument_list|,
name|edit_swap_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_plug_in_path
argument_list|,
name|edit_plug_in_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_module_path
argument_list|,
name|edit_module_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_brush_path
argument_list|,
name|edit_brush_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_pattern_path
argument_list|,
name|edit_pattern_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_palette_path
argument_list|,
name|edit_palette_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_gradient_path
argument_list|,
name|edit_gradient_path
argument_list|)
expr_stmt|;
comment|/* Create the dialog */
name|prefs_dlg
operator|=
name|gimp_dialog_new
argument_list|(
name|_
argument_list|(
literal|"Preferences"
argument_list|)
argument_list|,
literal|"gimp_preferences"
argument_list|,
name|GTK_WIN_POS_NONE
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|_
argument_list|(
literal|"OK"
argument_list|)
argument_list|,
name|file_prefs_ok_callback
argument_list|,
name|NULL
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|_
argument_list|(
literal|"Save"
argument_list|)
argument_list|,
name|file_prefs_save_callback
argument_list|,
name|NULL
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|_
argument_list|(
literal|"Cancel"
argument_list|)
argument_list|,
name|file_prefs_cancel_callback
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* The main hbox */
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|6
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|hbox
argument_list|)
argument_list|,
literal|6
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
comment|/* The categories tree */
name|titles
index|[
literal|0
index|]
operator|=
name|_
argument_list|(
literal|"Categories"
argument_list|)
expr_stmt|;
name|ctree
operator|=
name|gtk_ctree_new_with_titles
argument_list|(
literal|1
argument_list|,
literal|0
argument_list|,
name|titles
argument_list|)
expr_stmt|;
name|gtk_ctree_set_indent
argument_list|(
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
literal|15
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|ctree
argument_list|,
literal|140
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|ctree
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|ctree
argument_list|)
expr_stmt|;
comment|/* The main preferences notebook */
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|NULL
argument_list|)
expr_stmt|;
name|gtk_frame_set_shadow_type
argument_list|(
name|GTK_FRAME
argument_list|(
name|frame
argument_list|)
argument_list|,
name|GTK_SHADOW_IN
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|notebook
operator|=
name|gtk_notebook_new
argument_list|()
expr_stmt|;
name|gtk_notebook_set_show_tabs
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_notebook_set_show_border
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|notebook
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|notebook
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|ctree
argument_list|)
argument_list|,
literal|"tree_select_row"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_pref_tree_select_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|page_index
operator|=
literal|0
expr_stmt|;
comment|/* New File page */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"New File Settings"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"New File"
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|top_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
comment|/* select this page in the tree */
name|gtk_ctree_select
argument_list|(
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|top_insert
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Default Image Size and Unit"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|hbox
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|hbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|sizeentry
operator|=
name|gimp_size_entry_new
argument_list|(
literal|2
argument_list|,
name|default_units
argument_list|,
literal|"%p"
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|,
literal|75
argument_list|,
name|GIMP_SIZE_ENTRY_UPDATE_SIZE
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Width"
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Height"
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Pixels"
argument_list|)
argument_list|,
literal|1
argument_list|,
literal|4
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_resolution
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|default_xresolution
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_resolution
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|default_yresolution
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|GIMP_MIN_IMAGE_SIZE
argument_list|,
name|GIMP_MAX_IMAGE_SIZE
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|GIMP_MIN_IMAGE_SIZE
argument_list|,
name|GIMP_MAX_IMAGE_SIZE
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|default_width
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|default_height
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|"unit_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_default_size_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_default_size_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|"refval_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_default_size_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|sizeentry
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|sizeentry
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Default Image Resolution and Resolution Unit"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|hbox
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|hbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|sizeentry2
operator|=
name|gimp_size_entry_new
argument_list|(
literal|2
argument_list|,
name|default_resolution_units
argument_list|,
literal|"Pixels/%s"
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|,
literal|75
argument_list|,
name|GIMP_SIZE_ENTRY_UPDATE_RESOLUTION
argument_list|)
expr_stmt|;
name|button
operator|=
name|gimp_chain_button_new
argument_list|(
name|GIMP_CHAIN_BOTTOM
argument_list|)
expr_stmt|;
if|if
condition|(
name|ABS
argument_list|(
name|default_xresolution
operator|-
name|default_yresolution
argument_list|)
operator|<
name|GIMP_MIN_RESOLUTION
condition|)
name|gimp_chain_button_set_active
argument_list|(
name|GIMP_CHAIN_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
name|button
argument_list|,
literal|1
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Horizontal"
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Vertical"
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"dpi"
argument_list|)
argument_list|,
literal|1
argument_list|,
literal|4
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|"size_sizeentry"
argument_list|,
name|sizeentry
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|0
argument_list|,
name|GIMP_MIN_RESOLUTION
argument_list|,
name|GIMP_MAX_RESOLUTION
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|1
argument_list|,
name|GIMP_MIN_RESOLUTION
argument_list|,
name|GIMP_MAX_RESOLUTION
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|0
argument_list|,
name|default_xresolution
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|1
argument_list|,
name|default_yresolution
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|"unit_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_default_resolution_callback
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_default_resolution_callback
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry2
argument_list|)
argument_list|,
literal|"refval_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_default_resolution_callback
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|sizeentry2
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|sizeentry2
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|1
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|table
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
name|optionmenu
operator|=
name|gimp_option_menu_new
argument_list|(
name|file_prefs_toggle_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|default_type
argument_list|,
name|_
argument_list|(
literal|"RGB"
argument_list|)
argument_list|,
operator|&
name|default_type
argument_list|,
operator|(
name|gpointer
operator|)
name|RGB
argument_list|,
name|_
argument_list|(
literal|"Grayscale"
argument_list|)
argument_list|,
operator|&
name|default_type
argument_list|,
operator|(
name|gpointer
operator|)
name|GRAY
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|0
argument_list|,
name|_
argument_list|(
literal|"Default Image Type:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|optionmenu
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
comment|/* Display page */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Display Settings"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Display"
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|top_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Transparency"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|hbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|2
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|table
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
name|optionmenu
operator|=
name|gimp_option_menu_new
argument_list|(
name|file_prefs_toggle_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|transparency_type
argument_list|,
name|_
argument_list|(
literal|"Light Checks"
argument_list|)
argument_list|,
operator|&
name|transparency_type
argument_list|,
operator|(
name|gpointer
operator|)
name|LIGHT_CHECKS
argument_list|,
name|_
argument_list|(
literal|"Mid-Tone Checks"
argument_list|)
argument_list|,
operator|&
name|transparency_type
argument_list|,
operator|(
name|gpointer
operator|)
name|GRAY_CHECKS
argument_list|,
name|_
argument_list|(
literal|"Dark Checks"
argument_list|)
argument_list|,
operator|&
name|transparency_type
argument_list|,
operator|(
name|gpointer
operator|)
name|DARK_CHECKS
argument_list|,
name|_
argument_list|(
literal|"White Only"
argument_list|)
argument_list|,
operator|&
name|transparency_type
argument_list|,
operator|(
name|gpointer
operator|)
name|WHITE_ONLY
argument_list|,
name|_
argument_list|(
literal|"Gray Only"
argument_list|)
argument_list|,
operator|&
name|transparency_type
argument_list|,
operator|(
name|gpointer
operator|)
name|GRAY_ONLY
argument_list|,
name|_
argument_list|(
literal|"Black Only"
argument_list|)
argument_list|,
operator|&
name|transparency_type
argument_list|,
operator|(
name|gpointer
operator|)
name|BLACK_ONLY
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|0
argument_list|,
name|_
argument_list|(
literal|"Transparency Type:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|optionmenu
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|optionmenu
operator|=
name|gimp_option_menu_new
argument_list|(
name|file_prefs_toggle_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|transparency_size
argument_list|,
name|_
argument_list|(
literal|"Small"
argument_list|)
argument_list|,
operator|&
name|transparency_size
argument_list|,
operator|(
name|gpointer
operator|)
name|SMALL_CHECKS
argument_list|,
name|_
argument_list|(
literal|"Medium"
argument_list|)
argument_list|,
operator|&
name|transparency_size
argument_list|,
operator|(
name|gpointer
operator|)
name|MEDIUM_CHECKS
argument_list|,
name|_
argument_list|(
literal|"Large"
argument_list|)
argument_list|,
operator|&
name|transparency_size
argument_list|,
operator|(
name|gpointer
operator|)
name|LARGE_CHECKS
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|1
argument_list|,
name|_
argument_list|(
literal|"Check Size:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|optionmenu
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Scaling"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Cubic Interpolation"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|cubic_interpolation
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|cubic_interpolation
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* Interface */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Interface Settings"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Interface"
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|top_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"General"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|hbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|3
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|table
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
comment|/* Don't show the Auto-save button until we really       have auto-saving in the gimp.       button = gtk_check_button_new_with_label(_("Auto save"));      gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (button),                                    auto_save);      gtk_box_pack_start (GTK_BOX (vbox2), button, FALSE, FALSE, 0);      gtk_signal_connect (GTK_OBJECT (button), "toggled", 	                 (GtkSignalFunc) file_prefs_toggle_callback,&auto_save);      gtk_widget_show (button);   */
name|optionmenu
operator|=
name|gimp_option_menu_new
argument_list|(
name|file_prefs_preview_size_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|preview_size
argument_list|,
name|_
argument_list|(
literal|"None"
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
literal|0
argument_list|,
operator|(
name|gpointer
operator|)
literal|0
argument_list|,
name|_
argument_list|(
literal|"Small"
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
literal|32
argument_list|,
operator|(
name|gpointer
operator|)
literal|32
argument_list|,
name|_
argument_list|(
literal|"Medium"
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
literal|64
argument_list|,
operator|(
name|gpointer
operator|)
literal|64
argument_list|,
name|_
argument_list|(
literal|"Large"
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
literal|128
argument_list|,
operator|(
name|gpointer
operator|)
literal|128
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|0
argument_list|,
name|_
argument_list|(
literal|"Preview Size:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|optionmenu
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|adjustment
argument_list|,
name|levels_of_undo
argument_list|,
literal|0.0
argument_list|,
literal|255.0
argument_list|,
literal|1.0
argument_list|,
literal|5.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_int_adjustment_callback
argument_list|,
operator|&
name|levels_of_undo
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|1
argument_list|,
name|_
argument_list|(
literal|"Levels of Undo:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|spinbutton
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|adjustment
argument_list|,
name|edit_last_opened_size
argument_list|,
literal|0.0
argument_list|,
literal|16.0
argument_list|,
literal|1.0
argument_list|,
literal|5.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_int_adjustment_callback
argument_list|,
operator|&
name|edit_last_opened_size
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|,
name|_
argument_list|(
literal|"Recent Documents List Size:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|spinbutton
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Help System"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show Tool Tips"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|show_tool_tips
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|show_tool_tips
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* Interface / Image Windows */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Image Windows Settings"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Image Windows"
argument_list|)
argument_list|,
name|top_insert
argument_list|,
operator|&
name|child_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Appearance"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Resize Window on Zoom"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|allow_resize_windows
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|allow_resize_windows
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show Rulers"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|show_rulers
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|show_rulers
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show Statusbar"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|show_statusbar
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|show_statusbar
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|2
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|table
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|adjustment
argument_list|,
name|marching_speed
argument_list|,
literal|50.0
argument_list|,
literal|32000.0
argument_list|,
literal|10.0
argument_list|,
literal|100.0
argument_list|,
literal|1.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_int_adjustment_callback
argument_list|,
operator|&
name|marching_speed
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|0
argument_list|,
name|_
argument_list|(
literal|"Marching Ants Speed:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|spinbutton
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
comment|/* The title format string */
name|combo
operator|=
name|gtk_combo_new
argument_list|()
expr_stmt|;
name|gtk_combo_set_use_arrows
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_combo_set_value_in_list
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
comment|/* Set the currently used string as "Custom" */
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Custom"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
name|image_title_format
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
comment|/* set some commonly used format strings */
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Standard"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t)"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show zoom percentage"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t) %z%%"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show zoom ratio"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t) %d:%s"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|comboitem
operator|=
name|gtk_list_item_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Show reversed zoom ratio"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_set_item_string
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
argument_list|,
name|GTK_ITEM
argument_list|(
name|comboitem
argument_list|)
argument_list|,
literal|"%f-%p.%i (%t) %s:%d"
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|list
argument_list|)
argument_list|,
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|comboitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|GTK_COMBO
argument_list|(
name|combo
argument_list|)
operator|->
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_string_callback
argument_list|)
argument_list|,
operator|&
name|image_title_format
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|1
argument_list|,
name|_
argument_list|(
literal|"Image Title Format:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|combo
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
comment|/* End of the title format string */
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Pointer Movement Feedback"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Perfect-but-slow Pointer Tracking"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|perfectmouse
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|perfectmouse
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Disable Cursor Updating"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|no_cursor_updating
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|no_cursor_updating
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* Interface / Tool Options */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Tool Options Settings"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Tool Options"
argument_list|)
argument_list|,
name|top_insert
argument_list|,
operator|&
name|child_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Paint Options"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Use Global Paint Options"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|global_paint_options
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|global_paint_options
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|_
argument_list|(
literal|"(Switching this off does not yet work consistently.)"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
comment|/* Expand the "Interface" branch */
name|gtk_ctree_expand
argument_list|(
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|top_insert
argument_list|)
expr_stmt|;
comment|/* Environment */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Environment Settings"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Environment"
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|top_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Resource Consumption"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Conservative Memory Usage"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|stingy_memory_use
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_stingy_memory_use
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|ENABLE_MP
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|3
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
else|#
directive|else
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|2
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
endif|#
directive|endif
comment|/* ENABLE_MP */
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|table
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
comment|/*  The tile cache size  */
name|mem_size_unit
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|edit_tile_cache_size
operator|%
operator|(
name|mem_size_unit
operator|*
literal|1024
operator|)
operator|!=
literal|0
condition|)
break|break;
name|mem_size_unit
operator|*=
literal|1024
expr_stmt|;
block|}
name|divided_mem_size
operator|=
name|edit_tile_cache_size
operator|/
name|mem_size_unit
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|adjustment
argument_list|,
name|divided_mem_size
argument_list|,
literal|0.0
argument_list|,
operator|(
literal|4069.0
operator|*
literal|1024
operator|*
literal|1024
operator|)
argument_list|,
literal|1.0
argument_list|,
literal|16.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_mem_size_callback
argument_list|,
operator|&
name|edit_tile_cache_size
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|spinbutton
argument_list|)
expr_stmt|;
comment|/* for the mem_size_unit callback  */
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"mem_size"
argument_list|,
operator|&
name|edit_tile_cache_size
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"divided_mem_size"
argument_list|,
operator|(
name|gpointer
operator|)
name|divided_mem_size
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"mem_size_unit"
argument_list|,
operator|(
name|gpointer
operator|)
name|mem_size_unit
argument_list|)
expr_stmt|;
name|optionmenu
operator|=
name|gimp_option_menu_new
argument_list|(
name|file_prefs_mem_size_unit_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|mem_size_unit
argument_list|,
name|_
argument_list|(
literal|"Bytes"
argument_list|)
argument_list|,
name|adjustment
argument_list|,
operator|(
name|gpointer
operator|)
literal|1
argument_list|,
name|_
argument_list|(
literal|"KiloBytes"
argument_list|)
argument_list|,
name|adjustment
argument_list|,
operator|(
name|gpointer
operator|)
literal|1024
argument_list|,
name|_
argument_list|(
literal|"MegaBytes"
argument_list|)
argument_list|,
name|adjustment
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
literal|1024
operator|*
literal|1024
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|optionmenu
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|optionmenu
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|0
argument_list|,
name|_
argument_list|(
literal|"Tile Cache Size:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
comment|/*  The maximum size of a new image  */
name|mem_size_unit
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|max_new_image_size
operator|%
operator|(
name|mem_size_unit
operator|*
literal|1024
operator|)
operator|!=
literal|0
condition|)
break|break;
name|mem_size_unit
operator|*=
literal|1024
expr_stmt|;
block|}
name|divided_mem_size
operator|=
name|max_new_image_size
operator|/
name|mem_size_unit
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|adjustment
argument_list|,
name|divided_mem_size
argument_list|,
literal|0.0
argument_list|,
operator|(
literal|4069.0
operator|*
literal|1024
operator|*
literal|1024
operator|)
argument_list|,
literal|1.0
argument_list|,
literal|16.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_mem_size_callback
argument_list|,
operator|&
name|max_new_image_size
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|spinbutton
argument_list|)
expr_stmt|;
comment|/* for the mem_size_unit callback  */
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"mem_size"
argument_list|,
operator|&
name|max_new_image_size
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"divided_mem_size"
argument_list|,
operator|(
name|gpointer
operator|)
name|divided_mem_size
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"mem_size_unit"
argument_list|,
operator|(
name|gpointer
operator|)
name|mem_size_unit
argument_list|)
expr_stmt|;
name|optionmenu
operator|=
name|gimp_option_menu_new
argument_list|(
name|file_prefs_mem_size_unit_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|mem_size_unit
argument_list|,
name|_
argument_list|(
literal|"Bytes"
argument_list|)
argument_list|,
name|adjustment
argument_list|,
operator|(
name|gpointer
operator|)
literal|1
argument_list|,
name|_
argument_list|(
literal|"KiloBytes"
argument_list|)
argument_list|,
name|adjustment
argument_list|,
operator|(
name|gpointer
operator|)
literal|1024
argument_list|,
name|_
argument_list|(
literal|"MegaBytes"
argument_list|)
argument_list|,
name|adjustment
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
literal|1024
operator|*
literal|1024
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|optionmenu
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|optionmenu
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|1
argument_list|,
name|_
argument_list|(
literal|"Maximum Image Size:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|ENABLE_MP
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|adjustment
argument_list|,
name|num_processors
argument_list|,
literal|1
argument_list|,
literal|30
argument_list|,
literal|1.0
argument_list|,
literal|2.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_int_adjustment_callback
argument_list|,
operator|&
name|num_processors
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|,
name|_
argument_list|(
literal|"Number of Processors to Use:"
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|spinbutton
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
endif|#
directive|endif
comment|/* ENABLE_MP */
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"8-Bit Displays"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|g_visual
operator|->
name|depth
operator|!=
literal|8
condition|)
name|gtk_widget_set_sensitive
argument_list|(
name|GTK_WIDGET
argument_list|(
name|frame
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Install Colormap"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|install_cmap
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_install_cmap
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Colormap Cycling"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|cycled_marching_ants
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_cycled_marching_ants
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* Session Management */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Session Management"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Session"
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|top_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Window Positions"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Save Window Positions on Exit"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|save_session_info
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|save_session_info
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|hbox
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Clear Saved Window Positions"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_clear_session_info_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Always Try to Restore Session"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|always_restore_session
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|always_restore_session
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Devices"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
name|_
argument_list|(
literal|"Save Device Status on Exit"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|save_device_status
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|save_device_status
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* Monitor */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Monitor Information"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Monitor"
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|top_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|_
argument_list|(
literal|"Get Monitor Resolution"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|vbox2
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox2
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|vbox2
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox2
argument_list|)
expr_stmt|;
block|{
name|gdouble
name|xres
decl_stmt|,
name|yres
decl_stmt|;
name|gchar
name|buf
index|[
literal|80
index|]
decl_stmt|;
name|gdisplay_xserver_resolution
argument_list|(
operator|&
name|xres
argument_list|,
operator|&
name|yres
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"(Currently %d x %d dpi)"
argument_list|)
argument_list|,
call|(
name|int
call|)
argument_list|(
name|xres
operator|+
literal|0.5
argument_list|)
argument_list|,
call|(
name|int
call|)
argument_list|(
name|yres
operator|+
literal|0.5
argument_list|)
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|buf
argument_list|)
expr_stmt|;
block|}
name|abox
operator|=
name|gtk_alignment_new
argument_list|(
literal|0.5
argument_list|,
literal|0.5
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|sizeentry
operator|=
name|gimp_size_entry_new
argument_list|(
literal|2
argument_list|,
name|UNIT_INCH
argument_list|,
literal|"Pixels/%s"
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|,
literal|75
argument_list|,
name|GIMP_SIZE_ENTRY_UPDATE_RESOLUTION
argument_list|)
expr_stmt|;
name|button
operator|=
name|gimp_chain_button_new
argument_list|(
name|GIMP_CHAIN_BOTTOM
argument_list|)
expr_stmt|;
if|if
condition|(
name|ABS
argument_list|(
name|monitor_xres
operator|-
name|monitor_yres
argument_list|)
operator|<
name|GIMP_MIN_RESOLUTION
condition|)
name|gimp_chain_button_set_active
argument_list|(
name|GIMP_CHAIN_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
name|button
argument_list|,
literal|1
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Horizontal"
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Vertical"
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_attach_label
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"dpi"
argument_list|)
argument_list|,
literal|1
argument_list|,
literal|4
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|GIMP_MIN_RESOLUTION
argument_list|,
name|GIMP_MAX_RESOLUTION
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|GIMP_MIN_RESOLUTION
argument_list|,
name|GIMP_MAX_RESOLUTION
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|monitor_xres
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|monitor_yres
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_monitor_resolution_callback
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|sizeentry
argument_list|)
argument_list|,
literal|"refval_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_monitor_resolution_callback
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|abox
argument_list|)
argument_list|,
name|sizeentry
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|sizeentry
argument_list|)
expr_stmt|;
name|gtk_widget_set_sensitive
argument_list|(
name|sizeentry
argument_list|,
operator|!
name|using_xserver_resolution
argument_list|)
expr_stmt|;
name|group
operator|=
name|NULL
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|_
argument_list|(
literal|"From X Server"
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_res_source_callback
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"resolution_xserver_label"
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"monitor_resolution_sizeentry"
argument_list|,
name|sizeentry
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|_
argument_list|(
literal|"Manually:"
argument_list|)
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox2
argument_list|)
argument_list|,
name|abox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|abox
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|using_xserver_resolution
condition|)
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
comment|/* Directories */
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Directories Settings"
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Directories"
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|top_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
block|{
DECL|struct|__anon2b79ed030108
specifier|static
specifier|const
struct|struct
block|{
DECL|member|label
name|char
modifier|*
name|label
decl_stmt|;
DECL|member|fs_label
name|char
modifier|*
name|fs_label
decl_stmt|;
DECL|member|mdir
name|char
modifier|*
modifier|*
name|mdir
decl_stmt|;
block|}
name|dirs
index|[]
init|=
block|{
block|{
name|N_
argument_list|(
literal|"Temp Dir:"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Temp Dir"
argument_list|)
block|,
operator|&
name|edit_temp_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Swap Dir:"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Swap Dir"
argument_list|)
block|,
operator|&
name|edit_swap_path
block|}
block|,     }
struct|;
specifier|static
name|int
name|ndirs
init|=
sizeof|sizeof
argument_list|(
name|dirs
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|dirs
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
name|ndirs
operator|+
literal|1
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|table
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|ndirs
condition|;
name|i
operator|++
control|)
block|{
name|fileselection
operator|=
name|gimp_file_selection_new
argument_list|(
name|gettext
argument_list|(
name|dirs
index|[
name|i
index|]
operator|.
name|fs_label
argument_list|)
argument_list|,
operator|*
operator|(
name|dirs
index|[
name|i
index|]
operator|.
name|mdir
operator|)
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|fileselection
argument_list|)
argument_list|,
literal|"filename_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_filename_callback
argument_list|,
name|dirs
index|[
name|i
index|]
operator|.
name|mdir
argument_list|)
expr_stmt|;
name|gimp_table_attach_aligned
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|i
argument_list|,
name|gettext
argument_list|(
name|dirs
index|[
name|i
index|]
operator|.
name|label
argument_list|)
argument_list|,
literal|1.0
argument_list|,
literal|0.5
argument_list|,
name|fileselection
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* Directories /<paths> */
block|{
DECL|struct|__anon2b79ed030208
specifier|static
specifier|const
struct|struct
block|{
DECL|member|tree_label
name|char
modifier|*
name|tree_label
decl_stmt|;
DECL|member|label
name|char
modifier|*
name|label
decl_stmt|;
DECL|member|fs_label
name|char
modifier|*
name|fs_label
decl_stmt|;
DECL|member|mpath
name|char
modifier|*
modifier|*
name|mpath
decl_stmt|;
block|}
name|paths
index|[]
init|=
block|{
block|{
name|N_
argument_list|(
literal|"Brushes"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Brushes Directories"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Brushes Dir"
argument_list|)
block|,
operator|&
name|edit_brush_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Patterns"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Patterns Directories"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Patterns Dir"
argument_list|)
block|,
operator|&
name|edit_pattern_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Palettes"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Palettes Directories"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Palettes Dir"
argument_list|)
block|,
operator|&
name|edit_palette_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Gradients"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Gradients Directories"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Gradients Dir"
argument_list|)
block|,
operator|&
name|edit_gradient_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Plug-Ins"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Plug-Ins Directories"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Plug-Ins Dir"
argument_list|)
block|,
operator|&
name|edit_plug_in_path
block|}
block|,
block|{
name|N_
argument_list|(
literal|"Modules"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Modules Directories"
argument_list|)
block|,
name|N_
argument_list|(
literal|"Select Modules Dir"
argument_list|)
block|,
operator|&
name|edit_module_path
block|}
block|}
struct|;
specifier|static
name|int
name|npaths
init|=
sizeof|sizeof
argument_list|(
name|paths
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|paths
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|npaths
condition|;
name|i
operator|++
control|)
block|{
name|vbox
operator|=
name|file_prefs_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|gettext
argument_list|(
name|paths
index|[
name|i
index|]
operator|.
name|label
argument_list|)
argument_list|,
name|GTK_CTREE
argument_list|(
name|ctree
argument_list|)
argument_list|,
name|gettext
argument_list|(
name|paths
index|[
name|i
index|]
operator|.
name|tree_label
argument_list|)
argument_list|,
name|top_insert
argument_list|,
operator|&
name|child_insert
argument_list|,
name|page_index
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|page_index
operator|++
expr_stmt|;
name|patheditor
operator|=
name|gimp_path_editor_new
argument_list|(
name|gettext
argument_list|(
name|paths
index|[
name|i
index|]
operator|.
name|fs_label
argument_list|)
argument_list|,
operator|*
operator|(
name|paths
index|[
name|i
index|]
operator|.
name|mpath
operator|)
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|patheditor
argument_list|)
argument_list|,
literal|"path_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_path_callback
argument_list|,
name|paths
index|[
name|i
index|]
operator|.
name|mpath
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|patheditor
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|patheditor
argument_list|)
expr_stmt|;
block|}
block|}
name|gtk_widget_show
argument_list|(
name|notebook
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|prefs_dlg
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

