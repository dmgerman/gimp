begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<gdk/gdkkeysyms.h>
end_include

begin_include
include|#
directive|include
file|"appenv.h"
end_include

begin_include
include|#
directive|include
file|"channels_dialog.h"
end_include

begin_include
include|#
directive|include
file|"colormaps.h"
end_include

begin_include
include|#
directive|include
file|"commands.h"
end_include

begin_include
include|#
directive|include
file|"dialog_handler.h"
end_include

begin_include
include|#
directive|include
file|"fileops.h"
end_include

begin_include
include|#
directive|include
file|"gimprc.h"
end_include

begin_include
include|#
directive|include
file|"interface.h"
end_include

begin_include
include|#
directive|include
file|"layers_dialog.h"
end_include

begin_include
include|#
directive|include
file|"menus.h"
end_include

begin_include
include|#
directive|include
file|"paths_dialog.h"
end_include

begin_include
include|#
directive|include
file|"paint_funcs.h"
end_include

begin_include
include|#
directive|include
file|"procedural_db.h"
end_include

begin_include
include|#
directive|include
file|"scale.h"
end_include

begin_include
include|#
directive|include
file|"tools.h"
end_include

begin_include
include|#
directive|include
file|"gdisplay.h"
end_include

begin_include
include|#
directive|include
file|"docindex.h"
end_include

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpintl.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpenv.h"
end_include

begin_define
DECL|macro|MRU_MENU_ENTRY_SIZE
define|#
directive|define
name|MRU_MENU_ENTRY_SIZE
value|(strlen (_("/File/MRU00 ")) + 1)
end_define

begin_define
DECL|macro|MRU_MENU_ACCEL_SIZE
define|#
directive|define
name|MRU_MENU_ACCEL_SIZE
value|sizeof ("<control>0")
end_define

begin_function_decl
specifier|static
name|void
name|menus_create_item
parameter_list|(
name|GtkItemFactory
modifier|*
name|item_factory
parameter_list|,
name|GimpItemFactoryEntry
modifier|*
name|entry
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_type
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|menus_create_items
parameter_list|(
name|GtkItemFactory
modifier|*
name|item_factory
parameter_list|,
name|guint
name|n_entries
parameter_list|,
name|GimpItemFactoryEntry
modifier|*
name|entries
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_type
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|menus_init
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gchar
modifier|*
name|menu_translate
parameter_list|(
specifier|const
name|gchar
modifier|*
name|path
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|tearoff_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_action
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|help_debug_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_action
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
DECL|variable|dummy_entries
specifier|static
name|gchar
name|G_GNUC_UNUSED
modifier|*
name|dummy_entries
index|[]
init|=
block|{
comment|/*<Toolbox>  */
name|N_
argument_list|(
literal|"/Xtns/Animation"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Perl-Fu"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Perl-Fu/Logos"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Perl"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Render"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Render/Logos"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Render/Povray"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Logos"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Patterns"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Web page themes"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Utils"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Buttons"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Make Brush"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Misc"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Script-Fu/Test"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Xtns/Web Browser"
argument_list|)
block|,
comment|/*<Image>  */
name|N_
argument_list|(
literal|"/Filters/Colors/Map"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Filters/Render/Clouds"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Filters/Render/Nature"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Filters/Render/Pattern"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Filters/Misc"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Decor"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Modify"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Utils"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Animators"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Stencil Ops"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Alchemy"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Selection"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Shadow"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Script-Fu/Render"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Guides"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Video"
argument_list|)
block|,
name|N_
argument_list|(
literal|"/Video/Encode"
argument_list|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|last_opened_raw_filenames
specifier|static
name|GSList
modifier|*
name|last_opened_raw_filenames
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****<Toolbox>  *****/
end_comment

begin_decl_stmt
DECL|variable|toolbox_entries
specifier|static
name|GimpItemFactoryEntry
name|toolbox_entries
index|[]
init|=
block|{
comment|/*<Toolbox>/File  */
block|{
block|{
name|N_
argument_list|(
literal|"/File"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/New..."
argument_list|)
block|,
literal|"<control>N"
block|,
name|file_new_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/file_new.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Open..."
argument_list|)
block|,
literal|"<control>O"
block|,
name|file_open_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/open/dialogs/file_open.html"
block|,
name|NULL
block|}
block|,
comment|/*<Toolbox>/File/Acquire  */
block|{
block|{
literal|"/File/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Acquire"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/File/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Preferences..."
argument_list|)
block|,
name|NULL
block|,
name|file_pref_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/preferences/preferences.html"
block|,
name|NULL
block|}
block|,
comment|/*<Toolbox>/File/Dialogs  */
block|{
block|{
literal|"/File/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Layers& Channels..."
argument_list|)
block|,
literal|"<control>L"
block|,
name|dialogs_lc_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/layers_and_channels.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Tool Options..."
argument_list|)
block|,
literal|"<control><shift>T"
block|,
name|dialogs_tool_options_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/tool_options.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/File/Dialogs/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Brushes..."
argument_list|)
block|,
literal|"<control><shift>B"
block|,
name|dialogs_brushes_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/brush_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Patterns..."
argument_list|)
block|,
literal|"<control><shift>P"
block|,
name|dialogs_patterns_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/pattern_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Gradients..."
argument_list|)
block|,
literal|"<control>G"
block|,
name|dialogs_gradients_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/gradient_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Palette..."
argument_list|)
block|,
literal|"<control>P"
block|,
name|dialogs_palette_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/palette_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Indexed Palette..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_indexed_palette_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/indexed_palette.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/File/Dialogs/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Input Devices..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_input_devices_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/input_devices.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Device Status..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_device_status_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/device_status.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/File/Dialogs/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Document Index..."
argument_list|)
block|,
name|NULL
block|,
name|raise_idea_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/document_index.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Error Console..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_error_console_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/error_console.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Dialogs/Display Filters..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_display_filters_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/dialogs/display_filters/display_filters.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/File/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*  MRU entries are inserted here  */
block|{
block|{
literal|"/File/---MRU"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Quit"
argument_list|)
block|,
literal|"<control>Q"
block|,
name|file_quit_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/quit.html"
block|,
name|NULL
block|}
block|,
comment|/*<Toolbox>/Xtns  */
block|{
block|{
name|N_
argument_list|(
literal|"/Xtns"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Xtns/Module Browser..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_module_browser_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/module_browser.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Xtns/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Toolbox>/Help  */
block|{
block|{
name|N_
argument_list|(
literal|"/Help"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<LastBranch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Help/Help..."
argument_list|)
block|,
literal|"F1"
block|,
name|help_help_cmd_callback
block|,
literal|0
block|}
block|,
literal|"help/dialogs/help.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Help/Context Help..."
argument_list|)
block|,
literal|"<shift>F1"
block|,
name|help_context_help_cmd_callback
block|,
literal|0
block|}
block|,
literal|"help/context_help.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Help/Tip of the day..."
argument_list|)
block|,
name|NULL
block|,
name|help_tips_cmd_callback
block|,
literal|0
block|}
block|,
literal|"help/dialogs/tip_of_the_day.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Help/About..."
argument_list|)
block|,
name|NULL
block|,
name|help_about_cmd_callback
block|,
literal|0
block|}
block|,
literal|"help/dialogs/about.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Help/Dump Items (Debug)"
argument_list|)
block|,
name|NULL
block|,
name|help_debug_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_toolbox_entries
specifier|static
name|guint
name|n_toolbox_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|toolbox_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|toolbox_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|toolbox_factory
specifier|static
name|GtkItemFactory
modifier|*
name|toolbox_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****<Image>  *****/
end_comment

begin_decl_stmt
DECL|variable|image_entries
specifier|static
name|GimpItemFactoryEntry
name|image_entries
index|[]
init|=
block|{
block|{
block|{
literal|"/tearoff1"
block|,
name|NULL
block|,
name|tearoff_cmd_callback
block|,
literal|0
block|,
literal|"<Tearoff>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/File  */
block|{
block|{
name|N_
argument_list|(
literal|"/File"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/New..."
argument_list|)
block|,
literal|"<control>N"
block|,
name|file_new_cmd_callback
block|,
literal|1
block|}
block|,
literal|"file/dialogs/file_new.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Open..."
argument_list|)
block|,
literal|"<control>O"
block|,
name|file_open_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/open/dialogs/file_open.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Save"
argument_list|)
block|,
literal|"<control>S"
block|,
name|file_save_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/save/dialogs/file_save.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Save as..."
argument_list|)
block|,
name|NULL
block|,
name|file_save_as_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/save/dialogs/file_save.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Revert"
argument_list|)
block|,
name|NULL
block|,
name|file_revert_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/revert.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/File/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Close"
argument_list|)
block|,
literal|"<control>W"
block|,
name|file_close_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/close.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/File/Quit"
argument_list|)
block|,
literal|"<control>Q"
block|,
name|file_quit_cmd_callback
block|,
literal|0
block|}
block|,
literal|"file/quit.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/File/---moved"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Edit  */
block|{
block|{
name|N_
argument_list|(
literal|"/Edit"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Undo"
argument_list|)
block|,
literal|"<control>Z"
block|,
name|edit_undo_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/undo.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Redo"
argument_list|)
block|,
literal|"<control>R"
block|,
name|edit_redo_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/redo.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Edit/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Cut"
argument_list|)
block|,
literal|"<control>X"
block|,
name|edit_cut_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/cut.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Copy"
argument_list|)
block|,
literal|"<control>C"
block|,
name|edit_copy_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/copy.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Paste"
argument_list|)
block|,
literal|"<control>V"
block|,
name|edit_paste_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/paste.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Paste Into"
argument_list|)
block|,
name|NULL
block|,
name|edit_paste_into_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/paste_into.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Paste As New"
argument_list|)
block|,
name|NULL
block|,
name|edit_paste_as_new_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/paste_as_new.html"
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Edit/Buffer  */
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Buffer"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Buffer/Cut Named..."
argument_list|)
block|,
literal|"<control><shift>X"
block|,
name|edit_named_cut_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/dialogs/cut_named.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Buffer/Copy Named..."
argument_list|)
block|,
literal|"<control><shift>C"
block|,
name|edit_named_copy_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/dialogs/copy_named.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Buffer/Paste Named..."
argument_list|)
block|,
literal|"<control><shift>V"
block|,
name|edit_named_paste_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/dialogs/paste_named.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Edit/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Clear"
argument_list|)
block|,
literal|"<control>K"
block|,
name|edit_clear_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/clear.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Fill"
argument_list|)
block|,
literal|"<control>period"
block|,
name|edit_fill_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/fill.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Edit/Stroke"
argument_list|)
block|,
name|NULL
block|,
name|edit_stroke_cmd_callback
block|,
literal|0
block|}
block|,
literal|"edit/stroke.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Edit/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Select  */
block|{
block|{
name|N_
argument_list|(
literal|"/Select"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Invert"
argument_list|)
block|,
literal|"<control>I"
block|,
name|select_invert_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/invert.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/All"
argument_list|)
block|,
literal|"<control>A"
block|,
name|select_all_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/all.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/None"
argument_list|)
block|,
literal|"<control><shift>A"
block|,
name|select_none_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/none.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Float"
argument_list|)
block|,
literal|"<control><shift>L"
block|,
name|select_float_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/float.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Select/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Feather..."
argument_list|)
block|,
literal|"<control><shift>F"
block|,
name|select_feather_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/dialogs/feather_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Sharpen"
argument_list|)
block|,
literal|"<control><shift>H"
block|,
name|select_sharpen_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/sharpen.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Shrink..."
argument_list|)
block|,
name|NULL
block|,
name|select_shrink_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/dialogs/shrink_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Grow..."
argument_list|)
block|,
name|NULL
block|,
name|select_grow_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/dialogs/grow_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Border..."
argument_list|)
block|,
literal|"<control><shift>B"
block|,
name|select_border_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/dialogs/border_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Select/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Select/Save To Channel"
argument_list|)
block|,
name|NULL
block|,
name|select_save_cmd_callback
block|,
literal|0
block|}
block|,
literal|"select/save_to_channel.html"
block|,
name|NULL
block|}
block|,
comment|/*<Image>/View  */
block|{
block|{
name|N_
argument_list|(
literal|"/View"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom In"
argument_list|)
block|,
literal|"equal"
block|,
name|view_zoomin_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom Out"
argument_list|)
block|,
literal|"minus"
block|,
name|view_zoomout_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
comment|/*<Image>/View/Zoom  */
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/16:1"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_16_1_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/8:1"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_8_1_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/4:1"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_4_1_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/2:1"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_2_1_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/1:1"
argument_list|)
block|,
literal|"1"
block|,
name|view_zoom_1_1_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/1:2"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_1_2_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/1:4"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_1_4_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/1:8"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_1_8_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Zoom/1:16"
argument_list|)
block|,
name|NULL
block|,
name|view_zoom_1_16_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/zoom.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Dot for dot"
argument_list|)
block|,
name|NULL
block|,
name|view_dot_for_dot_cmd_callback
block|,
literal|0
block|,
literal|"<ToggleItem>"
block|}
block|,
literal|"view/dot_for_dot.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/View/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Info Window..."
argument_list|)
block|,
literal|"<control><shift>I"
block|,
name|view_info_window_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/dialogs/info_window.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Nav. Window..."
argument_list|)
block|,
literal|"<control><shift>N"
block|,
name|view_nav_window_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/dialogs/navigation_window.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Undo history..."
argument_list|)
block|,
name|NULL
block|,
name|view_undo_history_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/dialogs/undo_history.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/View/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Toggle Selection"
argument_list|)
block|,
literal|"<control>T"
block|,
name|view_toggle_selection_cmd_callback
block|,
literal|0
block|,
literal|"<ToggleItem>"
block|}
block|,
literal|"view/toggle_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Toggle Rulers"
argument_list|)
block|,
literal|"<control><shift>R"
block|,
name|view_toggle_rulers_cmd_callback
block|,
literal|0
block|,
literal|"<ToggleItem>"
block|}
block|,
literal|"view/toggle_rulers.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Toggle Statusbar"
argument_list|)
block|,
literal|"<control><shift>S"
block|,
name|view_toggle_statusbar_cmd_callback
block|,
literal|0
block|,
literal|"<ToggleItem>"
block|}
block|,
literal|"view/toggle_statusbar.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Toggle Guides"
argument_list|)
block|,
literal|"<control><shift>T"
block|,
name|view_toggle_guides_cmd_callback
block|,
literal|0
block|,
literal|"<ToggleItem>"
block|}
block|,
literal|"view/toggle_guides.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Snap To Guides"
argument_list|)
block|,
name|NULL
block|,
name|view_snap_to_guides_cmd_callback
block|,
literal|0
block|,
literal|"<ToggleItem>"
block|}
block|,
literal|"view/snap_to_guides.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/View/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/New View"
argument_list|)
block|,
name|NULL
block|,
name|view_new_view_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/new_view.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/View/Shrink Wrap"
argument_list|)
block|,
literal|"<control>E"
block|,
name|view_shrink_wrap_cmd_callback
block|,
literal|0
block|}
block|,
literal|"view/shrink_wrap.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/View/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Image  */
block|{
block|{
name|N_
argument_list|(
literal|"/Image"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Image/Mode  */
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Mode"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Mode/RGB"
argument_list|)
block|,
literal|"<alt>R"
block|,
name|image_convert_rgb_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/mode/convert_to_rgb.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Mode/Grayscale"
argument_list|)
block|,
literal|"<alt>G"
block|,
name|image_convert_grayscale_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/mode/convert_to_grayscale.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Mode/Indexed..."
argument_list|)
block|,
literal|"<alt>I"
block|,
name|image_convert_indexed_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/mode/dialogs/convert_to_indexed.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Image/Mode/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Image/Colors  */
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Colors"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Image/Colors/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Colors/Desaturate"
argument_list|)
block|,
name|NULL
block|,
name|image_desaturate_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/colors/desaturate.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Colors/Invert"
argument_list|)
block|,
name|NULL
block|,
name|image_invert_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/colors/invert.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Image/Colors/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Image/Colors/Auto  */
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Colors/Auto"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Colors/Auto/Equalize"
argument_list|)
block|,
name|NULL
block|,
name|image_equalize_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/colors/auto/equalize.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Image/Colors/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Image/Alpha  */
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Alpha"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Alpha/Add Alpha Channel"
argument_list|)
block|,
name|NULL
block|,
name|layers_add_alpha_channel_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/add_alpha_channel.html"
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Image/Transforms  */
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Transforms"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Transforms/Offset..."
argument_list|)
block|,
literal|"<control><shift>O"
block|,
name|image_offset_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/transforms/dialogs/offset.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Transforms/Rotate"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Image/Transforms/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Image/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Canvas Size..."
argument_list|)
block|,
name|NULL
block|,
name|image_resize_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/dialogs/canvas_size.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Scale Image..."
argument_list|)
block|,
name|NULL
block|,
name|image_scale_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/dialogs/scale_image.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Image/Duplicate"
argument_list|)
block|,
literal|"<control>D"
block|,
name|image_duplicate_cmd_callback
block|,
literal|0
block|}
block|,
literal|"image/duplicate.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Image/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Layers  */
block|{
block|{
name|N_
argument_list|(
literal|"/Layers"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Layers& Channels..."
argument_list|)
block|,
literal|"<control>L"
block|,
name|dialogs_lc_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/layers_and_channels.html"
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Layers/Stack  */
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Stack"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Stack/Previous Layer"
argument_list|)
block|,
literal|"Prior"
block|,
name|layers_previous_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/stack/stack.html#previous_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Stack/Next Layer"
argument_list|)
block|,
literal|"Next"
block|,
name|layers_next_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/stack/stack.html#next_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Stack/Raise Layer"
argument_list|)
block|,
literal|"<shift>Prior"
block|,
name|layers_raise_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/stack/stack.html#raise_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Stack/Lower Layer"
argument_list|)
block|,
literal|"<shift>Next"
block|,
name|layers_lower_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/stack/stack.html#lower_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Stack/Layer to Top"
argument_list|)
block|,
literal|"<control>Prior"
block|,
name|layers_raise_to_top_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/stack/stack.html#layer_to_top"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Stack/Layer to Bottom"
argument_list|)
block|,
literal|"<control>Next"
block|,
name|layers_lower_to_bottom_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/stack/stack.html#layer_to_bottom"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Layers/Stack/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Layers/Rotate  */
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Rotate"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Resize to Image"
argument_list|)
block|,
name|NULL
block|,
name|layers_resize_to_image_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/resize_to_image.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Layers/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Anchor Layer"
argument_list|)
block|,
literal|"<control>H"
block|,
name|layers_anchor_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/anchor_layer.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Merge Visible Layers..."
argument_list|)
block|,
literal|"<control>M"
block|,
name|layers_merge_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/dialogs/merge_visible_layers.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Flatten Image"
argument_list|)
block|,
name|NULL
block|,
name|layers_flatten_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/flatten_image.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Layers/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Mask To Selection"
argument_list|)
block|,
name|NULL
block|,
name|layers_mask_select_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/mask_to_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Layers/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Add Alpha Channel"
argument_list|)
block|,
name|NULL
block|,
name|layers_add_alpha_channel_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/add_alpha_channel.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layers/Alpha To Selection"
argument_list|)
block|,
name|NULL
block|,
name|layers_alpha_select_cmd_callback
block|,
literal|0
block|}
block|,
literal|"layers/alpha_to_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Layers/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Tools  */
block|{
block|{
name|N_
argument_list|(
literal|"/Tools"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Tools/Toolbox"
argument_list|)
block|,
name|NULL
block|,
name|toolbox_raise_callback
block|,
literal|0
block|}
block|,
literal|"toolbox/toolbox.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Tools/Default Colors"
argument_list|)
block|,
literal|"D"
block|,
name|tools_default_colors_cmd_callback
block|,
literal|0
block|}
block|,
literal|"toolbox/toolbox.html#default_colors"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Tools/Swap Colors"
argument_list|)
block|,
literal|"X"
block|,
name|tools_swap_colors_cmd_callback
block|,
literal|0
block|}
block|,
literal|"toolbox/toolbox.html#swap_colors"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Tools/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Filters  */
block|{
block|{
name|N_
argument_list|(
literal|"/Filters"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Repeat last"
argument_list|)
block|,
literal|"<alt>F"
block|,
name|filters_repeat_cmd_callback
block|,
literal|0x0
block|}
block|,
literal|"filters/repeat_last.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Re-show last"
argument_list|)
block|,
literal|"<alt><shift>F"
block|,
name|filters_repeat_cmd_callback
block|,
literal|0x1
block|}
block|,
literal|"filters/reshow_last.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Filters/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Blur"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Colors"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Filters/Colors/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Noise"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Edge-Detect"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Enhance"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Generic"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Filters/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Glass Effects"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Light Effects"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Distorts"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Artistic"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Map"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Render"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Web"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Filters/---INSERT"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Animation"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Combine"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Filters/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Filters/Toys"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Script-Fu  */
block|{
block|{
name|N_
argument_list|(
literal|"/Script-Fu"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
comment|/*<Image>/Dialogs  */
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Layers& Channels..."
argument_list|)
block|,
literal|"<control>L"
block|,
name|dialogs_lc_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/layers_and_channels.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Tool Options..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_tool_options_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/tool_options.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Dialogs/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Brushes..."
argument_list|)
block|,
literal|"<control><shift>B"
block|,
name|dialogs_brushes_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/brush_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Patterns..."
argument_list|)
block|,
literal|"<control><shift>P"
block|,
name|dialogs_patterns_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/pattern_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Gradients..."
argument_list|)
block|,
literal|"<control>G"
block|,
name|dialogs_gradients_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/gradient_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Palette..."
argument_list|)
block|,
literal|"<control>P"
block|,
name|dialogs_palette_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/palette_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Indexed Palette..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_indexed_palette_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/indexed_palette.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Dialogs/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Input Devices..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_input_devices_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/input_devices.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Device Status..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_device_status_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/device_status.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/Dialogs/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Document Index..."
argument_list|)
block|,
name|NULL
block|,
name|raise_idea_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/document_index.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Error Console..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_error_console_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/error_console.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Dialogs/Display Filters..."
argument_list|)
block|,
name|NULL
block|,
name|dialogs_display_filters_cmd_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/display_filters/display_filters.html"
block|,
name|NULL
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_image_entries
specifier|static
name|guint
name|n_image_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|image_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|image_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|image_factory
specifier|static
name|GtkItemFactory
modifier|*
name|image_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****<Load>  *****/
end_comment

begin_decl_stmt
DECL|variable|load_entries
specifier|static
name|GimpItemFactoryEntry
name|load_entries
index|[]
init|=
block|{
block|{
block|{
name|N_
argument_list|(
literal|"/Automatic"
argument_list|)
block|,
name|NULL
block|,
name|file_load_by_extension_callback
block|,
literal|0
block|}
block|,
literal|"open_by_extension.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_load_entries
specifier|static
name|guint
name|n_load_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|load_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|load_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|load_factory
specifier|static
name|GtkItemFactory
modifier|*
name|load_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****<Save>  *****/
end_comment

begin_decl_stmt
DECL|variable|save_entries
specifier|static
name|GimpItemFactoryEntry
name|save_entries
index|[]
init|=
block|{
block|{
block|{
name|N_
argument_list|(
literal|"/By extension"
argument_list|)
block|,
name|NULL
block|,
name|file_save_by_extension_callback
block|,
literal|0
block|}
block|,
literal|"save_by_extension.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_save_entries
specifier|static
name|guint
name|n_save_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|save_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|save_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|save_factory
specifier|static
name|GtkItemFactory
modifier|*
name|save_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****<Layers>  *****/
end_comment

begin_decl_stmt
DECL|variable|layers_entries
specifier|static
name|GimpItemFactoryEntry
name|layers_entries
index|[]
init|=
block|{
block|{
block|{
name|N_
argument_list|(
literal|"/New Layer..."
argument_list|)
block|,
literal|"<control>N"
block|,
name|layers_dialog_new_layer_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/new_layer.html"
block|,
name|NULL
block|}
block|,
comment|/*<Layers>/Stack  */
block|{
block|{
name|N_
argument_list|(
literal|"/Stack"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Branch>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Stack/Previous Layer"
argument_list|)
block|,
literal|"Prior"
block|,
name|layers_dialog_previous_layer_callback
block|,
literal|0
block|}
block|,
literal|"stack/stack.html#previous_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Stack/Next Layer"
argument_list|)
block|,
literal|"Next"
block|,
name|layers_dialog_next_layer_callback
block|,
literal|0
block|}
block|,
literal|"stack/stack.html#next_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Stack/Raise Layer"
argument_list|)
block|,
literal|"<shift>Prior"
block|,
name|layers_dialog_raise_layer_callback
block|,
literal|0
block|}
block|,
literal|"stack/stack.html#raise_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Stack/Lower Layer"
argument_list|)
block|,
literal|"<shift>Next"
block|,
name|layers_dialog_lower_layer_callback
block|,
literal|0
block|}
block|,
literal|"stack/stack.html#lower_layer"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Stack/Layer to Top"
argument_list|)
block|,
literal|"<control>Prior"
block|,
name|layers_dialog_raise_layer_to_top_callback
block|,
literal|0
block|}
block|,
literal|"stack/stack.html#later_to_top"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Stack/Layer to Bottom"
argument_list|)
block|,
literal|"<control>Next"
block|,
name|layers_dialog_lower_layer_to_bottom_callback
block|,
literal|0
block|}
block|,
literal|"stack/stack.html#layer_to_bottom"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Duplicate Layer"
argument_list|)
block|,
literal|"<control>C"
block|,
name|layers_dialog_duplicate_layer_callback
block|,
literal|0
block|}
block|,
literal|"duplicate_layer.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Anchor Layer"
argument_list|)
block|,
literal|"<control>H"
block|,
name|layers_dialog_anchor_layer_callback
block|,
literal|0
block|}
block|,
literal|"anchor_layer.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Delete Layer"
argument_list|)
block|,
literal|"<control>X"
block|,
name|layers_dialog_delete_layer_callback
block|,
literal|0
block|}
block|,
literal|"delete_layer.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Layer Boundary Size..."
argument_list|)
block|,
literal|"<control>R"
block|,
name|layers_dialog_resize_layer_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/resize_layer.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Resize to Image"
argument_list|)
block|,
name|NULL
block|,
name|layers_dialog_resize_to_image_callback
block|,
literal|0
block|}
block|,
literal|"resize_to_image.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Scale Layer..."
argument_list|)
block|,
literal|"<control>S"
block|,
name|layers_dialog_scale_layer_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/scale_layer.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Merge Visible Layers..."
argument_list|)
block|,
literal|"<control>M"
block|,
name|layers_dialog_merge_layers_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/merge_visible_layers.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Merge Down"
argument_list|)
block|,
literal|"<control><shift>M"
block|,
name|layers_dialog_merge_down_callback
block|,
literal|0
block|}
block|,
literal|"merge_down.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Flatten Image"
argument_list|)
block|,
name|NULL
block|,
name|layers_dialog_flatten_image_callback
block|,
literal|0
block|}
block|,
literal|"flatten_image.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Add Layer Mask..."
argument_list|)
block|,
name|NULL
block|,
name|layers_dialog_add_layer_mask_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/add_mask.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Apply Layer Mask..."
argument_list|)
block|,
name|NULL
block|,
name|layers_dialog_apply_layer_mask_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/apply_mask.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Mask to Selection"
argument_list|)
block|,
name|NULL
block|,
name|layers_dialog_mask_select_callback
block|,
literal|0
block|}
block|,
literal|"mask_to_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Add Alpha Channel"
argument_list|)
block|,
name|NULL
block|,
name|layers_dialog_add_alpha_channel_callback
block|,
literal|0
block|}
block|,
literal|"add_alpha_channel.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Alpha to Selection"
argument_list|)
block|,
name|NULL
block|,
name|layers_dialog_alpha_select_callback
block|,
literal|0
block|}
block|,
literal|"alpha_to_selection.html"
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_layers_entries
specifier|static
name|guint
name|n_layers_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|layers_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|layers_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layers_factory
specifier|static
name|GtkItemFactory
modifier|*
name|layers_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****<Channels>  *****/
end_comment

begin_decl_stmt
DECL|variable|channels_entries
specifier|static
name|GimpItemFactoryEntry
name|channels_entries
index|[]
init|=
block|{
block|{
block|{
name|N_
argument_list|(
literal|"/New Channel..."
argument_list|)
block|,
literal|"<control>N"
block|,
name|channels_dialog_new_channel_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/new_channel.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Raise Channel"
argument_list|)
block|,
literal|"<control>F"
block|,
name|channels_dialog_raise_channel_callback
block|,
literal|0
block|}
block|,
literal|"raise_channel.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Lower Channel"
argument_list|)
block|,
literal|"<control>B"
block|,
name|channels_dialog_lower_channel_callback
block|,
literal|0
block|}
block|,
literal|"lower_channel.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Duplicate Channel"
argument_list|)
block|,
literal|"<control>C"
block|,
name|channels_dialog_duplicate_channel_callback
block|,
literal|0
block|}
block|,
literal|"duplicate_channel.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Channel to Selection"
argument_list|)
block|,
literal|"<control>S"
block|,
name|channels_dialog_channel_to_sel_callback
block|,
literal|0
block|}
block|,
literal|"channel_to_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Add to Selection"
argument_list|)
block|,
name|NULL
block|,
name|channels_dialog_add_channel_to_sel_callback
block|,
literal|0
block|}
block|,
literal|"channel_to_selection.html#add"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Subtract From Selection"
argument_list|)
block|,
name|NULL
block|,
name|channels_dialog_sub_channel_from_sel_callback
block|,
literal|0
block|}
block|,
literal|"channel_to_selection.html#subtract"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Intersect With Selection"
argument_list|)
block|,
name|NULL
block|,
name|channels_dialog_sub_channel_from_sel_callback
block|,
literal|0
block|}
block|,
literal|"channel_to_selection.html#intersect"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Delete Channel"
argument_list|)
block|,
literal|"<control>X"
block|,
name|channels_dialog_delete_channel_callback
block|,
literal|0
block|}
block|,
literal|"delete_channel.html"
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_channels_entries
specifier|static
name|guint
name|n_channels_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|channels_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|channels_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channels_factory
specifier|static
name|GtkItemFactory
modifier|*
name|channels_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****<Paths>  *****/
end_comment

begin_decl_stmt
DECL|variable|paths_entries
specifier|static
name|GimpItemFactoryEntry
name|paths_entries
index|[]
init|=
block|{
block|{
block|{
name|N_
argument_list|(
literal|"/New Path"
argument_list|)
block|,
literal|"<control>N"
block|,
name|paths_dialog_new_path_callback
block|,
literal|0
block|}
block|,
literal|"new_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Duplicate Path"
argument_list|)
block|,
literal|"<control>U"
block|,
name|paths_dialog_dup_path_callback
block|,
literal|0
block|}
block|,
literal|"duplicate_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Path to Selection"
argument_list|)
block|,
literal|"<control>S"
block|,
name|paths_dialog_path_to_sel_callback
block|,
literal|0
block|}
block|,
literal|"path_to_selection.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Selection to Path"
argument_list|)
block|,
literal|"<control>P"
block|,
name|paths_dialog_sel_to_path_callback
block|,
literal|0
block|}
block|,
literal|"selection_to_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Stroke Path"
argument_list|)
block|,
literal|"<control>T"
block|,
name|paths_dialog_stroke_path_callback
block|,
literal|0
block|}
block|,
literal|"stroke_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Delete Path"
argument_list|)
block|,
literal|"<control>X"
block|,
name|paths_dialog_delete_path_callback
block|,
literal|0
block|}
block|,
literal|"delete_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/---"
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"<Separator>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Copy Path"
argument_list|)
block|,
literal|"<control>C"
block|,
name|paths_dialog_copy_path_callback
block|,
literal|0
block|}
block|,
literal|"copy_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Paste Path"
argument_list|)
block|,
literal|"<control>V"
block|,
name|paths_dialog_paste_path_callback
block|,
literal|0
block|}
block|,
literal|"paste_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Import Path..."
argument_list|)
block|,
literal|"<control>I"
block|,
name|paths_dialog_import_path_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/import_path.html"
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Export Path..."
argument_list|)
block|,
literal|"<control>E"
block|,
name|paths_dialog_export_path_callback
block|,
literal|0
block|}
block|,
literal|"dialogs/export_path.html"
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_paths_entries
specifier|static
name|guint
name|n_paths_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|paths_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|paths_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|paths_factory
specifier|static
name|GtkItemFactory
modifier|*
name|paths_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|initialize
specifier|static
name|gboolean
name|initialize
init|=
name|TRUE
decl_stmt|;
end_decl_stmt

begin_function
name|void
DECL|function|menus_get_toolbox_menubar (GtkWidget ** menubar,GtkAccelGroup ** accel_group)
name|menus_get_toolbox_menubar
parameter_list|(
name|GtkWidget
modifier|*
modifier|*
name|menubar
parameter_list|,
name|GtkAccelGroup
modifier|*
modifier|*
name|accel_group
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
if|if
condition|(
name|menubar
condition|)
operator|*
name|menubar
operator|=
name|toolbox_factory
operator|->
name|widget
expr_stmt|;
if|if
condition|(
name|accel_group
condition|)
operator|*
name|accel_group
operator|=
name|toolbox_factory
operator|->
name|accel_group
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_get_image_menu (GtkWidget ** menu,GtkAccelGroup ** accel_group)
name|menus_get_image_menu
parameter_list|(
name|GtkWidget
modifier|*
modifier|*
name|menu
parameter_list|,
name|GtkAccelGroup
modifier|*
modifier|*
name|accel_group
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
if|if
condition|(
name|menu
condition|)
operator|*
name|menu
operator|=
name|image_factory
operator|->
name|widget
expr_stmt|;
if|if
condition|(
name|accel_group
condition|)
operator|*
name|accel_group
operator|=
name|image_factory
operator|->
name|accel_group
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_get_load_menu (GtkWidget ** menu,GtkAccelGroup ** accel_group)
name|menus_get_load_menu
parameter_list|(
name|GtkWidget
modifier|*
modifier|*
name|menu
parameter_list|,
name|GtkAccelGroup
modifier|*
modifier|*
name|accel_group
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
if|if
condition|(
name|menu
condition|)
operator|*
name|menu
operator|=
name|load_factory
operator|->
name|widget
expr_stmt|;
if|if
condition|(
name|accel_group
condition|)
operator|*
name|accel_group
operator|=
name|load_factory
operator|->
name|accel_group
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_get_save_menu (GtkWidget ** menu,GtkAccelGroup ** accel_group)
name|menus_get_save_menu
parameter_list|(
name|GtkWidget
modifier|*
modifier|*
name|menu
parameter_list|,
name|GtkAccelGroup
modifier|*
modifier|*
name|accel_group
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
if|if
condition|(
name|menu
condition|)
operator|*
name|menu
operator|=
name|save_factory
operator|->
name|widget
expr_stmt|;
if|if
condition|(
name|accel_group
condition|)
operator|*
name|accel_group
operator|=
name|save_factory
operator|->
name|accel_group
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_get_layers_menu (GtkWidget ** menu,GtkAccelGroup ** accel_group)
name|menus_get_layers_menu
parameter_list|(
name|GtkWidget
modifier|*
modifier|*
name|menu
parameter_list|,
name|GtkAccelGroup
modifier|*
modifier|*
name|accel_group
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
if|if
condition|(
name|menu
condition|)
operator|*
name|menu
operator|=
name|layers_factory
operator|->
name|widget
expr_stmt|;
if|if
condition|(
name|accel_group
condition|)
operator|*
name|accel_group
operator|=
name|layers_factory
operator|->
name|accel_group
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_get_channels_menu (GtkWidget ** menu,GtkAccelGroup ** accel_group)
name|menus_get_channels_menu
parameter_list|(
name|GtkWidget
modifier|*
modifier|*
name|menu
parameter_list|,
name|GtkAccelGroup
modifier|*
modifier|*
name|accel_group
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
if|if
condition|(
name|menu
condition|)
operator|*
name|menu
operator|=
name|channels_factory
operator|->
name|widget
expr_stmt|;
if|if
condition|(
name|accel_group
condition|)
operator|*
name|accel_group
operator|=
name|channels_factory
operator|->
name|accel_group
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_get_paths_menu (GtkWidget ** menu,GtkAccelGroup ** accel_group)
name|menus_get_paths_menu
parameter_list|(
name|GtkWidget
modifier|*
modifier|*
name|menu
parameter_list|,
name|GtkAccelGroup
modifier|*
modifier|*
name|accel_group
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
if|if
condition|(
name|menu
condition|)
operator|*
name|menu
operator|=
name|paths_factory
operator|->
name|widget
expr_stmt|;
if|if
condition|(
name|accel_group
condition|)
operator|*
name|accel_group
operator|=
name|paths_factory
operator|->
name|accel_group
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_create_item_from_full_path (GimpItemFactoryEntry * entry,gpointer callback_data)
name|menus_create_item_from_full_path
parameter_list|(
name|GimpItemFactoryEntry
modifier|*
name|entry
parameter_list|,
name|gpointer
name|callback_data
parameter_list|)
block|{
name|GtkItemFactory
modifier|*
name|item_factory
decl_stmt|;
name|GString
modifier|*
name|tearoff_path
decl_stmt|;
name|gchar
modifier|*
name|path
decl_stmt|;
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
name|path
operator|=
name|entry
operator|->
name|entry
operator|.
name|path
expr_stmt|;
name|item_factory
operator|=
name|gtk_item_factory_from_path
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|item_factory
condition|)
block|{
name|g_warning
argument_list|(
literal|"entry refers to unknown item factory: \"%s\""
argument_list|,
name|path
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
operator|(
name|item_factory
operator|==
name|image_factory
operator|)
operator|||
operator|(
name|item_factory
operator|==
name|toolbox_factory
operator|)
condition|)
block|{
name|gint
name|factory_length
decl_stmt|;
name|gchar
modifier|*
name|p
decl_stmt|;
name|tearoff_path
operator|=
name|g_string_new
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|p
operator|=
name|strchr
argument_list|(
name|entry
operator|->
name|entry
operator|.
name|path
argument_list|,
literal|'/'
argument_list|)
expr_stmt|;
name|factory_length
operator|=
name|p
operator|-
name|entry
operator|->
name|entry
operator|.
name|path
expr_stmt|;
comment|/*  skip the first slash  */
if|if
condition|(
name|p
condition|)
name|p
operator|=
name|strchr
argument_list|(
name|p
operator|+
literal|1
argument_list|,
literal|'/'
argument_list|)
expr_stmt|;
while|while
condition|(
name|p
condition|)
block|{
name|g_string_assign
argument_list|(
name|tearoff_path
argument_list|,
name|entry
operator|->
name|entry
operator|.
name|path
operator|+
name|factory_length
argument_list|)
expr_stmt|;
name|g_string_truncate
argument_list|(
name|tearoff_path
argument_list|,
name|p
operator|-
name|entry
operator|->
name|entry
operator|.
name|path
operator|+
literal|1
operator|-
name|factory_length
argument_list|)
expr_stmt|;
name|g_string_append
argument_list|(
name|tearoff_path
argument_list|,
literal|"tearoff1"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gtk_item_factory_get_widget
argument_list|(
name|item_factory
argument_list|,
name|tearoff_path
operator|->
name|str
argument_list|)
condition|)
block|{
name|GimpItemFactoryEntry
name|tearoff_entry
init|=
block|{
block|{
name|NULL
block|,
name|NULL
block|,
name|tearoff_cmd_callback
block|,
literal|0
block|,
literal|"<Tearoff>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
decl_stmt|;
name|tearoff_entry
operator|.
name|entry
operator|.
name|path
operator|=
name|tearoff_path
operator|->
name|str
expr_stmt|;
name|menus_create_item
argument_list|(
name|item_factory
argument_list|,
operator|&
name|tearoff_entry
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
name|p
operator|=
name|strchr
argument_list|(
name|p
operator|+
literal|1
argument_list|,
literal|'/'
argument_list|)
expr_stmt|;
block|}
name|g_string_free
argument_list|(
name|tearoff_path
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|*
name|path
operator|!=
literal|'>'
condition|)
name|path
operator|++
expr_stmt|;
name|path
operator|++
expr_stmt|;
name|entry
operator|->
name|entry
operator|.
name|path
operator|=
name|path
expr_stmt|;
name|menus_create_item
argument_list|(
name|item_factory
argument_list|,
name|entry
argument_list|,
name|callback_data
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_filters_subdirs_to_top (GtkMenu * menu)
name|menus_filters_subdirs_to_top
parameter_list|(
name|GtkMenu
modifier|*
name|menu
parameter_list|)
block|{
name|GtkMenuItem
modifier|*
name|menu_item
decl_stmt|;
name|GList
modifier|*
name|list
decl_stmt|;
name|gboolean
name|submenus_passed
init|=
name|FALSE
decl_stmt|;
name|gboolean
name|separator_found
init|=
name|FALSE
decl_stmt|;
name|gint
name|pos
decl_stmt|;
name|pos
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|list
operator|=
name|GTK_MENU_SHELL
argument_list|(
name|menu
argument_list|)
operator|->
name|children
init|;
name|list
condition|;
name|list
operator|=
name|g_list_next
argument_list|(
name|list
argument_list|)
control|)
block|{
name|menu_item
operator|=
name|GTK_MENU_ITEM
argument_list|(
name|list
operator|->
name|data
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|->
name|submenu
condition|)
block|{
if|if
condition|(
name|submenus_passed
condition|)
block|{
name|menus_filters_subdirs_to_top
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|submenu
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_menu_reorder_child
argument_list|(
name|menu
argument_list|,
name|GTK_WIDGET
argument_list|(
name|menu_item
argument_list|)
argument_list|,
name|pos
argument_list|)
expr_stmt|;
block|}
name|pos
operator|++
expr_stmt|;
block|}
else|else
block|{
name|submenus_passed
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|GTK_BIN
argument_list|(
name|menu_item
argument_list|)
operator|->
name|child
operator|&&
name|menu_item
operator|!=
name|GTK_MENU_SHELL
argument_list|(
name|menu
argument_list|)
operator|->
name|children
operator|->
name|data
condition|)
name|separator_found
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|pos
operator|>
literal|1
operator|)
operator|&&
operator|!
name|separator_found
condition|)
block|{
name|GtkWidget
modifier|*
name|separator
decl_stmt|;
name|separator
operator|=
name|gtk_menu_item_new
argument_list|()
expr_stmt|;
name|gtk_menu_insert
argument_list|(
name|menu
argument_list|,
name|separator
argument_list|,
name|pos
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|separator
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|menus_reorder_plugins (void)
name|menus_reorder_plugins
parameter_list|(
name|void
parameter_list|)
block|{
specifier|static
name|gchar
modifier|*
name|xtns_plugins
index|[]
init|=
block|{
literal|"DB Browser..."
block|,
literal|"PDB Explorer"
block|,
literal|"Plugin Details..."
block|,
literal|"Parasite Editor"
block|}
decl_stmt|;
specifier|static
name|gint
name|n_xtns_plugins
init|=
operator|(
sizeof|sizeof
argument_list|(
name|xtns_plugins
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|xtns_plugins
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
specifier|static
name|gchar
modifier|*
name|rotate_plugins
index|[]
init|=
block|{
literal|"90 degrees"
block|,
literal|"180 degrees"
block|,
literal|"270 degrees"
block|}
decl_stmt|;
specifier|static
name|gint
name|n_rotate_plugins
init|=
operator|(
sizeof|sizeof
argument_list|(
name|rotate_plugins
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|rotate_plugins
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
specifier|static
name|gchar
modifier|*
name|image_file_entries
index|[]
init|=
block|{
literal|"---moved"
block|,
literal|"Close"
block|,
literal|"Quit"
block|}
decl_stmt|;
specifier|static
name|gint
name|n_image_file_entries
init|=
operator|(
sizeof|sizeof
argument_list|(
name|image_file_entries
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|image_file_entries
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
specifier|static
name|gchar
modifier|*
name|reorder_submenus
index|[]
init|=
block|{
literal|"<Image>/Video"
block|}
decl_stmt|;
specifier|static
name|gint
name|n_reorder_submenus
init|=
operator|(
sizeof|sizeof
argument_list|(
name|reorder_submenus
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|reorder_submenus
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
specifier|static
name|gchar
modifier|*
name|reorder_subsubmenus
index|[]
init|=
block|{
literal|"<Image>/Filters"
block|,
literal|"<Toolbox>/Xtns"
block|}
decl_stmt|;
specifier|static
name|gint
name|n_reorder_subsubmenus
init|=
operator|(
sizeof|sizeof
argument_list|(
name|reorder_subsubmenus
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|reorder_subsubmenus
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
specifier|static
name|gchar
modifier|*
name|reorder_if_exists
index|[]
init|=
block|{
literal|"/Filters/Misc"
block|}
decl_stmt|;
specifier|static
name|gint
name|n_reorder_if_exists
init|=
operator|(
sizeof|sizeof
argument_list|(
name|reorder_if_exists
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|reorder_if_exists
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
name|GtkItemFactory
modifier|*
name|item_factory
decl_stmt|;
name|GtkWidget
modifier|*
name|menu_item
decl_stmt|;
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GList
modifier|*
name|list
decl_stmt|;
name|gchar
modifier|*
name|path
decl_stmt|;
name|gint
name|i
decl_stmt|,
name|pos
decl_stmt|;
comment|/*  Beautify<Toolbox>/Xtns  */
name|pos
operator|=
literal|2
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_xtns_plugins
condition|;
name|i
operator|++
control|)
block|{
name|path
operator|=
name|g_strconcat
argument_list|(
literal|"/Xtns/"
argument_list|,
name|xtns_plugins
index|[
name|i
index|]
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|toolbox_factory
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
block|{
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
name|pos
argument_list|)
expr_stmt|;
name|pos
operator|++
expr_stmt|;
block|}
block|}
comment|/*  Move "Filter all Layers..." before the separator  */
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
literal|"/Filters/Filter all Layers..."
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
literal|3
argument_list|)
expr_stmt|;
comment|/*  Reorder Rotate plugin menu entries */
name|pos
operator|=
literal|2
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_rotate_plugins
condition|;
name|i
operator|++
control|)
block|{
name|path
operator|=
name|g_strconcat
argument_list|(
literal|"/Image/Transforms/Rotate/"
argument_list|,
name|rotate_plugins
index|[
name|i
index|]
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
block|{
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
name|pos
argument_list|)
expr_stmt|;
name|pos
operator|++
expr_stmt|;
block|}
block|}
name|pos
operator|=
literal|2
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_rotate_plugins
condition|;
name|i
operator|++
control|)
block|{
name|path
operator|=
name|g_strconcat
argument_list|(
literal|"/Layers/Rotate/"
argument_list|,
name|rotate_plugins
index|[
name|i
index|]
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
block|{
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
name|pos
argument_list|)
expr_stmt|;
name|pos
operator|++
expr_stmt|;
block|}
block|}
comment|/*  Reorder<Image>/File  */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_image_file_entries
condition|;
name|i
operator|++
control|)
block|{
name|path
operator|=
name|g_strconcat
argument_list|(
literal|"/File/"
argument_list|,
name|image_file_entries
index|[
name|i
index|]
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
comment|/*  Reorder menus where plugins registered submenus  */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_reorder_submenus
condition|;
name|i
operator|++
control|)
block|{
name|item_factory
operator|=
name|gtk_item_factory_from_path
argument_list|(
name|reorder_submenus
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|item_factory
argument_list|,
name|reorder_submenus
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu
operator|&&
name|GTK_IS_MENU
argument_list|(
name|menu
argument_list|)
condition|)
block|{
name|menus_filters_subdirs_to_top
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_reorder_subsubmenus
condition|;
name|i
operator|++
control|)
block|{
name|item_factory
operator|=
name|gtk_item_factory_from_path
argument_list|(
name|reorder_subsubmenus
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|item_factory
argument_list|,
name|reorder_subsubmenus
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu
operator|&&
name|GTK_IS_MENU
argument_list|(
name|menu
argument_list|)
condition|)
block|{
for|for
control|(
name|list
operator|=
name|GTK_MENU_SHELL
argument_list|(
name|menu
argument_list|)
operator|->
name|children
init|;
name|list
condition|;
name|list
operator|=
name|g_list_next
argument_list|(
name|list
argument_list|)
control|)
block|{
name|GtkMenuItem
modifier|*
name|menu_item
decl_stmt|;
name|menu_item
operator|=
name|GTK_MENU_ITEM
argument_list|(
name|list
operator|->
name|data
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|->
name|submenu
condition|)
name|menus_filters_subdirs_to_top
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|submenu
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
comment|/*  Reorder submenus of<Image>/Filters which only exist sometimes  */
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
literal|"/Filters/---INSERT"
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
operator|&&
name|GTK_IS_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
condition|)
block|{
name|menu
operator|=
name|menu_item
operator|->
name|parent
expr_stmt|;
name|pos
operator|=
name|g_list_index
argument_list|(
name|GTK_MENU_SHELL
argument_list|(
name|menu
argument_list|)
operator|->
name|children
argument_list|,
name|menu_item
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_reorder_if_exists
condition|;
name|i
operator|++
control|)
block|{
name|GList
modifier|*
name|list
decl_stmt|;
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
name|reorder_if_exists
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|GTK_IS_MENU
argument_list|(
name|menu_item
argument_list|)
condition|)
block|{
for|for
control|(
name|list
operator|=
name|GTK_MENU_SHELL
argument_list|(
name|menu
argument_list|)
operator|->
name|children
init|;
name|list
condition|;
name|list
operator|=
name|g_list_next
argument_list|(
name|list
argument_list|)
control|)
block|{
if|if
condition|(
name|GTK_MENU_ITEM
argument_list|(
name|list
operator|->
name|data
argument_list|)
operator|->
name|submenu
operator|==
name|menu_item
condition|)
break|break;
block|}
if|if
condition|(
name|list
condition|)
block|{
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|GTK_WIDGET
argument_list|(
name|list
operator|->
name|data
argument_list|)
argument_list|,
name|pos
argument_list|)
expr_stmt|;
name|pos
operator|++
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_tools_create (ToolInfo * tool_info)
name|menus_tools_create
parameter_list|(
name|ToolInfo
modifier|*
name|tool_info
parameter_list|)
block|{
name|GimpItemFactoryEntry
name|entry
decl_stmt|;
name|entry
operator|.
name|entry
operator|.
name|path
operator|=
name|tool_info
operator|->
name|menu_path
expr_stmt|;
name|entry
operator|.
name|entry
operator|.
name|accelerator
operator|=
name|tool_info
operator|->
name|menu_accel
expr_stmt|;
name|entry
operator|.
name|entry
operator|.
name|callback
operator|=
name|tools_select_cmd_callback
expr_stmt|;
name|entry
operator|.
name|entry
operator|.
name|callback_action
operator|=
name|tool_info
operator|->
name|tool_id
expr_stmt|;
name|entry
operator|.
name|entry
operator|.
name|item_type
operator|=
name|NULL
expr_stmt|;
name|entry
operator|.
name|help_page
operator|=
name|tool_info
operator|->
name|private_tip
expr_stmt|;
name|entry
operator|.
name|description
operator|=
name|NULL
expr_stmt|;
name|menus_create_item
argument_list|(
name|image_factory
argument_list|,
operator|&
name|entry
argument_list|,
operator|(
name|gpointer
operator|)
name|tool_info
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_set_sensitive (gchar * path,gboolean sensitive)
name|menus_set_sensitive
parameter_list|(
name|gchar
modifier|*
name|path
parameter_list|,
name|gboolean
name|sensitive
parameter_list|)
block|{
name|GtkItemFactory
modifier|*
name|ifactory
decl_stmt|;
name|GtkWidget
modifier|*
name|widget
init|=
name|NULL
decl_stmt|;
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
name|ifactory
operator|=
name|gtk_item_factory_from_path
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|ifactory
condition|)
block|{
name|widget
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|ifactory
argument_list|,
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|widget
condition|)
name|gtk_widget_set_sensitive
argument_list|(
name|widget
argument_list|,
name|sensitive
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|ifactory
operator|||
operator|!
name|widget
condition|)
name|g_warning
argument_list|(
literal|"Unable to set sensitivity for menu which doesn't exist:\n%s"
argument_list|,
name|path
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_set_state (gchar * path,gboolean state)
name|menus_set_state
parameter_list|(
name|gchar
modifier|*
name|path
parameter_list|,
name|gboolean
name|state
parameter_list|)
block|{
name|GtkItemFactory
modifier|*
name|ifactory
decl_stmt|;
name|GtkWidget
modifier|*
name|widget
init|=
name|NULL
decl_stmt|;
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
name|ifactory
operator|=
name|gtk_item_factory_from_path
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|ifactory
condition|)
block|{
name|widget
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|ifactory
argument_list|,
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|widget
operator|&&
name|GTK_IS_CHECK_MENU_ITEM
argument_list|(
name|widget
argument_list|)
condition|)
name|gtk_check_menu_item_set_active
argument_list|(
name|GTK_CHECK_MENU_ITEM
argument_list|(
name|widget
argument_list|)
argument_list|,
name|state
argument_list|)
expr_stmt|;
else|else
name|widget
operator|=
name|NULL
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|ifactory
operator|||
operator|!
name|widget
condition|)
name|g_warning
argument_list|(
literal|"Unable to set state for menu which doesn't exist:\n%s\n"
argument_list|,
name|path
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_destroy (gchar * path)
name|menus_destroy
parameter_list|(
name|gchar
modifier|*
name|path
parameter_list|)
block|{
if|if
condition|(
name|initialize
condition|)
name|menus_init
argument_list|()
expr_stmt|;
name|gtk_item_factories_path_delete
argument_list|(
name|NULL
argument_list|,
name|path
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_quit (void)
name|menus_quit
parameter_list|(
name|void
parameter_list|)
block|{
name|gchar
modifier|*
name|filename
decl_stmt|;
name|filename
operator|=
name|gimp_personal_rc_file
argument_list|(
literal|"menurc"
argument_list|)
expr_stmt|;
name|gtk_item_factory_dump_rc
argument_list|(
name|filename
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|initialize
condition|)
block|{
name|gtk_object_unref
argument_list|(
name|GTK_OBJECT
argument_list|(
name|toolbox_factory
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_object_unref
argument_list|(
name|GTK_OBJECT
argument_list|(
name|image_factory
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_object_unref
argument_list|(
name|GTK_OBJECT
argument_list|(
name|load_factory
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_object_unref
argument_list|(
name|GTK_OBJECT
argument_list|(
name|save_factory
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_object_unref
argument_list|(
name|GTK_OBJECT
argument_list|(
name|layers_factory
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_object_unref
argument_list|(
name|GTK_OBJECT
argument_list|(
name|channels_factory
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_object_unref
argument_list|(
name|GTK_OBJECT
argument_list|(
name|paths_factory
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_last_opened_cmd_callback (GtkWidget * widget,gpointer callback_data,guint num)
name|menus_last_opened_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|num
parameter_list|)
block|{
name|gchar
modifier|*
name|filename
decl_stmt|,
modifier|*
name|raw_filename
decl_stmt|;
name|guint
name|num_entries
decl_stmt|;
name|num_entries
operator|=
name|g_slist_length
argument_list|(
name|last_opened_raw_filenames
argument_list|)
expr_stmt|;
if|if
condition|(
name|num
operator|>=
name|num_entries
condition|)
return|return;
name|raw_filename
operator|=
operator|(
operator|(
name|GString
operator|*
operator|)
name|g_slist_nth_data
argument_list|(
name|last_opened_raw_filenames
argument_list|,
name|num
argument_list|)
operator|)
operator|->
name|str
expr_stmt|;
name|filename
operator|=
name|g_basename
argument_list|(
name|raw_filename
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|file_open
argument_list|(
name|raw_filename
argument_list|,
name|raw_filename
argument_list|)
condition|)
name|g_message
argument_list|(
name|_
argument_list|(
literal|"Error opening file: %s\n"
argument_list|)
argument_list|,
name|raw_filename
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_last_opened_update_labels (void)
name|menus_last_opened_update_labels
parameter_list|(
name|void
parameter_list|)
block|{
name|GSList
modifier|*
name|filename_slist
decl_stmt|;
name|GString
modifier|*
name|entry_filename
decl_stmt|,
modifier|*
name|path
decl_stmt|;
name|GtkWidget
modifier|*
name|widget
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|guint
name|num_entries
decl_stmt|;
name|entry_filename
operator|=
name|g_string_new
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|path
operator|=
name|g_string_new
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|filename_slist
operator|=
name|last_opened_raw_filenames
expr_stmt|;
name|num_entries
operator|=
name|g_slist_length
argument_list|(
name|last_opened_raw_filenames
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<=
name|num_entries
condition|;
name|i
operator|++
control|)
block|{
name|g_string_sprintf
argument_list|(
name|entry_filename
argument_list|,
literal|"%d. %s"
argument_list|,
name|i
argument_list|,
name|g_basename
argument_list|(
operator|(
operator|(
name|GString
operator|*
operator|)
name|filename_slist
operator|->
name|data
operator|)
operator|->
name|str
argument_list|)
argument_list|)
expr_stmt|;
name|g_string_sprintf
argument_list|(
name|path
argument_list|,
literal|"/File/MRU%02d"
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|widget
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|toolbox_factory
argument_list|,
name|path
operator|->
name|str
argument_list|)
expr_stmt|;
if|if
condition|(
name|widget
condition|)
block|{
name|gtk_widget_show
argument_list|(
name|widget
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|GTK_LABEL
argument_list|(
name|GTK_BIN
argument_list|(
name|widget
argument_list|)
operator|->
name|child
argument_list|)
argument_list|,
name|entry_filename
operator|->
name|str
argument_list|)
expr_stmt|;
block|}
name|filename_slist
operator|=
name|filename_slist
operator|->
name|next
expr_stmt|;
block|}
name|g_string_free
argument_list|(
name|entry_filename
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|g_string_free
argument_list|(
name|path
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|menus_last_opened_add (gchar * filename)
name|menus_last_opened_add
parameter_list|(
name|gchar
modifier|*
name|filename
parameter_list|)
block|{
name|GString
modifier|*
name|raw_filename
decl_stmt|;
name|GSList
modifier|*
name|list
decl_stmt|;
name|GtkWidget
modifier|*
name|menu_item
decl_stmt|;
name|guint
name|num_entries
decl_stmt|;
comment|/* ignore the add if we've already got the filename on the list */
for|for
control|(
name|list
operator|=
name|last_opened_raw_filenames
init|;
name|list
condition|;
name|list
operator|=
name|g_slist_next
argument_list|(
name|list
argument_list|)
control|)
block|{
name|raw_filename
operator|=
name|list
operator|->
name|data
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|raw_filename
operator|->
name|str
argument_list|,
name|filename
argument_list|)
condition|)
return|return;
block|}
name|num_entries
operator|=
name|g_slist_length
argument_list|(
name|last_opened_raw_filenames
argument_list|)
expr_stmt|;
if|if
condition|(
name|num_entries
operator|==
name|last_opened_size
condition|)
block|{
name|g_slist_remove_link
argument_list|(
name|last_opened_raw_filenames
argument_list|,
name|g_slist_last
argument_list|(
name|last_opened_raw_filenames
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|raw_filename
operator|=
name|g_string_new
argument_list|(
name|filename
argument_list|)
expr_stmt|;
name|last_opened_raw_filenames
operator|=
name|g_slist_prepend
argument_list|(
name|last_opened_raw_filenames
argument_list|,
name|raw_filename
argument_list|)
expr_stmt|;
if|if
condition|(
name|num_entries
operator|==
literal|0
condition|)
block|{
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|toolbox_factory
argument_list|,
literal|"/File/---MRU"
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menu_item
argument_list|)
expr_stmt|;
block|}
name|menus_last_opened_update_labels
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_init_mru (void)
name|menus_init_mru
parameter_list|(
name|void
parameter_list|)
block|{
name|GimpItemFactoryEntry
modifier|*
name|last_opened_entries
decl_stmt|;
name|GtkWidget
modifier|*
name|menu_item
decl_stmt|;
name|gchar
modifier|*
name|paths
decl_stmt|;
name|gchar
modifier|*
name|accelerators
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|last_opened_entries
operator|=
name|g_new
argument_list|(
name|GimpItemFactoryEntry
argument_list|,
name|last_opened_size
argument_list|)
expr_stmt|;
name|paths
operator|=
name|g_new
argument_list|(
name|gchar
argument_list|,
name|last_opened_size
operator|*
name|MRU_MENU_ENTRY_SIZE
argument_list|)
expr_stmt|;
name|accelerators
operator|=
name|g_new
argument_list|(
name|gchar
argument_list|,
literal|9
operator|*
name|MRU_MENU_ACCEL_SIZE
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|last_opened_size
condition|;
name|i
operator|++
control|)
block|{
name|gchar
modifier|*
name|path
decl_stmt|,
modifier|*
name|accelerator
decl_stmt|;
name|path
operator|=
operator|&
name|paths
index|[
name|i
operator|*
name|MRU_MENU_ENTRY_SIZE
index|]
expr_stmt|;
if|if
condition|(
name|i
operator|<
literal|9
condition|)
name|accelerator
operator|=
operator|&
name|accelerators
index|[
name|i
operator|*
name|MRU_MENU_ACCEL_SIZE
index|]
expr_stmt|;
else|else
name|accelerator
operator|=
name|NULL
expr_stmt|;
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|path
operator|=
name|path
expr_stmt|;
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|accelerator
operator|=
name|accelerator
expr_stmt|;
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|callback
operator|=
operator|(
name|GtkItemFactoryCallback
operator|)
name|menus_last_opened_cmd_callback
expr_stmt|;
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|callback_action
operator|=
name|i
expr_stmt|;
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|item_type
operator|=
name|NULL
expr_stmt|;
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|help_page
operator|=
literal|"file/last_opened.html"
expr_stmt|;
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|description
operator|=
name|NULL
expr_stmt|;
name|g_snprintf
argument_list|(
name|path
argument_list|,
name|MRU_MENU_ENTRY_SIZE
argument_list|,
literal|"/File/MRU%02d"
argument_list|,
name|i
operator|+
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|accelerator
operator|!=
name|NULL
condition|)
name|g_snprintf
argument_list|(
name|accelerator
argument_list|,
name|MRU_MENU_ACCEL_SIZE
argument_list|,
literal|"<control>%d"
argument_list|,
name|i
operator|+
literal|1
argument_list|)
expr_stmt|;
block|}
name|menus_create_items
argument_list|(
name|toolbox_factory
argument_list|,
name|last_opened_size
argument_list|,
name|last_opened_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|last_opened_size
condition|;
name|i
operator|++
control|)
block|{
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|toolbox_factory
argument_list|,
name|last_opened_entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|path
argument_list|)
expr_stmt|;
name|gtk_widget_hide
argument_list|(
name|menu_item
argument_list|)
expr_stmt|;
block|}
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|toolbox_factory
argument_list|,
literal|"/File/---MRU"
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|gtk_widget_hide
argument_list|(
name|menu_item
argument_list|)
expr_stmt|;
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|toolbox_factory
argument_list|,
literal|"/File/Quit"
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|paths
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|accelerators
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|last_opened_entries
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  This function gets called while browsing a menu created  *  by a GtkItemFactory  */
end_comment

begin_function
specifier|static
name|gint
DECL|function|menus_item_key_press (GtkWidget * widget,GdkEventKey * kevent,gpointer data)
name|menus_item_key_press
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEventKey
modifier|*
name|kevent
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkItemFactory
modifier|*
name|item_factory
init|=
name|NULL
decl_stmt|;
name|GtkWidget
modifier|*
name|active_menu_item
init|=
name|NULL
decl_stmt|;
name|gchar
modifier|*
name|help_path
init|=
name|NULL
decl_stmt|;
name|gchar
modifier|*
name|help_page
init|=
name|NULL
decl_stmt|;
if|if
condition|(
name|kevent
operator|->
name|keyval
operator|!=
name|GDK_F1
condition|)
return|return
name|FALSE
return|;
name|gtk_signal_emit_stop_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"key_press_event"
argument_list|)
expr_stmt|;
name|item_factory
operator|=
operator|(
name|GtkItemFactory
operator|*
operator|)
name|data
expr_stmt|;
name|help_path
operator|=
operator|(
name|gchar
operator|*
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|item_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|)
expr_stmt|;
name|active_menu_item
operator|=
name|GTK_MENU_SHELL
argument_list|(
name|widget
argument_list|)
operator|->
name|active_menu_item
expr_stmt|;
if|if
condition|(
name|active_menu_item
condition|)
name|help_page
operator|=
operator|(
name|gchar
operator|*
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|active_menu_item
argument_list|)
argument_list|,
literal|"help_page"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|help_page
condition|)
name|help_page
operator|=
literal|"index.html"
expr_stmt|;
if|if
condition|(
name|help_path
operator|&&
name|help_page
condition|)
block|{
name|gchar
modifier|*
name|help_string
decl_stmt|;
name|help_string
operator|=
name|g_strdup_printf
argument_list|(
literal|"%s/%s"
argument_list|,
name|help_path
argument_list|,
name|help_page
argument_list|)
expr_stmt|;
name|gimp_help
argument_list|(
name|help_string
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|help_string
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|gimp_help
argument_list|(
name|NULL
argument_list|)
expr_stmt|;
block|}
return|return
name|TRUE
return|;
block|}
end_function

begin_comment
comment|/*  set up the callback to catch the "F1" key  */
end_comment

begin_function
specifier|static
name|void
DECL|function|menus_item_realize (GtkWidget * widget,gpointer data)
name|menus_item_realize
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
if|if
condition|(
name|GTK_IS_MENU_SHELL
argument_list|(
name|widget
operator|->
name|parent
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
operator|->
name|parent
argument_list|)
argument_list|,
literal|"menus_key_press_connected"
argument_list|)
condition|)
block|{
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
operator|->
name|parent
argument_list|)
argument_list|,
literal|"key_press_event"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|menus_item_key_press
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|data
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
operator|->
name|parent
argument_list|)
argument_list|,
literal|"menus_key_press_connected"
argument_list|,
operator|(
name|gpointer
operator|)
name|TRUE
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_create_item (GtkItemFactory * item_factory,GimpItemFactoryEntry * entry,gpointer callback_data,guint callback_type)
name|menus_create_item
parameter_list|(
name|GtkItemFactory
modifier|*
name|item_factory
parameter_list|,
name|GimpItemFactoryEntry
modifier|*
name|entry
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_type
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|menu_item
decl_stmt|;
name|gtk_item_factory_create_item
argument_list|(
name|item_factory
argument_list|,
operator|(
name|GtkItemFactoryEntry
operator|*
operator|)
name|entry
argument_list|,
name|callback_data
argument_list|,
name|callback_type
argument_list|)
expr_stmt|;
name|menu_item
operator|=
name|gtk_item_factory_get_item
argument_list|(
name|item_factory
argument_list|,
operator|(
operator|(
name|GtkItemFactoryEntry
operator|*
operator|)
name|entry
operator|)
operator|->
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
condition|)
block|{
name|gtk_signal_connect_after
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menu_item
argument_list|)
argument_list|,
literal|"realize"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|menus_item_realize
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|item_factory
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menu_item
argument_list|)
argument_list|,
literal|"help_page"
argument_list|,
operator|(
name|gpointer
operator|)
name|entry
operator|->
name|help_page
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_create_items (GtkItemFactory * item_factory,guint n_entries,GimpItemFactoryEntry * entries,gpointer callback_data,guint callback_type)
name|menus_create_items
parameter_list|(
name|GtkItemFactory
modifier|*
name|item_factory
parameter_list|,
name|guint
name|n_entries
parameter_list|,
name|GimpItemFactoryEntry
modifier|*
name|entries
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_type
parameter_list|)
block|{
name|gint
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_entries
condition|;
name|i
operator|++
control|)
block|{
name|menus_create_item
argument_list|(
name|item_factory
argument_list|,
name|entries
operator|+
name|i
argument_list|,
name|callback_data
argument_list|,
name|callback_type
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|item_factory
operator|==
name|toolbox_factory
operator|)
operator|||
operator|(
name|item_factory
operator|==
name|image_factory
operator|)
operator|)
operator|&&
name|entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|item_type
operator|&&
name|strstr
argument_list|(
name|entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|item_type
argument_list|,
literal|"Branch>"
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|tearoff_path
decl_stmt|;
name|tearoff_path
operator|=
name|g_strconcat
argument_list|(
name|entries
index|[
name|i
index|]
operator|.
name|entry
operator|.
name|path
argument_list|,
literal|"/tearoff1"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|{
name|GimpItemFactoryEntry
name|tearoff_entry
init|=
block|{
block|{
name|NULL
block|,
name|NULL
block|,
name|tearoff_cmd_callback
block|,
literal|0
block|,
literal|"<Tearoff>"
block|}
block|,
name|NULL
block|,
name|NULL
block|}
decl_stmt|;
name|tearoff_entry
operator|.
name|entry
operator|.
name|path
operator|=
name|tearoff_path
expr_stmt|;
name|menus_create_item
argument_list|(
name|item_factory
argument_list|,
operator|&
name|tearoff_entry
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
name|g_free
argument_list|(
name|tearoff_path
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|menus_init (void)
name|menus_init
parameter_list|(
name|void
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|menu_item
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|gint
name|i
decl_stmt|;
if|if
condition|(
operator|!
name|initialize
condition|)
return|return;
name|initialize
operator|=
name|FALSE
expr_stmt|;
name|toolbox_factory
operator|=
name|gtk_item_factory_new
argument_list|(
name|GTK_TYPE_MENU_BAR
argument_list|,
literal|"<Toolbox>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|toolbox_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|,
operator|(
name|gpointer
operator|)
literal|"toolbox"
argument_list|)
expr_stmt|;
name|gtk_item_factory_set_translate_func
argument_list|(
name|toolbox_factory
argument_list|,
name|menu_translate
argument_list|,
literal|"<Toolbox>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menus_create_items
argument_list|(
name|toolbox_factory
argument_list|,
name|n_toolbox_entries
argument_list|,
name|toolbox_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|menus_init_mru
argument_list|()
expr_stmt|;
name|image_factory
operator|=
name|gtk_item_factory_new
argument_list|(
name|GTK_TYPE_MENU
argument_list|,
literal|"<Image>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|image_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|,
operator|(
name|gpointer
operator|)
literal|"image"
argument_list|)
expr_stmt|;
name|gtk_item_factory_set_translate_func
argument_list|(
name|image_factory
argument_list|,
name|menu_translate
argument_list|,
literal|"<Image>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menus_create_items
argument_list|(
name|image_factory
argument_list|,
name|n_image_entries
argument_list|,
name|image_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|load_factory
operator|=
name|gtk_item_factory_new
argument_list|(
name|GTK_TYPE_MENU
argument_list|,
literal|"<Load>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|load_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|,
operator|(
name|gpointer
operator|)
literal|"open"
argument_list|)
expr_stmt|;
name|gtk_item_factory_set_translate_func
argument_list|(
name|load_factory
argument_list|,
name|menu_translate
argument_list|,
literal|"<Load>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menus_create_items
argument_list|(
name|load_factory
argument_list|,
name|n_load_entries
argument_list|,
name|load_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|save_factory
operator|=
name|gtk_item_factory_new
argument_list|(
name|GTK_TYPE_MENU
argument_list|,
literal|"<Save>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|save_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|,
operator|(
name|gpointer
operator|)
literal|"save"
argument_list|)
expr_stmt|;
name|gtk_item_factory_set_translate_func
argument_list|(
name|save_factory
argument_list|,
name|menu_translate
argument_list|,
literal|"<Save>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menus_create_items
argument_list|(
name|save_factory
argument_list|,
name|n_save_entries
argument_list|,
name|save_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|layers_factory
operator|=
name|gtk_item_factory_new
argument_list|(
name|GTK_TYPE_MENU
argument_list|,
literal|"<Layers>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|layers_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|,
operator|(
name|gpointer
operator|)
literal|"layers"
argument_list|)
expr_stmt|;
name|gtk_item_factory_set_translate_func
argument_list|(
name|layers_factory
argument_list|,
name|menu_translate
argument_list|,
literal|"<Layers>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menus_create_items
argument_list|(
name|layers_factory
argument_list|,
name|n_layers_entries
argument_list|,
name|layers_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|channels_factory
operator|=
name|gtk_item_factory_new
argument_list|(
name|GTK_TYPE_MENU
argument_list|,
literal|"<Channels>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|channels_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|,
operator|(
name|gpointer
operator|)
literal|"channels"
argument_list|)
expr_stmt|;
name|gtk_item_factory_set_translate_func
argument_list|(
name|channels_factory
argument_list|,
name|menu_translate
argument_list|,
literal|"<Channels>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menus_create_items
argument_list|(
name|channels_factory
argument_list|,
name|n_channels_entries
argument_list|,
name|channels_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|paths_factory
operator|=
name|gtk_item_factory_new
argument_list|(
name|GTK_TYPE_MENU
argument_list|,
literal|"<Paths>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|paths_factory
argument_list|)
argument_list|,
literal|"help_path"
argument_list|,
operator|(
name|gpointer
operator|)
literal|"paths"
argument_list|)
expr_stmt|;
name|gtk_item_factory_set_translate_func
argument_list|(
name|paths_factory
argument_list|,
name|menu_translate
argument_list|,
literal|"<Paths>"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menus_create_items
argument_list|(
name|paths_factory
argument_list|,
name|n_paths_entries
argument_list|,
name|paths_entries
argument_list|,
name|NULL
argument_list|,
literal|2
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|num_tools
condition|;
name|i
operator|++
control|)
block|{
comment|/* FIXME this need to use access functions to check a flag */
if|if
condition|(
name|tool_info
index|[
name|i
index|]
operator|.
name|menu_path
condition|)
name|menus_tools_create
argument_list|(
operator|&
name|tool_info
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
comment|/*  reorder<Image>/Image/Colors  */
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
name|tool_info
index|[
name|POSTERIZE
index|]
operator|.
name|menu_path
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
literal|3
argument_list|)
expr_stmt|;
block|{
specifier|static
name|ToolType
name|color_tools
index|[]
init|=
block|{
name|COLOR_BALANCE
block|,
name|HUE_SATURATION
block|,
name|BRIGHTNESS_CONTRAST
block|,
name|THRESHOLD
block|,
name|LEVELS
block|,
name|CURVES
block|}
decl_stmt|;
specifier|static
name|gint
name|n_color_tools
init|=
operator|(
sizeof|sizeof
argument_list|(
name|color_tools
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|color_tools
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
name|gint
name|i
decl_stmt|,
name|pos
decl_stmt|;
name|pos
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_color_tools
condition|;
name|i
operator|++
control|)
block|{
name|menu_item
operator|=
name|gtk_item_factory_get_widget
argument_list|(
name|image_factory
argument_list|,
name|tool_info
index|[
name|color_tools
index|[
name|i
index|]
index|]
operator|.
name|menu_path
argument_list|)
expr_stmt|;
if|if
condition|(
name|menu_item
operator|&&
name|menu_item
operator|->
name|parent
condition|)
block|{
name|gtk_menu_reorder_child
argument_list|(
name|GTK_MENU
argument_list|(
name|menu_item
operator|->
name|parent
argument_list|)
argument_list|,
name|menu_item
argument_list|,
name|pos
argument_list|)
expr_stmt|;
name|pos
operator|++
expr_stmt|;
block|}
block|}
block|}
name|filename
operator|=
name|gimp_personal_rc_file
argument_list|(
literal|"menurc"
argument_list|)
expr_stmt|;
name|gtk_item_factory_parse_rc
argument_list|(
name|filename
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|gchar
modifier|*
DECL|function|menu_translate (const gchar * path,gpointer data)
name|menu_translate
parameter_list|(
specifier|const
name|gchar
modifier|*
name|path
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
specifier|static
name|gchar
modifier|*
name|plugin_domains
index|[]
init|=
block|{
literal|"gimp-std-plugins"
block|,
literal|"gimp-perl"
block|}
decl_stmt|;
specifier|static
name|gint
name|n_plugin_domains
init|=
operator|(
sizeof|sizeof
argument_list|(
name|plugin_domains
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|plugin_domains
index|[
literal|0
index|]
argument_list|)
operator|)
decl_stmt|;
specifier|static
name|gchar
modifier|*
name|menupath
init|=
name|NULL
decl_stmt|;
name|gchar
modifier|*
name|retval
decl_stmt|;
name|gchar
modifier|*
name|factory
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|factory
operator|=
operator|(
name|gchar
operator|*
operator|)
name|data
expr_stmt|;
if|if
condition|(
name|menupath
condition|)
name|g_free
argument_list|(
name|menupath
argument_list|)
expr_stmt|;
name|menupath
operator|=
name|g_strdup
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|strstr
argument_list|(
name|path
argument_list|,
literal|"/tearoff1"
argument_list|)
operator|!=
name|NULL
operator|)
operator|||
operator|(
name|strstr
argument_list|(
name|path
argument_list|,
literal|"/---"
argument_list|)
operator|!=
name|NULL
operator|)
operator|||
operator|(
name|strstr
argument_list|(
name|path
argument_list|,
literal|"/MRU"
argument_list|)
operator|!=
name|NULL
operator|)
condition|)
return|return
name|menupath
return|;
name|retval
operator|=
name|gettext
argument_list|(
name|menupath
argument_list|)
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|i
operator|<
name|n_plugin_domains
operator|&&
operator|!
name|strcmp
argument_list|(
name|path
argument_list|,
name|retval
argument_list|)
operator|&&
name|factory
condition|)
block|{
name|g_free
argument_list|(
name|menupath
argument_list|)
expr_stmt|;
name|menupath
operator|=
name|g_strconcat
argument_list|(
name|factory
argument_list|,
name|path
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|retval
operator|=
name|dgettext
argument_list|(
name|plugin_domains
index|[
name|i
operator|++
index|]
argument_list|,
name|menupath
argument_list|)
operator|+
name|strlen
argument_list|(
name|factory
argument_list|)
expr_stmt|;
block|}
return|return
name|retval
return|;
block|}
end_function

begin_function
specifier|static
name|gint
DECL|function|tearoff_delete_cb (GtkWidget * widget,GdkEvent * event,gpointer data)
name|tearoff_delete_cb
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEvent
modifier|*
name|event
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
comment|/* Unregister if dialog is deleted as well */
name|dialog_unregister
argument_list|(
operator|(
name|GtkWidget
operator|*
operator|)
name|data
argument_list|)
expr_stmt|;
return|return
name|TRUE
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|tearoff_cmd_callback (GtkWidget * widget,gpointer callback_data,guint callback_action)
name|tearoff_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_action
parameter_list|)
block|{
if|if
condition|(
name|GTK_IS_TEAROFF_MENU_ITEM
argument_list|(
name|widget
argument_list|)
condition|)
block|{
name|GtkTearoffMenuItem
modifier|*
name|tomi
init|=
operator|(
name|GtkTearoffMenuItem
operator|*
operator|)
name|widget
decl_stmt|;
if|if
condition|(
name|tomi
operator|->
name|torn_off
condition|)
block|{
name|GtkWidget
modifier|*
name|top
init|=
name|gtk_widget_get_toplevel
argument_list|(
name|widget
argument_list|)
decl_stmt|;
comment|/* This should be a window */
if|if
condition|(
operator|!
name|GTK_IS_WINDOW
argument_list|(
name|top
argument_list|)
condition|)
block|{
name|g_message
argument_list|(
literal|"tearoff menu not in top level window"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|dialog_register
argument_list|(
name|top
argument_list|)
expr_stmt|;
name|gtk_signal_connect_object
argument_list|(
name|GTK_OBJECT
argument_list|(
name|top
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|tearoff_delete_cb
argument_list|)
argument_list|,
name|GTK_OBJECT
argument_list|(
name|top
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_object_set_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"tearoff_menu_top"
argument_list|,
name|top
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|GtkWidget
modifier|*
name|top
decl_stmt|;
name|top
operator|=
operator|(
name|GtkWidget
operator|*
operator|)
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"tearoff_menu_top"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|top
condition|)
block|{
name|g_message
argument_list|(
literal|"can't unregister tearoff menu top level window"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|dialog_unregister
argument_list|(
name|top
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|help_debug_cmd_callback (GtkWidget * widget,gpointer callback_data,guint callback_action)
name|help_debug_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|callback_data
parameter_list|,
name|guint
name|callback_action
parameter_list|)
block|{
comment|/* ugly, but ANSI C compliant */
name|gint
name|n_factories
init|=
literal|7
decl_stmt|;
name|GtkItemFactory
modifier|*
name|factories
index|[
literal|7
index|]
decl_stmt|;
name|GimpItemFactoryEntry
modifier|*
name|entries
index|[
literal|7
index|]
decl_stmt|;
name|gint
name|num_entries
index|[
literal|7
index|]
decl_stmt|;
name|gchar
modifier|*
name|help_path
decl_stmt|;
name|gint
name|i
decl_stmt|,
name|j
decl_stmt|;
name|factories
index|[
literal|0
index|]
operator|=
name|toolbox_factory
expr_stmt|;
name|factories
index|[
literal|1
index|]
operator|=
name|image_factory
expr_stmt|;
name|factories
index|[
literal|2
index|]
operator|=
name|layers_factory
expr_stmt|;
name|factories
index|[
literal|3
index|]
operator|=
name|channels_factory
expr_stmt|;
name|factories
index|[
literal|4
index|]
operator|=
name|paths_factory
expr_stmt|;
name|factories
index|[
literal|5
index|]
operator|=
name|load_factory
expr_stmt|;
name|factories
index|[
literal|6
index|]
operator|=
name|save_factory
expr_stmt|;
name|entries
index|[
literal|0
index|]
operator|=
name|toolbox_entries
expr_stmt|;
name|entries
index|[
literal|1
index|]
operator|=
name|image_entries
expr_stmt|;
name|entries
index|[
literal|2
index|]
operator|=
name|layers_entries
expr_stmt|;
name|entries
index|[
literal|3
index|]
operator|=
name|channels_entries
expr_stmt|;
name|entries
index|[
literal|4
index|]
operator|=
name|paths_entries
expr_stmt|;
name|entries
index|[
literal|5
index|]
operator|=
name|load_entries
expr_stmt|;
name|entries
index|[
literal|6
index|]
operator|=
name|save_entries
expr_stmt|;
name|num_entries
index|[
literal|0
index|]
operator|=
name|n_toolbox_entries
expr_stmt|;
name|num_entries
index|[
literal|1
index|]
operator|=
name|n_image_entries
expr_stmt|;
name|num_entries
index|[
literal|2
index|]
operator|=
name|n_layers_entries
expr_stmt|;
name|num_entries
index|[
literal|3
index|]
operator|=
name|n_channels_entries
expr_stmt|;
name|num_entries
index|[
literal|4
index|]
operator|=
name|n_paths_entries
expr_stmt|;
name|num_entries
index|[
literal|5
index|]
operator|=
name|n_load_entries
expr_stmt|;
name|num_entries
index|[
literal|6
index|]
operator|=
name|n_save_entries
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_factories
condition|;
name|i
operator|++
control|)
block|{
name|help_path
operator|=
name|gtk_object_get_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|factories
index|[
name|i
index|]
argument_list|)
argument_list|,
literal|"help_path"
argument_list|)
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|num_entries
index|[
name|i
index|]
condition|;
name|j
operator|++
control|)
block|{
if|if
condition|(
name|entries
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|help_page
condition|)
name|g_print
argument_list|(
literal|"%s%s\t\t(%s/%s)\n"
argument_list|,
name|factories
index|[
name|i
index|]
operator|->
name|path
argument_list|,
name|entries
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|entry
operator|.
name|path
argument_list|,
name|help_path
argument_list|,
name|entries
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|help_page
argument_list|)
expr_stmt|;
else|else
name|g_print
argument_list|(
literal|"%s%s\n"
argument_list|,
name|factories
index|[
name|i
index|]
operator|->
name|path
argument_list|,
name|entries
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|entry
operator|.
name|path
argument_list|)
expr_stmt|;
block|}
name|g_print
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
block|}
end_function

end_unit

