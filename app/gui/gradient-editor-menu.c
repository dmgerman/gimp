begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<gtk/gtk.h>
end_include

begin_include
include|#
directive|include
file|"libgimpwidgets/gimpwidgets.h"
end_include

begin_include
include|#
directive|include
file|"gui-types.h"
end_include

begin_include
include|#
directive|include
file|"core/gimp.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpcontext.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpgradient.h"
end_include

begin_include
include|#
directive|include
file|"widgets/gimpdataeditor.h"
end_include

begin_include
include|#
directive|include
file|"widgets/gimpgradienteditor.h"
end_include

begin_include
include|#
directive|include
file|"widgets/gimphelp-ids.h"
end_include

begin_include
include|#
directive|include
file|"widgets/gimpitemfactory.h"
end_include

begin_include
include|#
directive|include
file|"gradient-editor-commands.h"
end_include

begin_include
include|#
directive|include
file|"gradient-editor-menu.h"
end_include

begin_include
include|#
directive|include
file|"menus.h"
end_include

begin_include
include|#
directive|include
file|"gimp-intl.h"
end_include

begin_define
DECL|macro|LOAD_LEFT_FROM (num,magic)
define|#
directive|define
name|LOAD_LEFT_FROM
parameter_list|(
name|num
parameter_list|,
name|magic
parameter_list|)
define|\
value|{ { "/Load Left Color From/" num, NULL, \       gradient_editor_load_left_cmd_callback, (magic) }, \     NULL, GIMP_HELP_GRADIENT_EDITOR_LEFT_LOAD, NULL }
end_define

begin_define
DECL|macro|SAVE_LEFT_TO (num,magic)
define|#
directive|define
name|SAVE_LEFT_TO
parameter_list|(
name|num
parameter_list|,
name|magic
parameter_list|)
define|\
value|{ { "/Save Left Color To/" num, NULL, \       gradient_editor_save_left_cmd_callback, (magic) }, \     NULL, GIMP_HELP_GRADIENT_EDITOR_LEFT_SAVE, NULL }
end_define

begin_define
DECL|macro|LOAD_RIGHT_FROM (num,magic)
define|#
directive|define
name|LOAD_RIGHT_FROM
parameter_list|(
name|num
parameter_list|,
name|magic
parameter_list|)
define|\
value|{ { "/Load Right Color From/" num, NULL, \       gradient_editor_load_right_cmd_callback, (magic) }, \     NULL, GIMP_HELP_GRADIENT_EDITOR_RIGHT_LOAD, NULL }
end_define

begin_define
DECL|macro|SAVE_RIGHT_TO (num,magic)
define|#
directive|define
name|SAVE_RIGHT_TO
parameter_list|(
name|num
parameter_list|,
name|magic
parameter_list|)
define|\
value|{ { "/Save Right Color To/" num, NULL, \       gradient_editor_save_right_cmd_callback, (magic) }, \     NULL, GIMP_HELP_GRADIENT_EDITOR_RIGHT_SAVE, NULL }
end_define

begin_decl_stmt
DECL|variable|gradient_editor_menu_entries
name|GimpItemFactoryEntry
name|gradient_editor_menu_entries
index|[]
init|=
block|{
block|{
block|{
name|N_
argument_list|(
literal|"/L_eft Endpoint's Color..."
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_left_color_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_LEFT_COLOR
block|,
name|NULL
block|}
block|,
name|MENU_BRANCH
argument_list|(
name|N_
argument_list|(
literal|"/_Load Left Color From"
argument_list|)
argument_list|)
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Left Color From/_Left Neighbor's Right Endpoint"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_left_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Left Color From/_Right Endpoint"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_left_cmd_callback
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_LEFT_LOAD
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Left Color From/_FG Color"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_left_cmd_callback
block|,
literal|2
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_LEFT_LOAD
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Left Color From/_BG Color"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_left_cmd_callback
block|,
literal|3
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_LEFT_LOAD
block|,
name|NULL
block|}
block|,
name|MENU_SEPARATOR
argument_list|(
literal|"/Load Left Color From/---"
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"01"
argument_list|,
literal|4
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"02"
argument_list|,
literal|5
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"03"
argument_list|,
literal|6
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"04"
argument_list|,
literal|7
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"05"
argument_list|,
literal|8
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"06"
argument_list|,
literal|9
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"07"
argument_list|,
literal|10
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"08"
argument_list|,
literal|11
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"09"
argument_list|,
literal|12
argument_list|)
block|,
name|LOAD_LEFT_FROM
argument_list|(
literal|"10"
argument_list|,
literal|13
argument_list|)
block|,
name|MENU_BRANCH
argument_list|(
name|N_
argument_list|(
literal|"/_Save Left Color To"
argument_list|)
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"01"
argument_list|,
literal|0
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"02"
argument_list|,
literal|1
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"03"
argument_list|,
literal|2
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"04"
argument_list|,
literal|3
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"05"
argument_list|,
literal|4
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"06"
argument_list|,
literal|5
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"07"
argument_list|,
literal|6
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"08"
argument_list|,
literal|7
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"09"
argument_list|,
literal|8
argument_list|)
block|,
name|SAVE_LEFT_TO
argument_list|(
literal|"10"
argument_list|,
literal|9
argument_list|)
block|,
name|MENU_SEPARATOR
argument_list|(
literal|"/---"
argument_list|)
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/R_ight Endpoint's Color..."
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_right_color_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_RIGHT_COLOR
block|,
name|NULL
block|}
block|,
name|MENU_BRANCH
argument_list|(
name|N_
argument_list|(
literal|"/Load Right Color Fr_om"
argument_list|)
argument_list|)
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Right Color From/_Right Neighbor's Left Endpoint"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_right_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_RIGHT_LOAD
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Right Color From/_Left Endpoint"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_right_cmd_callback
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_RIGHT_LOAD
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Right Color From/_FG Color"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_right_cmd_callback
block|,
literal|2
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_RIGHT_LOAD
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Load Right Color From/_BG Color"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_load_right_cmd_callback
block|,
literal|3
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_RIGHT_LOAD
block|,
name|NULL
block|}
block|,
name|MENU_SEPARATOR
argument_list|(
literal|"/Load Right Color From/---"
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"01"
argument_list|,
literal|4
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"02"
argument_list|,
literal|5
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"03"
argument_list|,
literal|6
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"04"
argument_list|,
literal|7
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"05"
argument_list|,
literal|8
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"06"
argument_list|,
literal|9
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"07"
argument_list|,
literal|10
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"08"
argument_list|,
literal|11
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"09"
argument_list|,
literal|12
argument_list|)
block|,
name|LOAD_RIGHT_FROM
argument_list|(
literal|"10"
argument_list|,
literal|13
argument_list|)
block|,
name|MENU_BRANCH
argument_list|(
name|N_
argument_list|(
literal|"/Sa_ve Right Color To"
argument_list|)
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"01"
argument_list|,
literal|0
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"02"
argument_list|,
literal|1
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"03"
argument_list|,
literal|2
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"04"
argument_list|,
literal|3
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"05"
argument_list|,
literal|4
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"06"
argument_list|,
literal|5
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"07"
argument_list|,
literal|6
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"08"
argument_list|,
literal|7
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"09"
argument_list|,
literal|8
argument_list|)
block|,
name|SAVE_RIGHT_TO
argument_list|(
literal|"10"
argument_list|,
literal|9
argument_list|)
block|,
name|MENU_SEPARATOR
argument_list|(
literal|"/---"
argument_list|)
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/blendingfunction/_Linear"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_blending_func_cmd_callback
block|,
name|GIMP_GRAD_LINEAR
block|,
literal|"<RadioItem>"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLENDING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/blendingfunction/_Curved"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_blending_func_cmd_callback
block|,
name|GIMP_GRAD_CURVED
block|,
literal|"/blendingfunction/Linear"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLENDING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/blendingfunction/_Sinusodial"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_blending_func_cmd_callback
block|,
name|GIMP_GRAD_SINE
block|,
literal|"/blendingfunction/Linear"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLENDING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/blendingfunction/Spherical (i_ncreasing)"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_blending_func_cmd_callback
block|,
name|GIMP_GRAD_SPHERE_INCREASING
block|,
literal|"/blendingfunction/Linear"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLENDING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/blendingfunction/Spherical (_decreasing)"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_blending_func_cmd_callback
block|,
name|GIMP_GRAD_SPHERE_DECREASING
block|,
literal|"/blendingfunction/Linear"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLENDING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/blendingfunction/(Varies)"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"/blendingfunction/Linear"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLENDING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/coloringtype/_RGB"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_coloring_type_cmd_callback
block|,
name|GIMP_GRAD_RGB
block|,
literal|"<RadioItem>"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_COLORING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/coloringtype/HSV (_counter-clockwise hue)"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_coloring_type_cmd_callback
block|,
name|GIMP_GRAD_HSV_CCW
block|,
literal|"/coloringtype/RGB"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_COLORING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/coloringtype/HSV (clockwise _hue)"
argument_list|)
block|,
name|NULL
block|,
name|gradient_editor_coloring_type_cmd_callback
block|,
name|GIMP_GRAD_HSV_CW
block|,
literal|"/coloringtype/RGB"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_COLORING
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/coloringtype/(Varies)"
argument_list|)
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|"/coloringtype/RGB"
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_COLORING
block|,
name|NULL
block|}
block|,
name|MENU_SEPARATOR
argument_list|(
literal|"/---"
argument_list|)
block|,
block|{
block|{
literal|"/flip"
block|,
literal|"F"
block|,
name|gradient_editor_flip_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_FLIP
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/replicate"
block|,
literal|"R"
block|,
name|gradient_editor_replicate_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_FLIP
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/splitmidpoint"
block|,
literal|"S"
block|,
name|gradient_editor_split_midpoint_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_SPLIT_MIDPOINT
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/splituniformly"
block|,
literal|"U"
block|,
name|gradient_editor_split_uniformly_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_SPLIT_MIDPOINT
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/delete"
block|,
literal|"D"
block|,
name|gradient_editor_delete_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_DELETE
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/recenter"
block|,
literal|"C"
block|,
name|gradient_editor_recenter_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_RECENTER
block|,
name|NULL
block|}
block|,
block|{
block|{
literal|"/redistribute"
block|,
literal|"<control>C"
block|,
name|gradient_editor_redistribute_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_REDISTRIBUTE
block|,
name|NULL
block|}
block|,
name|MENU_SEPARATOR
argument_list|(
literal|"/---"
argument_list|)
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Ble_nd Endpoints' Colors"
argument_list|)
block|,
literal|"B"
block|,
name|gradient_editor_blend_color_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLEND_COLOR
block|,
name|NULL
block|}
block|,
block|{
block|{
name|N_
argument_list|(
literal|"/Blend Endpoints' Opacit_y"
argument_list|)
block|,
literal|"<control>B"
block|,
name|gradient_editor_blend_opacity_cmd_callback
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|GIMP_HELP_GRADIENT_EDITOR_BLEND_OPACITY
block|,
name|NULL
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_undef
undef|#
directive|undef
name|LOAD_LEFT_FROM
end_undef

begin_undef
undef|#
directive|undef
name|SAVE_LEFT_TO
end_undef

begin_undef
undef|#
directive|undef
name|LOAD_RIGHT_FROM
end_undef

begin_undef
undef|#
directive|undef
name|SAVE_RIGHT_TO
end_undef

begin_decl_stmt
name|gint
name|n_gradient_editor_menu_entries
init|=
name|G_N_ELEMENTS
argument_list|(
name|gradient_editor_menu_entries
argument_list|)
decl_stmt|;
end_decl_stmt

begin_function
name|void
DECL|function|gradient_editor_menu_update (GtkItemFactory * factory,gpointer data)
name|gradient_editor_menu_update
parameter_list|(
name|GtkItemFactory
modifier|*
name|factory
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GimpGradientEditor
modifier|*
name|editor
decl_stmt|;
name|GimpContext
modifier|*
name|user_context
decl_stmt|;
name|GimpGradientSegment
modifier|*
name|left_seg
decl_stmt|;
name|GimpGradientSegment
modifier|*
name|right_seg
decl_stmt|;
name|GimpRGB
name|fg
decl_stmt|;
name|GimpRGB
name|bg
decl_stmt|;
name|gboolean
name|blending_equal
init|=
name|TRUE
decl_stmt|;
name|gboolean
name|coloring_equal
init|=
name|TRUE
decl_stmt|;
name|gboolean
name|selection
decl_stmt|;
name|gboolean
name|delete
decl_stmt|;
name|editor
operator|=
name|GIMP_GRADIENT_EDITOR
argument_list|(
name|data
argument_list|)
expr_stmt|;
name|user_context
operator|=
name|gimp_get_user_context
argument_list|(
name|GIMP_DATA_EDITOR
argument_list|(
name|editor
argument_list|)
operator|->
name|gimp
argument_list|)
expr_stmt|;
if|if
condition|(
name|editor
operator|->
name|control_sel_l
operator|->
name|prev
condition|)
name|left_seg
operator|=
name|editor
operator|->
name|control_sel_l
operator|->
name|prev
expr_stmt|;
else|else
name|left_seg
operator|=
name|gimp_gradient_segment_get_last
argument_list|(
name|editor
operator|->
name|control_sel_l
argument_list|)
expr_stmt|;
if|if
condition|(
name|editor
operator|->
name|control_sel_r
operator|->
name|next
condition|)
name|right_seg
operator|=
name|editor
operator|->
name|control_sel_r
operator|->
name|next
expr_stmt|;
else|else
name|right_seg
operator|=
name|gimp_gradient_segment_get_first
argument_list|(
name|editor
operator|->
name|control_sel_r
argument_list|)
expr_stmt|;
name|gimp_context_get_foreground
argument_list|(
name|user_context
argument_list|,
operator|&
name|fg
argument_list|)
expr_stmt|;
name|gimp_context_get_background
argument_list|(
name|user_context
argument_list|,
operator|&
name|bg
argument_list|)
expr_stmt|;
block|{
name|GimpGradientSegmentType
name|type
decl_stmt|;
name|GimpGradientSegmentColor
name|color
decl_stmt|;
name|GimpGradientSegment
modifier|*
name|seg
decl_stmt|,
modifier|*
name|aseg
decl_stmt|;
name|type
operator|=
name|editor
operator|->
name|control_sel_l
operator|->
name|type
expr_stmt|;
name|color
operator|=
name|editor
operator|->
name|control_sel_l
operator|->
name|color
expr_stmt|;
name|seg
operator|=
name|editor
operator|->
name|control_sel_l
expr_stmt|;
do|do
block|{
name|blending_equal
operator|=
name|blending_equal
operator|&&
operator|(
name|seg
operator|->
name|type
operator|==
name|type
operator|)
expr_stmt|;
name|coloring_equal
operator|=
name|coloring_equal
operator|&&
operator|(
name|seg
operator|->
name|color
operator|==
name|color
operator|)
expr_stmt|;
name|aseg
operator|=
name|seg
expr_stmt|;
name|seg
operator|=
name|seg
operator|->
name|next
expr_stmt|;
block|}
do|while
condition|(
name|aseg
operator|!=
name|editor
operator|->
name|control_sel_r
condition|)
do|;
block|}
name|selection
operator|=
operator|(
name|editor
operator|->
name|control_sel_l
operator|!=
name|editor
operator|->
name|control_sel_r
operator|)
expr_stmt|;
name|delete
operator|=
operator|(
name|editor
operator|->
name|control_sel_l
operator|->
name|prev
operator|||
name|editor
operator|->
name|control_sel_r
operator|->
name|next
operator|)
expr_stmt|;
DECL|macro|SET_ACTIVE (menu,active)
define|#
directive|define
name|SET_ACTIVE
parameter_list|(
name|menu
parameter_list|,
name|active
parameter_list|)
define|\
value|gimp_item_factory_set_active (factory, menu, (active))
DECL|macro|SET_COLOR (menu,color,set_label)
define|#
directive|define
name|SET_COLOR
parameter_list|(
name|menu
parameter_list|,
name|color
parameter_list|,
name|set_label
parameter_list|)
define|\
value|gimp_item_factory_set_color (factory, menu, (color), (set_label))
DECL|macro|SET_LABEL (menu,label)
define|#
directive|define
name|SET_LABEL
parameter_list|(
name|menu
parameter_list|,
name|label
parameter_list|)
define|\
value|gimp_item_factory_set_label (factory, menu, (label))
DECL|macro|SET_SENSITIVE (menu,condition)
define|#
directive|define
name|SET_SENSITIVE
parameter_list|(
name|menu
parameter_list|,
name|condition
parameter_list|)
define|\
value|gimp_item_factory_set_sensitive (factory, menu, (condition) != 0)
DECL|macro|SET_VISIBLE (menu,condition)
define|#
directive|define
name|SET_VISIBLE
parameter_list|(
name|menu
parameter_list|,
name|condition
parameter_list|)
define|\
value|gimp_item_factory_set_visible (factory, menu, (condition) != 0)
name|SET_COLOR
argument_list|(
literal|"/Left Endpoint's Color..."
argument_list|,
operator|&
name|editor
operator|->
name|control_sel_l
operator|->
name|left_color
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/Left Neighbor's Right Endpoint"
argument_list|,
operator|&
name|left_seg
operator|->
name|right_color
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/Right Endpoint"
argument_list|,
operator|&
name|editor
operator|->
name|control_sel_r
operator|->
name|right_color
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/FG Color"
argument_list|,
operator|&
name|fg
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/BG Color"
argument_list|,
operator|&
name|bg
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/01"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|0
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/02"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|1
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/03"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|2
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/04"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|3
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/05"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|4
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/06"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|5
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/07"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|6
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/08"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|7
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/09"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|8
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Left Color From/10"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|9
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/01"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|0
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/02"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|1
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/03"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|2
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/04"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|3
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/05"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|4
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/06"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|5
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/07"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|6
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/08"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|7
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/09"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|8
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Left Color To/10"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|9
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Right Endpoint's Color..."
argument_list|,
operator|&
name|editor
operator|->
name|control_sel_r
operator|->
name|right_color
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/Right Neighbor's Left Endpoint"
argument_list|,
operator|&
name|right_seg
operator|->
name|left_color
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/Left Endpoint"
argument_list|,
operator|&
name|editor
operator|->
name|control_sel_l
operator|->
name|left_color
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/FG Color"
argument_list|,
operator|&
name|fg
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/BG Color"
argument_list|,
operator|&
name|bg
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/01"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|0
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/02"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|1
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/03"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|2
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/04"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|3
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/05"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|4
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/06"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|5
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/07"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|6
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/08"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|7
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/09"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|8
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Load Right Color From/10"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|9
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/01"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|0
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/02"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|1
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/03"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|2
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/04"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|3
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/05"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|4
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/06"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|5
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/07"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|6
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/08"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|7
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/09"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|8
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_COLOR
argument_list|(
literal|"/Save Right Color To/10"
argument_list|,
operator|&
name|editor
operator|->
name|saved_colors
index|[
literal|9
index|]
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|selection
condition|)
block|{
name|SET_LABEL
argument_list|(
literal|"/blendingfunction"
argument_list|,
name|_
argument_list|(
literal|"_Blending Function for Segment"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/coloringtype"
argument_list|,
name|_
argument_list|(
literal|"Coloring _Type for Segment"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/flip"
argument_list|,
name|_
argument_list|(
literal|"_Flip Segment"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/replicate"
argument_list|,
name|_
argument_list|(
literal|"_Replicate Segment..."
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/splitmidpoint"
argument_list|,
name|_
argument_list|(
literal|"Split Segment at _Midpoint"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/splituniformly"
argument_list|,
name|_
argument_list|(
literal|"Split Segment _Uniformly..."
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/delete"
argument_list|,
name|_
argument_list|(
literal|"_Delete Segment"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/recenter"
argument_list|,
name|_
argument_list|(
literal|"Re-_center Segment's Midpoint"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/redistribute"
argument_list|,
name|_
argument_list|(
literal|"Re-distribute _Handles in Segment"
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|SET_LABEL
argument_list|(
literal|"/blendingfunction"
argument_list|,
name|_
argument_list|(
literal|"_Blending Function for Selection"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/coloringtype"
argument_list|,
name|_
argument_list|(
literal|"Coloring _Type for Selection"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/flip"
argument_list|,
name|_
argument_list|(
literal|"_Flip Selection"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/replicate"
argument_list|,
name|_
argument_list|(
literal|"_Replicate Selection..."
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/splitmidpoint"
argument_list|,
name|_
argument_list|(
literal|"Split Segments at _Midpoints"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/splituniformly"
argument_list|,
name|_
argument_list|(
literal|"Split Segments _Uniformly..."
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/delete"
argument_list|,
name|_
argument_list|(
literal|"_Delete Selection"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/recenter"
argument_list|,
name|_
argument_list|(
literal|"Re-_center Midpoints in Selection"
argument_list|)
argument_list|)
expr_stmt|;
name|SET_LABEL
argument_list|(
literal|"/redistribute"
argument_list|,
name|_
argument_list|(
literal|"Re-distribute _Handles in Selection"
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|SET_SENSITIVE
argument_list|(
literal|"/blendingfunction/(Varies)"
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|SET_SENSITIVE
argument_list|(
literal|"/coloringtype/(Varies)"
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|blending_equal
condition|)
block|{
name|SET_VISIBLE
argument_list|(
literal|"/blendingfunction/(Varies)"
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|editor
operator|->
name|control_sel_l
operator|->
name|type
condition|)
block|{
case|case
name|GIMP_GRAD_LINEAR
case|:
name|SET_ACTIVE
argument_list|(
literal|"/blendingfunction/Linear"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
case|case
name|GIMP_GRAD_CURVED
case|:
name|SET_ACTIVE
argument_list|(
literal|"/blendingfunction/Curved"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
case|case
name|GIMP_GRAD_SINE
case|:
name|SET_ACTIVE
argument_list|(
literal|"/blendingfunction/Sinusodial"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
case|case
name|GIMP_GRAD_SPHERE_INCREASING
case|:
name|SET_ACTIVE
argument_list|(
literal|"/blendingfunction/Spherical (increasing)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
case|case
name|GIMP_GRAD_SPHERE_DECREASING
case|:
name|SET_ACTIVE
argument_list|(
literal|"/blendingfunction/Spherical (decreasing)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
name|SET_VISIBLE
argument_list|(
literal|"/blendingfunction/(Varies)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_ACTIVE
argument_list|(
literal|"/blendingfunction/(Varies)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|coloring_equal
condition|)
block|{
name|SET_VISIBLE
argument_list|(
literal|"/coloringtype/(Varies)"
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|editor
operator|->
name|control_sel_l
operator|->
name|color
condition|)
block|{
case|case
name|GIMP_GRAD_RGB
case|:
name|SET_ACTIVE
argument_list|(
literal|"/coloringtype/RGB"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
case|case
name|GIMP_GRAD_HSV_CCW
case|:
name|SET_ACTIVE
argument_list|(
literal|"/coloringtype/HSV (counter-clockwise hue)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
case|case
name|GIMP_GRAD_HSV_CW
case|:
name|SET_ACTIVE
argument_list|(
literal|"/coloringtype/HSV (clockwise hue)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
name|SET_VISIBLE
argument_list|(
literal|"/coloringtype/(Varies)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|SET_ACTIVE
argument_list|(
literal|"/coloringtype/(Varies)"
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
name|SET_SENSITIVE
argument_list|(
literal|"/Blend Endpoints' Colors"
argument_list|,
name|selection
argument_list|)
expr_stmt|;
name|SET_SENSITIVE
argument_list|(
literal|"/Blend Endpoints' Opacity"
argument_list|,
name|selection
argument_list|)
expr_stmt|;
name|SET_SENSITIVE
argument_list|(
literal|"/delete"
argument_list|,
name|delete
argument_list|)
expr_stmt|;
undef|#
directive|undef
name|SET_ACTIVE
undef|#
directive|undef
name|SET_COLOR
undef|#
directive|undef
name|SET_LABEL
undef|#
directive|undef
name|SET_SENSITIVE
undef|#
directive|undef
name|SET_VISIBLE
block|}
end_function

end_unit

