begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|"appenv.h"
end_include

begin_include
include|#
directive|include
file|"about_dialog.h"
end_include

begin_include
include|#
directive|include
file|"actionarea.h"
end_include

begin_include
include|#
directive|include
file|"app_procs.h"
end_include

begin_include
include|#
directive|include
file|"brightness_contrast.h"
end_include

begin_include
include|#
directive|include
file|"brushes.h"
end_include

begin_include
include|#
directive|include
file|"by_color_select.h"
end_include

begin_include
include|#
directive|include
file|"channels_dialog.h"
end_include

begin_include
include|#
directive|include
file|"colormaps.h"
end_include

begin_include
include|#
directive|include
file|"color_balance.h"
end_include

begin_include
include|#
directive|include
file|"commands.h"
end_include

begin_include
include|#
directive|include
file|"convert.h"
end_include

begin_include
include|#
directive|include
file|"curves.h"
end_include

begin_include
include|#
directive|include
file|"desaturate.h"
end_include

begin_include
include|#
directive|include
file|"devices.h"
end_include

begin_include
include|#
directive|include
file|"channel_ops.h"
end_include

begin_include
include|#
directive|include
file|"drawable.h"
end_include

begin_include
include|#
directive|include
file|"equalize.h"
end_include

begin_include
include|#
directive|include
file|"fileops.h"
end_include

begin_include
include|#
directive|include
file|"floating_sel.h"
end_include

begin_include
include|#
directive|include
file|"gdisplay_ops.h"
end_include

begin_include
include|#
directive|include
file|"general.h"
end_include

begin_include
include|#
directive|include
file|"gimage_cmds.h"
end_include

begin_include
include|#
directive|include
file|"gimage_mask.h"
end_include

begin_include
include|#
directive|include
file|"gimprc.h"
end_include

begin_include
include|#
directive|include
file|"global_edit.h"
end_include

begin_include
include|#
directive|include
file|"gradient.h"
end_include

begin_include
include|#
directive|include
file|"histogram_tool.h"
end_include

begin_include
include|#
directive|include
file|"hue_saturation.h"
end_include

begin_include
include|#
directive|include
file|"image_render.h"
end_include

begin_include
include|#
directive|include
file|"indexed_palette.h"
end_include

begin_include
include|#
directive|include
file|"info_window.h"
end_include

begin_include
include|#
directive|include
file|"interface.h"
end_include

begin_include
include|#
directive|include
file|"invert.h"
end_include

begin_include
include|#
directive|include
file|"layers_dialog.h"
end_include

begin_include
include|#
directive|include
file|"layer_select.h"
end_include

begin_include
include|#
directive|include
file|"levels.h"
end_include

begin_include
include|#
directive|include
file|"palette.h"
end_include

begin_include
include|#
directive|include
file|"patterns.h"
end_include

begin_include
include|#
directive|include
file|"plug_in.h"
end_include

begin_include
include|#
directive|include
file|"posterize.h"
end_include

begin_include
include|#
directive|include
file|"resize.h"
end_include

begin_include
include|#
directive|include
file|"scale.h"
end_include

begin_include
include|#
directive|include
file|"threshold.h"
end_include

begin_include
include|#
directive|include
file|"tips_dialog.h"
end_include

begin_include
include|#
directive|include
file|"tools.h"
end_include

begin_include
include|#
directive|include
file|"undo.h"
end_include

begin_comment
comment|/*  external functions  */
end_comment

begin_function_decl
specifier|extern
name|void
name|layers_dialog_layer_merge_query
parameter_list|(
name|GImage
modifier|*
parameter_list|,
name|int
parameter_list|)
function_decl|;
end_function_decl

begin_typedef
DECL|struct|__anon292d0b0f0108
typedef|typedef
struct|struct
block|{
DECL|member|dlg
name|GtkWidget
modifier|*
name|dlg
decl_stmt|;
DECL|member|height_entry
name|GtkWidget
modifier|*
name|height_entry
decl_stmt|;
DECL|member|width_entry
name|GtkWidget
modifier|*
name|width_entry
decl_stmt|;
DECL|member|height_units_entry
name|GtkWidget
modifier|*
name|height_units_entry
decl_stmt|;
DECL|member|width_units_entry
name|GtkWidget
modifier|*
name|width_units_entry
decl_stmt|;
DECL|member|resolution_entry
name|GtkWidget
modifier|*
name|resolution_entry
decl_stmt|;
DECL|member|width
name|int
name|width
decl_stmt|;
DECL|member|height
name|int
name|height
decl_stmt|;
DECL|member|type
name|int
name|type
decl_stmt|;
DECL|member|fill_type
name|int
name|fill_type
decl_stmt|;
DECL|typedef|NewImageValues
block|}
name|NewImageValues
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon292d0b0f0208
block|{
DECL|member|shell
name|GtkWidget
modifier|*
name|shell
decl_stmt|;
DECL|member|resize
name|Resize
modifier|*
name|resize
decl_stmt|;
DECL|member|gimage_id
name|int
name|gimage_id
decl_stmt|;
DECL|typedef|ImageResize
block|}
name|ImageResize
typedef|;
end_typedef

begin_comment
comment|/*  new image local functions  */
end_comment

begin_function_decl
specifier|static
name|void
name|file_new_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_new_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gint
name|file_new_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GdkEvent
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_new_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_new_width_update_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_new_height_update_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_new_width_units_update_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_new_height_units_update_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_new_resolution_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/*  static variables  */
end_comment

begin_decl_stmt
DECL|variable|last_width
specifier|static
name|int
name|last_width
init|=
literal|256
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|last_height
specifier|static
name|int
name|last_height
init|=
literal|256
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|last_type
specifier|static
name|int
name|last_type
init|=
name|RGB
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|last_fill_type
specifier|static
name|int
name|last_fill_type
init|=
name|BACKGROUND_FILL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|resolution
specifier|static
name|float
name|resolution
init|=
literal|72
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  preferences local functions  */
end_comment

begin_function_decl
specifier|static
name|void
name|file_prefs_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_save_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gint
name|file_prefs_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GdkEvent
modifier|*
parameter_list|,
name|GtkWidget
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_text_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|file_prefs_preview_size_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/*  static variables  */
end_comment

begin_decl_stmt
DECL|variable|prefs_dlg
specifier|static
name|GtkWidget
modifier|*
name|prefs_dlg
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_transparency_type
specifier|static
name|int
name|old_transparency_type
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_transparency_size
specifier|static
name|int
name|old_transparency_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_levels_of_undo
specifier|static
name|int
name|old_levels_of_undo
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_marching_speed
specifier|static
name|int
name|old_marching_speed
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_allow_resize_windows
specifier|static
name|int
name|old_allow_resize_windows
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_auto_save
specifier|static
name|int
name|old_auto_save
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_preview_size
specifier|static
name|int
name|old_preview_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_no_cursor_updating
specifier|static
name|int
name|old_no_cursor_updating
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_show_tool_tips
specifier|static
name|int
name|old_show_tool_tips
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_cubic_interpolation
specifier|static
name|int
name|old_cubic_interpolation
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_confirm_on_close
specifier|static
name|int
name|old_confirm_on_close
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_width
specifier|static
name|int
name|old_default_width
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_height
specifier|static
name|int
name|old_default_height
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_default_type
specifier|static
name|int
name|old_default_type
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|new_dialog_run
specifier|static
name|int
name|new_dialog_run
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_stingy_memory_use
specifier|static
name|int
name|old_stingy_memory_use
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_tile_cache_size
specifier|static
name|int
name|old_tile_cache_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_install_cmap
specifier|static
name|int
name|old_install_cmap
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_cycled_marching_ants
specifier|static
name|int
name|old_cycled_marching_ants
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_temp_path
specifier|static
name|char
modifier|*
name|old_temp_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_swap_path
specifier|static
name|char
modifier|*
name|old_swap_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_brush_path
specifier|static
name|char
modifier|*
name|old_brush_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_pattern_path
specifier|static
name|char
modifier|*
name|old_pattern_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_palette_path
specifier|static
name|char
modifier|*
name|old_palette_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_plug_in_path
specifier|static
name|char
modifier|*
name|old_plug_in_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|old_gradient_path
specifier|static
name|char
modifier|*
name|old_gradient_path
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_temp_path
specifier|static
name|char
modifier|*
name|edit_temp_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_swap_path
specifier|static
name|char
modifier|*
name|edit_swap_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_brush_path
specifier|static
name|char
modifier|*
name|edit_brush_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_pattern_path
specifier|static
name|char
modifier|*
name|edit_pattern_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_palette_path
specifier|static
name|char
modifier|*
name|edit_palette_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_plug_in_path
specifier|static
name|char
modifier|*
name|edit_plug_in_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_gradient_path
specifier|static
name|char
modifier|*
name|edit_gradient_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_stingy_memory_use
specifier|static
name|int
name|edit_stingy_memory_use
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_tile_cache_size
specifier|static
name|int
name|edit_tile_cache_size
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_install_cmap
specifier|static
name|int
name|edit_install_cmap
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|edit_cycled_marching_ants
specifier|static
name|int
name|edit_cycled_marching_ants
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  local functions  */
end_comment

begin_function_decl
specifier|static
name|void
name|image_resize_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|image_scale_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|image_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gint
name|image_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|GdkEvent
modifier|*
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimage_mask_feather_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimage_mask_border_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimage_mask_grow_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimage_mask_shrink_callback
parameter_list|(
name|GtkWidget
modifier|*
parameter_list|,
name|gpointer
parameter_list|,
name|gpointer
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/*  variables declared in gimage_mask.c--we need them to set up  *  initial values for the various dialog boxes which query for values  */
end_comment

begin_decl_stmt
specifier|extern
name|double
name|gimage_mask_feather_radius
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|gimage_mask_border_radius
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|gimage_mask_grow_pixels
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|gimage_mask_shrink_pixels
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
DECL|function|file_new_ok_callback (GtkWidget * widget,gpointer data)
name|file_new_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|GDisplay
modifier|*
name|gdisplay
decl_stmt|;
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|type
decl_stmt|;
name|vals
operator|=
name|data
expr_stmt|;
name|vals
operator|->
name|width
operator|=
name|atoi
argument_list|(
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|vals
operator|->
name|height
operator|=
name|atoi
argument_list|(
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_widget_destroy
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
expr_stmt|;
name|last_width
operator|=
name|vals
operator|->
name|width
expr_stmt|;
name|last_height
operator|=
name|vals
operator|->
name|height
expr_stmt|;
name|last_type
operator|=
name|vals
operator|->
name|type
expr_stmt|;
name|last_fill_type
operator|=
name|vals
operator|->
name|fill_type
expr_stmt|;
switch|switch
condition|(
name|vals
operator|->
name|fill_type
condition|)
block|{
case|case
name|BACKGROUND_FILL
case|:
case|case
name|WHITE_FILL
case|:
name|type
operator|=
operator|(
name|vals
operator|->
name|type
operator|==
name|RGB
operator|)
condition|?
name|RGB_GIMAGE
else|:
name|GRAY_GIMAGE
expr_stmt|;
break|break;
case|case
name|TRANSPARENT_FILL
case|:
name|type
operator|=
operator|(
name|vals
operator|->
name|type
operator|==
name|RGB
operator|)
condition|?
name|RGBA_GIMAGE
else|:
name|GRAYA_GIMAGE
expr_stmt|;
break|break;
default|default:
name|type
operator|=
name|RGB_IMAGE
expr_stmt|;
break|break;
block|}
name|gimage
operator|=
name|gimage_new
argument_list|(
name|vals
operator|->
name|width
argument_list|,
name|vals
operator|->
name|height
argument_list|,
name|vals
operator|->
name|type
argument_list|)
expr_stmt|;
comment|/*  Make the background (or first) layer  */
name|layer
operator|=
name|layer_new
argument_list|(
name|gimage
operator|->
name|ID
argument_list|,
name|gimage
operator|->
name|width
argument_list|,
name|gimage
operator|->
name|height
argument_list|,
name|type
argument_list|,
literal|"Background"
argument_list|,
name|OPAQUE_OPACITY
argument_list|,
name|NORMAL
argument_list|)
expr_stmt|;
if|if
condition|(
name|layer
condition|)
block|{
comment|/*  add the new layer to the gimage  */
name|gimage_disable_undo
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
name|gimage_add_layer
argument_list|(
name|gimage
argument_list|,
name|layer
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gimage_enable_undo
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
name|drawable_fill
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
argument_list|,
name|vals
operator|->
name|fill_type
argument_list|)
expr_stmt|;
name|gimage_clean_all
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
name|gdisplay
operator|=
name|gdisplay_new
argument_list|(
name|gimage
argument_list|,
literal|0x0101
argument_list|)
expr_stmt|;
block|}
name|g_free
argument_list|(
name|vals
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|gint
DECL|function|file_new_delete_callback (GtkWidget * widget,GdkEvent * event,gpointer data)
name|file_new_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEvent
modifier|*
name|event
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|file_new_cancel_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|)
expr_stmt|;
return|return
name|TRUE
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_new_cancel_callback (GtkWidget * widget,gpointer data)
name|file_new_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|vals
operator|=
name|data
expr_stmt|;
name|gtk_widget_destroy
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|vals
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_new_toggle_callback (GtkWidget * widget,gpointer data)
name|file_new_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|val
decl_stmt|;
if|if
condition|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
condition|)
block|{
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
operator|(
name|long
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_new_width_update_callback (GtkWidget * widget,gpointer data)
name|file_new_width_update_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
comment|/* uh. like do something here  */
name|gchar
modifier|*
name|newvalue
decl_stmt|;
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|int
name|new_width
decl_stmt|;
name|float
name|temp
decl_stmt|;
name|char
name|buffer
index|[
literal|12
index|]
decl_stmt|;
name|vals
operator|=
name|data
expr_stmt|;
name|newvalue
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|)
expr_stmt|;
name|new_width
operator|=
name|atoi
argument_list|(
name|newvalue
argument_list|)
expr_stmt|;
name|temp
operator|=
operator|(
name|float
operator|)
name|new_width
operator|/
operator|(
name|float
operator|)
name|resolution
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%.2f"
argument_list|,
name|temp
argument_list|)
expr_stmt|;
name|gtk_signal_handler_block_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_signal_handler_unblock_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_new_height_update_callback (GtkWidget * widget,gpointer data)
name|file_new_height_update_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
comment|/* uh. like do something here  */
name|gchar
modifier|*
name|newvalue
decl_stmt|;
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|int
name|new_height
decl_stmt|;
name|float
name|temp
decl_stmt|;
name|char
name|buffer
index|[
literal|12
index|]
decl_stmt|;
name|vals
operator|=
name|data
expr_stmt|;
name|newvalue
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|)
expr_stmt|;
name|new_height
operator|=
name|atoi
argument_list|(
name|newvalue
argument_list|)
expr_stmt|;
name|temp
operator|=
operator|(
name|float
operator|)
name|new_height
operator|/
operator|(
name|float
operator|)
name|resolution
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%.2f"
argument_list|,
name|temp
argument_list|)
expr_stmt|;
name|gtk_signal_handler_block_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_signal_handler_unblock_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_new_width_units_update_callback (GtkWidget * widget,gpointer data)
name|file_new_width_units_update_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
name|newvalue
decl_stmt|;
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|float
name|new_width_units
decl_stmt|;
name|float
name|temp
decl_stmt|;
name|char
name|buffer
index|[
literal|12
index|]
decl_stmt|;
name|vals
operator|=
name|data
expr_stmt|;
name|newvalue
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
argument_list|)
expr_stmt|;
name|new_width_units
operator|=
name|atof
argument_list|(
name|newvalue
argument_list|)
expr_stmt|;
name|temp
operator|=
operator|(
operator|(
operator|(
name|float
operator|)
name|new_width_units
operator|)
operator|*
operator|(
operator|(
name|float
operator|)
name|resolution
operator|)
operator|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
operator|(
name|int
operator|)
name|temp
argument_list|)
expr_stmt|;
name|gtk_signal_handler_block_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_signal_handler_unblock_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_new_height_units_update_callback (GtkWidget * widget,gpointer data)
name|file_new_height_units_update_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
name|newvalue
decl_stmt|;
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|float
name|new_height_units
decl_stmt|;
name|float
name|temp
decl_stmt|;
name|char
name|buffer
index|[
literal|12
index|]
decl_stmt|;
name|vals
operator|=
name|data
expr_stmt|;
name|newvalue
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
argument_list|)
expr_stmt|;
name|new_height_units
operator|=
name|atof
argument_list|(
name|newvalue
argument_list|)
expr_stmt|;
name|temp
operator|=
operator|(
operator|(
operator|(
name|float
operator|)
name|new_height_units
operator|)
operator|*
operator|(
operator|(
name|float
operator|)
name|resolution
operator|)
operator|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
operator|(
name|int
operator|)
name|temp
argument_list|)
expr_stmt|;
name|gtk_signal_handler_block_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_signal_handler_unblock_by_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_new_resolution_callback (GtkWidget * widget,gpointer data)
name|file_new_resolution_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
name|newvalue
decl_stmt|;
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|float
name|new_resolution
decl_stmt|;
name|float
name|temp_units
decl_stmt|;
name|float
name|temp_pixels
decl_stmt|;
name|char
name|buffer
index|[
literal|12
index|]
decl_stmt|;
name|vals
operator|=
name|data
expr_stmt|;
name|newvalue
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|resolution_entry
argument_list|)
argument_list|)
expr_stmt|;
name|resolution
operator|=
name|atof
argument_list|(
name|newvalue
argument_list|)
expr_stmt|;
comment|/* a bit of a kludge to keep height/width from going to zero */
if|if
condition|(
name|resolution
operator|<=
literal|1
condition|)
name|resolution
operator|=
literal|1
expr_stmt|;
comment|/* figure the new height */
name|newvalue
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
argument_list|)
expr_stmt|;
name|temp_units
operator|=
name|atof
argument_list|(
name|newvalue
argument_list|)
expr_stmt|;
name|temp_pixels
operator|=
operator|(
name|float
operator|)
name|resolution
operator|*
operator|(
name|float
operator|)
name|temp_units
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
operator|(
name|int
operator|)
name|temp_pixels
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
comment|/* figure the new width */
name|newvalue
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
argument_list|)
expr_stmt|;
name|temp_units
operator|=
name|atof
argument_list|(
name|newvalue
argument_list|)
expr_stmt|;
name|temp_pixels
operator|=
operator|(
name|float
operator|)
name|resolution
operator|*
operator|(
name|float
operator|)
name|temp_units
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
operator|(
name|int
operator|)
name|temp_pixels
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|file_new_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_new_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|NewImageValues
modifier|*
name|vals
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|hbox
decl_stmt|;
name|GtkWidget
modifier|*
name|table
decl_stmt|;
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|radio_box
decl_stmt|;
name|GtkWidget
modifier|*
name|units_box
decl_stmt|;
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GtkWidget
modifier|*
name|menuitem
decl_stmt|;
name|GtkWidget
modifier|*
name|optionmenu
decl_stmt|;
name|GSList
modifier|*
name|group
decl_stmt|;
name|char
name|buffer
index|[
literal|32
index|]
decl_stmt|;
name|float
name|temp
decl_stmt|;
if|if
condition|(
operator|!
name|new_dialog_run
condition|)
block|{
name|last_width
operator|=
name|default_width
expr_stmt|;
name|last_height
operator|=
name|default_height
expr_stmt|;
name|last_type
operator|=
name|default_type
expr_stmt|;
name|new_dialog_run
operator|=
literal|1
expr_stmt|;
block|}
comment|/*  Before we try to determine the responsible gdisplay,    *  make sure this wasn't called from the toolbox    */
if|if
condition|(
operator|(
name|long
operator|)
name|client_data
condition|)
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
else|else
name|gdisp
operator|=
name|NULL
expr_stmt|;
name|vals
operator|=
name|g_malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|NewImageValues
argument_list|)
argument_list|)
expr_stmt|;
name|vals
operator|->
name|fill_type
operator|=
name|last_fill_type
expr_stmt|;
if|if
condition|(
name|gdisp
condition|)
block|{
name|vals
operator|->
name|width
operator|=
name|gdisp
operator|->
name|gimage
operator|->
name|width
expr_stmt|;
name|vals
operator|->
name|height
operator|=
name|gdisp
operator|->
name|gimage
operator|->
name|height
expr_stmt|;
name|vals
operator|->
name|type
operator|=
name|gimage_base_type
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|vals
operator|->
name|width
operator|=
name|last_width
expr_stmt|;
name|vals
operator|->
name|height
operator|=
name|last_height
expr_stmt|;
name|vals
operator|->
name|type
operator|=
name|last_type
expr_stmt|;
block|}
if|if
condition|(
name|vals
operator|->
name|type
operator|==
name|INDEXED
condition|)
name|vals
operator|->
name|type
operator|=
name|RGB
expr_stmt|;
comment|/* no indexed images */
name|vals
operator|->
name|dlg
operator|=
name|gtk_dialog_new
argument_list|()
expr_stmt|;
name|gtk_window_set_wmclass
argument_list|(
name|GTK_WINDOW
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
argument_list|,
literal|"new_image"
argument_list|,
literal|"Gimp"
argument_list|)
expr_stmt|;
name|gtk_window_set_title
argument_list|(
name|GTK_WINDOW
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
argument_list|,
literal|"New Image"
argument_list|)
expr_stmt|;
name|gtk_window_position
argument_list|(
name|GTK_WINDOW
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
argument_list|,
name|GTK_WIN_POS_MOUSE
argument_list|)
expr_stmt|;
comment|/* handle the wm close signal */
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_new_delete_callback
argument_list|)
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_DIALOG
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
literal|"OK"
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_ok_callback
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_grab_default
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
literal|"Cancel"
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_cancel_callback
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
operator|->
name|vbox
argument_list|)
argument_list|,
name|vbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|3
argument_list|,
literal|3
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|table
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Width"
argument_list|)
expr_stmt|;
comment|/*  gtk_misc_set_alignment (GTK_MISC (label), 0.0, 0.5); */
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Height"
argument_list|)
expr_stmt|;
comment|/*  gtk_misc_set_alignment (GTK_MISC (label), 0.0, 0.5); */
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Pixels:"
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Units:"
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|vals
operator|->
name|width_entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|vals
operator|->
name|width
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|vals
operator|->
name|width_entry
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_width_update_callback
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vals
operator|->
name|width_entry
argument_list|)
expr_stmt|;
name|vals
operator|->
name|height_entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|vals
operator|->
name|height
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|vals
operator|->
name|height_entry
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_height_update_callback
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vals
operator|->
name|height_entry
argument_list|)
expr_stmt|;
name|vals
operator|->
name|width_units_entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|temp
operator|=
operator|(
name|float
operator|)
name|vals
operator|->
name|width
operator|/
name|resolution
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%.2f"
argument_list|,
name|temp
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_width_units_update_callback
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|vals
operator|->
name|width_units_entry
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vals
operator|->
name|width_units_entry
argument_list|)
expr_stmt|;
name|vals
operator|->
name|height_units_entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|temp
operator|=
operator|(
name|float
operator|)
name|vals
operator|->
name|height
operator|/
name|resolution
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%.2f"
argument_list|,
name|temp
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_height_units_update_callback
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|vals
operator|->
name|height_units_entry
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vals
operator|->
name|height_units_entry
argument_list|)
expr_stmt|;
comment|/* code for picking units and resolution      idealy  [ resolution: [ 72  ] pixels per [inch - ] ]   */
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Resolution and Units"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|hbox
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|hbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
comment|/*   label = gtk_label_new ("Resolution:");   gtk_box_pack_start (GTK_BOX (hbox), label , TRUE, TRUE, 0);   gtk_widget_show (label);   */
name|vals
operator|->
name|resolution_entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|vals
operator|->
name|resolution_entry
argument_list|,
literal|76
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%.2f"
argument_list|,
name|resolution
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|vals
operator|->
name|resolution_entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|vals
operator|->
name|resolution_entry
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|vals
operator|->
name|resolution_entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_resolution_callback
argument_list|,
name|vals
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vals
operator|->
name|resolution_entry
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|" pixels per  "
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_menu_new
argument_list|()
expr_stmt|;
comment|/* This units stuff doesnt do anything yet. I'm not real sure if it      it should do anything yet, excpet for maybe set some default resolutions      and change the image default rulers. But the rulers stuff probabaly      needs some gtk acking first to really be useful.   */
comment|/* probabaly should be more general here */
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Inch"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
comment|/*  this sorta might work */
comment|/*   gtk_signal_connect (GTK_OBJECT (menuitem), "activate", 		      (GtkSignalFunc) file_new_units_inch_menu_callback, 		      NULL);   */
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Cm"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"parsec"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|optionmenu
operator|=
name|gtk_option_menu_new
argument_list|()
expr_stmt|;
name|gtk_option_menu_set_menu
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|optionmenu
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|optionmenu
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|hbox
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Image Type"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|NULL
argument_list|,
literal|"RGB"
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|RGB
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_toggle_callback
argument_list|,
operator|&
name|vals
operator|->
name|type
argument_list|)
expr_stmt|;
if|if
condition|(
name|vals
operator|->
name|type
operator|==
name|RGB
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
literal|"Grayscale"
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|GRAY
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_toggle_callback
argument_list|,
operator|&
name|vals
operator|->
name|type
argument_list|)
expr_stmt|;
if|if
condition|(
name|vals
operator|->
name|type
operator|==
name|GRAY
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Fill Type"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|NULL
argument_list|,
literal|"Background"
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|BACKGROUND_FILL
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_toggle_callback
argument_list|,
operator|&
name|vals
operator|->
name|fill_type
argument_list|)
expr_stmt|;
if|if
condition|(
name|vals
operator|->
name|fill_type
operator|==
name|BACKGROUND_FILL
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
literal|"White"
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|WHITE_FILL
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_toggle_callback
argument_list|,
operator|&
name|vals
operator|->
name|fill_type
argument_list|)
expr_stmt|;
if|if
condition|(
name|vals
operator|->
name|fill_type
operator|==
name|WHITE_FILL
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
literal|"Transparent"
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|TRANSPARENT_FILL
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_new_toggle_callback
argument_list|,
operator|&
name|vals
operator|->
name|fill_type
argument_list|)
expr_stmt|;
if|if
condition|(
name|vals
operator|->
name|fill_type
operator|==
name|TRANSPARENT_FILL
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vals
operator|->
name|dlg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|file_open_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_open_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|file_open_callback
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|file_save_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_save_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|file_save_callback
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|file_save_as_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_save_as_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|file_save_as_callback
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Some information regarding preferences, compiled by Raph Levien 11/3/97.     The following preference items cannot be set on the fly (at least    according to the existing pref code - it may be that changing them    so they're set on the fly is not hard).     temp-path    swap-path    brush-path    pattern-path    plug-in-path    palette-path    gradient-path    stingy-memory-use    tile-cache-size    install-cmap    cycled-marching-ants     All of these now have variables of the form edit_temp_path, which    are copied from the actual variables (e.g. temp_path) the first time    the dialog box is started.     Variables of the form old_temp_path represent the values at the    time the dialog is opened - a cancel copies them back from old to    the real variables or the edit variables, depending on whether they    can be set on the fly.     Here are the remaining issues as I see them:     Still no settings for default-brush, default-gradient,    default-palette, default-pattern, gamma-correction, color-cube,    show-rulers, ruler-units. No widget for confirm-on-close although    a lot of stuff is there.     No UI feedback for the fact that some settings won't take effect    until the next Gimp restart.     The semantics of "save" are a little funny - it only saves the    settings that are different from the way they were when the dialog    was opened. So you can set something, close the window, open it    up again, click "save" and have nothing happen. To change this    to more intuitive semantics, we should have a whole set of init_    variables that are set the first time the dialog is opened (along    with the edit_ variables that are currently set). Then, the save    callback checks against the init_ variable rather than the old_.     */
end_comment

begin_comment
comment|/* Copy the string from source to destination, freeing the string stored    in the destination if there is one there already. */
end_comment

begin_function
specifier|static
name|void
DECL|function|file_prefs_strset (char ** dst,char * src)
name|file_prefs_strset
parameter_list|(
name|char
modifier|*
modifier|*
name|dst
parameter_list|,
name|char
modifier|*
name|src
parameter_list|)
block|{
if|if
condition|(
operator|*
name|dst
operator|!=
name|NULL
condition|)
name|g_free
argument_list|(
operator|*
name|dst
argument_list|)
expr_stmt|;
operator|*
name|dst
operator|=
name|g_strdup
argument_list|(
name|src
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Duplicate the string, but treat NULL as the empty string. */
end_comment

begin_function
specifier|static
name|char
modifier|*
DECL|function|file_prefs_strdup (char * src)
name|file_prefs_strdup
parameter_list|(
name|char
modifier|*
name|src
parameter_list|)
block|{
return|return
name|g_strdup
argument_list|(
name|src
operator|==
name|NULL
condition|?
literal|""
else|:
name|src
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* Compare two strings, but treat NULL as the empty string. */
end_comment

begin_function
specifier|static
name|int
DECL|function|file_prefs_strcmp (char * src1,char * src2)
name|file_prefs_strcmp
parameter_list|(
name|char
modifier|*
name|src1
parameter_list|,
name|char
modifier|*
name|src2
parameter_list|)
block|{
return|return
name|strcmp
argument_list|(
name|src1
operator|==
name|NULL
condition|?
literal|""
else|:
name|src1
argument_list|,
name|src2
operator|==
name|NULL
condition|?
literal|""
else|:
name|src2
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_ok_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_ok_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
if|if
condition|(
name|levels_of_undo
operator|<
literal|0
condition|)
block|{
name|g_message
argument_list|(
literal|"Error: Levels of undo must be zero or greater."
argument_list|)
expr_stmt|;
name|levels_of_undo
operator|=
name|old_levels_of_undo
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|marching_speed
operator|<
literal|50
condition|)
block|{
name|g_message
argument_list|(
literal|"Error: Marching speed must be 50 or greater."
argument_list|)
expr_stmt|;
name|marching_speed
operator|=
name|old_marching_speed
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_width
operator|<
literal|1
condition|)
block|{
name|g_message
argument_list|(
literal|"Error: Default width must be one or greater."
argument_list|)
expr_stmt|;
name|default_width
operator|=
name|old_default_width
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|default_height
operator|<
literal|1
condition|)
block|{
name|g_message
argument_list|(
literal|"Error: Default height must be one or greater."
argument_list|)
expr_stmt|;
name|default_height
operator|=
name|old_default_height
expr_stmt|;
return|return;
block|}
name|gtk_widget_destroy
argument_list|(
name|dlg
argument_list|)
expr_stmt|;
name|prefs_dlg
operator|=
name|NULL
expr_stmt|;
if|if
condition|(
name|show_tool_tips
condition|)
name|gtk_tooltips_enable
argument_list|(
name|tool_tips
argument_list|)
expr_stmt|;
else|else
name|gtk_tooltips_disable
argument_list|(
name|tool_tips
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_save_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_save_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|GList
modifier|*
name|update
init|=
name|NULL
decl_stmt|;
comment|/* options that should be updated in .gimprc */
name|GList
modifier|*
name|remove
init|=
name|NULL
decl_stmt|;
comment|/* options that should be commented out */
name|int
name|save_stingy_memory_use
decl_stmt|;
name|int
name|save_tile_cache_size
decl_stmt|;
name|int
name|save_install_cmap
decl_stmt|;
name|int
name|save_cycled_marching_ants
decl_stmt|;
name|gchar
modifier|*
name|save_temp_path
decl_stmt|;
name|gchar
modifier|*
name|save_swap_path
decl_stmt|;
name|gchar
modifier|*
name|save_brush_path
decl_stmt|;
name|gchar
modifier|*
name|save_pattern_path
decl_stmt|;
name|gchar
modifier|*
name|save_palette_path
decl_stmt|;
name|gchar
modifier|*
name|save_plug_in_path
decl_stmt|;
name|gchar
modifier|*
name|save_gradient_path
decl_stmt|;
name|int
name|restart_notification
init|=
name|FALSE
decl_stmt|;
name|file_prefs_ok_callback
argument_list|(
name|widget
argument_list|,
name|dlg
argument_list|)
expr_stmt|;
comment|/* Save variables so that we can restore them later */
name|save_stingy_memory_use
operator|=
name|stingy_memory_use
expr_stmt|;
name|save_tile_cache_size
operator|=
name|tile_cache_size
expr_stmt|;
name|save_install_cmap
operator|=
name|install_cmap
expr_stmt|;
name|save_cycled_marching_ants
operator|=
name|cycled_marching_ants
expr_stmt|;
name|save_temp_path
operator|=
name|temp_path
expr_stmt|;
name|save_swap_path
operator|=
name|swap_path
expr_stmt|;
name|save_brush_path
operator|=
name|brush_path
expr_stmt|;
name|save_pattern_path
operator|=
name|pattern_path
expr_stmt|;
name|save_palette_path
operator|=
name|palette_path
expr_stmt|;
name|save_plug_in_path
operator|=
name|plug_in_path
expr_stmt|;
name|save_gradient_path
operator|=
name|gradient_path
expr_stmt|;
if|if
condition|(
name|levels_of_undo
operator|!=
name|old_levels_of_undo
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"undo-levels"
argument_list|)
expr_stmt|;
if|if
condition|(
name|marching_speed
operator|!=
name|old_marching_speed
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"marching-ants-speed"
argument_list|)
expr_stmt|;
if|if
condition|(
name|allow_resize_windows
operator|!=
name|old_allow_resize_windows
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"allow-resize-windows"
argument_list|)
expr_stmt|;
if|if
condition|(
name|auto_save
operator|!=
name|old_auto_save
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"auto-save"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-auto-save"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|no_cursor_updating
operator|!=
name|old_no_cursor_updating
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"cursor-updating"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"no-cursor-updating"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|show_tool_tips
operator|!=
name|old_show_tool_tips
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"show-tool-tips"
argument_list|)
expr_stmt|;
name|remove
operator|=
name|g_list_append
argument_list|(
name|remove
argument_list|,
literal|"dont-show-tool-tips"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|cubic_interpolation
operator|!=
name|old_cubic_interpolation
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"cubic-interpolation"
argument_list|)
expr_stmt|;
if|if
condition|(
name|confirm_on_close
operator|!=
name|old_confirm_on_close
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"confirm-on-close"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_width
operator|!=
name|old_default_width
operator|||
name|default_height
operator|!=
name|old_default_height
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-image-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_type
operator|!=
name|old_default_type
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"default-image-type"
argument_list|)
expr_stmt|;
if|if
condition|(
name|preview_size
operator|!=
name|old_preview_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"preview-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_type
operator|!=
name|old_transparency_type
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"transparency-type"
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_size
operator|!=
name|old_transparency_size
condition|)
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"transparency-size"
argument_list|)
expr_stmt|;
if|if
condition|(
name|edit_stingy_memory_use
operator|!=
name|stingy_memory_use
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"stingy-memory-use"
argument_list|)
expr_stmt|;
name|stingy_memory_use
operator|=
name|edit_stingy_memory_use
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_tile_cache_size
operator|!=
name|tile_cache_size
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"tile-cache-size"
argument_list|)
expr_stmt|;
name|tile_cache_size
operator|=
name|edit_tile_cache_size
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_install_cmap
operator|!=
name|old_install_cmap
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"install-colormap"
argument_list|)
expr_stmt|;
name|install_cmap
operator|=
name|edit_install_cmap
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|edit_cycled_marching_ants
operator|!=
name|cycled_marching_ants
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"colormap-cycling"
argument_list|)
expr_stmt|;
name|cycled_marching_ants
operator|=
name|edit_cycled_marching_ants
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|temp_path
argument_list|,
name|edit_temp_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"temp-path"
argument_list|)
expr_stmt|;
name|temp_path
operator|=
name|edit_temp_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|swap_path
argument_list|,
name|edit_swap_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"swap-path"
argument_list|)
expr_stmt|;
name|swap_path
operator|=
name|edit_swap_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|brush_path
argument_list|,
name|edit_brush_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"brush-path"
argument_list|)
expr_stmt|;
name|brush_path
operator|=
name|edit_brush_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|pattern_path
argument_list|,
name|edit_pattern_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"pattern-path"
argument_list|)
expr_stmt|;
name|pattern_path
operator|=
name|edit_pattern_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|palette_path
argument_list|,
name|edit_palette_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"palette-path"
argument_list|)
expr_stmt|;
name|palette_path
operator|=
name|edit_palette_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|plug_in_path
argument_list|,
name|edit_plug_in_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"plug-in-path"
argument_list|)
expr_stmt|;
name|plug_in_path
operator|=
name|edit_plug_in_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
if|if
condition|(
name|file_prefs_strcmp
argument_list|(
name|gradient_path
argument_list|,
name|edit_gradient_path
argument_list|)
condition|)
block|{
name|update
operator|=
name|g_list_append
argument_list|(
name|update
argument_list|,
literal|"gradient-path"
argument_list|)
expr_stmt|;
name|gradient_path
operator|=
name|edit_gradient_path
expr_stmt|;
name|restart_notification
operator|=
name|TRUE
expr_stmt|;
block|}
name|save_gimprc
argument_list|(
operator|&
name|update
argument_list|,
operator|&
name|remove
argument_list|)
expr_stmt|;
comment|/* Restore variables which must not change */
name|stingy_memory_use
operator|=
name|save_stingy_memory_use
expr_stmt|;
name|tile_cache_size
operator|=
name|save_tile_cache_size
expr_stmt|;
name|install_cmap
operator|=
name|save_install_cmap
expr_stmt|;
name|cycled_marching_ants
operator|=
name|save_cycled_marching_ants
expr_stmt|;
name|temp_path
operator|=
name|save_temp_path
expr_stmt|;
name|swap_path
operator|=
name|save_swap_path
expr_stmt|;
name|brush_path
operator|=
name|save_brush_path
expr_stmt|;
name|pattern_path
operator|=
name|save_pattern_path
expr_stmt|;
name|palette_path
operator|=
name|save_palette_path
expr_stmt|;
name|plug_in_path
operator|=
name|save_plug_in_path
expr_stmt|;
name|gradient_path
operator|=
name|save_gradient_path
expr_stmt|;
if|if
condition|(
name|restart_notification
condition|)
name|g_message
argument_list|(
literal|"You will need to restart GIMP for these changes to take effect."
argument_list|)
expr_stmt|;
name|g_list_free
argument_list|(
name|update
argument_list|)
expr_stmt|;
name|g_list_free
argument_list|(
name|remove
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|file_prefs_delete_callback (GtkWidget * widget,GdkEvent * event,GtkWidget * dlg)
name|file_prefs_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEvent
modifier|*
name|event
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|file_prefs_cancel_callback
argument_list|(
name|widget
argument_list|,
name|dlg
argument_list|)
expr_stmt|;
comment|/* the widget is already destroyed here no need to try again */
return|return
name|TRUE
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_cancel_callback (GtkWidget * widget,GtkWidget * dlg)
name|file_prefs_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|dlg
parameter_list|)
block|{
name|gtk_widget_destroy
argument_list|(
name|dlg
argument_list|)
expr_stmt|;
name|prefs_dlg
operator|=
name|NULL
expr_stmt|;
name|levels_of_undo
operator|=
name|old_levels_of_undo
expr_stmt|;
name|marching_speed
operator|=
name|old_marching_speed
expr_stmt|;
name|allow_resize_windows
operator|=
name|old_allow_resize_windows
expr_stmt|;
name|auto_save
operator|=
name|old_auto_save
expr_stmt|;
name|no_cursor_updating
operator|=
name|old_no_cursor_updating
expr_stmt|;
name|show_tool_tips
operator|=
name|old_show_tool_tips
expr_stmt|;
name|cubic_interpolation
operator|=
name|old_cubic_interpolation
expr_stmt|;
name|confirm_on_close
operator|=
name|old_confirm_on_close
expr_stmt|;
name|default_width
operator|=
name|old_default_width
expr_stmt|;
name|default_height
operator|=
name|old_default_height
expr_stmt|;
name|default_type
operator|=
name|old_default_type
expr_stmt|;
if|if
condition|(
name|preview_size
operator|!=
name|old_preview_size
condition|)
block|{
name|lc_dialog_rebuild
argument_list|(
name|old_preview_size
argument_list|)
expr_stmt|;
name|layer_select_update_preview_size
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|transparency_type
operator|!=
name|old_transparency_type
operator|)
operator|||
operator|(
name|transparency_size
operator|!=
name|old_transparency_size
operator|)
condition|)
block|{
name|transparency_type
operator|=
name|old_transparency_type
expr_stmt|;
name|transparency_size
operator|=
name|old_transparency_size
expr_stmt|;
name|render_setup
argument_list|(
name|transparency_type
argument_list|,
name|transparency_size
argument_list|)
expr_stmt|;
name|layer_invalidate_previews
argument_list|(
operator|-
literal|1
argument_list|)
expr_stmt|;
name|gimage_invalidate_previews
argument_list|()
expr_stmt|;
name|gdisplays_expose_full
argument_list|()
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
name|edit_stingy_memory_use
operator|=
name|old_stingy_memory_use
expr_stmt|;
name|edit_tile_cache_size
operator|=
name|old_tile_cache_size
expr_stmt|;
name|edit_install_cmap
operator|=
name|old_install_cmap
expr_stmt|;
name|edit_cycled_marching_ants
operator|=
name|old_cycled_marching_ants
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_temp_path
argument_list|,
name|old_temp_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_swap_path
argument_list|,
name|old_swap_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_brush_path
argument_list|,
name|old_brush_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_pattern_path
argument_list|,
name|old_pattern_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_palette_path
argument_list|,
name|old_palette_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_plug_in_path
argument_list|,
name|old_plug_in_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|edit_gradient_path
argument_list|,
name|old_gradient_path
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_toggle_callback (GtkWidget * widget,gpointer data)
name|file_prefs_toggle_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|val
decl_stmt|;
if|if
condition|(
name|data
operator|==
operator|&
name|allow_resize_windows
condition|)
name|allow_resize_windows
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|auto_save
condition|)
name|auto_save
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|no_cursor_updating
condition|)
name|no_cursor_updating
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|show_tool_tips
condition|)
name|show_tool_tips
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|cubic_interpolation
condition|)
name|cubic_interpolation
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|confirm_on_close
condition|)
name|confirm_on_close
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_stingy_memory_use
condition|)
name|edit_stingy_memory_use
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_install_cmap
condition|)
name|edit_install_cmap
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|edit_cycled_marching_ants
condition|)
name|edit_cycled_marching_ants
operator|=
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
elseif|else
if|if
condition|(
name|data
operator|==
operator|&
name|default_type
condition|)
block|{
name|default_type
operator|=
operator|(
name|long
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
condition|)
block|{
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
operator|(
name|long
operator|)
name|gtk_object_get_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|render_setup
argument_list|(
name|transparency_type
argument_list|,
name|transparency_size
argument_list|)
expr_stmt|;
name|layer_invalidate_previews
argument_list|(
operator|-
literal|1
argument_list|)
expr_stmt|;
name|gimage_invalidate_previews
argument_list|()
expr_stmt|;
name|gdisplays_expose_full
argument_list|()
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_preview_size_callback (GtkWidget * widget,gpointer data)
name|file_prefs_preview_size_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|lc_dialog_rebuild
argument_list|(
operator|(
name|long
operator|)
name|data
argument_list|)
expr_stmt|;
name|layer_select_update_preview_size
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_text_callback (GtkWidget * widget,gpointer data)
name|file_prefs_text_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|int
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|atoi
argument_list|(
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|file_prefs_string_callback (GtkWidget * widget,gpointer data)
name|file_prefs_string_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gchar
modifier|*
modifier|*
name|val
decl_stmt|;
name|val
operator|=
name|data
expr_stmt|;
name|file_prefs_strset
argument_list|(
name|val
argument_list|,
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|file_pref_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_pref_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|out_frame
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|hbox
decl_stmt|;
name|GtkWidget
modifier|*
name|abox
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkWidget
modifier|*
name|radio_box
decl_stmt|;
name|GtkWidget
modifier|*
name|entry
decl_stmt|;
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GtkWidget
modifier|*
name|menuitem
decl_stmt|;
name|GtkWidget
modifier|*
name|optionmenu
decl_stmt|;
name|GtkWidget
modifier|*
name|notebook
decl_stmt|;
name|GtkWidget
modifier|*
name|table
decl_stmt|;
name|GSList
modifier|*
name|group
decl_stmt|;
name|char
name|buffer
index|[
literal|32
index|]
decl_stmt|;
name|char
modifier|*
name|transparencies
index|[]
init|=
block|{
literal|"Light Checks"
block|,
literal|"Mid-Tone Checks"
block|,
literal|"Dark Checks"
block|,
literal|"White Only"
block|,
literal|"Gray Only"
block|,
literal|"Black Only"
block|,   }
decl_stmt|;
name|char
modifier|*
name|checks
index|[]
init|=
block|{
literal|"Small Checks"
block|,
literal|"Medium Checks"
block|,
literal|"Large Checks"
block|,   }
decl_stmt|;
name|int
name|transparency_vals
index|[]
init|=
block|{
name|LIGHT_CHECKS
block|,
name|GRAY_CHECKS
block|,
name|DARK_CHECKS
block|,
name|WHITE_ONLY
block|,
name|GRAY_ONLY
block|,
name|BLACK_ONLY
block|,   }
decl_stmt|;
name|int
name|check_vals
index|[]
init|=
block|{
name|SMALL_CHECKS
block|,
name|MEDIUM_CHECKS
block|,
name|LARGE_CHECKS
block|,   }
decl_stmt|;
DECL|struct|__anon292d0b0f0308
struct|struct
block|{
DECL|member|label
name|char
modifier|*
name|label
decl_stmt|;
DECL|member|mpath
name|char
modifier|*
modifier|*
name|mpath
decl_stmt|;
block|}
name|dirs
index|[]
init|=
block|{
block|{
literal|"Temp dir:"
block|,
operator|&
name|edit_temp_path
block|}
block|,
block|{
literal|"Swap dir:"
block|,
operator|&
name|edit_swap_path
block|}
block|,
block|{
literal|"Brushes dir:"
block|,
operator|&
name|edit_brush_path
block|}
block|,
block|{
literal|"Gradients dir:"
block|,
operator|&
name|edit_gradient_path
block|}
block|,
block|{
literal|"Patterns dir:"
block|,
operator|&
name|edit_pattern_path
block|}
block|,
block|{
literal|"Palette dir:"
block|,
operator|&
name|edit_palette_path
block|}
block|,
block|{
literal|"Plug-in dir:"
block|,
operator|&
name|edit_plug_in_path
block|}
block|}
struct|;
DECL|struct|__anon292d0b0f0408
struct|struct
block|{
DECL|member|label
name|char
modifier|*
name|label
decl_stmt|;
DECL|member|size
name|int
name|size
decl_stmt|;
block|}
name|preview_sizes
index|[]
init|=
block|{
block|{
literal|"None"
block|,
literal|0
block|}
block|,
block|{
literal|"Small"
block|,
literal|32
block|}
block|,
block|{
literal|"Medium"
block|,
literal|64
block|}
block|,
block|{
literal|"Large"
block|,
literal|128
block|}
block|}
struct|;
name|int
name|ntransparencies
init|=
sizeof|sizeof
argument_list|(
name|transparencies
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|transparencies
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|nchecks
init|=
sizeof|sizeof
argument_list|(
name|checks
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|checks
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|ndirs
init|=
sizeof|sizeof
argument_list|(
name|dirs
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|dirs
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|npreview_sizes
init|=
sizeof|sizeof
argument_list|(
name|preview_sizes
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|preview_sizes
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|i
decl_stmt|;
if|if
condition|(
operator|!
name|prefs_dlg
condition|)
block|{
if|if
condition|(
name|edit_temp_path
operator|==
name|NULL
condition|)
block|{
comment|/* first time dialog is opened - copy config vals to edit              variables. */
name|edit_temp_path
operator|=
name|file_prefs_strdup
argument_list|(
name|temp_path
argument_list|)
expr_stmt|;
name|edit_swap_path
operator|=
name|file_prefs_strdup
argument_list|(
name|swap_path
argument_list|)
expr_stmt|;
name|edit_brush_path
operator|=
name|file_prefs_strdup
argument_list|(
name|brush_path
argument_list|)
expr_stmt|;
name|edit_pattern_path
operator|=
name|file_prefs_strdup
argument_list|(
name|pattern_path
argument_list|)
expr_stmt|;
name|edit_palette_path
operator|=
name|file_prefs_strdup
argument_list|(
name|palette_path
argument_list|)
expr_stmt|;
name|edit_plug_in_path
operator|=
name|file_prefs_strdup
argument_list|(
name|plug_in_path
argument_list|)
expr_stmt|;
name|edit_gradient_path
operator|=
name|file_prefs_strdup
argument_list|(
name|gradient_path
argument_list|)
expr_stmt|;
name|edit_stingy_memory_use
operator|=
name|stingy_memory_use
expr_stmt|;
name|edit_tile_cache_size
operator|=
name|tile_cache_size
expr_stmt|;
name|edit_install_cmap
operator|=
name|install_cmap
expr_stmt|;
name|edit_cycled_marching_ants
operator|=
name|cycled_marching_ants
expr_stmt|;
block|}
name|old_transparency_type
operator|=
name|transparency_type
expr_stmt|;
name|old_transparency_size
operator|=
name|transparency_size
expr_stmt|;
name|old_levels_of_undo
operator|=
name|levels_of_undo
expr_stmt|;
name|old_marching_speed
operator|=
name|marching_speed
expr_stmt|;
name|old_allow_resize_windows
operator|=
name|allow_resize_windows
expr_stmt|;
name|old_auto_save
operator|=
name|auto_save
expr_stmt|;
name|old_preview_size
operator|=
name|preview_size
expr_stmt|;
name|old_no_cursor_updating
operator|=
name|no_cursor_updating
expr_stmt|;
name|old_show_tool_tips
operator|=
name|show_tool_tips
expr_stmt|;
name|old_cubic_interpolation
operator|=
name|cubic_interpolation
expr_stmt|;
name|old_confirm_on_close
operator|=
name|confirm_on_close
expr_stmt|;
name|old_default_width
operator|=
name|default_width
expr_stmt|;
name|old_default_height
operator|=
name|default_height
expr_stmt|;
name|old_default_type
operator|=
name|default_type
expr_stmt|;
name|old_stingy_memory_use
operator|=
name|edit_stingy_memory_use
expr_stmt|;
name|old_tile_cache_size
operator|=
name|edit_tile_cache_size
expr_stmt|;
name|old_install_cmap
operator|=
name|edit_install_cmap
expr_stmt|;
name|old_cycled_marching_ants
operator|=
name|edit_cycled_marching_ants
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_temp_path
argument_list|,
name|edit_temp_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_swap_path
argument_list|,
name|edit_swap_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_brush_path
argument_list|,
name|edit_brush_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_pattern_path
argument_list|,
name|edit_pattern_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_palette_path
argument_list|,
name|edit_palette_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_plug_in_path
argument_list|,
name|edit_plug_in_path
argument_list|)
expr_stmt|;
name|file_prefs_strset
argument_list|(
operator|&
name|old_gradient_path
argument_list|,
name|edit_gradient_path
argument_list|)
expr_stmt|;
name|prefs_dlg
operator|=
name|gtk_dialog_new
argument_list|()
expr_stmt|;
name|gtk_window_set_wmclass
argument_list|(
name|GTK_WINDOW
argument_list|(
name|prefs_dlg
argument_list|)
argument_list|,
literal|"preferences"
argument_list|,
literal|"Gimp"
argument_list|)
expr_stmt|;
name|gtk_window_set_title
argument_list|(
name|GTK_WINDOW
argument_list|(
name|prefs_dlg
argument_list|)
argument_list|,
literal|"Preferences"
argument_list|)
expr_stmt|;
comment|/* handle the wm close signal */
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|prefs_dlg
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|file_prefs_delete_callback
argument_list|)
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
comment|/* Action area */
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
literal|"OK"
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_ok_callback
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_grab_default
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
literal|"Save"
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_save_callback
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_grab_default
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_button_new_with_label
argument_list|(
literal|"Cancel"
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_cancel_callback
argument_list|,
name|prefs_dlg
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|notebook
operator|=
name|gtk_notebook_new
argument_list|()
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|prefs_dlg
argument_list|)
operator|->
name|vbox
argument_list|)
argument_list|,
name|notebook
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Display page */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Display settings"
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Image size"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|abox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|abox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|abox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|abox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
literal|2
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|abox
argument_list|)
argument_list|,
name|table
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Width:"
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Height:"
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|entry
argument_list|,
literal|25
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|default_width
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|entry
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_text_callback
argument_list|,
operator|&
name|default_width
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|entry
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|entry
argument_list|,
literal|25
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|default_height
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|entry
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_text_callback
argument_list|,
operator|&
name|default_height
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|entry
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Image type"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|NULL
argument_list|,
literal|"RGB"
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|RGB
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_type
operator|==
name|RGB
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|default_type
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
literal|"Grayscale"
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
operator|(
name|gpointer
operator|)
name|GRAY
argument_list|)
expr_stmt|;
if|if
condition|(
name|last_type
operator|==
name|GRAY
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|default_type
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Preview size:"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_menu_new
argument_list|()
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|npreview_sizes
condition|;
name|i
operator|++
control|)
block|{
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
name|preview_sizes
index|[
name|i
index|]
operator|.
name|label
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_preview_size_callback
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
operator|(
name|long
operator|)
name|preview_sizes
index|[
name|i
index|]
operator|.
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
block|}
name|optionmenu
operator|=
name|gtk_option_menu_new
argument_list|()
expr_stmt|;
name|gtk_option_menu_set_menu
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|optionmenu
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|optionmenu
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|npreview_sizes
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|preview_size
operator|==
name|preview_sizes
index|[
name|i
index|]
operator|.
name|size
condition|)
name|gtk_option_menu_set_history
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|optionmenu
argument_list|)
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Cubic interpolation"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|cubic_interpolation
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|cubic_interpolation
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Transparency Type"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|group
operator|=
name|NULL
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|ntransparencies
condition|;
name|i
operator|++
control|)
block|{
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|transparencies
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
operator|(
name|long
operator|)
name|transparency_vals
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|transparency_vals
index|[
name|i
index|]
operator|==
name|transparency_type
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|transparency_type
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Check Size"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|radio_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|radio_box
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|radio_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|radio_box
argument_list|)
expr_stmt|;
name|group
operator|=
name|NULL
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nchecks
condition|;
name|i
operator|++
control|)
block|{
name|button
operator|=
name|gtk_radio_button_new_with_label
argument_list|(
name|group
argument_list|,
name|checks
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|group
operator|=
name|gtk_radio_button_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|radio_box
argument_list|)
argument_list|,
name|button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_object_set_user_data
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
call|(
name|gpointer
call|)
argument_list|(
operator|(
name|long
operator|)
name|check_vals
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|check_vals
index|[
name|i
index|]
operator|==
name|transparency_size
condition|)
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|transparency_size
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
block|}
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Display"
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
comment|/* Interface */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Interface settings"
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Levels of undo:"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|entry
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|levels_of_undo
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|entry
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_text_callback
argument_list|,
operator|&
name|levels_of_undo
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|entry
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Resize window on zoom"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|allow_resize_windows
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|allow_resize_windows
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
comment|/* Don't show the Auto-save button until we really  	 have auto-saving in the gimp.        	 button = gtk_check_button_new_with_label("Auto save"); 	 gtk_toggle_button_set_state (GTK_TOGGLE_BUTTON (button),                                    auto_save); 	 gtk_box_pack_start (GTK_BOX (vbox), button, FALSE, FALSE, 0); 	 gtk_signal_connect (GTK_OBJECT (button), "toggled", 	                           (GtkSignalFunc) file_prefs_toggle_callback,&auto_save);          gtk_widget_show (button);       */
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Disable cursor updating"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|no_cursor_updating
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|no_cursor_updating
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Show tool tips"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|show_tool_tips
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|show_tool_tips
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Marching ants speed:"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|entry
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|marching_speed
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|entry
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_text_callback
argument_list|,
operator|&
name|marching_speed
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|entry
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Interface"
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
comment|/* Environment */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Environment settings"
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|out_frame
argument_list|,
literal|320
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Conservative memory usage"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|stingy_memory_use
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_stingy_memory_use
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|hbox
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|hbox
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|hbox
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Tile cache size (bytes):"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|label
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|entry
argument_list|,
literal|75
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|old_tile_cache_size
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|hbox
argument_list|)
argument_list|,
name|entry
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_text_callback
argument_list|,
operator|&
name|edit_tile_cache_size
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|entry
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Install colormap (8-bit only)"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|install_cmap
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_install_cmap
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Colormap cycling (8-bit only)"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|cycled_marching_ants
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_toggle_callback
argument_list|,
operator|&
name|edit_cycled_marching_ants
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|button
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|g_visual
operator|->
name|depth
operator|!=
literal|8
condition|)
name|gtk_widget_set_sensitive
argument_list|(
name|GTK_WIDGET
argument_list|(
name|button
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Environment"
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
comment|/* Directories */
name|out_frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Directories settings"
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|out_frame
argument_list|,
literal|320
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|out_frame
argument_list|)
expr_stmt|;
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|out_frame
argument_list|)
argument_list|,
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|table
operator|=
name|gtk_table_new
argument_list|(
name|ndirs
operator|+
literal|1
argument_list|,
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|table
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|table
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|ndirs
condition|;
name|i
operator|++
control|)
block|{
name|label
operator|=
name|gtk_label_new
argument_list|(
name|dirs
index|[
name|i
index|]
operator|.
name|label
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|label
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
name|i
argument_list|,
name|i
operator|+
literal|1
argument_list|,
name|GTK_FILL
argument_list|,
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|entry
argument_list|,
literal|25
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
operator|*
operator|(
name|dirs
index|[
name|i
index|]
operator|.
name|mpath
operator|)
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|file_prefs_string_callback
argument_list|,
name|dirs
index|[
name|i
index|]
operator|.
name|mpath
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|table
argument_list|)
argument_list|,
name|entry
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
name|i
argument_list|,
name|i
operator|+
literal|1
argument_list|,
name|GTK_EXPAND
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|entry
argument_list|)
expr_stmt|;
block|}
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Directories"
argument_list|)
expr_stmt|;
name|gtk_notebook_append_page
argument_list|(
name|GTK_NOTEBOOK
argument_list|(
name|notebook
argument_list|)
argument_list|,
name|out_frame
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|notebook
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|prefs_dlg
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|file_close_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_close_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gdisplay_close_window
argument_list|(
name|gdisp
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|file_quit_cmd_callback (GtkWidget * widget,gpointer client_data)
name|file_quit_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|app_exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_cut_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_cut_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|global_edit_cut
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_copy_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_copy_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|global_edit_copy
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_paste_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_paste_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|global_edit_paste
argument_list|(
name|gdisp
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_paste_into_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_paste_into_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|global_edit_paste
argument_list|(
name|gdisp
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_clear_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_clear_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|edit_clear
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_fill_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_fill_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|edit_fill
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_stroke_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_stroke_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_stroke
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_undo_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_undo_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|undo_pop
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_redo_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_redo_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|undo_redo
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_named_cut_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_named_cut_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|named_edit_cut
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_named_copy_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_named_copy_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|named_edit_copy
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|edit_named_paste_cmd_callback (GtkWidget * widget,gpointer client_data)
name|edit_named_paste_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|named_edit_paste
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_toggle_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_toggle_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|selection_hide
argument_list|(
name|gdisp
operator|->
name|select
argument_list|,
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_invert_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_invert_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_invert
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_all_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_all_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_all
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_none_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_none_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_none
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_float_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_float_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_float
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_sharpen_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_sharpen_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_sharpen
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_border_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_border_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|char
name|initial
index|[
literal|16
index|]
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|sprintf
argument_list|(
name|initial
argument_list|,
literal|"%d"
argument_list|,
name|gimage_mask_border_radius
argument_list|)
expr_stmt|;
name|query_string_box
argument_list|(
literal|"Border Selection"
argument_list|,
literal|"Border selection by:"
argument_list|,
name|initial
argument_list|,
name|gimage_mask_border_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|gdisp
operator|->
name|gimage
operator|->
name|ID
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_feather_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_feather_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|char
name|initial
index|[
literal|16
index|]
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|sprintf
argument_list|(
name|initial
argument_list|,
literal|"%f"
argument_list|,
name|gimage_mask_feather_radius
argument_list|)
expr_stmt|;
name|query_string_box
argument_list|(
literal|"Feather Selection"
argument_list|,
literal|"Feather selection by:"
argument_list|,
name|initial
argument_list|,
name|gimage_mask_feather_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|gdisp
operator|->
name|gimage
operator|->
name|ID
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_grow_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_grow_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|char
name|initial
index|[
literal|16
index|]
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|sprintf
argument_list|(
name|initial
argument_list|,
literal|"%d"
argument_list|,
name|gimage_mask_grow_pixels
argument_list|)
expr_stmt|;
name|query_string_box
argument_list|(
literal|"Grow Selection"
argument_list|,
literal|"Grow selection by:"
argument_list|,
name|initial
argument_list|,
name|gimage_mask_grow_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|gdisp
operator|->
name|gimage
operator|->
name|ID
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_shrink_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_shrink_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|char
name|initial
index|[
literal|16
index|]
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|sprintf
argument_list|(
name|initial
argument_list|,
literal|"%d"
argument_list|,
name|gimage_mask_shrink_pixels
argument_list|)
expr_stmt|;
name|query_string_box
argument_list|(
literal|"Shrink Selection"
argument_list|,
literal|"Shrink selection by:"
argument_list|,
name|initial
argument_list|,
name|gimage_mask_shrink_callback
argument_list|,
operator|(
name|gpointer
operator|)
name|gdisp
operator|->
name|gimage
operator|->
name|ID
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_by_color_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_by_color_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|BY_COLOR_SELECT
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|by_color_select_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|select_save_cmd_callback (GtkWidget * widget,gpointer client_data)
name|select_save_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_save
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoomin_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_zoomin_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|change_scale
argument_list|(
name|gdisp
argument_list|,
name|ZOOMIN
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoomout_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_zoomout_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|change_scale
argument_list|(
name|gdisp
argument_list|,
name|ZOOMOUT
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|view_zoom_val (GtkWidget * widget,gpointer client_data,int val)
name|view_zoom_val
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|,
name|int
name|val
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|change_scale
argument_list|(
name|gdisp
argument_list|,
name|val
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_16_1_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_16_1_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|1601
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_8_1_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_8_1_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|801
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_4_1_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_4_1_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|401
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_2_1_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_2_1_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|201
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_1_1_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_1_1_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|101
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_1_2_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_1_2_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|102
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_1_4_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_1_4_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|104
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_1_8_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_1_8_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|108
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_zoom_1_16_callback (GtkWidget * widget,gpointer client_data)
name|view_zoom_1_16_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|view_zoom_val
argument_list|(
name|widget
argument_list|,
name|client_data
argument_list|,
literal|116
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_window_info_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_window_info_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
name|gdisp
operator|->
name|window_info_dialog
condition|)
name|gdisp
operator|->
name|window_info_dialog
operator|=
name|info_window_create
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|info_dialog_popup
argument_list|(
name|gdisp
operator|->
name|window_info_dialog
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_toggle_rulers_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_toggle_rulers_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
comment|/* This routine use promiscuous knowledge of gtk internals    *  in order to hide and show the rulers "smoothly". This    *  is kludgy and a hack and may break if gtk is changed    *  internally.    */
if|if
condition|(
operator|!
name|GTK_CHECK_MENU_ITEM
argument_list|(
name|widget
argument_list|)
operator|->
name|active
condition|)
block|{
if|if
condition|(
name|GTK_WIDGET_VISIBLE
argument_list|(
name|gdisp
operator|->
name|origin
argument_list|)
condition|)
block|{
name|gtk_widget_unmap
argument_list|(
name|gdisp
operator|->
name|origin
argument_list|)
expr_stmt|;
name|gtk_widget_unmap
argument_list|(
name|gdisp
operator|->
name|hrule
argument_list|)
expr_stmt|;
name|gtk_widget_unmap
argument_list|(
name|gdisp
operator|->
name|vrule
argument_list|)
expr_stmt|;
name|GTK_WIDGET_UNSET_FLAGS
argument_list|(
name|gdisp
operator|->
name|origin
argument_list|,
name|GTK_VISIBLE
argument_list|)
expr_stmt|;
name|GTK_WIDGET_UNSET_FLAGS
argument_list|(
name|gdisp
operator|->
name|hrule
argument_list|,
name|GTK_VISIBLE
argument_list|)
expr_stmt|;
name|GTK_WIDGET_UNSET_FLAGS
argument_list|(
name|gdisp
operator|->
name|vrule
argument_list|,
name|GTK_VISIBLE
argument_list|)
expr_stmt|;
name|gtk_widget_queue_resize
argument_list|(
name|GTK_WIDGET
argument_list|(
name|gdisp
operator|->
name|origin
operator|->
name|parent
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
operator|!
name|GTK_WIDGET_VISIBLE
argument_list|(
name|gdisp
operator|->
name|origin
argument_list|)
condition|)
block|{
name|gtk_widget_map
argument_list|(
name|gdisp
operator|->
name|origin
argument_list|)
expr_stmt|;
name|gtk_widget_map
argument_list|(
name|gdisp
operator|->
name|hrule
argument_list|)
expr_stmt|;
name|gtk_widget_map
argument_list|(
name|gdisp
operator|->
name|vrule
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|gdisp
operator|->
name|origin
argument_list|,
name|GTK_VISIBLE
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|gdisp
operator|->
name|hrule
argument_list|,
name|GTK_VISIBLE
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|gdisp
operator|->
name|vrule
argument_list|,
name|GTK_VISIBLE
argument_list|)
expr_stmt|;
name|gtk_widget_queue_resize
argument_list|(
name|GTK_WIDGET
argument_list|(
name|gdisp
operator|->
name|origin
operator|->
name|parent
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
DECL|function|view_toggle_guides_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_toggle_guides_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|int
name|old_val
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|old_val
operator|=
name|gdisp
operator|->
name|draw_guides
expr_stmt|;
name|gdisp
operator|->
name|draw_guides
operator|=
name|GTK_CHECK_MENU_ITEM
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
if|if
condition|(
operator|(
name|old_val
operator|!=
name|gdisp
operator|->
name|draw_guides
operator|)
operator|&&
name|gdisp
operator|->
name|gimage
operator|->
name|guides
condition|)
block|{
name|gdisplay_expose_full
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|view_snap_to_guides_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_snap_to_guides_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gdisp
operator|->
name|snap_to_guides
operator|=
name|GTK_CHECK_MENU_ITEM
argument_list|(
name|widget
argument_list|)
operator|->
name|active
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_new_view_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_new_view_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gdisplay_new_view
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|view_shrink_wrap_cmd_callback (GtkWidget * widget,gpointer client_data)
name|view_shrink_wrap_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
if|if
condition|(
name|gdisp
condition|)
name|shrink_wrap_display
argument_list|(
name|gdisp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_equalize_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_equalize_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|image_equalize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_invert_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_invert_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|image_invert
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_posterize_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_posterize_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|POSTERIZE
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|posterize_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_threshold_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_threshold_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|THRESHOLD
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|threshold_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_color_balance_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_color_balance_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|COLOR_BALANCE
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|color_balance_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_brightness_contrast_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_brightness_contrast_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|BRIGHTNESS_CONTRAST
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|brightness_contrast_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_hue_saturation_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_hue_saturation_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|HUE_SATURATION
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|hue_saturation_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_curves_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_curves_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|CURVES
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|curves_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_levels_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_levels_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|LEVELS
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|levels_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_desaturate_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_desaturate_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|image_desaturate
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|channel_ops_duplicate_cmd_callback (GtkWidget * widget,gpointer client_data)
name|channel_ops_duplicate_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|channel_ops_duplicate
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|channel_ops_offset_cmd_callback (GtkWidget * widget,gpointer client_data)
name|channel_ops_offset_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|channel_ops_offset
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_convert_rgb_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_convert_rgb_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|convert_to_rgb
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_convert_grayscale_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_convert_grayscale_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|convert_to_grayscale
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_convert_indexed_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_convert_indexed_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|convert_to_indexed
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_resize_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_resize_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
specifier|static
name|ActionAreaItem
name|action_items
index|[
literal|2
index|]
init|=
block|{
block|{
literal|"OK"
block|,
name|image_resize_callback
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"Cancel"
block|,
name|image_cancel_callback
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|ImageResize
modifier|*
name|image_resize
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
comment|/*  the ImageResize structure  */
name|image_resize
operator|=
operator|(
name|ImageResize
operator|*
operator|)
name|g_malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|ImageResize
argument_list|)
argument_list|)
expr_stmt|;
name|image_resize
operator|->
name|gimage_id
operator|=
name|gdisp
operator|->
name|gimage
operator|->
name|ID
expr_stmt|;
name|image_resize
operator|->
name|resize
operator|=
name|resize_widget_new
argument_list|(
name|ResizeWidget
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|width
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|height
argument_list|)
expr_stmt|;
comment|/*  the dialog  */
name|image_resize
operator|->
name|shell
operator|=
name|gtk_dialog_new
argument_list|()
expr_stmt|;
name|gtk_window_set_wmclass
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
argument_list|,
literal|"image_resize"
argument_list|,
literal|"Gimp"
argument_list|)
expr_stmt|;
name|gtk_window_set_title
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
argument_list|,
literal|"Image Resize"
argument_list|)
expr_stmt|;
name|gtk_window_set_policy
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_window_position
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
argument_list|,
name|GTK_WIN_POS_MOUSE
argument_list|)
expr_stmt|;
comment|/* handle the wm close signal */
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|image_delete_callback
argument_list|)
argument_list|,
name|image_resize
argument_list|)
expr_stmt|;
comment|/*  the main vbox  */
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
operator|->
name|vbox
argument_list|)
argument_list|,
name|vbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|image_resize
operator|->
name|resize
operator|->
name|resize_widget
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|action_items
index|[
literal|0
index|]
operator|.
name|user_data
operator|=
name|image_resize
expr_stmt|;
name|action_items
index|[
literal|1
index|]
operator|.
name|user_data
operator|=
name|image_resize
expr_stmt|;
name|build_action_area
argument_list|(
name|GTK_DIALOG
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
argument_list|,
name|action_items
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|image_resize
operator|->
name|resize
operator|->
name|resize_widget
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_scale_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_scale_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
specifier|static
name|ActionAreaItem
name|action_items
index|[
literal|2
index|]
init|=
block|{
block|{
literal|"OK"
block|,
name|image_scale_callback
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"Cancel"
block|,
name|image_cancel_callback
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|ImageResize
modifier|*
name|image_scale
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
comment|/*  the ImageResize structure  */
name|image_scale
operator|=
operator|(
name|ImageResize
operator|*
operator|)
name|g_malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|ImageResize
argument_list|)
argument_list|)
expr_stmt|;
name|image_scale
operator|->
name|gimage_id
operator|=
name|gdisp
operator|->
name|gimage
operator|->
name|ID
expr_stmt|;
name|image_scale
operator|->
name|resize
operator|=
name|resize_widget_new
argument_list|(
name|ScaleWidget
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|width
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|height
argument_list|)
expr_stmt|;
comment|/*  the dialog  */
name|image_scale
operator|->
name|shell
operator|=
name|gtk_dialog_new
argument_list|()
expr_stmt|;
name|gtk_window_set_wmclass
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
argument_list|,
literal|"image_scale"
argument_list|,
literal|"Gimp"
argument_list|)
expr_stmt|;
name|gtk_window_set_title
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
argument_list|,
literal|"Image Scale"
argument_list|)
expr_stmt|;
name|gtk_window_set_policy
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_window_position
argument_list|(
name|GTK_WINDOW
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
argument_list|,
name|GTK_WIN_POS_MOUSE
argument_list|)
expr_stmt|;
comment|/* handle the wm close signal */
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
argument_list|,
literal|"delete_event"
argument_list|,
name|GTK_SIGNAL_FUNC
argument_list|(
name|image_delete_callback
argument_list|)
argument_list|,
name|image_scale
argument_list|)
expr_stmt|;
comment|/*  the main vbox  */
name|vbox
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
operator|->
name|vbox
argument_list|)
argument_list|,
name|vbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|vbox
argument_list|)
argument_list|,
name|image_scale
operator|->
name|resize
operator|->
name|resize_widget
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|action_items
index|[
literal|0
index|]
operator|.
name|user_data
operator|=
name|image_scale
expr_stmt|;
name|action_items
index|[
literal|1
index|]
operator|.
name|user_data
operator|=
name|image_scale
expr_stmt|;
name|build_action_area
argument_list|(
name|GTK_DIALOG
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
argument_list|,
name|action_items
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|image_scale
operator|->
name|resize
operator|->
name|resize_widget
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|vbox
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|image_histogram_cmd_callback (GtkWidget * widget,gpointer client_data)
name|image_histogram_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|int
operator|)
name|HISTOGRAM
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|histogram_tool_initialize
argument_list|(
operator|(
name|void
operator|*
operator|)
name|gdisp
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|layers_raise_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_raise_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_raise_layer
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|active_layer
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|layers_lower_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_lower_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_lower_layer
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|active_layer
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_decl_stmt
DECL|variable|value
name|int
name|value
decl_stmt|;
end_decl_stmt

begin_function
name|void
DECL|function|layers_anchor_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_anchor_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|floating_sel_anchor
argument_list|(
name|gimage_get_active_layer
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|layers_merge_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_merge_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|layers_dialog_layer_merge_query
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|layers_flatten_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_flatten_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_flatten
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|layers_alpha_select_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_alpha_select_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_layer_alpha
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|active_layer
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|layers_mask_select_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_mask_select_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|gimage_mask_layer_mask
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|,
name|gdisp
operator|->
name|gimage
operator|->
name|active_layer
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|layers_add_alpha_channel_cmd_callback (GtkWidget * widget,gpointer client_data)
name|layers_add_alpha_channel_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|layer_add_alpha
argument_list|(
name|gdisp
operator|->
name|gimage
operator|->
name|active_layer
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|tools_default_colors_cmd_callback (GtkWidget * widget,gpointer client_data)
name|tools_default_colors_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|palette_set_default_colors
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|tools_swap_colors_cmd_callback (GtkWidget * widget,gpointer client_data)
name|tools_swap_colors_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|palette_swap_colors
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|tools_select_cmd_callback (GtkWidget * widget,gpointer client_data)
name|tools_select_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
comment|/*  Activate the approriate widget  */
name|gtk_widget_activate
argument_list|(
name|tool_widgets
index|[
name|tool_info
index|[
operator|(
name|long
operator|)
name|client_data
index|]
operator|.
name|toolbar_position
index|]
argument_list|)
expr_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|active_tool
operator|->
name|drawable
operator|=
name|gimage_active_drawable
argument_list|(
name|gdisp
operator|->
name|gimage
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|filters_repeat_cmd_callback (GtkWidget * widget,gpointer client_data)
name|filters_repeat_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|plug_in_repeat
argument_list|(
operator|(
name|long
operator|)
name|client_data
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_brushes_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_brushes_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|create_brush_dialog
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_patterns_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_patterns_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|create_pattern_dialog
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_palette_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_palette_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|palette_create
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_gradient_editor_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_gradient_editor_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|grad_create_gradient_editor
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/* dialogs_gradient_editor_cmd_callback */
end_comment

begin_function
name|void
DECL|function|dialogs_lc_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_lc_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|lc_dialog_create
argument_list|(
name|gdisp
operator|->
name|gimage
operator|->
name|ID
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_indexed_palette_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_indexed_palette_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|GDisplay
modifier|*
name|gdisp
decl_stmt|;
name|gdisp
operator|=
name|gdisplay_active
argument_list|()
expr_stmt|;
name|indexed_palette_create
argument_list|(
name|gdisp
operator|->
name|gimage
operator|->
name|ID
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_tools_options_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_tools_options_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|tools_options_dialog_show
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_input_devices_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_input_devices_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|create_input_dialog
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|dialogs_device_status_cmd_callback (GtkWidget * widget,gpointer client_data)
name|dialogs_device_status_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|create_device_status
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|about_dialog_cmd_callback (GtkWidget * widget,gpointer client_data)
name|about_dialog_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|about_dialog_create
argument_list|(
name|FALSE
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|tips_dialog_cmd_callback (GtkWidget * widget,gpointer client_data)
name|tips_dialog_cmd_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|tips_dialog_create
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/****************************************************/
end_comment

begin_comment
comment|/**           LOCAL FUNCTIONS                      **/
end_comment

begin_comment
comment|/****************************************************/
end_comment

begin_comment
comment|/*********************/
end_comment

begin_comment
comment|/*  Local functions  */
end_comment

begin_comment
comment|/*********************/
end_comment

begin_function
specifier|static
name|void
DECL|function|image_resize_callback (GtkWidget * w,gpointer client_data)
name|image_resize_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|ImageResize
modifier|*
name|image_resize
decl_stmt|;
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|image_resize
operator|=
operator|(
name|ImageResize
operator|*
operator|)
name|client_data
expr_stmt|;
if|if
condition|(
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
name|image_resize
operator|->
name|gimage_id
argument_list|)
operator|)
operator|!=
name|NULL
condition|)
block|{
if|if
condition|(
name|image_resize
operator|->
name|resize
operator|->
name|width
operator|>
literal|0
operator|&&
name|image_resize
operator|->
name|resize
operator|->
name|height
operator|>
literal|0
condition|)
block|{
name|gimage_resize
argument_list|(
name|gimage
argument_list|,
name|image_resize
operator|->
name|resize
operator|->
name|width
argument_list|,
name|image_resize
operator|->
name|resize
operator|->
name|height
argument_list|,
name|image_resize
operator|->
name|resize
operator|->
name|off_x
argument_list|,
name|image_resize
operator|->
name|resize
operator|->
name|off_y
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
else|else
block|{
name|g_message
argument_list|(
literal|"Resize Error: Both width and height must be greater than zero."
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
name|gtk_widget_destroy
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
expr_stmt|;
name|resize_widget_free
argument_list|(
name|image_resize
operator|->
name|resize
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|image_resize
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|image_scale_callback (GtkWidget * w,gpointer client_data)
name|image_scale_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|ImageResize
modifier|*
name|image_scale
decl_stmt|;
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|image_scale
operator|=
operator|(
name|ImageResize
operator|*
operator|)
name|client_data
expr_stmt|;
if|if
condition|(
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
name|image_scale
operator|->
name|gimage_id
argument_list|)
operator|)
operator|!=
name|NULL
condition|)
block|{
if|if
condition|(
name|image_scale
operator|->
name|resize
operator|->
name|width
operator|>
literal|0
operator|&&
name|image_scale
operator|->
name|resize
operator|->
name|height
operator|>
literal|0
condition|)
block|{
name|gimage_scale
argument_list|(
name|gimage
argument_list|,
name|image_scale
operator|->
name|resize
operator|->
name|width
argument_list|,
name|image_scale
operator|->
name|resize
operator|->
name|height
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
else|else
block|{
name|g_message
argument_list|(
literal|"Scale Error: Both width and height must be greater than zero."
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
name|gtk_widget_destroy
argument_list|(
name|image_scale
operator|->
name|shell
argument_list|)
expr_stmt|;
name|resize_widget_free
argument_list|(
name|image_scale
operator|->
name|resize
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|image_scale
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|gint
DECL|function|image_delete_callback (GtkWidget * w,GdkEvent * e,gpointer client_data)
name|image_delete_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|GdkEvent
modifier|*
name|e
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|image_cancel_callback
argument_list|(
name|w
argument_list|,
name|client_data
argument_list|)
expr_stmt|;
return|return
name|TRUE
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|image_cancel_callback (GtkWidget * w,gpointer client_data)
name|image_cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|gpointer
name|client_data
parameter_list|)
block|{
name|ImageResize
modifier|*
name|image_resize
decl_stmt|;
name|image_resize
operator|=
operator|(
name|ImageResize
operator|*
operator|)
name|client_data
expr_stmt|;
name|gtk_widget_destroy
argument_list|(
name|image_resize
operator|->
name|shell
argument_list|)
expr_stmt|;
name|resize_widget_free
argument_list|(
name|image_resize
operator|->
name|resize
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|image_resize
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimage_mask_feather_callback (GtkWidget * w,gpointer client_data,gpointer call_data)
name|gimage_mask_feather_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|gpointer
name|client_data
parameter_list|,
name|gpointer
name|call_data
parameter_list|)
block|{
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|double
name|feather_radius
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
operator|(
name|int
operator|)
name|client_data
argument_list|)
operator|)
condition|)
return|return;
name|feather_radius
operator|=
name|atof
argument_list|(
name|call_data
argument_list|)
expr_stmt|;
name|gimage_mask_feather
argument_list|(
name|gimage
argument_list|,
name|feather_radius
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimage_mask_border_callback (GtkWidget * w,gpointer client_data,gpointer call_data)
name|gimage_mask_border_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|gpointer
name|client_data
parameter_list|,
name|gpointer
name|call_data
parameter_list|)
block|{
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|int
name|border_radius
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
operator|(
name|int
operator|)
name|client_data
argument_list|)
operator|)
condition|)
return|return;
name|border_radius
operator|=
name|atoi
argument_list|(
name|call_data
argument_list|)
expr_stmt|;
name|gimage_mask_border
argument_list|(
name|gimage
argument_list|,
name|border_radius
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimage_mask_grow_callback (GtkWidget * w,gpointer client_data,gpointer call_data)
name|gimage_mask_grow_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|gpointer
name|client_data
parameter_list|,
name|gpointer
name|call_data
parameter_list|)
block|{
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|int
name|grow_pixels
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
operator|(
name|int
operator|)
name|client_data
argument_list|)
operator|)
condition|)
return|return;
name|grow_pixels
operator|=
name|atoi
argument_list|(
name|call_data
argument_list|)
expr_stmt|;
name|gimage_mask_grow
argument_list|(
name|gimage
argument_list|,
name|grow_pixels
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimage_mask_shrink_callback (GtkWidget * w,gpointer client_data,gpointer call_data)
name|gimage_mask_shrink_callback
parameter_list|(
name|GtkWidget
modifier|*
name|w
parameter_list|,
name|gpointer
name|client_data
parameter_list|,
name|gpointer
name|call_data
parameter_list|)
block|{
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|int
name|shrink_pixels
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
operator|(
name|int
operator|)
name|client_data
argument_list|)
operator|)
condition|)
return|return;
name|shrink_pixels
operator|=
name|atoi
argument_list|(
name|call_data
argument_list|)
expr_stmt|;
name|gimage_mask_shrink
argument_list|(
name|gimage
argument_list|,
name|shrink_pixels
argument_list|)
expr_stmt|;
name|gdisplays_flush
argument_list|()
expr_stmt|;
block|}
end_function

end_unit

