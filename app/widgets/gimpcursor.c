begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* GIMP - The GNU Image Manipulation Program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * This program is free software: you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 3 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program.  If not, see<http://www.gnu.org/licenses/>.  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<gtk/gtk.h>
end_include

begin_include
include|#
directive|include
file|"widgets-types.h"
end_include

begin_include
include|#
directive|include
file|"gimpcursor.h"
end_include

begin_include
include|#
directive|include
file|"cursors/gimp-tool-cursors.h"
end_include

begin_comment
comment|/*  standard gimp cursors  */
end_comment

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-none.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-mouse.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-mouse-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-move.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-move-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-crosshair.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-crosshair-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-crosshair-small.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-crosshair-small-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-bad.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-bad-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-zoom.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-zoom-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-color-picker.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-color-picker-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-top-left.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-top-left-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-top-right.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-top-right-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-bottom-left.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-bottom-left-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-bottom-right.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-corner-bottom-right-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-top.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-top-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-left.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-left-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-right.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-right-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-bottom.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/cursor-side-bottom-mask.xbm"
end_include

begin_comment
comment|/*  tool cursors  */
end_comment

begin_include
include|#
directive|include
file|"cursors/xbm/tool-rect-select.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-rect-select-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-ellipse-select.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-ellipse-select-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-free-select.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-free-select-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-polygon-select.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-polygon-select-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-fuzzy-select.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-fuzzy-select-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths-anchor.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths-anchor-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths-control.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths-control-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths-segment.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paths-segment-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-iscissors.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-iscissors-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-move.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-move-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-zoom.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-zoom-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-crop.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-crop-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-resize.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-resize-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-rotate.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-rotate-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-shear.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-shear-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-perspective.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-perspective-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-flip-horizontal.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-flip-horizontal-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-flip-vertical.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-flip-vertical-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-text.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-text-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-color-picker.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-color-picker-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-bucket-fill.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-bucket-fill-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-blend.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-blend-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-pencil.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-pencil-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paintbrush.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-paintbrush-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-eraser.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-eraser-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-airbrush.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-airbrush-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-clone.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-clone-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-heal.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-heal-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-blur.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-blur-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-ink.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-ink-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-dodge.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-dodge-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-burn.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-burn-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-smudge.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-smudge-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-measure.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-measure-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-hand.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/tool-hand-mask.xbm"
end_include

begin_comment
comment|/*  cursor modifiers  */
end_comment

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-bad.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-bad-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-plus.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-plus-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-minus.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-minus-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-intersect.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-intersect-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-move.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-move-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-resize.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-resize-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-control.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-control-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-anchor.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-anchor-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-foreground.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-foreground-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-background.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-background-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-pattern.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-pattern-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-join.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-join-mask.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-select.xbm"
end_include

begin_include
include|#
directive|include
file|"cursors/xbm/modifier-select-mask.xbm"
end_include

begin_typedef
DECL|typedef|GimpCursor
typedef|typedef
name|struct
name|_GimpCursor
name|GimpCursor
typedef|;
end_typedef

begin_struct
DECL|struct|_GimpCursor
struct|struct
name|_GimpCursor
block|{
DECL|member|bits
specifier|const
name|guchar
modifier|*
name|bits
decl_stmt|;
DECL|member|mask_bits
specifier|const
name|guchar
modifier|*
name|mask_bits
decl_stmt|;
DECL|member|width
DECL|member|height
specifier|const
name|gint
name|width
decl_stmt|,
name|height
decl_stmt|;
DECL|member|x_hot
DECL|member|y_hot
specifier|const
name|gint
name|x_hot
decl_stmt|,
name|y_hot
decl_stmt|;
DECL|member|pixbuf_data
specifier|const
name|guint8
modifier|*
name|pixbuf_data
decl_stmt|;
DECL|member|bitmap
name|GdkBitmap
modifier|*
name|bitmap
decl_stmt|;
DECL|member|mask
name|GdkBitmap
modifier|*
name|mask
decl_stmt|;
DECL|member|pixbuf
name|GdkPixbuf
modifier|*
name|pixbuf
decl_stmt|;
block|}
struct|;
end_struct

begin_decl_stmt
DECL|variable|gimp_cursors
specifier|static
name|GimpCursor
name|gimp_cursors
index|[]
init|=
block|{
comment|/* these have to match up with enum GimpCursorType in widgets-enums.h */
block|{
name|cursor_none_bits
block|,
name|cursor_none_bits
block|,
name|cursor_none_width
block|,
name|cursor_none_height
block|,
name|cursor_none_x_hot
block|,
name|cursor_none_y_hot
block|,
name|cursor_none
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_mouse_bits
block|,
name|cursor_mouse_mask_bits
block|,
name|cursor_mouse_width
block|,
name|cursor_mouse_height
block|,
name|cursor_mouse_x_hot
block|,
name|cursor_mouse_y_hot
block|,
name|cursor_mouse
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_crosshair_bits
block|,
name|cursor_crosshair_mask_bits
block|,
name|cursor_crosshair_width
block|,
name|cursor_crosshair_height
block|,
name|cursor_crosshair_x_hot
block|,
name|cursor_crosshair_y_hot
block|,
name|cursor_crosshair
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_crosshair_small_bits
block|,
name|cursor_crosshair_small_mask_bits
block|,
name|cursor_crosshair_small_width
block|,
name|cursor_crosshair_small_height
block|,
name|cursor_crosshair_small_x_hot
block|,
name|cursor_crosshair_small_y_hot
block|,
name|cursor_crosshair_small
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_bad_bits
block|,
name|cursor_bad_mask_bits
block|,
name|cursor_bad_width
block|,
name|cursor_bad_height
block|,
name|cursor_bad_x_hot
block|,
name|cursor_bad_y_hot
block|,
name|cursor_bad
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_move_bits
block|,
name|cursor_move_mask_bits
block|,
name|cursor_move_width
block|,
name|cursor_move_height
block|,
name|cursor_move_x_hot
block|,
name|cursor_move_y_hot
block|,
name|cursor_move
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_zoom_bits
block|,
name|cursor_zoom_mask_bits
block|,
name|cursor_zoom_width
block|,
name|cursor_zoom_height
block|,
name|cursor_zoom_x_hot
block|,
name|cursor_zoom_y_hot
block|,
name|cursor_zoom
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_color_picker_bits
block|,
name|cursor_color_picker_mask_bits
block|,
name|cursor_color_picker_width
block|,
name|cursor_color_picker_height
block|,
name|cursor_color_picker_x_hot
block|,
name|cursor_color_picker_y_hot
block|,
name|cursor_color_picker
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_corner_top_left_bits
block|,
name|cursor_corner_top_left_mask_bits
block|,
name|cursor_corner_top_left_width
block|,
name|cursor_corner_top_left_height
block|,
name|cursor_corner_top_left_x_hot
block|,
name|cursor_corner_top_left_y_hot
block|,
name|cursor_corner_top_left
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_corner_top_right_bits
block|,
name|cursor_corner_top_right_mask_bits
block|,
name|cursor_corner_top_right_width
block|,
name|cursor_corner_top_right_height
block|,
name|cursor_corner_top_right_x_hot
block|,
name|cursor_corner_top_right_y_hot
block|,
name|cursor_corner_top_right
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_corner_bottom_left_bits
block|,
name|cursor_corner_bottom_left_mask_bits
block|,
name|cursor_corner_bottom_left_width
block|,
name|cursor_corner_bottom_left_height
block|,
name|cursor_corner_bottom_left_x_hot
block|,
name|cursor_corner_bottom_left_y_hot
block|,
name|cursor_corner_bottom_left
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_corner_bottom_right_bits
block|,
name|cursor_corner_bottom_right_mask_bits
block|,
name|cursor_corner_bottom_right_width
block|,
name|cursor_corner_bottom_right_height
block|,
name|cursor_corner_bottom_right_x_hot
block|,
name|cursor_corner_bottom_right_y_hot
block|,
name|cursor_corner_bottom_right
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_side_top_bits
block|,
name|cursor_side_top_mask_bits
block|,
name|cursor_side_top_width
block|,
name|cursor_side_top_height
block|,
name|cursor_side_top_x_hot
block|,
name|cursor_side_top_y_hot
block|,
name|cursor_side_top
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_side_left_bits
block|,
name|cursor_side_left_mask_bits
block|,
name|cursor_side_left_width
block|,
name|cursor_side_left_height
block|,
name|cursor_side_left_x_hot
block|,
name|cursor_side_left_y_hot
block|,
name|cursor_side_left
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_side_right_bits
block|,
name|cursor_side_right_mask_bits
block|,
name|cursor_side_right_width
block|,
name|cursor_side_right_height
block|,
name|cursor_side_right_x_hot
block|,
name|cursor_side_right_y_hot
block|,
name|cursor_side_right
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|cursor_side_bottom_bits
block|,
name|cursor_side_bottom_mask_bits
block|,
name|cursor_side_bottom_width
block|,
name|cursor_side_bottom_height
block|,
name|cursor_side_bottom_x_hot
block|,
name|cursor_side_bottom_y_hot
block|,
name|cursor_side_bottom
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_tool_cursors
specifier|static
name|GimpCursor
name|gimp_tool_cursors
index|[]
init|=
block|{
comment|/* these have to match up with enum GimpToolCursorType in widgets-enums.h */
block|{
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_rect_select_bits
block|,
name|tool_rect_select_mask_bits
block|,
name|tool_rect_select_width
block|,
name|tool_rect_select_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_rect_select
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_ellipse_select_bits
block|,
name|tool_ellipse_select_mask_bits
block|,
name|tool_ellipse_select_width
block|,
name|tool_ellipse_select_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_ellipse_select
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_free_select_bits
block|,
name|tool_free_select_mask_bits
block|,
name|tool_free_select_width
block|,
name|tool_free_select_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_free_select
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_polygon_select_bits
block|,
name|tool_polygon_select_mask_bits
block|,
name|tool_polygon_select_width
block|,
name|tool_polygon_select_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_polygon_select
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_fuzzy_select_bits
block|,
name|tool_fuzzy_select_mask_bits
block|,
name|tool_fuzzy_select_width
block|,
name|tool_fuzzy_select_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_fuzzy_select
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_paths_bits
block|,
name|tool_paths_mask_bits
block|,
name|tool_paths_width
block|,
name|tool_paths_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_paths
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_paths_anchor_bits
block|,
name|tool_paths_anchor_mask_bits
block|,
name|tool_paths_anchor_width
block|,
name|tool_paths_anchor_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_paths_anchor
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_paths_control_bits
block|,
name|tool_paths_control_mask_bits
block|,
name|tool_paths_control_width
block|,
name|tool_paths_control_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_paths_control
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_paths_segment_bits
block|,
name|tool_paths_segment_mask_bits
block|,
name|tool_paths_segment_width
block|,
name|tool_paths_segment_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_paths_segment
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_iscissors_bits
block|,
name|tool_iscissors_mask_bits
block|,
name|tool_iscissors_width
block|,
name|tool_iscissors_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_iscissors
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_move_bits
block|,
name|tool_move_mask_bits
block|,
name|tool_move_width
block|,
name|tool_move_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_move
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_zoom_bits
block|,
name|tool_zoom_mask_bits
block|,
name|tool_zoom_width
block|,
name|tool_zoom_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_zoom
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_crop_bits
block|,
name|tool_crop_mask_bits
block|,
name|tool_crop_width
block|,
name|tool_crop_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_crop
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_resize_bits
block|,
name|tool_resize_mask_bits
block|,
name|tool_resize_width
block|,
name|tool_resize_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_resize
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_rotate_bits
block|,
name|tool_rotate_mask_bits
block|,
name|tool_rotate_width
block|,
name|tool_rotate_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_rotate
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_shear_bits
block|,
name|tool_shear_mask_bits
block|,
name|tool_shear_width
block|,
name|tool_shear_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_shear
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_perspective_bits
block|,
name|tool_perspective_mask_bits
block|,
name|tool_perspective_width
block|,
name|tool_perspective_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_perspective
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_flip_horizontal_bits
block|,
name|tool_flip_horizontal_mask_bits
block|,
name|tool_flip_horizontal_width
block|,
name|tool_flip_horizontal_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_flip_horizontal
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_flip_vertical_bits
block|,
name|tool_flip_vertical_mask_bits
block|,
name|tool_flip_vertical_width
block|,
name|tool_flip_vertical_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_flip_vertical
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_text_bits
block|,
name|tool_text_mask_bits
block|,
name|tool_text_width
block|,
name|tool_text_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_text
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_color_picker_bits
block|,
name|tool_color_picker_mask_bits
block|,
name|tool_color_picker_width
block|,
name|tool_color_picker_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_color_picker
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_bucket_fill_bits
block|,
name|tool_bucket_fill_mask_bits
block|,
name|tool_bucket_fill_width
block|,
name|tool_bucket_fill_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_bucket_fill
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_blend_bits
block|,
name|tool_blend_mask_bits
block|,
name|tool_blend_width
block|,
name|tool_blend_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_blend
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_pencil_bits
block|,
name|tool_pencil_mask_bits
block|,
name|tool_pencil_width
block|,
name|tool_pencil_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_pencil
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_paintbrush_bits
block|,
name|tool_paintbrush_mask_bits
block|,
name|tool_paintbrush_width
block|,
name|tool_paintbrush_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_paintbrush
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_airbrush_bits
block|,
name|tool_airbrush_mask_bits
block|,
name|tool_airbrush_width
block|,
name|tool_airbrush_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_airbrush
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_ink_bits
block|,
name|tool_ink_mask_bits
block|,
name|tool_ink_width
block|,
name|tool_ink_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_ink
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_clone_bits
block|,
name|tool_clone_mask_bits
block|,
name|tool_clone_width
block|,
name|tool_clone_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_clone
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_heal_bits
block|,
name|tool_heal_mask_bits
block|,
name|tool_heal_width
block|,
name|tool_heal_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_heal
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_eraser_bits
block|,
name|tool_eraser_mask_bits
block|,
name|tool_eraser_width
block|,
name|tool_eraser_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_eraser
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_smudge_bits
block|,
name|tool_smudge_mask_bits
block|,
name|tool_smudge_width
block|,
name|tool_smudge_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_smudge
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_blur_bits
block|,
name|tool_blur_mask_bits
block|,
name|tool_blur_width
block|,
name|tool_blur_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_blur
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_dodge_bits
block|,
name|tool_dodge_mask_bits
block|,
name|tool_dodge_width
block|,
name|tool_dodge_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_dodge
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_burn_bits
block|,
name|tool_burn_mask_bits
block|,
name|tool_burn_width
block|,
name|tool_burn_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_burn
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_measure_bits
block|,
name|tool_measure_mask_bits
block|,
name|tool_measure_width
block|,
name|tool_measure_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_measure
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|tool_hand_bits
block|,
name|tool_hand_mask_bits
block|,
name|tool_hand_width
block|,
name|tool_hand_height
block|,
literal|0
block|,
literal|0
block|,
name|tool_hand
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_cursor_modifiers
specifier|static
name|GimpCursor
name|gimp_cursor_modifiers
index|[]
init|=
block|{
comment|/* these have to match up with enum GimpCursorModifier in widgets-enums.h */
block|{
name|NULL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_bad_bits
block|,
name|modifier_bad_mask_bits
block|,
name|modifier_bad_width
block|,
name|modifier_bad_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_bad
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_plus_bits
block|,
name|modifier_plus_mask_bits
block|,
name|modifier_plus_width
block|,
name|modifier_plus_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_plus
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_minus_bits
block|,
name|modifier_minus_mask_bits
block|,
name|modifier_minus_width
block|,
name|modifier_minus_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_minus
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_intersect_bits
block|,
name|modifier_intersect_mask_bits
block|,
name|modifier_intersect_width
block|,
name|modifier_intersect_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_intersect
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_move_bits
block|,
name|modifier_move_mask_bits
block|,
name|modifier_move_width
block|,
name|modifier_move_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_move
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_resize_bits
block|,
name|modifier_resize_mask_bits
block|,
name|modifier_resize_width
block|,
name|modifier_resize_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_resize
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_control_bits
block|,
name|modifier_control_mask_bits
block|,
name|modifier_control_width
block|,
name|modifier_control_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_control
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_anchor_bits
block|,
name|modifier_anchor_mask_bits
block|,
name|modifier_anchor_width
block|,
name|modifier_anchor_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_anchor
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_foreground_bits
block|,
name|modifier_foreground_mask_bits
block|,
name|modifier_foreground_width
block|,
name|modifier_foreground_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_foreground
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_background_bits
block|,
name|modifier_background_mask_bits
block|,
name|modifier_background_width
block|,
name|modifier_background_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_background
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_pattern_bits
block|,
name|modifier_pattern_mask_bits
block|,
name|modifier_pattern_width
block|,
name|modifier_pattern_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_pattern
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_join_bits
block|,
name|modifier_join_mask_bits
block|,
name|modifier_join_width
block|,
name|modifier_join_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_join
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
name|modifier_select_bits
block|,
name|modifier_select_mask_bits
block|,
name|modifier_select_width
block|,
name|modifier_select_height
block|,
literal|0
block|,
literal|0
block|,
name|modifier_select
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|GdkBitmap
modifier|*
DECL|function|get_cursor_bitmap (GimpCursor * cursor)
name|get_cursor_bitmap
parameter_list|(
name|GimpCursor
modifier|*
name|cursor
parameter_list|)
block|{
if|if
condition|(
operator|!
name|cursor
operator|->
name|bitmap
condition|)
name|cursor
operator|->
name|bitmap
operator|=
name|gdk_bitmap_create_from_data
argument_list|(
name|NULL
argument_list|,
operator|(
specifier|const
name|gchar
operator|*
operator|)
name|cursor
operator|->
name|bits
argument_list|,
name|cursor
operator|->
name|width
argument_list|,
name|cursor
operator|->
name|height
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|cursor
operator|->
name|bitmap
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|cursor
operator|->
name|bitmap
return|;
block|}
end_function

begin_function
specifier|static
name|GdkBitmap
modifier|*
DECL|function|get_cursor_mask (GimpCursor * cursor)
name|get_cursor_mask
parameter_list|(
name|GimpCursor
modifier|*
name|cursor
parameter_list|)
block|{
if|if
condition|(
operator|!
name|cursor
operator|->
name|mask
condition|)
name|cursor
operator|->
name|mask
operator|=
name|gdk_bitmap_create_from_data
argument_list|(
name|NULL
argument_list|,
operator|(
specifier|const
name|gchar
operator|*
operator|)
name|cursor
operator|->
name|mask_bits
argument_list|,
name|cursor
operator|->
name|width
argument_list|,
name|cursor
operator|->
name|height
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|cursor
operator|->
name|mask
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|cursor
operator|->
name|mask
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|GdkPixbuf
modifier|*
DECL|function|get_cursor_pixbuf (GimpCursor * cursor)
name|get_cursor_pixbuf
parameter_list|(
name|GimpCursor
modifier|*
name|cursor
parameter_list|)
block|{
if|if
condition|(
operator|!
name|cursor
operator|->
name|pixbuf
condition|)
name|cursor
operator|->
name|pixbuf
operator|=
name|gdk_pixbuf_new_from_inline
argument_list|(
operator|-
literal|1
argument_list|,
name|cursor
operator|->
name|pixbuf_data
argument_list|,
name|FALSE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|cursor
operator|->
name|pixbuf
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|cursor
operator|->
name|pixbuf
return|;
block|}
end_function

begin_function
name|GdkCursor
modifier|*
DECL|function|gimp_cursor_new (GdkDisplay * display,GimpCursorFormat cursor_format,GimpCursorType cursor_type,GimpToolCursorType tool_cursor,GimpCursorModifier modifier)
name|gimp_cursor_new
parameter_list|(
name|GdkDisplay
modifier|*
name|display
parameter_list|,
name|GimpCursorFormat
name|cursor_format
parameter_list|,
name|GimpCursorType
name|cursor_type
parameter_list|,
name|GimpToolCursorType
name|tool_cursor
parameter_list|,
name|GimpCursorModifier
name|modifier
parameter_list|)
block|{
name|GdkCursor
modifier|*
name|cursor
decl_stmt|;
name|gint
name|width
decl_stmt|;
name|gint
name|height
decl_stmt|;
name|GimpCursor
modifier|*
name|bmcursor
init|=
name|NULL
decl_stmt|;
name|GimpCursor
modifier|*
name|bmmodifier
init|=
name|NULL
decl_stmt|;
name|GimpCursor
modifier|*
name|bmtool
init|=
name|NULL
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|GDK_IS_DISPLAY
argument_list|(
name|display
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|cursor_type
operator|<
name|GIMP_CURSOR_LAST
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|cursor_type
operator|<=
name|GDK_LAST_CURSOR
condition|)
return|return
name|gdk_cursor_new_for_display
argument_list|(
name|display
argument_list|,
name|cursor_type
argument_list|)
return|;
name|g_return_val_if_fail
argument_list|(
name|cursor_type
operator|>=
name|GIMP_CURSOR_NONE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/*  disallow the small tool cursor with some cursors    */
if|if
condition|(
name|cursor_type
operator|<=
name|GIMP_CURSOR_NONE
operator|||
name|cursor_type
operator|==
name|GIMP_CURSOR_CROSSHAIR
operator|||
name|cursor_type
operator|==
name|GIMP_CURSOR_ZOOM
operator|||
name|cursor_type
operator|==
name|GIMP_CURSOR_COLOR_PICKER
operator|||
name|cursor_type
operator|>=
name|GIMP_CURSOR_LAST
condition|)
block|{
name|tool_cursor
operator|=
name|GIMP_TOOL_CURSOR_NONE
expr_stmt|;
block|}
comment|/*  don't allow anything with the empty cursor    */
if|if
condition|(
name|cursor_type
operator|==
name|GIMP_CURSOR_NONE
condition|)
block|{
name|tool_cursor
operator|=
name|GIMP_TOOL_CURSOR_NONE
expr_stmt|;
name|modifier
operator|=
name|GIMP_CURSOR_MODIFIER_NONE
expr_stmt|;
block|}
comment|/*  some more sanity checks    */
if|if
condition|(
name|cursor_type
operator|==
name|GIMP_CURSOR_MOVE
operator|&&
name|modifier
operator|==
name|GIMP_CURSOR_MODIFIER_MOVE
condition|)
block|{
name|modifier
operator|=
name|GIMP_CURSOR_MODIFIER_NONE
expr_stmt|;
block|}
comment|/*  prepare the main cursor  */
name|cursor_type
operator|-=
name|GIMP_CURSOR_NONE
expr_stmt|;
name|bmcursor
operator|=
operator|&
name|gimp_cursors
index|[
name|cursor_type
index|]
expr_stmt|;
comment|/*  prepare the tool cursor  */
if|if
condition|(
name|tool_cursor
operator|>
name|GIMP_TOOL_CURSOR_NONE
operator|&&
name|tool_cursor
operator|<
name|GIMP_TOOL_CURSOR_LAST
condition|)
block|{
name|bmtool
operator|=
operator|&
name|gimp_tool_cursors
index|[
name|tool_cursor
index|]
expr_stmt|;
block|}
comment|/*  prepare the cursor modifier  */
if|if
condition|(
name|modifier
operator|>
name|GIMP_CURSOR_MODIFIER_NONE
operator|&&
name|modifier
operator|<
name|GIMP_CURSOR_MODIFIER_LAST
condition|)
block|{
name|bmmodifier
operator|=
operator|&
name|gimp_cursor_modifiers
index|[
name|modifier
index|]
expr_stmt|;
block|}
if|if
condition|(
name|cursor_format
operator|!=
name|GIMP_CURSOR_FORMAT_BITMAP
operator|&&
name|gdk_display_supports_cursor_alpha
argument_list|(
name|display
argument_list|)
operator|&&
name|gdk_display_supports_cursor_color
argument_list|(
name|display
argument_list|)
condition|)
block|{
name|GdkPixbuf
modifier|*
name|pixbuf
decl_stmt|;
name|pixbuf
operator|=
name|gdk_pixbuf_copy
argument_list|(
name|get_cursor_pixbuf
argument_list|(
name|bmcursor
argument_list|)
argument_list|)
expr_stmt|;
name|width
operator|=
name|gdk_pixbuf_get_width
argument_list|(
name|pixbuf
argument_list|)
expr_stmt|;
name|height
operator|=
name|gdk_pixbuf_get_height
argument_list|(
name|pixbuf
argument_list|)
expr_stmt|;
if|if
condition|(
name|bmmodifier
condition|)
name|gdk_pixbuf_composite
argument_list|(
name|get_cursor_pixbuf
argument_list|(
name|bmmodifier
argument_list|)
argument_list|,
name|pixbuf
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|1.0
argument_list|,
name|GDK_INTERP_NEAREST
argument_list|,
literal|200
argument_list|)
expr_stmt|;
if|if
condition|(
name|bmtool
condition|)
name|gdk_pixbuf_composite
argument_list|(
name|get_cursor_pixbuf
argument_list|(
name|bmtool
argument_list|)
argument_list|,
name|pixbuf
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|1.0
argument_list|,
name|GDK_INTERP_NEAREST
argument_list|,
literal|200
argument_list|)
expr_stmt|;
name|cursor
operator|=
name|gdk_cursor_new_from_pixbuf
argument_list|(
name|display
argument_list|,
name|pixbuf
argument_list|,
name|bmcursor
operator|->
name|x_hot
argument_list|,
name|bmcursor
operator|->
name|y_hot
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|pixbuf
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|GdkBitmap
modifier|*
name|bitmap
decl_stmt|;
name|GdkBitmap
modifier|*
name|mask
decl_stmt|;
specifier|static
name|GdkGC
modifier|*
name|gc
init|=
name|NULL
decl_stmt|;
specifier|static
name|GdkColor
name|fg
decl_stmt|,
name|bg
decl_stmt|;
if|if
condition|(
operator|!
name|gc
condition|)
block|{
name|GdkColor
name|color
decl_stmt|;
name|gc
operator|=
name|gdk_gc_new
argument_list|(
name|get_cursor_bitmap
argument_list|(
name|bmcursor
argument_list|)
argument_list|)
expr_stmt|;
name|color
operator|.
name|pixel
operator|=
literal|1
expr_stmt|;
name|gdk_gc_set_foreground
argument_list|(
name|gc
argument_list|,
operator|&
name|color
argument_list|)
expr_stmt|;
comment|/* should have a way to configure the mouse colors */
name|gdk_color_parse
argument_list|(
literal|"#FFFFFF"
argument_list|,
operator|&
name|bg
argument_list|)
expr_stmt|;
name|gdk_color_parse
argument_list|(
literal|"#000000"
argument_list|,
operator|&
name|fg
argument_list|)
expr_stmt|;
block|}
name|gdk_drawable_get_size
argument_list|(
name|get_cursor_bitmap
argument_list|(
name|bmcursor
argument_list|)
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
expr_stmt|;
name|bitmap
operator|=
name|gdk_pixmap_new
argument_list|(
name|NULL
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|mask
operator|=
name|gdk_pixmap_new
argument_list|(
name|NULL
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gdk_draw_drawable
argument_list|(
name|bitmap
argument_list|,
name|gc
argument_list|,
name|get_cursor_bitmap
argument_list|(
name|bmcursor
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|gdk_draw_drawable
argument_list|(
name|mask
argument_list|,
name|gc
argument_list|,
name|get_cursor_mask
argument_list|(
name|bmcursor
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
if|if
condition|(
name|bmmodifier
condition|)
block|{
name|gdk_gc_set_clip_mask
argument_list|(
name|gc
argument_list|,
name|get_cursor_bitmap
argument_list|(
name|bmmodifier
argument_list|)
argument_list|)
expr_stmt|;
name|gdk_draw_drawable
argument_list|(
name|bitmap
argument_list|,
name|gc
argument_list|,
name|get_cursor_bitmap
argument_list|(
name|bmmodifier
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|gdk_gc_set_clip_mask
argument_list|(
name|gc
argument_list|,
name|get_cursor_mask
argument_list|(
name|bmmodifier
argument_list|)
argument_list|)
expr_stmt|;
name|gdk_draw_drawable
argument_list|(
name|mask
argument_list|,
name|gc
argument_list|,
name|get_cursor_mask
argument_list|(
name|bmmodifier
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|bmtool
condition|)
block|{
name|gdk_gc_set_clip_mask
argument_list|(
name|gc
argument_list|,
name|get_cursor_bitmap
argument_list|(
name|bmtool
argument_list|)
argument_list|)
expr_stmt|;
name|gdk_draw_drawable
argument_list|(
name|bitmap
argument_list|,
name|gc
argument_list|,
name|get_cursor_bitmap
argument_list|(
name|bmtool
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|gdk_gc_set_clip_mask
argument_list|(
name|gc
argument_list|,
name|get_cursor_mask
argument_list|(
name|bmtool
argument_list|)
argument_list|)
expr_stmt|;
name|gdk_draw_drawable
argument_list|(
name|mask
argument_list|,
name|gc
argument_list|,
name|get_cursor_mask
argument_list|(
name|bmtool
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|bmmodifier
operator|||
name|bmtool
condition|)
name|gdk_gc_set_clip_mask
argument_list|(
name|gc
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|cursor
operator|=
name|gdk_cursor_new_from_pixmap
argument_list|(
name|bitmap
argument_list|,
name|mask
argument_list|,
operator|&
name|fg
argument_list|,
operator|&
name|bg
argument_list|,
name|bmcursor
operator|->
name|x_hot
argument_list|,
name|bmcursor
operator|->
name|y_hot
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|bitmap
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|mask
argument_list|)
expr_stmt|;
block|}
return|return
name|cursor
return|;
block|}
end_function

begin_function
name|void
DECL|function|gimp_cursor_set (GtkWidget * widget,GimpCursorFormat cursor_format,GimpCursorType cursor_type,GimpToolCursorType tool_cursor,GimpCursorModifier modifier)
name|gimp_cursor_set
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GimpCursorFormat
name|cursor_format
parameter_list|,
name|GimpCursorType
name|cursor_type
parameter_list|,
name|GimpToolCursorType
name|tool_cursor
parameter_list|,
name|GimpCursorModifier
name|modifier
parameter_list|)
block|{
name|GdkCursor
modifier|*
name|cursor
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|GTK_IS_WIDGET
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|gtk_widget_get_realized
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|cursor
operator|=
name|gimp_cursor_new
argument_list|(
name|gtk_widget_get_display
argument_list|(
name|widget
argument_list|)
argument_list|,
name|cursor_format
argument_list|,
name|cursor_type
argument_list|,
name|tool_cursor
argument_list|,
name|modifier
argument_list|)
expr_stmt|;
name|gdk_window_set_cursor
argument_list|(
name|gtk_widget_get_window
argument_list|(
name|widget
argument_list|)
argument_list|,
name|cursor
argument_list|)
expr_stmt|;
name|gdk_cursor_unref
argument_list|(
name|cursor
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

