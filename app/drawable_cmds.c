begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995-1999 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_comment
comment|/* NOTE: This file is autogenerated by pdbgen.pl. */
end_comment

begin_include
include|#
directive|include
file|"procedural_db.h"
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|"apptypes.h"
end_include

begin_include
include|#
directive|include
file|"channel.h"
end_include

begin_include
include|#
directive|include
file|"drawable.h"
end_include

begin_include
include|#
directive|include
file|"layer.h"
end_include

begin_decl_stmt
DECL|variable|drawable_merge_shadow_proc
specifier|static
name|ProcRecord
name|drawable_merge_shadow_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_fill_proc
specifier|static
name|ProcRecord
name|drawable_fill_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_update_proc
specifier|static
name|ProcRecord
name|drawable_update_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_mask_bounds_proc
specifier|static
name|ProcRecord
name|drawable_mask_bounds_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_image_proc
specifier|static
name|ProcRecord
name|drawable_image_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_type_proc
specifier|static
name|ProcRecord
name|drawable_type_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_has_alpha_proc
specifier|static
name|ProcRecord
name|drawable_has_alpha_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_type_with_alpha_proc
specifier|static
name|ProcRecord
name|drawable_type_with_alpha_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_rgb_proc
specifier|static
name|ProcRecord
name|drawable_is_rgb_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_gray_proc
specifier|static
name|ProcRecord
name|drawable_is_gray_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_indexed_proc
specifier|static
name|ProcRecord
name|drawable_is_indexed_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_bytes_proc
specifier|static
name|ProcRecord
name|drawable_bytes_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_width_proc
specifier|static
name|ProcRecord
name|drawable_width_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_height_proc
specifier|static
name|ProcRecord
name|drawable_height_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_offsets_proc
specifier|static
name|ProcRecord
name|drawable_offsets_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_layer_proc
specifier|static
name|ProcRecord
name|drawable_is_layer_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_layer_mask_proc
specifier|static
name|ProcRecord
name|drawable_is_layer_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_channel_proc
specifier|static
name|ProcRecord
name|drawable_is_channel_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_get_pixel_proc
specifier|static
name|ProcRecord
name|drawable_get_pixel_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_set_pixel_proc
specifier|static
name|ProcRecord
name|drawable_set_pixel_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_set_image_proc
specifier|static
name|ProcRecord
name|drawable_set_image_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_thumbnail_proc
specifier|static
name|ProcRecord
name|drawable_thumbnail_proc
decl_stmt|;
end_decl_stmt

begin_function
name|void
DECL|function|register_drawable_procs (void)
name|register_drawable_procs
parameter_list|(
name|void
parameter_list|)
block|{
name|procedural_db_register
argument_list|(
operator|&
name|drawable_merge_shadow_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_fill_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_update_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_mask_bounds_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_image_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_type_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_has_alpha_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_type_with_alpha_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_is_rgb_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_is_gray_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_is_indexed_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_bytes_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_width_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_height_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_offsets_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_is_layer_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_is_layer_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_is_channel_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_get_pixel_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_set_pixel_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_set_image_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
operator|&
name|drawable_thumbnail_proc
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_merge_shadow_invoker (Argument * args)
name|drawable_merge_shadow_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gboolean
name|undo
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|undo
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|drawable_merge_shadow
argument_list|(
name|drawable
argument_list|,
name|undo
argument_list|)
expr_stmt|;
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_merge_shadow_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_merge_shadow_inargs
specifier|static
name|ProcArg
name|drawable_merge_shadow_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"undo"
block|,
literal|"Push merge to undo stack?"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_merge_shadow_proc
specifier|static
name|ProcRecord
name|drawable_merge_shadow_proc
init|=
block|{
literal|"gimp_drawable_merge_shadow"
block|,
literal|"Merge the shadow buffer with the specified drawable."
block|,
literal|"This procedure combines the contents of the image's shadow buffer (for temporary processing) with the specified drawable. The \"undo\" parameter specifies whether to add an undo step for the operation. Requesting no undo is useful for such applications as 'auto-apply'."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|2
block|,
name|drawable_merge_shadow_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|drawable_merge_shadow_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_fill_invoker (Argument * args)
name|drawable_fill_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gint32
name|fill_type
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|fill_type
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|fill_type
operator|<
name|FOREGROUND_FILL
operator|||
name|fill_type
operator|>
name|NO_FILL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|drawable_fill
argument_list|(
name|drawable
argument_list|,
operator|(
name|GimpFillType
operator|)
name|fill_type
argument_list|)
expr_stmt|;
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_fill_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_fill_inargs
specifier|static
name|ProcArg
name|drawable_fill_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"fill_type"
block|,
literal|"The type of fill: FG_IMAGE_FILL (0), BG_IMAGE_FILL (1), WHITE_IMAGE_FILL (2), TRANS_IMAGE_FILL (3), NO_IMAGE_FILL (4)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_fill_proc
specifier|static
name|ProcRecord
name|drawable_fill_proc
init|=
block|{
literal|"gimp_drawable_fill"
block|,
literal|"Fill the drawable with the specified fill mode."
block|,
literal|"This procedure fills the drawable with the fill mode. If the fill mode is foreground the current foreground color is used. If the fill mode is background, the current background color is used. If the fill type is white, then white is used. Transparent fill only affects layers with an alpha channel, in which case the alpha channel is set to transparent. If the drawable has no alpha channel, it is filled to white. No fill leaves the drawable's contents undefined. This procedure is unlike the bucket fill tool because it fills regardless of a selection"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|2
block|,
name|drawable_fill_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|drawable_fill_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_update_invoker (Argument * args)
name|drawable_update_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gint32
name|x
decl_stmt|;
name|gint32
name|y
decl_stmt|;
name|gint32
name|width
decl_stmt|;
name|gint32
name|height
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|x
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|y
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|width
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|height
operator|=
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|drawable_update
argument_list|(
name|drawable
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_update_proc
argument_list|,
name|TRUE
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_update_inargs
specifier|static
name|ProcArg
name|drawable_update_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"x"
block|,
literal|"x coordinate of upper left corner of update region"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"y"
block|,
literal|"y coordinate of upper left corner of update region"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"width"
block|,
literal|"Width of update region"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"height"
block|,
literal|"Height of update region"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_update_proc
specifier|static
name|ProcRecord
name|drawable_update_proc
init|=
block|{
literal|"gimp_drawable_update"
block|,
literal|"Update the specified region of the drawable."
block|,
literal|"This procedure updates the specified region of the drawable. The (x, y) coordinate pair is relative to the drawable's origin, not to the image origin. Therefore, the entire drawable can be updated with: {x->0, y->0, w->width, h->height }."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|5
block|,
name|drawable_update_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|drawable_update_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_mask_bounds_invoker (Argument * args)
name|drawable_mask_bounds_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gboolean
name|non_empty
decl_stmt|;
name|gint32
name|x1
decl_stmt|;
name|gint32
name|y1
decl_stmt|;
name|gint32
name|x2
decl_stmt|;
name|gint32
name|y2
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|non_empty
operator|=
name|drawable_mask_bounds
argument_list|(
name|drawable
argument_list|,
operator|&
name|x1
argument_list|,
operator|&
name|y1
argument_list|,
operator|&
name|x2
argument_list|,
operator|&
name|y2
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_mask_bounds_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|non_empty
expr_stmt|;
name|return_args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|x1
expr_stmt|;
name|return_args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|y1
expr_stmt|;
name|return_args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|x2
expr_stmt|;
name|return_args
index|[
literal|5
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|y2
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_mask_bounds_inargs
specifier|static
name|ProcArg
name|drawable_mask_bounds_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_mask_bounds_outargs
specifier|static
name|ProcArg
name|drawable_mask_bounds_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"non_empty"
block|,
literal|"TRUE if there is a selection"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"x1"
block|,
literal|"x coordinate of the upper left corner of selection bounds"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"y1"
block|,
literal|"y coordinate of the upper left corner of selection bounds"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"x2"
block|,
literal|"x coordinate of the lower right corner of selection bounds"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"y2"
block|,
literal|"y coordinate of the lower right corner of selection bounds"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_mask_bounds_proc
specifier|static
name|ProcRecord
name|drawable_mask_bounds_proc
init|=
block|{
literal|"gimp_drawable_mask_bounds"
block|,
literal|"Find the bounding box of the current selection in relation to the specified drawable."
block|,
literal|"This procedure returns the whether there is a selection. If there is one, the upper left and lower righthand corners of its bounding box are returned. These coordinates are specified relative to the drawable's origin, and bounded by the drawable's extents."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_mask_bounds_inargs
block|,
literal|5
block|,
name|drawable_mask_bounds_outargs
block|,
block|{
block|{
name|drawable_mask_bounds_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_image_invoker (Argument * args)
name|drawable_image_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|GimpImage
modifier|*
name|gimage
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
name|gimage
operator|=
name|drawable_gimage
argument_list|(
name|drawable
argument_list|)
operator|)
operator|!=
name|NULL
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_image_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|pdb_image_to_id
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_image_inargs
specifier|static
name|ProcArg
name|drawable_image_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_image_outargs
specifier|static
name|ProcArg
name|drawable_image_outargs
index|[]
init|=
block|{
block|{
name|PDB_IMAGE
block|,
literal|"image"
block|,
literal|"The drawable's image"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_image_proc
specifier|static
name|ProcRecord
name|drawable_image_proc
init|=
block|{
literal|"gimp_drawable_image"
block|,
literal|"Returns the drawable's image."
block|,
literal|"This procedure returns the drawable's image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_image_inargs
block|,
literal|1
block|,
name|drawable_image_outargs
block|,
block|{
block|{
name|drawable_image_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_type_invoker (Argument * args)
name|drawable_type_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_type_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_type
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_type_inargs
specifier|static
name|ProcArg
name|drawable_type_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_type_outargs
specifier|static
name|ProcArg
name|drawable_type_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"type"
block|,
literal|"The drawable's type: { RGB_IMAGE (0), RGBA_IMAGE (1), GRAY_IMAGE (2), GRAYA_IMAGE (3), INDEXED_IMAGE (4), INDEXEDA_IMAGE (5) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_type_proc
specifier|static
name|ProcRecord
name|drawable_type_proc
init|=
block|{
literal|"gimp_drawable_type"
block|,
literal|"Returns the drawable's type."
block|,
literal|"This procedure returns the drawable's type."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_type_inargs
block|,
literal|1
block|,
name|drawable_type_outargs
block|,
block|{
block|{
name|drawable_type_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_has_alpha_invoker (Argument * args)
name|drawable_has_alpha_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_has_alpha_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_has_alpha
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_has_alpha_inargs
specifier|static
name|ProcArg
name|drawable_has_alpha_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_has_alpha_outargs
specifier|static
name|ProcArg
name|drawable_has_alpha_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"has_alpha"
block|,
literal|"Does the drawable have an alpha channel?"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_has_alpha_proc
specifier|static
name|ProcRecord
name|drawable_has_alpha_proc
init|=
block|{
literal|"gimp_drawable_has_alpha"
block|,
literal|"Returns non-zero if the drawable has an alpha channel."
block|,
literal|"This procedure returns whether the specified drawable has an alpha channel. This can only be true for layers, and the associated type will be one of: { RGBA , GRAYA, INDEXEDA }."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_has_alpha_inargs
block|,
literal|1
block|,
name|drawable_has_alpha_outargs
block|,
block|{
block|{
name|drawable_has_alpha_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_type_with_alpha_invoker (Argument * args)
name|drawable_type_with_alpha_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_type_with_alpha_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_type_with_alpha
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_type_with_alpha_inargs
specifier|static
name|ProcArg
name|drawable_type_with_alpha_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_type_with_alpha_outargs
specifier|static
name|ProcArg
name|drawable_type_with_alpha_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"type_with_alpha"
block|,
literal|"The drawable's type with alpha: { RGBA_IMAGE (1), GRAYA_IMAGE (3), INDEXEDA_IMAGE (5) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_type_with_alpha_proc
specifier|static
name|ProcRecord
name|drawable_type_with_alpha_proc
init|=
block|{
literal|"gimp_drawable_type_with_alpha"
block|,
literal|"Returns the drawable's type with alpha."
block|,
literal|"This procedure returns the drawable's type if an alpha channel were added. If the type is currently Gray, for instance, the returned type would be GrayA. If the drawable already has an alpha channel, the drawable's type is simply returned."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_type_with_alpha_inargs
block|,
literal|1
block|,
name|drawable_type_with_alpha_outargs
block|,
block|{
block|{
name|drawable_type_with_alpha_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_is_rgb_invoker (Argument * args)
name|drawable_is_rgb_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_is_rgb_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_color
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_is_rgb_inargs
specifier|static
name|ProcArg
name|drawable_is_rgb_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_rgb_outargs
specifier|static
name|ProcArg
name|drawable_is_rgb_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"color"
block|,
literal|"non-zero if the drawable is an RGB type"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_rgb_proc
specifier|static
name|ProcRecord
name|drawable_is_rgb_proc
init|=
block|{
literal|"gimp_drawable_is_rgb"
block|,
literal|"Returns whether the drawable is an RGB type."
block|,
literal|"This procedure returns non-zero if the specified drawable is of type { RGB, RGBA }."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_is_rgb_inargs
block|,
literal|1
block|,
name|drawable_is_rgb_outargs
block|,
block|{
block|{
name|drawable_is_rgb_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_is_gray_invoker (Argument * args)
name|drawable_is_gray_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_is_gray_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_gray
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_is_gray_inargs
specifier|static
name|ProcArg
name|drawable_is_gray_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_gray_outargs
specifier|static
name|ProcArg
name|drawable_is_gray_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"gray"
block|,
literal|"non-zero if the drawable is a grayscale type"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_gray_proc
specifier|static
name|ProcRecord
name|drawable_is_gray_proc
init|=
block|{
literal|"gimp_drawable_is_gray"
block|,
literal|"Returns whether the drawable is a grayscale type."
block|,
literal|"This procedure returns non-zero if the specified drawable is of type { Gray, GrayA }."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_is_gray_inargs
block|,
literal|1
block|,
name|drawable_is_gray_outargs
block|,
block|{
block|{
name|drawable_is_gray_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_is_indexed_invoker (Argument * args)
name|drawable_is_indexed_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_is_indexed_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_indexed
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_is_indexed_inargs
specifier|static
name|ProcArg
name|drawable_is_indexed_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_indexed_outargs
specifier|static
name|ProcArg
name|drawable_is_indexed_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"indexed"
block|,
literal|"non-zero if the drawable is an indexed type"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_indexed_proc
specifier|static
name|ProcRecord
name|drawable_is_indexed_proc
init|=
block|{
literal|"gimp_drawable_is_indexed"
block|,
literal|"Returns whether the drawable is an indexed type."
block|,
literal|"This procedure returns non-zero if the specified drawable is of type { Indexed, IndexedA }."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_is_indexed_inargs
block|,
literal|1
block|,
name|drawable_is_indexed_outargs
block|,
block|{
block|{
name|drawable_is_indexed_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_bytes_invoker (Argument * args)
name|drawable_bytes_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_bytes_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_bytes
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_bytes_inargs
specifier|static
name|ProcArg
name|drawable_bytes_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_bytes_outargs
specifier|static
name|ProcArg
name|drawable_bytes_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"bytes"
block|,
literal|"Bytes per pixel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_bytes_proc
specifier|static
name|ProcRecord
name|drawable_bytes_proc
init|=
block|{
literal|"gimp_drawable_bytes"
block|,
literal|"Returns the bytes per pixel."
block|,
literal|"This procedure returns the number of bytes per pixel (or the number of channels) for the specified drawable."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_bytes_inargs
block|,
literal|1
block|,
name|drawable_bytes_outargs
block|,
block|{
block|{
name|drawable_bytes_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_width_invoker (Argument * args)
name|drawable_width_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_width_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_width
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_width_inargs
specifier|static
name|ProcArg
name|drawable_width_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_width_outargs
specifier|static
name|ProcArg
name|drawable_width_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"width"
block|,
literal|"Width of drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_width_proc
specifier|static
name|ProcRecord
name|drawable_width_proc
init|=
block|{
literal|"gimp_drawable_width"
block|,
literal|"Returns the width of the drawable."
block|,
literal|"This procedure returns the specified drawable's width in pixels."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_width_inargs
block|,
literal|1
block|,
name|drawable_width_outargs
block|,
block|{
block|{
name|drawable_width_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_height_invoker (Argument * args)
name|drawable_height_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_height_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_height
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_height_inargs
specifier|static
name|ProcArg
name|drawable_height_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_height_outargs
specifier|static
name|ProcArg
name|drawable_height_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"height"
block|,
literal|"Height of drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_height_proc
specifier|static
name|ProcRecord
name|drawable_height_proc
init|=
block|{
literal|"gimp_drawable_height"
block|,
literal|"Returns the height of the drawable."
block|,
literal|"This procedure returns the specified drawable's height in pixels."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_height_inargs
block|,
literal|1
block|,
name|drawable_height_outargs
block|,
block|{
block|{
name|drawable_height_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_offsets_invoker (Argument * args)
name|drawable_offsets_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gint32
name|offset_x
decl_stmt|;
name|gint32
name|offset_y
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|drawable_offsets
argument_list|(
name|drawable
argument_list|,
operator|&
name|offset_x
argument_list|,
operator|&
name|offset_y
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_offsets_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|offset_x
expr_stmt|;
name|return_args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|offset_y
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_offsets_inargs
specifier|static
name|ProcArg
name|drawable_offsets_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_offsets_outargs
specifier|static
name|ProcArg
name|drawable_offsets_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"offset_x"
block|,
literal|"x offset of drawable"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"offset_y"
block|,
literal|"y offset of drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_offsets_proc
specifier|static
name|ProcRecord
name|drawable_offsets_proc
init|=
block|{
literal|"gimp_drawable_offsets"
block|,
literal|"Returns the offsets for the drawable."
block|,
literal|"This procedure returns the specified drawable's offsets. This only makes sense if the drawable is a layer since channels are anchored. The offsets of a channel will be returned as 0."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_offsets_inargs
block|,
literal|2
block|,
name|drawable_offsets_outargs
block|,
block|{
block|{
name|drawable_offsets_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_is_layer_invoker (Argument * args)
name|drawable_is_layer_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_is_layer_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_layer
argument_list|(
name|drawable
argument_list|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_is_layer_inargs
specifier|static
name|ProcArg
name|drawable_is_layer_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_layer_outargs
specifier|static
name|ProcArg
name|drawable_is_layer_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"layer"
block|,
literal|"Non-zero if the drawable is a layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_layer_proc
specifier|static
name|ProcRecord
name|drawable_is_layer_proc
init|=
block|{
literal|"gimp_drawable_is_layer"
block|,
literal|"Returns whether the drawable is a layer."
block|,
literal|"This procedure returns non-zero if the specified drawable is a layer."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_is_layer_inargs
block|,
literal|1
block|,
name|drawable_is_layer_outargs
block|,
block|{
block|{
name|drawable_is_layer_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_is_layer_mask_invoker (Argument * args)
name|drawable_is_layer_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_is_layer_mask_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_layer_mask
argument_list|(
name|drawable
argument_list|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_is_layer_mask_inargs
specifier|static
name|ProcArg
name|drawable_is_layer_mask_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_layer_mask_outargs
specifier|static
name|ProcArg
name|drawable_is_layer_mask_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"layer_mask"
block|,
literal|"Non-zero if the drawable is a layer mask"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_layer_mask_proc
specifier|static
name|ProcRecord
name|drawable_is_layer_mask_proc
init|=
block|{
literal|"gimp_drawable_is_layer_mask"
block|,
literal|"Returns whether the drawable is a layer mask."
block|,
literal|"This procedure returns non-zero if the specified drawable is a layer mask."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_is_layer_mask_inargs
block|,
literal|1
block|,
name|drawable_is_layer_mask_outargs
block|,
block|{
block|{
name|drawable_is_layer_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_is_channel_invoker (Argument * args)
name|drawable_is_channel_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_is_channel_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|drawable_channel
argument_list|(
name|drawable
argument_list|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_is_channel_inargs
specifier|static
name|ProcArg
name|drawable_is_channel_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_channel_outargs
specifier|static
name|ProcArg
name|drawable_is_channel_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"channel"
block|,
literal|"Non-zero if the drawable is a channel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_is_channel_proc
specifier|static
name|ProcRecord
name|drawable_is_channel_proc
init|=
block|{
literal|"gimp_drawable_is_channel"
block|,
literal|"Returns whether the drawable is a channel."
block|,
literal|"This procedure returns non-zero if the specified drawable is a channel."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|1
block|,
name|drawable_is_channel_inargs
block|,
literal|1
block|,
name|drawable_is_channel_outargs
block|,
block|{
block|{
name|drawable_is_channel_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_get_pixel_invoker (Argument * args)
name|drawable_get_pixel_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gint32
name|x
decl_stmt|;
name|gint32
name|y
decl_stmt|;
name|gint32
name|num_channels
init|=
literal|0
decl_stmt|;
name|guint8
modifier|*
name|pixel
init|=
name|NULL
decl_stmt|;
name|guint8
modifier|*
name|p
decl_stmt|;
name|gint
name|b
decl_stmt|;
name|Tile
modifier|*
name|tile
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|x
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|x
operator|<
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|y
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|y
operator|<
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|x
operator|<
name|drawable_width
argument_list|(
name|drawable
argument_list|)
operator|&&
name|y
operator|<
name|drawable_height
argument_list|(
name|drawable
argument_list|)
condition|)
block|{
name|num_channels
operator|=
name|drawable_bytes
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
name|pixel
operator|=
name|g_new
argument_list|(
name|guint8
argument_list|,
name|num_channels
argument_list|)
expr_stmt|;
name|tile
operator|=
name|tile_manager_get_tile
argument_list|(
name|drawable_data
argument_list|(
name|drawable
argument_list|)
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|x
operator|%=
name|TILE_WIDTH
expr_stmt|;
name|y
operator|%=
name|TILE_WIDTH
expr_stmt|;
name|p
operator|=
name|tile_data_pointer
argument_list|(
name|tile
argument_list|,
name|y
argument_list|,
name|x
argument_list|)
expr_stmt|;
for|for
control|(
name|b
operator|=
literal|0
init|;
name|b
operator|<
name|num_channels
condition|;
name|b
operator|++
control|)
name|pixel
index|[
name|b
index|]
operator|=
name|p
index|[
name|b
index|]
expr_stmt|;
name|tile_release
argument_list|(
name|tile
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_get_pixel_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|num_channels
expr_stmt|;
name|return_args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|pixel
expr_stmt|;
block|}
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_get_pixel_inargs
specifier|static
name|ProcArg
name|drawable_get_pixel_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"x_coord"
block|,
literal|"The x coordinate"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"y_coord"
block|,
literal|"The y coordinate"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_get_pixel_outargs
specifier|static
name|ProcArg
name|drawable_get_pixel_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"num_channels"
block|,
literal|"The number of channels for the pixel"
block|}
block|,
block|{
name|PDB_INT8ARRAY
block|,
literal|"pixel"
block|,
literal|"The pixel value"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_get_pixel_proc
specifier|static
name|ProcRecord
name|drawable_get_pixel_proc
init|=
block|{
literal|"gimp_drawable_get_pixel"
block|,
literal|"Gets the value of the pixel at the specified coordinates."
block|,
literal|"This procedure gets the pixel value at the specified coordinates. The 'num_channels' argument must always be equal to the bytes-per-pixel value for the specified drawable."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1997"
block|,
name|PDB_INTERNAL
block|,
literal|3
block|,
name|drawable_get_pixel_inargs
block|,
literal|2
block|,
name|drawable_get_pixel_outargs
block|,
block|{
block|{
name|drawable_get_pixel_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_set_pixel_invoker (Argument * args)
name|drawable_set_pixel_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gint32
name|x
decl_stmt|;
name|gint32
name|y
decl_stmt|;
name|gint32
name|num_channels
decl_stmt|;
name|guint8
modifier|*
name|pixel
decl_stmt|;
name|guint8
modifier|*
name|p
decl_stmt|;
name|gint
name|b
decl_stmt|;
name|Tile
modifier|*
name|tile
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|x
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|x
operator|<
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|y
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|y
operator|<
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|num_channels
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|pixel
operator|=
operator|(
name|guint8
operator|*
operator|)
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|x
operator|<
name|drawable_width
argument_list|(
name|drawable
argument_list|)
operator|&&
name|y
operator|<
name|drawable_height
argument_list|(
name|drawable
argument_list|)
operator|&&
name|num_channels
operator|==
name|drawable_bytes
argument_list|(
name|drawable
argument_list|)
condition|)
block|{
name|tile
operator|=
name|tile_manager_get_tile
argument_list|(
name|drawable_data
argument_list|(
name|drawable
argument_list|)
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|x
operator|%=
name|TILE_WIDTH
expr_stmt|;
name|y
operator|%=
name|TILE_WIDTH
expr_stmt|;
name|p
operator|=
name|tile_data_pointer
argument_list|(
name|tile
argument_list|,
name|y
argument_list|,
name|x
argument_list|)
expr_stmt|;
for|for
control|(
name|b
operator|=
literal|0
init|;
name|b
operator|<
name|num_channels
condition|;
name|b
operator|++
control|)
operator|*
name|p
operator|++
operator|=
operator|*
name|pixel
operator|++
expr_stmt|;
name|tile_release
argument_list|(
name|tile
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_set_pixel_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_set_pixel_inargs
specifier|static
name|ProcArg
name|drawable_set_pixel_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"x_coord"
block|,
literal|"The x coordinate"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"y_coord"
block|,
literal|"The y coordinate"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"num_channels"
block|,
literal|"The number of channels for the pixel"
block|}
block|,
block|{
name|PDB_INT8ARRAY
block|,
literal|"pixel"
block|,
literal|"The pixel value"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_set_pixel_proc
specifier|static
name|ProcRecord
name|drawable_set_pixel_proc
init|=
block|{
literal|"gimp_drawable_set_pixel"
block|,
literal|"Sets the value of the pixel at the specified coordinates."
block|,
literal|"This procedure sets the pixel value at the specified coordinates. The 'num_channels' argument must always be equal to the bytes-per-pixel value for the spec ified drawable."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1997"
block|,
name|PDB_INTERNAL
block|,
literal|5
block|,
name|drawable_set_pixel_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|drawable_set_pixel_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_set_image_invoker (Argument * args)
name|drawable_set_image_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|GimpImage
modifier|*
name|gimage
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|gimage
operator|=
name|pdb_id_to_image
argument_list|(
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|gimage
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_drawable_set_gimage
argument_list|(
name|drawable
argument_list|,
name|gimage
argument_list|)
expr_stmt|;
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_set_image_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_set_image_inargs
specifier|static
name|ProcArg
name|drawable_set_image_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|,
block|{
name|PDB_IMAGE
block|,
literal|"image"
block|,
literal|"The image"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_set_image_proc
specifier|static
name|ProcRecord
name|drawable_set_image_proc
init|=
block|{
literal|"gimp_drawable_set_image"
block|,
literal|"Set image where drawable belongs to."
block|,
literal|"Set the image the drawable should be a part of (Use this before adding a drawable to another image)."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
literal|2
block|,
name|drawable_set_image_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|drawable_set_image_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|drawable_thumbnail_invoker (Argument * args)
name|drawable_thumbnail_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|gint32
name|req_width
decl_stmt|;
name|gint32
name|req_height
decl_stmt|;
name|gint32
name|width
init|=
literal|0
decl_stmt|;
name|gint32
name|height
init|=
literal|0
decl_stmt|;
name|gint32
name|bpp
init|=
literal|0
decl_stmt|;
name|gint32
name|num_pixels
init|=
literal|0
decl_stmt|;
name|guint8
modifier|*
name|thumbnail_data
init|=
name|NULL
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_get_ID
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|req_width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|req_width
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|req_height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|req_height
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|TempBuf
modifier|*
name|buf
decl_stmt|;
name|gint
name|dwidth
decl_stmt|,
name|dheight
decl_stmt|;
if|if
condition|(
name|req_width
operator|<=
literal|128
operator|&&
name|req_height
operator|<=
literal|128
condition|)
block|{
comment|/* Adjust the width/height ratio */
name|dwidth
operator|=
name|drawable_width
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|drawable
argument_list|)
argument_list|)
expr_stmt|;
name|dheight
operator|=
name|drawable_height
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|drawable
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|dwidth
operator|>
name|dheight
condition|)
name|req_height
operator|=
operator|(
name|req_width
operator|*
name|dheight
operator|)
operator|/
name|dwidth
expr_stmt|;
else|else
name|req_width
operator|=
operator|(
name|req_height
operator|*
name|dwidth
operator|)
operator|/
name|dheight
expr_stmt|;
if|if
condition|(
name|GIMP_IS_LAYER
argument_list|(
name|drawable
argument_list|)
condition|)
name|buf
operator|=
name|layer_preview
argument_list|(
name|GIMP_LAYER
argument_list|(
name|drawable
argument_list|)
argument_list|,
name|req_width
argument_list|,
name|req_height
argument_list|)
expr_stmt|;
else|else
name|buf
operator|=
name|channel_preview
argument_list|(
name|GIMP_CHANNEL
argument_list|(
name|drawable
argument_list|)
argument_list|,
name|req_width
argument_list|,
name|req_height
argument_list|)
expr_stmt|;
name|num_pixels
operator|=
name|buf
operator|->
name|height
operator|*
name|buf
operator|->
name|width
operator|*
name|buf
operator|->
name|bytes
expr_stmt|;
name|thumbnail_data
operator|=
name|g_new
argument_list|(
name|guint8
argument_list|,
name|num_pixels
argument_list|)
expr_stmt|;
name|g_memmove
argument_list|(
name|thumbnail_data
argument_list|,
name|temp_buf_data
argument_list|(
name|buf
argument_list|)
argument_list|,
name|num_pixels
argument_list|)
expr_stmt|;
name|width
operator|=
name|buf
operator|->
name|width
expr_stmt|;
name|height
operator|=
name|buf
operator|->
name|height
expr_stmt|;
name|bpp
operator|=
name|buf
operator|->
name|bytes
expr_stmt|;
block|}
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|drawable_thumbnail_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|width
expr_stmt|;
name|return_args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|height
expr_stmt|;
name|return_args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|bpp
expr_stmt|;
name|return_args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|num_pixels
expr_stmt|;
name|return_args
index|[
literal|5
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|thumbnail_data
expr_stmt|;
block|}
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|drawable_thumbnail_inargs
specifier|static
name|ProcArg
name|drawable_thumbnail_inargs
index|[]
init|=
block|{
block|{
name|PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The drawable"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"width"
block|,
literal|"The thumbnail width"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"height"
block|,
literal|"The thumbnail height"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_thumbnail_outargs
specifier|static
name|ProcArg
name|drawable_thumbnail_outargs
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"width"
block|,
literal|"The previews width"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"height"
block|,
literal|"The previews height"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"bpp"
block|,
literal|"The previews bpp"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"thumbnail_data_count"
block|,
literal|"The number of pixels in thumbnail data"
block|}
block|,
block|{
name|PDB_INT8ARRAY
block|,
literal|"thumbnail_data"
block|,
literal|"The thumbnail data"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|drawable_thumbnail_proc
specifier|static
name|ProcRecord
name|drawable_thumbnail_proc
init|=
block|{
literal|"gimp_drawable_thumbnail"
block|,
literal|"Get a thumbnail of a drawable."
block|,
literal|"This function gets data from which a thumbnail of a drawable preview can be created. Maximum x or y dimension is 128 pixels. The pixels are returned in the RGB[A] format. The bpp return value gives the number of bytes in the image. The alpha channel also returned if the drawable has one."
block|,
literal|"Andy Thomas"
block|,
literal|"Andy Thomas"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
literal|3
block|,
name|drawable_thumbnail_inargs
block|,
literal|5
block|,
name|drawable_thumbnail_outargs
block|,
block|{
block|{
name|drawable_thumbnail_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

end_unit

