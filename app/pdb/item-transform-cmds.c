begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* GIMP - The GNU Image Manipulation Program  * Copyright (C) 1995-2003 Spencer Kimball and Peter Mattis  *  * This program is free software: you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 3 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program.  If not, see<http://www.gnu.org/licenses/>.  */
end_comment

begin_comment
comment|/* NOTE: This file is auto-generated by pdbgen.pl. */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<gegl.h>
end_include

begin_include
include|#
directive|include
file|<gdk-pixbuf/gdk-pixbuf.h>
end_include

begin_include
include|#
directive|include
file|"libgimpmath/gimpmath.h"
end_include

begin_include
include|#
directive|include
file|"pdb-types.h"
end_include

begin_include
include|#
directive|include
file|"core/gimp-transform-utils.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpchannel.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpdrawable-transform.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpdrawable.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpimage.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpitem.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpparamspecs.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpprogress.h"
end_include

begin_include
include|#
directive|include
file|"gimppdb.h"
end_include

begin_include
include|#
directive|include
file|"gimppdb-utils.h"
end_include

begin_include
include|#
directive|include
file|"gimppdbcontext.h"
end_include

begin_include
include|#
directive|include
file|"gimpprocedure.h"
end_include

begin_include
include|#
directive|include
file|"internal-procs.h"
end_include

begin_include
include|#
directive|include
file|"gimp-intl.h"
end_include

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_flip_simple_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_flip_simple_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gint32
name|flip_type
decl_stmt|;
name|gboolean
name|auto_center
decl_stmt|;
name|gdouble
name|axis
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|flip_type
operator|=
name|g_value_get_enum
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|auto_center
operator|=
name|g_value_get_boolean
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|axis
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
name|gimp_transform_get_flip_axis
argument_list|(
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|flip_type
argument_list|,
name|auto_center
argument_list|,
operator|&
name|axis
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_flip
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
name|flip_type
argument_list|,
name|axis
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_flip
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
name|flip_type
argument_list|,
name|axis
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_flip_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_flip_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gdouble
name|x0
decl_stmt|;
name|gdouble
name|y0
decl_stmt|;
name|gdouble
name|x1
decl_stmt|;
name|gdouble
name|y1
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|x0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|y0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|x1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|y1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|GimpMatrix3
name|matrix
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
comment|/* Assemble the transformation matrix */
name|gimp_matrix3_identity
argument_list|(
operator|&
name|matrix
argument_list|)
expr_stmt|;
name|gimp_transform_matrix_flip_free
argument_list|(
operator|&
name|matrix
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|,
name|x1
argument_list|,
name|y1
argument_list|)
expr_stmt|;
if|if
condition|(
name|progress
condition|)
name|gimp_progress_start
argument_list|(
name|progress
argument_list|,
name|_
argument_list|(
literal|"Flipping"
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_affine
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_transform
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|progress
condition|)
name|gimp_progress_end
argument_list|(
name|progress
argument_list|)
expr_stmt|;
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_perspective_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_perspective_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gdouble
name|x0
decl_stmt|;
name|gdouble
name|y0
decl_stmt|;
name|gdouble
name|x1
decl_stmt|;
name|gdouble
name|y1
decl_stmt|;
name|gdouble
name|x2
decl_stmt|;
name|gdouble
name|y2
decl_stmt|;
name|gdouble
name|x3
decl_stmt|;
name|gdouble
name|y3
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|x0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|y0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|x1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|y1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|x2
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|y2
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|x3
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|y3
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|GimpMatrix3
name|matrix
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
comment|/* Assemble the transformation matrix */
name|gimp_matrix3_identity
argument_list|(
operator|&
name|matrix
argument_list|)
expr_stmt|;
name|gimp_transform_matrix_perspective
argument_list|(
operator|&
name|matrix
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|,
name|x1
argument_list|,
name|y1
argument_list|,
name|x2
argument_list|,
name|y2
argument_list|,
name|x3
argument_list|,
name|y3
argument_list|)
expr_stmt|;
if|if
condition|(
name|progress
condition|)
name|gimp_progress_start
argument_list|(
name|progress
argument_list|,
name|_
argument_list|(
literal|"Perspective"
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_affine
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_transform
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|progress
condition|)
name|gimp_progress_end
argument_list|(
name|progress
argument_list|)
expr_stmt|;
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_rotate_simple_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_rotate_simple_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gint32
name|rotate_type
decl_stmt|;
name|gboolean
name|auto_center
decl_stmt|;
name|gdouble
name|center_x
decl_stmt|;
name|gdouble
name|center_y
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|rotate_type
operator|=
name|g_value_get_enum
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|auto_center
operator|=
name|g_value_get_boolean
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|center_x
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|center_y
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|FALSE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
name|gimp_transform_get_rotate_center
argument_list|(
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|auto_center
argument_list|,
operator|&
name|center_x
argument_list|,
operator|&
name|center_y
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_rotate
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
name|rotate_type
argument_list|,
name|center_x
argument_list|,
name|center_y
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_rotate
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
name|rotate_type
argument_list|,
name|center_x
argument_list|,
name|center_y
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_rotate_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_rotate_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gdouble
name|angle
decl_stmt|;
name|gboolean
name|auto_center
decl_stmt|;
name|gdouble
name|center_x
decl_stmt|;
name|gdouble
name|center_y
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|angle
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|auto_center
operator|=
name|g_value_get_boolean
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|center_x
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|center_y
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|GimpMatrix3
name|matrix
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
comment|/* Assemble the transformation matrix */
name|gimp_matrix3_identity
argument_list|(
operator|&
name|matrix
argument_list|)
expr_stmt|;
if|if
condition|(
name|auto_center
condition|)
name|gimp_transform_matrix_rotate_rect
argument_list|(
operator|&
name|matrix
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|angle
argument_list|)
expr_stmt|;
else|else
name|gimp_transform_matrix_rotate_center
argument_list|(
operator|&
name|matrix
argument_list|,
name|center_x
argument_list|,
name|center_y
argument_list|,
name|angle
argument_list|)
expr_stmt|;
if|if
condition|(
name|progress
condition|)
name|gimp_progress_start
argument_list|(
name|progress
argument_list|,
name|_
argument_list|(
literal|"Rotating"
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_affine
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_transform
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|progress
condition|)
name|gimp_progress_end
argument_list|(
name|progress
argument_list|)
expr_stmt|;
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_scale_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_scale_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gdouble
name|x0
decl_stmt|;
name|gdouble
name|y0
decl_stmt|;
name|gdouble
name|x1
decl_stmt|;
name|gdouble
name|y1
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|x0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|y0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|x1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|y1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
operator|(
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
operator|&&
name|x0
operator|<
name|x1
operator|&&
name|y0
operator|<
name|y1
operator|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|GimpMatrix3
name|matrix
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
comment|/* Assemble the transformation matrix */
name|gimp_matrix3_identity
argument_list|(
operator|&
name|matrix
argument_list|)
expr_stmt|;
name|gimp_transform_matrix_scale
argument_list|(
operator|&
name|matrix
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|,
name|x1
operator|-
name|x0
argument_list|,
name|y1
operator|-
name|y0
argument_list|)
expr_stmt|;
if|if
condition|(
name|progress
condition|)
name|gimp_progress_start
argument_list|(
name|progress
argument_list|,
name|_
argument_list|(
literal|"Scaling"
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_affine
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_transform
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|progress
condition|)
name|gimp_progress_end
argument_list|(
name|progress
argument_list|)
expr_stmt|;
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_shear_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_shear_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gint32
name|shear_type
decl_stmt|;
name|gdouble
name|magnitude
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|shear_type
operator|=
name|g_value_get_enum
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|magnitude
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|GimpMatrix3
name|matrix
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
comment|/* Assemble the transformation matrix */
name|gimp_matrix3_identity
argument_list|(
operator|&
name|matrix
argument_list|)
expr_stmt|;
name|gimp_transform_matrix_shear
argument_list|(
operator|&
name|matrix
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|shear_type
argument_list|,
name|magnitude
argument_list|)
expr_stmt|;
if|if
condition|(
name|progress
condition|)
name|gimp_progress_start
argument_list|(
name|progress
argument_list|,
name|_
argument_list|(
literal|"Shearing"
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_affine
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_transform
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|progress
condition|)
name|gimp_progress_end
argument_list|(
name|progress
argument_list|)
expr_stmt|;
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_2d_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_2d_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gdouble
name|source_x
decl_stmt|;
name|gdouble
name|source_y
decl_stmt|;
name|gdouble
name|scale_x
decl_stmt|;
name|gdouble
name|scale_y
decl_stmt|;
name|gdouble
name|angle
decl_stmt|;
name|gdouble
name|dest_x
decl_stmt|;
name|gdouble
name|dest_y
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|source_x
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|source_y
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|scale_x
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|scale_y
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|angle
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|dest_x
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|dest_y
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|GimpMatrix3
name|matrix
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
comment|/* Assemble the transformation matrix */
name|gimp_matrix3_identity
argument_list|(
operator|&
name|matrix
argument_list|)
expr_stmt|;
name|gimp_matrix3_translate
argument_list|(
operator|&
name|matrix
argument_list|,
operator|-
name|source_x
argument_list|,
operator|-
name|source_y
argument_list|)
expr_stmt|;
name|gimp_matrix3_scale
argument_list|(
operator|&
name|matrix
argument_list|,
name|scale_x
argument_list|,
name|scale_y
argument_list|)
expr_stmt|;
name|gimp_matrix3_rotate
argument_list|(
operator|&
name|matrix
argument_list|,
name|angle
argument_list|)
expr_stmt|;
name|gimp_matrix3_translate
argument_list|(
operator|&
name|matrix
argument_list|,
name|dest_x
argument_list|,
name|dest_y
argument_list|)
expr_stmt|;
if|if
condition|(
name|progress
condition|)
name|gimp_progress_start
argument_list|(
name|progress
argument_list|,
name|_
argument_list|(
literal|"2D Transform"
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_affine
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_transform
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|progress
condition|)
name|gimp_progress_end
argument_list|(
name|progress
argument_list|)
expr_stmt|;
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
specifier|static
name|GValueArray
modifier|*
DECL|function|item_transform_matrix_invoker (GimpProcedure * procedure,Gimp * gimp,GimpContext * context,GimpProgress * progress,const GValueArray * args,GError ** error)
name|item_transform_matrix_invoker
parameter_list|(
name|GimpProcedure
modifier|*
name|procedure
parameter_list|,
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
specifier|const
name|GValueArray
modifier|*
name|args
parameter_list|,
name|GError
modifier|*
modifier|*
name|error
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GValueArray
modifier|*
name|return_vals
decl_stmt|;
name|GimpItem
modifier|*
name|item
decl_stmt|;
name|gdouble
name|coeff_0_0
decl_stmt|;
name|gdouble
name|coeff_0_1
decl_stmt|;
name|gdouble
name|coeff_0_2
decl_stmt|;
name|gdouble
name|coeff_1_0
decl_stmt|;
name|gdouble
name|coeff_1_1
decl_stmt|;
name|gdouble
name|coeff_1_2
decl_stmt|;
name|gdouble
name|coeff_2_0
decl_stmt|;
name|gdouble
name|coeff_2_1
decl_stmt|;
name|gdouble
name|coeff_2_2
decl_stmt|;
name|item
operator|=
name|gimp_value_get_item
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|0
index|]
argument_list|,
name|gimp
argument_list|)
expr_stmt|;
name|coeff_0_0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|coeff_0_1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|coeff_0_2
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|coeff_1_0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|coeff_1_1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|coeff_1_2
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|coeff_2_0
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|coeff_2_1
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|8
index|]
argument_list|)
expr_stmt|;
name|coeff_2_2
operator|=
name|g_value_get_double
argument_list|(
operator|&
name|args
operator|->
name|values
index|[
literal|9
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
name|success
operator|=
name|gimp_pdb_item_is_attached
argument_list|(
name|item
argument_list|,
name|NULL
argument_list|,
name|TRUE
argument_list|,
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
operator|&&
name|gimp_item_mask_intersect
argument_list|(
name|item
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
condition|)
block|{
name|GimpPDBContext
modifier|*
name|pdb_context
init|=
name|GIMP_PDB_CONTEXT
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|GimpMatrix3
name|matrix
decl_stmt|;
name|gint
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
name|gimp_item_get_offset
argument_list|(
name|item
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
expr_stmt|;
name|x
operator|+=
name|off_x
expr_stmt|;
name|y
operator|+=
name|off_y
expr_stmt|;
comment|/* Assemble the transformation matrix */
name|matrix
operator|.
name|coeff
index|[
literal|0
index|]
index|[
literal|0
index|]
operator|=
name|coeff_0_0
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|0
index|]
index|[
literal|1
index|]
operator|=
name|coeff_0_1
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|0
index|]
index|[
literal|2
index|]
operator|=
name|coeff_0_2
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|1
index|]
index|[
literal|0
index|]
operator|=
name|coeff_1_0
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|1
index|]
index|[
literal|1
index|]
operator|=
name|coeff_1_1
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|1
index|]
index|[
literal|2
index|]
operator|=
name|coeff_1_2
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|2
index|]
index|[
literal|0
index|]
operator|=
name|coeff_2_0
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|2
index|]
index|[
literal|1
index|]
operator|=
name|coeff_2_1
expr_stmt|;
name|matrix
operator|.
name|coeff
index|[
literal|2
index|]
index|[
literal|2
index|]
operator|=
name|coeff_2_2
expr_stmt|;
if|if
condition|(
name|progress
condition|)
name|gimp_progress_start
argument_list|(
name|progress
argument_list|,
name|_
argument_list|(
literal|"2D Transforming"
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|item
argument_list|)
operator|&&
operator|!
name|gimp_viewable_get_children
argument_list|(
name|GIMP_VIEWABLE
argument_list|(
name|item
argument_list|)
argument_list|)
operator|&&
operator|!
name|gimp_channel_is_empty
argument_list|(
name|gimp_image_get_mask
argument_list|(
name|gimp_item_get_image
argument_list|(
name|item
argument_list|)
argument_list|)
argument_list|)
condition|)
block|{
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|drawable
operator|=
name|gimp_drawable_transform_affine
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|item
argument_list|)
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
if|if
condition|(
name|drawable
condition|)
name|item
operator|=
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|gimp_item_transform
argument_list|(
name|item
argument_list|,
name|context
argument_list|,
operator|&
name|matrix
argument_list|,
name|pdb_context
operator|->
name|transform_direction
argument_list|,
name|pdb_context
operator|->
name|interpolation
argument_list|,
name|pdb_context
operator|->
name|transform_recursion
argument_list|,
name|pdb_context
operator|->
name|transform_resize
argument_list|,
name|progress
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|progress
condition|)
name|gimp_progress_end
argument_list|(
name|progress
argument_list|)
expr_stmt|;
block|}
block|}
name|return_vals
operator|=
name|gimp_procedure_get_return_values
argument_list|(
name|procedure
argument_list|,
name|success
argument_list|,
name|error
condition|?
operator|*
name|error
else|:
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_value_set_item
argument_list|(
operator|&
name|return_vals
operator|->
name|values
index|[
literal|1
index|]
argument_list|,
name|item
argument_list|)
expr_stmt|;
return|return
name|return_vals
return|;
block|}
end_function

begin_function
name|void
DECL|function|register_item_transform_procs (GimpPDB * pdb)
name|register_item_transform_procs
parameter_list|(
name|GimpPDB
modifier|*
name|pdb
parameter_list|)
block|{
name|GimpProcedure
modifier|*
name|procedure
decl_stmt|;
comment|/*    * gimp-item-transform-flip-simple    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_flip_simple_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-flip-simple"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-flip-simple"
argument_list|,
literal|"Flip the specified item either vertically or horizontally."
argument_list|,
literal|"This procedure flips the specified item. If a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then flipped. If auto_center is set to TRUE, the flip is around the selection's center. Otherwise, the coordinate of the axis needs to be specified. The return value is the ID of the flipped item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and flipped drawable. This procedure is affected by the following context setters: 'gimp-context-set-transform-resize'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2004"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_enum
argument_list|(
literal|"flip-type"
argument_list|,
literal|"flip type"
argument_list|,
literal|"Type of flip"
argument_list|,
name|GIMP_TYPE_ORIENTATION_TYPE
argument_list|,
name|GIMP_ORIENTATION_HORIZONTAL
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_param_spec_enum_exclude_value
argument_list|(
name|GIMP_PARAM_SPEC_ENUM
argument_list|(
name|procedure
operator|->
name|args
index|[
literal|1
index|]
argument_list|)
argument_list|,
name|GIMP_ORIENTATION_UNKNOWN
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_boolean
argument_list|(
literal|"auto-center"
argument_list|,
literal|"auto center"
argument_list|,
literal|"Whether to automatically position the axis in the selection center"
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"axis"
argument_list|,
literal|"axis"
argument_list|,
literal|"coord. of flip axis"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The flipped item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-flip    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_flip_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-flip"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-flip"
argument_list|,
literal|"Flip the specified item around a given line."
argument_list|,
literal|"This procedure flips the specified item. If a selection exists and the item is a drawable , the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then flipped. The axis to flip around is specified by specifying two points from that line. The return value is the ID of the flipped item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and flipped drawable. This procedure is affected by the following context setters: 'gimp-context-set-interpolation', 'gimp-context-set-transform-direction', 'gimp-context-set-transform-resize', 'gimp-context-set-transform-recursion'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x0"
argument_list|,
literal|"x0"
argument_list|,
literal|"horz. coord. of one end of axis"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y0"
argument_list|,
literal|"y0"
argument_list|,
literal|"vert. coord. of one end of axis"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x1"
argument_list|,
literal|"x1"
argument_list|,
literal|"horz. coord. of other end of axis"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y1"
argument_list|,
literal|"y1"
argument_list|,
literal|"vert. coord. of other end of axis"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The flipped item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-perspective    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_perspective_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-perspective"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-perspective"
argument_list|,
literal|"Perform a possibly non-affine transformation on the specified item."
argument_list|,
literal|"This procedure performs a possibly non-affine transformation on the specified item by allowing the corners of the original bounding box to be arbitrarily remapped to any values. The specified item is remapped if no selection exists or it is not a drawable. However, if a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then remapped as specified. The return value is the ID of the remapped item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and remapped drawable. The 4 coordinates specify the new locations of each corner of the original bounding box. By specifying these values, any affine transformation (rotation, scaling, translation) can be affected. Additionally, these values can be specified such that the resulting transformed item will appear to have"
literal|"been projected via a perspective transform. This procedure is affected by the following context setters: 'gimp-context-set-interpolation', 'gimp-context-set-transform-direction', 'gimp-context-set-transform-resize', 'gimp-context-set-transform-recursion'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x0"
argument_list|,
literal|"x0"
argument_list|,
literal|"The new x coordinate of upper-left corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y0"
argument_list|,
literal|"y0"
argument_list|,
literal|"The new y coordinate of upper-left corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x1"
argument_list|,
literal|"x1"
argument_list|,
literal|"The new x coordinate of upper-right corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y1"
argument_list|,
literal|"y1"
argument_list|,
literal|"The new y coordinate of upper-right corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x2"
argument_list|,
literal|"x2"
argument_list|,
literal|"The new x coordinate of lower-left corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y2"
argument_list|,
literal|"y2"
argument_list|,
literal|"The new y coordinate of lower-left corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x3"
argument_list|,
literal|"x3"
argument_list|,
literal|"The new x coordinate of lower-right corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y3"
argument_list|,
literal|"y3"
argument_list|,
literal|"The new y coordinate of lower-right corner of original bounding box"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The newly mapped item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-rotate-simple    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_rotate_simple_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-rotate-simple"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-rotate-simple"
argument_list|,
literal|"Rotate the specified item about given coordinates through the specified angle."
argument_list|,
literal|"This function rotates the specified item. If a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then rotated by the specified amount. The return value is the ID of the rotated item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and rotated drawable. This procedure is affected by the following context setters: 'gimp-context-set-transform-resize'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_enum
argument_list|(
literal|"rotate-type"
argument_list|,
literal|"rotate type"
argument_list|,
literal|"Type of rotation"
argument_list|,
name|GIMP_TYPE_ROTATION_TYPE
argument_list|,
name|GIMP_ROTATE_90
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_boolean
argument_list|(
literal|"auto-center"
argument_list|,
literal|"auto center"
argument_list|,
literal|"Whether to automatically rotate around the selection center"
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"center-x"
argument_list|,
literal|"center x"
argument_list|,
literal|"The hor. coordinate of the center of rotation"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"center-y"
argument_list|,
literal|"center y"
argument_list|,
literal|"The vert. coordinate of the center of rotation"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The rotated item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-rotate    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_rotate_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-rotate"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-rotate"
argument_list|,
literal|"Rotate the specified item about given coordinates through the specified angle."
argument_list|,
literal|"This function rotates the specified item. If a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then rotated by the specified amount. The return value is the ID of the rotated item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and rotated drawable. This procedure is affected by the following context setters: 'gimp-context-set-interpolation', 'gimp-context-set-transform-direction', 'gimp-context-set-transform-resize', 'gimp-context-set-transform-recursion'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"angle"
argument_list|,
literal|"angle"
argument_list|,
literal|"The angle of rotation (radians)"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_boolean
argument_list|(
literal|"auto-center"
argument_list|,
literal|"auto center"
argument_list|,
literal|"Whether to automatically rotate around the selection center"
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"center-x"
argument_list|,
literal|"center x"
argument_list|,
literal|"The hor. coordinate of the center of rotation"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"center-y"
argument_list|,
literal|"center y"
argument_list|,
literal|"The vert. coordinate of the center of rotation"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The rotated item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-scale    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_scale_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-scale"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-scale"
argument_list|,
literal|"Scale the specified item."
argument_list|,
literal|"This procedure scales the specified item. If a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then scaled by the specified amount. The return value is the ID of the scaled item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and scaled drawable. This procedure is affected by the following context setters: 'gimp-context-set-interpolation', 'gimp-context-set-transform-direction', 'gimp-context-set-transform-resize', 'gimp-context-set-transform-recursion'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x0"
argument_list|,
literal|"x0"
argument_list|,
literal|"The new x coordinate of the upper-left corner of the scaled region"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y0"
argument_list|,
literal|"y0"
argument_list|,
literal|"The new y coordinate of the upper-left corner of the scaled region"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"x1"
argument_list|,
literal|"x1"
argument_list|,
literal|"The new x coordinate of the lower-right corner of the scaled region"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"y1"
argument_list|,
literal|"y1"
argument_list|,
literal|"The new y coordinate of the lower-right corner of the scaled region"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The scaled item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-shear    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_shear_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-shear"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-shear"
argument_list|,
literal|"Shear the specified item about its center by the specified magnitude."
argument_list|,
literal|"This procedure shears the specified item. If a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then sheard by the specified amount. The return value is the ID of the sheard item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and sheard drawable. The shear type parameter indicates whether the shear will be applied horizontally or vertically. The magnitude can be either positive or negative and indicates the extent (in pixels) to shear by. This procedure is affected by the following context setters: 'gimp-context-set-interpolation', 'gimp-context-set-transform-direction', 'gimp-context-set-transform-resize', 'gimp-context-set-transform-recursion'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_enum
argument_list|(
literal|"shear-type"
argument_list|,
literal|"shear type"
argument_list|,
literal|"Type of shear"
argument_list|,
name|GIMP_TYPE_ORIENTATION_TYPE
argument_list|,
name|GIMP_ORIENTATION_HORIZONTAL
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_param_spec_enum_exclude_value
argument_list|(
name|GIMP_PARAM_SPEC_ENUM
argument_list|(
name|procedure
operator|->
name|args
index|[
literal|1
index|]
argument_list|)
argument_list|,
name|GIMP_ORIENTATION_UNKNOWN
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"magnitude"
argument_list|,
literal|"magnitude"
argument_list|,
literal|"The magnitude of the shear"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The sheared item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-2d    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_2d_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-2d"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-2d"
argument_list|,
literal|"Transform the specified item in 2d."
argument_list|,
literal|"This procedure transforms the specified item. If a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then transformed. The transformation is done by scaling the image by the x and y scale factors about the point (source_x, source_y), then rotating around the same point, then translating that point to the new position (dest_x, dest_y). The return value is the ID of the rotated drawable. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and transformed drawable. This procedure is affected by the following context setters: 'gimp-context-set-interpolation', 'gimp-context-set-transform-direction', 'gimp-context-set-transform-resize', 'gimp-context-set-transform-recursion'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"source-x"
argument_list|,
literal|"source x"
argument_list|,
literal|"X coordinate of the transformation center"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"source-y"
argument_list|,
literal|"source y"
argument_list|,
literal|"Y coordinate of the transformation center"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"scale-x"
argument_list|,
literal|"scale x"
argument_list|,
literal|"Amount to scale in x direction"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"scale-y"
argument_list|,
literal|"scale y"
argument_list|,
literal|"Amount to scale in y direction"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"angle"
argument_list|,
literal|"angle"
argument_list|,
literal|"The angle of rotation (radians)"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"dest-x"
argument_list|,
literal|"dest x"
argument_list|,
literal|"X coordinate of where the center goes"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"dest-y"
argument_list|,
literal|"dest y"
argument_list|,
literal|"Y coordinate of where the center goes"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The transformed item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
comment|/*    * gimp-item-transform-matrix    */
name|procedure
operator|=
name|gimp_procedure_new
argument_list|(
name|item_transform_matrix_invoker
argument_list|)
expr_stmt|;
name|gimp_object_set_static_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|procedure
argument_list|)
argument_list|,
literal|"gimp-item-transform-matrix"
argument_list|)
expr_stmt|;
name|gimp_procedure_set_static_strings
argument_list|(
name|procedure
argument_list|,
literal|"gimp-item-transform-matrix"
argument_list|,
literal|"Transform the specified item in 2d."
argument_list|,
literal|"This procedure transforms the specified item. If a selection exists and the item is a drawable, the portion of the drawable which lies under the selection is cut from the drawable and made into a floating selection which is then transformed. The transformation is done by assembling a 3x3 matrix from the coefficients passed. The return value is the ID of the transformed item. If there was no selection or the item is not a drawable, this will be equal to the item ID supplied as input. Otherwise, this will be the newly created and transformed drawable. This procedure is affected by the following context setters: 'gimp-context-set-interpolation', 'gimp-context-set-transform-direction', 'gimp-context-set-transform-resize', 'gimp-context-set-transform-recursion'."
argument_list|,
literal|"Michael Natterer<mitch@gimp.org>"
argument_list|,
literal|"Michael Natterer"
argument_list|,
literal|"2010"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The affected item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-0-0"
argument_list|,
literal|"coeff 0 0"
argument_list|,
literal|"coefficient (0,0) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-0-1"
argument_list|,
literal|"coeff 0 1"
argument_list|,
literal|"coefficient (0,1) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-0-2"
argument_list|,
literal|"coeff 0 2"
argument_list|,
literal|"coefficient (0,2) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-1-0"
argument_list|,
literal|"coeff 1 0"
argument_list|,
literal|"coefficient (1,0) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-1-1"
argument_list|,
literal|"coeff 1 1"
argument_list|,
literal|"coefficient (1,1) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-1-2"
argument_list|,
literal|"coeff 1 2"
argument_list|,
literal|"coefficient (1,2) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-2-0"
argument_list|,
literal|"coeff 2 0"
argument_list|,
literal|"coefficient (2,0) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-2-1"
argument_list|,
literal|"coeff 2 1"
argument_list|,
literal|"coefficient (2,1) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_argument
argument_list|(
name|procedure
argument_list|,
name|g_param_spec_double
argument_list|(
literal|"coeff-2-2"
argument_list|,
literal|"coeff 2 2"
argument_list|,
literal|"coefficient (2,2) of the transformation matrix"
argument_list|,
operator|-
name|G_MAXDOUBLE
argument_list|,
name|G_MAXDOUBLE
argument_list|,
literal|0
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_procedure_add_return_value
argument_list|(
name|procedure
argument_list|,
name|gimp_param_spec_item_id
argument_list|(
literal|"item"
argument_list|,
literal|"item"
argument_list|,
literal|"The transformed item"
argument_list|,
name|pdb
operator|->
name|gimp
argument_list|,
name|FALSE
argument_list|,
name|GIMP_PARAM_READWRITE
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_pdb_register_procedure
argument_list|(
name|pdb
argument_list|,
name|procedure
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|procedure
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

