begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995-2003 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_comment
comment|/* NOTE: This file is autogenerated by pdbgen.pl. */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<glib-object.h>
end_include

begin_include
include|#
directive|include
file|"pdb-types.h"
end_include

begin_include
include|#
directive|include
file|"procedural_db.h"
end_include

begin_include
include|#
directive|include
file|"config/gimpcoreconfig.h"
end_include

begin_include
include|#
directive|include
file|"core/gimp.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpdrawable.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpimage-undo.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpimage.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpitem-linked.h"
end_include

begin_include
include|#
directive|include
file|"core/gimplayer.h"
end_include

begin_include
include|#
directive|include
file|"core/gimplayermask.h"
end_include

begin_include
include|#
directive|include
file|"gimp-intl.h"
end_include

begin_decl_stmt
DECL|variable|layer_new_proc
specifier|static
name|ProcRecord
name|layer_new_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_new_from_drawable_proc
specifier|static
name|ProcRecord
name|layer_new_from_drawable_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_copy_proc
specifier|static
name|ProcRecord
name|layer_copy_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_add_alpha_proc
specifier|static
name|ProcRecord
name|layer_add_alpha_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_scale_proc
specifier|static
name|ProcRecord
name|layer_scale_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_resize_proc
specifier|static
name|ProcRecord
name|layer_resize_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_resize_to_image_size_proc
specifier|static
name|ProcRecord
name|layer_resize_to_image_size_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_translate_proc
specifier|static
name|ProcRecord
name|layer_translate_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_offsets_proc
specifier|static
name|ProcRecord
name|layer_set_offsets_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_create_mask_proc
specifier|static
name|ProcRecord
name|layer_create_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mask_proc
specifier|static
name|ProcRecord
name|layer_get_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_from_mask_proc
specifier|static
name|ProcRecord
name|layer_from_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_add_mask_proc
specifier|static
name|ProcRecord
name|layer_add_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_remove_mask_proc
specifier|static
name|ProcRecord
name|layer_remove_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_is_floating_sel_proc
specifier|static
name|ProcRecord
name|layer_is_floating_sel_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_lock_alpha_proc
specifier|static
name|ProcRecord
name|layer_get_lock_alpha_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_lock_alpha_proc
specifier|static
name|ProcRecord
name|layer_set_lock_alpha_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_apply_mask_proc
specifier|static
name|ProcRecord
name|layer_get_apply_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_apply_mask_proc
specifier|static
name|ProcRecord
name|layer_set_apply_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_show_mask_proc
specifier|static
name|ProcRecord
name|layer_get_show_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_show_mask_proc
specifier|static
name|ProcRecord
name|layer_set_show_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_edit_mask_proc
specifier|static
name|ProcRecord
name|layer_get_edit_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_edit_mask_proc
specifier|static
name|ProcRecord
name|layer_set_edit_mask_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_opacity_proc
specifier|static
name|ProcRecord
name|layer_get_opacity_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_opacity_proc
specifier|static
name|ProcRecord
name|layer_set_opacity_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mode_proc
specifier|static
name|ProcRecord
name|layer_get_mode_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_mode_proc
specifier|static
name|ProcRecord
name|layer_set_mode_proc
decl_stmt|;
end_decl_stmt

begin_function
name|void
DECL|function|register_layer_procs (Gimp * gimp)
name|register_layer_procs
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|)
block|{
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_new_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_new_from_drawable_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_copy_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_add_alpha_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_scale_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_resize_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_resize_to_image_size_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_translate_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_set_offsets_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_create_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_get_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_from_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_add_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_remove_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_is_floating_sel_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_get_lock_alpha_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_set_lock_alpha_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_get_apply_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_set_apply_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_get_show_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_set_show_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_get_edit_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_set_edit_mask_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_get_opacity_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_set_opacity_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_get_mode_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|layer_set_mode_proc
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_new_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_new_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpImage
modifier|*
name|gimage
decl_stmt|;
name|gint32
name|width
decl_stmt|;
name|gint32
name|height
decl_stmt|;
name|gint32
name|type
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gdouble
name|opacity
decl_stmt|;
name|gint32
name|mode
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
init|=
name|NULL
decl_stmt|;
name|gimage
operator|=
name|gimp_image_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|GIMP_IS_IMAGE
argument_list|(
name|gimage
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|width
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|height
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|type
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|type
operator|<
name|GIMP_RGB_IMAGE
operator|||
name|type
operator|>
name|GIMP_INDEXEDA_IMAGE
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|&&
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|opacity
operator|=
name|args
index|[
literal|5
index|]
operator|.
name|value
operator|.
name|pdb_float
expr_stmt|;
if|if
condition|(
name|opacity
operator|<
literal|0.0
operator|||
name|opacity
operator|>
literal|100.0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|mode
operator|=
name|args
index|[
literal|6
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|mode
operator|<
name|GIMP_NORMAL_MODE
operator|||
name|mode
operator|>
name|GIMP_COLOR_ERASE_MODE
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|layer
operator|=
name|gimp_layer_new
argument_list|(
name|gimage
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|type
argument_list|,
name|name
argument_list|,
name|opacity
operator|/
literal|100.0
argument_list|,
name|mode
argument_list|)
expr_stmt|;
name|success
operator|=
operator|(
name|layer
operator|!=
name|NULL
operator|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_new_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|layer
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_new_inargs
specifier|static
name|ProcArg
name|layer_new_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_IMAGE
block|,
literal|"image"
block|,
literal|"The image to which to add the layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"width"
block|,
literal|"The layer width: (0< width)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"height"
block|,
literal|"The layer height: (0< height)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"type"
block|,
literal|"The layer type: { GIMP_RGB_IMAGE (0), GIMP_RGBA_IMAGE (1), GIMP_GRAY_IMAGE (2), GIMP_GRAYA_IMAGE (3), GIMP_INDEXED_IMAGE (4), GIMP_INDEXEDA_IMAGE (5) }"
block|}
block|,
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The layer name"
block|}
block|,
block|{
name|GIMP_PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"The layer opacity: (0<= opacity<= 100)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"mode"
block|,
literal|"The layer combination mode: { GIMP_NORMAL_MODE (0), GIMP_DISSOLVE_MODE (1), GIMP_BEHIND_MODE (2), GIMP_MULTIPLY_MODE (3), GIMP_SCREEN_MODE (4), GIMP_OVERLAY_MODE (5), GIMP_DIFFERENCE_MODE (6), GIMP_ADDITION_MODE (7), GIMP_SUBTRACT_MODE (8), GIMP_DARKEN_ONLY_MODE (9), GIMP_LIGHTEN_ONLY_MODE (10), GIMP_HUE_MODE (11), GIMP_SATURATION_MODE (12), GIMP_COLOR_MODE (13), GIMP_VALUE_MODE (14), GIMP_DIVIDE_MODE (15), GIMP_DODGE_MODE (16), GIMP_BURN_MODE (17), GIMP_HARDLIGHT_MODE (18), GIMP_SOFTLIGHT_MODE (19), GIMP_GRAIN_EXTRACT_MODE (20), GIMP_GRAIN_MERGE_MODE (21), GIMP_COLOR_ERASE_MODE (22) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_new_outargs
specifier|static
name|ProcArg
name|layer_new_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The newly created layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_new_proc
specifier|static
name|ProcRecord
name|layer_new_proc
init|=
block|{
literal|"gimp-layer-new"
block|,
literal|"gimp-layer-new"
block|,
literal|"Create a new layer."
block|,
literal|"This procedure creates a new layer with the specified width, height, and type. Name, opacity, and mode are also supplied parameters. The new layer still needs to be added to the image, as this is not automatic. Add the new layer with the 'gimp_image_add_layer' command. Other attributes such as layer mask modes, and offsets should be set with explicit procedure calls."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|7
block|,
name|layer_new_inargs
block|,
literal|1
block|,
name|layer_new_outargs
block|,
block|{
block|{
name|layer_new_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_new_from_drawable_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_new_from_drawable_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpDrawable
modifier|*
name|drawable
decl_stmt|;
name|GimpImage
modifier|*
name|dest_image
decl_stmt|;
name|GimpLayer
modifier|*
name|layer_copy
init|=
name|NULL
decl_stmt|;
name|drawable
operator|=
operator|(
name|GimpDrawable
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_DRAWABLE
argument_list|(
name|drawable
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|dest_image
operator|=
name|gimp_image_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|GIMP_IS_IMAGE
argument_list|(
name|dest_image
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GType
name|new_type
decl_stmt|;
name|GimpItem
modifier|*
name|new_item
decl_stmt|;
if|if
condition|(
name|GIMP_IS_LAYER
argument_list|(
name|drawable
argument_list|)
condition|)
name|new_type
operator|=
name|G_TYPE_FROM_INSTANCE
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
else|else
name|new_type
operator|=
name|GIMP_TYPE_LAYER
expr_stmt|;
if|if
condition|(
name|dest_image
operator|==
name|gimp_item_get_image
argument_list|(
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
argument_list|)
condition|)
name|new_item
operator|=
name|gimp_item_duplicate
argument_list|(
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
argument_list|,
name|new_type
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
else|else
name|new_item
operator|=
name|gimp_item_convert
argument_list|(
name|GIMP_ITEM
argument_list|(
name|drawable
argument_list|)
argument_list|,
name|dest_image
argument_list|,
name|new_type
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
name|new_item
condition|)
name|layer_copy
operator|=
name|GIMP_LAYER
argument_list|(
name|new_item
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_new_from_drawable_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|layer_copy
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer_copy
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_new_from_drawable_inargs
specifier|static
name|ProcArg
name|layer_new_from_drawable_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"The source drawable from where the new layer is copied"
block|}
block|,
block|{
name|GIMP_PDB_IMAGE
block|,
literal|"dest-image"
block|,
literal|"The destination image to which to add the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_new_from_drawable_outargs
specifier|static
name|ProcArg
name|layer_new_from_drawable_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer-copy"
block|,
literal|"The newly copied layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_new_from_drawable_proc
specifier|static
name|ProcRecord
name|layer_new_from_drawable_proc
init|=
block|{
literal|"gimp-layer-new-from-drawable"
block|,
literal|"gimp-layer-new-from-drawable"
block|,
literal|"Create a new layer by copying an existing drawable."
block|,
literal|"This procedure creates a new layer as a copy of the specified drawable. The new layer still needs to be added to the image, as this is not automatic. Add the new layer with the 'gimp_image_add_layer' command. Other attributes such as layer mask modes, and offsets should be set with explicit procedure calls."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_new_from_drawable_inargs
block|,
literal|1
block|,
name|layer_new_from_drawable_outargs
block|,
block|{
block|{
name|layer_new_from_drawable_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_copy_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_copy_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|add_alpha
decl_stmt|;
name|GimpLayer
modifier|*
name|layer_copy
init|=
name|NULL
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|add_alpha
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
name|layer_copy
operator|=
name|GIMP_LAYER
argument_list|(
name|gimp_item_duplicate
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|,
name|G_TYPE_FROM_INSTANCE
argument_list|(
name|layer
argument_list|)
argument_list|,
name|add_alpha
argument_list|)
argument_list|)
operator|)
operator|!=
name|NULL
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_copy_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|layer_copy
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer_copy
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_copy_inargs
specifier|static
name|ProcArg
name|layer_copy_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer to copy"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"add-alpha"
block|,
literal|"Add an alpha channel to the copied layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_copy_outargs
specifier|static
name|ProcArg
name|layer_copy_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer-copy"
block|,
literal|"The newly copied layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_copy_proc
specifier|static
name|ProcRecord
name|layer_copy_proc
init|=
block|{
literal|"gimp-layer-copy"
block|,
literal|"gimp-layer-copy"
block|,
literal|"Copy a layer."
block|,
literal|"This procedure copies the specified layer and returns the copy. The newly copied layer is for use within the original layer's image. It should not be subsequently added to any other image. The copied layer can optionally have an added alpha channel. This is useful if the background layer in an image is being copied and added to the same image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_copy_inargs
block|,
literal|1
block|,
name|layer_copy_outargs
block|,
block|{
block|{
name|layer_copy_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_add_alpha_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_add_alpha_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_layer_add_alpha
argument_list|(
name|layer
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_add_alpha_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_add_alpha_inargs
specifier|static
name|ProcArg
name|layer_add_alpha_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_add_alpha_proc
specifier|static
name|ProcRecord
name|layer_add_alpha_proc
init|=
block|{
literal|"gimp-layer-add-alpha"
block|,
literal|"gimp-layer-add-alpha"
block|,
literal|"Add an alpha channel to the layer if it doesn't already have one."
block|,
literal|"This procedure adds an additional component to the specified layer if it does not already possess an alpha channel. An alpha channel makes it possible to move a layer from the bottom of the layer stack and to clear and erase to transparency, instead of the background color. This transforms images of type RGB to RGBA, GRAY to GRAYA, and INDEXED to INDEXEDA."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_add_alpha_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_add_alpha_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_scale_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_scale_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|new_width
decl_stmt|;
name|gint32
name|new_height
decl_stmt|;
name|gboolean
name|local_origin
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|new_width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|new_width
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|new_height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|new_height
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|local_origin
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|success
operator|=
name|gimp_item_is_attached
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_item_scale_by_origin
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|,
name|new_width
argument_list|,
name|new_height
argument_list|,
name|gimp
operator|->
name|config
operator|->
name|interpolation_type
argument_list|,
name|NULL
argument_list|,
name|local_origin
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_scale_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_scale_inargs
specifier|static
name|ProcArg
name|layer_scale_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"new-width"
block|,
literal|"New layer width: (0< new_width)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"new-height"
block|,
literal|"New layer height: (0< new_height)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"local-origin"
block|,
literal|"Use a local origin (as opposed to the image origin)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_scale_proc
specifier|static
name|ProcRecord
name|layer_scale_proc
init|=
block|{
literal|"gimp-layer-scale"
block|,
literal|"gimp-layer-scale"
block|,
literal|"Scale the layer to the specified extents."
block|,
literal|"This procedure scales the layer so that its new width and height are equal to the supplied parameters. The \"local_origin\" parameter specifies whether to scale from the center of the layer, or from the image origin. This operation only works if the layer has been added to an image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|4
block|,
name|layer_scale_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_scale_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_resize_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_resize_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|new_width
decl_stmt|;
name|gint32
name|new_height
decl_stmt|;
name|gint32
name|offx
decl_stmt|;
name|gint32
name|offy
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|new_width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|new_width
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|new_height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|new_height
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|offx
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|offy
operator|=
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|success
operator|=
name|gimp_item_is_attached
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_item_resize
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|,
name|context
argument_list|,
name|new_width
argument_list|,
name|new_height
argument_list|,
name|offx
argument_list|,
name|offy
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_resize_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_resize_inargs
specifier|static
name|ProcArg
name|layer_resize_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"new-width"
block|,
literal|"New layer width: (0< new_width)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"new-height"
block|,
literal|"New layer height: (0< new_height)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offx"
block|,
literal|"x offset between upper left corner of old and new layers: (old - new)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offy"
block|,
literal|"y offset between upper left corner of old and new layers: (old - new)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_resize_proc
specifier|static
name|ProcRecord
name|layer_resize_proc
init|=
block|{
literal|"gimp-layer-resize"
block|,
literal|"gimp-layer-resize"
block|,
literal|"Resize the layer to the specified extents."
block|,
literal|"This procedure resizes the layer so that its new width and height are equal to the supplied parameters. Offsets are also provided which describe the position of the previous layer's content. This operation only works if the layer has been added to an image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|5
block|,
name|layer_resize_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_resize_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_resize_to_image_size_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_resize_to_image_size_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|success
operator|=
name|gimp_item_is_attached
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_layer_resize_to_image
argument_list|(
name|layer
argument_list|,
name|context
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_resize_to_image_size_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_resize_to_image_size_inargs
specifier|static
name|ProcArg
name|layer_resize_to_image_size_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer to resize"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_resize_to_image_size_proc
specifier|static
name|ProcRecord
name|layer_resize_to_image_size_proc
init|=
block|{
literal|"gimp-layer-resize-to-image-size"
block|,
literal|"gimp-layer-resize-to-image-size"
block|,
literal|"Resize a layer to the image size."
block|,
literal|"This procedure resizes the layer so that it's new width and height are equal to the width and height of its image container."
block|,
literal|"Manish Singh"
block|,
literal|"Manish Singh"
block|,
literal|"2003"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_resize_to_image_size_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_resize_to_image_size_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_translate_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_translate_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|offx
decl_stmt|;
name|gint32
name|offy
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|offx
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|offy
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpImage
modifier|*
name|gimage
init|=
name|gimp_item_get_image
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
decl_stmt|;
name|gimp_image_undo_group_start
argument_list|(
name|gimage
argument_list|,
name|GIMP_UNDO_GROUP_ITEM_DISPLACE
argument_list|,
name|_
argument_list|(
literal|"Move Layer"
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_item_translate
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|,
name|offx
argument_list|,
name|offy
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
name|gimp_item_get_linked
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
condition|)
name|gimp_item_linked_translate
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|,
name|offx
argument_list|,
name|offy
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gimp_image_undo_group_end
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_translate_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_translate_inargs
specifier|static
name|ProcArg
name|layer_translate_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offx"
block|,
literal|"Offset in x direction"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offy"
block|,
literal|"Offset in y direction"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_translate_proc
specifier|static
name|ProcRecord
name|layer_translate_proc
init|=
block|{
literal|"gimp-layer-translate"
block|,
literal|"gimp-layer-translate"
block|,
literal|"Translate the layer by the specified offsets."
block|,
literal|"This procedure translates the layer by the amounts specified in the x and y arguments. These can be negative, and are considered offsets from the current position. This command only works if the layer has been added to an image. All additional layers contained in the image which have the linked flag set to TRUE w ill also be translated by the specified offsets."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|3
block|,
name|layer_translate_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_translate_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_offsets_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_set_offsets_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|offx
decl_stmt|;
name|gint32
name|offy
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|offx
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|offy
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpImage
modifier|*
name|gimage
init|=
name|gimp_item_get_image
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
decl_stmt|;
name|gimp_image_undo_group_start
argument_list|(
name|gimage
argument_list|,
name|GIMP_UNDO_GROUP_ITEM_DISPLACE
argument_list|,
name|_
argument_list|(
literal|"Move Layer"
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_item_translate
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|,
name|offx
operator|-
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
operator|->
name|offset_x
argument_list|,
name|offy
operator|-
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
operator|->
name|offset_y
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
name|gimp_item_get_linked
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
condition|)
name|gimp_item_linked_translate
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|,
name|offx
argument_list|,
name|offy
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gimp_image_undo_group_end
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_offsets_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_set_offsets_inargs
specifier|static
name|ProcArg
name|layer_set_offsets_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offx"
block|,
literal|"Offset in x direction"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offy"
block|,
literal|"Offset in y direction"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_offsets_proc
specifier|static
name|ProcRecord
name|layer_set_offsets_proc
init|=
block|{
literal|"gimp-layer-set-offsets"
block|,
literal|"gimp-layer-set-offsets"
block|,
literal|"Set the layer offsets."
block|,
literal|"This procedure sets the offsets for the specified layer. The offsets are relative to the image origin and can be any values. This operation is valid only on layers which have been added to an image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|3
block|,
name|layer_set_offsets_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_set_offsets_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_create_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_create_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|mask_type
decl_stmt|;
name|GimpLayerMask
modifier|*
name|mask
init|=
name|NULL
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|mask_type
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|mask_type
operator|<
name|GIMP_ADD_WHITE_MASK
operator|||
name|mask_type
operator|>
name|GIMP_ADD_COPY_MASK
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
name|mask
operator|=
name|gimp_layer_create_mask
argument_list|(
name|layer
argument_list|,
operator|(
name|GimpAddMaskType
operator|)
name|mask_type
argument_list|)
operator|)
operator|!=
name|NULL
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_create_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|mask
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|mask
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_create_mask_inargs
specifier|static
name|ProcArg
name|layer_create_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer to which to add the mask"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"mask-type"
block|,
literal|"The type of mask: { GIMP_ADD_WHITE_MASK (0), GIMP_ADD_BLACK_MASK (1), GIMP_ADD_ALPHA_MASK (2), GIMP_ADD_ALPHA_TRANSFER_MASK (3), GIMP_ADD_SELECTION_MASK (4), GIMP_ADD_COPY_MASK (5) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_create_mask_outargs
specifier|static
name|ProcArg
name|layer_create_mask_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"mask"
block|,
literal|"The newly created mask"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_create_mask_proc
specifier|static
name|ProcRecord
name|layer_create_mask_proc
init|=
block|{
literal|"gimp-layer-create-mask"
block|,
literal|"gimp-layer-create-mask"
block|,
literal|"Create a layer mask for the specified specified layer."
block|,
literal|"This procedure creates a layer mask for the specified layer. Layer masks serve as an additional alpha channel for a layer. A number of ifferent types of masks are allowed for initialisation: completely white masks (which will leave the layer fully visible), completely black masks (which will give the layer complete transparency, the layer's already existing alpha channel (which will leave the layer fully visible, but which may be more useful than a white mask), the current selection or a grayscale copy of the layer. The layer mask still needs to be added to the layer. This can be done with a call to 'gimp_layer_add_mask'."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_create_mask_inargs
block|,
literal|1
block|,
name|layer_create_mask_outargs
block|,
block|{
block|{
name|layer_create_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_get_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|GimpLayerMask
modifier|*
name|mask
init|=
name|NULL
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|mask
operator|=
name|gimp_layer_get_mask
argument_list|(
name|layer
argument_list|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|mask
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|mask
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_get_mask_inargs
specifier|static
name|ProcArg
name|layer_get_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mask_outargs
specifier|static
name|ProcArg
name|layer_get_mask_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"mask"
block|,
literal|"The layer mask"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mask_proc
specifier|static
name|ProcRecord
name|layer_get_mask_proc
init|=
block|{
literal|"gimp-layer-get-mask"
block|,
literal|"gimp-layer-get-mask"
block|,
literal|"Get the specified layer's mask if it exists."
block|,
literal|"This procedure returns the specified layer's mask, or -1 if none exists."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_get_mask_inargs
block|,
literal|1
block|,
name|layer_get_mask_outargs
block|,
block|{
block|{
name|layer_get_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_from_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_from_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayerMask
modifier|*
name|mask
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
init|=
name|NULL
decl_stmt|;
name|mask
operator|=
operator|(
name|GimpLayerMask
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER_MASK
argument_list|(
name|mask
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|mask
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|layer
operator|=
name|gimp_layer_mask_get_layer
argument_list|(
name|mask
argument_list|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_from_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|layer
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_from_mask_inargs
specifier|static
name|ProcArg
name|layer_from_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"mask"
block|,
literal|"Mask for which to return the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_from_mask_outargs
specifier|static
name|ProcArg
name|layer_from_mask_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The mask's layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_from_mask_proc
specifier|static
name|ProcRecord
name|layer_from_mask_proc
init|=
block|{
literal|"gimp-layer-from-mask"
block|,
literal|"gimp-layer-from-mask"
block|,
literal|"Get the specified mask's layer."
block|,
literal|"This procedure returns the specified mask's layer , or -1 if none exists."
block|,
literal|"Geert Jordaens"
block|,
literal|"Geert Jordaens"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_from_mask_inargs
block|,
literal|1
block|,
name|layer_from_mask_outargs
block|,
block|{
block|{
name|layer_from_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_add_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_add_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|GimpLayerMask
modifier|*
name|mask
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|mask
operator|=
operator|(
name|GimpLayerMask
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER_MASK
argument_list|(
name|mask
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|mask
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|success
operator|=
name|gimp_item_is_attached
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_layer_add_mask
argument_list|(
name|layer
argument_list|,
name|mask
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_add_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_add_mask_inargs
specifier|static
name|ProcArg
name|layer_add_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer to receive the mask"
block|}
block|,
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"mask"
block|,
literal|"The mask to add to the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_add_mask_proc
specifier|static
name|ProcRecord
name|layer_add_mask_proc
init|=
block|{
literal|"gimp-layer-add-mask"
block|,
literal|"gimp-layer-add-mask"
block|,
literal|"Add a layer mask to the specified layer."
block|,
literal|"This procedure adds a layer mask to the specified layer. Layer masks serve as an additional alpha channel for a layer. This procedure will fail if a number of prerequisites aren't met. The layer cannot already have a layer mask. The specified mask must exist and have the same dimensions as the layer. Both the mask and the layer must have been created for use with the specified image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_add_mask_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_add_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_remove_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_remove_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|mode
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|mode
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|mode
operator|<
name|GIMP_MASK_APPLY
operator|||
name|mode
operator|>
name|GIMP_MASK_DISCARD
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|success
operator|=
name|gimp_item_is_attached
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|gimp_layer_apply_mask
argument_list|(
name|layer
argument_list|,
name|mode
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_remove_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_remove_mask_inargs
specifier|static
name|ProcArg
name|layer_remove_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer from which to remove mask"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"mode"
block|,
literal|"Removal mode: { GIMP_MASK_APPLY (0), GIMP_MASK_DISCARD (1) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_remove_mask_proc
specifier|static
name|ProcRecord
name|layer_remove_mask_proc
init|=
block|{
literal|"gimp-layer-remove-mask"
block|,
literal|"gimp-layer-remove-mask"
block|,
literal|"Remove the specified layer mask from the layer."
block|,
literal|"This procedure removes the specified layer mask from the layer. If the mask doesn't exist, an error is returned."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_remove_mask_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_remove_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_is_floating_sel_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_is_floating_sel_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|is_floating_sel
init|=
name|FALSE
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|is_floating_sel
operator|=
name|gimp_layer_is_floating_sel
argument_list|(
name|layer
argument_list|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_is_floating_sel_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|is_floating_sel
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_is_floating_sel_inargs
specifier|static
name|ProcArg
name|layer_is_floating_sel_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_is_floating_sel_outargs
specifier|static
name|ProcArg
name|layer_is_floating_sel_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"is-floating-sel"
block|,
literal|"Non-zero if the layer is a floating selection"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_is_floating_sel_proc
specifier|static
name|ProcRecord
name|layer_is_floating_sel_proc
init|=
block|{
literal|"gimp-layer-is-floating-sel"
block|,
literal|"gimp-layer-is-floating-sel"
block|,
literal|"Is the specified layer a floating selection?"
block|,
literal|"This procedure returns whether the layer is a floating selection. Floating selections are special cases of layers which are attached to a specific drawable."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_is_floating_sel_inargs
block|,
literal|1
block|,
name|layer_is_floating_sel_outargs
block|,
block|{
block|{
name|layer_is_floating_sel_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_lock_alpha_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_get_lock_alpha_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|lock_alpha
init|=
name|FALSE
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|lock_alpha
operator|=
name|gimp_layer_get_lock_alpha
argument_list|(
name|layer
argument_list|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_lock_alpha_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|lock_alpha
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_get_lock_alpha_inargs
specifier|static
name|ProcArg
name|layer_get_lock_alpha_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_lock_alpha_outargs
specifier|static
name|ProcArg
name|layer_get_lock_alpha_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"lock-alpha"
block|,
literal|"The layer's lock alpha channel setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_lock_alpha_proc
specifier|static
name|ProcRecord
name|layer_get_lock_alpha_proc
init|=
block|{
literal|"gimp-layer-get-lock-alpha"
block|,
literal|"gimp-layer-get-lock-alpha"
block|,
literal|"Get the lock alpha channel setting of the specified layer."
block|,
literal|"This procedure returns the specified layer's lock alpha channel setting."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_get_lock_alpha_inargs
block|,
literal|1
block|,
name|layer_get_lock_alpha_outargs
block|,
block|{
block|{
name|layer_get_lock_alpha_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_lock_alpha_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_set_lock_alpha_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|lock_alpha
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|lock_alpha
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_layer_set_lock_alpha
argument_list|(
name|layer
argument_list|,
name|lock_alpha
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_lock_alpha_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_set_lock_alpha_inargs
specifier|static
name|ProcArg
name|layer_set_lock_alpha_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"lock-alpha"
block|,
literal|"The new layer's lock alpha channel setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_lock_alpha_proc
specifier|static
name|ProcRecord
name|layer_set_lock_alpha_proc
init|=
block|{
literal|"gimp-layer-set-lock-alpha"
block|,
literal|"gimp-layer-set-lock-alpha"
block|,
literal|"Set the lock alpha channel setting of the specified layer."
block|,
literal|"This procedure sets the specified layer's lock alpha channel setting."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_set_lock_alpha_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_set_lock_alpha_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_apply_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_get_apply_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|apply_mask
init|=
name|FALSE
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|apply_mask
operator|=
name|gimp_layer_mask_get_apply
argument_list|(
name|layer
operator|->
name|mask
argument_list|)
expr_stmt|;
else|else
name|apply_mask
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_apply_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|apply_mask
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_get_apply_mask_inargs
specifier|static
name|ProcArg
name|layer_get_apply_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_apply_mask_outargs
specifier|static
name|ProcArg
name|layer_get_apply_mask_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"apply-mask"
block|,
literal|"The layer's apply mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_apply_mask_proc
specifier|static
name|ProcRecord
name|layer_get_apply_mask_proc
init|=
block|{
literal|"gimp-layer-get-apply-mask"
block|,
literal|"gimp-layer-get-apply-mask"
block|,
literal|"Get the apply mask setting of the specified layer."
block|,
literal|"This procedure returns the specified layer's apply mask setting. If the value is non-zero, then the layer mask for this layer is currently being composited with the layer's alpha channel."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_get_apply_mask_inargs
block|,
literal|1
block|,
name|layer_get_apply_mask_outargs
block|,
block|{
block|{
name|layer_get_apply_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_apply_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_set_apply_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|apply_mask
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|apply_mask
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|gimp_layer_mask_set_apply
argument_list|(
name|layer
operator|->
name|mask
argument_list|,
name|apply_mask
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_apply_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_set_apply_mask_inargs
specifier|static
name|ProcArg
name|layer_set_apply_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"apply-mask"
block|,
literal|"The new layer's apply mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_apply_mask_proc
specifier|static
name|ProcRecord
name|layer_set_apply_mask_proc
init|=
block|{
literal|"gimp-layer-set-apply-mask"
block|,
literal|"gimp-layer-set-apply-mask"
block|,
literal|"Set the apply mask setting of the specified layer."
block|,
literal|"This procedure sets the specified layer's apply mask setting. This controls whether the layer's mask is currently affecting the alpha channel. If there is no layer mask, this function will return an error."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_set_apply_mask_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_set_apply_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_show_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_get_show_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|show_mask
init|=
name|FALSE
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|show_mask
operator|=
name|gimp_layer_mask_get_show
argument_list|(
name|layer
operator|->
name|mask
argument_list|)
expr_stmt|;
else|else
name|show_mask
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_show_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|show_mask
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_get_show_mask_inargs
specifier|static
name|ProcArg
name|layer_get_show_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_show_mask_outargs
specifier|static
name|ProcArg
name|layer_get_show_mask_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"show-mask"
block|,
literal|"The layer's show mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_show_mask_proc
specifier|static
name|ProcRecord
name|layer_get_show_mask_proc
init|=
block|{
literal|"gimp-layer-get-show-mask"
block|,
literal|"gimp-layer-get-show-mask"
block|,
literal|"Get the show mask setting of the specified layer."
block|,
literal|"This procedure returns the specified layer's show mask setting. This controls whether the layer or its mask is visible. Non-zero values indicate that the mask should be visible. If the layer has no mask, then this function returns an error."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_get_show_mask_inargs
block|,
literal|1
block|,
name|layer_get_show_mask_outargs
block|,
block|{
block|{
name|layer_get_show_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_show_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_set_show_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|show_mask
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|show_mask
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|gimp_layer_mask_set_show
argument_list|(
name|layer
operator|->
name|mask
argument_list|,
name|show_mask
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_show_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_set_show_mask_inargs
specifier|static
name|ProcArg
name|layer_set_show_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"show-mask"
block|,
literal|"The new layer's show mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_show_mask_proc
specifier|static
name|ProcRecord
name|layer_set_show_mask_proc
init|=
block|{
literal|"gimp-layer-set-show-mask"
block|,
literal|"gimp-layer-set-show-mask"
block|,
literal|"Set the show mask setting of the specified layer."
block|,
literal|"This procedure sets the specified layer's show mask setting. This controls whether the layer's mask is currently affecting the alpha channel. If there is no layer mask, this function will return an error."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_set_show_mask_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_set_show_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_edit_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_get_edit_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|edit_mask
init|=
name|FALSE
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|edit_mask
operator|=
name|gimp_layer_mask_get_edit
argument_list|(
name|layer
operator|->
name|mask
argument_list|)
expr_stmt|;
else|else
name|edit_mask
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_edit_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|edit_mask
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_get_edit_mask_inargs
specifier|static
name|ProcArg
name|layer_get_edit_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_edit_mask_outargs
specifier|static
name|ProcArg
name|layer_get_edit_mask_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"edit-mask"
block|,
literal|"The layer's edit mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_edit_mask_proc
specifier|static
name|ProcRecord
name|layer_get_edit_mask_proc
init|=
block|{
literal|"gimp-layer-get-edit-mask"
block|,
literal|"gimp-layer-get-edit-mask"
block|,
literal|"Get the edit mask setting of the specified layer."
block|,
literal|"This procedure returns the specified layer's edit mask setting. If the value is non-zero, then the layer mask for this layer is currently active, and not the layer."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_get_edit_mask_inargs
block|,
literal|1
block|,
name|layer_get_edit_mask_outargs
block|,
block|{
block|{
name|layer_get_edit_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_edit_mask_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_set_edit_mask_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gboolean
name|edit_mask
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|edit_mask
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|gimp_layer_mask_set_edit
argument_list|(
name|layer
operator|->
name|mask
argument_list|,
name|edit_mask
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_edit_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_set_edit_mask_inargs
specifier|static
name|ProcArg
name|layer_set_edit_mask_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"edit-mask"
block|,
literal|"The new layer's edit mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_edit_mask_proc
specifier|static
name|ProcRecord
name|layer_set_edit_mask_proc
init|=
block|{
literal|"gimp-layer-set-edit-mask"
block|,
literal|"gimp-layer-set-edit-mask"
block|,
literal|"Set the edit mask setting of the specified layer."
block|,
literal|"This procedure sets the specified layer's edit mask setting. This controls whether the layer or it's mask is currently active for editing. If the specified layer has no layer mask, then this procedure will return an error."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_set_edit_mask_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_set_edit_mask_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_opacity_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_get_opacity_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gdouble
name|opacity
init|=
literal|0.0
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|opacity
operator|=
name|gimp_layer_get_opacity
argument_list|(
name|layer
argument_list|)
operator|*
literal|100.0
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_opacity_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
operator|=
name|opacity
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_get_opacity_inargs
specifier|static
name|ProcArg
name|layer_get_opacity_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_opacity_outargs
specifier|static
name|ProcArg
name|layer_get_opacity_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"The layer opacity"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_opacity_proc
specifier|static
name|ProcRecord
name|layer_get_opacity_proc
init|=
block|{
literal|"gimp-layer-get-opacity"
block|,
literal|"gimp-layer-get-opacity"
block|,
literal|"Get the opacity of the specified layer."
block|,
literal|"This procedure returns the specified layer's opacity."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_get_opacity_inargs
block|,
literal|1
block|,
name|layer_get_opacity_outargs
block|,
block|{
block|{
name|layer_get_opacity_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_opacity_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_set_opacity_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gdouble
name|opacity
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|opacity
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
expr_stmt|;
if|if
condition|(
name|opacity
operator|<
literal|0.0
operator|||
name|opacity
operator|>
literal|100.0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_layer_set_opacity
argument_list|(
name|layer
argument_list|,
name|opacity
operator|/
literal|100.0
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_opacity_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_set_opacity_inargs
specifier|static
name|ProcArg
name|layer_set_opacity_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"The new layer opacity (0<= opacity<= 100)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_opacity_proc
specifier|static
name|ProcRecord
name|layer_set_opacity_proc
init|=
block|{
literal|"gimp-layer-set-opacity"
block|,
literal|"gimp-layer-set-opacity"
block|,
literal|"Set the opacity of the specified layer."
block|,
literal|"This procedure sets the specified layer's opacity."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_set_opacity_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_set_opacity_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_mode_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_get_mode_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|mode
init|=
literal|0
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|mode
operator|=
name|gimp_layer_get_mode
argument_list|(
name|layer
argument_list|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_mode_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|mode
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_get_mode_inargs
specifier|static
name|ProcArg
name|layer_get_mode_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mode_outargs
specifier|static
name|ProcArg
name|layer_get_mode_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"mode"
block|,
literal|"The layer combination mode"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mode_proc
specifier|static
name|ProcRecord
name|layer_get_mode_proc
init|=
block|{
literal|"gimp-layer-get-mode"
block|,
literal|"gimp-layer-get-mode"
block|,
literal|"Get the combination mode of the specified layer."
block|,
literal|"This procedure returns the specified layer's combination mode."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|layer_get_mode_inargs
block|,
literal|1
block|,
name|layer_get_mode_outargs
block|,
block|{
block|{
name|layer_get_mode_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_mode_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|layer_set_mode_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpLayer
modifier|*
name|layer
decl_stmt|;
name|gint32
name|mode
decl_stmt|;
name|layer
operator|=
operator|(
name|GimpLayer
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_LAYER
argument_list|(
name|layer
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|layer
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|mode
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|mode
operator|<
name|GIMP_NORMAL_MODE
operator|||
name|mode
operator|>
name|GIMP_COLOR_ERASE_MODE
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_layer_set_mode
argument_list|(
name|layer
argument_list|,
name|mode
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_mode_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|layer_set_mode_inargs
specifier|static
name|ProcArg
name|layer_set_mode_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_LAYER
block|,
literal|"layer"
block|,
literal|"The layer"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"mode"
block|,
literal|"The new layer combination mode (GIMP_NORMAL_MODE (0), GIMP_DISSOLVE_MODE (1), GIMP_BEHIND_MODE (2), GIMP_MULTIPLY_MODE (3), GIMP_SCREEN_MODE (4), GIMP_OVERLAY_MODE (5), GIMP_DIFFERENCE_MODE (6), GIMP_ADDITION_MODE (7), GIMP_SUBTRACT_MODE (8), GIMP_DARKEN_ONLY_MODE (9), GIMP_LIGHTEN_ONLY_MODE (10), GIMP_HUE_MODE (11), GIMP_SATURATION_MODE (12), GIMP_COLOR_MODE (13), GIMP_VALUE_MODE (14), GIMP_DIVIDE_MODE (15), GIMP_DODGE_MODE (16), GIMP_BURN_MODE (17), GIMP_HARDLIGHT_MODE (18), GIMP_SOFTLIGHT_MODE (19), GIMP_GRAIN_EXTRACT_MODE (20), GIMP_GRAIN_MERGE_MODE (21), GIMP_COLOR_ERASE_MODE (22))"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_mode_proc
specifier|static
name|ProcRecord
name|layer_set_mode_proc
init|=
block|{
literal|"gimp-layer-set-mode"
block|,
literal|"gimp-layer-set-mode"
block|,
literal|"Set the combination mode of the specified layer."
block|,
literal|"This procedure sets the specified layer's combination mode."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|layer_set_mode_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|layer_set_mode_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

end_unit

