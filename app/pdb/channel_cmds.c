begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995-2003 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_comment
comment|/* NOTE: This file is autogenerated by pdbgen.pl. */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<glib-object.h>
end_include

begin_include
include|#
directive|include
file|"libgimpcolor/gimpcolor.h"
end_include

begin_include
include|#
directive|include
file|"pdb-types.h"
end_include

begin_include
include|#
directive|include
file|"procedural_db.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpchannel-combine.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpchannel.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpimage.h"
end_include

begin_decl_stmt
DECL|variable|channel_new_proc
specifier|static
name|ProcRecord
name|channel_new_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_new_from_component_proc
specifier|static
name|ProcRecord
name|channel_new_from_component_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_copy_proc
specifier|static
name|ProcRecord
name|channel_copy_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_combine_masks_proc
specifier|static
name|ProcRecord
name|channel_combine_masks_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_show_masked_proc
specifier|static
name|ProcRecord
name|channel_get_show_masked_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_set_show_masked_proc
specifier|static
name|ProcRecord
name|channel_set_show_masked_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_opacity_proc
specifier|static
name|ProcRecord
name|channel_get_opacity_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_set_opacity_proc
specifier|static
name|ProcRecord
name|channel_set_opacity_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_color_proc
specifier|static
name|ProcRecord
name|channel_get_color_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_set_color_proc
specifier|static
name|ProcRecord
name|channel_set_color_proc
decl_stmt|;
end_decl_stmt

begin_function
name|void
DECL|function|register_channel_procs (Gimp * gimp)
name|register_channel_procs
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|)
block|{
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_new_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_new_from_component_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_copy_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_combine_masks_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_get_show_masked_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_set_show_masked_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_get_opacity_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_set_opacity_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_get_color_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|channel_set_color_proc
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_new_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_new_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpImage
modifier|*
name|gimage
decl_stmt|;
name|gint32
name|width
decl_stmt|;
name|gint32
name|height
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gdouble
name|opacity
decl_stmt|;
name|GimpRGB
name|color
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
init|=
name|NULL
decl_stmt|;
name|gimage
operator|=
name|gimp_image_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|GIMP_IS_IMAGE
argument_list|(
name|gimage
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|width
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|height
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|opacity
operator|=
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_float
expr_stmt|;
if|if
condition|(
name|opacity
operator|<
literal|0.0
operator|||
name|opacity
operator|>
literal|100.0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|color
operator|=
name|args
index|[
literal|5
index|]
operator|.
name|value
operator|.
name|pdb_color
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpRGB
name|rgb_color
init|=
name|color
decl_stmt|;
name|rgb_color
operator|.
name|a
operator|=
name|opacity
operator|/
literal|100.0
expr_stmt|;
name|channel
operator|=
name|gimp_channel_new
argument_list|(
name|gimage
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|name
argument_list|,
operator|&
name|rgb_color
argument_list|)
expr_stmt|;
name|success
operator|=
name|channel
operator|!=
name|NULL
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_new_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|channel
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_new_inargs
specifier|static
name|ProcArg
name|channel_new_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_IMAGE
block|,
literal|"image"
block|,
literal|"The image to which to add the channel"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"width"
block|,
literal|"The channel width: (0< width)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"height"
block|,
literal|"The channel height: (0< height)"
block|}
block|,
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The channel name"
block|}
block|,
block|{
name|GIMP_PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"The channel opacity: (0<= opacity<= 100)"
block|}
block|,
block|{
name|GIMP_PDB_COLOR
block|,
literal|"color"
block|,
literal|"The channel compositing color"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_new_outargs
specifier|static
name|ProcArg
name|channel_new_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The newly created channel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_new_proc
specifier|static
name|ProcRecord
name|channel_new_proc
init|=
block|{
literal|"gimp-channel-new"
block|,
literal|"gimp-channel-new"
block|,
literal|"Create a new channel."
block|,
literal|"This procedure creates a new channel with the specified width and height. Name, opacity, and color are also supplied parameters. The new channel still needs to be added to the image, as this is not automatic. Add the new channel with the 'gimp_image_add_channel' command. Other attributes such as channel show masked, should be set with explicit procedure calls. The channel's contents are undefined initially."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|6
block|,
name|channel_new_inargs
block|,
literal|1
block|,
name|channel_new_outargs
block|,
block|{
block|{
name|channel_new_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_new_from_component_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_new_from_component_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpImage
modifier|*
name|gimage
decl_stmt|;
name|gint32
name|component
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
init|=
name|NULL
decl_stmt|;
name|gimage
operator|=
name|gimp_image_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|GIMP_IS_IMAGE
argument_list|(
name|gimage
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|component
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|component
operator|<
name|GIMP_RED_CHANNEL
operator|||
name|component
operator|>
name|GIMP_ALPHA_CHANNEL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|gimp_image_get_component_index
argument_list|(
name|gimage
argument_list|,
name|component
argument_list|)
operator|!=
operator|-
literal|1
condition|)
name|channel
operator|=
name|gimp_channel_new_from_component
argument_list|(
name|gimage
argument_list|,
name|component
argument_list|,
name|name
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|channel
condition|)
name|gimp_item_set_visible
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_new_from_component_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|channel
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_new_from_component_inargs
specifier|static
name|ProcArg
name|channel_new_from_component_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_IMAGE
block|,
literal|"image"
block|,
literal|"The image to which to add the channel"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"component"
block|,
literal|"The image component: { GIMP_RED_CHANNEL (0), GIMP_GREEN_CHANNEL (1), GIMP_BLUE_CHANNEL (2), GIMP_GRAY_CHANNEL (3), GIMP_INDEXED_CHANNEL (4), GIMP_ALPHA_CHANNEL (5) }"
block|}
block|,
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The channel name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_new_from_component_outargs
specifier|static
name|ProcArg
name|channel_new_from_component_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The newly created channel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_new_from_component_proc
specifier|static
name|ProcRecord
name|channel_new_from_component_proc
init|=
block|{
literal|"gimp-channel-new-from-component"
block|,
literal|"gimp-channel-new-from-component"
block|,
literal|"Create a new channel from a color component"
block|,
literal|"This procedure creates a new channel from a color component."
block|,
literal|"Shlomi Fish<shlomif@iglu.org.il>"
block|,
literal|"Shlomi Fish"
block|,
literal|"2005"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|3
block|,
name|channel_new_from_component_inargs
block|,
literal|1
block|,
name|channel_new_from_component_outargs
block|,
block|{
block|{
name|channel_new_from_component_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_copy_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_copy_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
decl_stmt|;
name|GimpChannel
modifier|*
name|channel_copy
init|=
name|NULL
decl_stmt|;
name|channel
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|channel_copy
operator|=
name|GIMP_CHANNEL
argument_list|(
name|gimp_item_duplicate
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|,
name|G_TYPE_FROM_INSTANCE
argument_list|(
name|channel
argument_list|)
argument_list|,
name|FALSE
argument_list|)
argument_list|)
expr_stmt|;
name|success
operator|=
operator|(
name|channel_copy
operator|!=
name|NULL
operator|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_copy_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|channel_copy
condition|?
name|gimp_item_get_ID
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel_copy
argument_list|)
argument_list|)
else|:
operator|-
literal|1
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_copy_inargs
specifier|static
name|ProcArg
name|channel_copy_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The channel to copy"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_copy_outargs
specifier|static
name|ProcArg
name|channel_copy_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel-copy"
block|,
literal|"The newly copied channel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_copy_proc
specifier|static
name|ProcRecord
name|channel_copy_proc
init|=
block|{
literal|"gimp-channel-copy"
block|,
literal|"gimp-channel-copy"
block|,
literal|"Copy a channel."
block|,
literal|"This procedure copies the specified channel and returns the copy."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|channel_copy_inargs
block|,
literal|1
block|,
name|channel_copy_outargs
block|,
block|{
block|{
name|channel_copy_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_combine_masks_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_combine_masks_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpChannel
modifier|*
name|channel1
decl_stmt|;
name|GimpChannel
modifier|*
name|channel2
decl_stmt|;
name|gint32
name|operation
decl_stmt|;
name|gint32
name|offx
decl_stmt|;
name|gint32
name|offy
decl_stmt|;
name|channel1
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel1
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel1
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|channel2
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel2
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel2
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|operation
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|operation
operator|<
name|GIMP_CHANNEL_OP_ADD
operator|||
name|operation
operator|>
name|GIMP_CHANNEL_OP_INTERSECT
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|offx
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|offy
operator|=
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_channel_combine_mask
argument_list|(
name|channel1
argument_list|,
name|channel2
argument_list|,
name|operation
argument_list|,
name|offx
argument_list|,
name|offy
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_combine_masks_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_combine_masks_inargs
specifier|static
name|ProcArg
name|channel_combine_masks_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel1"
block|,
literal|"The channel1"
block|}
block|,
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel2"
block|,
literal|"The channel2"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"operation"
block|,
literal|"The selection operation: { GIMP_CHANNEL_OP_ADD (0), GIMP_CHANNEL_OP_SUBTRACT (1), GIMP_CHANNEL_OP_REPLACE (2), GIMP_CHANNEL_OP_INTERSECT (3) }"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offx"
block|,
literal|"x offset between upper left corner of channels: (second - first)"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"offy"
block|,
literal|"y offset between upper left corner of channels: (second - first)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_combine_masks_proc
specifier|static
name|ProcRecord
name|channel_combine_masks_proc
init|=
block|{
literal|"gimp-channel-combine-masks"
block|,
literal|"gimp-channel-combine-masks"
block|,
literal|"Combine two channel masks."
block|,
literal|"This procedure combines two channel masks. The result is stored in the first channel."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|5
block|,
name|channel_combine_masks_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|channel_combine_masks_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_get_show_masked_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_get_show_masked_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
decl_stmt|;
name|gboolean
name|show_masked
init|=
name|FALSE
decl_stmt|;
name|channel
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|show_masked
operator|=
name|gimp_channel_get_show_masked
argument_list|(
name|channel
argument_list|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_get_show_masked_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|show_masked
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_get_show_masked_inargs
specifier|static
name|ProcArg
name|channel_get_show_masked_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The channel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_show_masked_outargs
specifier|static
name|ProcArg
name|channel_get_show_masked_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"show-masked"
block|,
literal|"The channel composite method"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_show_masked_proc
specifier|static
name|ProcRecord
name|channel_get_show_masked_proc
init|=
block|{
literal|"gimp-channel-get-show-masked"
block|,
literal|"gimp-channel-get-show-masked"
block|,
literal|"Get the composite method of the specified channel."
block|,
literal|"This procedure returns the specified channel's composite method. If it is non-zero, then the channel is composited with the image so that masked regions are shown. Otherwise, selected regions are shown."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|channel_get_show_masked_inargs
block|,
literal|1
block|,
name|channel_get_show_masked_outargs
block|,
block|{
block|{
name|channel_get_show_masked_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_set_show_masked_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_set_show_masked_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
decl_stmt|;
name|gboolean
name|show_masked
decl_stmt|;
name|channel
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|show_masked
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_channel_set_show_masked
argument_list|(
name|channel
argument_list|,
name|show_masked
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_set_show_masked_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_set_show_masked_inargs
specifier|static
name|ProcArg
name|channel_set_show_masked_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The channel"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"show-masked"
block|,
literal|"The new channel composite method"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_set_show_masked_proc
specifier|static
name|ProcRecord
name|channel_set_show_masked_proc
init|=
block|{
literal|"gimp-channel-set-show-masked"
block|,
literal|"gimp-channel-set-show-masked"
block|,
literal|"Set the composite method of the specified channel."
block|,
literal|"This procedure sets the specified channel's composite method. If it is non-zero, then the channel is composited with the image so that masked regions are shown. Otherwise, selected regions are shown."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|channel_set_show_masked_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|channel_set_show_masked_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_get_opacity_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_get_opacity_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
decl_stmt|;
name|gdouble
name|opacity
init|=
literal|0.0
decl_stmt|;
name|channel
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|opacity
operator|=
name|gimp_channel_get_opacity
argument_list|(
name|channel
argument_list|)
operator|*
literal|100
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_get_opacity_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
operator|=
name|opacity
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_get_opacity_inargs
specifier|static
name|ProcArg
name|channel_get_opacity_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The channel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_opacity_outargs
specifier|static
name|ProcArg
name|channel_get_opacity_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"The channel opacity"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_opacity_proc
specifier|static
name|ProcRecord
name|channel_get_opacity_proc
init|=
block|{
literal|"gimp-channel-get-opacity"
block|,
literal|"gimp-channel-get-opacity"
block|,
literal|"Get the opacity of the specified channel."
block|,
literal|"This procedure returns the specified channel's opacity."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|channel_get_opacity_inargs
block|,
literal|1
block|,
name|channel_get_opacity_outargs
block|,
block|{
block|{
name|channel_get_opacity_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_set_opacity_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_set_opacity_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
decl_stmt|;
name|gdouble
name|opacity
decl_stmt|;
name|channel
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|opacity
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
expr_stmt|;
if|if
condition|(
name|opacity
operator|<
literal|0.0
operator|||
name|opacity
operator|>
literal|100.0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_channel_set_opacity
argument_list|(
name|channel
argument_list|,
name|opacity
operator|/
literal|100.0
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_set_opacity_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_set_opacity_inargs
specifier|static
name|ProcArg
name|channel_set_opacity_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The channel"
block|}
block|,
block|{
name|GIMP_PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"The new channel opacity (0<= opacity<= 100)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_set_opacity_proc
specifier|static
name|ProcRecord
name|channel_set_opacity_proc
init|=
block|{
literal|"gimp-channel-set-opacity"
block|,
literal|"gimp-channel-set-opacity"
block|,
literal|"Set the opacity of the specified channel."
block|,
literal|"This procedure sets the specified channel's opacity."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|channel_set_opacity_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|channel_set_opacity_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_get_color_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_get_color_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
decl_stmt|;
name|GimpRGB
name|color
init|=
block|{
literal|0.0
block|,
literal|0.0
block|,
literal|0.0
block|,
literal|1.0
block|}
decl_stmt|;
name|channel
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|gimp_channel_get_color
argument_list|(
name|channel
argument_list|,
operator|&
name|color
argument_list|)
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_get_color_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_color
operator|=
name|color
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_get_color_inargs
specifier|static
name|ProcArg
name|channel_get_color_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The channel"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_color_outargs
specifier|static
name|ProcArg
name|channel_get_color_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_COLOR
block|,
literal|"color"
block|,
literal|"The channel compositing color"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_get_color_proc
specifier|static
name|ProcRecord
name|channel_get_color_proc
init|=
block|{
literal|"gimp-channel-get-color"
block|,
literal|"gimp-channel-get-color"
block|,
literal|"Get the compositing color of the specified channel."
block|,
literal|"This procedure returns the specified channel's compositing color."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|channel_get_color_inargs
block|,
literal|1
block|,
name|channel_get_color_outargs
block|,
block|{
block|{
name|channel_get_color_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|channel_set_color_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|channel_set_color_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|GimpChannel
modifier|*
name|channel
decl_stmt|;
name|GimpRGB
name|color
decl_stmt|;
name|channel
operator|=
operator|(
name|GimpChannel
operator|*
operator|)
name|gimp_item_get_by_ID
argument_list|(
name|gimp
argument_list|,
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GIMP_IS_CHANNEL
argument_list|(
name|channel
argument_list|)
operator|&&
operator|!
name|gimp_item_is_removed
argument_list|(
name|GIMP_ITEM
argument_list|(
name|channel
argument_list|)
argument_list|)
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|color
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_color
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpRGB
name|rgb_color
init|=
name|color
decl_stmt|;
name|rgb_color
operator|.
name|a
operator|=
name|channel
operator|->
name|color
operator|.
name|a
expr_stmt|;
name|gimp_channel_set_color
argument_list|(
name|channel
argument_list|,
operator|&
name|rgb_color
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|channel_set_color_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|channel_set_color_inargs
specifier|static
name|ProcArg
name|channel_set_color_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_CHANNEL
block|,
literal|"channel"
block|,
literal|"The channel"
block|}
block|,
block|{
name|GIMP_PDB_COLOR
block|,
literal|"color"
block|,
literal|"The new channel compositing color"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|channel_set_color_proc
specifier|static
name|ProcRecord
name|channel_set_color_proc
init|=
block|{
literal|"gimp-channel-set-color"
block|,
literal|"gimp-channel-set-color"
block|,
literal|"Set the compositing color of the specified channel."
block|,
literal|"This procedure sets the specified channel's compositing color."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|channel_set_color_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|channel_set_color_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

end_unit

