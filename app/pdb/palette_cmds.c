begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995-2003 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_comment
comment|/* NOTE: This file is autogenerated by pdbgen.pl. */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<glib-object.h>
end_include

begin_include
include|#
directive|include
file|"libgimpcolor/gimpcolor.h"
end_include

begin_include
include|#
directive|include
file|"pdb-types.h"
end_include

begin_include
include|#
directive|include
file|"procedural_db.h"
end_include

begin_include
include|#
directive|include
file|"core/gimp.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpcontext.h"
end_include

begin_include
include|#
directive|include
file|"core/gimpdatafactory.h"
end_include

begin_include
include|#
directive|include
file|"core/gimplist.h"
end_include

begin_include
include|#
directive|include
file|"core/gimppalette.h"
end_include

begin_decl_stmt
DECL|variable|palette_new_proc
specifier|static
name|ProcRecord
name|palette_new_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_duplicate_proc
specifier|static
name|ProcRecord
name|palette_duplicate_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_rename_proc
specifier|static
name|ProcRecord
name|palette_rename_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_delete_proc
specifier|static
name|ProcRecord
name|palette_delete_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_is_editable_proc
specifier|static
name|ProcRecord
name|palette_is_editable_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_get_info_proc
specifier|static
name|ProcRecord
name|palette_get_info_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_get_columns_proc
specifier|static
name|ProcRecord
name|palette_get_columns_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_set_columns_proc
specifier|static
name|ProcRecord
name|palette_set_columns_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_add_entry_proc
specifier|static
name|ProcRecord
name|palette_add_entry_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_delete_entry_proc
specifier|static
name|ProcRecord
name|palette_delete_entry_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_get_color_proc
specifier|static
name|ProcRecord
name|palette_entry_get_color_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_set_color_proc
specifier|static
name|ProcRecord
name|palette_entry_set_color_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_get_name_proc
specifier|static
name|ProcRecord
name|palette_entry_get_name_proc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_set_name_proc
specifier|static
name|ProcRecord
name|palette_entry_set_name_proc
decl_stmt|;
end_decl_stmt

begin_function
name|void
DECL|function|register_palette_procs (Gimp * gimp)
name|register_palette_procs
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|)
block|{
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_new_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_duplicate_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_rename_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_delete_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_is_editable_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_get_info_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_get_columns_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_set_columns_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_add_entry_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_delete_entry_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_entry_get_color_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_entry_set_color_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_entry_get_name_proc
argument_list|)
expr_stmt|;
name|procedural_db_register
argument_list|(
name|gimp
argument_list|,
operator|&
name|palette_entry_set_name_proc
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_new_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_new_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gchar
modifier|*
name|actual_name
init|=
name|NULL
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
if|if
condition|(
name|strlen
argument_list|(
name|name
argument_list|)
condition|)
block|{
name|GimpData
modifier|*
name|data
init|=
name|gimp_data_factory_data_new
argument_list|(
name|gimp
operator|->
name|palette_factory
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
condition|)
name|actual_name
operator|=
name|g_strdup
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|data
argument_list|)
operator|->
name|name
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_new_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|actual_name
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_new_inargs
specifier|static
name|ProcArg
name|palette_new_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The requested name of the new palette"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_new_outargs
specifier|static
name|ProcArg
name|palette_new_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"actual-name"
block|,
literal|"The actual new palette name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_new_proc
specifier|static
name|ProcRecord
name|palette_new_proc
init|=
block|{
literal|"gimp-palette-new"
block|,
literal|"gimp-palette-new"
block|,
literal|"Creates a new palette"
block|,
literal|"This procedure creates a new, uninitialized palette"
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|palette_new_inargs
block|,
literal|1
block|,
name|palette_new_outargs
block|,
block|{
block|{
name|palette_new_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_duplicate_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_duplicate_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gchar
modifier|*
name|copy_name
init|=
name|NULL
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
condition|)
block|{
name|GimpPalette
modifier|*
name|palette_copy
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_data_factory_data_duplicate
argument_list|(
name|gimp
operator|->
name|palette_factory
argument_list|,
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette_copy
condition|)
name|copy_name
operator|=
name|g_strdup
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|palette_copy
argument_list|)
operator|->
name|name
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_duplicate_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|copy_name
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_duplicate_inargs
specifier|static
name|ProcArg
name|palette_duplicate_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_duplicate_outargs
specifier|static
name|ProcArg
name|palette_duplicate_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"copy-name"
block|,
literal|"The name of the palette's copy"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_duplicate_proc
specifier|static
name|ProcRecord
name|palette_duplicate_proc
init|=
block|{
literal|"gimp-palette-duplicate"
block|,
literal|"gimp-palette-duplicate"
block|,
literal|"Duplicates a palette"
block|,
literal|"This procedure creates an identical palette by a different name"
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|palette_duplicate_inargs
block|,
literal|1
block|,
name|palette_duplicate_outargs
block|,
block|{
block|{
name|palette_duplicate_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_rename_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_rename_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gchar
modifier|*
name|new_name
decl_stmt|;
name|gchar
modifier|*
name|actual_name
init|=
name|NULL
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|new_name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|new_name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|new_name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
operator|&&
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|writable
condition|)
block|{
name|gimp_object_set_name
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|palette
argument_list|)
argument_list|,
name|new_name
argument_list|)
expr_stmt|;
name|actual_name
operator|=
name|g_strdup
argument_list|(
name|GIMP_OBJECT
argument_list|(
name|palette
argument_list|)
operator|->
name|name
argument_list|)
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_rename_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|actual_name
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_rename_inargs
specifier|static
name|ProcArg
name|palette_rename_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_STRING
block|,
literal|"new-name"
block|,
literal|"The new name of the palette"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_rename_outargs
specifier|static
name|ProcArg
name|palette_rename_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"actual-name"
block|,
literal|"The actual new name of the palette"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_rename_proc
specifier|static
name|ProcRecord
name|palette_rename_proc
init|=
block|{
literal|"gimp-palette-rename"
block|,
literal|"gimp-palette-rename"
block|,
literal|"Rename a palette"
block|,
literal|"This procedure renames a palette"
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|palette_rename_inargs
block|,
literal|1
block|,
name|palette_rename_outargs
block|,
block|{
block|{
name|palette_rename_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_delete_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_delete_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
operator|&&
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|deletable
condition|)
block|{
name|GError
modifier|*
name|error
init|=
name|NULL
decl_stmt|;
name|success
operator|=
name|gimp_data_factory_data_delete
argument_list|(
name|gimp
operator|->
name|palette_factory
argument_list|,
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
argument_list|,
name|TRUE
argument_list|,
operator|&
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|success
condition|)
block|{
name|g_message
argument_list|(
name|error
operator|->
name|message
argument_list|)
expr_stmt|;
name|g_clear_error
argument_list|(
operator|&
name|error
argument_list|)
expr_stmt|;
block|}
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_delete_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_delete_inargs
specifier|static
name|ProcArg
name|palette_delete_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_delete_proc
specifier|static
name|ProcRecord
name|palette_delete_proc
init|=
block|{
literal|"gimp-palette-delete"
block|,
literal|"gimp-palette-delete"
block|,
literal|"Deletes a palette"
block|,
literal|"This procedure deletes a palette"
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|palette_delete_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|palette_delete_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_is_editable_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_is_editable_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gboolean
name|editable
init|=
name|FALSE
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
condition|)
name|editable
operator|=
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|writable
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_is_editable_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|editable
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_is_editable_inargs
specifier|static
name|ProcArg
name|palette_is_editable_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_is_editable_outargs
specifier|static
name|ProcArg
name|palette_is_editable_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"editable"
block|,
literal|"True if the palette can be edited"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_is_editable_proc
specifier|static
name|ProcRecord
name|palette_is_editable_proc
init|=
block|{
literal|"gimp-palette-is-editable"
block|,
literal|"gimp-palette-is-editable"
block|,
literal|"Tests if palette can be edited"
block|,
literal|"Returns True if you have permission to change the palette"
block|,
literal|"Bill Skaggs<weskaggs@primate.ucdavis.edu>"
block|,
literal|"Bill Skaggs"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|palette_is_editable_inargs
block|,
literal|1
block|,
name|palette_is_editable_outargs
block|,
block|{
block|{
name|palette_is_editable_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_get_info_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_get_info_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|num_colors
init|=
literal|0
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
condition|)
name|num_colors
operator|=
name|palette
operator|->
name|n_colors
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_get_info_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|num_colors
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_get_info_inargs
specifier|static
name|ProcArg
name|palette_get_info_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_get_info_outargs
specifier|static
name|ProcArg
name|palette_get_info_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"num-colors"
block|,
literal|"The number of colors in the palette"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_get_info_proc
specifier|static
name|ProcRecord
name|palette_get_info_proc
init|=
block|{
literal|"gimp-palette-get-info"
block|,
literal|"gimp-palette-get-info"
block|,
literal|"Retrieve information about the specified palette."
block|,
literal|"This procedure retrieves information about the specified palette. This includes the name, and the number of colors."
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|palette_get_info_inargs
block|,
literal|1
block|,
name|palette_get_info_outargs
block|,
block|{
block|{
name|palette_get_info_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_get_columns_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_get_columns_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|num_columns
init|=
literal|0
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
condition|)
name|num_columns
operator|=
name|palette
operator|->
name|n_columns
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_get_columns_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|num_columns
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_get_columns_inargs
specifier|static
name|ProcArg
name|palette_get_columns_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_get_columns_outargs
specifier|static
name|ProcArg
name|palette_get_columns_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"num-columns"
block|,
literal|"The number of columns used to display this palette"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_get_columns_proc
specifier|static
name|ProcRecord
name|palette_get_columns_proc
init|=
block|{
literal|"gimp-palette-get-columns"
block|,
literal|"gimp-palette-get-columns"
block|,
literal|"Retrieves the number of columns to use to display this palette"
block|,
literal|"This procedures retrieves the prefered number of columns to use when the palette is being displayed."
block|,
literal|"Sven Neumann<sven@gimp.org>"
block|,
literal|"Sven Neumann"
block|,
literal|"2005"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|1
block|,
name|palette_get_columns_inargs
block|,
literal|1
block|,
name|palette_get_columns_outargs
block|,
block|{
block|{
name|palette_get_columns_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_set_columns_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_set_columns_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|columns
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|columns
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|columns
operator|<
literal|0
operator|||
name|columns
operator|>
literal|64
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
operator|&&
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|writable
condition|)
name|gimp_palette_set_columns
argument_list|(
name|palette
argument_list|,
name|columns
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_set_columns_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_set_columns_inargs
specifier|static
name|ProcArg
name|palette_set_columns_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"columns"
block|,
literal|"The new number of columns"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_set_columns_proc
specifier|static
name|ProcRecord
name|palette_set_columns_proc
init|=
block|{
literal|"gimp-palette-set-columns"
block|,
literal|"gimp-palette-set-columns"
block|,
literal|"Sets the number of columns to use when displaying the palette"
block|,
literal|"This procedures allows to control how many colors are shown per row when the palette is being displayed. This value can only be changed if the palette is writable. The maximum allowed value is 64."
block|,
literal|"Sven Neumann<sven@gimp.org>"
block|,
literal|"Sven Neumann"
block|,
literal|"2005"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|palette_set_columns_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|palette_set_columns_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_add_entry_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_add_entry_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gchar
modifier|*
name|entry_name
decl_stmt|;
name|GimpRGB
name|color
decl_stmt|;
name|gint32
name|entry_num
init|=
literal|0
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|entry_name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|entry_name
operator|&&
operator|!
name|g_utf8_validate
argument_list|(
name|entry_name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|color
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_color
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
operator|&&
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|writable
condition|)
block|{
name|GimpPaletteEntry
modifier|*
name|entry
init|=
name|gimp_palette_add_entry
argument_list|(
name|palette
argument_list|,
operator|-
literal|1
argument_list|,
name|entry_name
argument_list|,
operator|&
name|color
argument_list|)
decl_stmt|;
name|entry_num
operator|=
name|entry
operator|->
name|position
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_add_entry_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|entry_num
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_add_entry_inargs
specifier|static
name|ProcArg
name|palette_add_entry_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_STRING
block|,
literal|"entry-name"
block|,
literal|"The name of the entry"
block|}
block|,
block|{
name|GIMP_PDB_COLOR
block|,
literal|"color"
block|,
literal|"The new entry's color color"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_add_entry_outargs
specifier|static
name|ProcArg
name|palette_add_entry_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"entry-num"
block|,
literal|"The index of the added entry"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_add_entry_proc
specifier|static
name|ProcRecord
name|palette_add_entry_proc
init|=
block|{
literal|"gimp-palette-add-entry"
block|,
literal|"gimp-palette-add-entry"
block|,
literal|"Adds a palette entry to the specified palette."
block|,
literal|"This procedure adds an entry to the specifed palette. It returns an error if the entry palette does not exist."
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|3
block|,
name|palette_add_entry_inargs
block|,
literal|1
block|,
name|palette_add_entry_outargs
block|,
block|{
block|{
name|palette_add_entry_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_delete_entry_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_delete_entry_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|entry_num
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|entry_num
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
operator|&&
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|writable
condition|)
block|{
if|if
condition|(
name|entry_num
operator|>=
literal|0
operator|&&
name|entry_num
operator|<
name|palette
operator|->
name|n_colors
condition|)
block|{
name|GimpPaletteEntry
modifier|*
name|entry
init|=
name|g_list_nth_data
argument_list|(
name|palette
operator|->
name|colors
argument_list|,
name|entry_num
argument_list|)
decl_stmt|;
name|gimp_palette_delete_entry
argument_list|(
name|palette
argument_list|,
name|entry
argument_list|)
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_delete_entry_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_delete_entry_inargs
specifier|static
name|ProcArg
name|palette_delete_entry_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"entry-num"
block|,
literal|"The index of the added entry"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_delete_entry_proc
specifier|static
name|ProcRecord
name|palette_delete_entry_proc
init|=
block|{
literal|"gimp-palette-delete-entry"
block|,
literal|"gimp-palette-delete-entry"
block|,
literal|"Deletes a palette entry from the specified palette."
block|,
literal|"This procedure deletes an entry from the specifed palette. It returns an error if the entry palette does not exist."
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|palette_delete_entry_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|palette_delete_entry_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_entry_get_color_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_entry_get_color_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|entry_num
decl_stmt|;
name|GimpRGB
name|color
init|=
block|{
literal|0.0
block|,
literal|0.0
block|,
literal|0.0
block|,
literal|1.0
block|}
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|entry_num
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
condition|)
block|{
if|if
condition|(
name|entry_num
operator|>=
literal|0
operator|&&
name|entry_num
operator|<
name|palette
operator|->
name|n_colors
condition|)
block|{
name|GimpPaletteEntry
modifier|*
name|entry
init|=
name|g_list_nth_data
argument_list|(
name|palette
operator|->
name|colors
argument_list|,
name|entry_num
argument_list|)
decl_stmt|;
name|color
operator|=
name|entry
operator|->
name|color
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_entry_get_color_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_color
operator|=
name|color
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_entry_get_color_inargs
specifier|static
name|ProcArg
name|palette_entry_get_color_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"entry-num"
block|,
literal|"The entry to retrieve"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_get_color_outargs
specifier|static
name|ProcArg
name|palette_entry_get_color_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_COLOR
block|,
literal|"color"
block|,
literal|"The color requested"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_get_color_proc
specifier|static
name|ProcRecord
name|palette_entry_get_color_proc
init|=
block|{
literal|"gimp-palette-entry-get-color"
block|,
literal|"gimp-palette-entry-get-color"
block|,
literal|"Gets the specified palette entry from the specified palette."
block|,
literal|"This procedure retrieves the color of the zero-based entry specifed for the specified palette. It returns an error if the entry does not exist."
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|palette_entry_get_color_inargs
block|,
literal|1
block|,
name|palette_entry_get_color_outargs
block|,
block|{
block|{
name|palette_entry_get_color_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_entry_set_color_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_entry_set_color_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|entry_num
decl_stmt|;
name|GimpRGB
name|color
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|entry_num
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|color
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_color
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
operator|&&
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|writable
condition|)
block|{
if|if
condition|(
name|entry_num
operator|>=
literal|0
operator|&&
name|entry_num
operator|<
name|palette
operator|->
name|n_colors
condition|)
block|{
name|GimpPaletteEntry
modifier|*
name|entry
init|=
name|g_list_nth_data
argument_list|(
name|palette
operator|->
name|colors
argument_list|,
name|entry_num
argument_list|)
decl_stmt|;
name|entry
operator|->
name|color
operator|=
name|color
expr_stmt|;
name|gimp_data_dirty
argument_list|(
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_entry_set_color_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_entry_set_color_inargs
specifier|static
name|ProcArg
name|palette_entry_set_color_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"entry-num"
block|,
literal|"The entry to retrieve"
block|}
block|,
block|{
name|GIMP_PDB_COLOR
block|,
literal|"color"
block|,
literal|"The new color"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_set_color_proc
specifier|static
name|ProcRecord
name|palette_entry_set_color_proc
init|=
block|{
literal|"gimp-palette-entry-set-color"
block|,
literal|"gimp-palette-entry-set-color"
block|,
literal|"Sets the specified palette entry in the specified palette."
block|,
literal|"This procedure sets the color of the zero-based entry specifed for the specified palette. It returns an error if the entry does not exist."
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|3
block|,
name|palette_entry_set_color_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|palette_entry_set_color_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_entry_get_name_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_entry_get_name_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|entry_num
decl_stmt|;
name|gchar
modifier|*
name|entry_name
init|=
name|NULL
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|entry_num
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
condition|)
block|{
if|if
condition|(
name|entry_num
operator|>=
literal|0
operator|&&
name|entry_num
operator|<
name|palette
operator|->
name|n_colors
condition|)
block|{
name|GimpPaletteEntry
modifier|*
name|entry
init|=
name|g_list_nth_data
argument_list|(
name|palette
operator|->
name|colors
argument_list|,
name|entry_num
argument_list|)
decl_stmt|;
name|entry_name
operator|=
name|g_strdup
argument_list|(
name|entry
operator|->
name|name
argument_list|)
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_entry_get_name_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|entry_name
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_entry_get_name_inargs
specifier|static
name|ProcArg
name|palette_entry_get_name_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"entry-num"
block|,
literal|"The entry to retrieve"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_get_name_outargs
specifier|static
name|ProcArg
name|palette_entry_get_name_outargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"entry-name"
block|,
literal|"The name requested"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_get_name_proc
specifier|static
name|ProcRecord
name|palette_entry_get_name_proc
init|=
block|{
literal|"gimp-palette-entry-get-name"
block|,
literal|"gimp-palette-entry-get-name"
block|,
literal|"Gets the specified palette entry from the specified palette."
block|,
literal|"This procedure retrieves the name of the zero-based entry specifed for the specified palette. It returns an error if the entry does not exist."
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|2
block|,
name|palette_entry_get_name_inargs
block|,
literal|1
block|,
name|palette_entry_get_name_outargs
block|,
block|{
block|{
name|palette_entry_get_name_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|palette_entry_set_name_invoker (Gimp * gimp,GimpContext * context,GimpProgress * progress,Argument * args)
name|palette_entry_set_name_invoker
parameter_list|(
name|Gimp
modifier|*
name|gimp
parameter_list|,
name|GimpContext
modifier|*
name|context
parameter_list|,
name|GimpProgress
modifier|*
name|progress
parameter_list|,
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|gboolean
name|success
init|=
name|TRUE
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|gint32
name|entry_num
decl_stmt|;
name|gchar
modifier|*
name|entry_name
decl_stmt|;
name|name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|!
name|g_utf8_validate
argument_list|(
name|name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|entry_num
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|entry_name
operator|=
operator|(
name|gchar
operator|*
operator|)
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|entry_name
operator|&&
operator|!
name|g_utf8_validate
argument_list|(
name|entry_name
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|GimpPalette
modifier|*
name|palette
init|=
operator|(
name|GimpPalette
operator|*
operator|)
name|gimp_container_get_child_by_name
argument_list|(
name|gimp
operator|->
name|palette_factory
operator|->
name|container
argument_list|,
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|palette
operator|&&
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
operator|->
name|writable
condition|)
block|{
if|if
condition|(
name|entry_num
operator|>=
literal|0
operator|&&
name|entry_num
operator|<
name|palette
operator|->
name|n_colors
condition|)
block|{
name|GimpPaletteEntry
modifier|*
name|entry
init|=
name|g_list_nth_data
argument_list|(
name|palette
operator|->
name|colors
argument_list|,
name|entry_num
argument_list|)
decl_stmt|;
name|g_free
argument_list|(
name|entry
operator|->
name|name
argument_list|)
expr_stmt|;
name|entry
operator|->
name|name
operator|=
name|g_strdup
argument_list|(
name|entry_name
argument_list|)
expr_stmt|;
name|gimp_data_dirty
argument_list|(
name|GIMP_DATA
argument_list|(
name|palette
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|palette_entry_set_name_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|palette_entry_set_name_inargs
specifier|static
name|ProcArg
name|palette_entry_set_name_inargs
index|[]
init|=
block|{
block|{
name|GIMP_PDB_STRING
block|,
literal|"name"
block|,
literal|"The palette name"
block|}
block|,
block|{
name|GIMP_PDB_INT32
block|,
literal|"entry-num"
block|,
literal|"The entry to retrieve"
block|}
block|,
block|{
name|GIMP_PDB_STRING
block|,
literal|"entry-name"
block|,
literal|"The new name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|palette_entry_set_name_proc
specifier|static
name|ProcRecord
name|palette_entry_set_name_proc
init|=
block|{
literal|"gimp-palette-entry-set-name"
block|,
literal|"gimp-palette-entry-set-name"
block|,
literal|"Sets the specified palette entry in the specified palette."
block|,
literal|"This procedure sets the name of the zero-based entry specifed for the specified palette. It returns an error if the entry does not exist."
block|,
literal|"Michael Natterer<mitch@gimp.org>"
block|,
literal|"Michael Natterer"
block|,
literal|"2004"
block|,
name|NULL
block|,
name|GIMP_INTERNAL
block|,
literal|3
block|,
name|palette_entry_set_name_inargs
block|,
literal|0
block|,
name|NULL
block|,
block|{
block|{
name|palette_entry_set_name_invoker
block|}
block|}
block|}
decl_stmt|;
end_decl_stmt

end_unit

