begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* LIBGIMP - The GIMP Library                                                     * Copyright (C) 1995-1997 Peter Mattis and Spencer Kimball                  *  * gimpunit.c  * Copyright (C) 1999 Michael Natterer<mitschel@cs.tu-berlin.de>  *  * This library is free software; you can redistribute it and/or  * modify it under the terms of the GNU Library General Public  * License as published by the Free Software Foundation; either  * version 2 of the License, or (at your option) any later version.  *  * This library is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU  * Library General Public License for more details.  *  * You should have received a copy of the GNU Library General Public  * License along with this library; if not, write to the  * Free Software Foundation, Inc., 59 Temple Place - Suite 330,  * Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_comment
comment|/* NOTE:  *  * one of our header files is in libgimp/ (see the note there)  */
end_comment

begin_include
include|#
directive|include
file|"libgimp/gimpunit.h"
end_include

begin_include
include|#
directive|include
file|"unitrc.h"
end_include

begin_include
include|#
directive|include
file|"gimpunit_cmds.h"
end_include

begin_include
include|#
directive|include
file|"app_procs.h"
end_include

begin_include
include|#
directive|include
file|"gimprc.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpintl.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimpenv.h"
end_include

begin_comment
comment|/* internal structures */
end_comment

begin_typedef
DECL|struct|__anon2aea16390108
typedef|typedef
struct|struct
block|{
DECL|member|delete_on_exit
name|guint
name|delete_on_exit
decl_stmt|;
DECL|member|factor
name|float
name|factor
decl_stmt|;
DECL|member|digits
name|gint
name|digits
decl_stmt|;
DECL|member|identifier
name|gchar
modifier|*
name|identifier
decl_stmt|;
DECL|member|symbol
name|gchar
modifier|*
name|symbol
decl_stmt|;
DECL|member|abbreviation
name|gchar
modifier|*
name|abbreviation
decl_stmt|;
DECL|member|singular
name|gchar
modifier|*
name|singular
decl_stmt|;
DECL|member|plural
name|gchar
modifier|*
name|plural
decl_stmt|;
DECL|typedef|GimpUnitDef
block|}
name|GimpUnitDef
typedef|;
end_typedef

begin_comment
comment|/*  these are the built-in units  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_defs
specifier|static
name|GimpUnitDef
name|gimp_unit_defs
index|[
name|UNIT_END
index|]
init|=
block|{
comment|/* pseudo unit */
block|{
name|FALSE
block|,
literal|0.0
block|,
literal|0
block|,
literal|"pixels"
block|,
literal|"px"
block|,
literal|"px"
block|,
name|N_
argument_list|(
literal|"pixel"
argument_list|)
block|,
name|N_
argument_list|(
literal|"pixels"
argument_list|)
block|}
block|,
comment|/* standard units */
block|{
name|FALSE
block|,
literal|1.0
block|,
literal|2
block|,
literal|"inches"
block|,
literal|"''"
block|,
literal|"in"
block|,
name|N_
argument_list|(
literal|"inch"
argument_list|)
block|,
name|N_
argument_list|(
literal|"inches"
argument_list|)
block|}
block|,
block|{
name|FALSE
block|,
literal|25.4
block|,
literal|1
block|,
literal|"millimeters"
block|,
literal|"mm"
block|,
literal|"mm"
block|,
name|N_
argument_list|(
literal|"millimeter"
argument_list|)
block|,
name|N_
argument_list|(
literal|"millimeters"
argument_list|)
block|}
block|,
comment|/* professional units */
block|{
name|FALSE
block|,
literal|72.0
block|,
literal|0
block|,
literal|"points"
block|,
literal|"pt"
block|,
literal|"pt"
block|,
name|N_
argument_list|(
literal|"point"
argument_list|)
block|,
name|N_
argument_list|(
literal|"points"
argument_list|)
block|}
block|,
block|{
name|FALSE
block|,
literal|6.0
block|,
literal|1
block|,
literal|"picas"
block|,
literal|"pc"
block|,
literal|"pc"
block|,
name|N_
argument_list|(
literal|"pica"
argument_list|)
block|,
name|N_
argument_list|(
literal|"picas"
argument_list|)
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|user_units
specifier|static
name|GSList
modifier|*
name|user_units
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|number_of_user_units
specifier|static
name|gint
name|number_of_user_units
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|success
specifier|static
name|int
name|success
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* private functions */
end_comment

begin_function
specifier|static
name|GimpUnitDef
modifier|*
DECL|function|gimp_unit_get_user_unit (GUnit unit)
name|gimp_unit_get_user_unit
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
return|return
name|g_slist_nth_data
argument_list|(
name|user_units
argument_list|,
name|unit
operator|-
name|UNIT_END
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* public functions */
end_comment

begin_function
name|gint
DECL|function|gimp_unit_get_number_of_units (void)
name|gimp_unit_get_number_of_units
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|UNIT_END
operator|+
name|number_of_user_units
return|;
block|}
end_function

begin_function
name|gint
DECL|function|gimp_unit_get_number_of_built_in_units (void)
name|gimp_unit_get_number_of_built_in_units
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|UNIT_END
return|;
block|}
end_function

begin_function
name|GUnit
DECL|function|gimp_unit_new (gchar * identifier,gfloat factor,gint digits,gchar * symbol,gchar * abbreviation,gchar * singular,gchar * plural)
name|gimp_unit_new
parameter_list|(
name|gchar
modifier|*
name|identifier
parameter_list|,
name|gfloat
name|factor
parameter_list|,
name|gint
name|digits
parameter_list|,
name|gchar
modifier|*
name|symbol
parameter_list|,
name|gchar
modifier|*
name|abbreviation
parameter_list|,
name|gchar
modifier|*
name|singular
parameter_list|,
name|gchar
modifier|*
name|plural
parameter_list|)
block|{
name|GimpUnitDef
modifier|*
name|user_unit
decl_stmt|;
name|user_unit
operator|=
name|g_malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|GimpUnitDef
argument_list|)
argument_list|)
expr_stmt|;
name|user_unit
operator|->
name|delete_on_exit
operator|=
name|TRUE
expr_stmt|;
name|user_unit
operator|->
name|factor
operator|=
name|factor
expr_stmt|;
name|user_unit
operator|->
name|digits
operator|=
name|digits
expr_stmt|;
name|user_unit
operator|->
name|identifier
operator|=
name|g_strdup
argument_list|(
name|identifier
argument_list|)
expr_stmt|;
name|user_unit
operator|->
name|symbol
operator|=
name|g_strdup
argument_list|(
name|symbol
argument_list|)
expr_stmt|;
name|user_unit
operator|->
name|abbreviation
operator|=
name|g_strdup
argument_list|(
name|abbreviation
argument_list|)
expr_stmt|;
name|user_unit
operator|->
name|singular
operator|=
name|g_strdup
argument_list|(
name|singular
argument_list|)
expr_stmt|;
name|user_unit
operator|->
name|plural
operator|=
name|g_strdup
argument_list|(
name|plural
argument_list|)
expr_stmt|;
name|user_units
operator|=
name|g_slist_append
argument_list|(
name|user_units
argument_list|,
name|user_unit
argument_list|)
expr_stmt|;
name|number_of_user_units
operator|++
expr_stmt|;
return|return
name|UNIT_END
operator|+
name|number_of_user_units
operator|-
literal|1
return|;
block|}
end_function

begin_function
name|guint
DECL|function|gimp_unit_get_deletion_flag (GUnit unit)
name|gimp_unit_get_deletion_flag
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|FALSE
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|delete_on_exit
return|;
block|}
end_function

begin_function
name|void
DECL|function|gimp_unit_set_deletion_flag (GUnit unit,guint deletion_flag)
name|gimp_unit_set_deletion_flag
parameter_list|(
name|GUnit
name|unit
parameter_list|,
name|guint
name|deletion_flag
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_END
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|)
expr_stmt|;
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|delete_on_exit
operator|=
name|deletion_flag
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
block|}
end_function

begin_function
name|gfloat
DECL|function|gimp_unit_get_factor (GUnit unit)
name|gimp_unit_get_factor
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|gimp_unit_defs
index|[
name|UNIT_INCH
index|]
operator|.
name|factor
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|gimp_unit_defs
index|[
name|unit
index|]
operator|.
name|factor
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|factor
return|;
block|}
end_function

begin_function
name|gint
DECL|function|gimp_unit_get_digits (GUnit unit)
name|gimp_unit_get_digits
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|gimp_unit_defs
index|[
name|UNIT_INCH
index|]
operator|.
name|digits
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|gimp_unit_defs
index|[
name|unit
index|]
operator|.
name|digits
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|digits
return|;
block|}
end_function

begin_function
name|gchar
modifier|*
DECL|function|gimp_unit_get_identifier (GUnit unit)
name|gimp_unit_get_identifier
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|gimp_unit_defs
index|[
name|UNIT_INCH
index|]
operator|.
name|identifier
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|gimp_unit_defs
index|[
name|unit
index|]
operator|.
name|identifier
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|identifier
return|;
block|}
end_function

begin_function
name|gchar
modifier|*
DECL|function|gimp_unit_get_symbol (GUnit unit)
name|gimp_unit_get_symbol
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|gimp_unit_defs
index|[
name|UNIT_INCH
index|]
operator|.
name|symbol
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|gimp_unit_defs
index|[
name|unit
index|]
operator|.
name|symbol
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|symbol
return|;
block|}
end_function

begin_function
name|gchar
modifier|*
DECL|function|gimp_unit_get_abbreviation (GUnit unit)
name|gimp_unit_get_abbreviation
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|gimp_unit_defs
index|[
name|UNIT_INCH
index|]
operator|.
name|abbreviation
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|gimp_unit_defs
index|[
name|unit
index|]
operator|.
name|abbreviation
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|abbreviation
return|;
block|}
end_function

begin_function
name|gchar
modifier|*
DECL|function|gimp_unit_get_singular (GUnit unit)
name|gimp_unit_get_singular
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|gettext
argument_list|(
name|gimp_unit_defs
index|[
name|UNIT_INCH
index|]
operator|.
name|singular
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|gettext
argument_list|(
name|gimp_unit_defs
index|[
name|unit
index|]
operator|.
name|singular
argument_list|)
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|singular
return|;
block|}
end_function

begin_function
name|gchar
modifier|*
DECL|function|gimp_unit_get_plural (GUnit unit)
name|gimp_unit_get_plural
parameter_list|(
name|GUnit
name|unit
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
operator|(
name|unit
operator|>=
name|UNIT_PIXEL
operator|)
operator|&&
operator|(
name|unit
operator|<
operator|(
name|UNIT_END
operator|+
name|number_of_user_units
operator|)
operator|)
argument_list|,
name|gettext
argument_list|(
name|gimp_unit_defs
index|[
name|UNIT_INCH
index|]
operator|.
name|plural
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit
operator|<
name|UNIT_END
condition|)
return|return
name|gettext
argument_list|(
name|gimp_unit_defs
index|[
name|unit
index|]
operator|.
name|plural
argument_list|)
return|;
return|return
name|gimp_unit_get_user_unit
argument_list|(
name|unit
argument_list|)
operator|->
name|plural
return|;
block|}
end_function

begin_comment
comment|/*  unitrc functions  **********/
end_comment

begin_function
DECL|function|parse_unitrc (void)
name|void
name|parse_unitrc
parameter_list|(
name|void
parameter_list|)
block|{
name|char
modifier|*
name|filename
decl_stmt|;
name|filename
operator|=
name|gimp_personal_rc_file
argument_list|(
literal|"unitrc"
argument_list|)
expr_stmt|;
name|app_init_update_status
argument_list|(
name|NULL
argument_list|,
name|filename
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|parse_gimprc_file
argument_list|(
name|filename
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|save_unitrc (void)
name|void
name|save_unitrc
parameter_list|(
name|void
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|char
modifier|*
name|filename
decl_stmt|;
name|FILE
modifier|*
name|fp
decl_stmt|;
name|filename
operator|=
name|gimp_personal_rc_file
argument_list|(
literal|"unitrc"
argument_list|)
expr_stmt|;
name|fp
operator|=
name|fopen
argument_list|(
name|filename
argument_list|,
literal|"w"
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|fp
condition|)
return|return;
name|fprintf
argument_list|(
name|fp
argument_list|,
name|_
argument_list|(
literal|"# GIMP unitrc\n"
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
name|_
argument_list|(
literal|"# This file contains your user unit database. You can\n"
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
name|_
argument_list|(
literal|"# modify this list with the unit editor. You are not\n"
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
name|_
argument_list|(
literal|"# supposed to edit it manually, but of course you can do.\n"
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
name|_
argument_list|(
literal|"# This file will be entirely rewritten every time you\n"
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
name|_
argument_list|(
literal|"# quit the gimp.\n\n"
argument_list|)
argument_list|)
expr_stmt|;
comment|/* save window geometries */
for|for
control|(
name|i
operator|=
name|gimp_unit_get_number_of_built_in_units
argument_list|()
init|;
name|i
operator|<
name|gimp_unit_get_number_of_units
argument_list|()
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|gimp_unit_get_deletion_flag
argument_list|(
name|i
argument_list|)
operator|==
name|FALSE
condition|)
block|{
name|fprintf
argument_list|(
name|fp
argument_list|,
literal|"(unit-info \"%s\"\n"
argument_list|,
name|gimp_unit_get_identifier
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
literal|"   (factor %f)\n"
argument_list|,
name|gimp_unit_get_factor
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
literal|"   (digits %d)\n"
argument_list|,
name|gimp_unit_get_digits
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
literal|"   (symbol \"%s\")\n"
argument_list|,
name|gimp_unit_get_symbol
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
literal|"   (abbreviation \"%s\")\n"
argument_list|,
name|gimp_unit_get_abbreviation
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
literal|"   (singular \"%s\")\n"
argument_list|,
name|gimp_unit_get_singular
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|fp
argument_list|,
literal|"   (plural \"%s\"))\n\n"
argument_list|,
name|gimp_unit_get_plural
argument_list|(
name|i
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|fclose
argument_list|(
name|fp
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  PDB stuff  **********/
end_comment

begin_comment
comment|/********************************  *  GIMP_UNIT_GET_NUMBER_OF_UNITS  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_number_of_units_invoker (Argument * args)
name|gimp_unit_get_number_of_units_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_number_of_units_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|gimp_unit_get_number_of_units
argument_list|()
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_number_of_units_out_args
name|ProcArg
name|gimp_unit_get_number_of_units_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"#units"
block|,
literal|"the number of units"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_number_of_units_proc
name|ProcRecord
name|gimp_unit_get_number_of_units_proc
init|=
block|{
literal|"gimp_unit_get_number_of_units"
block|,
literal|"Returns the number of units"
block|,
literal|"This procedure returns the number of defined units."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|0
block|,
name|NULL
block|,
literal|1
block|,
name|gimp_unit_get_number_of_units_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_number_of_units_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_NEW  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_new_invoker (Argument * args)
name|gimp_unit_new_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_new_proc
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|gimp_unit_new
argument_list|(
name|g_strdup
argument_list|(
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_pointer
argument_list|)
argument_list|,
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
argument_list|,
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|,
name|g_strdup
argument_list|(
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_pointer
argument_list|)
argument_list|,
name|g_strdup
argument_list|(
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_pointer
argument_list|)
argument_list|,
name|g_strdup
argument_list|(
name|args
index|[
literal|5
index|]
operator|.
name|value
operator|.
name|pdb_pointer
argument_list|)
argument_list|,
name|g_strdup
argument_list|(
name|args
index|[
literal|6
index|]
operator|.
name|value
operator|.
name|pdb_pointer
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_new_args
name|ProcArg
name|gimp_unit_new_args
index|[]
init|=
block|{
block|{
name|PDB_STRING
block|,
literal|"identifier"
block|,
literal|"the new unit's identifier"
block|}
block|,
block|{
name|PDB_FLOAT
block|,
literal|"factor"
block|,
literal|"the new unit's factor"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"digits"
block|,
literal|"the new unit's digits"
block|}
block|,
block|{
name|PDB_STRING
block|,
literal|"symbol"
block|,
literal|"the new unit's symbol"
block|}
block|,
block|{
name|PDB_STRING
block|,
literal|"abbreviation"
block|,
literal|"the new unit's abbreviation"
block|}
block|,
block|{
name|PDB_STRING
block|,
literal|"singular"
block|,
literal|"the new unit's singular form"
block|}
block|,
block|{
name|PDB_STRING
block|,
literal|"plural"
block|,
literal|"the new unit's plural form"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_new_out_args
name|ProcArg
name|gimp_unit_new_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the new unit's ID"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_new_proc
name|ProcRecord
name|gimp_unit_new_proc
init|=
block|{
literal|"gimp_unit_new"
block|,
literal|"Creates a new unit and returns it's integer ID"
block|,
literal|"This procedure creates a new unit and returns it's integer ID. Note that the new unit will have it's deletion flag set to TRUE, so you will have to set it to FALSE with gimp_unit_set_deletion_flag to make it persistent."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|7
block|,
name|gimp_unit_new_args
block|,
literal|1
block|,
name|gimp_unit_new_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_new_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_DELETION_FLAG  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_deletion_flag_invoker (Argument * args)
name|gimp_unit_get_deletion_flag_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_PIXEL
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_deletion_flag_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|gimp_unit_get_deletion_flag
argument_list|(
name|unit
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_deletion_flag_args
name|ProcArg
name|gimp_unit_get_deletion_flag_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_deletion_flag_out_args
name|ProcArg
name|gimp_unit_get_deletion_flag_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"boolean"
block|,
literal|"the unit's deletion flag"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_deletion_flag_proc
name|ProcRecord
name|gimp_unit_get_deletion_flag_proc
init|=
block|{
literal|"gimp_unit_get_deletion_flag"
block|,
literal|"Returns the deletion flag of the unit"
block|,
literal|"This procedure returns the deletion flag of the unit. If this value is TRUE the unit's definition will not be saved in the user's unitrc file on gimp exit."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_deletion_flag_args
block|,
literal|1
block|,
name|gimp_unit_get_deletion_flag_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_deletion_flag_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_SET_DELETION_FLAG  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_set_deletion_flag_invoker (Argument * args)
name|gimp_unit_set_deletion_flag_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_END
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
else|else
name|gimp_unit_set_deletion_flag
argument_list|(
name|unit
argument_list|,
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
argument_list|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_set_deletion_flag_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_set_deletion_flag_args
name|ProcArg
name|gimp_unit_set_deletion_flag_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"boolean"
block|,
literal|"the new deletion flag of the unit"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_set_deletion_flag_proc
name|ProcRecord
name|gimp_unit_set_deletion_flag_proc
init|=
block|{
literal|"gimp_unit_set_deletion_flag"
block|,
literal|"Sets the deletion flag of a unit"
block|,
literal|"This procedure sets the unit's deletion flag. If the deletion flag of a unit is TRUE on gimp exit, this unit's definition will not be saved in the user's unitrc."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|2
block|,
name|gimp_unit_set_deletion_flag_args
block|,
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_set_deletion_flag_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_IDENTIFIER  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_identifier_invoker (Argument * args)
name|gimp_unit_get_identifier_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_PIXEL
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_identifier_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|success
condition|?
name|g_strdup
argument_list|(
name|gimp_unit_get_identifier
argument_list|(
name|unit
argument_list|)
argument_list|)
else|:
name|NULL
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_identifier_args
name|ProcArg
name|gimp_unit_get_identifier_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_identifier_out_args
name|ProcArg
name|gimp_unit_get_identifier_out_args
index|[]
init|=
block|{
block|{
name|PDB_STRING
block|,
literal|"string"
block|,
literal|"the unit's textual identifier"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_identifier_proc
name|ProcRecord
name|gimp_unit_get_identifier_proc
init|=
block|{
literal|"gimp_unit_get_identifier"
block|,
literal|"Returns the identifier of the unit"
block|,
literal|"This procedure returns the textual identifier of the unit. For built-in units it will be the english singular form of the unit's name. For user-defined units this should equal to the singular form."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_identifier_args
block|,
literal|1
block|,
name|gimp_unit_get_identifier_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_identifier_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_FACTOR  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_factor_invoker (Argument * args)
name|gimp_unit_get_factor_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_INCH
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_factor_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
operator|=
name|success
condition|?
name|gimp_unit_get_factor
argument_list|(
name|unit
argument_list|)
else|:
literal|1.0
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_factor_args
name|ProcArg
name|gimp_unit_get_factor_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_factor_out_args
name|ProcArg
name|gimp_unit_get_factor_out_args
index|[]
init|=
block|{
block|{
name|PDB_FLOAT
block|,
literal|"float"
block|,
literal|"the unit's factor"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_factor_proc
name|ProcRecord
name|gimp_unit_get_factor_proc
init|=
block|{
literal|"gimp_unit_get_factor"
block|,
literal|"Returns the factor of the unit"
block|,
literal|"This procedure returns the unit's factor which indicates how many units make up an inch. Note that asking for the factor of \"pixels\" will produce an error."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_factor_args
block|,
literal|1
block|,
name|gimp_unit_get_factor_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_factor_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_DIGITS  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_digits_invoker (Argument * args)
name|gimp_unit_get_digits_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_INCH
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_digits_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|success
condition|?
name|gimp_unit_get_digits
argument_list|(
name|unit
argument_list|)
else|:
literal|0
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_digits_args
name|ProcArg
name|gimp_unit_get_digits_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_digits_out_args
name|ProcArg
name|gimp_unit_get_digits_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"digits"
block|,
literal|"the unit's number if digits"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_digits_proc
name|ProcRecord
name|gimp_unit_get_digits_proc
init|=
block|{
literal|"gimp_unit_get_digits"
block|,
literal|"Returns the digits of the unit"
block|,
literal|"This procedure returns the number of digits you should provide in input or output functions to get approximately the same accuracy as with two digits and inches. Note that asking for the digits of \"pixels\" will produce an error."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_digits_args
block|,
literal|1
block|,
name|gimp_unit_get_digits_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_digits_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_SYMBOL  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_symbol_invoker (Argument * args)
name|gimp_unit_get_symbol_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_PIXEL
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_symbol_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|success
condition|?
name|g_strdup
argument_list|(
name|gimp_unit_get_symbol
argument_list|(
name|unit
argument_list|)
argument_list|)
else|:
name|NULL
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_symbol_args
name|ProcArg
name|gimp_unit_get_symbol_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_symbol_out_args
name|ProcArg
name|gimp_unit_get_symbol_out_args
index|[]
init|=
block|{
block|{
name|PDB_STRING
block|,
literal|"string"
block|,
literal|"the unit's symbol"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_symbol_proc
name|ProcRecord
name|gimp_unit_get_symbol_proc
init|=
block|{
literal|"gimp_unit_get_symbol"
block|,
literal|"Returns the symbol of the unit"
block|,
literal|"This procedure returns the symbol of the unit (\"''\" for inches)."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_symbol_args
block|,
literal|1
block|,
name|gimp_unit_get_symbol_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_symbol_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_ABBREVIATION  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_abbreviation_invoker (Argument * args)
name|gimp_unit_get_abbreviation_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_PIXEL
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_abbreviation_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|success
condition|?
name|g_strdup
argument_list|(
name|gimp_unit_get_abbreviation
argument_list|(
name|unit
argument_list|)
argument_list|)
else|:
name|NULL
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_abbreviation_args
name|ProcArg
name|gimp_unit_get_abbreviation_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_abbreviation_out_args
name|ProcArg
name|gimp_unit_get_abbreviation_out_args
index|[]
init|=
block|{
block|{
name|PDB_STRING
block|,
literal|"string"
block|,
literal|"the unit's abbreviation"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_abbreviation_proc
name|ProcRecord
name|gimp_unit_get_abbreviation_proc
init|=
block|{
literal|"gimp_unit_get_abbreviation"
block|,
literal|"Returns the abbreviation of the unit"
block|,
literal|"This procedure returns the abbreviation of the unit (\"in\" for inches)."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_abbreviation_args
block|,
literal|1
block|,
name|gimp_unit_get_abbreviation_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_abbreviation_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_SINGULAR  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_singular_invoker (Argument * args)
name|gimp_unit_get_singular_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_PIXEL
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_singular_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|success
condition|?
name|g_strdup
argument_list|(
name|gimp_unit_get_singular
argument_list|(
name|unit
argument_list|)
argument_list|)
else|:
name|NULL
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_singular_args
name|ProcArg
name|gimp_unit_get_singular_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_singular_out_args
name|ProcArg
name|gimp_unit_get_singular_out_args
index|[]
init|=
block|{
block|{
name|PDB_STRING
block|,
literal|"string"
block|,
literal|"the unit's singular form"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_singular_proc
name|ProcRecord
name|gimp_unit_get_singular_proc
init|=
block|{
literal|"gimp_unit_get_singular"
block|,
literal|"Returns the singular for of the unit"
block|,
literal|"This procedure returns the singular form of the unit."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_singular_args
block|,
literal|1
block|,
name|gimp_unit_get_singular_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_singular_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************  *  GIMP_UNIT_GET_PLURAL  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|gimp_unit_get_plural_invoker (Argument * args)
name|gimp_unit_get_plural_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|GUnit
name|unit
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
name|unit
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|unit
operator|<
name|UNIT_PIXEL
operator|)
operator|||
operator|(
name|unit
operator|>=
name|gimp_unit_get_number_of_units
argument_list|()
operator|)
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|gimp_unit_get_plural_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
name|success
condition|?
name|g_strdup
argument_list|(
name|gimp_unit_get_plural
argument_list|(
name|unit
argument_list|)
argument_list|)
else|:
name|NULL
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|gimp_unit_get_plural_args
name|ProcArg
name|gimp_unit_get_plural_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"unit ID"
block|,
literal|"the unit's integer ID"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_plural_out_args
name|ProcArg
name|gimp_unit_get_plural_out_args
index|[]
init|=
block|{
block|{
name|PDB_STRING
block|,
literal|"string"
block|,
literal|"the unit's plural form"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_unit_get_plural_proc
name|ProcRecord
name|gimp_unit_get_plural_proc
init|=
block|{
literal|"gimp_unit_get_plural"
block|,
literal|"Returns the plural form of the unit"
block|,
literal|"This procedure returns the plural form of the unit."
block|,
literal|"Michael Natterer"
block|,
literal|"Michael Natterer"
block|,
literal|"1999"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input& output arguments  */
literal|1
block|,
name|gimp_unit_get_plural_args
block|,
literal|1
block|,
name|gimp_unit_get_plural_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|gimp_unit_get_plural_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

end_unit

