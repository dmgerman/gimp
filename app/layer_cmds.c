begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|"appenv.h"
end_include

begin_include
include|#
directive|include
file|"floating_sel.h"
end_include

begin_include
include|#
directive|include
file|"general.h"
end_include

begin_include
include|#
directive|include
file|"gimage.h"
end_include

begin_include
include|#
directive|include
file|"layer.h"
end_include

begin_include
include|#
directive|include
file|"layer_cmds.h"
end_include

begin_include
include|#
directive|include
file|"undo.h"
end_include

begin_include
include|#
directive|include
file|"layer_pvt.h"
end_include

begin_include
include|#
directive|include
file|"drawable_pvt.h"
end_include

begin_decl_stmt
DECL|variable|int_value
specifier|static
name|int
name|int_value
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|fp_value
specifier|static
name|double
name|fp_value
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|success
specifier|static
name|int
name|success
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***************/
end_comment

begin_comment
comment|/*  LAYER_NEW  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_new_invoker (Argument * args)
name|layer_new_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|gimage_id
decl_stmt|;
name|int
name|width
decl_stmt|,
name|height
decl_stmt|;
name|int
name|type
decl_stmt|;
name|char
modifier|*
name|name
decl_stmt|;
name|int
name|opacity
decl_stmt|;
name|int
name|mode
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|layer
operator|=
name|NULL
expr_stmt|;
name|gimage_id
operator|=
operator|-
literal|1
expr_stmt|;
name|type
operator|=
literal|0
expr_stmt|;
name|opacity
operator|=
literal|255
expr_stmt|;
name|mode
operator|=
name|NORMAL_MODE
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|gimage_get_ID
argument_list|(
name|int_value
argument_list|)
operator|!=
name|NULL
condition|)
name|gimage_id
operator|=
name|int_value
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|success
operator|=
operator|(
name|width
operator|>
literal|0
operator|&&
name|height
operator|>
literal|0
operator|)
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|int_value
operator|>=
name|RGB_GIMAGE
operator|&&
name|int_value
operator|<=
name|INDEXEDA_GIMAGE
condition|)
name|type
operator|=
name|int_value
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|name
operator|=
operator|(
name|char
operator|*
operator|)
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|fp_value
operator|=
name|args
index|[
literal|5
index|]
operator|.
name|value
operator|.
name|pdb_float
expr_stmt|;
if|if
condition|(
name|fp_value
operator|>=
literal|0
operator|&&
name|fp_value
operator|<=
literal|100
condition|)
name|opacity
operator|=
call|(
name|int
call|)
argument_list|(
operator|(
name|fp_value
operator|*
literal|255
operator|)
operator|/
literal|100
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|6
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|int_value
operator|>=
name|NORMAL_MODE
operator|&&
name|int_value
operator|<=
name|VALUE_MODE
condition|)
name|mode
operator|=
name|int_value
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
operator|(
name|layer
operator|=
name|layer_new
argument_list|(
name|gimage_id
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|type
argument_list|,
name|name
argument_list|,
name|opacity
argument_list|,
name|mode
argument_list|)
operator|)
operator|!=
name|NULL
operator|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_new_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|ID
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_new_args
name|ProcArg
name|layer_new_args
index|[]
init|=
block|{
block|{
name|PDB_IMAGE
block|,
literal|"image"
block|,
literal|"the image to which to add the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"width"
block|,
literal|"the layer width: (width> 0)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"height"
block|,
literal|"the layer height: (height> 0)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"type"
block|,
literal|"the layer type: { RGB_IMAGE (0), RGBA_IMAGE (1), GRAY_IMAGE (2), GRAYA_IMAGE (3), INDEXED_IMAGE (4), INDEXEDA_IMAGE (5) }"
block|}
block|,
block|{
name|PDB_STRING
block|,
literal|"name"
block|,
literal|"the layer name"
block|}
block|,
block|{
name|PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"the layer opacity: (0<= opacity<= 100)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"mode"
block|,
literal|"the layer combination mode: { NORMAL (0), DISSOLVE (1), MULTIPLY (3), SCREEN (4), OVERLAY (5) DIFFERENCE (6), ADDITION (7), SUBTRACT (8), DARKEN-ONLY (9), LIGHTEN-ONLY (10), HUE (11), SATURATION (12), COLOR (13), VALUE (14) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_new_out_args
name|ProcArg
name|layer_new_out_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the newly created layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_new_proc
name|ProcRecord
name|layer_new_proc
init|=
block|{
literal|"gimp_layer_new"
block|,
literal|"Create a new layer"
block|,
literal|"This procedure creates a new layer with the specified width, height, and type.  Name, opacity, and mode are also supplied parameters.  The new layer still needs to be added to the image, as this is not automatic.  Add the new layer with the 'gimp_image_add_layer' command.  Other attributes such as layer mask modes, and offsets should be set with explicit procedure calls."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|7
block|,
name|layer_new_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_new_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_new_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/****************/
end_comment

begin_comment
comment|/*  LAYER_COPY  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_copy_invoker (Argument * args)
name|layer_copy_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|Layer
modifier|*
name|copy
decl_stmt|;
name|int
name|add_alpha
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|copy
operator|=
name|NULL
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|add_alpha
operator|=
operator|(
name|int_value
operator|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
operator|(
name|copy
operator|=
name|layer_copy
argument_list|(
name|layer
argument_list|,
name|add_alpha
argument_list|)
operator|)
operator|!=
name|NULL
operator|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_copy_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|GIMP_DRAWABLE
argument_list|(
name|copy
argument_list|)
operator|->
name|ID
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_copy_args
name|ProcArg
name|layer_copy_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer to copy"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"add_apha"
block|,
literal|"add an alpha channel to the copied layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_copy_out_args
name|ProcArg
name|layer_copy_out_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer_copy"
block|,
literal|"the newly copied layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_copy_proc
name|ProcRecord
name|layer_copy_proc
init|=
block|{
literal|"gimp_layer_copy"
block|,
literal|"Copy a layer"
block|,
literal|"This procedure copies the specified layer and returns the copy.  The newly copied layer is for use within the original layer's image.  It should not be subsequently added to any other image.  The copied layer can optionally have an added alpha channel.  This is useful if the background layer in an image is being copied and added to the same image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_copy_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_copy_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_copy_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***********************/
end_comment

begin_comment
comment|/*  LAYER_CREATE_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_create_mask_invoker (Argument * args)
name|layer_create_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|LayerMask
modifier|*
name|mask
decl_stmt|;
name|AddMaskType
name|mask_type
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|mask
operator|=
name|NULL
expr_stmt|;
name|mask_type
operator|=
name|WhiteMask
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
switch|switch
condition|(
name|int_value
condition|)
block|{
case|case
literal|0
case|:
name|mask_type
operator|=
name|WhiteMask
expr_stmt|;
break|break;
case|case
literal|1
case|:
name|mask_type
operator|=
name|BlackMask
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|mask_type
operator|=
name|AlphaMask
expr_stmt|;
break|break;
default|default:
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
block|}
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
operator|(
name|mask
operator|=
name|layer_create_mask
argument_list|(
name|layer
argument_list|,
name|mask_type
argument_list|)
operator|)
operator|!=
name|NULL
operator|)
expr_stmt|;
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_create_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|GIMP_DRAWABLE
argument_list|(
name|mask
argument_list|)
operator|->
name|ID
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_create_mask_args
name|ProcArg
name|layer_create_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer to which to add the mask"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"mask_type"
block|,
literal|"the type of mask: { WHITE-MASK (0), BLACK-MASK (1), ALPHA-MASK (2) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_create_mask_out_args
name|ProcArg
name|layer_create_mask_out_args
index|[]
init|=
block|{
block|{
name|PDB_CHANNEL
block|,
literal|"mask"
block|,
literal|"the newly created mask"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_create_mask_proc
name|ProcRecord
name|layer_create_mask_proc
init|=
block|{
literal|"gimp_layer_create_mask"
block|,
literal|"Create a layer mask for the specified specified layer"
block|,
literal|"This procedure creates a layer mask for the specified layer.  Layer masks serve as an additional alpha channel for a layer.  Three different types of masks are allowed initially: completely white masks (which will leave the layer fully visible), completely black masks (which will give the layer complete transparency), and the layer's already existing alpha channel (which will leave the layer fully visible, but which may be more useful than a white mask).  The layer mask still needs to be added to the layer.  This can be done with a call to 'gimage_add_layer_mask'."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_create_mask_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_create_mask_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_create_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*****************/
end_comment

begin_comment
comment|/*  LAYER_SCALE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_scale_invoker (Argument * args)
name|layer_scale_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|Layer
modifier|*
name|floating_layer
decl_stmt|;
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|int
name|new_width
decl_stmt|,
name|new_height
decl_stmt|;
name|int
name|local_origin
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|new_width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|new_height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|new_width
operator|<=
literal|0
operator|||
name|new_height
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|local_origin
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|gimage_ID
argument_list|)
operator|)
operator|!=
name|NULL
operator|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|floating_layer
operator|=
name|gimage_floating_sel
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
name|undo_push_group_start
argument_list|(
name|gimage
argument_list|,
name|LAYER_SCALE_UNDO
argument_list|)
expr_stmt|;
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_relax
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|layer_scale
argument_list|(
name|layer
argument_list|,
name|new_width
argument_list|,
name|new_height
argument_list|,
name|local_origin
argument_list|)
expr_stmt|;
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_rigor
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|undo_push_group_end
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_scale_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_scale_args
name|ProcArg
name|layer_scale_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"new_width"
block|,
literal|"new layer width: (new_width> 0)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"new_height"
block|,
literal|"new layer height: (new_height> 0)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"local_origin"
block|,
literal|"use a local origin, or the image origin?"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_scale_proc
name|ProcRecord
name|layer_scale_proc
init|=
block|{
literal|"gimp_layer_scale"
block|,
literal|"Scale the layer to the specified extents."
block|,
literal|"This procedure scales the layer so that it's new width and height are equal to the supplied parameters.  The \"local_origin\" parameter specifies whether to scale from the center of the layer, or from the image origin.  This operation only works if the layer has been added to an image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|4
block|,
name|layer_scale_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_scale_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************/
end_comment

begin_comment
comment|/*  LAYER_RESIZE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_resize_invoker (Argument * args)
name|layer_resize_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|Layer
modifier|*
name|floating_layer
decl_stmt|;
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|int
name|new_width
decl_stmt|,
name|new_height
decl_stmt|;
name|int
name|offx
decl_stmt|,
name|offy
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|new_width
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|new_height
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|new_width
operator|<=
literal|0
operator|||
name|new_height
operator|<=
literal|0
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|offx
operator|=
name|args
index|[
literal|3
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|offy
operator|=
name|args
index|[
literal|4
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|gimage_ID
argument_list|)
operator|)
operator|!=
name|NULL
operator|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|floating_layer
operator|=
name|gimage_floating_sel
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
name|undo_push_group_start
argument_list|(
name|gimage
argument_list|,
name|LAYER_SCALE_UNDO
argument_list|)
expr_stmt|;
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_relax
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|layer_resize
argument_list|(
name|layer
argument_list|,
name|new_width
argument_list|,
name|new_height
argument_list|,
name|offx
argument_list|,
name|offy
argument_list|)
expr_stmt|;
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_rigor
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|undo_push_group_end
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_resize_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_resize_args
name|ProcArg
name|layer_resize_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"new_width"
block|,
literal|"new layer width: (new_width> 0)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"new_height"
block|,
literal|"new layer height: (new_height> 0)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"offx"
block|,
literal|"x offset between upper left corner of old and new layers: (new - old)"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"offy"
block|,
literal|"y offset between upper left corner of old and new layers: (new - old)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_resize_proc
name|ProcRecord
name|layer_resize_proc
init|=
block|{
literal|"gimp_layer_resize"
block|,
literal|"Resize the layer to the specified extents."
block|,
literal|"This procedure resizes the layer so that it's new width and height are equal to the supplied parameters.  Offsets are also provided which describe the position of the previous layer's content.  No bounds checking is currently provided, so don't supply parameters that are out of bounds.  This operation on works if the layer has been added to an image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|5
block|,
name|layer_resize_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_resize_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************/
end_comment

begin_comment
comment|/*  LAYER_DELETE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_delete_invoker (Argument * args)
name|layer_delete_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|layer_delete
argument_list|(
name|layer
argument_list|)
expr_stmt|;
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_delete_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_delete_args
name|ProcArg
name|layer_delete_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer to delete"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_delete_proc
name|ProcRecord
name|layer_delete_proc
init|=
block|{
literal|"gimp_layer_delete"
block|,
literal|"Delete a layer"
block|,
literal|"This procedure deletes the specified layer.  This does not need to be done if a gimage containing this layer was already deleted."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_delete_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_delete_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*********************/
end_comment

begin_comment
comment|/*  LAYER_TRANSLATE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_translate_invoker (Argument * args)
name|layer_translate_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|,
modifier|*
name|tmp_layer
decl_stmt|;
name|Layer
modifier|*
name|floating_layer
decl_stmt|;
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|GSList
modifier|*
name|layer_list
decl_stmt|;
name|int
name|offx
decl_stmt|,
name|offy
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|offx
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|offy
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|gimage_ID
argument_list|)
operator|)
operator|!=
name|NULL
operator|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|floating_layer
operator|=
name|gimage_floating_sel
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
name|undo_push_group_start
argument_list|(
name|gimage
argument_list|,
name|LINKED_LAYER_UNDO
argument_list|)
expr_stmt|;
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_relax
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|layer_list
operator|=
name|gimage
operator|->
name|layers
expr_stmt|;
while|while
condition|(
name|layer_list
condition|)
block|{
name|tmp_layer
operator|=
operator|(
name|Layer
operator|*
operator|)
name|layer_list
operator|->
name|data
expr_stmt|;
if|if
condition|(
operator|(
name|tmp_layer
operator|==
name|layer
operator|)
operator|||
name|tmp_layer
operator|->
name|linked
condition|)
name|layer_translate
argument_list|(
name|tmp_layer
argument_list|,
name|offx
argument_list|,
name|offy
argument_list|)
expr_stmt|;
name|layer_list
operator|=
name|g_slist_next
argument_list|(
name|layer_list
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_rigor
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|undo_push_group_end
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_translate_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_translate_args
name|ProcArg
name|layer_translate_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"offx"
block|,
literal|"offset in x direction"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"offy"
block|,
literal|"offset in y direction"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_translate_proc
name|ProcRecord
name|layer_translate_proc
init|=
block|{
literal|"gimp_layer_translate"
block|,
literal|"Translate the layer by the specified offsets"
block|,
literal|"This procedure translates the layer by the amounts specified in the x and y arguments.  These can be negative, and are considered offsets from the current position.  This command only works if the layer has been added to an image.  All additional layers contained in the image which have the linked flag set to TRUE will also be translated by the specified offsets."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|3
block|,
name|layer_translate_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_translate_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*********************/
end_comment

begin_comment
comment|/*  LAYER_ADD_ALPHA  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_add_alpha_invoker (Argument * args)
name|layer_add_alpha_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|layer_add_alpha
argument_list|(
name|layer
argument_list|)
expr_stmt|;
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_add_alpha_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_add_alpha_args
name|ProcArg
name|layer_add_alpha_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_add_alpha_proc
name|ProcRecord
name|layer_add_alpha_proc
init|=
block|{
literal|"gimp_layer_add_alpha"
block|,
literal|"Add an alpha channel to the layer if it doesn't already have one."
block|,
literal|"This procedure adds an additional component to the specified layer if it does not already possess an alpha channel.  An alpha channel makes it possible to move a layer from the bottom of the layer stack and to clear and erase to transparency, instead of the background color.  This transforms images of type RGB to RGBA, Gray to GrayA, and Indexed to IndexedA."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_add_alpha_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_add_alpha_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/********************/
end_comment

begin_comment
comment|/*  LAYER_GET_NAME  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_name_invoker (Argument * args)
name|layer_get_name_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|char
modifier|*
name|name
init|=
name|NULL
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|name
operator|=
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|name
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_name_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
operator|=
operator|(
name|name
operator|)
condition|?
name|g_strdup
argument_list|(
name|name
argument_list|)
else|:
name|NULL
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_name_args
name|ProcArg
name|layer_get_name_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_name_out_args
name|ProcArg
name|layer_get_name_out_args
index|[]
init|=
block|{
block|{
name|PDB_STRING
block|,
literal|"name"
block|,
literal|"the layer name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_name_proc
name|ProcRecord
name|layer_get_name_proc
init|=
block|{
literal|"gimp_layer_get_name"
block|,
literal|"Get the name of the specified layer."
block|,
literal|"This procedure returns the specified layer's name."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_name_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_name_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_name_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/********************/
end_comment

begin_comment
comment|/*  LAYER_SET_NAME  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_name_invoker (Argument * args)
name|layer_set_name_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|char
modifier|*
name|name
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|name
operator|=
operator|(
name|char
operator|*
operator|)
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_pointer
expr_stmt|;
if|if
condition|(
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|name
condition|)
block|{
name|g_free
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|name
argument_list|)
expr_stmt|;
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|name
operator|=
operator|(
name|name
operator|)
condition|?
name|g_strdup
argument_list|(
name|name
argument_list|)
else|:
name|NULL
expr_stmt|;
block|}
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_name_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_name_args
name|ProcArg
name|layer_set_name_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_STRING
block|,
literal|"name"
block|,
literal|"the new layer name"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_name_proc
name|ProcRecord
name|layer_set_name_proc
init|=
block|{
literal|"gimp_layer_set_name"
block|,
literal|"Set the name of the specified layer."
block|,
literal|"This procedure sets the specified layer's name to the supplied name."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_name_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_name_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***********************/
end_comment

begin_comment
comment|/*  LAYER_GET_VISIBLE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_visible_invoker (Argument * args)
name|layer_get_visible_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|visible
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|visible
operator|=
name|FALSE
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|visible
operator|=
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|visible
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_visible_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|visible
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_visible_args
name|ProcArg
name|layer_get_visible_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_visible_out_args
name|ProcArg
name|layer_get_visible_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"visible"
block|,
literal|"the layer visibility"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_visible_proc
name|ProcRecord
name|layer_get_visible_proc
init|=
block|{
literal|"gimp_layer_get_visible"
block|,
literal|"Get the visibility of the specified layer."
block|,
literal|"This procedure returns the specified layer's visibility."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_visible_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_visible_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_visible_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***********************/
end_comment

begin_comment
comment|/*  LAYER_SET_VISIBLE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_visible_invoker (Argument * args)
name|layer_set_visible_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|visible
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|visible
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|visible
operator|=
operator|(
name|visible
operator|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_visible_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_visible_args
name|ProcArg
name|layer_set_visible_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"visible"
block|,
literal|"the new layer visibility"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_visible_proc
name|ProcRecord
name|layer_set_visible_proc
init|=
block|{
literal|"gimp_layer_set_visible"
block|,
literal|"Set the visibility of the specified layer."
block|,
literal|"This procedure sets the specified layer's visibility."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_visible_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_visible_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************/
end_comment

begin_comment
comment|/*  LAYER_GET_PRESERVE_TRANS  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_preserve_trans_invoker (Argument * args)
name|layer_get_preserve_trans_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|preserve_trans
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|preserve_trans
operator|=
name|FALSE
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|preserve_trans
operator|=
name|layer
operator|->
name|preserve_trans
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_preserve_trans_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|preserve_trans
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_preserve_trans_args
name|ProcArg
name|layer_get_preserve_trans_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_preserve_trans_out_args
name|ProcArg
name|layer_get_preserve_trans_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"preserve_trans"
block|,
literal|"the layer's preserve transparency setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_preserve_trans_proc
name|ProcRecord
name|layer_get_preserve_trans_proc
init|=
block|{
literal|"gimp_layer_get_preserve_trans"
block|,
literal|"Get the perserve transparency setting of the layer"
block|,
literal|"This procedure returns the specified layer's preserve transparency setting."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_preserve_trans_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_preserve_trans_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_preserve_trans_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************/
end_comment

begin_comment
comment|/*  LAYER_SET_PRESERVE_TRANS  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_preserve_trans_invoker (Argument * args)
name|layer_set_preserve_trans_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|preserve_trans
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|preserve_trans
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|layer
operator|->
name|preserve_trans
operator|=
operator|(
name|preserve_trans
operator|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_preserve_trans_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_preserve_trans_args
name|ProcArg
name|layer_set_preserve_trans_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"preserve_trans"
block|,
literal|"the new layer preserve transparency setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_preserve_trans_proc
name|ProcRecord
name|layer_set_preserve_trans_proc
init|=
block|{
literal|"gimp_layer_set_preserve_trans"
block|,
literal|"Set the preserve transparency parameter for the specified layer."
block|,
literal|"This procedure sets the specified layer's preserve transparency option."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_preserve_trans_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_preserve_trans_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/**************************/
end_comment

begin_comment
comment|/*  LAYER_GET_APPLY_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_apply_mask_invoker (Argument * args)
name|layer_get_apply_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|apply_mask
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|apply_mask
operator|=
name|FALSE
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|apply_mask
operator|=
name|layer
operator|->
name|apply_mask
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_apply_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|apply_mask
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_apply_mask_args
name|ProcArg
name|layer_get_apply_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_apply_mask_out_args
name|ProcArg
name|layer_get_apply_mask_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"apply_mask"
block|,
literal|"the layer's apply mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_apply_mask_proc
name|ProcRecord
name|layer_get_apply_mask_proc
init|=
block|{
literal|"gimp_layer_get_apply_mask"
block|,
literal|"Get the apply mask setting for the layer"
block|,
literal|"This procedure returns the specified layer's apply mask setting.  If the return value is non-zero, then the layer mask for this layer is currently being composited with the layer's alpha channel."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_apply_mask_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_apply_mask_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_apply_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/**************************/
end_comment

begin_comment
comment|/*  LAYER_SET_APPLY_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_apply_mask_invoker (Argument * args)
name|layer_set_apply_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|apply_mask
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|apply_mask
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|layer
operator|->
name|apply_mask
operator|=
operator|(
name|apply_mask
operator|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_apply_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_apply_mask_args
name|ProcArg
name|layer_set_apply_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"apply_mask"
block|,
literal|"the new layer apply mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_apply_mask_proc
name|ProcRecord
name|layer_set_apply_mask_proc
init|=
block|{
literal|"gimp_layer_set_apply_mask"
block|,
literal|"Set the apply mask parameter for the specified layer."
block|,
literal|"This procedure sets the specified layer's apply mask parameter.  This controls whether the layer's mask is currently affecting the alpha channel.  If there is no layer mask, this function will return an error"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_apply_mask_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_apply_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*************************/
end_comment

begin_comment
comment|/*  LAYER_GET_SHOW_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_show_mask_invoker (Argument * args)
name|layer_get_show_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|show_mask
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|show_mask
operator|=
name|FALSE
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|show_mask
operator|=
name|layer
operator|->
name|show_mask
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_show_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|show_mask
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_show_mask_args
name|ProcArg
name|layer_get_show_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_show_mask_out_args
name|ProcArg
name|layer_get_show_mask_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"show_mask"
block|,
literal|"the layer's show mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_show_mask_proc
name|ProcRecord
name|layer_get_show_mask_proc
init|=
block|{
literal|"gimp_layer_get_show_mask"
block|,
literal|"Get the show mask setting for the layer"
block|,
literal|"This procedure returns the specified layer's show mask setting.  If the value is non-zero, then the layer's mask is currently being shown instead of the layer."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_show_mask_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_show_mask_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_show_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*************************/
end_comment

begin_comment
comment|/*  LAYER_SET_SHOW_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_show_mask_invoker (Argument * args)
name|layer_set_show_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|show_mask
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|show_mask
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|layer
operator|->
name|show_mask
operator|=
operator|(
name|show_mask
operator|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_show_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_show_mask_args
name|ProcArg
name|layer_set_show_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"show_mask"
block|,
literal|"the new layer show mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_show_mask_proc
name|ProcRecord
name|layer_set_show_mask_proc
init|=
block|{
literal|"gimp_layer_set_show_mask"
block|,
literal|"Set the show mask parameter for the specified layer."
block|,
literal|"This procedure sets the specified layer's show mask parameter.  This setting controls whether the layer or it's mask is visible.  Non-zero values indicate that the mask should be visible.  If the layer has no mask, then this function returns an error."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_show_mask_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_show_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*************************/
end_comment

begin_comment
comment|/*  LAYER_GET_EDIT_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_edit_mask_invoker (Argument * args)
name|layer_get_edit_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|edit_mask
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|edit_mask
operator|=
name|FALSE
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|edit_mask
operator|=
name|layer
operator|->
name|edit_mask
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_edit_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|edit_mask
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_edit_mask_args
name|ProcArg
name|layer_get_edit_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_edit_mask_out_args
name|ProcArg
name|layer_get_edit_mask_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"edit_mask"
block|,
literal|"the layer's edit mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_edit_mask_proc
name|ProcRecord
name|layer_get_edit_mask_proc
init|=
block|{
literal|"gimp_layer_get_edit_mask"
block|,
literal|"Get the edit mask setting for the layer"
block|,
literal|"This procedure returns the specified layer's edit mask setting.  If the value is non-zero, then the layer's mask is currently active, and not the layer."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_edit_mask_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_edit_mask_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_edit_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*************************/
end_comment

begin_comment
comment|/*  LAYER_SET_EDIT_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_edit_mask_invoker (Argument * args)
name|layer_set_edit_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|edit_mask
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|edit_mask
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|layer
operator|->
name|mask
condition|)
name|layer
operator|->
name|edit_mask
operator|=
operator|(
name|edit_mask
operator|)
condition|?
name|TRUE
else|:
name|FALSE
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_edit_mask_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_edit_mask_args
name|ProcArg
name|layer_set_edit_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"edit_mask"
block|,
literal|"the new layer edit mask setting"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_edit_mask_proc
name|ProcRecord
name|layer_set_edit_mask_proc
init|=
block|{
literal|"gimp_layer_set_edit_mask"
block|,
literal|"Set the edit mask parameter for the specified layer."
block|,
literal|"This procedure sets the specified layer's edit mask parameter.  This setting controls whether the layer or it's mask is currently active for editing.  If the specified layer has no layer mask, then this procedure will return an error."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_edit_mask_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_edit_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***********************/
end_comment

begin_comment
comment|/*  LAYER_GET_OPACITY  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_opacity_invoker (Argument * args)
name|layer_get_opacity_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|double
name|opacity
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|opacity
operator|=
literal|0.0
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|opacity
operator|=
operator|(
operator|(
name|layer
operator|->
name|opacity
operator|)
operator|*
literal|100.0
operator|)
operator|/
literal|255.0
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_opacity_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
operator|=
name|opacity
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_opacity_args
name|ProcArg
name|layer_get_opacity_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_opacity_out_args
name|ProcArg
name|layer_get_opacity_out_args
index|[]
init|=
block|{
block|{
name|PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"the layer opacity"
block|,   }
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_opacity_proc
name|ProcRecord
name|layer_get_opacity_proc
init|=
block|{
literal|"gimp_layer_get_opacity"
block|,
literal|"Get the opacity of the specified layer."
block|,
literal|"This procedure returns the specified layer's opacity."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_opacity_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_opacity_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_opacity_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***********************/
end_comment

begin_comment
comment|/*  LAYER_SET_OPACITY  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_opacity_invoker (Argument * args)
name|layer_set_opacity_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|double
name|opacity
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|opacity
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_float
expr_stmt|;
name|layer
operator|->
name|opacity
operator|=
call|(
name|int
call|)
argument_list|(
operator|(
name|opacity
operator|*
literal|255
operator|)
operator|/
literal|100
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_opacity_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_opacity_args
name|ProcArg
name|layer_set_opacity_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_FLOAT
block|,
literal|"opacity"
block|,
literal|"the new layer opacity: (0<= opacity<= 100)"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_opacity_proc
name|ProcRecord
name|layer_set_opacity_proc
init|=
block|{
literal|"gimp_layer_set_opacity"
block|,
literal|"Set the opacity of the specified layer."
block|,
literal|"This procedure sets the specified layer's opacity."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_opacity_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_opacity_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/********************/
end_comment

begin_comment
comment|/*  LAYER_GET_MODE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_get_mode_invoker (Argument * args)
name|layer_get_mode_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|mode
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|mode
operator|=
literal|0
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|mode
operator|=
name|layer
operator|->
name|mode
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_get_mode_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|mode
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_get_mode_args
name|ProcArg
name|layer_get_mode_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mode_out_args
name|ProcArg
name|layer_get_mode_out_args
index|[]
init|=
block|{
block|{
name|PDB_INT32
block|,
literal|"mode"
block|,
literal|"the layer combination mode: { NORMAL (0), DISSOLVE (1), MULTIPLY/BURN (3), SCREEN (4), OVERLAY (5) DIFFERENCE (6), ADDITION (7), SUBTRACT (8), DARKEN-ONLY (9), LIGHTEN-ONLY (10), HUE (11), SATURATION (12), COLOR (13), VALUE (14), DIVIDE/DODGE (15) }"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_get_mode_proc
name|ProcRecord
name|layer_get_mode_proc
init|=
block|{
literal|"gimp_layer_get_mode"
block|,
literal|"Get the combination mode of the specified layer."
block|,
literal|"This procedure returns the specified layer's combination mode."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_get_mode_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_get_mode_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_get_mode_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/********************/
end_comment

begin_comment
comment|/*  LAYER_SET_MODE  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_mode_invoker (Argument * args)
name|layer_set_mode_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
name|int_value
operator|>=
name|NORMAL_MODE
operator|&&
name|int_value
operator|<=
name|VALUE_MODE
condition|)
name|layer
operator|->
name|mode
operator|=
name|int_value
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_mode_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_mode_args
name|ProcArg
name|layer_set_mode_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"mode"
block|,
literal|"the new layer combination mode"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_mode_proc
name|ProcRecord
name|layer_set_mode_proc
init|=
block|{
literal|"gimp_layer_set_mode"
block|,
literal|"Set the combination mode of the specified layer."
block|,
literal|"This procedure sets the specified layer's combination mode."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|2
block|,
name|layer_set_mode_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_mode_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***********************/
end_comment

begin_comment
comment|/*  LAYER_SET_OFFSETS  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_set_offsets_invoker (Argument * args)
name|layer_set_offsets_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|Layer
modifier|*
name|floating_layer
decl_stmt|;
name|GImage
modifier|*
name|gimage
decl_stmt|;
name|int
name|offx
decl_stmt|,
name|offy
decl_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
operator|==
name|NULL
condition|)
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
block|{
name|offx
operator|=
name|args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
name|offy
operator|=
name|args
index|[
literal|2
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
block|}
if|if
condition|(
name|success
condition|)
name|success
operator|=
operator|(
operator|(
name|gimage
operator|=
name|gimage_get_ID
argument_list|(
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|gimage_ID
argument_list|)
operator|)
operator|!=
name|NULL
operator|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|floating_layer
operator|=
name|gimage_floating_sel
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
name|undo_push_group_start
argument_list|(
name|gimage
argument_list|,
name|LINKED_LAYER_UNDO
argument_list|)
expr_stmt|;
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_relax
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|layer_translate
argument_list|(
name|layer
argument_list|,
operator|(
name|offx
operator|-
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|offset_x
operator|)
argument_list|,
operator|(
name|offy
operator|-
name|GIMP_DRAWABLE
argument_list|(
name|layer
argument_list|)
operator|->
name|offset_y
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|floating_layer
condition|)
name|floating_sel_rigor
argument_list|(
name|floating_layer
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|undo_push_group_end
argument_list|(
name|gimage
argument_list|)
expr_stmt|;
block|}
return|return
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_set_offsets_proc
argument_list|,
name|success
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_set_offsets_args
name|ProcArg
name|layer_set_offsets_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"offx"
block|,
literal|"offset in x direction"
block|}
block|,
block|{
name|PDB_INT32
block|,
literal|"offy"
block|,
literal|"offset in y direction"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_set_offsets_proc
name|ProcRecord
name|layer_set_offsets_proc
init|=
block|{
literal|"gimp_layer_set_offsets"
block|,
literal|"Set the layer offsets"
block|,
literal|"This procedure sets the offsets for the specified layer.  The offsets are relative to the image origin and can be any values.  This operation is valid only on layers which have been added to an image."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|3
block|,
name|layer_set_offsets_args
block|,
comment|/*  Output arguments  */
literal|0
block|,
name|NULL
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_set_offsets_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/****************/
end_comment

begin_comment
comment|/*  LAYER_MASK  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_mask_invoker (Argument * args)
name|layer_mask_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|mask
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|mask
operator|=
operator|-
literal|1
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|mask
operator|=
operator|(
name|layer
operator|->
name|mask
operator|)
condition|?
name|GIMP_DRAWABLE
argument_list|(
name|layer
operator|->
name|mask
argument_list|)
operator|->
name|ID
else|:
operator|-
literal|1
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_mask_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|mask
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_mask_args
name|ProcArg
name|layer_mask_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_mask_out_args
name|ProcArg
name|layer_mask_out_args
index|[]
init|=
block|{
block|{
name|PDB_CHANNEL
block|,
literal|"mask"
block|,
literal|"the layer mask"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_mask_proc
name|ProcRecord
name|layer_mask_proc
init|=
block|{
literal|"gimp_layer_mask"
block|,
literal|"Get the specified layer's mask if it exists."
block|,
literal|"This procedure returns the specified layer's mask, or -1 if none exists."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_mask_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_mask_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_mask_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***************************/
end_comment

begin_comment
comment|/*  LAYER_IS_FLOATING_SEL  */
end_comment

begin_function
specifier|static
name|Argument
modifier|*
DECL|function|layer_is_floating_sel_invoker (Argument * args)
name|layer_is_floating_sel_invoker
parameter_list|(
name|Argument
modifier|*
name|args
parameter_list|)
block|{
name|Layer
modifier|*
name|layer
decl_stmt|;
name|int
name|is_floating_sel
decl_stmt|;
name|Argument
modifier|*
name|return_args
decl_stmt|;
name|is_floating_sel
operator|=
name|FALSE
expr_stmt|;
name|success
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|success
condition|)
block|{
name|int_value
operator|=
name|args
index|[
literal|0
index|]
operator|.
name|value
operator|.
name|pdb_int
expr_stmt|;
if|if
condition|(
operator|(
name|layer
operator|=
name|layer_get_ID
argument_list|(
name|int_value
argument_list|)
operator|)
condition|)
name|is_floating_sel
operator|=
name|layer_is_floating_sel
argument_list|(
name|layer
argument_list|)
expr_stmt|;
else|else
name|success
operator|=
name|FALSE
expr_stmt|;
block|}
name|return_args
operator|=
name|procedural_db_return_args
argument_list|(
operator|&
name|layer_is_floating_sel_proc
argument_list|,
name|success
argument_list|)
expr_stmt|;
if|if
condition|(
name|success
condition|)
name|return_args
index|[
literal|1
index|]
operator|.
name|value
operator|.
name|pdb_int
operator|=
name|is_floating_sel
expr_stmt|;
return|return
name|return_args
return|;
block|}
end_function

begin_comment
comment|/*  The procedure definition  */
end_comment

begin_decl_stmt
DECL|variable|layer_is_floating_sel_args
name|ProcArg
name|layer_is_floating_sel_args
index|[]
init|=
block|{
block|{
name|PDB_LAYER
block|,
literal|"layer"
block|,
literal|"the layer"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_is_floating_sel_out_args
name|ProcArg
name|layer_is_floating_sel_out_args
index|[]
init|=
block|{
block|{
name|PDB_CHANNEL
block|,
literal|"is_floating_sel"
block|,
literal|"non-zero if the layer is a floating selection"
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|layer_is_floating_sel_proc
name|ProcRecord
name|layer_is_floating_sel_proc
init|=
block|{
literal|"gimp_layer_is_floating_sel"
block|,
literal|"Is the specified layer a floating selection?"
block|,
literal|"This procedure returns whether the layer is a floating selection.  Floating selections are special cases of layers which are attached to a specific drawable."
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"Spencer Kimball& Peter Mattis"
block|,
literal|"1995-1996"
block|,
name|PDB_INTERNAL
block|,
comment|/*  Input arguments  */
literal|1
block|,
name|layer_is_floating_sel_args
block|,
comment|/*  Output arguments  */
literal|1
block|,
name|layer_is_floating_sel_out_args
block|,
comment|/*  Exec method  */
block|{
block|{
name|layer_is_floating_sel_invoker
block|}
block|}
block|, }
decl_stmt|;
end_decl_stmt

end_unit

