begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<sys/time.h>
end_include

begin_include
include|#
directive|include
file|<glib-object.h>
end_include

begin_include
include|#
directive|include
file|"base/base-types.h"
end_include

begin_include
include|#
directive|include
file|"gimp-composite.h"
end_include

begin_include
include|#
directive|include
file|"gimp-composite-util.h"
end_include

begin_undef
undef|#
directive|undef
name|use_oldmmx
end_undef

begin_function_decl
specifier|extern
name|void
name|xxx_3a
parameter_list|(
name|rgba8_t
modifier|*
parameter_list|,
name|rgba8_t
modifier|*
parameter_list|,
name|rgba8_t
modifier|*
parameter_list|,
name|u_long
parameter_list|)
function_decl|;
end_function_decl

begin_function
specifier|static
name|void
DECL|function|print_rgba8 (rgba8_t * p)
name|print_rgba8
parameter_list|(
name|rgba8_t
modifier|*
name|p
parameter_list|)
block|{
name|printf
argument_list|(
literal|"#%02x%02x%02x,%02X"
argument_list|,
name|p
operator|->
name|r
argument_list|,
name|p
operator|->
name|g
argument_list|,
name|p
operator|->
name|b
argument_list|,
name|p
operator|->
name|a
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|stdout
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|print_va8 (va8_t * va8)
name|print_va8
parameter_list|(
name|va8_t
modifier|*
name|va8
parameter_list|)
block|{
name|printf
argument_list|(
literal|"#%02x,%02X"
argument_list|,
name|va8
operator|->
name|v
argument_list|,
name|va8
operator|->
name|a
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|stdout
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|comp_rgba8 (char * str,rgba8_t * rgba8A,rgba8_t * rgba8B,rgba8_t * expected,rgba8_t * got,u_long length)
name|comp_rgba8
parameter_list|(
name|char
modifier|*
name|str
parameter_list|,
name|rgba8_t
modifier|*
name|rgba8A
parameter_list|,
name|rgba8_t
modifier|*
name|rgba8B
parameter_list|,
name|rgba8_t
modifier|*
name|expected
parameter_list|,
name|rgba8_t
modifier|*
name|got
parameter_list|,
name|u_long
name|length
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|int
name|failed
decl_stmt|;
name|int
name|fail_count
decl_stmt|;
name|fail_count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|length
condition|;
name|i
operator|++
control|)
block|{
name|failed
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|expected
index|[
name|i
index|]
operator|.
name|r
operator|!=
name|got
index|[
name|i
index|]
operator|.
name|r
condition|)
block|{
name|failed
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|expected
index|[
name|i
index|]
operator|.
name|g
operator|!=
name|got
index|[
name|i
index|]
operator|.
name|g
condition|)
block|{
name|failed
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|expected
index|[
name|i
index|]
operator|.
name|b
operator|!=
name|got
index|[
name|i
index|]
operator|.
name|b
condition|)
block|{
name|failed
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|expected
index|[
name|i
index|]
operator|.
name|a
operator|!=
name|got
index|[
name|i
index|]
operator|.
name|a
condition|)
block|{
name|failed
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|failed
condition|)
block|{
name|fail_count
operator|++
expr_stmt|;
name|printf
argument_list|(
literal|"%s %8d A="
argument_list|,
name|str
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|rgba8A
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|rgba8B
operator|!=
operator|(
name|rgba8_t
operator|*
operator|)
literal|0
condition|)
block|{
name|printf
argument_list|(
literal|" B="
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|rgba8B
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|printf
argument_list|(
literal|"   "
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"exp="
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|expected
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|" got="
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|got
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|fail_count
operator|>
literal|5
condition|)
break|break;
block|}
return|return
name|fail_count
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|comp_va8 (char * str,va8_t * va8A,va8_t * va8B,va8_t * expected,va8_t * got,u_long length)
name|comp_va8
parameter_list|(
name|char
modifier|*
name|str
parameter_list|,
name|va8_t
modifier|*
name|va8A
parameter_list|,
name|va8_t
modifier|*
name|va8B
parameter_list|,
name|va8_t
modifier|*
name|expected
parameter_list|,
name|va8_t
modifier|*
name|got
parameter_list|,
name|u_long
name|length
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|int
name|failed
decl_stmt|;
name|int
name|fail_count
decl_stmt|;
name|fail_count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|length
condition|;
name|i
operator|++
control|)
block|{
name|failed
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|expected
index|[
name|i
index|]
operator|.
name|v
operator|!=
name|got
index|[
name|i
index|]
operator|.
name|v
condition|)
block|{
name|failed
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|expected
index|[
name|i
index|]
operator|.
name|a
operator|!=
name|got
index|[
name|i
index|]
operator|.
name|a
condition|)
block|{
name|failed
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|failed
condition|)
block|{
name|fail_count
operator|++
expr_stmt|;
name|printf
argument_list|(
literal|"%s %8d A="
argument_list|,
name|str
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|print_va8
argument_list|(
operator|&
name|va8A
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|va8B
operator|!=
operator|(
name|va8_t
operator|*
operator|)
literal|0
condition|)
block|{
name|printf
argument_list|(
literal|" B="
argument_list|)
expr_stmt|;
name|print_va8
argument_list|(
operator|&
name|va8B
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|printf
argument_list|(
literal|"   "
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"exp="
argument_list|)
expr_stmt|;
name|print_va8
argument_list|(
operator|&
name|expected
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|" got="
argument_list|)
expr_stmt|;
name|print_va8
argument_list|(
operator|&
name|got
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|fail_count
operator|>
literal|5
condition|)
break|break;
block|}
return|return
name|fail_count
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|dump_rgba8 (char * str,rgba8_t * rgba,u_long length)
name|dump_rgba8
parameter_list|(
name|char
modifier|*
name|str
parameter_list|,
name|rgba8_t
modifier|*
name|rgba
parameter_list|,
name|u_long
name|length
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|printf
argument_list|(
literal|"%s\n"
argument_list|,
name|str
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|length
condition|;
name|i
operator|++
control|)
block|{
name|printf
argument_list|(
literal|"%5d: "
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|rgba
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|xxx_3a (rgba8_t * a,rgba8_t * b,rgba8_t * c,u_long length)
name|xxx_3a
parameter_list|(
name|rgba8_t
modifier|*
name|a
parameter_list|,
name|rgba8_t
modifier|*
name|b
parameter_list|,
name|rgba8_t
modifier|*
name|c
parameter_list|,
name|u_long
name|length
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|length
condition|;
name|i
operator|++
control|)
block|{
name|printf
argument_list|(
literal|"%5d: "
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|a
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|" "
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|b
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|" "
argument_list|)
expr_stmt|;
name|print_rgba8
argument_list|(
operator|&
name|c
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|int
DECL|function|main (int argc,char * argv[])
name|main
parameter_list|(
name|int
name|argc
parameter_list|,
name|char
modifier|*
name|argv
index|[]
parameter_list|)
block|{
name|GimpCompositeContext
name|ctx
decl_stmt|;
name|GimpCompositeContext
name|ctx_generic
decl_stmt|;
name|GimpCompositeContext
name|ctx_va8
decl_stmt|;
name|GimpCompositeContext
name|ctx_va8_generic
decl_stmt|;
name|int
name|iterations
decl_stmt|;
name|rgba8_t
modifier|*
name|d1
decl_stmt|;
name|rgba8_t
modifier|*
name|d2
decl_stmt|;
name|rgba8_t
modifier|*
name|rgba8A
decl_stmt|;
name|rgba8_t
modifier|*
name|rgba8B
decl_stmt|;
name|va8_t
modifier|*
name|va8A
decl_stmt|;
name|va8_t
modifier|*
name|va8B
decl_stmt|;
name|va8_t
modifier|*
name|va8_d1
decl_stmt|;
name|va8_t
modifier|*
name|va8_d2
decl_stmt|;
name|struct
name|timeval
name|t0
decl_stmt|,
name|t1
decl_stmt|,
name|new_elapsed
decl_stmt|,
name|old_elapsed
decl_stmt|;
name|unsigned
name|long
name|i
decl_stmt|;
name|unsigned
name|long
name|n_pixels
decl_stmt|;
name|iterations
operator|=
name|atoi
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|n_pixels
operator|=
name|atol
argument_list|(
name|argv
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|rgba8A
operator|=
operator|(
name|rgba8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|rgba8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|rgba8B
operator|=
operator|(
name|rgba8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|rgba8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|va8A
operator|=
operator|(
name|va8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|va8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|va8B
operator|=
operator|(
name|va8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|va8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|d1
operator|=
operator|(
name|rgba8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|rgba8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|d2
operator|=
operator|(
name|rgba8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|rgba8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|va8_d1
operator|=
operator|(
name|va8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|va8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|va8_d2
operator|=
operator|(
name|va8_t
operator|*
operator|)
name|calloc
argument_list|(
sizeof|sizeof
argument_list|(
name|va8_t
argument_list|)
argument_list|,
name|n_pixels
operator|+
literal|1
argument_list|)
expr_stmt|;
name|srand
argument_list|(
literal|314159
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n_pixels
condition|;
name|i
operator|++
control|)
block|{
if|#
directive|if
literal|0
block|rgba8A[i].r = rand() % 256;     rgba8A[i].g = rand() % 256;     rgba8A[i].b = rand() % 256;     rgba8A[i].a = rand() % 256;      rgba8B[i].r = rand() % 256;     rgba8B[i].g = rand() % 256;     rgba8B[i].b = rand() % 256;     rgba8B[i].a = rand() % 256;
else|#
directive|else
name|rgba8A
index|[
name|i
index|]
operator|.
name|r
operator|=
literal|255
operator|-
name|i
expr_stmt|;
name|rgba8A
index|[
name|i
index|]
operator|.
name|g
operator|=
literal|255
operator|-
name|i
expr_stmt|;
name|rgba8A
index|[
name|i
index|]
operator|.
name|b
operator|=
literal|255
operator|-
name|i
expr_stmt|;
name|rgba8A
index|[
name|i
index|]
operator|.
name|a
operator|=
literal|255
operator|-
name|i
expr_stmt|;
name|rgba8B
index|[
name|i
index|]
operator|.
name|r
operator|=
name|i
expr_stmt|;
name|rgba8B
index|[
name|i
index|]
operator|.
name|g
operator|=
name|i
expr_stmt|;
name|rgba8B
index|[
name|i
index|]
operator|.
name|b
operator|=
name|i
expr_stmt|;
name|rgba8B
index|[
name|i
index|]
operator|.
name|a
operator|=
name|i
expr_stmt|;
name|va8A
index|[
name|i
index|]
operator|.
name|v
operator|=
name|i
expr_stmt|;
name|va8A
index|[
name|i
index|]
operator|.
name|a
operator|=
literal|255
operator|-
name|i
expr_stmt|;
name|va8B
index|[
name|i
index|]
operator|.
name|v
operator|=
name|i
expr_stmt|;
name|va8B
index|[
name|i
index|]
operator|.
name|a
operator|=
name|i
expr_stmt|;
endif|#
directive|endif
block|}
name|gimp_composite_init
argument_list|()
expr_stmt|;
DECL|macro|do_add
define|#
directive|define
name|do_add
DECL|macro|do_darken
define|#
directive|define
name|do_darken
DECL|macro|do_difference
define|#
directive|define
name|do_difference
DECL|macro|do_lighten
define|#
directive|define
name|do_lighten
DECL|macro|do_multiply
define|#
directive|define
name|do_multiply
DECL|macro|do_subtract
define|#
directive|define
name|do_subtract
DECL|macro|do_screen
define|#
directive|define
name|do_screen
DECL|macro|do_grainextract
define|#
directive|define
name|do_grainextract
DECL|macro|do_grainmerge
define|#
directive|define
name|do_grainmerge
DECL|macro|do_divide
define|#
directive|define
name|do_divide
DECL|macro|do_dodge
define|#
directive|define
name|do_dodge
DECL|macro|do_swap
define|#
directive|define
name|do_swap
DECL|macro|do_scale
define|#
directive|define
name|do_scale
DECL|macro|do_burn
define|#
directive|define
name|do_burn
name|ctx
operator|.
name|A
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|rgba8A
expr_stmt|;
name|ctx
operator|.
name|pixelformat_A
operator|=
name|GIMP_PIXELFORMAT_RGBA8
expr_stmt|;
name|ctx
operator|.
name|B
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|rgba8B
expr_stmt|;
name|ctx
operator|.
name|pixelformat_B
operator|=
name|GIMP_PIXELFORMAT_RGBA8
expr_stmt|;
name|ctx
operator|.
name|D
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|d2
expr_stmt|;
name|ctx
operator|.
name|pixelformat_D
operator|=
name|GIMP_PIXELFORMAT_RGBA8
expr_stmt|;
name|ctx
operator|.
name|M
operator|=
name|NULL
expr_stmt|;
name|ctx
operator|.
name|pixelformat_M
operator|=
name|GIMP_PIXELFORMAT_ANY
expr_stmt|;
name|ctx
operator|.
name|n_pixels
operator|=
name|n_pixels
expr_stmt|;
name|ctx
operator|.
name|scale
operator|.
name|scale
operator|=
literal|2
expr_stmt|;
name|ctx_generic
operator|.
name|A
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|rgba8A
expr_stmt|;
name|ctx_generic
operator|.
name|pixelformat_A
operator|=
name|GIMP_PIXELFORMAT_RGBA8
expr_stmt|;
name|ctx_generic
operator|.
name|B
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|rgba8B
expr_stmt|;
name|ctx_generic
operator|.
name|pixelformat_B
operator|=
name|GIMP_PIXELFORMAT_RGBA8
expr_stmt|;
name|ctx_generic
operator|.
name|D
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|d1
expr_stmt|;
name|ctx_generic
operator|.
name|pixelformat_D
operator|=
name|GIMP_PIXELFORMAT_RGBA8
expr_stmt|;
name|ctx_generic
operator|.
name|M
operator|=
name|NULL
expr_stmt|;
name|ctx_generic
operator|.
name|pixelformat_M
operator|=
name|GIMP_PIXELFORMAT_ANY
expr_stmt|;
name|ctx_generic
operator|.
name|n_pixels
operator|=
name|n_pixels
expr_stmt|;
name|ctx_generic
operator|.
name|scale
operator|.
name|scale
operator|=
literal|2
expr_stmt|;
name|ctx_va8
operator|.
name|A
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|va8A
expr_stmt|;
name|ctx_va8
operator|.
name|pixelformat_A
operator|=
name|GIMP_PIXELFORMAT_VA8
expr_stmt|;
name|ctx_va8
operator|.
name|B
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|va8B
expr_stmt|;
name|ctx_va8
operator|.
name|pixelformat_B
operator|=
name|GIMP_PIXELFORMAT_VA8
expr_stmt|;
name|ctx_va8
operator|.
name|D
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|va8_d2
expr_stmt|;
name|ctx_va8
operator|.
name|pixelformat_D
operator|=
name|GIMP_PIXELFORMAT_VA8
expr_stmt|;
name|ctx_va8
operator|.
name|M
operator|=
name|NULL
expr_stmt|;
name|ctx_va8
operator|.
name|pixelformat_M
operator|=
name|GIMP_PIXELFORMAT_ANY
expr_stmt|;
name|ctx_va8
operator|.
name|n_pixels
operator|=
name|n_pixels
expr_stmt|;
name|ctx_va8
operator|.
name|scale
operator|.
name|scale
operator|=
literal|2
expr_stmt|;
name|ctx_va8_generic
operator|.
name|A
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|va8A
expr_stmt|;
name|ctx_va8_generic
operator|.
name|pixelformat_A
operator|=
name|GIMP_PIXELFORMAT_VA8
expr_stmt|;
name|ctx_va8_generic
operator|.
name|B
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|va8B
expr_stmt|;
name|ctx_va8_generic
operator|.
name|pixelformat_B
operator|=
name|GIMP_PIXELFORMAT_VA8
expr_stmt|;
name|ctx_va8_generic
operator|.
name|D
operator|=
operator|(
name|unsigned
name|char
operator|*
operator|)
name|va8_d1
expr_stmt|;
name|ctx_va8_generic
operator|.
name|pixelformat_D
operator|=
name|GIMP_PIXELFORMAT_VA8
expr_stmt|;
name|ctx_va8_generic
operator|.
name|M
operator|=
name|NULL
expr_stmt|;
name|ctx_va8_generic
operator|.
name|pixelformat_M
operator|=
name|GIMP_PIXELFORMAT_ANY
expr_stmt|;
name|ctx_va8_generic
operator|.
name|n_pixels
operator|=
name|n_pixels
expr_stmt|;
name|ctx_va8_generic
operator|.
name|scale
operator|.
name|scale
operator|=
literal|2
expr_stmt|;
DECL|macro|timer_fsecs (tv)
define|#
directive|define
name|timer_fsecs
parameter_list|(
name|tv
parameter_list|)
value|((double) ((tv).tv_sec) + (double) ((tv).tv_usec / 1000000.0))
DECL|macro|timer_report (name,t1,t2)
define|#
directive|define
name|timer_report
parameter_list|(
name|name
parameter_list|,
name|t1
parameter_list|,
name|t2
parameter_list|)
value|printf("%15s %15.10f %15.10f %15.10f\n", name, timer_fsecs(t1), timer_fsecs(t2), timer_fsecs(t1)/timer_fsecs(t2));
ifdef|#
directive|ifdef
name|do_burn
comment|/* burn */
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_BURN
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_burn_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"burn rgba8"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"burn rgba8"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx_va8
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_BURN
expr_stmt|;
name|ctx_va8_generic
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_BURN
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx_va8
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_burn_any_any_any_generic
argument_list|(
operator|&
name|ctx_va8_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_va8
argument_list|(
literal|"burn rgba8"
argument_list|,
name|ctx_va8
operator|.
name|A
argument_list|,
name|ctx_va8
operator|.
name|B
argument_list|,
name|ctx_va8_generic
operator|.
name|D
argument_list|,
name|ctx_va8
operator|.
name|D
argument_list|,
name|ctx_va8
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"burn va8"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_dodge
comment|/* dodge */
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_DODGE
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dodge_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"dodge"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"dodge"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_divide
comment|/* divide */
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_DIVIDE
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_divide_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"divide"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"divide"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_grainextract
comment|/* grainextract */
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_GRAIN_EXTRACT
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_grain_extract_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"grain extract"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"grainextract"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_grainmerge
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_GRAIN_MERGE
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_grain_merge_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"grain merge"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"grainmerge"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_scale
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_SCALE
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_scale_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"scale"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|NULL
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"scale"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_screen
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_SCREEN
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_screen_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"screen"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"screen"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_lighten
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_LIGHTEN
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_lighten_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"lighten"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"lighten"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_darken
comment|/* darken */
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_DARKEN
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_darken_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"darken"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"darken"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_difference
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_DIFFERENCE
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_difference_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"difference"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"difference"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_multiply
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_MULTIPLY
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_multiply_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"multiply"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"multiply"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_subtract
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_SUBTRACT
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_subtract_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"subtract"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"subtract"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_add
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_ADDITION
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_addition_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"addition"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|D
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"add"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|do_swap
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ctx
operator|.
name|op
operator|=
name|GIMP_COMPOSITE_SWAP
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_dispatch
argument_list|(
operator|&
name|ctx
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|new_elapsed
argument_list|)
expr_stmt|;
name|gettimeofday
argument_list|(
operator|&
name|t0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|iterations
condition|;
name|i
operator|++
control|)
block|{
name|gimp_composite_swap_any_any_any_generic
argument_list|(
operator|&
name|ctx_generic
argument_list|)
expr_stmt|;
block|}
name|gettimeofday
argument_list|(
operator|&
name|t1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|timersub
argument_list|(
operator|&
name|t1
argument_list|,
operator|&
name|t0
argument_list|,
operator|&
name|old_elapsed
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"swap"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|comp_rgba8
argument_list|(
literal|"swap"
argument_list|,
name|ctx
operator|.
name|A
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx_generic
operator|.
name|B
argument_list|,
name|ctx
operator|.
name|B
argument_list|,
name|ctx
operator|.
name|n_pixels
argument_list|)
expr_stmt|;
name|timer_report
argument_list|(
literal|"swap"
argument_list|,
name|old_elapsed
argument_list|,
name|new_elapsed
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return
name|EXIT_SUCCESS
return|;
block|}
end_function

end_unit

