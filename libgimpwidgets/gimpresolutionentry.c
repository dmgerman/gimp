begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* LIBGIMP - The GIMP Library  * Copyright (C) 1995-2005 Peter Mattis and Spencer Kimball  *  * gimpresolutionentry.c  * Copyright (C) 1999-2005 Sven Neumann<sven@gimp.org>  *                         Michael Natterer<mitch@gimp.org>  *                         Nathan Summers<rock@gimp.org>  *  * This library is free software; you can redistribute it and/or  * modify it under the terms of the GNU Lesser General Public  * License as published by the Free Software Foundation; either  * version 2 of the License, or (at your option) any later version.  *  * This library is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU  * Library General Public License for more details.  *  * You should have received a copy of the GNU Lesser General Public  * License along with this library; if not, write to the  * Free Software Foundation, Inc., 59 Temple Place - Suite 330,  * Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<gtk/gtk.h>
end_include

begin_include
include|#
directive|include
file|"libgimpbase/gimpbase.h"
end_include

begin_include
include|#
directive|include
file|"gimpwidgets.h"
end_include

begin_include
include|#
directive|include
file|"gimpresolutionentry.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/libgimp-intl.h"
end_include

begin_define
DECL|macro|SIZE_MAX_VALUE
define|#
directive|define
name|SIZE_MAX_VALUE
value|500000.0
end_define

begin_define
DECL|macro|GIMP_RESOLUTION_ENTRY_DIGITS (unit)
define|#
directive|define
name|GIMP_RESOLUTION_ENTRY_DIGITS
parameter_list|(
name|unit
parameter_list|)
define|\
value|(MIN (gimp_unit_get_digits (unit), 5) + 1)
end_define

begin_enum
enum|enum
DECL|enum|__anon2a047ed00103
block|{
DECL|enumerator|WIDTH_CHANGED
name|WIDTH_CHANGED
block|,
DECL|enumerator|HEIGHT_CHANGED
name|HEIGHT_CHANGED
block|,
DECL|enumerator|X_CHANGED
name|X_CHANGED
block|,
DECL|enumerator|Y_CHANGED
name|Y_CHANGED
block|,
DECL|enumerator|UNIT_CHANGED
name|UNIT_CHANGED
block|,
DECL|enumerator|LAST_SIGNAL
name|LAST_SIGNAL
block|}
enum|;
end_enum

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_class_init
parameter_list|(
name|GimpResolutionEntryClass
modifier|*
name|class
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_init
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_finalize
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_update_value
parameter_list|(
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|gdouble
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_value_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_update_unit
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|GimpUnit
name|unit
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_unit_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_field_init
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|GimpResolutionEntryField
modifier|*
name|corresponding
parameter_list|,
name|guint
name|changed_signal
parameter_list|,
name|gdouble
name|initial_val
parameter_list|,
name|GimpUnit
name|initial_unit
parameter_list|,
name|gboolean
name|size
parameter_list|,
name|gint
name|spinbutton_width
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_field_set_boundaries
parameter_list|(
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_field_set_value
parameter_list|(
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|gdouble
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_resolution_entry_format_label
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|GtkWidget
modifier|*
name|label
parameter_list|,
name|gdouble
name|size
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
DECL|variable|gimp_resolution_entry_signals
specifier|static
name|guint
name|gimp_resolution_entry_signals
index|[
name|LAST_SIGNAL
index|]
init|=
block|{
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|parent_class
specifier|static
name|GtkTableClass
modifier|*
name|parent_class
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_function
name|GType
DECL|function|gimp_resolution_entry_get_type (void)
name|gimp_resolution_entry_get_type
parameter_list|(
name|void
parameter_list|)
block|{
specifier|static
name|GType
name|gre_type
init|=
literal|0
decl_stmt|;
if|if
condition|(
operator|!
name|gre_type
condition|)
block|{
specifier|const
name|GTypeInfo
name|gre_info
init|=
block|{
sizeof|sizeof
argument_list|(
name|GimpResolutionEntryClass
argument_list|)
block|,
operator|(
name|GBaseInitFunc
operator|)
name|NULL
block|,
operator|(
name|GBaseFinalizeFunc
operator|)
name|NULL
block|,
operator|(
name|GClassInitFunc
operator|)
name|gimp_resolution_entry_class_init
block|,
name|NULL
block|,
comment|/* class_finalize */
name|NULL
block|,
comment|/* class_data     */
sizeof|sizeof
argument_list|(
name|GimpResolutionEntry
argument_list|)
block|,
literal|0
block|,
comment|/* n_preallocs    */
operator|(
name|GInstanceInitFunc
operator|)
name|gimp_resolution_entry_init
block|,       }
decl_stmt|;
name|gre_type
operator|=
name|g_type_register_static
argument_list|(
name|GTK_TYPE_TABLE
argument_list|,
literal|"GimpResolutionEntry"
argument_list|,
operator|&
name|gre_info
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
return|return
name|gre_type
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_class_init (GimpResolutionEntryClass * klass)
name|gimp_resolution_entry_class_init
parameter_list|(
name|GimpResolutionEntryClass
modifier|*
name|klass
parameter_list|)
block|{
name|GObjectClass
modifier|*
name|object_class
decl_stmt|;
name|object_class
operator|=
name|G_OBJECT_CLASS
argument_list|(
name|klass
argument_list|)
expr_stmt|;
name|parent_class
operator|=
name|g_type_class_peek_parent
argument_list|(
name|klass
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_signals
index|[
name|HEIGHT_CHANGED
index|]
operator|=
name|g_signal_new
argument_list|(
literal|"height-changed"
argument_list|,
name|G_TYPE_FROM_CLASS
argument_list|(
name|klass
argument_list|)
argument_list|,
name|G_SIGNAL_RUN_FIRST
argument_list|,
name|G_STRUCT_OFFSET
argument_list|(
name|GimpResolutionEntryClass
argument_list|,
name|value_changed
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|g_cclosure_marshal_VOID__VOID
argument_list|,
name|G_TYPE_NONE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_signals
index|[
name|WIDTH_CHANGED
index|]
operator|=
name|g_signal_new
argument_list|(
literal|"width-changed"
argument_list|,
name|G_TYPE_FROM_CLASS
argument_list|(
name|klass
argument_list|)
argument_list|,
name|G_SIGNAL_RUN_FIRST
argument_list|,
name|G_STRUCT_OFFSET
argument_list|(
name|GimpResolutionEntryClass
argument_list|,
name|value_changed
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|g_cclosure_marshal_VOID__VOID
argument_list|,
name|G_TYPE_NONE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_signals
index|[
name|X_CHANGED
index|]
operator|=
name|g_signal_new
argument_list|(
literal|"x-changed"
argument_list|,
name|G_TYPE_FROM_CLASS
argument_list|(
name|klass
argument_list|)
argument_list|,
name|G_SIGNAL_RUN_FIRST
argument_list|,
name|G_STRUCT_OFFSET
argument_list|(
name|GimpResolutionEntryClass
argument_list|,
name|value_changed
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|g_cclosure_marshal_VOID__VOID
argument_list|,
name|G_TYPE_NONE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_signals
index|[
name|Y_CHANGED
index|]
operator|=
name|g_signal_new
argument_list|(
literal|"y-changed"
argument_list|,
name|G_TYPE_FROM_CLASS
argument_list|(
name|klass
argument_list|)
argument_list|,
name|G_SIGNAL_RUN_FIRST
argument_list|,
name|G_STRUCT_OFFSET
argument_list|(
name|GimpResolutionEntryClass
argument_list|,
name|refval_changed
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|g_cclosure_marshal_VOID__VOID
argument_list|,
name|G_TYPE_NONE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_signals
index|[
name|UNIT_CHANGED
index|]
operator|=
name|g_signal_new
argument_list|(
literal|"unit-changed"
argument_list|,
name|G_TYPE_FROM_CLASS
argument_list|(
name|klass
argument_list|)
argument_list|,
name|G_SIGNAL_RUN_FIRST
argument_list|,
name|G_STRUCT_OFFSET
argument_list|(
name|GimpResolutionEntryClass
argument_list|,
name|unit_changed
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|g_cclosure_marshal_VOID__VOID
argument_list|,
name|G_TYPE_NONE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|object_class
operator|->
name|finalize
operator|=
name|gimp_resolution_entry_finalize
expr_stmt|;
name|klass
operator|->
name|value_changed
operator|=
name|NULL
expr_stmt|;
name|klass
operator|->
name|refval_changed
operator|=
name|NULL
expr_stmt|;
name|klass
operator|->
name|unit_changed
operator|=
name|NULL
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_init (GimpResolutionEntry * gre)
name|gimp_resolution_entry_init
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|gre
operator|->
name|unitmenu
operator|=
name|NULL
expr_stmt|;
name|gre
operator|->
name|unit
operator|=
name|GIMP_UNIT_INCH
expr_stmt|;
name|gre
operator|->
name|independent
operator|=
name|FALSE
expr_stmt|;
name|gtk_table_set_col_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_table_set_row_spacings
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_finalize (GObject * object)
name|gimp_resolution_entry_finalize
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|)
block|{
name|GimpResolutionEntry
modifier|*
name|gre
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|object
argument_list|)
argument_list|)
expr_stmt|;
name|gre
operator|=
name|GIMP_RESOLUTION_ENTRY
argument_list|(
name|object
argument_list|)
expr_stmt|;
name|G_OBJECT_CLASS
argument_list|(
name|parent_class
argument_list|)
operator|->
name|finalize
argument_list|(
name|object
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_field_init (GimpResolutionEntry * gre,GimpResolutionEntryField * gref,GimpResolutionEntryField * corresponding,guint changed_signal,gdouble initial_val,GimpUnit initial_unit,gboolean size,gint spinbutton_width)
name|gimp_resolution_entry_field_init
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|GimpResolutionEntryField
modifier|*
name|corresponding
parameter_list|,
name|guint
name|changed_signal
parameter_list|,
name|gdouble
name|initial_val
parameter_list|,
name|GimpUnit
name|initial_unit
parameter_list|,
name|gboolean
name|size
parameter_list|,
name|gint
name|spinbutton_width
parameter_list|)
block|{
name|gint
name|digits
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gref
operator|->
name|gre
operator|=
name|gre
expr_stmt|;
name|gref
operator|->
name|corresponding
operator|=
name|corresponding
expr_stmt|;
name|gref
operator|->
name|changed_signal
operator|=
name|gimp_resolution_entry_signals
index|[
name|changed_signal
index|]
expr_stmt|;
if|if
condition|(
name|size
condition|)
block|{
name|gref
operator|->
name|value
operator|=
name|initial_val
operator|/
name|gimp_unit_get_factor
argument_list|(
name|initial_unit
argument_list|)
operator|*
name|corresponding
operator|->
name|value
operator|*
name|gimp_unit_get_factor
argument_list|(
name|gre
operator|->
name|unit
argument_list|)
expr_stmt|;
name|gref
operator|->
name|phy_size
operator|=
name|initial_val
operator|/
name|gimp_unit_get_factor
argument_list|(
name|initial_unit
argument_list|)
expr_stmt|;
block|}
else|else
name|gref
operator|->
name|value
operator|=
name|initial_val
expr_stmt|;
name|gref
operator|->
name|min_value
operator|=
name|GIMP_MIN_RESOLUTION
expr_stmt|;
name|gref
operator|->
name|max_value
operator|=
name|GIMP_MAX_RESOLUTION
expr_stmt|;
name|gref
operator|->
name|adjustment
operator|=
name|NULL
expr_stmt|;
name|gref
operator|->
name|stop_recursion
operator|=
literal|0
expr_stmt|;
name|gref
operator|->
name|size
operator|=
name|size
expr_stmt|;
if|if
condition|(
name|size
condition|)
block|{
name|gref
operator|->
name|label
operator|=
name|g_object_new
argument_list|(
name|GTK_TYPE_LABEL
argument_list|,
literal|"xalign"
argument_list|,
literal|0.0
argument_list|,
literal|"yalign"
argument_list|,
literal|0.5
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_label_set_attributes
argument_list|(
name|GTK_LABEL
argument_list|(
name|gref
operator|->
name|label
argument_list|)
argument_list|,
name|PANGO_ATTR_STYLE
argument_list|,
name|PANGO_STYLE_ITALIC
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_format_label
argument_list|(
name|gre
argument_list|,
name|gref
operator|->
name|label
argument_list|,
name|gref
operator|->
name|phy_size
argument_list|)
expr_stmt|;
block|}
name|digits
operator|=
name|size
condition|?
literal|0
else|:
name|GIMP_RESOLUTION_ENTRY_DIGITS
argument_list|(
name|initial_unit
argument_list|)
expr_stmt|;
name|gref
operator|->
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|gref
operator|->
name|adjustment
argument_list|,
name|gref
operator|->
name|value
argument_list|,
name|gref
operator|->
name|min_value
argument_list|,
name|gref
operator|->
name|max_value
argument_list|,
literal|1.0
argument_list|,
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
name|digits
argument_list|)
expr_stmt|;
if|if
condition|(
name|spinbutton_width
operator|>
literal|0
condition|)
block|{
if|if
condition|(
name|spinbutton_width
operator|<
literal|17
condition|)
name|gtk_entry_set_width_chars
argument_list|(
name|GTK_ENTRY
argument_list|(
name|gref
operator|->
name|spinbutton
argument_list|)
argument_list|,
name|spinbutton_width
argument_list|)
expr_stmt|;
else|else
name|gtk_widget_set_size_request
argument_list|(
name|gref
operator|->
name|spinbutton
argument_list|,
name|spinbutton_width
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_new:  * @width_label:       Optional label for the width control.  * @width:             Width of the item, specified in terms of @size_unit.  * @height_label:      Optional label for the height control.  * @height:            Height of the item, specified in terms of @size_unit.  * @size_unit:         Unit used to specify the width and height.  * @x_label:           Optional label for the X resolution entry.  * @initial_x:         The initial X resolution.  * @y_label:           Optional label for the Y resolution entry.  Ignored if  *                     @independent is %FALSE.  * @initial_y:         The initial Y resolution.  Ignored if @independent is  *                     %FALSE.  * @initial_unit:      The initial unit.  * @independent:       Whether the X and Y resolutions can be different values.  * @spinbutton_width:  The minimal horizontal size of the #GtkSpinButton s.  *  * Creates a new #GimpResolutionEntry widget.  *  * The #GimpResolutionEntry is derived from #GtkTable and will have  * an empty border of one cell width on each side plus an empty column left  * of the #GimpUnitMenu to allow the caller to add labels or other widgets.  *  * A #GimpChainButton is displayed if independent is set to %TRUE.  *  * Returns: A pointer to the new #GimpResolutionEntry widget.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_resolution_entry_new (const gchar * width_label,gdouble width,const gchar * height_label,gdouble height,GimpUnit size_unit,const gchar * x_label,gdouble initial_x,const gchar * y_label,gdouble initial_y,GimpUnit initial_unit,gboolean independent,gint spinbutton_width)
name|gimp_resolution_entry_new
parameter_list|(
specifier|const
name|gchar
modifier|*
name|width_label
parameter_list|,
name|gdouble
name|width
parameter_list|,
specifier|const
name|gchar
modifier|*
name|height_label
parameter_list|,
name|gdouble
name|height
parameter_list|,
name|GimpUnit
name|size_unit
parameter_list|,
specifier|const
name|gchar
modifier|*
name|x_label
parameter_list|,
name|gdouble
name|initial_x
parameter_list|,
specifier|const
name|gchar
modifier|*
name|y_label
parameter_list|,
name|gdouble
name|initial_y
parameter_list|,
name|GimpUnit
name|initial_unit
parameter_list|,
name|gboolean
name|independent
parameter_list|,
name|gint
name|spinbutton_width
parameter_list|)
block|{
name|GimpResolutionEntry
modifier|*
name|gre
decl_stmt|;
name|gre
operator|=
name|g_object_new
argument_list|(
name|GIMP_TYPE_RESOLUTION_ENTRY
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gre
operator|->
name|unit
operator|=
name|initial_unit
expr_stmt|;
name|gre
operator|->
name|independent
operator|=
name|independent
expr_stmt|;
name|gtk_table_resize
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|independent
condition|?
literal|5
else|:
literal|4
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_init
argument_list|(
name|gre
argument_list|,
operator|&
name|gre
operator|->
name|x
argument_list|,
operator|&
name|gre
operator|->
name|width
argument_list|,
name|X_CHANGED
argument_list|,
name|initial_x
argument_list|,
name|initial_unit
argument_list|,
name|FALSE
argument_list|,
name|spinbutton_width
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|x
operator|.
name|spinbutton
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|gre
operator|->
name|x
operator|.
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_resolution_entry_value_callback
argument_list|)
argument_list|,
operator|&
name|gre
operator|->
name|x
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|x
operator|.
name|spinbutton
argument_list|)
expr_stmt|;
if|if
condition|(
name|independent
condition|)
block|{
name|gre
operator|->
name|chainbutton
operator|=
name|gimp_chain_button_new
argument_list|(
name|GIMP_CHAIN_RIGHT
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|chainbutton
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|,
literal|5
argument_list|,
name|GTK_SHRINK
argument_list|,
name|GTK_SHRINK
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|chainbutton
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_init
argument_list|(
name|gre
argument_list|,
operator|&
name|gre
operator|->
name|y
argument_list|,
operator|&
name|gre
operator|->
name|height
argument_list|,
name|Y_CHANGED
argument_list|,
name|initial_y
argument_list|,
name|initial_unit
argument_list|,
name|FALSE
argument_list|,
name|spinbutton_width
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|y
operator|.
name|spinbutton
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|4
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|gre
operator|->
name|y
operator|.
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_resolution_entry_value_callback
argument_list|)
argument_list|,
operator|&
name|gre
operator|->
name|y
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|y
operator|.
name|spinbutton
argument_list|)
expr_stmt|;
block|}
name|gre
operator|->
name|unitmenu
operator|=
name|gimp_unit_menu_new
argument_list|(
name|_
argument_list|(
literal|"pixels/%s"
argument_list|)
argument_list|,
name|initial_unit
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|unitmenu
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|,
name|independent
condition|?
literal|4
else|:
literal|3
argument_list|,
name|independent
condition|?
literal|5
else|:
literal|4
argument_list|,
name|GTK_SHRINK
operator||
name|GTK_FILL
argument_list|,
name|GTK_SHRINK
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|gre
operator|->
name|unitmenu
argument_list|,
literal|"unit-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_resolution_entry_unit_callback
argument_list|)
argument_list|,
name|gre
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|unitmenu
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_init
argument_list|(
name|gre
argument_list|,
operator|&
name|gre
operator|->
name|width
argument_list|,
operator|&
name|gre
operator|->
name|x
argument_list|,
name|WIDTH_CHANGED
argument_list|,
name|width
argument_list|,
name|size_unit
argument_list|,
name|TRUE
argument_list|,
name|spinbutton_width
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|width
operator|.
name|spinbutton
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|width
operator|.
name|label
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|gre
operator|->
name|width
operator|.
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_resolution_entry_value_callback
argument_list|)
argument_list|,
operator|&
name|gre
operator|->
name|width
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|width
operator|.
name|spinbutton
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|width
operator|.
name|label
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_init
argument_list|(
name|gre
argument_list|,
operator|&
name|gre
operator|->
name|height
argument_list|,
name|independent
condition|?
operator|&
name|gre
operator|->
name|y
else|:
operator|&
name|gre
operator|->
name|x
argument_list|,
name|HEIGHT_CHANGED
argument_list|,
name|height
argument_list|,
name|size_unit
argument_list|,
name|TRUE
argument_list|,
name|spinbutton_width
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|height
operator|.
name|spinbutton
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|gre
operator|->
name|height
operator|.
name|label
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|gre
operator|->
name|height
operator|.
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_resolution_entry_value_callback
argument_list|)
argument_list|,
operator|&
name|gre
operator|->
name|height
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|height
operator|.
name|spinbutton
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|height
operator|.
name|label
argument_list|)
expr_stmt|;
if|if
condition|(
name|width_label
condition|)
name|gimp_resolution_entry_attach_label
argument_list|(
name|gre
argument_list|,
name|width_label
argument_list|,
literal|1
argument_list|,
literal|0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
if|if
condition|(
name|height_label
condition|)
name|gimp_resolution_entry_attach_label
argument_list|(
name|gre
argument_list|,
name|height_label
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
if|if
condition|(
name|x_label
condition|)
name|gimp_resolution_entry_attach_label
argument_list|(
name|gre
argument_list|,
name|x_label
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
if|if
condition|(
name|independent
operator|&&
name|y_label
condition|)
name|gimp_resolution_entry_attach_label
argument_list|(
name|gre
argument_list|,
name|y_label
argument_list|,
literal|4
argument_list|,
literal|0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
return|return
name|GTK_WIDGET
argument_list|(
name|gre
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_attach_label:  * @gre:       The #GimpResolutionEntry you want to add a label to.  * @text:      The text of the label.  * @row:       The row where the label will be attached.  * @column:    The column where the label will be attached.  * @alignment: The horizontal alignment of the label.  *  * Attaches a #GtkLabel to the #GimpResolutionEntry (which is a #GtkTable).  *  * Returns: A pointer to the new #GtkLabel widget.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_resolution_entry_attach_label (GimpResolutionEntry * gre,const gchar * text,gint row,gint column,gfloat alignment)
name|gimp_resolution_entry_attach_label
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
specifier|const
name|gchar
modifier|*
name|text
parameter_list|,
name|gint
name|row
parameter_list|,
name|gint
name|column
parameter_list|,
name|gfloat
name|alignment
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|text
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new_with_mnemonic
argument_list|(
name|text
argument_list|)
expr_stmt|;
if|if
condition|(
name|column
operator|==
literal|0
condition|)
block|{
name|GtkTableChild
modifier|*
name|child
decl_stmt|;
name|GList
modifier|*
name|list
decl_stmt|;
for|for
control|(
name|list
operator|=
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
operator|->
name|children
init|;
name|list
condition|;
name|list
operator|=
name|g_list_next
argument_list|(
name|list
argument_list|)
control|)
block|{
name|child
operator|=
name|list
operator|->
name|data
expr_stmt|;
if|if
condition|(
name|child
operator|->
name|left_attach
operator|==
literal|1
operator|&&
name|child
operator|->
name|top_attach
operator|==
name|row
condition|)
block|{
name|gtk_label_set_mnemonic_widget
argument_list|(
name|GTK_LABEL
argument_list|(
name|label
argument_list|)
argument_list|,
name|child
operator|->
name|widget
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
name|alignment
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_table_attach
argument_list|(
name|GTK_TABLE
argument_list|(
name|gre
argument_list|)
argument_list|,
name|label
argument_list|,
name|column
argument_list|,
name|column
operator|+
literal|1
argument_list|,
name|row
argument_list|,
name|row
operator|+
literal|1
argument_list|,
name|GTK_SHRINK
operator||
name|GTK_FILL
argument_list|,
name|GTK_SHRINK
operator||
name|GTK_FILL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
return|return
name|label
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_width_boundaries:  * @gre:   The #GimpResolutionEntry you want to set value boundaries for.  * @lower: The new lower boundary of the value of the field in pixels.  * @upper: The new upper boundary of the value of the field in pixels.  *  * Limits the range of possible values which can be entered in the width field  * of the #GimpResolutionEntry.  *  * The current value of the field will be clamped to fit in its  * new boundaries.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_width_boundaries (GimpResolutionEntry * gre,gdouble lower,gdouble upper)
name|gimp_resolution_entry_set_width_boundaries
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_boundaries
argument_list|(
operator|&
name|gre
operator|->
name|width
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_height_boundaries:  * @gre:   The #GimpResolutionEntry you want to set value boundaries for.  * @lower: The new lower boundary of the value of the field in pixels.  * @upper: The new upper boundary of the value of the field in pixels.  *  * Limits the range of possible values which can be entered in the height field  * of the #GimpResolutionEntry.  *  * The current value of the field will be clamped to fit in its  * new boundaries.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_height_boundaries (GimpResolutionEntry * gre,gdouble lower,gdouble upper)
name|gimp_resolution_entry_set_height_boundaries
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_boundaries
argument_list|(
operator|&
name|gre
operator|->
name|height
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_x_boundaries:  * @gre:   The #GimpResolutionEntry you want to set value boundaries for.  * @lower: The new lower boundary of the value of the field, in the current unit.  * @upper: The new upper boundary of the value of the field, in the current unit.  *  * Limits the range of possible values which can be entered in the x field  * of the #GimpResolutionEntry.  *  * The current value of the field will be clamped to fit in its  * new boundaries.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_x_boundaries (GimpResolutionEntry * gre,gdouble lower,gdouble upper)
name|gimp_resolution_entry_set_x_boundaries
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_boundaries
argument_list|(
operator|&
name|gre
operator|->
name|x
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_y_boundaries:  * @gre:   The #GimpResolutionEntry you want to set value boundaries for.  * @lower: The new lower boundary of the value of the field, in the current unit.  * @upper: The new upper boundary of the value of the field, in the current unit.  *  * Limits the range of possible values which can be entered in the y field  * of the #GimpResolutionEntry.  *  * The current value of the field will be clamped to fit in its  * new boundaries.  *  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_y_boundaries (GimpResolutionEntry * gre,gdouble lower,gdouble upper)
name|gimp_resolution_entry_set_y_boundaries
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|gre
operator|->
name|independent
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_boundaries
argument_list|(
operator|&
name|gre
operator|->
name|y
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_field_set_boundaries (GimpResolutionEntryField * gref,gdouble lower,gdouble upper)
name|gimp_resolution_entry_field_set_boundaries
parameter_list|(
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|lower
operator|<=
name|upper
argument_list|)
expr_stmt|;
name|gref
operator|->
name|min_value
operator|=
name|lower
expr_stmt|;
name|gref
operator|->
name|max_value
operator|=
name|upper
expr_stmt|;
name|GTK_ADJUSTMENT
argument_list|(
name|gref
operator|->
name|adjustment
argument_list|)
operator|->
name|lower
operator|=
name|gref
operator|->
name|min_value
expr_stmt|;
name|GTK_ADJUSTMENT
argument_list|(
name|gref
operator|->
name|adjustment
argument_list|)
operator|->
name|upper
operator|=
name|gref
operator|->
name|max_value
expr_stmt|;
if|if
condition|(
name|gref
operator|->
name|value
operator|>
name|upper
operator|||
name|gref
operator|->
name|value
operator|<
name|lower
condition|)
name|gimp_resolution_entry_field_set_value
argument_list|(
name|gref
argument_list|,
name|gref
operator|->
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_width;  * @gre:   The #GimpResolutionEntry you want to know the width of.  *  * Returns the width of the #GimpResolutionEntry in pixels.  *  * SeeAlso: gimp_resolution_get_x  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|gdouble
DECL|function|gimp_resolution_entry_get_width (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_width
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|width
operator|.
name|value
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_height;  * @gre:   The #GimpResolutionEntry you want to know the height of.  *  * Returns the height of the #GimpResolutionEntry in pixels.  *  * SeeAlso: gimp_resolution_get_y  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|gdouble
DECL|function|gimp_resolution_entry_get_height (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_height
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|height
operator|.
name|value
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_x;  * @gre:   The #GimpResolutionEntry you want to know the resolution of.  *  * Returns the X resolution of the #GimpResolutionEntry in the current unit.  *  * SeeAlso: gimp_resolution_get_x_in_dpi  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|gdouble
DECL|function|gimp_resolution_entry_get_x (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_x
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|x
operator|.
name|value
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_x_in_dpi;  * @gre:   The #GimpResolutionEntry you want to know the resolution of.  *  * Returns the X resolution of the #GimpResolutionEntry in pixels per inch.  *  * SeeAlso: gimp_resolution_get_x  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|gdouble
DECL|function|gimp_resolution_entry_get_x_in_dpi (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_x_in_dpi
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|x
operator|.
name|value
operator|/
name|gimp_unit_get_factor
argument_list|(
name|gre
operator|->
name|unit
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_y;  * @gre:   The #GimpResolutionEntry you want to know the resolution of.  *  * Returns the Y resolution of the #GimpResolutionEntry in the current unit.  *  * SeeAlso: gimp_resolution_get_y_in_dpi  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|gdouble
DECL|function|gimp_resolution_entry_get_y (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_y
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|y
operator|.
name|value
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_y_in_dpi;  * @gre:   The #GimpResolutionEntry you want to know the resolution of.  *  * Returns the Y resolution of the #GimpResolutionEntry in pixels per inch.  *  * SeeAlso: gimp_resolution_get_y  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|gdouble
DECL|function|gimp_resolution_entry_get_y_in_dpi (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_y_in_dpi
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|y
operator|.
name|value
operator|/
name|gimp_unit_get_factor
argument_list|(
name|gre
operator|->
name|unit
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_update_value (GimpResolutionEntryField * gref,gdouble value)
name|gimp_resolution_entry_update_value
parameter_list|(
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|gdouble
name|value
parameter_list|)
block|{
if|if
condition|(
name|gref
operator|->
name|stop_recursion
operator|>
literal|0
condition|)
return|return;
name|gref
operator|->
name|value
operator|=
name|value
expr_stmt|;
name|gref
operator|->
name|stop_recursion
operator|++
expr_stmt|;
if|if
condition|(
name|gref
operator|->
name|gre
operator|->
name|independent
operator|&&
operator|!
name|gref
operator|->
name|size
operator|&&
name|gimp_chain_button_get_active
argument_list|(
name|GIMP_CHAIN_BUTTON
argument_list|(
name|gref
operator|->
name|gre
operator|->
name|chainbutton
argument_list|)
argument_list|)
condition|)
block|{
name|gimp_resolution_entry_update_value
argument_list|(
operator|&
name|gref
operator|->
name|gre
operator|->
name|x
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_update_value
argument_list|(
operator|&
name|gref
operator|->
name|gre
operator|->
name|y
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|gref
operator|->
name|size
condition|)
name|gimp_resolution_entry_update_value
argument_list|(
name|gref
operator|->
name|corresponding
argument_list|,
name|gref
operator|->
name|value
operator|/
name|gref
operator|->
name|phy_size
operator|/
name|gimp_unit_get_factor
argument_list|(
name|gref
operator|->
name|gre
operator|->
name|unit
argument_list|)
argument_list|)
expr_stmt|;
else|else
block|{
name|gdouble
name|factor
init|=
name|gimp_unit_get_factor
argument_list|(
name|gref
operator|->
name|gre
operator|->
name|unit
argument_list|)
decl_stmt|;
if|if
condition|(
name|gref
operator|->
name|gre
operator|->
name|independent
condition|)
name|gimp_resolution_entry_update_value
argument_list|(
name|gref
operator|->
name|corresponding
argument_list|,
name|gref
operator|->
name|value
operator|*
name|gref
operator|->
name|corresponding
operator|->
name|phy_size
operator|*
name|factor
argument_list|)
expr_stmt|;
else|else
block|{
name|gimp_resolution_entry_update_value
argument_list|(
operator|&
name|gref
operator|->
name|gre
operator|->
name|width
argument_list|,
name|gref
operator|->
name|value
operator|*
name|gref
operator|->
name|gre
operator|->
name|width
operator|.
name|phy_size
operator|*
name|factor
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_update_value
argument_list|(
operator|&
name|gref
operator|->
name|gre
operator|->
name|height
argument_list|,
name|gref
operator|->
name|value
operator|*
name|gref
operator|->
name|gre
operator|->
name|height
operator|.
name|phy_size
operator|*
name|factor
argument_list|)
expr_stmt|;
block|}
block|}
name|gtk_adjustment_set_value
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|gref
operator|->
name|adjustment
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|gref
operator|->
name|stop_recursion
operator|--
expr_stmt|;
name|g_signal_emit
argument_list|(
name|gref
operator|->
name|gre
argument_list|,
name|gref
operator|->
name|changed_signal
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_width:  * @gre:   The #GimpResolutionEntry you want to set a value for.  * @value: The new value for the width entry.  *  * Sets the value for the width control of the #GimpResolutionEntry.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_width (GimpResolutionEntry * gre,gdouble value)
name|gimp_resolution_entry_set_width
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|value
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_value
argument_list|(
operator|&
name|gre
operator|->
name|width
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_height:  * @gre:   The #GimpResolutionEntry you want to set a value for.  * @value: The new value for the height entry.  *  * Sets the value for the height control of the #GimpResolutionEntry.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_height (GimpResolutionEntry * gre,gdouble value)
name|gimp_resolution_entry_set_height
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|value
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_value
argument_list|(
operator|&
name|gre
operator|->
name|height
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_x:  * @gre:   The #GimpResolutionEntry you want to set a value for.  * @value: The new value for the X resolution in the current unit.  *  * Sets the value for the x resolution of the #GimpResolutionEntry.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_x (GimpResolutionEntry * gre,gdouble value)
name|gimp_resolution_entry_set_x
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|value
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_value
argument_list|(
operator|&
name|gre
operator|->
name|x
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_y:  * @gre:   The #GimpResolutionEntry you want to set a value for.  * @value: The new value for the Y resolution in the current unit.  *  * Sets the value for the y resolution of the #GimpResolutionEntry.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_y (GimpResolutionEntry * gre,gdouble value)
name|gimp_resolution_entry_set_y
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gdouble
name|value
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_field_set_value
argument_list|(
operator|&
name|gre
operator|->
name|y
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_field_set_value (GimpResolutionEntryField * gref,gdouble value)
name|gimp_resolution_entry_field_set_value
parameter_list|(
name|GimpResolutionEntryField
modifier|*
name|gref
parameter_list|,
name|gdouble
name|value
parameter_list|)
block|{
name|value
operator|=
name|CLAMP
argument_list|(
name|value
argument_list|,
name|gref
operator|->
name|min_value
argument_list|,
name|gref
operator|->
name|max_value
argument_list|)
expr_stmt|;
name|gtk_adjustment_set_value
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|gref
operator|->
name|adjustment
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_update_value
argument_list|(
name|gref
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_value_callback (GtkWidget * widget,gpointer data)
name|gimp_resolution_entry_value_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GimpResolutionEntryField
modifier|*
name|gref
decl_stmt|;
name|gdouble
name|new_value
decl_stmt|;
name|gref
operator|=
operator|(
name|GimpResolutionEntryField
operator|*
operator|)
name|data
expr_stmt|;
name|new_value
operator|=
name|GTK_ADJUSTMENT
argument_list|(
name|widget
argument_list|)
operator|->
name|value
expr_stmt|;
if|if
condition|(
name|gref
operator|->
name|value
operator|!=
name|new_value
condition|)
name|gimp_resolution_entry_update_value
argument_list|(
name|gref
argument_list|,
name|new_value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_unit:  * @gre: The #GimpResolutionEntry you want to know the unit of.  *  * Returns the #GimpUnit the user has selected in the #GimpResolutionEntry's  * #GimpUnitMenu.  *  * Returns: The #GimpResolutionEntry's unit.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|GimpUnit
DECL|function|gimp_resolution_entry_get_unit (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_unit
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
name|GIMP_UNIT_INCH
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|unit
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_update_unit (GimpResolutionEntry * gre,GimpUnit unit)
name|gimp_resolution_entry_update_unit
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|GimpUnit
name|unit
parameter_list|)
block|{
name|GimpUnit
name|old_unit
decl_stmt|;
name|gint
name|digits
decl_stmt|;
name|gdouble
name|factor
decl_stmt|;
name|old_unit
operator|=
name|gre
operator|->
name|unit
expr_stmt|;
name|gre
operator|->
name|unit
operator|=
name|unit
expr_stmt|;
name|digits
operator|=
operator|(
name|gimp_unit_get_digits
argument_list|(
name|GIMP_UNIT_INCH
argument_list|)
operator|-
name|gimp_unit_get_digits
argument_list|(
name|unit
argument_list|)
operator|)
expr_stmt|;
name|gtk_spin_button_set_digits
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|gre
operator|->
name|x
operator|.
name|spinbutton
argument_list|)
argument_list|,
name|MAX
argument_list|(
literal|3
operator|+
name|digits
argument_list|,
literal|3
argument_list|)
argument_list|)
expr_stmt|;
name|factor
operator|=
name|gimp_unit_get_factor
argument_list|(
name|old_unit
argument_list|)
operator|/
name|gimp_unit_get_factor
argument_list|(
name|unit
argument_list|)
expr_stmt|;
name|gre
operator|->
name|x
operator|.
name|min_value
operator|*=
name|factor
expr_stmt|;
name|gre
operator|->
name|x
operator|.
name|max_value
operator|*=
name|factor
expr_stmt|;
name|gre
operator|->
name|x
operator|.
name|value
operator|*=
name|factor
expr_stmt|;
name|gtk_adjustment_set_value
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|gre
operator|->
name|x
operator|.
name|adjustment
argument_list|)
argument_list|,
name|gre
operator|->
name|x
operator|.
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|gre
operator|->
name|independent
condition|)
block|{
name|gtk_spin_button_set_digits
argument_list|(
name|GTK_SPIN_BUTTON
argument_list|(
name|gre
operator|->
name|y
operator|.
name|spinbutton
argument_list|)
argument_list|,
name|MAX
argument_list|(
literal|3
operator|+
name|digits
argument_list|,
literal|3
argument_list|)
argument_list|)
expr_stmt|;
name|gre
operator|->
name|y
operator|.
name|min_value
operator|*=
name|factor
expr_stmt|;
name|gre
operator|->
name|y
operator|.
name|max_value
operator|*=
name|factor
expr_stmt|;
name|gre
operator|->
name|y
operator|.
name|value
operator|*=
name|factor
expr_stmt|;
name|gtk_adjustment_set_value
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|gre
operator|->
name|y
operator|.
name|adjustment
argument_list|)
argument_list|,
name|gre
operator|->
name|y
operator|.
name|value
argument_list|)
expr_stmt|;
block|}
name|gimp_resolution_entry_format_label
argument_list|(
name|gre
argument_list|,
name|gre
operator|->
name|width
operator|.
name|label
argument_list|,
name|gre
operator|->
name|width
operator|.
name|phy_size
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_format_label
argument_list|(
name|gre
argument_list|,
name|gre
operator|->
name|height
operator|.
name|label
argument_list|,
name|gre
operator|->
name|height
operator|.
name|phy_size
argument_list|)
expr_stmt|;
name|g_signal_emit
argument_list|(
name|gre
argument_list|,
name|gimp_resolution_entry_signals
index|[
name|UNIT_CHANGED
index|]
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_unit:  * @gre:  The #GimpResolutionEntry you want to change the unit for.  * @unit: The new unit.  *  * Sets the #GimpResolutionEntry's unit. The resolution will  * stay the same but the value in pixels per unit will change  * accordingly.  *  * Since: Gimp 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_unit (GimpResolutionEntry * gre,GimpUnit unit)
name|gimp_resolution_entry_set_unit
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|GimpUnit
name|unit
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|unit
operator|!=
name|GIMP_UNIT_PIXEL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|unit
operator|!=
name|GIMP_UNIT_PERCENT
argument_list|)
expr_stmt|;
name|gimp_unit_menu_set_unit
argument_list|(
name|GIMP_UNIT_MENU
argument_list|(
name|gre
operator|->
name|unitmenu
argument_list|)
argument_list|,
name|unit
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_update_unit
argument_list|(
name|gre
argument_list|,
name|unit
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_unit_callback (GtkWidget * widget,GimpResolutionEntry * gre)
name|gimp_resolution_entry_unit_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|GimpUnit
name|new_unit
decl_stmt|;
name|new_unit
operator|=
name|gimp_unit_menu_get_unit
argument_list|(
name|GIMP_UNIT_MENU
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|gre
operator|->
name|unit
operator|!=
name|new_unit
condition|)
name|gimp_resolution_entry_update_unit
argument_list|(
name|gre
argument_list|,
name|new_unit
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_show_unit_menu:  * @gre: a #GimpResolutionEntry  * @show: Boolean  *  * Controls whether a unit menu is shown in the size entry.  If  * @show is #TRUE, the menu is shown; otherwise it is hidden.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_show_unit_menu (GimpResolutionEntry * gre,gboolean show)
name|gimp_resolution_entry_show_unit_menu
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gboolean
name|show
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|show
condition|)
name|gtk_widget_show
argument_list|(
name|gre
operator|->
name|unitmenu
argument_list|)
expr_stmt|;
else|else
name|gtk_widget_hide
argument_list|(
name|gre
operator|->
name|unitmenu
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_pixel_digits:  * @gre: a #GimpResolutionEntry  * @digits: the number of digits to display for a pixel size  *  * Similar to gimp_unit_menu_set_pixel_digits(), this function allows  * you set up a #GimpResolutionEntry so that sub-pixel sizes can be entered.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_pixel_digits (GimpResolutionEntry * gre,gint digits)
name|gimp_resolution_entry_set_pixel_digits
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gint
name|digits
parameter_list|)
block|{
name|GimpUnitMenu
modifier|*
name|menu
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|menu
operator|=
name|GIMP_UNIT_MENU
argument_list|(
name|gre
operator|->
name|unitmenu
argument_list|)
expr_stmt|;
name|gimp_unit_menu_set_pixel_digits
argument_list|(
name|menu
argument_list|,
name|digits
argument_list|)
expr_stmt|;
name|gimp_resolution_entry_update_unit
argument_list|(
name|gre
argument_list|,
name|gimp_unit_menu_get_unit
argument_list|(
name|menu
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_grab_focus:  * @gre: The #GimpResolutionEntry you want to grab the keyboard focus.  *  * This function is rather ugly and just a workaround for the fact that  * it's impossible to implement gtk_widget_grab_focus() for a #GtkTable.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_grab_focus (GimpResolutionEntry * gre)
name|gimp_resolution_entry_grab_focus
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_widget_grab_focus
argument_list|(
name|gre
operator|->
name|x
operator|.
name|spinbutton
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_set_activates_default:  * @gre: A #GimpResolutionEntry  * @setting: %TRUE to activate window's default widget on Enter keypress  *  * Iterates over all entries in the #GimpResolutionEntry and calls  * gtk_entry_set_activates_default() on them.  *  * Since: GIMP 2.4  **/
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_set_activates_default (GimpResolutionEntry * gre,gboolean setting)
name|gimp_resolution_entry_set_activates_default
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gboolean
name|setting
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_entry_set_activates_default
argument_list|(
name|GTK_ENTRY
argument_list|(
name|gre
operator|->
name|width
operator|.
name|spinbutton
argument_list|)
argument_list|,
name|setting
argument_list|)
expr_stmt|;
name|gtk_entry_set_activates_default
argument_list|(
name|GTK_ENTRY
argument_list|(
name|gre
operator|->
name|height
operator|.
name|spinbutton
argument_list|)
argument_list|,
name|setting
argument_list|)
expr_stmt|;
name|gtk_entry_set_activates_default
argument_list|(
name|GTK_ENTRY
argument_list|(
name|gre
operator|->
name|x
operator|.
name|spinbutton
argument_list|)
argument_list|,
name|setting
argument_list|)
expr_stmt|;
if|if
condition|(
name|gre
operator|->
name|independent
condition|)
name|gtk_entry_set_activates_default
argument_list|(
name|GTK_ENTRY
argument_list|(
name|gre
operator|->
name|y
operator|.
name|spinbutton
argument_list|)
argument_list|,
name|setting
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_width_help_widget:  * @gre: a #GimpResolutionEntry  *  * You shouldn't fiddle with the internals of a #GimpResolutionEntry but  * if you want to set tooltips using gimp_help_set_help_data() you  * can use this function to get a pointer to the spinbuttons.  *  * Return value: a #GtkWidget pointer that you can attach a tooltip to.  **/
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_resolution_entry_get_width_help_widget (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_width_help_widget
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|width
operator|.
name|spinbutton
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_height_help_widget:  * @gre: a #GimpResolutionEntry  *  * You shouldn't fiddle with the internals of a #GimpResolutionEntry but  * if you want to set tooltips using gimp_help_set_help_data() you  * can use this function to get a pointer to the spinbuttons.  *  * Return value: a #GtkWidget pointer that you can attach a tooltip to.  **/
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_resolution_entry_get_height_help_widget (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_height_help_widget
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|height
operator|.
name|spinbutton
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_x_help_widget:  * @gre: a #GimpResolutionEntry  *  * You shouldn't fiddle with the internals of a #GimpResolutionEntry but  * if you want to set tooltips using gimp_help_set_help_data() you  * can use this function to get a pointer to the spinbuttons.  *  * Return value: a #GtkWidget pointer that you can attach a tooltip to.  **/
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_resolution_entry_get_x_help_widget (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_x_help_widget
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|x
operator|.
name|spinbutton
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_get_x_help_widget:  * @gre: a #GimpResolutionEntry  *  * You shouldn't fiddle with the internals of a #GimpResolutionEntry but  * if you want to set tooltips using gimp_help_set_help_data() you  * can use this function to get a pointer to the spinbuttons.  *  * Return value: a #GtkWidget pointer that you can attach a tooltip to.  **/
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_resolution_entry_get_y_help_widget (GimpResolutionEntry * gre)
name|gimp_resolution_entry_get_y_help_widget
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|)
block|{
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|gre
operator|->
name|independent
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
return|return
name|gre
operator|->
name|x
operator|.
name|spinbutton
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_update_width:  * @gre: the #GimpResolutionEntry  * @data: a pointer to a gdouble  *  * Convenience function to set a double to the width, suitable  * for use as a signal callback.  *  * Since: GIMP 2.4  */
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_update_width (GimpResolutionEntry * gre,gpointer data)
name|gimp_resolution_entry_update_width
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gdouble
modifier|*
name|val
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|gre
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|data
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|val
operator|=
operator|(
name|gdouble
operator|*
operator|)
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gimp_resolution_entry_get_width
argument_list|(
name|gre
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_update_height:  * @gre: the #GimpResolutionEntry  * @data: a pointer to a gdouble  *  * Convenience function to set a double to the height, suitable  * for use as a signal callback.  *  * Since: GIMP 2.4  */
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_update_height (GimpResolutionEntry * gre,gpointer data)
name|gimp_resolution_entry_update_height
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gdouble
modifier|*
name|val
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|gre
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|data
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|val
operator|=
operator|(
name|gdouble
operator|*
operator|)
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gimp_resolution_entry_get_height
argument_list|(
name|gre
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_update_x:  * @gre: the #GimpResolutionEntry  * @data: a pointer to a gdouble  *  * Convenience function to set a double to the X resolution, suitable  * for use as a signal callback.  *  * Since: GIMP 2.4  */
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_update_x (GimpResolutionEntry * gre,gpointer data)
name|gimp_resolution_entry_update_x
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gdouble
modifier|*
name|val
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|gre
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|data
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|val
operator|=
operator|(
name|gdouble
operator|*
operator|)
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gimp_resolution_entry_get_x
argument_list|(
name|gre
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_update_x_in_dpi:  * @gre: the #GimpResolutionEntry  * @data: a pointer to a gdouble  *  * Convenience function to set a double to the X resolution, suitable  * for use as a signal callback.  *  * Since: GIMP 2.4  */
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_update_x_in_dpi (GimpResolutionEntry * gre,gpointer data)
name|gimp_resolution_entry_update_x_in_dpi
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gdouble
modifier|*
name|val
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|gre
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|data
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|val
operator|=
operator|(
name|gdouble
operator|*
operator|)
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gimp_resolution_entry_get_x_in_dpi
argument_list|(
name|gre
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_update_y:  * @gre: the #GimpResolutionEntry  * @data: a pointer to a gdouble  *  * Convenience function to set a double to the Y resolution, suitable  * for use as a signal callback.  *  * Since: GIMP 2.4  */
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_update_y (GimpResolutionEntry * gre,gpointer data)
name|gimp_resolution_entry_update_y
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gdouble
modifier|*
name|val
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|gre
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|data
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|val
operator|=
operator|(
name|gdouble
operator|*
operator|)
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gimp_resolution_entry_get_y
argument_list|(
name|gre
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_resolution_entry_update_y_in_dpi:  * @gre: the #GimpResolutionEntry  * @data: a pointer to a gdouble  *  * Convenience function to set a double to the Y resolution, suitable  * for use as a signal callback.  *  * Since: GIMP 2.4  */
end_comment

begin_function
name|void
DECL|function|gimp_resolution_entry_update_y_in_dpi (GimpResolutionEntry * gre,gpointer data)
name|gimp_resolution_entry_update_y_in_dpi
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gdouble
modifier|*
name|val
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|gre
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|data
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|GIMP_IS_RESOLUTION_ENTRY
argument_list|(
name|gre
argument_list|)
argument_list|)
expr_stmt|;
name|val
operator|=
operator|(
name|gdouble
operator|*
operator|)
name|data
expr_stmt|;
operator|*
name|val
operator|=
name|gimp_resolution_entry_get_y_in_dpi
argument_list|(
name|gre
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_resolution_entry_format_label (GimpResolutionEntry * gre,GtkWidget * label,gdouble size)
name|gimp_resolution_entry_format_label
parameter_list|(
name|GimpResolutionEntry
modifier|*
name|gre
parameter_list|,
name|GtkWidget
modifier|*
name|label
parameter_list|,
name|gdouble
name|size
parameter_list|)
block|{
name|gchar
modifier|*
name|format
init|=
name|g_strdup_printf
argument_list|(
literal|"%%.%df %%s"
argument_list|,
name|gimp_unit_get_digits
argument_list|(
name|gre
operator|->
name|unit
argument_list|)
argument_list|)
decl_stmt|;
name|gchar
modifier|*
name|text
init|=
name|g_strdup_printf
argument_list|(
name|format
argument_list|,
name|size
operator|*
name|gimp_unit_get_factor
argument_list|(
name|gre
operator|->
name|unit
argument_list|)
argument_list|,
name|gimp_unit_get_plural
argument_list|(
name|gre
operator|->
name|unit
argument_list|)
argument_list|)
decl_stmt|;
name|g_free
argument_list|(
name|format
argument_list|)
expr_stmt|;
name|gtk_label_set_text
argument_list|(
name|GTK_LABEL
argument_list|(
name|label
argument_list|)
argument_list|,
name|text
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|text
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

