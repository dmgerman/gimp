begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* LIBGIMP - The GIMP Library  * Copyright (C) 1995-1997 Peter Mattis and Spencer Kimball  *  * gimpicons.c  * Copyright (C) 2001-2015 Michael Natterer<mitch@gimp.org>  *  * This library is free software: you can redistribute it and/or  * modify it under the terms of the GNU Lesser General Public  * License as published by the Free Software Foundation; either  * version 3 of the License, or (at your option) any later version.  *  * This library is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU  * Library General Public License for more details.  *  * You should have received a copy of the GNU Lesser General Public  * License along with this library.  If not, see  *<http://www.gnu.org/licenses/>.  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<gtk/gtk.h>
end_include

begin_include
include|#
directive|include
file|"libgimpbase/gimpbase.h"
end_include

begin_undef
undef|#
directive|undef
name|GIMP_DISABLE_DEPRECATED
end_undef

begin_include
include|#
directive|include
file|"gimpicons.h"
end_include

begin_include
include|#
directive|include
file|"icons/Color/gimp-icon-pixbufs.c"
end_include

begin_include
include|#
directive|include
file|"libgimp/libgimp-intl.h"
end_include

begin_comment
comment|/**  * SECTION: gimpicons  * @title: GimpIcons  * @short_description: Prebuilt common menu/toolbar items and  *                     corresponding icons  *  * GIMP registers a set of menu/toolbar items and corresponding icons  * in addition to the standard GTK+ stock items. These can be used  * just like GTK+ stock items. GIMP also overrides a few of the GTK+  * icons (namely the ones in dialog size).  *  * Stock icons may have a RTL variant which gets used for  * right-to-left locales.  **/
end_comment

begin_define
DECL|macro|LIBGIMP_DOMAIN
define|#
directive|define
name|LIBGIMP_DOMAIN
value|GETTEXT_PACKAGE "-libgimp"
end_define

begin_define
DECL|macro|GIMP_TOILET_PAPER
define|#
directive|define
name|GIMP_TOILET_PAPER
value|"gimp-toilet-paper"
end_define

begin_define
DECL|macro|GIMP_DEFAULT_ICON_THEME
define|#
directive|define
name|GIMP_DEFAULT_ICON_THEME
value|"Symbolic"
end_define

begin_decl_stmt
DECL|variable|gimp_stock_factory
specifier|static
name|GtkIconFactory
modifier|*
name|gimp_stock_factory
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_stock_items
specifier|static
specifier|const
name|GtkStockItem
name|gimp_stock_items
index|[]
init|=
block|{
block|{
name|GIMP_STOCK_ANCHOR
block|,
name|N_
argument_list|(
literal|"Anchor"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CENTER
block|,
name|N_
argument_list|(
literal|"C_enter"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DUPLICATE
block|,
name|N_
argument_list|(
literal|"_Duplicate"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LINKED
block|,
name|N_
argument_list|(
literal|"Linked"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PASTE_AS_NEW
block|,
name|N_
argument_list|(
literal|"Paste as New"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PASTE_INTO
block|,
name|N_
argument_list|(
literal|"Paste Into"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_RESET
block|,
name|N_
argument_list|(
literal|"_Reset"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_VISIBLE
block|,
name|N_
argument_list|(
literal|"Visible"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_LINEAR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_BILINEAR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_RADIAL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_SQUARE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_CONICAL_SYMMETRIC
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_CONICAL_ASYMMETRIC
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_SHAPEBURST_ANGULAR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_SHAPEBURST_SPHERICAL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_SHAPEBURST_DIMPLED
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_SPIRAL_CLOCKWISE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRADIENT_SPIRAL_ANTICLOCKWISE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_EAST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_NORTH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_NORTH_EAST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_NORTH_WEST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_SOUTH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_SOUTH_EAST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_SOUTH_WEST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRAVITY_WEST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_HCENTER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_VCENTER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_HCHAIN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_HCHAIN_BROKEN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_VCHAIN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_VCHAIN_BROKEN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_REPLACE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_ADD
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_SUBTRACT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_INTERSECT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_STROKE
block|,
name|N_
argument_list|(
literal|"_Stroke"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_TO_CHANNEL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_TO_PATH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PATH_STROKE
block|,
name|N_
argument_list|(
literal|"_Stroke"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CURVE_FREE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CURVE_SMOOTH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_COLOR_PICKER_BLACK
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_COLOR_PICKER_GRAY
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_COLOR_PICKER_WHITE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_COLOR_TRIANGLE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_COLOR_PICK_FROM_SCREEN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHAR_PICKER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LETTER_SPACING
block|,
name|N_
argument_list|(
literal|"L_etter Spacing"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LINE_SPACING
block|,
name|N_
argument_list|(
literal|"L_ine Spacing"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TEXT_DIR_LTR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TEXT_DIR_RTL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PATTERN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONVERT_RGB
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONVERT_GRAYSCALE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONVERT_INDEXED
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_INVERT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_MERGE_DOWN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LAYER_TO_IMAGESIZE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PLUGIN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_RESHOW_FILTER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_ROTATE_90
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_ROTATE_180
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_ROTATE_270
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_RESIZE
block|,
name|N_
argument_list|(
literal|"Re_size"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SCALE
block|,
name|N_
argument_list|(
literal|"_Scale"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_FLIP_HORIZONTAL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_FLIP_VERTICAL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_IMAGES
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LAYERS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNELS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PATHS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOLS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_OPTIONS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DEVICE_STATUS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_INPUT_DEVICE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CURSOR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SAMPLE_POINT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DYNAMICS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_PRESET
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_IMAGE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LAYER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TEXT_LAYER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_FLOATING_SELECTION
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNEL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNEL_RED
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNEL_GREEN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNEL_BLUE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNEL_GRAY
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNEL_INDEXED
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CHANNEL_ALPHA
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LAYER_MASK
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PATH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TEMPLATE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_COLORMAP
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_HISTOGRAM
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_HISTOGRAM_LINEAR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_HISTOGRAM_LOGARITHMIC
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_UNDO_HISTORY
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TRANSPARENCY
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_ALL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_NONE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_GROW
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_SHRINK
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SELECTION_BORDER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_NAVIGATION
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_QUICK_MASK_OFF
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_QUICK_MASK_ON
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONTROLLER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONTROLLER_KEYBOARD
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONTROLLER_LINUX_INPUT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONTROLLER_MIDI
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CONTROLLER_WHEEL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DISPLAY_FILTER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DISPLAY_FILTER_COLORBLIND
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DISPLAY_FILTER_CONTRAST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DISPLAY_FILTER_GAMMA
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DISPLAY_FILTER_LCMS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_DISPLAY_FILTER_PROOF
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LIST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GRID
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_PORTRAIT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_LANDSCAPE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_TOILET_PAPER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_GEGL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_WEB
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_VIDEO
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SHAPE_CIRCLE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SHAPE_DIAMOND
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_SHAPE_SQUARE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CAP_BUTT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CAP_ROUND
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_CAP_SQUARE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_JOIN_MITER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_JOIN_ROUND
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_JOIN_BEVEL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_ERROR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_INFO
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_QUESTION
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_USER_MANUAL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_WARNING
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_WILBER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_WILBER_EEK
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_FRAME
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TEXTURE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_AIRBRUSH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_ALIGN
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_BLEND
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_BLUR
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_BRIGHTNESS_CONTRAST
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_BUCKET_FILL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_BY_COLOR_SELECT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_CAGE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_CLONE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_COLOR_BALANCE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_COLOR_PICKER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_COLORIZE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_CROP
block|,
name|N_
argument_list|(
literal|"Cr_op"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_CURVES
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_DESATURATE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_DODGE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_ELLIPSE_SELECT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_ERASER
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_FLIP
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_FREE_SELECT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_FOREGROUND_SELECT
block|,
name|N_
argument_list|(
literal|"_Select"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_FUZZY_SELECT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_HUE_SATURATION
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_HEAL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_INK
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_ISCISSORS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_LEVELS
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_MEASURE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_MOVE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_PAINTBRUSH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_PATH
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_PENCIL
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_PERSPECTIVE
block|,
name|N_
argument_list|(
literal|"_Transform"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_PERSPECTIVE_CLONE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_POSTERIZE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_RECT_SELECT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_ROTATE
block|,
name|N_
argument_list|(
literal|"_Rotate"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_SCALE
block|,
name|N_
argument_list|(
literal|"_Scale"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_SHEAR
block|,
name|N_
argument_list|(
literal|"_Shear"
argument_list|)
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_SMUDGE
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_TEXT
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_THRESHOLD
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
name|GIMP_STOCK_TOOL_ZOOM
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimp_compat_stock_items
specifier|static
specifier|const
name|GtkStockItem
name|gimp_compat_stock_items
index|[]
init|=
block|{
block|{
literal|"gimp-indexed-palette"
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
literal|"gimp-qmask-off"
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|,
block|{
literal|"gimp-qmask-on"
block|,
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|LIBGIMP_DOMAIN
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
DECL|function|register_stock_icon (GtkIconFactory * factory,const gchar * stock_id,const gchar * icon_name)
name|register_stock_icon
parameter_list|(
name|GtkIconFactory
modifier|*
name|factory
parameter_list|,
specifier|const
name|gchar
modifier|*
name|stock_id
parameter_list|,
specifier|const
name|gchar
modifier|*
name|icon_name
parameter_list|)
block|{
name|GtkIconSet
modifier|*
name|set
init|=
name|gtk_icon_set_new
argument_list|()
decl_stmt|;
name|GtkIconSource
modifier|*
name|source
init|=
name|gtk_icon_source_new
argument_list|()
decl_stmt|;
name|gtk_icon_source_set_direction_wildcarded
argument_list|(
name|source
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_size_wildcarded
argument_list|(
name|source
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_state_wildcarded
argument_list|(
name|source
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_icon_name
argument_list|(
name|source
argument_list|,
name|icon_name
argument_list|)
expr_stmt|;
name|gtk_icon_set_add_source
argument_list|(
name|set
argument_list|,
name|source
argument_list|)
expr_stmt|;
name|gtk_icon_source_free
argument_list|(
name|source
argument_list|)
expr_stmt|;
name|gtk_icon_factory_add
argument_list|(
name|factory
argument_list|,
name|stock_id
argument_list|,
name|set
argument_list|)
expr_stmt|;
name|gtk_icon_set_unref
argument_list|(
name|set
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|register_bidi_stock_icon (GtkIconFactory * factory,const gchar * stock_id,const gchar * icon_name_ltr,const gchar * icon_name_rtl)
name|register_bidi_stock_icon
parameter_list|(
name|GtkIconFactory
modifier|*
name|factory
parameter_list|,
specifier|const
name|gchar
modifier|*
name|stock_id
parameter_list|,
specifier|const
name|gchar
modifier|*
name|icon_name_ltr
parameter_list|,
specifier|const
name|gchar
modifier|*
name|icon_name_rtl
parameter_list|)
block|{
name|GtkIconSet
modifier|*
name|set
init|=
name|gtk_icon_set_new
argument_list|()
decl_stmt|;
name|GtkIconSource
modifier|*
name|source
init|=
name|gtk_icon_source_new
argument_list|()
decl_stmt|;
name|gtk_icon_source_set_direction
argument_list|(
name|source
argument_list|,
name|GTK_TEXT_DIR_LTR
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_direction_wildcarded
argument_list|(
name|source
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_size_wildcarded
argument_list|(
name|source
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_state_wildcarded
argument_list|(
name|source
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_icon_name
argument_list|(
name|source
argument_list|,
name|icon_name_ltr
argument_list|)
expr_stmt|;
name|gtk_icon_set_add_source
argument_list|(
name|set
argument_list|,
name|source
argument_list|)
expr_stmt|;
name|gtk_icon_source_free
argument_list|(
name|source
argument_list|)
expr_stmt|;
name|source
operator|=
name|gtk_icon_source_new
argument_list|()
expr_stmt|;
name|gtk_icon_source_set_direction
argument_list|(
name|source
argument_list|,
name|GTK_TEXT_DIR_RTL
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_direction_wildcarded
argument_list|(
name|source
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_size_wildcarded
argument_list|(
name|source
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_state_wildcarded
argument_list|(
name|source
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_icon_source_set_icon_name
argument_list|(
name|source
argument_list|,
name|icon_name_rtl
argument_list|)
expr_stmt|;
name|gtk_icon_set_add_source
argument_list|(
name|set
argument_list|,
name|source
argument_list|)
expr_stmt|;
name|gtk_icon_source_free
argument_list|(
name|source
argument_list|)
expr_stmt|;
name|gtk_icon_factory_add
argument_list|(
name|factory
argument_list|,
name|stock_id
argument_list|,
name|set
argument_list|)
expr_stmt|;
name|gtk_icon_set_unref
argument_list|(
name|set
argument_list|)
expr_stmt|;
block|}
end_function

begin_decl_stmt
DECL|variable|icon_theme_path
specifier|static
name|GFile
modifier|*
name|icon_theme_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|default_search_path
specifier|static
name|GFile
modifier|*
name|default_search_path
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
DECL|function|gimp_icons_change_icon_theme (GFile * new_search_path)
name|gimp_icons_change_icon_theme
parameter_list|(
name|GFile
modifier|*
name|new_search_path
parameter_list|)
block|{
name|GFile
modifier|*
name|old_search_path
init|=
name|g_file_get_parent
argument_list|(
name|icon_theme_path
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|default_search_path
condition|)
name|default_search_path
operator|=
name|gimp_data_directory_file
argument_list|(
literal|"icons"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|g_file_equal
argument_list|(
name|new_search_path
argument_list|,
name|old_search_path
argument_list|)
condition|)
block|{
name|GtkIconTheme
modifier|*
name|icon_theme
init|=
name|gtk_icon_theme_get_default
argument_list|()
decl_stmt|;
if|if
condition|(
name|g_file_equal
argument_list|(
name|old_search_path
argument_list|,
name|default_search_path
argument_list|)
condition|)
block|{
comment|/*  if the old icon theme is in the default search path,            *  simply prepend the new theme's path            */
name|gchar
modifier|*
name|path_str
init|=
name|g_file_get_path
argument_list|(
name|new_search_path
argument_list|)
decl_stmt|;
name|gtk_icon_theme_prepend_search_path
argument_list|(
name|icon_theme
argument_list|,
name|path_str
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|path_str
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/*  if the old theme is not in the default search path,            *  we need to deal with the search path's first element            */
name|gchar
modifier|*
modifier|*
name|paths
decl_stmt|;
name|gint
name|n_paths
decl_stmt|;
name|gtk_icon_theme_get_search_path
argument_list|(
name|icon_theme
argument_list|,
operator|&
name|paths
argument_list|,
operator|&
name|n_paths
argument_list|)
expr_stmt|;
if|if
condition|(
name|g_file_equal
argument_list|(
name|new_search_path
argument_list|,
name|default_search_path
argument_list|)
condition|)
block|{
comment|/*  when switching to a theme in the default path, remove                *  the first search path element, the default search path                *  is still in the search path                */
name|gtk_icon_theme_set_search_path
argument_list|(
name|icon_theme
argument_list|,
operator|(
specifier|const
name|gchar
operator|*
operator|*
operator|)
name|paths
operator|+
literal|1
argument_list|,
name|n_paths
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/*  when switching between two non-default search paths, replace                *  the first element of the search path with the new                *  theme's path                */
name|g_free
argument_list|(
name|paths
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|paths
index|[
literal|0
index|]
operator|=
name|g_file_get_path
argument_list|(
name|new_search_path
argument_list|)
expr_stmt|;
name|gtk_icon_theme_set_search_path
argument_list|(
name|icon_theme
argument_list|,
operator|(
specifier|const
name|gchar
operator|*
operator|*
operator|)
name|paths
argument_list|,
name|n_paths
argument_list|)
expr_stmt|;
block|}
name|g_strfreev
argument_list|(
name|paths
argument_list|)
expr_stmt|;
block|}
block|}
name|g_object_unref
argument_list|(
name|old_search_path
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_icons_notify_system_icon_theme (GObject * settings,GParamSpec * param,gpointer unused)
name|gimp_icons_notify_system_icon_theme
parameter_list|(
name|GObject
modifier|*
name|settings
parameter_list|,
name|GParamSpec
modifier|*
name|param
parameter_list|,
name|gpointer
name|unused
parameter_list|)
block|{
name|GdkScreen
modifier|*
name|screen
init|=
name|gdk_screen_get_default
argument_list|()
decl_stmt|;
name|GValue
name|value
init|=
name|G_VALUE_INIT
decl_stmt|;
name|g_value_init
argument_list|(
operator|&
name|value
argument_list|,
name|G_TYPE_STRING
argument_list|)
expr_stmt|;
if|if
condition|(
name|gdk_screen_get_setting
argument_list|(
name|screen
argument_list|,
literal|"gtk-icon-theme-name"
argument_list|,
operator|&
name|value
argument_list|)
condition|)
block|{
specifier|const
name|gchar
modifier|*
name|new_system_icon_theme
init|=
name|g_value_get_string
argument_list|(
operator|&
name|value
argument_list|)
decl_stmt|;
name|gchar
modifier|*
name|cur_system_icon_theme
init|=
name|NULL
decl_stmt|;
name|g_object_get
argument_list|(
name|settings
argument_list|,
literal|"gtk-fallback-icon-theme"
argument_list|,
operator|&
name|cur_system_icon_theme
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|g_strcmp0
argument_list|(
name|cur_system_icon_theme
argument_list|,
name|new_system_icon_theme
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|settings
argument_list|,
literal|"gtk-fallback-icon-theme"
argument_list|,
name|new_system_icon_theme
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_object_notify
argument_list|(
name|settings
argument_list|,
literal|"gtk-icon-theme-name"
argument_list|)
expr_stmt|;
block|}
name|g_free
argument_list|(
name|cur_system_icon_theme
argument_list|)
expr_stmt|;
block|}
name|g_value_unset
argument_list|(
operator|&
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|gboolean
DECL|function|gimp_icons_sanity_check (GFile * path,const gchar * theme_name)
name|gimp_icons_sanity_check
parameter_list|(
name|GFile
modifier|*
name|path
parameter_list|,
specifier|const
name|gchar
modifier|*
name|theme_name
parameter_list|)
block|{
name|gboolean
name|exists
init|=
name|FALSE
decl_stmt|;
name|GFile
modifier|*
name|child
init|=
name|g_file_get_child
argument_list|(
name|path
argument_list|,
name|theme_name
argument_list|)
decl_stmt|;
if|if
condition|(
name|g_file_query_exists
argument_list|(
name|child
argument_list|,
name|NULL
argument_list|)
condition|)
block|{
name|GFile
modifier|*
name|index
init|=
name|g_file_get_child
argument_list|(
name|child
argument_list|,
literal|"index.theme"
argument_list|)
decl_stmt|;
if|if
condition|(
name|g_file_query_exists
argument_list|(
name|index
argument_list|,
name|NULL
argument_list|)
condition|)
name|exists
operator|=
name|TRUE
expr_stmt|;
else|else
name|g_printerr
argument_list|(
literal|"%s: Icon theme path has no '%s/index.theme': %s\n"
argument_list|,
name|G_STRFUNC
argument_list|,
name|theme_name
argument_list|,
name|gimp_file_get_utf8_name
argument_list|(
name|path
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|index
argument_list|)
expr_stmt|;
block|}
else|else
name|g_printerr
argument_list|(
literal|"%s: Icon theme path has no '%s' subdirectory: %s\n"
argument_list|,
name|G_STRFUNC
argument_list|,
name|theme_name
argument_list|,
name|gimp_file_get_utf8_name
argument_list|(
name|path
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|child
argument_list|)
expr_stmt|;
return|return
name|exists
return|;
block|}
end_function

begin_function
name|void
DECL|function|gimp_icons_set_icon_theme (GFile * path)
name|gimp_icons_set_icon_theme
parameter_list|(
name|GFile
modifier|*
name|path
parameter_list|)
block|{
name|gchar
modifier|*
name|icon_theme_name
decl_stmt|;
name|GFile
modifier|*
name|search_path
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|path
operator|==
name|NULL
operator|||
name|G_IS_FILE
argument_list|(
name|path
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|path
condition|)
name|path
operator|=
name|g_object_ref
argument_list|(
name|path
argument_list|)
expr_stmt|;
else|else
name|path
operator|=
name|gimp_data_directory_file
argument_list|(
literal|"icons"
argument_list|,
name|GIMP_DEFAULT_ICON_THEME
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|search_path
operator|=
name|g_file_get_parent
argument_list|(
name|path
argument_list|)
expr_stmt|;
name|icon_theme_name
operator|=
name|g_file_get_basename
argument_list|(
name|path
argument_list|)
expr_stmt|;
if|if
condition|(
name|gimp_icons_sanity_check
argument_list|(
name|search_path
argument_list|,
literal|"hicolor"
argument_list|)
operator|&&
name|gimp_icons_sanity_check
argument_list|(
name|search_path
argument_list|,
name|icon_theme_name
argument_list|)
condition|)
block|{
if|if
condition|(
name|icon_theme_path
condition|)
block|{
comment|/*  this is an icon theme change  */
name|gimp_icons_change_icon_theme
argument_list|(
name|search_path
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|g_file_equal
argument_list|(
name|icon_theme_path
argument_list|,
name|path
argument_list|)
condition|)
block|{
name|g_object_unref
argument_list|(
name|icon_theme_path
argument_list|)
expr_stmt|;
name|icon_theme_path
operator|=
name|g_object_ref
argument_list|(
name|path
argument_list|)
expr_stmt|;
block|}
name|g_object_set
argument_list|(
name|gtk_settings_get_for_screen
argument_list|(
name|gdk_screen_get_default
argument_list|()
argument_list|)
argument_list|,
literal|"gtk-icon-theme-name"
argument_list|,
name|icon_theme_name
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/*  this is the first call upon initialization  */
name|icon_theme_path
operator|=
name|g_object_ref
argument_list|(
name|path
argument_list|)
expr_stmt|;
block|}
block|}
name|g_free
argument_list|(
name|icon_theme_name
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|search_path
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|path
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_stock_init:  *  * Initializes the GIMP stock icon factory.  *  * You don't need to call this function as gimp_ui_init() already does  * this for you.  *  * Deprecated: 2.10: Use gimp_icons_init() instead.  */
end_comment

begin_function
name|void
DECL|function|gimp_stock_init (void)
name|gimp_stock_init
parameter_list|(
name|void
parameter_list|)
block|{
name|gimp_icons_init
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_icons_init:  *  * Initializes the GIMP stock icon factory.  *  * You don't need to call this function as gimp_ui_init() already does  * this for you.  */
end_comment

begin_function
name|void
DECL|function|gimp_icons_init (void)
name|gimp_icons_init
parameter_list|(
name|void
parameter_list|)
block|{
specifier|static
name|gboolean
name|initialized
init|=
name|FALSE
decl_stmt|;
name|GtkSettings
modifier|*
name|settings
decl_stmt|;
name|GdkPixbuf
modifier|*
name|pixbuf
decl_stmt|;
name|GError
modifier|*
name|error
init|=
name|NULL
decl_stmt|;
name|gchar
modifier|*
name|icons_dir
decl_stmt|;
name|gchar
modifier|*
name|system_icon_theme
decl_stmt|;
name|gchar
modifier|*
name|gimp_icon_theme
decl_stmt|;
name|gint
name|i
decl_stmt|;
if|if
condition|(
name|initialized
condition|)
return|return;
name|gimp_stock_factory
operator|=
name|gtk_icon_factory_new
argument_list|()
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|G_N_ELEMENTS
argument_list|(
name|gimp_stock_items
argument_list|)
condition|;
name|i
operator|++
control|)
block|{
name|register_stock_icon
argument_list|(
name|gimp_stock_factory
argument_list|,
name|gimp_stock_items
index|[
name|i
index|]
operator|.
name|stock_id
argument_list|,
name|gimp_stock_items
index|[
name|i
index|]
operator|.
name|stock_id
argument_list|)
expr_stmt|;
block|}
name|register_bidi_stock_icon
argument_list|(
name|gimp_stock_factory
argument_list|,
name|GIMP_STOCK_MENU_LEFT
argument_list|,
name|GIMP_STOCK_MENU_LEFT
argument_list|,
name|GIMP_STOCK_MENU_RIGHT
argument_list|)
expr_stmt|;
name|register_bidi_stock_icon
argument_list|(
name|gimp_stock_factory
argument_list|,
name|GIMP_STOCK_MENU_RIGHT
argument_list|,
name|GIMP_STOCK_MENU_RIGHT
argument_list|,
name|GIMP_STOCK_MENU_LEFT
argument_list|)
expr_stmt|;
name|register_stock_icon
argument_list|(
name|gimp_stock_factory
argument_list|,
literal|"gimp-indexed-palette"
argument_list|,
name|GIMP_STOCK_COLORMAP
argument_list|)
expr_stmt|;
name|register_stock_icon
argument_list|(
name|gimp_stock_factory
argument_list|,
literal|"gimp-qmask-off"
argument_list|,
name|GIMP_STOCK_QUICK_MASK_OFF
argument_list|)
expr_stmt|;
name|register_stock_icon
argument_list|(
name|gimp_stock_factory
argument_list|,
literal|"gimp-qmask-on"
argument_list|,
name|GIMP_STOCK_QUICK_MASK_ON
argument_list|)
expr_stmt|;
name|register_stock_icon
argument_list|(
name|gimp_stock_factory
argument_list|,
literal|"gimp-tool-blend"
argument_list|,
name|GIMP_STOCK_TOOL_BLEND
argument_list|)
expr_stmt|;
name|gtk_icon_factory_add_default
argument_list|(
name|gimp_stock_factory
argument_list|)
expr_stmt|;
name|gtk_stock_add_static
argument_list|(
name|gimp_stock_items
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|gimp_stock_items
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_stock_add_static
argument_list|(
name|gimp_compat_stock_items
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|gimp_compat_stock_items
argument_list|)
argument_list|)
expr_stmt|;
comment|/*  always prepend the default icon theme, it's never removed from    *  the path again and acts as fallback for missing icons in other    *  themes.    */
if|if
condition|(
operator|!
name|default_search_path
condition|)
name|default_search_path
operator|=
name|gimp_data_directory_file
argument_list|(
literal|"icons"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|icons_dir
operator|=
name|g_file_get_path
argument_list|(
name|default_search_path
argument_list|)
expr_stmt|;
name|gtk_icon_theme_prepend_search_path
argument_list|(
name|gtk_icon_theme_get_default
argument_list|()
argument_list|,
name|icons_dir
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|icons_dir
argument_list|)
expr_stmt|;
comment|/*  if an icon theme was chosen before init(), change to it  */
if|if
condition|(
name|icon_theme_path
condition|)
block|{
name|GFile
modifier|*
name|search_path
init|=
name|g_file_get_parent
argument_list|(
name|icon_theme_path
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|g_file_equal
argument_list|(
name|search_path
argument_list|,
name|default_search_path
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|icon_dir
init|=
name|g_file_get_path
argument_list|(
name|search_path
argument_list|)
decl_stmt|;
name|gtk_icon_theme_prepend_search_path
argument_list|(
name|gtk_icon_theme_get_default
argument_list|()
argument_list|,
name|icon_dir
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|icon_dir
argument_list|)
expr_stmt|;
block|}
name|g_object_unref
argument_list|(
name|search_path
argument_list|)
expr_stmt|;
name|gimp_icon_theme
operator|=
name|g_file_get_basename
argument_list|(
name|icon_theme_path
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|gimp_icon_theme
operator|=
name|g_strdup
argument_list|(
name|GIMP_DEFAULT_ICON_THEME
argument_list|)
expr_stmt|;
block|}
name|settings
operator|=
name|gtk_settings_get_for_screen
argument_list|(
name|gdk_screen_get_default
argument_list|()
argument_list|)
expr_stmt|;
name|g_object_get
argument_list|(
name|settings
argument_list|,
literal|"gtk-icon-theme-name"
argument_list|,
operator|&
name|system_icon_theme
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|settings
argument_list|,
literal|"gtk-fallback-icon-theme"
argument_list|,
name|system_icon_theme
argument_list|,
literal|"gtk-icon-theme-name"
argument_list|,
name|gimp_icon_theme
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|gimp_icon_theme
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|system_icon_theme
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|settings
argument_list|,
literal|"notify::gtk-icon-theme-name"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_icons_notify_system_icon_theme
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|pixbuf
operator|=
name|gdk_pixbuf_new_from_resource
argument_list|(
literal|"/org/gimp/icons/64/gimp-wilber-eek.png"
argument_list|,
operator|&
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|pixbuf
condition|)
block|{
name|gtk_icon_theme_add_builtin_icon
argument_list|(
name|GIMP_STOCK_WILBER_EEK
argument_list|,
literal|64
argument_list|,
name|pixbuf
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|pixbuf
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|g_critical
argument_list|(
literal|"Failed to create icon image: %s"
argument_list|,
name|error
operator|->
name|message
argument_list|)
expr_stmt|;
name|g_clear_error
argument_list|(
operator|&
name|error
argument_list|)
expr_stmt|;
block|}
name|initialized
operator|=
name|TRUE
expr_stmt|;
block|}
end_function

end_unit

