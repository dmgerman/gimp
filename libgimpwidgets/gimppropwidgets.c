begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* LIBGIMP - The GIMP Library  * Copyright (C) 1995-1997 Peter Mattis and Spencer Kimball  *  * gimppropwidgets.c  * Copyright (C) 2002-2007  Michael Natterer<mitch@gimp.org>  *                          Sven Neumann<sven@gimp.org>  *  * This library is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU  * Lesser General Public License for more details.  *  * You should have received a copy of the GNU Lesser General Public  * License along with this library.  If not, see  *<http://www.gnu.org/licenses/>.  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<gtk/gtk.h>
end_include

begin_include
include|#
directive|include
file|"libgimpcolor/gimpcolor.h"
end_include

begin_include
include|#
directive|include
file|"libgimpmath/gimpmath.h"
end_include

begin_include
include|#
directive|include
file|"libgimpbase/gimpbase.h"
end_include

begin_include
include|#
directive|include
file|"libgimpconfig/gimpconfig.h"
end_include

begin_include
include|#
directive|include
file|"gimpwidgets.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/libgimp-intl.h"
end_include

begin_comment
comment|/**  * SECTION: gimppropwidgets  * @title: GimpPropWidgets  * @short_description: Editable views on #GObject properties.  *  * Editable views on #GObject properties.  **/
end_comment

begin_comment
comment|/*  utility function prototypes  */
end_comment

begin_function_decl
specifier|static
name|void
name|set_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|set_radio_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|GParamSpec
modifier|*
name|get_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|GParamSpec
modifier|*
name|find_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|GParamSpec
modifier|*
name|check_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GType
name|type
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|GParamSpec
modifier|*
name|check_param_spec_w
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GType
name|type
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gboolean
name|get_numeric_values
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|gdouble
modifier|*
name|value
parameter_list|,
name|gdouble
modifier|*
name|lower
parameter_list|,
name|gdouble
modifier|*
name|upper
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|connect_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GCallback
name|callback
parameter_list|,
name|gpointer
name|callback_data
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/******************/
end_comment

begin_comment
comment|/*  check button  */
end_comment

begin_comment
comment|/******************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_check_button_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_check_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|button
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_check_button_new:  * @config:        Object to which property is attached.  * @property_name: Name of boolean property controlled by checkbutton.  * @label:         Label to give checkbutton (including mnemonic).  *  * Creates a #GtkCheckButton that displays and sets the specified  * boolean property.  *  * Return value: The newly created #GtkCheckButton widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_check_button_new (GObject * config,const gchar * property_name,const gchar * label)
name|gimp_prop_check_button_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|label
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|gboolean
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_BOOLEAN
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_mnemonic
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|button
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|button
argument_list|,
literal|"toggled"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_check_button_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_check_button_notify
argument_list|)
argument_list|,
name|button
argument_list|)
expr_stmt|;
return|return
name|button
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_check_button_callback (GtkWidget * widget,GObject * config)
name|gimp_prop_check_button_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|gtk_toggle_button_get_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_toggle_button_sensitive_update
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_check_button_notify (GObject * config,GParamSpec * param_spec,GtkWidget * button)
name|gimp_prop_check_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|button
parameter_list|)
block|{
name|gboolean
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_toggle_button_get_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
operator|!=
name|value
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|button
argument_list|,
name|gimp_prop_check_button_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|gimp_toggle_button_sensitive_update
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|button
argument_list|,
name|gimp_prop_check_button_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function_decl
specifier|static
name|void
name|gimp_prop_enum_check_button_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_enum_check_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|button
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_enum_check_button_new:  * @config:        Object to which property is attached.  * @property_name: Name of enum property controlled by checkbutton.  * @label:         Label to give checkbutton (including mnemonic).  * @false_value:   Enum value corresponding to unchecked state.  * @true_value:    Enum value corresonding to checked state.  *  * Creates a #GtkCheckButton that displays and sets the specified  * property of type Enum.  Note that this widget only allows two values  * for the enum, one corresponding to the "checked" state and the  * other to the "unchecked" state.  *  * Return value: The newly created #GtkCheckButton widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_enum_check_button_new (GObject * config,const gchar * property_name,const gchar * label,gint false_value,gint true_value)
name|gimp_prop_enum_check_button_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|label
parameter_list|,
name|gint
name|false_value
parameter_list|,
name|gint
name|true_value
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_ENUM
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|button
operator|=
name|gtk_check_button_new_with_mnemonic
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|value
operator|==
name|true_value
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
operator|!=
name|false_value
operator|&&
name|value
operator|!=
name|true_value
condition|)
name|gtk_toggle_button_set_inconsistent
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|button
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"false-value"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|false_value
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"true-value"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|true_value
argument_list|)
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|button
argument_list|,
literal|"toggled"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_enum_check_button_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_enum_check_button_notify
argument_list|)
argument_list|,
name|button
argument_list|)
expr_stmt|;
return|return
name|button
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_enum_check_button_callback (GtkWidget * widget,GObject * config)
name|gimp_prop_enum_check_button_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gint
name|false_value
decl_stmt|;
name|gint
name|true_value
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|false_value
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"false-value"
argument_list|)
argument_list|)
expr_stmt|;
name|true_value
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"true-value"
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|gtk_toggle_button_get_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|)
condition|?
name|true_value
else|:
name|false_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_inconsistent
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gimp_toggle_button_sensitive_update
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_enum_check_button_notify (GObject * config,GParamSpec * param_spec,GtkWidget * button)
name|gimp_prop_enum_check_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|button
parameter_list|)
block|{
name|gint
name|value
decl_stmt|;
name|gint
name|false_value
decl_stmt|;
name|gint
name|true_value
decl_stmt|;
name|gboolean
name|active
init|=
name|FALSE
decl_stmt|;
name|gboolean
name|inconsistent
init|=
name|FALSE
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|false_value
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"false-value"
argument_list|)
argument_list|)
expr_stmt|;
name|true_value
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
literal|"true-value"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
operator|==
name|true_value
condition|)
name|active
operator|=
name|TRUE
expr_stmt|;
elseif|else
if|if
condition|(
name|value
operator|!=
name|false_value
condition|)
name|inconsistent
operator|=
name|TRUE
expr_stmt|;
name|gtk_toggle_button_set_inconsistent
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|inconsistent
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_toggle_button_get_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
operator|!=
name|active
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|button
argument_list|,
name|gimp_prop_enum_check_button_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|active
argument_list|)
expr_stmt|;
name|gimp_toggle_button_sensitive_update
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|button
argument_list|,
name|gimp_prop_enum_check_button_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*************************/
end_comment

begin_comment
comment|/*  int/enum combo box   */
end_comment

begin_comment
comment|/*************************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_int_combo_box_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_int_combo_box_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|widget
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_int_combo_box_new:  * @config:        Object to which property is attached.  * @property_name: Name of int property controlled by combo box.  * @store:         #GimpIntStore holding list of labels, values, etc.  *  * Creates a #GimpIntComboBox widget to display and set the specified  * property.  The contents of the widget are determined by @store,  * which should be created using gimp_int_store_new().  *  * Return value: The newly created #GimpIntComboBox widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_int_combo_box_new (GObject * config,const gchar * property_name,GimpIntStore * store)
name|gimp_prop_int_combo_box_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GimpIntStore
modifier|*
name|store
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|combo_box
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_INT
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|combo_box
operator|=
name|g_object_new
argument_list|(
name|GIMP_TYPE_INT_COMBO_BOX
argument_list|,
literal|"model"
argument_list|,
name|store
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_int_combo_box_set_active
argument_list|(
name|GIMP_INT_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|combo_box
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_int_combo_box_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|combo_box
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_int_combo_box_notify
argument_list|)
argument_list|,
name|combo_box
argument_list|)
expr_stmt|;
return|return
name|combo_box
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_enum_combo_box_new:  * @config:        Object to which property is attached.  * @property_name: Name of enum property controlled by combo box.  * @minimum:       Smallest allowed value of enum.  * @maximum:       Largest allowed value of enum.  *  * Creates a #GimpIntComboBox widget to display and set the specified  * enum property.  The @mimimum_value and @maximum_value give the  * possibility of restricting the allowed range to a subset of the  * enum.  If the two values are equal (e.g., 0, 0), then the full  * range of the Enum is used.  *  * Return value: The newly created #GimpEnumComboBox widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_enum_combo_box_new (GObject * config,const gchar * property_name,gint minimum,gint maximum)
name|gimp_prop_enum_combo_box_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gint
name|minimum
parameter_list|,
name|gint
name|maximum
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|combo_box
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_ENUM
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|minimum
operator|!=
name|maximum
condition|)
block|{
name|GtkListStore
modifier|*
name|store
decl_stmt|;
name|store
operator|=
name|gimp_enum_store_new_with_range
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|minimum
argument_list|,
name|maximum
argument_list|)
expr_stmt|;
name|combo_box
operator|=
name|g_object_new
argument_list|(
name|GIMP_TYPE_ENUM_COMBO_BOX
argument_list|,
literal|"model"
argument_list|,
name|store
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|store
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|combo_box
operator|=
name|gimp_enum_combo_box_new
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|)
expr_stmt|;
block|}
name|gimp_int_combo_box_set_active
argument_list|(
name|GIMP_INT_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|combo_box
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_int_combo_box_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|combo_box
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_int_combo_box_notify
argument_list|)
argument_list|,
name|combo_box
argument_list|)
expr_stmt|;
return|return
name|combo_box
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_int_combo_box_callback (GtkWidget * widget,GObject * config)
name|gimp_prop_int_combo_box_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
if|if
condition|(
name|gimp_int_combo_box_get_active
argument_list|(
name|GIMP_INT_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
operator|&
name|value
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_int_combo_box_notify (GObject * config,GParamSpec * param_spec,GtkWidget * combo_box)
name|gimp_prop_int_combo_box_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|combo_box
parameter_list|)
block|{
name|gint
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|combo_box
argument_list|,
name|gimp_prop_int_combo_box_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_int_combo_box_set_active
argument_list|(
name|GIMP_INT_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|combo_box
argument_list|,
name|gimp_prop_int_combo_box_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/************************/
end_comment

begin_comment
comment|/*  boolean combo box   */
end_comment

begin_comment
comment|/************************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_boolean_combo_box_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_boolean_combo_box_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|widget
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_boolean_combo_box_new:  * @config:        Object to which property is attached.  * @property_name: Name of boolean property controlled by combo box.  * @true_text:     Label used for entry corresponding to %TRUE value.  * @false_text:    Label used for entry corresponding to %FALSE value.  *  * Creates a #GtkComboBox widget to display and set the specified  * boolean property.  The combo box will have two entries, one  * displaying the @true_text label, the other displaying the  * @false_text label.  *  * Return value: The newly created #GtkComboBox widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_boolean_combo_box_new (GObject * config,const gchar * property_name,const gchar * true_text,const gchar * false_text)
name|gimp_prop_boolean_combo_box_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|true_text
parameter_list|,
specifier|const
name|gchar
modifier|*
name|false_text
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|combo_box
decl_stmt|;
name|gboolean
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_BOOLEAN
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|combo_box
operator|=
name|gtk_combo_box_new_text
argument_list|()
expr_stmt|;
name|gtk_combo_box_append_text
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|true_text
argument_list|)
expr_stmt|;
name|gtk_combo_box_append_text
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|false_text
argument_list|)
expr_stmt|;
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|value
condition|?
literal|0
else|:
literal|1
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|combo_box
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_boolean_combo_box_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|combo_box
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_boolean_combo_box_notify
argument_list|)
argument_list|,
name|combo_box
argument_list|)
expr_stmt|;
return|return
name|combo_box
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_boolean_combo_box_callback (GtkWidget * widget,GObject * config)
name|gimp_prop_boolean_combo_box_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|value
operator|=
name|gtk_combo_box_get_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|value
condition|?
name|FALSE
else|:
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_boolean_combo_box_notify (GObject * config,GParamSpec * param_spec,GtkWidget * combo_box)
name|gimp_prop_boolean_combo_box_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|combo_box
parameter_list|)
block|{
name|gint
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|combo_box
argument_list|,
name|gimp_prop_boolean_combo_box_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|value
condition|?
literal|0
else|:
literal|1
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|combo_box
argument_list|,
name|gimp_prop_boolean_combo_box_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*****************/
end_comment

begin_comment
comment|/*  radio boxes  */
end_comment

begin_comment
comment|/*****************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_radio_button_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_radio_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|button
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_enum_radio_frame_new:  * @config:        Object to which property is attached.  * @property_name: Name of enum property controlled by the radio buttons.  * @title:         Label for the frame holding the buttons  * @minimum:       Smallest value of enum to be included.  * @maximum:       Largest value of enum to be included.  *  * Creates a group of radio buttons which function to set and display  * the specified enum property.  The @minimum and @maximum arguments  * allow only a subset of the enum to be used.  If the two arguments  * are equal (e.g., 0, 0), then the full range of the enum will be used.  *  * Return value: A #GimpFrame containing the radio buttons.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_enum_radio_frame_new (GObject * config,const gchar * property_name,const gchar * title,gint minimum,gint maximum)
name|gimp_prop_enum_radio_frame_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|title
parameter_list|,
name|gint
name|minimum
parameter_list|,
name|gint
name|maximum
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_ENUM
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|minimum
operator|!=
name|maximum
condition|)
block|{
name|frame
operator|=
name|gimp_enum_radio_frame_new_with_range
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|minimum
argument_list|,
name|maximum
argument_list|,
name|gtk_label_new
argument_list|(
name|title
argument_list|)
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_callback
argument_list|)
argument_list|,
name|config
argument_list|,
operator|&
name|button
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|frame
operator|=
name|gimp_enum_radio_frame_new
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|gtk_label_new
argument_list|(
name|title
argument_list|)
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_callback
argument_list|)
argument_list|,
name|config
argument_list|,
operator|&
name|button
argument_list|)
expr_stmt|;
block|}
name|gimp_int_radio_group_set_active
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|set_radio_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_notify
argument_list|)
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|frame
argument_list|)
argument_list|,
literal|"radio-button"
argument_list|,
name|button
argument_list|)
expr_stmt|;
return|return
name|frame
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_enum_radio_box_new:  * @config:        Object to which property is attached.  * @property_name: Name of enum property controlled by the radio buttons.  * @minimum:       Smallest value of enum to be included.  * @maximum:       Largest value of enum to be included.  *  * Creates a group of radio buttons which function to set and display  * the specified enum property.  The @minimum and @maximum arguments  * allow only a subset of the enum to be used.  If the two arguments  * are equal (e.g., 0, 0), then the full range of the enum will be used.  * If you want to assign a label to the group of radio buttons, use  * gimp_prop_enum_radio_frame_new() instead of this function.  *  * Return value: A #GtkVBox containing the radio buttons.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_enum_radio_box_new (GObject * config,const gchar * property_name,gint minimum,gint maximum)
name|gimp_prop_enum_radio_box_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gint
name|minimum
parameter_list|,
name|gint
name|maximum
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_ENUM
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|minimum
operator|!=
name|maximum
condition|)
block|{
name|vbox
operator|=
name|gimp_enum_radio_box_new_with_range
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|minimum
argument_list|,
name|maximum
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_callback
argument_list|)
argument_list|,
name|config
argument_list|,
operator|&
name|button
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|vbox
operator|=
name|gimp_enum_radio_box_new
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_callback
argument_list|)
argument_list|,
name|config
argument_list|,
operator|&
name|button
argument_list|)
expr_stmt|;
block|}
name|gimp_int_radio_group_set_active
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|set_radio_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_notify
argument_list|)
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|vbox
argument_list|)
argument_list|,
literal|"radio-button"
argument_list|,
name|button
argument_list|)
expr_stmt|;
return|return
name|vbox
return|;
block|}
end_function

begin_comment
comment|/***********/
end_comment

begin_comment
comment|/*  label  */
end_comment

begin_comment
comment|/***********/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_enum_label_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|label
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_enum_label_new:  * @config:         Object to which property is attached.  * @property_name:  Name of enum property to be displayed.  *  * Return value: The newly created #GimpEnumLabel widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_enum_label_new (GObject * config,const gchar * property_name)
name|gimp_prop_enum_label_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_ENUM
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|label
operator|=
name|gimp_enum_label_new
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|label
argument_list|)
argument_list|,
name|label
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_enum_label_notify
argument_list|)
argument_list|,
name|label
argument_list|)
expr_stmt|;
return|return
name|label
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_enum_label_notify (GObject * config,GParamSpec * param_spec,GtkWidget * label)
name|gimp_prop_enum_label_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|label
parameter_list|)
block|{
name|gint
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_enum_label_set_value
argument_list|(
name|GIMP_ENUM_LABEL
argument_list|(
name|label
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_boolean_radio_frame_new:  * @config:        Object to which property is attached.  * @property_name: Name of boolean property controlled by the radio buttons.  * @title:         Label for the frame.  * @true_text:     Label for the button corresponding to %TRUE.  * @false_text:    Label for the button corresponding to %FALSE.  *  * Creates a pair of radio buttons which function to set and display  * the specified boolean property.  *  * Return value: A #GimpFrame containing the radio buttons.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_boolean_radio_frame_new (GObject * config,const gchar * property_name,const gchar * title,const gchar * true_text,const gchar * false_text)
name|gimp_prop_boolean_radio_frame_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|title
parameter_list|,
specifier|const
name|gchar
modifier|*
name|true_text
parameter_list|,
specifier|const
name|gchar
modifier|*
name|false_text
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|gboolean
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_BOOLEAN
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gimp_int_radio_group_new
argument_list|(
name|TRUE
argument_list|,
name|title
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_callback
argument_list|)
argument_list|,
name|config
argument_list|,
name|value
argument_list|,
name|false_text
argument_list|,
name|FALSE
argument_list|,
operator|&
name|button
argument_list|,
name|true_text
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|set_radio_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_notify
argument_list|)
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|frame
argument_list|)
argument_list|,
literal|"radio-button"
argument_list|,
name|button
argument_list|)
expr_stmt|;
return|return
name|frame
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_enum_stock_box_new:  * @config:        Object to which property is attached.  * @property_name: Name of enum property controlled by the radio buttons.  * @stock_prefix:  The prefix of the group of stock ids to use.  * @minimum:       Smallest value of enum to be included.  * @maximum:       Largest value of enum to be included.  *  * Creates a horizontal box of radio buttons with stock icons, which  * function to set and display the value of the specified Enum  * property.  The stock_id for each icon is created by appending the  * enum_value's nick to the given @stock_prefix.  See  * gimp_enum_stock_box_new() for more information.  *  * Return value: A #libgimpwidgets-gimpenumstockbox containing the radio buttons.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_enum_stock_box_new (GObject * config,const gchar * property_name,const gchar * stock_prefix,gint minimum,gint maximum)
name|gimp_prop_enum_stock_box_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|stock_prefix
parameter_list|,
name|gint
name|minimum
parameter_list|,
name|gint
name|maximum
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|box
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_ENUM
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|minimum
operator|!=
name|maximum
condition|)
block|{
name|box
operator|=
name|gimp_enum_stock_box_new_with_range
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|minimum
argument_list|,
name|maximum
argument_list|,
name|stock_prefix
argument_list|,
name|GTK_ICON_SIZE_MENU
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_callback
argument_list|)
argument_list|,
name|config
argument_list|,
operator|&
name|button
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|box
operator|=
name|gimp_enum_stock_box_new
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|stock_prefix
argument_list|,
name|GTK_ICON_SIZE_MENU
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_callback
argument_list|)
argument_list|,
name|config
argument_list|,
operator|&
name|button
argument_list|)
expr_stmt|;
block|}
name|gimp_int_radio_group_set_active
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|set_radio_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_radio_button_notify
argument_list|)
argument_list|,
name|button
argument_list|)
expr_stmt|;
return|return
name|box
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_radio_button_callback (GtkWidget * widget,GObject * config)
name|gimp_prop_radio_button_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
if|if
condition|(
name|gtk_toggle_button_get_active
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
argument_list|)
condition|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gint
name|value
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|value
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"gimp-item-data"
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_radio_button_notify (GObject * config,GParamSpec * param_spec,GtkWidget * button)
name|gimp_prop_radio_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|button
parameter_list|)
block|{
name|gint
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_int_radio_group_set_active
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|button
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*****************/
end_comment

begin_comment
comment|/*  adjustments  */
end_comment

begin_comment
comment|/*****************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_adjustment_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_adjustment_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_spin_button_new:  * @config:            Object to which property is attached.  * @property_name:     Name of double property controlled by the spin button.  * @step_increment:    Step size.  * @page_increment:    Page size.  * @digits:            Number of digits after decimal point to display.  *  * Creates a spin button to set and display the value of the  * specified double property.  *  * Return value: A new #libgimpwidgets-gimpspinbutton.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_spin_button_new (GObject * config,const gchar * property_name,gdouble step_increment,gdouble page_increment,gint digits)
name|gimp_prop_spin_button_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gdouble
name|step_increment
parameter_list|,
name|gdouble
name|page_increment
parameter_list|,
name|gint
name|digits
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|spinbutton
decl_stmt|;
name|GtkObject
modifier|*
name|adjustment
decl_stmt|;
name|gdouble
name|value
decl_stmt|;
name|gdouble
name|lower
decl_stmt|;
name|gdouble
name|upper
decl_stmt|;
name|param_spec
operator|=
name|find_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|get_numeric_values
argument_list|(
name|config
argument_list|,
name|param_spec
argument_list|,
operator|&
name|value
argument_list|,
operator|&
name|lower
argument_list|,
operator|&
name|upper
argument_list|,
name|G_STRFUNC
argument_list|)
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
condition|)
name|digits
operator|=
literal|0
expr_stmt|;
name|spinbutton
operator|=
name|gimp_spin_button_new
argument_list|(
operator|&
name|adjustment
argument_list|,
name|value
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|,
name|step_increment
argument_list|,
name|page_increment
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
name|digits
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
name|spinbutton
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_notify
argument_list|)
argument_list|,
name|adjustment
argument_list|)
expr_stmt|;
return|return
name|spinbutton
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_hscale_new:  * @config:         Object to which property is attached.  * @property_name:  Name of integer or double property controlled by the scale.  * @step_increment: Step size.  * @page_increment: Page size.  * @digits:         Number of digits after decimal point to display.  *  * Creates a horizontal scale to control the value of the specified  * integer or double property.  *  * Return value: A new #GtkScale.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_hscale_new (GObject * config,const gchar * property_name,gdouble step_increment,gdouble page_increment,gint digits)
name|gimp_prop_hscale_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gdouble
name|step_increment
parameter_list|,
name|gdouble
name|page_increment
parameter_list|,
name|gint
name|digits
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|scale
decl_stmt|;
name|GtkObject
modifier|*
name|adjustment
decl_stmt|;
name|gdouble
name|value
decl_stmt|;
name|gdouble
name|lower
decl_stmt|;
name|gdouble
name|upper
decl_stmt|;
name|param_spec
operator|=
name|find_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|get_numeric_values
argument_list|(
name|config
argument_list|,
name|param_spec
argument_list|,
operator|&
name|value
argument_list|,
operator|&
name|lower
argument_list|,
operator|&
name|upper
argument_list|,
name|G_STRFUNC
argument_list|)
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
condition|)
name|digits
operator|=
literal|0
expr_stmt|;
name|adjustment
operator|=
name|gtk_adjustment_new
argument_list|(
name|value
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|,
name|step_increment
argument_list|,
name|page_increment
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|scale
operator|=
name|g_object_new
argument_list|(
name|GTK_TYPE_HSCALE
argument_list|,
literal|"adjustment"
argument_list|,
name|adjustment
argument_list|,
literal|"digits"
argument_list|,
name|digits
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
name|scale
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_notify
argument_list|)
argument_list|,
name|adjustment
argument_list|)
expr_stmt|;
return|return
name|scale
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_scale_entry_new:  * @config:         Object to which property is attached.  * @property_name:  Name of double property controlled by the spin button.  * @table:          The #GtkTable the widgets will be attached to.  * @column:         The column to start with.  * @row:            The row to attach the widgets.  * @label:          The text for the #GtkLabel which will appear left of  *                  the #GtkHScale.  * @step_increment: Step size.  * @page_increment: Page size.  * @digits:         Number of digits after decimal point to display.  * @limit_scale:    %TRUE if the range of possible values of the  *                  GtkSpinButton should be the same as of the GtkHScale.  * @lower_limit:    The spinbutton's lower boundary if @limit_scale is %FALSE.  * @upper_limit:    The spinbutton's upper boundary if @limit_scale is %FALSE.  *  * Creates a #libgimpwidgets-gimpscaleentry (slider and spin button)  * to set and display the value of the specified double property.  See  * gimp_scale_entry_new() for more information.  *  * Return value: The #GtkSpinButton's #GtkAdjustment.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkObject
modifier|*
DECL|function|gimp_prop_scale_entry_new (GObject * config,const gchar * property_name,GtkTable * table,gint column,gint row,const gchar * label,gdouble step_increment,gdouble page_increment,gint digits,gboolean limit_scale,gdouble lower_limit,gdouble upper_limit)
name|gimp_prop_scale_entry_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GtkTable
modifier|*
name|table
parameter_list|,
name|gint
name|column
parameter_list|,
name|gint
name|row
parameter_list|,
specifier|const
name|gchar
modifier|*
name|label
parameter_list|,
name|gdouble
name|step_increment
parameter_list|,
name|gdouble
name|page_increment
parameter_list|,
name|gint
name|digits
parameter_list|,
name|gboolean
name|limit_scale
parameter_list|,
name|gdouble
name|lower_limit
parameter_list|,
name|gdouble
name|upper_limit
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkObject
modifier|*
name|adjustment
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|tooltip
decl_stmt|;
name|gdouble
name|value
decl_stmt|;
name|gdouble
name|lower
decl_stmt|;
name|gdouble
name|upper
decl_stmt|;
name|param_spec
operator|=
name|find_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|get_numeric_values
argument_list|(
name|config
argument_list|,
name|param_spec
argument_list|,
operator|&
name|value
argument_list|,
operator|&
name|lower
argument_list|,
operator|&
name|upper
argument_list|,
name|G_STRFUNC
argument_list|)
condition|)
return|return
name|NULL
return|;
name|tooltip
operator|=
name|dgettext
argument_list|(
name|gimp_type_get_translation_domain
argument_list|(
name|G_OBJECT_TYPE
argument_list|(
name|config
argument_list|)
argument_list|)
argument_list|,
name|g_param_spec_get_blurb
argument_list|(
name|param_spec
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|limit_scale
condition|)
block|{
name|adjustment
operator|=
name|gimp_scale_entry_new
argument_list|(
name|table
argument_list|,
name|column
argument_list|,
name|row
argument_list|,
name|label
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
name|value
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|,
name|step_increment
argument_list|,
name|page_increment
argument_list|,
name|digits
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|tooltip
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|adjustment
operator|=
name|gimp_scale_entry_new
argument_list|(
name|table
argument_list|,
name|column
argument_list|,
name|row
argument_list|,
name|label
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
name|value
argument_list|,
name|lower_limit
argument_list|,
name|upper_limit
argument_list|,
name|step_increment
argument_list|,
name|page_increment
argument_list|,
name|digits
argument_list|,
name|FALSE
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|,
name|tooltip
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_notify
argument_list|)
argument_list|,
name|adjustment
argument_list|)
expr_stmt|;
return|return
name|adjustment
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_opacity_entry_new:  * @config:        Object to which property is attached.  * @property_name: Name of double property controlled by the spin button.  * @table:         The #GtkTable the widgets will be attached to.  * @column:        The column to start with.  * @row:           The row to attach the widgets.  * @label:         The text for the #GtkLabel which will appear left of the  *                 #GtkHScale.  *  * Creates a #libgimpwidgets-gimpscaleentry (slider and spin button)  * to set and display the value of the specified double property,  * which should represent an "opacity" variable with range 0 to 100.  * See gimp_scale_entry_new() for more information.  *  * Return value:  The #GtkSpinButton's #GtkAdjustment.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkObject
modifier|*
DECL|function|gimp_prop_opacity_entry_new (GObject * config,const gchar * property_name,GtkTable * table,gint column,gint row,const gchar * label)
name|gimp_prop_opacity_entry_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GtkTable
modifier|*
name|table
parameter_list|,
name|gint
name|column
parameter_list|,
name|gint
name|row
parameter_list|,
specifier|const
name|gchar
modifier|*
name|label
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkObject
modifier|*
name|adjustment
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|tooltip
decl_stmt|;
name|gdouble
name|value
decl_stmt|;
name|gdouble
name|lower
decl_stmt|;
name|gdouble
name|upper
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_DOUBLE
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|tooltip
operator|=
name|dgettext
argument_list|(
name|gimp_type_get_translation_domain
argument_list|(
name|G_OBJECT_TYPE
argument_list|(
name|config
argument_list|)
argument_list|)
argument_list|,
name|g_param_spec_get_blurb
argument_list|(
name|param_spec
argument_list|)
argument_list|)
expr_stmt|;
name|value
operator|*=
literal|100.0
expr_stmt|;
name|lower
operator|=
name|G_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
operator|->
name|minimum
operator|*
literal|100.0
expr_stmt|;
name|upper
operator|=
name|G_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
operator|->
name|maximum
operator|*
literal|100.0
expr_stmt|;
name|adjustment
operator|=
name|gimp_scale_entry_new
argument_list|(
name|table
argument_list|,
name|column
argument_list|,
name|row
argument_list|,
name|label
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
name|value
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|,
literal|1.0
argument_list|,
literal|10.0
argument_list|,
literal|1
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|tooltip
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"opacity-scale"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|TRUE
argument_list|)
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|adjustment
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_adjustment_notify
argument_list|)
argument_list|,
name|adjustment
argument_list|)
expr_stmt|;
return|return
name|adjustment
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_adjustment_callback (GtkAdjustment * adjustment,GObject * config)
name|gimp_prop_adjustment_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gdouble
name|value
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|value
operator|=
name|gtk_adjustment_get_value
argument_list|(
name|adjustment
argument_list|)
expr_stmt|;
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|(
name|gint
operator|)
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_UINT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|(
name|guint
operator|)
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_LONG
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|(
name|glong
operator|)
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_ULONG
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|(
name|gulong
operator|)
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_INT64
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|(
name|gint64
operator|)
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_UINT64
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|(
name|guint64
operator|)
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
if|if
condition|(
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"opacity-scale"
argument_list|)
argument_list|)
condition|)
name|value
operator|/=
literal|100.0
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_adjustment_notify (GObject * config,GParamSpec * param_spec,GtkAdjustment * adjustment)
name|gimp_prop_adjustment_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|)
block|{
name|gdouble
name|value
decl_stmt|;
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|gint
name|int_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|int_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|int_value
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_UINT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|guint
name|uint_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|uint_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|uint_value
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_LONG
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|glong
name|long_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|long_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|long_value
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_ULONG
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|gulong
name|ulong_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|ulong_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|ulong_value
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_INT64
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|gint64
name|int64_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|int64_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|int64_value
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_UINT64
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|guint64
name|uint64_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|uint64_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|#
directive|if
name|defined
name|_MSC_VER
operator|&&
operator|(
name|_MSC_VER
operator|<
literal|1300
operator|)
name|value
operator|=
operator|(
name|gint64
operator|)
name|uint64_value
expr_stmt|;
else|#
directive|else
name|value
operator|=
name|uint64_value
expr_stmt|;
endif|#
directive|endif
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"opacity-scale"
argument_list|)
argument_list|)
condition|)
name|value
operator|*=
literal|100.0
expr_stmt|;
block|}
else|else
block|{
name|g_warning
argument_list|(
literal|"%s: unhandled param spec of type %s"
argument_list|,
name|G_STRFUNC
argument_list|,
name|G_PARAM_SPEC_TYPE_NAME
argument_list|(
name|param_spec
argument_list|)
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|gtk_adjustment_get_value
argument_list|(
name|adjustment
argument_list|)
operator|!=
name|value
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|adjustment
argument_list|,
name|gimp_prop_adjustment_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gtk_adjustment_set_value
argument_list|(
name|adjustment
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|adjustment
argument_list|,
name|gimp_prop_adjustment_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*************/
end_comment

begin_comment
comment|/*  memsize  */
end_comment

begin_comment
comment|/*************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_memsize_callback
parameter_list|(
name|GimpMemsizeEntry
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_memsize_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpMemsizeEntry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_memsize_entry_new:  * @config:        Object to which property is attached.  * @property_name: Name of memsize property.  *  * Creates a #GimpMemsizeEntry (spin button and option menu) to set  * and display the value of the specified memsize property.  See  * gimp_memsize_entry_new() for more information.  *  * Return value:  A new #GimpMemsizeEntry.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_memsize_entry_new (GObject * config,const gchar * property_name)
name|gimp_prop_memsize_entry_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GParamSpecUInt64
modifier|*
name|uint64_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|entry
decl_stmt|;
name|guint64
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|GIMP_TYPE_PARAM_MEMSIZE
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|uint64_spec
operator|=
name|G_PARAM_SPEC_UINT64
argument_list|(
name|param_spec
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|uint64_spec
operator|->
name|minimum
operator|<=
name|GIMP_MAX_MEMSIZE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|uint64_spec
operator|->
name|maximum
operator|<=
name|GIMP_MAX_MEMSIZE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gimp_memsize_entry_new
argument_list|(
name|value
argument_list|,
name|uint64_spec
operator|->
name|minimum
argument_list|,
name|uint64_spec
operator|->
name|maximum
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
name|GIMP_MEMSIZE_ENTRY
argument_list|(
name|entry
argument_list|)
operator|->
name|spinbutton
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_memsize_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_memsize_notify
argument_list|)
argument_list|,
name|entry
argument_list|)
expr_stmt|;
return|return
name|entry
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_memsize_callback (GimpMemsizeEntry * entry,GObject * config)
name|gimp_prop_memsize_callback
parameter_list|(
name|GimpMemsizeEntry
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|g_return_if_fail
argument_list|(
name|G_IS_PARAM_SPEC_UINT64
argument_list|(
name|param_spec
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|gimp_memsize_entry_get_value
argument_list|(
name|entry
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_memsize_notify (GObject * config,GParamSpec * param_spec,GimpMemsizeEntry * entry)
name|gimp_prop_memsize_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpMemsizeEntry
modifier|*
name|entry
parameter_list|)
block|{
name|guint64
name|value
decl_stmt|;
name|g_return_if_fail
argument_list|(
name|G_IS_PARAM_SPEC_UINT64
argument_list|(
name|param_spec
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|entry
operator|->
name|value
operator|!=
name|value
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_memsize_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_memsize_entry_set_value
argument_list|(
name|entry
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_memsize_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/***********/
end_comment

begin_comment
comment|/*  label  */
end_comment

begin_comment
comment|/***********/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_label_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|label
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_label_new:  * @config:        Object to which property is attached.  * @property_name: Name of string property.  *  * Creates a #GtkLabel to display the value of the specified property.  * The property should be a string property or at least transformable  * to a string.  If the user should be able to edit the string, use  * gimp_prop_entry_new() instead.  *  * Return value:  A new #GtkLabel widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_label_new (GObject * config,const gchar * property_name)
name|gimp_prop_label_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|find_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|g_value_type_transformable
argument_list|(
name|param_spec
operator|->
name|value_type
argument_list|,
name|G_TYPE_STRING
argument_list|)
condition|)
block|{
name|g_warning
argument_list|(
literal|"%s: property '%s' of %s is not transformable to string"
argument_list|,
name|G_STRLOC
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|g_type_name
argument_list|(
name|param_spec
operator|->
name|owner_type
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
name|label
operator|=
name|gtk_label_new
argument_list|(
name|NULL
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|label
argument_list|)
argument_list|,
name|label
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_label_notify
argument_list|)
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|gimp_prop_label_notify
argument_list|(
name|config
argument_list|,
name|param_spec
argument_list|,
name|label
argument_list|)
expr_stmt|;
return|return
name|label
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_label_notify (GObject * config,GParamSpec * param_spec,GtkWidget * label)
name|gimp_prop_label_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|label
parameter_list|)
block|{
name|GValue
name|value
init|=
block|{
literal|0
block|, }
decl_stmt|;
name|g_value_init
argument_list|(
operator|&
name|value
argument_list|,
name|param_spec
operator|->
name|value_type
argument_list|)
expr_stmt|;
name|g_object_get_property
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|G_VALUE_HOLDS_STRING
argument_list|(
operator|&
name|value
argument_list|)
condition|)
block|{
specifier|const
name|gchar
modifier|*
name|str
init|=
name|g_value_get_string
argument_list|(
operator|&
name|value
argument_list|)
decl_stmt|;
name|gtk_label_set_text
argument_list|(
name|GTK_LABEL
argument_list|(
name|label
argument_list|)
argument_list|,
name|str
condition|?
name|str
else|:
literal|""
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|GValue
name|str_value
init|=
block|{
literal|0
block|, }
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|str
decl_stmt|;
name|g_value_init
argument_list|(
operator|&
name|str_value
argument_list|,
name|G_TYPE_STRING
argument_list|)
expr_stmt|;
name|g_value_transform
argument_list|(
operator|&
name|value
argument_list|,
operator|&
name|str_value
argument_list|)
expr_stmt|;
name|str
operator|=
name|g_value_get_string
argument_list|(
operator|&
name|str_value
argument_list|)
expr_stmt|;
name|gtk_label_set_text
argument_list|(
name|GTK_LABEL
argument_list|(
name|label
argument_list|)
argument_list|,
name|str
condition|?
name|str
else|:
literal|""
argument_list|)
expr_stmt|;
name|g_value_unset
argument_list|(
operator|&
name|str_value
argument_list|)
expr_stmt|;
block|}
name|g_value_unset
argument_list|(
operator|&
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/***********/
end_comment

begin_comment
comment|/*  entry  */
end_comment

begin_comment
comment|/***********/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_entry_callback
parameter_list|(
name|GtkWidget
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_entry_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_entry_new:  * @config:        Object to which property is attached.  * @property_name: Name of string property.  * @max_len:       Maximum allowed length of string.  *  * Creates a #GtkEntry to set and display the value of the specified  * string property.  *  * Return value:  A new #GtkEntry widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_entry_new (GObject * config,const gchar * property_name,gint max_len)
name|gimp_prop_entry_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gint
name|max_len
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|entry
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_STRING
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|entry
operator|=
name|gtk_entry_new
argument_list|()
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|value
condition|?
name|value
else|:
literal|""
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|max_len
operator|>
literal|0
condition|)
name|gtk_entry_set_max_length
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|max_len
argument_list|)
expr_stmt|;
name|gtk_editable_set_editable
argument_list|(
name|GTK_EDITABLE
argument_list|(
name|entry
argument_list|)
argument_list|,
name|param_spec
operator|->
name|flags
operator|&
name|G_PARAM_WRITABLE
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
name|entry
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_entry_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_entry_notify
argument_list|)
argument_list|,
name|entry
argument_list|)
expr_stmt|;
return|return
name|entry
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_entry_callback (GtkWidget * entry,GObject * config)
name|gimp_prop_entry_callback
parameter_list|(
name|GtkWidget
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|text
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|text
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_entry_notify
argument_list|,
name|entry
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|text
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_entry_notify
argument_list|,
name|entry
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_entry_notify (GObject * config,GParamSpec * param_spec,GtkWidget * entry)
name|gimp_prop_entry_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|entry
parameter_list|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_entry_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|value
condition|?
name|value
else|:
literal|""
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_entry_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*****************/
end_comment

begin_comment
comment|/*  text buffer  */
end_comment

begin_comment
comment|/*****************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_text_buffer_callback
parameter_list|(
name|GtkTextBuffer
modifier|*
name|text_buffer
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_text_buffer_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkTextBuffer
modifier|*
name|text_buffer
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_text_buffer_new:  * @config:        Object to which property is attached.  * @property_name: Name of string property.  * @max_len:       Maximum allowed length of text (in characters).  *  * Creates a #GtkTextBuffer to set and display the value of the  * specified string property.  Unless the string is expected to  * contain multiple lines or a large amount of text, use  * gimp_prop_entry_new() instead.  See #GtkTextView for information on  * how to insert a text buffer into a visible widget.  *  * If @max_len is 0 or negative, the text buffer allows an unlimited  * number of characters to be entered.  *  * Return value:  A new #GtkTextBuffer.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkTextBuffer
modifier|*
DECL|function|gimp_prop_text_buffer_new (GObject * config,const gchar * property_name,gint max_len)
name|gimp_prop_text_buffer_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gint
name|max_len
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkTextBuffer
modifier|*
name|text_buffer
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_STRING
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|text_buffer
operator|=
name|gtk_text_buffer_new
argument_list|(
name|NULL
argument_list|)
expr_stmt|;
name|gtk_text_buffer_set_text
argument_list|(
name|text_buffer
argument_list|,
name|value
condition|?
name|value
else|:
literal|""
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|max_len
operator|>
literal|0
condition|)
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|text_buffer
argument_list|)
argument_list|,
literal|"max-len"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|max_len
argument_list|)
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|text_buffer
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|text_buffer
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_text_buffer_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_text_buffer_notify
argument_list|)
argument_list|,
name|text_buffer
argument_list|)
expr_stmt|;
return|return
name|text_buffer
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_text_buffer_callback (GtkTextBuffer * text_buffer,GObject * config)
name|gimp_prop_text_buffer_callback
parameter_list|(
name|GtkTextBuffer
modifier|*
name|text_buffer
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkTextIter
name|start_iter
decl_stmt|;
name|GtkTextIter
name|end_iter
decl_stmt|;
name|gchar
modifier|*
name|text
decl_stmt|;
name|gint
name|max_len
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|text_buffer
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|gtk_text_buffer_get_bounds
argument_list|(
name|text_buffer
argument_list|,
operator|&
name|start_iter
argument_list|,
operator|&
name|end_iter
argument_list|)
expr_stmt|;
name|text
operator|=
name|gtk_text_buffer_get_text
argument_list|(
name|text_buffer
argument_list|,
operator|&
name|start_iter
argument_list|,
operator|&
name|end_iter
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|max_len
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|text_buffer
argument_list|)
argument_list|,
literal|"max-length"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|max_len
operator|>
literal|0
operator|&&
name|g_utf8_strlen
argument_list|(
name|text
argument_list|,
operator|-
literal|1
argument_list|)
operator|>
name|max_len
condition|)
block|{
name|g_message
argument_list|(
name|dngettext
argument_list|(
name|GETTEXT_PACKAGE
literal|"-libgimp"
argument_list|,
literal|"This text input field is limited to %d character."
argument_list|,
literal|"This text input field is limited to %d characters."
argument_list|,
name|max_len
argument_list|)
argument_list|,
name|max_len
argument_list|)
expr_stmt|;
name|gtk_text_buffer_get_iter_at_offset
argument_list|(
name|text_buffer
argument_list|,
operator|&
name|start_iter
argument_list|,
name|max_len
operator|-
literal|1
argument_list|)
expr_stmt|;
name|gtk_text_buffer_get_end_iter
argument_list|(
name|text_buffer
argument_list|,
operator|&
name|end_iter
argument_list|)
expr_stmt|;
comment|/*  this calls us recursively, but in the else branch  */
name|gtk_text_buffer_delete
argument_list|(
name|text_buffer
argument_list|,
operator|&
name|start_iter
argument_list|,
operator|&
name|end_iter
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_text_buffer_notify
argument_list|,
name|text_buffer
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|text
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_text_buffer_notify
argument_list|,
name|text_buffer
argument_list|)
expr_stmt|;
block|}
name|g_free
argument_list|(
name|text
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_text_buffer_notify (GObject * config,GParamSpec * param_spec,GtkTextBuffer * text_buffer)
name|gimp_prop_text_buffer_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkTextBuffer
modifier|*
name|text_buffer
parameter_list|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|text_buffer
argument_list|,
name|gimp_prop_text_buffer_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gtk_text_buffer_set_text
argument_list|(
name|text_buffer
argument_list|,
name|value
condition|?
name|value
else|:
literal|""
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|text_buffer
argument_list|,
name|gimp_prop_text_buffer_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/***********************/
end_comment

begin_comment
comment|/*  string combo box   */
end_comment

begin_comment
comment|/***********************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_string_combo_box_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_string_combo_box_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|widget
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_string_combo_box_new:  * @config:        Object to which property is attached.  * @property_name: Name of int property controlled by combo box.  * @model:         #GtkTreeStore holding list of values  * @id_column:     column in @store that holds string IDs  * @label_column:  column in @store that holds labels to use in the combo-box  *  * Creates a #GimpStringComboBox widget to display and set the  * specified property.  The contents of the widget are determined by  * @store.  *  * Return value: The newly created #GimpStringComboBox widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_string_combo_box_new (GObject * config,const gchar * property_name,GtkTreeModel * model,gint id_column,gint label_column)
name|gimp_prop_string_combo_box_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GtkTreeModel
modifier|*
name|model
parameter_list|,
name|gint
name|id_column
parameter_list|,
name|gint
name|label_column
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|combo_box
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|GTK_IS_TREE_MODEL
argument_list|(
name|model
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_STRING
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|combo_box
operator|=
name|gimp_string_combo_box_new
argument_list|(
name|model
argument_list|,
name|id_column
argument_list|,
name|label_column
argument_list|)
expr_stmt|;
name|gimp_string_combo_box_set_active
argument_list|(
name|GIMP_STRING_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|combo_box
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_string_combo_box_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|combo_box
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_string_combo_box_notify
argument_list|)
argument_list|,
name|combo_box
argument_list|)
expr_stmt|;
return|return
name|combo_box
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_string_combo_box_callback (GtkWidget * widget,GObject * config)
name|gimp_prop_string_combo_box_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|value
operator|=
name|gimp_string_combo_box_get_active
argument_list|(
name|GIMP_STRING_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_string_combo_box_notify (GObject * config,GParamSpec * param_spec,GtkWidget * combo_box)
name|gimp_prop_string_combo_box_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|combo_box
parameter_list|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|combo_box
argument_list|,
name|gimp_prop_string_combo_box_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_string_combo_box_set_active
argument_list|(
name|GIMP_STRING_COMBO_BOX
argument_list|(
name|combo_box
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|combo_box
argument_list|,
name|gimp_prop_string_combo_box_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*************************/
end_comment

begin_comment
comment|/*  file chooser button  */
end_comment

begin_comment
comment|/*************************/
end_comment

begin_function_decl
specifier|static
name|GtkWidget
modifier|*
name|gimp_prop_file_chooser_button_setup
parameter_list|(
name|GtkWidget
modifier|*
name|button
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_file_chooser_button_callback
parameter_list|(
name|GtkFileChooser
modifier|*
name|button
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_file_chooser_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkFileChooser
modifier|*
name|button
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_file_chooser_button_new:  * @config:        object to which property is attached.  * @property_name: name of path property.  * @title:         the title of the browse dialog.  * @action:        the open mode for the widget.  *  * Creates a #GtkFileChooserButton to edit the specified path property.  *  * Note that #GtkFileChooserButton implements the #GtkFileChooser  * interface; you can use the #GtkFileChooser API with it.  *  * Return value:  A new #GtkFileChooserButton.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_file_chooser_button_new (GObject * config,const gchar * property_name,const gchar * title,GtkFileChooserAction action)
name|gimp_prop_file_chooser_button_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|title
parameter_list|,
name|GtkFileChooserAction
name|action
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|GIMP_TYPE_PARAM_CONFIG_PATH
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|button
operator|=
name|gtk_file_chooser_button_new
argument_list|(
name|title
argument_list|,
name|action
argument_list|)
expr_stmt|;
return|return
name|gimp_prop_file_chooser_button_setup
argument_list|(
name|button
argument_list|,
name|config
argument_list|,
name|param_spec
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  * gimp_prop_file_chooser_button_new_with_dialog:  * @config:        object to which property is attached.  * @property_name: name of path property.  * @dialog:        the #GtkFileChooserDialog widget to use.  *  * Creates a #GtkFileChooserButton to edit the specified path property.  *  * The button uses @dialog as it's file-picking window. Note that @dialog  * must be a #GtkFileChooserDialog (or subclass) and must not have  * %GTK_DIALOG_DESTROY_WITH_PARENT set.  *  * Note that #GtkFileChooserButton implements the #GtkFileChooser  * interface; you can use the #GtkFileChooser API with it.  *  * Return value:  A new #GtkFileChooserButton.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_file_chooser_button_new_with_dialog (GObject * config,const gchar * property_name,GtkWidget * dialog)
name|gimp_prop_file_chooser_button_new_with_dialog
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GtkWidget
modifier|*
name|dialog
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|button
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|GTK_IS_FILE_CHOOSER_DIALOG
argument_list|(
name|dialog
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|GIMP_TYPE_PARAM_CONFIG_PATH
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|button
operator|=
name|gtk_file_chooser_button_new_with_dialog
argument_list|(
name|dialog
argument_list|)
expr_stmt|;
return|return
name|gimp_prop_file_chooser_button_setup
argument_list|(
name|button
argument_list|,
name|config
argument_list|,
name|param_spec
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|GtkWidget
modifier|*
DECL|function|gimp_prop_file_chooser_button_setup (GtkWidget * button,GObject * config,GParamSpec * param_spec)
name|gimp_prop_file_chooser_button_setup
parameter_list|(
name|GtkWidget
modifier|*
name|button
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|filename
operator|=
name|value
condition|?
name|gimp_config_path_expand
argument_list|(
name|value
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
else|:
name|NULL
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|filename
condition|)
block|{
name|gchar
modifier|*
name|basename
init|=
name|g_path_get_basename
argument_list|(
name|filename
argument_list|)
decl_stmt|;
if|if
condition|(
name|basename
operator|&&
name|basename
index|[
literal|0
index|]
operator|==
literal|'.'
condition|)
name|gtk_file_chooser_set_show_hidden
argument_list|(
name|GTK_FILE_CHOOSER
argument_list|(
name|button
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|basename
argument_list|)
expr_stmt|;
name|gtk_file_chooser_set_filename
argument_list|(
name|GTK_FILE_CHOOSER
argument_list|(
name|button
argument_list|)
argument_list|,
name|filename
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|,
name|button
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|button
argument_list|,
literal|"file-set"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_file_chooser_button_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_file_chooser_button_notify
argument_list|)
argument_list|,
name|button
argument_list|)
expr_stmt|;
return|return
name|button
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_file_chooser_button_callback (GtkFileChooser * button,GObject * config)
name|gimp_prop_file_chooser_button_callback
parameter_list|(
name|GtkFileChooser
modifier|*
name|button
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|utf8
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|button
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|value
operator|=
name|gtk_file_chooser_get_filename
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|utf8
operator|=
name|value
condition|?
name|g_filename_to_utf8
argument_list|(
name|value
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
else|:
name|NULL
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|value
operator|&&
name|utf8
operator|&&
name|strcmp
argument_list|(
name|value
argument_list|,
name|utf8
argument_list|)
operator|==
literal|0
operator|)
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_file_chooser_button_notify
argument_list|,
name|button
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|utf8
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_file_chooser_button_notify
argument_list|,
name|button
argument_list|)
expr_stmt|;
block|}
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|utf8
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_file_chooser_button_notify (GObject * config,GParamSpec * param_spec,GtkFileChooser * button)
name|gimp_prop_file_chooser_button_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkFileChooser
modifier|*
name|button
parameter_list|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|filename
operator|=
name|value
condition|?
name|gimp_config_path_expand
argument_list|(
name|value
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
else|:
name|NULL
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|button
argument_list|,
name|gimp_prop_file_chooser_button_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
if|if
condition|(
name|filename
condition|)
name|gtk_file_chooser_set_filename
argument_list|(
name|button
argument_list|,
name|filename
argument_list|)
expr_stmt|;
else|else
name|gtk_file_chooser_unselect_all
argument_list|(
name|button
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|button
argument_list|,
name|gimp_prop_file_chooser_button_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*****************/
end_comment

begin_comment
comment|/*  path editor  */
end_comment

begin_comment
comment|/*****************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_path_editor_path_callback
parameter_list|(
name|GimpPathEditor
modifier|*
name|editor
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_path_editor_writable_callback
parameter_list|(
name|GimpPathEditor
modifier|*
name|editor
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_path_editor_path_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpPathEditor
modifier|*
name|editor
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_path_editor_writable_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpPathEditor
modifier|*
name|editor
parameter_list|)
function_decl|;
end_function_decl

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_path_editor_new (GObject * config,const gchar * path_property_name,const gchar * writable_property_name,const gchar * filesel_title)
name|gimp_prop_path_editor_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|writable_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|filesel_title
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|path_param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|writable_param_spec
init|=
name|NULL
decl_stmt|;
name|GtkWidget
modifier|*
name|editor
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|G_IS_OBJECT
argument_list|(
name|config
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|path_property_name
operator|!=
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|path_param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|path_property_name
argument_list|,
name|GIMP_TYPE_PARAM_CONFIG_PATH
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|path_param_spec
condition|)
return|return
name|NULL
return|;
if|if
condition|(
name|writable_property_name
condition|)
block|{
name|writable_param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|writable_property_name
argument_list|,
name|GIMP_TYPE_PARAM_CONFIG_PATH
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|writable_param_spec
condition|)
return|return
name|NULL
return|;
block|}
name|g_object_get
argument_list|(
name|config
argument_list|,
name|path_property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|filename
operator|=
name|value
condition|?
name|gimp_config_path_expand
argument_list|(
name|value
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
else|:
name|NULL
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|editor
operator|=
name|gimp_path_editor_new
argument_list|(
name|filesel_title
argument_list|,
name|filename
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
if|if
condition|(
name|writable_property_name
condition|)
block|{
name|g_object_get
argument_list|(
name|config
argument_list|,
name|writable_property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|filename
operator|=
name|value
condition|?
name|gimp_config_path_expand
argument_list|(
name|value
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
else|:
name|NULL
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|gimp_path_editor_set_writable_path
argument_list|(
name|GIMP_PATH_EDITOR
argument_list|(
name|editor
argument_list|)
argument_list|,
name|filename
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|editor
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-path"
argument_list|,
name|path_param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|editor
argument_list|,
literal|"path-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_path_editor_path_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|path_property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_path_editor_path_notify
argument_list|)
argument_list|,
name|editor
argument_list|)
expr_stmt|;
if|if
condition|(
name|writable_property_name
condition|)
block|{
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|editor
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-writable"
argument_list|,
name|writable_param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|editor
argument_list|,
literal|"writable-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_path_editor_writable_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|writable_property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_path_editor_writable_notify
argument_list|)
argument_list|,
name|editor
argument_list|)
expr_stmt|;
block|}
return|return
name|editor
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_path_editor_path_callback (GimpPathEditor * editor,GObject * config)
name|gimp_prop_path_editor_path_callback
parameter_list|(
name|GimpPathEditor
modifier|*
name|editor
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|path_param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|writable_param_spec
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|utf8
decl_stmt|;
name|path_param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|editor
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-path"
argument_list|)
expr_stmt|;
name|writable_param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|editor
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-writable"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|path_param_spec
condition|)
return|return;
name|value
operator|=
name|gimp_path_editor_get_path
argument_list|(
name|editor
argument_list|)
expr_stmt|;
name|utf8
operator|=
name|g_filename_to_utf8
argument_list|(
name|value
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_path_editor_path_notify
argument_list|,
name|editor
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|path_param_spec
operator|->
name|name
argument_list|,
name|utf8
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_path_editor_path_notify
argument_list|,
name|editor
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|utf8
argument_list|)
expr_stmt|;
if|if
condition|(
name|writable_param_spec
condition|)
block|{
name|value
operator|=
name|gimp_path_editor_get_writable_path
argument_list|(
name|editor
argument_list|)
expr_stmt|;
name|utf8
operator|=
name|g_filename_to_utf8
argument_list|(
name|value
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_path_editor_writable_notify
argument_list|,
name|editor
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|writable_param_spec
operator|->
name|name
argument_list|,
name|utf8
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_path_editor_writable_notify
argument_list|,
name|editor
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|utf8
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_path_editor_writable_callback (GimpPathEditor * editor,GObject * config)
name|gimp_prop_path_editor_writable_callback
parameter_list|(
name|GimpPathEditor
modifier|*
name|editor
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|utf8
decl_stmt|;
name|param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|editor
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-writable"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|value
operator|=
name|gimp_path_editor_get_writable_path
argument_list|(
name|editor
argument_list|)
expr_stmt|;
name|utf8
operator|=
name|g_filename_to_utf8
argument_list|(
name|value
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_path_editor_writable_notify
argument_list|,
name|editor
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|utf8
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_path_editor_writable_notify
argument_list|,
name|editor
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|utf8
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_path_editor_path_notify (GObject * config,GParamSpec * param_spec,GimpPathEditor * editor)
name|gimp_prop_path_editor_path_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpPathEditor
modifier|*
name|editor
parameter_list|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|filename
operator|=
name|value
condition|?
name|gimp_config_path_expand
argument_list|(
name|value
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
else|:
name|NULL
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|editor
argument_list|,
name|gimp_prop_path_editor_path_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_path_editor_set_path
argument_list|(
name|editor
argument_list|,
name|filename
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|editor
argument_list|,
name|gimp_prop_path_editor_path_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_path_editor_writable_notify (GObject * config,GParamSpec * param_spec,GimpPathEditor * editor)
name|gimp_prop_path_editor_writable_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpPathEditor
modifier|*
name|editor
parameter_list|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|filename
operator|=
name|value
condition|?
name|gimp_config_path_expand
argument_list|(
name|value
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
else|:
name|NULL
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|editor
argument_list|,
name|gimp_prop_path_editor_writable_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_path_editor_set_writable_path
argument_list|(
name|editor
argument_list|,
name|filename
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|editor
argument_list|,
name|gimp_prop_path_editor_writable_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/***************/
end_comment

begin_comment
comment|/*  sizeentry  */
end_comment

begin_comment
comment|/***************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_size_entry_callback
parameter_list|(
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_size_entry_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_size_entry_notify_unit
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gint
name|gimp_prop_size_entry_num_chars
parameter_list|(
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_size_entry_new:  * @config:             Object to which property is attached.  * @property_name:      Name of int or double property.  * @property_is_pixel:  When %TRUE, the property value is in pixels,  *                      and in the selected unit otherwise.  * @unit_property_name: Name of unit property.  * @unit_format:        A printf-like unit-format string as is used with  *                      gimp_unit_menu_new().  * @update_policy:      How the automatic pixel<-> real-world-unit  *                      calculations should be done.  * @resolution:         The resolution (in dpi) for the field.  *  * Creates a #GimpSizeEntry to set and display the specified double or  * int property, and its associated unit property.  Note that this  * function is only suitable for creating a size entry holding a  * single value.  Use gimp_prop_coordinates_new() to create a size  * entry holding two values.  *  * Return value:  A new #GimpSizeEntry widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_size_entry_new (GObject * config,const gchar * property_name,gboolean property_is_pixel,const gchar * unit_property_name,const gchar * unit_format,GimpSizeEntryUpdatePolicy update_policy,gdouble resolution)
name|gimp_prop_size_entry_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gboolean
name|property_is_pixel
parameter_list|,
specifier|const
name|gchar
modifier|*
name|unit_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|unit_format
parameter_list|,
name|GimpSizeEntryUpdatePolicy
name|update_policy
parameter_list|,
name|gdouble
name|resolution
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|entry
decl_stmt|;
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|unit_param_spec
decl_stmt|;
name|gboolean
name|show_pixels
decl_stmt|;
name|gboolean
name|show_percent
decl_stmt|;
name|gdouble
name|value
decl_stmt|;
name|gdouble
name|lower
decl_stmt|;
name|gdouble
name|upper
decl_stmt|;
name|GimpUnit
name|unit_value
decl_stmt|;
name|param_spec
operator|=
name|find_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|get_numeric_values
argument_list|(
name|config
argument_list|,
name|param_spec
argument_list|,
operator|&
name|value
argument_list|,
operator|&
name|lower
argument_list|,
operator|&
name|upper
argument_list|,
name|G_STRFUNC
argument_list|)
condition|)
return|return
name|NULL
return|;
if|if
condition|(
name|unit_property_name
condition|)
block|{
name|GValue
name|value
init|=
block|{
literal|0
block|}
decl_stmt|;
name|unit_param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|unit_property_name
argument_list|,
name|GIMP_TYPE_PARAM_UNIT
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|unit_param_spec
condition|)
return|return
name|NULL
return|;
name|g_value_init
argument_list|(
operator|&
name|value
argument_list|,
name|unit_param_spec
operator|->
name|value_type
argument_list|)
expr_stmt|;
name|g_value_set_int
argument_list|(
operator|&
name|value
argument_list|,
name|GIMP_UNIT_PIXEL
argument_list|)
expr_stmt|;
name|show_pixels
operator|=
operator|(
name|g_param_value_validate
argument_list|(
name|unit_param_spec
argument_list|,
operator|&
name|value
argument_list|)
operator|==
name|FALSE
operator|)
expr_stmt|;
name|g_value_set_int
argument_list|(
operator|&
name|value
argument_list|,
name|GIMP_UNIT_PERCENT
argument_list|)
expr_stmt|;
name|show_percent
operator|=
operator|(
name|g_param_value_validate
argument_list|(
name|unit_param_spec
argument_list|,
operator|&
name|value
argument_list|)
operator|==
name|FALSE
operator|)
expr_stmt|;
name|g_value_unset
argument_list|(
operator|&
name|value
argument_list|)
expr_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|unit_property_name
argument_list|,
operator|&
name|unit_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|unit_param_spec
operator|=
name|NULL
expr_stmt|;
name|unit_value
operator|=
name|GIMP_UNIT_INCH
expr_stmt|;
name|show_pixels
operator|=
name|FALSE
expr_stmt|;
name|show_percent
operator|=
name|FALSE
expr_stmt|;
block|}
name|entry
operator|=
name|gimp_size_entry_new
argument_list|(
literal|1
argument_list|,
name|unit_value
argument_list|,
name|unit_format
argument_list|,
name|show_pixels
argument_list|,
name|show_percent
argument_list|,
name|FALSE
argument_list|,
name|gimp_prop_size_entry_num_chars
argument_list|(
name|lower
argument_list|,
name|upper
argument_list|)
argument_list|,
name|update_policy
argument_list|)
expr_stmt|;
name|gtk_table_set_col_spacing
argument_list|(
name|GTK_TABLE
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|NULL
argument_list|,
name|gimp_size_entry_get_help_widget
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|)
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit_param_spec
condition|)
name|set_param_spec
argument_list|(
name|NULL
argument_list|,
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
operator|->
name|unitmenu
argument_list|,
name|unit_param_spec
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_unit
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|unit_value
argument_list|)
expr_stmt|;
if|if
condition|(
name|update_policy
operator|==
name|GIMP_SIZE_ENTRY_UPDATE_SIZE
condition|)
name|gimp_size_entry_set_resolution
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|resolution
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_value_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|lower
argument_list|,
name|upper
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"value-is-pixel"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|property_is_pixel
condition|?
name|TRUE
else|:
name|FALSE
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|property_is_pixel
condition|)
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|value
argument_list|)
expr_stmt|;
else|else
name|gimp_size_entry_set_value
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec"
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"refval-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_size_entry_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_size_entry_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_size_entry_notify
argument_list|)
argument_list|,
name|entry
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit_property_name
condition|)
block|{
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-unit"
argument_list|,
name|unit_param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"unit-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_size_entry_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|unit_property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_size_entry_notify_unit
argument_list|)
argument_list|,
name|entry
argument_list|)
expr_stmt|;
block|}
return|return
name|entry
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_size_entry_callback (GimpSizeEntry * entry,GObject * config)
name|gimp_prop_size_entry_callback
parameter_list|(
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|unit_param_spec
decl_stmt|;
name|gdouble
name|value
decl_stmt|;
name|gboolean
name|value_is_pixel
decl_stmt|;
name|GimpUnit
name|unit_value
decl_stmt|;
name|param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|unit_param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-unit"
argument_list|)
expr_stmt|;
name|value_is_pixel
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"value-is-pixel"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|value_is_pixel
condition|)
name|value
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|)
expr_stmt|;
else|else
name|value
operator|=
name|gimp_size_entry_get_value
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|unit_value
operator|=
name|gimp_size_entry_get_unit
argument_list|(
name|entry
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit_param_spec
condition|)
block|{
name|GimpUnit
name|old_unit
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|unit_param_spec
operator|->
name|name
argument_list|,
operator|&
name|old_unit
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit_value
operator|==
name|old_unit
condition|)
name|unit_param_spec
operator|=
name|NULL
expr_stmt|;
block|}
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|ROUND
argument_list|(
name|value
argument_list|)
argument_list|,
name|unit_param_spec
condition|?
name|unit_param_spec
operator|->
name|name
else|:
name|NULL
argument_list|,
name|unit_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|value
argument_list|,
name|unit_param_spec
condition|?
name|unit_param_spec
operator|->
name|name
else|:
name|NULL
argument_list|,
name|unit_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_size_entry_notify (GObject * config,GParamSpec * param_spec,GimpSizeEntry * entry)
name|gimp_prop_size_entry_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
block|{
name|gdouble
name|value
decl_stmt|;
name|gdouble
name|entry_value
decl_stmt|;
name|gboolean
name|value_is_pixel
decl_stmt|;
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|gint
name|int_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|int_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|int_value
expr_stmt|;
block|}
else|else
block|{
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
name|value_is_pixel
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"value-is-pixel"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|value_is_pixel
condition|)
name|entry_value
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|)
expr_stmt|;
else|else
name|entry_value
operator|=
name|gimp_size_entry_get_value
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
operator|!=
name|entry_value
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_size_entry_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
if|if
condition|(
name|value_is_pixel
condition|)
name|gimp_size_entry_set_refval
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|,
name|value
argument_list|)
expr_stmt|;
else|else
name|gimp_size_entry_set_value
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_size_entry_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_size_entry_notify_unit (GObject * config,GParamSpec * param_spec,GimpSizeEntry * entry)
name|gimp_prop_size_entry_notify_unit
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
block|{
name|GimpUnit
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
operator|!=
name|gimp_size_entry_get_unit
argument_list|(
name|entry
argument_list|)
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_size_entry_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_unit
argument_list|(
name|entry
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_size_entry_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|gint
DECL|function|gimp_prop_size_entry_num_chars (gdouble lower,gdouble upper)
name|gimp_prop_size_entry_num_chars
parameter_list|(
name|gdouble
name|lower
parameter_list|,
name|gdouble
name|upper
parameter_list|)
block|{
name|gint
name|lower_chars
init|=
name|log
argument_list|(
name|fabs
argument_list|(
name|lower
argument_list|)
argument_list|)
operator|/
name|log
argument_list|(
literal|10
argument_list|)
decl_stmt|;
name|gint
name|upper_chars
init|=
name|log
argument_list|(
name|fabs
argument_list|(
name|upper
argument_list|)
argument_list|)
operator|/
name|log
argument_list|(
literal|10
argument_list|)
decl_stmt|;
if|if
condition|(
name|lower
operator|<
literal|0.0
condition|)
name|lower_chars
operator|++
expr_stmt|;
if|if
condition|(
name|upper
operator|<
literal|0.0
condition|)
name|upper_chars
operator|++
expr_stmt|;
return|return
name|MAX
argument_list|(
name|lower_chars
argument_list|,
name|upper_chars
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*****************/
end_comment

begin_comment
comment|/*  coordinates  */
end_comment

begin_comment
comment|/*****************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_coordinates_callback
parameter_list|(
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_coordinates_notify_x
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_coordinates_notify_y
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_coordinates_notify_unit
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_coordinates_new:  * @config:             Object to which property is attached.  * @x_property_name:    Name of int or double property for X coordinate.  * @y_property_name:    Name of int or double property for Y coordinate.  * @unit_property_name: Name of unit property.  * @unit_format:        A printf-like unit-format string as is used with  *                      gimp_unit_menu_new().  * @update_policy:      How the automatic pixel<-> real-world-unit  *                      calculations should be done.  * @xresolution:        The resolution (in dpi) for the X coordinate.  * @yresolution:        The resolution (in dpi) for the Y coordinate.  * @has_chainbutton:    Whether to add a chainbutton to the size entry.  *  * Creates a #GimpSizeEntry to set and display two double or int  * properties, which will usually represent X and Y coordinates, and  * their associated unit property.  *  * Return value:  A new #GimpSizeEntry widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_coordinates_new (GObject * config,const gchar * x_property_name,const gchar * y_property_name,const gchar * unit_property_name,const gchar * unit_format,GimpSizeEntryUpdatePolicy update_policy,gdouble xresolution,gdouble yresolution,gboolean has_chainbutton)
name|gimp_prop_coordinates_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|x_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|y_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|unit_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|unit_format
parameter_list|,
name|GimpSizeEntryUpdatePolicy
name|update_policy
parameter_list|,
name|gdouble
name|xresolution
parameter_list|,
name|gdouble
name|yresolution
parameter_list|,
name|gboolean
name|has_chainbutton
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|entry
decl_stmt|;
name|GtkWidget
modifier|*
name|chainbutton
init|=
name|NULL
decl_stmt|;
name|entry
operator|=
name|gimp_size_entry_new
argument_list|(
literal|2
argument_list|,
name|GIMP_UNIT_INCH
argument_list|,
name|unit_format
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
name|TRUE
argument_list|,
literal|10
argument_list|,
name|update_policy
argument_list|)
expr_stmt|;
if|if
condition|(
name|has_chainbutton
condition|)
block|{
name|chainbutton
operator|=
name|gimp_chain_button_new
argument_list|(
name|GIMP_CHAIN_BOTTOM
argument_list|)
expr_stmt|;
name|gtk_table_attach_defaults
argument_list|(
name|GTK_TABLE
argument_list|(
name|entry
argument_list|)
argument_list|,
name|chainbutton
argument_list|,
literal|1
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|chainbutton
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|gimp_prop_coordinates_connect
argument_list|(
name|config
argument_list|,
name|x_property_name
argument_list|,
name|y_property_name
argument_list|,
name|unit_property_name
argument_list|,
name|entry
argument_list|,
name|chainbutton
argument_list|,
name|xresolution
argument_list|,
name|yresolution
argument_list|)
condition|)
block|{
name|gtk_widget_destroy
argument_list|(
name|entry
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
return|return
name|entry
return|;
block|}
end_function

begin_function
name|gboolean
DECL|function|gimp_prop_coordinates_connect (GObject * config,const gchar * x_property_name,const gchar * y_property_name,const gchar * unit_property_name,GtkWidget * entry,GtkWidget * chainbutton,gdouble xresolution,gdouble yresolution)
name|gimp_prop_coordinates_connect
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|x_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|y_property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|unit_property_name
parameter_list|,
name|GtkWidget
modifier|*
name|entry
parameter_list|,
name|GtkWidget
modifier|*
name|chainbutton
parameter_list|,
name|gdouble
name|xresolution
parameter_list|,
name|gdouble
name|yresolution
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|x_param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|y_param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|unit_param_spec
decl_stmt|;
name|gdouble
name|x_value
decl_stmt|,
name|x_lower
decl_stmt|,
name|x_upper
decl_stmt|;
name|gdouble
name|y_value
decl_stmt|,
name|y_lower
decl_stmt|,
name|y_upper
decl_stmt|;
name|GimpUnit
name|unit_value
decl_stmt|;
name|gdouble
modifier|*
name|old_x_value
decl_stmt|;
name|gdouble
modifier|*
name|old_y_value
decl_stmt|;
name|GimpUnit
modifier|*
name|old_unit_value
decl_stmt|;
name|gboolean
name|chain_checked
decl_stmt|;
name|g_return_val_if_fail
argument_list|(
name|GIMP_IS_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
operator|->
name|number_of_fields
operator|==
literal|2
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|g_return_val_if_fail
argument_list|(
name|chainbutton
operator|==
name|NULL
operator|||
name|GIMP_IS_CHAIN_BUTTON
argument_list|(
name|chainbutton
argument_list|)
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|x_param_spec
operator|=
name|find_param_spec
argument_list|(
name|config
argument_list|,
name|x_property_name
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|x_param_spec
condition|)
return|return
name|FALSE
return|;
name|y_param_spec
operator|=
name|find_param_spec
argument_list|(
name|config
argument_list|,
name|y_property_name
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|y_param_spec
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
operator|!
name|get_numeric_values
argument_list|(
name|config
argument_list|,
name|x_param_spec
argument_list|,
operator|&
name|x_value
argument_list|,
operator|&
name|x_lower
argument_list|,
operator|&
name|x_upper
argument_list|,
name|G_STRFUNC
argument_list|)
operator|||
operator|!
name|get_numeric_values
argument_list|(
name|config
argument_list|,
name|y_param_spec
argument_list|,
operator|&
name|y_value
argument_list|,
operator|&
name|y_lower
argument_list|,
operator|&
name|y_upper
argument_list|,
name|G_STRFUNC
argument_list|)
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|unit_property_name
condition|)
block|{
name|unit_param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|unit_property_name
argument_list|,
name|GIMP_TYPE_PARAM_UNIT
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|unit_param_spec
condition|)
return|return
name|FALSE
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|unit_property_name
argument_list|,
operator|&
name|unit_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|unit_param_spec
operator|=
name|NULL
expr_stmt|;
name|unit_value
operator|=
name|GIMP_UNIT_INCH
expr_stmt|;
block|}
name|set_param_spec
argument_list|(
name|NULL
argument_list|,
name|gimp_size_entry_get_help_widget
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|)
argument_list|,
name|x_param_spec
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|NULL
argument_list|,
name|gimp_size_entry_get_help_widget
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|1
argument_list|)
argument_list|,
name|y_param_spec
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit_param_spec
condition|)
name|set_param_spec
argument_list|(
name|NULL
argument_list|,
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
operator|->
name|unitmenu
argument_list|,
name|unit_param_spec
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_unit
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|unit_value
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
operator|->
name|update_policy
condition|)
block|{
case|case
name|GIMP_SIZE_ENTRY_UPDATE_SIZE
case|:
name|gimp_size_entry_set_resolution
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|xresolution
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_resolution
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|yresolution
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|chain_checked
operator|=
operator|(
name|ABS
argument_list|(
name|x_value
operator|-
name|y_value
argument_list|)
operator|<
literal|1
operator|)
expr_stmt|;
break|break;
case|case
name|GIMP_SIZE_ENTRY_UPDATE_RESOLUTION
case|:
name|chain_checked
operator|=
operator|(
name|ABS
argument_list|(
name|x_value
operator|-
name|y_value
argument_list|)
operator|<
name|GIMP_MIN_RESOLUTION
operator|)
expr_stmt|;
break|break;
default|default:
name|chain_checked
operator|=
operator|(
name|x_value
operator|==
name|y_value
operator|)
expr_stmt|;
break|break;
block|}
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|x_lower
argument_list|,
name|x_upper
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval_boundaries
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|y_lower
argument_list|,
name|y_upper
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|0
argument_list|,
name|x_value
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|GIMP_SIZE_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|1
argument_list|,
name|y_value
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-x"
argument_list|,
name|x_param_spec
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-y"
argument_list|,
name|y_param_spec
argument_list|)
expr_stmt|;
name|old_x_value
operator|=
name|g_new0
argument_list|(
name|gdouble
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|*
name|old_x_value
operator|=
name|x_value
expr_stmt|;
name|g_object_set_data_full
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-x-value"
argument_list|,
name|old_x_value
argument_list|,
operator|(
name|GDestroyNotify
operator|)
name|g_free
argument_list|)
expr_stmt|;
name|old_y_value
operator|=
name|g_new0
argument_list|(
name|gdouble
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|*
name|old_y_value
operator|=
name|y_value
expr_stmt|;
name|g_object_set_data_full
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-y-value"
argument_list|,
name|old_y_value
argument_list|,
operator|(
name|GDestroyNotify
operator|)
name|g_free
argument_list|)
expr_stmt|;
if|if
condition|(
name|chainbutton
condition|)
block|{
if|if
condition|(
name|chain_checked
condition|)
name|gimp_chain_button_set_active
argument_list|(
name|GIMP_CHAIN_BUTTON
argument_list|(
name|chainbutton
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"chainbutton"
argument_list|,
name|chainbutton
argument_list|)
expr_stmt|;
block|}
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"value-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_coordinates_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"refval-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_coordinates_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|x_property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_coordinates_notify_x
argument_list|)
argument_list|,
name|entry
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|y_property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_coordinates_notify_y
argument_list|)
argument_list|,
name|entry
argument_list|)
expr_stmt|;
if|if
condition|(
name|unit_property_name
condition|)
block|{
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-unit"
argument_list|,
name|unit_param_spec
argument_list|)
expr_stmt|;
name|old_unit_value
operator|=
name|g_new0
argument_list|(
name|GimpUnit
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|*
name|old_unit_value
operator|=
name|unit_value
expr_stmt|;
name|g_object_set_data_full
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-unit-value"
argument_list|,
name|old_unit_value
argument_list|,
operator|(
name|GDestroyNotify
operator|)
name|g_free
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry
argument_list|,
literal|"unit-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_coordinates_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|unit_property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_coordinates_notify_unit
argument_list|)
argument_list|,
name|entry
argument_list|)
expr_stmt|;
block|}
return|return
name|TRUE
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_coordinates_callback (GimpSizeEntry * entry,GObject * config)
name|gimp_prop_coordinates_callback
parameter_list|(
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|x_param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|y_param_spec
decl_stmt|;
name|GParamSpec
modifier|*
name|unit_param_spec
decl_stmt|;
name|gdouble
name|x_value
decl_stmt|;
name|gdouble
name|y_value
decl_stmt|;
name|GimpUnit
name|unit_value
decl_stmt|;
name|gdouble
modifier|*
name|old_x_value
decl_stmt|;
name|gdouble
modifier|*
name|old_y_value
decl_stmt|;
name|GimpUnit
modifier|*
name|old_unit_value
decl_stmt|;
name|gboolean
name|backwards
decl_stmt|;
name|x_param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-x"
argument_list|)
expr_stmt|;
name|y_param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-y"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|x_param_spec
operator|||
operator|!
name|y_param_spec
condition|)
return|return;
name|unit_param_spec
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"gimp-config-param-spec-unit"
argument_list|)
expr_stmt|;
name|x_value
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|y_value
operator|=
name|gimp_size_entry_get_refval
argument_list|(
name|entry
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|unit_value
operator|=
name|gimp_size_entry_get_unit
argument_list|(
name|entry
argument_list|)
expr_stmt|;
name|old_x_value
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-x-value"
argument_list|)
expr_stmt|;
name|old_y_value
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-y-value"
argument_list|)
expr_stmt|;
name|old_unit_value
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-unit-value"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|old_x_value
operator|||
operator|!
name|old_y_value
operator|||
operator|(
name|unit_param_spec
operator|&&
operator|!
name|old_unit_value
operator|)
condition|)
return|return;
comment|/*    * FIXME: if the entry was created using gimp_coordinates_new, then    * the chain button is handled automatically and the following block    * of code is unnecessary (and, in fact, redundant).    */
if|if
condition|(
name|x_value
operator|!=
name|y_value
condition|)
block|{
name|GtkWidget
modifier|*
name|chainbutton
decl_stmt|;
name|chainbutton
operator|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"chainbutton"
argument_list|)
expr_stmt|;
if|if
condition|(
name|chainbutton
operator|&&
name|gimp_chain_button_get_active
argument_list|(
name|GIMP_CHAIN_BUTTON
argument_list|(
name|chainbutton
argument_list|)
argument_list|)
operator|&&
operator|!
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|chainbutton
argument_list|)
argument_list|,
literal|"constrains-ratio"
argument_list|)
condition|)
block|{
if|if
condition|(
name|x_value
operator|!=
operator|*
name|old_x_value
condition|)
name|y_value
operator|=
name|x_value
expr_stmt|;
elseif|else
if|if
condition|(
name|y_value
operator|!=
operator|*
name|old_y_value
condition|)
name|x_value
operator|=
name|y_value
expr_stmt|;
block|}
block|}
name|backwards
operator|=
operator|(
operator|*
name|old_x_value
operator|==
name|x_value
operator|)
expr_stmt|;
if|if
condition|(
operator|*
name|old_x_value
operator|==
name|x_value
operator|&&
operator|*
name|old_y_value
operator|==
name|y_value
operator|&&
operator|(
name|old_unit_value
operator|==
name|NULL
operator|||
operator|*
name|old_unit_value
operator|==
name|unit_value
operator|)
condition|)
return|return;
operator|*
name|old_x_value
operator|=
name|x_value
expr_stmt|;
operator|*
name|old_y_value
operator|=
name|y_value
expr_stmt|;
if|if
condition|(
name|old_unit_value
condition|)
operator|*
name|old_unit_value
operator|=
name|unit_value
expr_stmt|;
if|if
condition|(
name|unit_param_spec
condition|)
name|g_object_set
argument_list|(
name|config
argument_list|,
name|unit_param_spec
operator|->
name|name
argument_list|,
name|unit_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|x_param_spec
argument_list|)
operator|&&
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|y_param_spec
argument_list|)
condition|)
block|{
if|if
condition|(
name|backwards
condition|)
name|g_object_set
argument_list|(
name|config
argument_list|,
name|y_param_spec
operator|->
name|name
argument_list|,
name|ROUND
argument_list|(
name|y_value
argument_list|)
argument_list|,
name|x_param_spec
operator|->
name|name
argument_list|,
name|ROUND
argument_list|(
name|x_value
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
else|else
name|g_object_set
argument_list|(
name|config
argument_list|,
name|x_param_spec
operator|->
name|name
argument_list|,
name|ROUND
argument_list|(
name|x_value
argument_list|)
argument_list|,
name|y_param_spec
operator|->
name|name
argument_list|,
name|ROUND
argument_list|(
name|y_value
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|x_param_spec
argument_list|)
operator|&&
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|y_param_spec
argument_list|)
condition|)
block|{
if|if
condition|(
name|backwards
condition|)
name|g_object_set
argument_list|(
name|config
argument_list|,
name|y_param_spec
operator|->
name|name
argument_list|,
name|y_value
argument_list|,
name|x_param_spec
operator|->
name|name
argument_list|,
name|x_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
else|else
name|g_object_set
argument_list|(
name|config
argument_list|,
name|x_param_spec
operator|->
name|name
argument_list|,
name|x_value
argument_list|,
name|y_param_spec
operator|->
name|name
argument_list|,
name|y_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_coordinates_notify_x (GObject * config,GParamSpec * param_spec,GimpSizeEntry * entry)
name|gimp_prop_coordinates_notify_x
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
block|{
name|gdouble
name|value
decl_stmt|;
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|gint
name|int_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|int_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|int_value
expr_stmt|;
block|}
else|else
block|{
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|value
operator|!=
name|gimp_size_entry_get_refval
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|)
condition|)
block|{
name|gdouble
modifier|*
name|old_x_value
init|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-x-value"
argument_list|)
decl_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_coordinates_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|,
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|old_x_value
condition|)
operator|*
name|old_x_value
operator|=
name|value
expr_stmt|;
name|g_signal_emit_by_name
argument_list|(
name|entry
argument_list|,
literal|"value-changed"
argument_list|,
name|gimp_size_entry_get_value
argument_list|(
name|entry
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_coordinates_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_coordinates_notify_y (GObject * config,GParamSpec * param_spec,GimpSizeEntry * entry)
name|gimp_prop_coordinates_notify_y
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
block|{
name|gdouble
name|value
decl_stmt|;
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|gint
name|int_value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|int_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|value
operator|=
name|int_value
expr_stmt|;
block|}
else|else
block|{
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|value
operator|!=
name|gimp_size_entry_get_refval
argument_list|(
name|entry
argument_list|,
literal|1
argument_list|)
condition|)
block|{
name|gdouble
modifier|*
name|old_y_value
init|=
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|entry
argument_list|)
argument_list|,
literal|"old-y-value"
argument_list|)
decl_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_coordinates_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_refval
argument_list|(
name|entry
argument_list|,
literal|1
argument_list|,
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|old_y_value
condition|)
operator|*
name|old_y_value
operator|=
name|value
expr_stmt|;
name|g_signal_emit_by_name
argument_list|(
name|entry
argument_list|,
literal|"value-changed"
argument_list|,
name|gimp_size_entry_get_value
argument_list|(
name|entry
argument_list|,
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_coordinates_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_coordinates_notify_unit (GObject * config,GParamSpec * param_spec,GimpSizeEntry * entry)
name|gimp_prop_coordinates_notify_unit
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GimpSizeEntry
modifier|*
name|entry
parameter_list|)
block|{
name|GimpUnit
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
operator|!=
name|gimp_size_entry_get_unit
argument_list|(
name|entry
argument_list|)
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_coordinates_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_size_entry_set_unit
argument_list|(
name|entry
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|entry
argument_list|,
name|gimp_prop_coordinates_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/****************/
end_comment

begin_comment
comment|/*  color area  */
end_comment

begin_comment
comment|/****************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_color_area_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_color_area_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|area
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_color_area_new:  * @config:        Object to which property is attached.  * @property_name: Name of RGB property.  * @width:         Width of color area.  * @height:        Height of color area.  * @type:          How transparency is represented.  *  * Creates a #GimpColorArea to set and display the value of an RGB  * property.  *  * Return value:  A new #GimpColorArea widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_color_area_new (GObject * config,const gchar * property_name,gint width,gint height,GimpColorAreaType type)
name|gimp_prop_color_area_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|,
name|GimpColorAreaType
name|type
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|area
decl_stmt|;
name|GimpRGB
modifier|*
name|value
decl_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|GIMP_TYPE_PARAM_RGB
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|area
operator|=
name|gimp_color_area_new
argument_list|(
name|value
argument_list|,
name|type
argument_list|,
name|GDK_BUTTON1_MASK
operator||
name|GDK_BUTTON2_MASK
argument_list|)
expr_stmt|;
name|gtk_widget_set_size_request
argument_list|(
name|area
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|area
argument_list|)
argument_list|,
name|area
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|area
argument_list|,
literal|"color-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_color_area_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_color_area_notify
argument_list|)
argument_list|,
name|area
argument_list|)
expr_stmt|;
return|return
name|area
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_color_area_callback (GtkWidget * area,GObject * config)
name|gimp_prop_color_area_callback
parameter_list|(
name|GtkWidget
modifier|*
name|area
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GimpRGB
name|value
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|area
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|gimp_color_area_get_color
argument_list|(
name|GIMP_COLOR_AREA
argument_list|(
name|area
argument_list|)
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_color_area_notify
argument_list|,
name|area
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_color_area_notify
argument_list|,
name|area
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_color_area_notify (GObject * config,GParamSpec * param_spec,GtkWidget * area)
name|gimp_prop_color_area_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|area
parameter_list|)
block|{
name|GimpRGB
modifier|*
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|area
argument_list|,
name|gimp_prop_color_area_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_color_area_set_color
argument_list|(
name|GIMP_COLOR_AREA
argument_list|(
name|area
argument_list|)
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|area
argument_list|,
name|gimp_prop_color_area_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/***************/
end_comment

begin_comment
comment|/*  unit menu  */
end_comment

begin_comment
comment|/***************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_unit_menu_callback
parameter_list|(
name|GtkWidget
modifier|*
name|menu
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_unit_menu_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|menu
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_unit_menu_new:  * @config:        Object to which property is attached.  * @property_name: Name of Unit property.  * @unit_format:   A printf-like format string which is used to create  *                 the unit strings.  *  * Creates a #GimpUnitMenu to set and display the value of a Unit  * property.  See gimp_unit_menu_new() for more information.  *  * Return value:  A new #GimpUnitMenu widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_unit_menu_new (GObject * config,const gchar * property_name,const gchar * unit_format)
name|gimp_prop_unit_menu_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|unit_format
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GimpUnit
name|unit
decl_stmt|;
name|GValue
name|value
init|=
block|{
literal|0
block|, }
decl_stmt|;
name|gboolean
name|show_pixels
decl_stmt|;
name|gboolean
name|show_percent
decl_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|GIMP_TYPE_PARAM_UNIT
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_value_init
argument_list|(
operator|&
name|value
argument_list|,
name|param_spec
operator|->
name|value_type
argument_list|)
expr_stmt|;
name|g_value_set_int
argument_list|(
operator|&
name|value
argument_list|,
name|GIMP_UNIT_PIXEL
argument_list|)
expr_stmt|;
name|show_pixels
operator|=
operator|(
name|g_param_value_validate
argument_list|(
name|param_spec
argument_list|,
operator|&
name|value
argument_list|)
operator|==
name|FALSE
operator|)
expr_stmt|;
name|g_value_set_int
argument_list|(
operator|&
name|value
argument_list|,
name|GIMP_UNIT_PERCENT
argument_list|)
expr_stmt|;
name|show_percent
operator|=
operator|(
name|g_param_value_validate
argument_list|(
name|param_spec
argument_list|,
operator|&
name|value
argument_list|)
operator|==
name|FALSE
operator|)
expr_stmt|;
name|g_value_unset
argument_list|(
operator|&
name|value
argument_list|)
expr_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|unit
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gimp_unit_menu_new
argument_list|(
name|unit_format
argument_list|,
name|unit
argument_list|,
name|show_pixels
argument_list|,
name|show_percent
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menu
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|menu
argument_list|,
literal|"unit-changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_unit_menu_callback
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_unit_menu_notify
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
return|return
name|menu
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_unit_menu_callback (GtkWidget * menu,GObject * config)
name|gimp_prop_unit_menu_callback
parameter_list|(
name|GtkWidget
modifier|*
name|menu
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GimpUnit
name|unit
decl_stmt|;
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|menu
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|gimp_unit_menu_update
argument_list|(
name|menu
argument_list|,
operator|&
name|unit
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_unit_menu_notify
argument_list|,
name|menu
argument_list|)
expr_stmt|;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|unit
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|config
argument_list|,
name|gimp_prop_unit_menu_notify
argument_list|,
name|menu
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_unit_menu_notify (GObject * config,GParamSpec * param_spec,GtkWidget * menu)
name|gimp_prop_unit_menu_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|menu
parameter_list|)
block|{
name|GimpUnit
name|unit
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|unit
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_handlers_block_by_func
argument_list|(
name|menu
argument_list|,
name|gimp_prop_unit_menu_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gimp_unit_menu_set_unit
argument_list|(
name|GIMP_UNIT_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|unit
argument_list|)
expr_stmt|;
name|gimp_unit_menu_update
argument_list|(
name|menu
argument_list|,
operator|&
name|unit
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|menu
argument_list|,
name|gimp_prop_unit_menu_callback
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*****************/
end_comment

begin_comment
comment|/*  stock image  */
end_comment

begin_comment
comment|/*****************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_stock_image_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|image
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_stock_image_new:  * @config:        Object to which property is attached.  * @property_name: Name of string property.  * @icon_size:     Size of desired stock image.  *  * Creates a widget to display a stock image representing the value of the  * specified string property, which should encode a Stock ID.  * See gtk_image_new_from_stock() for more information.  *  * Return value:  A new #GtkImage widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_stock_image_new (GObject * config,const gchar * property_name,GtkIconSize icon_size)
name|gimp_prop_stock_image_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GtkIconSize
name|icon_size
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|image
decl_stmt|;
name|gchar
modifier|*
name|stock_id
decl_stmt|;
name|param_spec
operator|=
name|check_param_spec
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_STRING
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|stock_id
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|image
operator|=
name|gtk_image_new_from_stock
argument_list|(
name|stock_id
argument_list|,
name|icon_size
argument_list|)
expr_stmt|;
if|if
condition|(
name|stock_id
condition|)
name|g_free
argument_list|(
name|stock_id
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|image
argument_list|)
argument_list|,
name|image
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_stock_image_notify
argument_list|)
argument_list|,
name|image
argument_list|)
expr_stmt|;
return|return
name|image
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_stock_image_notify (GObject * config,GParamSpec * param_spec,GtkWidget * image)
name|gimp_prop_stock_image_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkWidget
modifier|*
name|image
parameter_list|)
block|{
name|gchar
modifier|*
name|stock_id
decl_stmt|;
name|GtkIconSize
name|icon_size
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|stock_id
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_image_get_stock
argument_list|(
name|GTK_IMAGE
argument_list|(
name|image
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|icon_size
argument_list|)
expr_stmt|;
name|gtk_image_set_from_stock
argument_list|(
name|GTK_IMAGE
argument_list|(
name|image
argument_list|)
argument_list|,
name|stock_id
argument_list|,
name|icon_size
argument_list|)
expr_stmt|;
if|if
condition|(
name|stock_id
condition|)
name|g_free
argument_list|(
name|stock_id
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**************/
end_comment

begin_comment
comment|/*  expander  */
end_comment

begin_comment
comment|/**************/
end_comment

begin_function_decl
specifier|static
name|void
name|gimp_prop_expanded_notify
parameter_list|(
name|GtkExpander
modifier|*
name|expander
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gimp_prop_expander_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkExpander
modifier|*
name|expander
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  * gimp_prop_expander_new:  * @config:        Object to which property is attached.  * @property_name: Name of boolean property.  * @label:         Label for expander.  *  * Creates a #GtkExpander controlled by the specified boolean property.  * A value of %TRUE for the property corresponds to the expanded state  * for the widget.  *  * Return value:  A new #GtkExpander widget.  *  * Since GIMP 2.4  */
end_comment

begin_function
name|GtkWidget
modifier|*
DECL|function|gimp_prop_expander_new (GObject * config,const gchar * property_name,const gchar * label)
name|gimp_prop_expander_new
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|label
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|GtkWidget
modifier|*
name|expander
decl_stmt|;
name|gboolean
name|value
decl_stmt|;
name|param_spec
operator|=
name|check_param_spec_w
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_TYPE_PARAM_BOOLEAN
argument_list|,
name|G_STRFUNC
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return
name|NULL
return|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|expander
operator|=
name|g_object_new
argument_list|(
name|GTK_TYPE_EXPANDER
argument_list|,
literal|"label"
argument_list|,
name|label
argument_list|,
literal|"expanded"
argument_list|,
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|set_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|expander
argument_list|)
argument_list|,
name|expander
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|expander
argument_list|,
literal|"notify::expanded"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_expanded_notify
argument_list|)
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|connect_notify
argument_list|(
name|config
argument_list|,
name|property_name
argument_list|,
name|G_CALLBACK
argument_list|(
name|gimp_prop_expander_notify
argument_list|)
argument_list|,
name|expander
argument_list|)
expr_stmt|;
return|return
name|expander
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_expanded_notify (GtkExpander * expander,GParamSpec * param_spec,GObject * config)
name|gimp_prop_expanded_notify
parameter_list|(
name|GtkExpander
modifier|*
name|expander
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GObject
modifier|*
name|config
parameter_list|)
block|{
name|param_spec
operator|=
name|get_param_spec
argument_list|(
name|G_OBJECT
argument_list|(
name|expander
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
return|return;
name|g_object_set
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|gtk_expander_get_expanded
argument_list|(
name|expander
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gimp_prop_expander_notify (GObject * config,GParamSpec * param_spec,GtkExpander * expander)
name|gimp_prop_expander_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|GtkExpander
modifier|*
name|expander
parameter_list|)
block|{
name|gboolean
name|value
decl_stmt|;
name|g_object_get
argument_list|(
name|config
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_expander_get_expanded
argument_list|(
name|expander
argument_list|)
operator|!=
name|value
condition|)
block|{
name|g_signal_handlers_block_by_func
argument_list|(
name|expander
argument_list|,
name|gimp_prop_expanded_notify
argument_list|,
name|config
argument_list|)
expr_stmt|;
name|gtk_expander_set_expanded
argument_list|(
name|expander
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|g_signal_handlers_unblock_by_func
argument_list|(
name|expander
argument_list|,
name|gimp_prop_expanded_notify
argument_list|,
name|config
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*******************************/
end_comment

begin_comment
comment|/*  private utility functions  */
end_comment

begin_comment
comment|/*******************************/
end_comment

begin_decl_stmt
specifier|static
name|GQuark
name|gimp_prop_widgets_param_spec_quark
argument_list|(
name|void
argument_list|)
name|G_GNUC_CONST
decl_stmt|;
end_decl_stmt

begin_define
DECL|macro|PARAM_SPEC_QUARK
define|#
directive|define
name|PARAM_SPEC_QUARK
value|(gimp_prop_widgets_param_spec_quark ())
end_define

begin_function
specifier|static
name|GQuark
DECL|function|gimp_prop_widgets_param_spec_quark (void)
name|gimp_prop_widgets_param_spec_quark
parameter_list|(
name|void
parameter_list|)
block|{
specifier|static
name|GQuark
name|param_spec_quark
init|=
literal|0
decl_stmt|;
if|if
condition|(
operator|!
name|param_spec_quark
condition|)
name|param_spec_quark
operator|=
name|g_quark_from_static_string
argument_list|(
literal|"gimp-config-param-spec"
argument_list|)
expr_stmt|;
return|return
name|param_spec_quark
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|set_param_spec (GObject * object,GtkWidget * widget,GParamSpec * param_spec)
name|set_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|)
block|{
if|if
condition|(
name|object
condition|)
block|{
name|g_object_set_qdata
argument_list|(
name|object
argument_list|,
name|PARAM_SPEC_QUARK
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|widget
condition|)
block|{
specifier|const
name|gchar
modifier|*
name|blurb
init|=
name|g_param_spec_get_blurb
argument_list|(
name|param_spec
argument_list|)
decl_stmt|;
if|if
condition|(
name|blurb
condition|)
block|{
specifier|const
name|gchar
modifier|*
name|domain
decl_stmt|;
name|domain
operator|=
name|gimp_type_get_translation_domain
argument_list|(
name|param_spec
operator|->
name|owner_type
argument_list|)
expr_stmt|;
name|gimp_help_set_help_data
argument_list|(
name|widget
argument_list|,
name|dgettext
argument_list|(
name|domain
argument_list|,
name|blurb
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|set_radio_spec (GObject * object,GParamSpec * param_spec)
name|set_radio_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|)
block|{
name|GSList
modifier|*
name|list
decl_stmt|;
for|for
control|(
name|list
operator|=
name|gtk_radio_button_get_group
argument_list|(
name|GTK_RADIO_BUTTON
argument_list|(
name|object
argument_list|)
argument_list|)
init|;
name|list
condition|;
name|list
operator|=
name|g_slist_next
argument_list|(
name|list
argument_list|)
control|)
block|{
name|set_param_spec
argument_list|(
name|list
operator|->
name|data
argument_list|,
name|NULL
argument_list|,
name|param_spec
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|GParamSpec
modifier|*
DECL|function|get_param_spec (GObject * object)
name|get_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|)
block|{
return|return
name|g_object_get_qdata
argument_list|(
name|object
argument_list|,
name|PARAM_SPEC_QUARK
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|GParamSpec
modifier|*
DECL|function|find_param_spec (GObject * object,const gchar * property_name,const gchar * strloc)
name|find_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|param_spec
operator|=
name|g_object_class_find_property
argument_list|(
name|G_OBJECT_GET_CLASS
argument_list|(
name|object
argument_list|)
argument_list|,
name|property_name
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|param_spec
condition|)
name|g_warning
argument_list|(
literal|"%s: %s has no property named '%s'"
argument_list|,
name|strloc
argument_list|,
name|g_type_name
argument_list|(
name|G_TYPE_FROM_INSTANCE
argument_list|(
name|object
argument_list|)
argument_list|)
argument_list|,
name|property_name
argument_list|)
expr_stmt|;
return|return
name|param_spec
return|;
block|}
end_function

begin_function
specifier|static
name|GParamSpec
modifier|*
DECL|function|check_param_spec (GObject * object,const gchar * property_name,GType type,const gchar * strloc)
name|check_param_spec
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GType
name|type
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|param_spec
operator|=
name|find_param_spec
argument_list|(
name|object
argument_list|,
name|property_name
argument_list|,
name|strloc
argument_list|)
expr_stmt|;
if|if
condition|(
name|param_spec
operator|&&
operator|!
name|g_type_is_a
argument_list|(
name|G_TYPE_FROM_INSTANCE
argument_list|(
name|param_spec
argument_list|)
argument_list|,
name|type
argument_list|)
condition|)
block|{
name|g_warning
argument_list|(
literal|"%s: property '%s' of %s is not a %s"
argument_list|,
name|strloc
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|g_type_name
argument_list|(
name|param_spec
operator|->
name|owner_type
argument_list|)
argument_list|,
name|g_type_name
argument_list|(
name|type
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
return|return
name|param_spec
return|;
block|}
end_function

begin_function
specifier|static
name|GParamSpec
modifier|*
DECL|function|check_param_spec_w (GObject * object,const gchar * property_name,GType type,const gchar * strloc)
name|check_param_spec_w
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GType
name|type
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
block|{
name|GParamSpec
modifier|*
name|param_spec
decl_stmt|;
name|param_spec
operator|=
name|check_param_spec
argument_list|(
name|object
argument_list|,
name|property_name
argument_list|,
name|type
argument_list|,
name|strloc
argument_list|)
expr_stmt|;
if|if
condition|(
name|param_spec
operator|&&
operator|(
name|param_spec
operator|->
name|flags
operator|&
name|G_PARAM_WRITABLE
operator|)
operator|==
literal|0
condition|)
block|{
name|g_warning
argument_list|(
literal|"%s: property '%s' of %s is writable"
argument_list|,
name|strloc
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|g_type_name
argument_list|(
name|param_spec
operator|->
name|owner_type
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
return|return
name|param_spec
return|;
block|}
end_function

begin_function
specifier|static
name|gboolean
DECL|function|get_numeric_values (GObject * object,GParamSpec * param_spec,gdouble * value,gdouble * lower,gdouble * upper,const gchar * strloc)
name|get_numeric_values
parameter_list|(
name|GObject
modifier|*
name|object
parameter_list|,
name|GParamSpec
modifier|*
name|param_spec
parameter_list|,
name|gdouble
modifier|*
name|value
parameter_list|,
name|gdouble
modifier|*
name|lower
parameter_list|,
name|gdouble
modifier|*
name|upper
parameter_list|,
specifier|const
name|gchar
modifier|*
name|strloc
parameter_list|)
block|{
if|if
condition|(
name|G_IS_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|GParamSpecInt
modifier|*
name|int_spec
init|=
name|G_PARAM_SPEC_INT
argument_list|(
name|param_spec
argument_list|)
decl_stmt|;
name|gint
name|int_value
decl_stmt|;
name|g_object_get
argument_list|(
name|object
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|int_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
operator|*
name|value
operator|=
name|int_value
expr_stmt|;
operator|*
name|lower
operator|=
name|int_spec
operator|->
name|minimum
expr_stmt|;
operator|*
name|upper
operator|=
name|int_spec
operator|->
name|maximum
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_UINT
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|GParamSpecUInt
modifier|*
name|uint_spec
init|=
name|G_PARAM_SPEC_UINT
argument_list|(
name|param_spec
argument_list|)
decl_stmt|;
name|guint
name|uint_value
decl_stmt|;
name|g_object_get
argument_list|(
name|object
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
operator|&
name|uint_value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
operator|*
name|value
operator|=
name|uint_value
expr_stmt|;
operator|*
name|lower
operator|=
name|uint_spec
operator|->
name|minimum
expr_stmt|;
operator|*
name|upper
operator|=
name|uint_spec
operator|->
name|maximum
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|G_IS_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
condition|)
block|{
name|GParamSpecDouble
modifier|*
name|double_spec
init|=
name|G_PARAM_SPEC_DOUBLE
argument_list|(
name|param_spec
argument_list|)
decl_stmt|;
name|g_object_get
argument_list|(
name|object
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|value
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
operator|*
name|lower
operator|=
name|double_spec
operator|->
name|minimum
expr_stmt|;
operator|*
name|upper
operator|=
name|double_spec
operator|->
name|maximum
expr_stmt|;
block|}
else|else
block|{
name|g_warning
argument_list|(
literal|"%s: property '%s' of %s is not numeric"
argument_list|,
name|strloc
argument_list|,
name|param_spec
operator|->
name|name
argument_list|,
name|g_type_name
argument_list|(
name|G_TYPE_FROM_INSTANCE
argument_list|(
name|object
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|FALSE
return|;
block|}
return|return
name|TRUE
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|connect_notify (GObject * config,const gchar * property_name,GCallback callback,gpointer callback_data)
name|connect_notify
parameter_list|(
name|GObject
modifier|*
name|config
parameter_list|,
specifier|const
name|gchar
modifier|*
name|property_name
parameter_list|,
name|GCallback
name|callback
parameter_list|,
name|gpointer
name|callback_data
parameter_list|)
block|{
name|gchar
modifier|*
name|notify_name
decl_stmt|;
name|notify_name
operator|=
name|g_strconcat
argument_list|(
literal|"notify::"
argument_list|,
name|property_name
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect_object
argument_list|(
name|config
argument_list|,
name|notify_name
argument_list|,
name|callback
argument_list|,
name|callback_data
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|notify_name
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

