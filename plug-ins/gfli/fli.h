begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Written 1998 Jens Ch. Restemeier<jchrr@hrz.uni-bielefeld.de>  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.  *  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|_FLI_H
end_ifndef

begin_define
DECL|macro|_FLI_H
define|#
directive|define
name|_FLI_H
end_define

begin_comment
comment|/** structures */
end_comment

begin_typedef
DECL|struct|_fli_header
typedef|typedef
struct|struct
name|_fli_header
block|{
DECL|member|filesize
name|unsigned
name|long
name|filesize
decl_stmt|;
DECL|member|magic
name|unsigned
name|short
name|magic
decl_stmt|;
DECL|member|frames
name|unsigned
name|short
name|frames
decl_stmt|;
DECL|member|width
name|unsigned
name|short
name|width
decl_stmt|;
DECL|member|height
name|unsigned
name|short
name|height
decl_stmt|;
DECL|member|depth
name|unsigned
name|short
name|depth
decl_stmt|;
DECL|member|flags
name|unsigned
name|short
name|flags
decl_stmt|;
DECL|member|speed
name|unsigned
name|long
name|speed
decl_stmt|;
DECL|member|created
name|unsigned
name|long
name|created
decl_stmt|;
DECL|member|creator
name|unsigned
name|long
name|creator
decl_stmt|;
DECL|member|updated
name|unsigned
name|long
name|updated
decl_stmt|;
DECL|member|aspect_x
DECL|member|aspect_y
name|unsigned
name|short
name|aspect_x
decl_stmt|,
name|aspect_y
decl_stmt|;
DECL|member|oframe1
DECL|member|oframe2
name|unsigned
name|long
name|oframe1
decl_stmt|,
name|oframe2
decl_stmt|;
DECL|typedef|s_fli_header
block|}
name|s_fli_header
typedef|;
end_typedef

begin_typedef
DECL|struct|_fli_frame
typedef|typedef
struct|struct
name|_fli_frame
block|{
DECL|member|size
name|unsigned
name|long
name|size
decl_stmt|;
DECL|member|magic
name|unsigned
name|short
name|magic
decl_stmt|;
DECL|member|chunks
name|unsigned
name|short
name|chunks
decl_stmt|;
DECL|typedef|s_fli_frame
block|}
name|s_fli_frame
typedef|;
end_typedef

begin_typedef
DECL|struct|_fli_chunk
typedef|typedef
struct|struct
name|_fli_chunk
block|{
DECL|member|size
name|unsigned
name|long
name|size
decl_stmt|;
DECL|member|magic
name|unsigned
name|short
name|magic
decl_stmt|;
DECL|member|data
name|unsigned
name|char
modifier|*
name|data
decl_stmt|;
DECL|typedef|s_fli_chunk
block|}
name|s_fli_chunk
typedef|;
end_typedef

begin_comment
comment|/** chunk magics */
end_comment

begin_define
DECL|macro|HEADER_FLI
define|#
directive|define
name|HEADER_FLI
value|0xAF11
end_define

begin_define
DECL|macro|HEADER_FLC
define|#
directive|define
name|HEADER_FLC
value|0xAF12
end_define

begin_define
DECL|macro|FRAME
define|#
directive|define
name|FRAME
value|0xF1FA
end_define

begin_comment
comment|/** codec magics */
end_comment

begin_define
DECL|macro|FLI_COLOR
define|#
directive|define
name|FLI_COLOR
value|11
end_define

begin_define
DECL|macro|FLI_BLACK
define|#
directive|define
name|FLI_BLACK
value|13
end_define

begin_define
DECL|macro|FLI_BRUN
define|#
directive|define
name|FLI_BRUN
value|15
end_define

begin_define
DECL|macro|FLI_COPY
define|#
directive|define
name|FLI_COPY
value|16
end_define

begin_define
DECL|macro|FLI_LC
define|#
directive|define
name|FLI_LC
value|12
end_define

begin_define
DECL|macro|FLI_LC_2
define|#
directive|define
name|FLI_LC_2
value|7
end_define

begin_define
DECL|macro|FLI_COLOR_2
define|#
directive|define
name|FLI_COLOR_2
value|4
end_define

begin_define
DECL|macro|FLI_MINI
define|#
directive|define
name|FLI_MINI
value|18
end_define

begin_comment
comment|/** codec masks */
end_comment

begin_define
DECL|macro|W_COLOR
define|#
directive|define
name|W_COLOR
value|0x0001
end_define

begin_define
DECL|macro|W_BLACK
define|#
directive|define
name|W_BLACK
value|0x0002
end_define

begin_define
DECL|macro|W_BRUN
define|#
directive|define
name|W_BRUN
value|0x0004
end_define

begin_define
DECL|macro|W_COPY
define|#
directive|define
name|W_COPY
value|0x0008
end_define

begin_define
DECL|macro|W_LC
define|#
directive|define
name|W_LC
value|0x0010
end_define

begin_define
DECL|macro|W_LC_2
define|#
directive|define
name|W_LC_2
value|0x0020
end_define

begin_define
DECL|macro|W_COLOR_2
define|#
directive|define
name|W_COLOR_2
value|0x0040
end_define

begin_define
DECL|macro|W_MINI
define|#
directive|define
name|W_MINI
value|0x0080
end_define

begin_define
DECL|macro|W_ALL
define|#
directive|define
name|W_ALL
value|0xFFFF
end_define

begin_comment
comment|/** functions */
end_comment

begin_function_decl
name|void
name|fli_read_header
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_frame
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_cmap
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_color
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_cmap
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_color_2
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_cmap
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_black
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_brun
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_copy
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_lc
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_read_lc_2
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_write_header
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_write_frame
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_cmap
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|,
name|unsigned
name|short
name|codec_mask
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|fli_write_color
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_cmap
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|fli_write_color_2
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_cmap
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_write_black
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_write_brun
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_write_copy
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_write_lc
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fli_write_lc_2
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|s_fli_header
modifier|*
name|fli_header
parameter_list|,
name|unsigned
name|char
modifier|*
name|old_framebuf
parameter_list|,
name|unsigned
name|char
modifier|*
name|framebuf
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

end_unit

