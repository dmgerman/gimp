begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  *  *   Print plug-in header file for the GIMP.  *  *   Copyright 1997-1999 Michael Sweet (mike@easysw.com) and  *	Robert Krawitz (rlk@alum.mit.edu)  *  *   This program is free software; you can redistribute it and/or modify it  *   under the terms of the GNU General Public License as published by the Free  *   Software Foundation; either version 2 of the License, or (at your option)  *   any later version.  *  *   This program is distributed in the hope that it will be useful, but  *   WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY  *   or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License  *   for more details.  *  *   You should have received a copy of the GNU General Public License  *   along with this program; if not, write to the Free Software  *   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  *  * Revision History:  *  *   See ChangeLog  */
end_comment

begin_comment
comment|/*  * Include necessary header files...  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<errno.h>
end_include

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<sys/stat.h>
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|HAVE_UNISTD_H
end_ifdef

begin_include
include|#
directive|include
file|<unistd.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<gtk/gtk.h>
end_include

begin_include
include|#
directive|include
file|<libgimp/gimp.h>
end_include

begin_comment
comment|/*  * Constants...  */
end_comment

begin_define
DECL|macro|PLUG_IN_VERSION
define|#
directive|define
name|PLUG_IN_VERSION
value|"3.0.1 - 05 Dec 1999"
end_define

begin_define
DECL|macro|PLUG_IN_NAME
define|#
directive|define
name|PLUG_IN_NAME
value|"Print"
end_define

begin_define
DECL|macro|OUTPUT_GRAY
define|#
directive|define
name|OUTPUT_GRAY
value|0
end_define

begin_comment
DECL|macro|OUTPUT_GRAY
comment|/* Grayscale output */
end_comment

begin_define
DECL|macro|OUTPUT_COLOR
define|#
directive|define
name|OUTPUT_COLOR
value|1
end_define

begin_comment
DECL|macro|OUTPUT_COLOR
comment|/* Color output */
end_comment

begin_define
DECL|macro|ORIENT_AUTO
define|#
directive|define
name|ORIENT_AUTO
value|-1
end_define

begin_comment
DECL|macro|ORIENT_AUTO
comment|/* Best orientation */
end_comment

begin_define
DECL|macro|ORIENT_PORTRAIT
define|#
directive|define
name|ORIENT_PORTRAIT
value|0
end_define

begin_comment
DECL|macro|ORIENT_PORTRAIT
comment|/* Portrait orientation */
end_comment

begin_define
DECL|macro|ORIENT_LANDSCAPE
define|#
directive|define
name|ORIENT_LANDSCAPE
value|1
end_define

begin_comment
DECL|macro|ORIENT_LANDSCAPE
comment|/* Landscape orientation */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MIN
end_ifndef

begin_define
DECL|macro|MIN (a,b)
define|#
directive|define
name|MIN
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|)
value|((a)< (b) ? (a) : (b))
end_define

begin_define
DECL|macro|MAX (a,b)
define|#
directive|define
name|MAX
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|)
value|((a)> (b) ? (a) : (b))
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* !MIN */
end_comment

begin_comment
comment|/*  * Printer driver control structure.  See "print.c" for the actual list...  */
end_comment

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon29da0ff40108
block|{
DECL|member|composite
name|unsigned
name|short
name|composite
index|[
literal|256
index|]
decl_stmt|;
DECL|member|red
name|unsigned
name|short
name|red
index|[
literal|256
index|]
decl_stmt|;
DECL|member|green
name|unsigned
name|short
name|green
index|[
literal|256
index|]
decl_stmt|;
DECL|member|blue
name|unsigned
name|short
name|blue
index|[
literal|256
index|]
decl_stmt|;
DECL|typedef|lut_t
block|}
name|lut_t
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
comment|/* Plug-in variables */
DECL|struct|__anon29da0ff40208
block|{
DECL|member|output_to
name|char
name|output_to
index|[
literal|255
index|]
decl_stmt|,
comment|/* Name of file or command to print to */
DECL|member|driver
name|driver
index|[
literal|64
index|]
decl_stmt|,
comment|/* Name of printer "driver" */
DECL|member|ppd_file
name|ppd_file
index|[
literal|255
index|]
decl_stmt|;
comment|/* PPD file */
DECL|member|output_type
name|int
name|output_type
decl_stmt|;
comment|/* Color or grayscale output */
DECL|member|resolution
name|char
name|resolution
index|[
literal|64
index|]
decl_stmt|,
comment|/* Resolution */
DECL|member|media_size
name|media_size
index|[
literal|64
index|]
decl_stmt|,
comment|/* Media size */
DECL|member|media_type
name|media_type
index|[
literal|64
index|]
decl_stmt|,
comment|/* Media type */
DECL|member|media_source
name|media_source
index|[
literal|64
index|]
decl_stmt|;
comment|/* Media source */
DECL|member|brightness
name|int
name|brightness
decl_stmt|;
comment|/* Output brightness */
DECL|member|scaling
name|float
name|scaling
decl_stmt|;
comment|/* Scaling, percent of printable area */
DECL|member|orientation
name|int
name|orientation
decl_stmt|,
comment|/* Orientation - 0 = port., 1 = land., 				   -1 = auto */
DECL|member|left
name|left
decl_stmt|,
comment|/* Offset from lower-lefthand corner, points */
DECL|member|top
name|top
decl_stmt|;
comment|/* ... */
DECL|member|gamma
name|float
name|gamma
decl_stmt|;
comment|/* Gamma */
DECL|member|contrast
name|int
name|contrast
decl_stmt|,
comment|/* Output Contrast */
DECL|member|red
name|red
decl_stmt|,
comment|/* Output red level */
DECL|member|green
name|green
decl_stmt|,
comment|/* Output green level */
DECL|member|blue
name|blue
decl_stmt|;
comment|/* Output blue level */
DECL|member|linear
name|int
name|linear
decl_stmt|;
comment|/* Linear density (mostly for testing!) */
DECL|member|saturation
name|float
name|saturation
decl_stmt|;
comment|/* Output saturation */
DECL|member|density
name|float
name|density
decl_stmt|;
comment|/* Maximum output density */
DECL|typedef|vars_t
block|}
name|vars_t
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
comment|/**** Printer List ****/
DECL|struct|__anon29da0ff40308
block|{
DECL|member|active
name|int
name|active
decl_stmt|;
comment|/* Do we know about this printer? */
DECL|member|name
name|char
name|name
index|[
literal|17
index|]
decl_stmt|;
comment|/* Name of printer */
DECL|member|v
name|vars_t
name|v
decl_stmt|;
DECL|typedef|plist_t
block|}
name|plist_t
typedef|;
end_typedef

begin_comment
comment|/*  * Abstract data type for interfacing with the image creation program  * (in this case, the Gimp).  */
end_comment

begin_typedef
DECL|typedef|Image
typedef|typedef
name|void
modifier|*
name|Image
typedef|;
end_typedef

begin_function_decl
specifier|extern
name|void
name|Image_init
parameter_list|(
name|Image
name|image
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|Image_bpp
parameter_list|(
name|Image
name|image
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|Image_width
parameter_list|(
name|Image
name|image
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|Image_height
parameter_list|(
name|Image
name|image
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
specifier|const
name|char
modifier|*
name|Image_get_pluginname
parameter_list|(
name|Image
name|image
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|Image_get_col
parameter_list|(
name|Image
name|image
parameter_list|,
name|unsigned
name|char
modifier|*
name|data
parameter_list|,
name|int
name|column
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|Image_get_row
parameter_list|(
name|Image
name|image
parameter_list|,
name|unsigned
name|char
modifier|*
name|data
parameter_list|,
name|int
name|row
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|Image_progress_init
parameter_list|(
name|Image
name|image
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|Image_note_progress
parameter_list|(
name|Image
name|image
parameter_list|,
name|double
name|current
parameter_list|,
name|double
name|total
parameter_list|)
function_decl|;
end_function_decl

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon29da0ff40408
block|{
DECL|member|long_name
name|char
modifier|*
name|long_name
decl_stmt|,
comment|/* Long name for UI */
DECL|member|driver
modifier|*
name|driver
decl_stmt|;
comment|/* Short name for printrc file */
DECL|member|color
name|int
name|color
decl_stmt|,
comment|/* TRUE if supports color */
DECL|member|model
name|model
decl_stmt|;
comment|/* Model number */
DECL|member|gamma
name|float
name|gamma
decl_stmt|,
comment|/* Gamma correction */
DECL|member|density
name|density
decl_stmt|;
comment|/* Ink "density" or black level */
DECL|member|parameters
name|char
modifier|*
modifier|*
function_decl|(
modifier|*
name|parameters
function_decl|)
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|name
parameter_list|,
name|int
modifier|*
name|count
parameter_list|)
function_decl|;
comment|/* Parameter names */
DECL|member|media_size
name|void
function_decl|(
modifier|*
name|media_size
function_decl|)
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|media_size
parameter_list|,
name|int
modifier|*
name|width
parameter_list|,
name|int
modifier|*
name|length
parameter_list|)
function_decl|;
DECL|member|imageable_area
name|void
function_decl|(
modifier|*
name|imageable_area
function_decl|)
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|media_size
parameter_list|,
name|int
modifier|*
name|left
parameter_list|,
name|int
modifier|*
name|right
parameter_list|,
name|int
modifier|*
name|bottom
parameter_list|,
name|int
modifier|*
name|top
parameter_list|)
function_decl|;
comment|/* Print function */
DECL|member|print
name|void
function_decl|(
modifier|*
name|print
function_decl|)
parameter_list|(
name|int
name|model
parameter_list|,
name|int
name|copies
parameter_list|,
name|FILE
modifier|*
name|prn
parameter_list|,
name|Image
name|image
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|,
name|lut_t
modifier|*
name|lut
parameter_list|,
name|vars_t
modifier|*
name|v
parameter_list|)
function_decl|;
DECL|typedef|printer_t
block|}
name|printer_t
typedef|;
end_typedef

begin_typedef
DECL|typedef|convert_t
typedef|typedef
name|void
function_decl|(
modifier|*
name|convert_t
function_decl|)
parameter_list|(
name|unsigned
name|char
modifier|*
name|in
parameter_list|,
name|unsigned
name|short
modifier|*
name|out
parameter_list|,
name|int
name|width
parameter_list|,
name|int
name|bpp
parameter_list|,
name|lut_t
modifier|*
name|lut
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|,
name|vars_t
modifier|*
name|vars
parameter_list|)
function_decl|;
end_typedef

begin_comment
comment|/*  * Prototypes...  */
end_comment

begin_function_decl
specifier|extern
name|void
name|dither_black
parameter_list|(
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|dither_cmyk
parameter_list|(
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|int
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|dither_black4
parameter_list|(
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|dither_cmyk4
parameter_list|(
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|gray_to_gray
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|lut_t
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|vars_t
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|indexed_to_gray
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|lut_t
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|vars_t
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|indexed_to_rgb
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|lut_t
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|vars_t
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|rgb_to_gray
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|lut_t
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|vars_t
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|rgb_to_rgb
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|short
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|lut_t
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|vars_t
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|compute_lut
parameter_list|(
name|lut_t
modifier|*
name|lut
parameter_list|,
name|float
name|print_gamma
parameter_list|,
name|float
name|app_gamma
parameter_list|,
name|vars_t
modifier|*
name|v
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|default_media_size
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|media_size
parameter_list|,
name|int
modifier|*
name|width
parameter_list|,
name|int
modifier|*
name|length
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|char
modifier|*
modifier|*
name|escp2_parameters
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|name
parameter_list|,
name|int
modifier|*
name|count
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|escp2_imageable_area
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|media_size
parameter_list|,
name|int
modifier|*
name|left
parameter_list|,
name|int
modifier|*
name|right
parameter_list|,
name|int
modifier|*
name|bottom
parameter_list|,
name|int
modifier|*
name|top
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|escp2_print
parameter_list|(
name|int
name|model
parameter_list|,
name|int
name|copies
parameter_list|,
name|FILE
modifier|*
name|prn
parameter_list|,
name|Image
name|image
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|,
name|lut_t
modifier|*
name|lut
parameter_list|,
name|vars_t
modifier|*
name|v
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|char
modifier|*
modifier|*
name|pcl_parameters
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|name
parameter_list|,
name|int
modifier|*
name|count
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|pcl_imageable_area
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|media_size
parameter_list|,
name|int
modifier|*
name|left
parameter_list|,
name|int
modifier|*
name|right
parameter_list|,
name|int
modifier|*
name|bottom
parameter_list|,
name|int
modifier|*
name|top
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|pcl_print
parameter_list|(
name|int
name|model
parameter_list|,
name|int
name|copies
parameter_list|,
name|FILE
modifier|*
name|prn
parameter_list|,
name|Image
name|image
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|,
name|lut_t
modifier|*
name|lut
parameter_list|,
name|vars_t
modifier|*
name|v
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|char
modifier|*
modifier|*
name|ps_parameters
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|name
parameter_list|,
name|int
modifier|*
name|count
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|ps_media_size
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|media_size
parameter_list|,
name|int
modifier|*
name|width
parameter_list|,
name|int
modifier|*
name|length
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|ps_imageable_area
parameter_list|(
name|int
name|model
parameter_list|,
name|char
modifier|*
name|ppd_file
parameter_list|,
name|char
modifier|*
name|media_size
parameter_list|,
name|int
modifier|*
name|left
parameter_list|,
name|int
modifier|*
name|right
parameter_list|,
name|int
modifier|*
name|bottom
parameter_list|,
name|int
modifier|*
name|top
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|ps_print
parameter_list|(
name|int
name|model
parameter_list|,
name|int
name|copies
parameter_list|,
name|FILE
modifier|*
name|prn
parameter_list|,
name|Image
name|image
parameter_list|,
name|unsigned
name|char
modifier|*
name|cmap
parameter_list|,
name|lut_t
modifier|*
name|lut
parameter_list|,
name|vars_t
modifier|*
name|v
parameter_list|)
function_decl|;
end_function_decl

begin_ifdef
ifdef|#
directive|ifdef
name|LEFTOVER_8_BIT
end_ifdef

begin_function_decl
specifier|extern
name|void
name|dither_cmyk4
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|dither_black4
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|gray_to_gray
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|lut_t
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|float
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|indexed_to_gray
parameter_list|(
name|unsigned
name|char
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|int
parameter_list|,
name|int
parameter_list|,
name|lut_t
modifier|*
parameter_list|,
name|unsigned
name|char
modifier|*
parameter_list|,
name|float
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

end_unit

