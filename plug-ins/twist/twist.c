begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Twist - A geometric image distortion plugin for 'The GIMP'  * (see legal notice below).  * Copyright (C) 1997 Peter Uray.  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed WITHOUT ANY WARRANTY; without even  * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR  * PURPOSE.  See the GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.  */
end_comment

begin_comment
comment|/* The GIMP -- an image manipulation program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.  */
end_comment

begin_include
include|#
directive|include
file|<math.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|"gtk/gtk.h"
end_include

begin_include
include|#
directive|include
file|"libgimp/gimp.h"
end_include

begin_define
DECL|macro|ENTRY_WIDTH
define|#
directive|define
name|ENTRY_WIDTH
value|70
end_define

begin_define
DECL|macro|epsilon
define|#
directive|define
name|epsilon
value|0.001
end_define

begin_define
DECL|macro|preview_width
define|#
directive|define
name|preview_width
value|128
end_define

begin_define
DECL|macro|preview_height
define|#
directive|define
name|preview_height
value|128
end_define

begin_comment
comment|/* The number of parameters needed for non-interative mode */
end_comment

begin_define
DECL|macro|N_PARAMETERS
define|#
directive|define
name|N_PARAMETERS
value|15
end_define

begin_comment
comment|/* The number of available functions */
end_comment

begin_define
DECL|macro|N_FUNCTIONS
define|#
directive|define
name|N_FUNCTIONS
value|8
end_define

begin_comment
comment|/* Identifiers for the distortion function types */
end_comment

begin_define
DECL|macro|FUNCTION_R_r
define|#
directive|define
name|FUNCTION_R_r
value|0
end_define

begin_define
DECL|macro|FUNCTION_R_phi
define|#
directive|define
name|FUNCTION_R_phi
value|1
end_define

begin_define
DECL|macro|FUNCTION_Phi_r
define|#
directive|define
name|FUNCTION_Phi_r
value|2
end_define

begin_define
DECL|macro|FUNCTION_Phi_phi
define|#
directive|define
name|FUNCTION_Phi_phi
value|3
end_define

begin_define
DECL|macro|FUNCTION_R_r_Phi_phi
define|#
directive|define
name|FUNCTION_R_r_Phi_phi
value|4
end_define

begin_define
DECL|macro|FUNCTION_R_r_R_phi
define|#
directive|define
name|FUNCTION_R_r_R_phi
value|5
end_define

begin_define
DECL|macro|FUNCTION_Cosines
define|#
directive|define
name|FUNCTION_Cosines
value|6
end_define

begin_define
DECL|macro|FUNCTION_Gauss
define|#
directive|define
name|FUNCTION_Gauss
value|7
end_define

begin_comment
comment|/***************************************************************************  *  *  *  Global data definition.  *  *  ***************************************************************************/
end_comment

begin_comment
comment|/* do_action is used for preventing the plugin to act when the    [Cancel] button was pressed. */
end_comment

begin_decl_stmt
DECL|variable|do_action
specifier|static
name|gint
name|do_action
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|do_update_preview
specifier|static
name|gint
name|do_update_preview
init|=
literal|1
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Some frequently used strings. */
end_comment

begin_decl_stmt
DECL|variable|PluginName
specifier|static
name|char
name|PluginName
index|[]
init|=
literal|"Twist"
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|PluginResource
specifier|static
name|char
name|PluginResource
index|[]
init|=
literal|"plug_in_Twist"
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|PluginAuthor
specifier|static
name|char
name|PluginAuthor
index|[]
init|=
literal|"Peter Uray"
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|PluginYear
specifier|static
name|char
name|PluginYear
index|[]
init|=
literal|"1997"
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|PluginDescription
specifier|static
name|char
name|PluginDescription
index|[]
init|=
literal|"Twist - Geometric image distortion"
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|PluginGroup
specifier|static
name|char
name|PluginGroup
index|[]
init|=
literal|"<Image>/Filters/Distorts/Twist"
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Definition of global structure types */
end_comment

begin_comment
comment|/* A GtkObject and a label - used below */
end_comment

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon28e7b4bb0108
block|{
DECL|member|object
name|GtkWidget
modifier|*
name|object
decl_stmt|;
DECL|member|label
name|GtkLabel
modifier|*
name|label
decl_stmt|;
DECL|typedef|ObjectAndLabel
block|}
name|ObjectAndLabel
typedef|;
end_typedef

begin_comment
comment|/* These parameters are modified in the 'Parameter settings' section. */
end_comment

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon28e7b4bb0208
block|{
DECL|member|a1
name|gfloat
name|a1
decl_stmt|;
DECL|member|a2
name|gfloat
name|a2
decl_stmt|;
DECL|member|a3
name|gfloat
name|a3
decl_stmt|;
DECL|member|a4
name|gfloat
name|a4
decl_stmt|;
DECL|member|a5
name|gfloat
name|a5
decl_stmt|;
DECL|member|a6
name|gfloat
name|a6
decl_stmt|;
DECL|member|a7
name|gfloat
name|a7
decl_stmt|;
DECL|member|a8
name|gfloat
name|a8
decl_stmt|;
DECL|member|lettering01
name|gchar
name|lettering01
index|[
literal|30
index|]
decl_stmt|;
DECL|member|lettering02
name|gchar
name|lettering02
index|[
literal|30
index|]
decl_stmt|;
DECL|member|lettering03
name|gchar
name|lettering03
index|[
literal|30
index|]
decl_stmt|;
DECL|member|lettering04
name|gchar
name|lettering04
index|[
literal|30
index|]
decl_stmt|;
DECL|member|lettering05
name|gchar
name|lettering05
index|[
literal|30
index|]
decl_stmt|;
DECL|member|lettering06
name|gchar
name|lettering06
index|[
literal|30
index|]
decl_stmt|;
DECL|member|lettering07
name|gchar
name|lettering07
index|[
literal|30
index|]
decl_stmt|;
DECL|member|lettering08
name|gchar
name|lettering08
index|[
literal|30
index|]
decl_stmt|;
DECL|member|use_cutoff
name|gint
name|use_cutoff
decl_stmt|;
DECL|member|r
name|gfloat
name|r
decl_stmt|;
DECL|member|dr
name|gfloat
name|dr
decl_stmt|;
DECL|member|current_function
name|gint
name|current_function
decl_stmt|;
DECL|typedef|Parameters
block|}
name|Parameters
typedef|;
end_typedef

begin_comment
comment|/* The labels of the parameter selection box */
end_comment

begin_comment
comment|/* These depend on the selected function     */
end_comment

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon28e7b4bb0308
block|{
DECL|member|name_a1
name|char
name|name_a1
index|[
literal|30
index|]
decl_stmt|;
DECL|member|name_a2
name|char
name|name_a2
index|[
literal|30
index|]
decl_stmt|;
DECL|member|name_a3
name|char
name|name_a3
index|[
literal|30
index|]
decl_stmt|;
DECL|member|name_a4
name|char
name|name_a4
index|[
literal|30
index|]
decl_stmt|;
DECL|member|name_a5
name|char
name|name_a5
index|[
literal|30
index|]
decl_stmt|;
DECL|member|name_a6
name|char
name|name_a6
index|[
literal|30
index|]
decl_stmt|;
DECL|member|name_a7
name|char
name|name_a7
index|[
literal|30
index|]
decl_stmt|;
DECL|member|name_a8
name|char
name|name_a8
index|[
literal|30
index|]
decl_stmt|;
DECL|typedef|ParameterNames
block|}
name|ParameterNames
typedef|;
end_typedef

begin_comment
comment|/* Data fields used for creating a dialog and the action area. */
end_comment

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon28e7b4bb0408
block|{
DECL|member|dlg
name|GtkWidget
modifier|*
name|dlg
decl_stmt|;
DECL|member|ok_button
name|GtkWidget
modifier|*
name|ok_button
decl_stmt|;
DECL|member|cancel_button
name|GtkWidget
modifier|*
name|cancel_button
decl_stmt|;
DECL|member|dialog_frame
name|GtkWidget
modifier|*
name|dialog_frame
decl_stmt|;
DECL|member|argv
name|gchar
modifier|*
modifier|*
name|argv
decl_stmt|;
DECL|member|argc
name|gint
name|argc
decl_stmt|;
DECL|typedef|DialogTemplateData
block|}
name|DialogTemplateData
typedef|;
end_typedef

begin_comment
comment|/* Data used for maintaining the preview image */
end_comment

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon28e7b4bb0508
block|{
DECL|member|width
name|gint
name|width
decl_stmt|;
DECL|member|height
name|gint
name|height
decl_stmt|;
DECL|member|bpp
name|gint
name|bpp
decl_stmt|;
DECL|member|scale
name|gfloat
name|scale
decl_stmt|;
DECL|member|bits
name|guchar
modifier|*
name|bits
decl_stmt|;
DECL|member|display
name|GtkWidget
modifier|*
name|display
decl_stmt|;
DECL|typedef|PreviewData
block|}
name|PreviewData
typedef|;
end_typedef

begin_comment
comment|/* These pointers are needed for modifying the sliders in update_dialog */
end_comment

begin_typedef
typedef|typedef
struct|struct
DECL|struct|__anon28e7b4bb0608
block|{
DECL|member|slider01
name|GtkWidget
modifier|*
name|slider01
decl_stmt|;
DECL|member|slider02
name|GtkWidget
modifier|*
name|slider02
decl_stmt|;
DECL|member|slider03
name|GtkWidget
modifier|*
name|slider03
decl_stmt|;
DECL|member|slider04
name|GtkWidget
modifier|*
name|slider04
decl_stmt|;
DECL|member|slider05
name|GtkWidget
modifier|*
name|slider05
decl_stmt|;
DECL|member|slider06
name|GtkWidget
modifier|*
name|slider06
decl_stmt|;
DECL|member|slider07
name|GtkWidget
modifier|*
name|slider07
decl_stmt|;
DECL|member|slider08
name|GtkWidget
modifier|*
name|slider08
decl_stmt|;
DECL|member|slider09
name|GtkWidget
modifier|*
name|slider09
decl_stmt|;
DECL|member|slider10
name|GtkWidget
modifier|*
name|slider10
decl_stmt|;
DECL|member|label01
name|GtkLabel
modifier|*
name|label01
decl_stmt|;
DECL|member|label02
name|GtkLabel
modifier|*
name|label02
decl_stmt|;
DECL|member|label03
name|GtkLabel
modifier|*
name|label03
decl_stmt|;
DECL|member|label04
name|GtkLabel
modifier|*
name|label04
decl_stmt|;
DECL|member|label05
name|GtkLabel
modifier|*
name|label05
decl_stmt|;
DECL|member|label06
name|GtkLabel
modifier|*
name|label06
decl_stmt|;
DECL|member|label07
name|GtkLabel
modifier|*
name|label07
decl_stmt|;
DECL|member|label08
name|GtkLabel
modifier|*
name|label08
decl_stmt|;
DECL|member|toggle01
name|GtkWidget
modifier|*
name|toggle01
decl_stmt|;
DECL|typedef|WidgetData
block|}
name|WidgetData
typedef|;
end_typedef

begin_comment
comment|/* Parameter initialization */
end_comment

begin_decl_stmt
DECL|variable|parameter_values
specifier|static
name|Parameters
name|parameter_values
init|=
block|{
literal|0.0
block|,
comment|/* a1               */
literal|0.0
block|,
comment|/* a2               */
literal|0.0
block|,
comment|/* a3               */
literal|0.0
block|,
comment|/* a4               */
literal|0.0
block|,
comment|/* a5               */
literal|0.0
block|,
comment|/* a6               */
literal|0.0
block|,
comment|/* a7               */
literal|0.0
block|,
comment|/* a8               */
literal|"unused"
block|,
comment|/* lettering01      */
literal|"unused"
block|,
comment|/* lettering02      */
literal|"unused"
block|,
comment|/* lettering03      */
literal|"unused"
block|,
comment|/* lettering04      */
literal|"unused"
block|,
comment|/* lettering05      */
literal|"unused"
block|,
comment|/* lettering06      */
literal|"unused"
block|,
comment|/* lettering07      */
literal|"unused"
block|,
comment|/* lettering08      */
name|FALSE
block|,
comment|/* use_cutoff       */
literal|0.5
block|,
comment|/* r                */
literal|0.2
block|,
comment|/* dr               */
name|FUNCTION_R_r
comment|/* current_function */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|dtd
specifier|static
name|DialogTemplateData
name|dtd
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|preview_data
specifier|static
name|PreviewData
name|preview_data
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|widget_data
specifier|static
name|WidgetData
name|widget_data
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|parameter_names
specifier|static
name|ParameterNames
name|parameter_names
index|[
name|N_FUNCTIONS
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|EffectsParameters
specifier|static
name|Parameters
name|EffectsParameters
index|[
name|N_FUNCTIONS
index|]
index|[
literal|9
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|/***************************************************************************  *  *  *  Forward declarations  *  *  ***************************************************************************/
end_comment

begin_comment
comment|/* Declare local functions. */
end_comment

begin_function_decl
specifier|static
name|void
name|query
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|run
parameter_list|(
name|gchar
modifier|*
name|name
parameter_list|,
name|gint
name|nparams
parameter_list|,
name|GParam
modifier|*
name|param
parameter_list|,
name|gint
modifier|*
name|nreturn_vals
parameter_list|,
name|GParam
modifier|*
modifier|*
name|return_vals
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Callback functions */
end_comment

begin_function_decl
specifier|static
name|void
name|close_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|ok_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a1_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a2_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a3_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a4_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a5_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a6_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a7_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|a8_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|use_cutoff_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|r_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|dr_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect01_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect02_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect03_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect04_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect05_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect06_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect07_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect08_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|effect09_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function01_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function02_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function03_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function04_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function05_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function06_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function07_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|function08_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Dialog creation/updating functions */
end_comment

begin_comment
comment|/* This function executes the user dialog */
end_comment

begin_function_decl
specifier|static
name|gint
name|user_dialog
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* This function syncs the dialog display with the contents of the    parameter_values */
end_comment

begin_function_decl
specifier|static
name|void
name|update_dialog
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|create_base_dialog
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|ObjectAndLabel
name|create_slider_with_label
parameter_list|(
name|gchar
modifier|*
name|text
parameter_list|,
name|GtkWidget
modifier|*
name|container
parameter_list|,
name|GtkSignalFunc
name|callback_func
parameter_list|,
name|gfloat
name|initial_value
parameter_list|,
name|gfloat
name|min_value
parameter_list|,
name|gfloat
name|max_value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|create_functions_menu
parameter_list|(
name|GtkWidget
modifier|*
name|container
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|create_effects_menu
parameter_list|(
name|GtkWidget
modifier|*
name|container
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|create_effects_panel
parameter_list|(
name|GtkWidget
modifier|*
name|container
parameter_list|,
name|gchar
modifier|*
name|text1
parameter_list|,
name|gchar
modifier|*
name|text2
parameter_list|,
name|gchar
modifier|*
name|text3
parameter_list|,
name|GtkSignalFunc
name|callback_func1
parameter_list|,
name|GtkSignalFunc
name|callback_func2
parameter_list|,
name|GtkSignalFunc
name|callback_func3
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|create_cutoff_panel
parameter_list|(
name|GtkWidget
modifier|*
name|container
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Functions for handling the preview */
end_comment

begin_function_decl
specifier|static
name|void
name|create_preview
parameter_list|(
name|GDrawable
modifier|*
name|drawable
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|update_preview
parameter_list|(
name|GtkWidget
modifier|*
name|preview
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* This function actually modifies the image */
end_comment

begin_function_decl
name|void
name|image_action
parameter_list|(
name|GDrawable
modifier|*
name|drawable
parameter_list|,
name|Parameters
name|params
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Functions for calculating the image distortion */
end_comment

begin_function_decl
specifier|static
name|void
name|polar_coordinates
parameter_list|(
name|gfloat
name|x
parameter_list|,
name|gfloat
name|y
parameter_list|,
name|gfloat
modifier|*
name|rho
parameter_list|,
name|gfloat
modifier|*
name|phi
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* The distortion functions. */
end_comment

begin_function_decl
specifier|static
name|void
name|distortion_function01
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|distortion_function02
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|distortion_function03
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|distortion_function04
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|distortion_function05
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|distortion_function06
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|distortion_function07
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|distortion_function08
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|calculate_distortion_function
parameter_list|(
name|gint
name|i
parameter_list|,
name|gint
name|j
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|,
name|gfloat
modifier|*
name|u
parameter_list|,
name|gfloat
modifier|*
name|v
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gfloat
name|cutoff_function
parameter_list|(
name|gfloat
name|u
parameter_list|,
name|gfloat
name|v
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|calculate_pixel_color
parameter_list|(
name|gfloat
name|u
parameter_list|,
name|gfloat
name|f
parameter_list|,
name|guchar
modifier|*
name|source
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|,
name|gint
name|bpp
parameter_list|,
name|guchar
modifier|*
name|r
parameter_list|,
name|guchar
modifier|*
name|g
parameter_list|,
name|guchar
modifier|*
name|b
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Functions for image data exchange between GIMP and the plugin */
end_comment

begin_function_decl
specifier|static
name|void
name|get_source_image
parameter_list|(
name|GPixelRgn
name|source_rgn
parameter_list|,
name|guchar
modifier|*
name|buffer
parameter_list|,
name|gint
name|x
parameter_list|,
name|gint
name|y
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|,
name|gint
name|bytes
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/***************************************************************************  *  *  *  Implementation  *  *  ***************************************************************************/
end_comment

begin_comment
comment|/* An auxiliary function to make life easier while initializing the effects */
end_comment

begin_function
DECL|function|SET_EFFECTS_PARAMS (gint i,gint j,gfloat a1,gfloat a2,gfloat a3,gfloat a4,gfloat a5,gfloat a6,gfloat a7,gfloat a8,gint uc,gfloat r,gfloat dr)
specifier|static
name|void
name|SET_EFFECTS_PARAMS
parameter_list|(
name|gint
name|i
parameter_list|,
name|gint
name|j
parameter_list|,
name|gfloat
name|a1
parameter_list|,
name|gfloat
name|a2
parameter_list|,
name|gfloat
name|a3
parameter_list|,
name|gfloat
name|a4
parameter_list|,
name|gfloat
name|a5
parameter_list|,
name|gfloat
name|a6
parameter_list|,
name|gfloat
name|a7
parameter_list|,
name|gfloat
name|a8
parameter_list|,
name|gint
name|uc
parameter_list|,
name|gfloat
name|r
parameter_list|,
name|gfloat
name|dr
parameter_list|)
block|{
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a1
operator|=
name|a1
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a2
operator|=
name|a2
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a3
operator|=
name|a3
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a4
operator|=
name|a4
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a5
operator|=
name|a5
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a6
operator|=
name|a6
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a7
operator|=
name|a7
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|a8
operator|=
name|a8
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|use_cutoff
operator|=
name|uc
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|r
operator|=
name|r
expr_stmt|;
name|EffectsParameters
index|[
name|i
index|]
index|[
name|j
index|]
operator|.
name|dr
operator|=
name|dr
expr_stmt|;
block|}
end_function

begin_decl_stmt
DECL|variable|PLUG_IN_INFO
name|GPlugInInfo
name|PLUG_IN_INFO
init|=
block|{
name|NULL
block|,
comment|/* init_proc */
name|NULL
block|,
comment|/* quit_proc */
name|query
block|,
comment|/* query_proc */
name|run
block|,
comment|/* run_proc */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/******************************************************************************/
end_comment

begin_comment
comment|/*                           Standard functions                               */
end_comment

begin_comment
comment|/******************************************************************************/
end_comment

begin_comment
comment|/* The main function */
end_comment

begin_expr_stmt
name|MAIN
argument_list|()
expr_stmt|;
end_expr_stmt

begin_function
DECL|function|query ()
specifier|static
name|void
name|query
parameter_list|()
block|{
specifier|static
name|GParamDef
name|args
index|[]
init|=
block|{
block|{
name|PARAM_INT32
block|,
literal|"run_mode"
block|,
literal|"Interactive, non-interactive"
block|}
block|,
block|{
name|PARAM_IMAGE
block|,
literal|"image"
block|,
literal|"Input image"
block|}
block|,
block|{
name|PARAM_DRAWABLE
block|,
literal|"drawable"
block|,
literal|"Input drawable"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a1"
block|,
literal|"float parameter #1"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a2"
block|,
literal|"float parameter #2"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a3"
block|,
literal|"float parameter #3"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a4"
block|,
literal|"float parameter #4"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a5"
block|,
literal|"float parameter #5"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a6"
block|,
literal|"float parameter #6"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a7"
block|,
literal|"float parameter #7"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"a8"
block|,
literal|"float parameter #8"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering01"
block|,
literal|"lettering #1"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering02"
block|,
literal|"lettering #2"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering03"
block|,
literal|"lettering #3"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering04"
block|,
literal|"lettering #4"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering05"
block|,
literal|"lettering #5"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering06"
block|,
literal|"lettering #6"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering07"
block|,
literal|"lettering #7"
block|}
block|,
block|{
name|PARAM_STRING
block|,
literal|"lettering08"
block|,
literal|"lettering #8"
block|}
block|,
block|{
name|PARAM_INT32
block|,
literal|"use_cutoff"
block|,
literal|"Use cutoff or not"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"r"
block|,
literal|"The cutoff radius"
block|}
block|,
block|{
name|PARAM_FLOAT
block|,
literal|"dr"
block|,
literal|"The falloff radius"
block|}
block|,
block|{
name|PARAM_INT32
block|,
literal|"current_function"
block|,
literal|"The current function"
block|}
block|,  }
decl_stmt|;
specifier|static
name|GParamDef
modifier|*
name|return_vals
init|=
name|NULL
decl_stmt|;
specifier|static
name|gint
name|nargs
init|=
sizeof|sizeof
argument_list|(
name|args
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|args
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
specifier|static
name|gint
name|nreturn_vals
init|=
literal|0
decl_stmt|;
name|gimp_install_procedure
argument_list|(
name|PluginResource
argument_list|,
name|PluginDescription
argument_list|,
name|PluginDescription
argument_list|,
name|PluginAuthor
argument_list|,
name|PluginAuthor
argument_list|,
name|PluginYear
argument_list|,
name|PluginGroup
argument_list|,
literal|"RGB*, GRAY*"
argument_list|,
name|PROC_PLUG_IN
argument_list|,
name|nargs
argument_list|,
name|nreturn_vals
argument_list|,
name|args
argument_list|,
name|return_vals
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|run (gchar * name,gint nparams,GParam * param,gint * nreturn_vals,GParam ** return_vals)
specifier|static
name|void
name|run
parameter_list|(
name|gchar
modifier|*
name|name
parameter_list|,
name|gint
name|nparams
parameter_list|,
name|GParam
modifier|*
name|param
parameter_list|,
name|gint
modifier|*
name|nreturn_vals
parameter_list|,
name|GParam
modifier|*
modifier|*
name|return_vals
parameter_list|)
block|{
specifier|static
name|GParam
name|values
index|[
literal|1
index|]
decl_stmt|;
name|GDrawable
modifier|*
name|drawable
decl_stmt|;
name|GRunModeType
name|run_mode
decl_stmt|;
name|GStatusType
name|status
init|=
name|STATUS_SUCCESS
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|run_mode
operator|=
name|param
index|[
literal|0
index|]
operator|.
name|data
operator|.
name|d_int32
expr_stmt|;
operator|*
name|nreturn_vals
operator|=
literal|1
expr_stmt|;
operator|*
name|return_vals
operator|=
name|values
expr_stmt|;
name|values
index|[
literal|0
index|]
operator|.
name|type
operator|=
name|PARAM_STATUS
expr_stmt|;
name|values
index|[
literal|0
index|]
operator|.
name|data
operator|.
name|d_status
operator|=
name|status
expr_stmt|;
comment|/*  Get the drawable  */
name|drawable
operator|=
name|gimp_drawable_get
argument_list|(
name|param
index|[
literal|2
index|]
operator|.
name|data
operator|.
name|d_drawable
argument_list|)
expr_stmt|;
comment|/* Parameter names for R(r) distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a1
argument_list|,
literal|"Linear coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a2
argument_list|,
literal|"Quadratic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a3
argument_list|,
literal|"Cubic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a4
argument_list|,
literal|"Quartic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a5
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a6
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a7
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a8
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
comment|/* Parameter names for R(phi) distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a1
argument_list|,
literal|"Amplitude 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a2
argument_list|,
literal|"Frequency 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a3
argument_list|,
literal|"Amplitude 2:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a4
argument_list|,
literal|"Frequency 2"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a5
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a6
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a7
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a8
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
comment|/* Parameter names for Phi(r) distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a1
argument_list|,
literal|"Linear coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a2
argument_list|,
literal|"Quadratic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a3
argument_list|,
literal|"Cubic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a4
argument_list|,
literal|"Quartic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a5
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a6
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a7
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a8
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
comment|/* Parameter names for Phi(phi) distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a1
argument_list|,
literal|"Amplitude 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a2
argument_list|,
literal|"Frequency 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a3
argument_list|,
literal|"Amplitude 2:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a4
argument_list|,
literal|"Frequency 2"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a5
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a6
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a7
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a8
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
comment|/* Parameter names for R(r)Phi(phi) distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a1
argument_list|,
literal|"Linear coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a2
argument_list|,
literal|"Quadratic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a3
argument_list|,
literal|"Cubic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a4
argument_list|,
literal|"Quartic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a5
argument_list|,
literal|"Amplitude 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a6
argument_list|,
literal|"Frequency 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a7
argument_list|,
literal|"Amplitude 2:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a8
argument_list|,
literal|"Frequency 2"
argument_list|)
expr_stmt|;
comment|/* Parameter names for R(r)R(phi) distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a1
argument_list|,
literal|"Linear coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a2
argument_list|,
literal|"Quadratic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a3
argument_list|,
literal|"Cubic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a4
argument_list|,
literal|"Quartic coefficient:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a5
argument_list|,
literal|"Amplitude 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a6
argument_list|,
literal|"Frequency 1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a7
argument_list|,
literal|"Amplitude 2:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a8
argument_list|,
literal|"Frequency 2"
argument_list|)
expr_stmt|;
comment|/* Parameter names for Cosines distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a1
argument_list|,
literal|"x-Amplitude:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a2
argument_list|,
literal|"y-Amplitude:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a3
argument_list|,
literal|"x-Frequency #1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a4
argument_list|,
literal|"x-Frequency #2:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a5
argument_list|,
literal|"y-Frequency #1:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a6
argument_list|,
literal|"y-Frequency #2:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a7
argument_list|,
literal|"unused:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a8
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
comment|/* Parameter names for Gauss distortion */
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a1
argument_list|,
literal|"x-Strength:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a2
argument_list|,
literal|"y-Strength:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a3
argument_list|,
literal|"x-Offset:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a4
argument_list|,
literal|"y-Offset:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a5
argument_list|,
literal|"x-Deviation:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a6
argument_list|,
literal|"y-Deviation:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a7
argument_list|,
literal|"unused:"
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a8
argument_list|,
literal|"unused"
argument_list|)
expr_stmt|;
comment|/* this paragraph initializes the letterings */
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
comment|/* This section defines the 'effects' parameters */
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|3.5
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|1
argument_list|,
operator|-
literal|0.2
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|2
argument_list|,
literal|0.45
argument_list|,
operator|-
literal|0.4
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|3
argument_list|,
operator|-
literal|0.25
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|4.5
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.3
argument_list|,
literal|0.01
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|4
argument_list|,
literal|1.6
argument_list|,
operator|-
literal|2.5
argument_list|,
operator|-
literal|3.7
argument_list|,
operator|-
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|5
argument_list|,
literal|1.8
argument_list|,
operator|-
literal|0.8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|6
argument_list|,
operator|-
literal|6.0
argument_list|,
literal|4.0
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|0.7
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|7
argument_list|,
literal|0.15
argument_list|,
literal|0.2
argument_list|,
literal|5.0
argument_list|,
operator|-
literal|1.3
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.2
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|0
argument_list|,
operator|-
literal|0.65
argument_list|,
literal|0.35
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|1
argument_list|,
literal|0.1
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|2
argument_list|,
literal|0.2
argument_list|,
literal|6.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|3
argument_list|,
literal|0.2
argument_list|,
literal|3.0
argument_list|,
literal|0.5
argument_list|,
literal|2.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|4
argument_list|,
literal|0.2
argument_list|,
literal|3.0
argument_list|,
literal|0.5
argument_list|,
literal|2.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|5
argument_list|,
operator|-
literal|1.0
argument_list|,
operator|-
literal|7.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|6
argument_list|,
literal|0.7
argument_list|,
operator|-
literal|0.85
argument_list|,
operator|-
literal|0.25
argument_list|,
operator|-
literal|0.4
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|7
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|10.0
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|0.7
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_phi
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|0
argument_list|,
literal|1.3
argument_list|,
literal|0.9
argument_list|,
operator|-
literal|10.0
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|1
argument_list|,
literal|1.5
argument_list|,
literal|0.5
argument_list|,
operator|-
literal|4.2
argument_list|,
operator|-
literal|6.7
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|2
argument_list|,
operator|-
literal|2.1
argument_list|,
literal|1.0
argument_list|,
literal|2.45
argument_list|,
literal|5.8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|3
argument_list|,
operator|-
literal|1.9
argument_list|,
literal|1.0
argument_list|,
literal|1.0
argument_list|,
literal|6.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.2
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|4
argument_list|,
operator|-
literal|4.0
argument_list|,
literal|10.0
argument_list|,
literal|10.0
argument_list|,
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|5
argument_list|,
literal|0.6
argument_list|,
literal|3.0
argument_list|,
literal|10.0
argument_list|,
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.25
argument_list|,
literal|0.01
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|6
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|1.85
argument_list|,
operator|-
literal|2.45
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.4
argument_list|,
literal|0.01
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|7
argument_list|,
operator|-
literal|0.8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.4
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_r
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|0
argument_list|,
literal|0.8
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|1
argument_list|,
operator|-
literal|0.3
argument_list|,
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|2
argument_list|,
operator|-
literal|0.3
argument_list|,
literal|10.0
argument_list|,
literal|0.9
argument_list|,
literal|8.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|3
argument_list|,
operator|-
literal|7.0
argument_list|,
literal|10.0
argument_list|,
literal|2.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|4
argument_list|,
literal|1.0
argument_list|,
literal|8.0
argument_list|,
operator|-
literal|1.0
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|5
argument_list|,
operator|-
literal|6.0
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.25
argument_list|,
literal|0.4
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|6
argument_list|,
operator|-
literal|5.0
argument_list|,
literal|5.0
argument_list|,
literal|10.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.25
argument_list|,
literal|0.4
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|7
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|3.0
argument_list|,
operator|-
literal|1.0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Phi_phi
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|0
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.8
argument_list|,
literal|1.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|1
argument_list|,
literal|0.6
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.3
argument_list|,
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|2
argument_list|,
literal|0.3
argument_list|,
operator|-
literal|0.25
argument_list|,
operator|-
literal|2.5
argument_list|,
literal|2.4
argument_list|,
operator|-
literal|0.3
argument_list|,
literal|10.0
argument_list|,
literal|0.9
argument_list|,
literal|8.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|3
argument_list|,
operator|-
literal|0.05
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|7.0
argument_list|,
literal|10.0
argument_list|,
literal|2.0
argument_list|,
literal|1.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|4
argument_list|,
literal|1.85
argument_list|,
operator|-
literal|3.9
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|8.0
argument_list|,
operator|-
literal|1.0
argument_list|,
literal|4.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|5
argument_list|,
literal|0.1
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|6.0
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.25
argument_list|,
literal|0.4
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|6
argument_list|,
literal|0.3
argument_list|,
operator|-
literal|0.35
argument_list|,
literal|0.4
argument_list|,
operator|-
literal|2.8
argument_list|,
operator|-
literal|5.0
argument_list|,
literal|5.0
argument_list|,
literal|10.0
argument_list|,
literal|1.0
argument_list|,
name|TRUE
argument_list|,
literal|0.25
argument_list|,
literal|0.4
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|7
argument_list|,
operator|-
literal|2.6
argument_list|,
operator|-
literal|0.6
argument_list|,
operator|-
literal|3.1
argument_list|,
literal|10.0
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|3.0
argument_list|,
operator|-
literal|1.0
argument_list|,
literal|1.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_Phi_phi
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|0
argument_list|,
literal|0.0
argument_list|,
literal|2.1
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|10.0
argument_list|,
operator|-
literal|0.65
argument_list|,
literal|0.35
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|1
argument_list|,
literal|2.5
argument_list|,
literal|0.0
argument_list|,
literal|10.0
argument_list|,
literal|6.0
argument_list|,
literal|0.1
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|2
argument_list|,
literal|0.75
argument_list|,
operator|-
literal|6.5
argument_list|,
operator|-
literal|2.6
argument_list|,
literal|5.6
argument_list|,
literal|0.2
argument_list|,
literal|6.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|3
argument_list|,
literal|0.4
argument_list|,
literal|1.0
argument_list|,
literal|0.7
argument_list|,
literal|0.7
argument_list|,
literal|0.2
argument_list|,
literal|3.0
argument_list|,
literal|0.5
argument_list|,
literal|2.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|4
argument_list|,
operator|-
literal|1.0
argument_list|,
operator|-
literal|1.4
argument_list|,
literal|1.3
argument_list|,
literal|1.3
argument_list|,
literal|0.2
argument_list|,
literal|3.0
argument_list|,
literal|0.5
argument_list|,
literal|2.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|5
argument_list|,
literal|0.1
argument_list|,
literal|0.4
argument_list|,
operator|-
literal|1.1
argument_list|,
literal|0.1
argument_list|,
operator|-
literal|1.0
argument_list|,
operator|-
literal|7.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|6
argument_list|,
operator|-
literal|10.0
argument_list|,
operator|-
literal|10.0
argument_list|,
operator|-
literal|10.0
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|0.7
argument_list|,
operator|-
literal|1.0
argument_list|,
operator|-
literal|0.25
argument_list|,
literal|3.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|7
argument_list|,
literal|0.1
argument_list|,
literal|0.35
argument_list|,
operator|-
literal|1.7
argument_list|,
operator|-
literal|2.3
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|10.0
argument_list|,
operator|-
literal|10.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|0.7
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_R_r_R_phi
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|0
argument_list|,
literal|0.8
argument_list|,
literal|0.0
argument_list|,
literal|3.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|1
argument_list|,
literal|2.75
argument_list|,
operator|-
literal|2.75
argument_list|,
literal|3.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|3.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|2
argument_list|,
literal|0.8
argument_list|,
operator|-
literal|0.8
argument_list|,
literal|1.0
argument_list|,
operator|-
literal|1.6
argument_list|,
operator|-
literal|1.0
argument_list|,
operator|-
literal|1.4
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|3
argument_list|,
operator|-
literal|0.1
argument_list|,
operator|-
literal|2.0
argument_list|,
literal|1.0
argument_list|,
operator|-
literal|0.7
argument_list|,
operator|-
literal|10.0
argument_list|,
operator|-
literal|1.4
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|4
argument_list|,
operator|-
literal|0.2
argument_list|,
operator|-
literal|2.0
argument_list|,
literal|1.0
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|0.25
argument_list|,
literal|6.7
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|5
argument_list|,
operator|-
literal|6.2
argument_list|,
literal|6.6
argument_list|,
operator|-
literal|3.8
argument_list|,
operator|-
literal|1.4
argument_list|,
literal|2.0
argument_list|,
literal|1.2
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.15
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|6
argument_list|,
operator|-
literal|6.2
argument_list|,
literal|6.6
argument_list|,
operator|-
literal|3.8
argument_list|,
operator|-
literal|1.4
argument_list|,
literal|2.0
argument_list|,
literal|1.2
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|7
argument_list|,
literal|10.0
argument_list|,
literal|10.0
argument_list|,
operator|-
literal|1.7
argument_list|,
operator|-
literal|1.7
argument_list|,
literal|2.1
argument_list|,
literal|2.1
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.3
argument_list|,
literal|0.6
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Cosines
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|0
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|9.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|1
argument_list|,
literal|4.0
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|9.0
argument_list|,
operator|-
literal|9.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|2
argument_list|,
literal|4.0
argument_list|,
literal|4.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|9.0
argument_list|,
operator|-
literal|9.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|3
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|2.4
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|3.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|FALSE
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|4
argument_list|,
literal|2.3
argument_list|,
operator|-
literal|3.4
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|3.0
argument_list|,
operator|-
literal|9.0
argument_list|,
literal|0.2
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|5
argument_list|,
literal|10.0
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|4.0
argument_list|,
operator|-
literal|3.0
argument_list|,
operator|-
literal|6.0
argument_list|,
literal|5.6
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.05
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|6
argument_list|,
literal|5.25
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.25
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|7
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|10.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
name|TRUE
argument_list|,
literal|0.05
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|SET_EFFECTS_PARAMS
argument_list|(
name|FUNCTION_Gauss
argument_list|,
literal|8
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0
argument_list|,
literal|0.5
argument_list|,
literal|0.2
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|run_mode
condition|)
block|{
case|case
name|RUN_INTERACTIVE
case|:
comment|/*  Possibly retrieve data  */
name|gimp_get_data
argument_list|(
name|PluginResource
argument_list|,
operator|&
name|parameter_values
argument_list|)
expr_stmt|;
comment|/*  Create the preview  */
name|create_preview
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
comment|/*  First acquire information with a dialog  */
if|if
condition|(
operator|!
name|user_dialog
argument_list|()
condition|)
return|return;
break|break;
case|case
name|RUN_NONINTERACTIVE
case|:
comment|/*  Make sure all the arguments are there!  */
if|if
condition|(
name|nparams
operator|!=
name|N_PARAMETERS
condition|)
name|status
operator|=
name|STATUS_CALLING_ERROR
expr_stmt|;
if|if
condition|(
name|status
operator|==
name|STATUS_SUCCESS
condition|)
block|{
name|parameter_values
operator|.
name|a1
operator|=
name|param
index|[
literal|3
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|param
index|[
literal|4
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|param
index|[
literal|5
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|param
index|[
literal|6
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|param
index|[
literal|7
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|param
index|[
literal|8
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|param
index|[
literal|9
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|param
index|[
literal|10
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|param
index|[
literal|11
index|]
operator|.
name|data
operator|.
name|d_int32
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|param
index|[
literal|12
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|param
index|[
literal|13
index|]
operator|.
name|data
operator|.
name|d_float
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|param
index|[
literal|14
index|]
operator|.
name|data
operator|.
name|d_int32
expr_stmt|;
block|}
break|break;
case|case
name|RUN_WITH_LAST_VALS
case|:
comment|/*  Possibly retrieve data  */
name|gimp_get_data
argument_list|(
name|PluginResource
argument_list|,
operator|&
name|parameter_values
argument_list|)
expr_stmt|;
break|break;
default|default:
break|break;
block|}
comment|/*  Make sure that the drawable is gray or RGB color  */
if|if
condition|(
name|gimp_drawable_color
argument_list|(
name|drawable
operator|->
name|id
argument_list|)
operator|||
name|gimp_drawable_gray
argument_list|(
name|drawable
operator|->
name|id
argument_list|)
condition|)
block|{
if|if
condition|(
name|do_action
operator|==
literal|0
condition|)
name|gimp_progress_init
argument_list|(
name|PluginName
argument_list|)
expr_stmt|;
comment|/* set the tile cache size  */
name|gimp_tile_cache_ntiles
argument_list|(
literal|2
operator|*
operator|(
name|MAX
argument_list|(
name|drawable
operator|->
name|width
argument_list|,
name|drawable
operator|->
name|height
argument_list|)
operator|/
name|gimp_tile_width
argument_list|()
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|do_action
operator|==
literal|0
condition|)
name|image_action
argument_list|(
name|drawable
argument_list|,
name|parameter_values
argument_list|)
expr_stmt|;
if|if
condition|(
name|run_mode
operator|!=
name|RUN_NONINTERACTIVE
condition|)
name|gimp_displays_flush
argument_list|()
expr_stmt|;
comment|/*  Store parameter data  */
if|if
condition|(
name|run_mode
operator|==
name|RUN_INTERACTIVE
condition|)
name|gimp_set_data
argument_list|(
name|PluginResource
argument_list|,
operator|&
name|parameter_values
argument_list|,
sizeof|sizeof
argument_list|(
name|Parameters
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|status
operator|=
name|STATUS_EXECUTION_ERROR
expr_stmt|;
block|}
name|values
index|[
literal|0
index|]
operator|.
name|data
operator|.
name|d_status
operator|=
name|status
expr_stmt|;
name|gimp_drawable_detach
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/******************************************************************************/
end_comment

begin_comment
comment|/*                       Dialog creation functions                            */
end_comment

begin_comment
comment|/******************************************************************************/
end_comment

begin_comment
comment|/* create_base_dialog() creates the dialog window and the action area. */
end_comment

begin_function
DECL|function|create_base_dialog (void)
specifier|static
name|void
name|create_base_dialog
parameter_list|(
name|void
parameter_list|)
block|{
name|dtd
operator|.
name|argc
operator|=
literal|1
expr_stmt|;
name|dtd
operator|.
name|argv
operator|=
name|g_new
argument_list|(
name|gchar
operator|*
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|dtd
operator|.
name|argv
index|[
literal|0
index|]
operator|=
name|g_strdup
argument_list|(
name|PluginName
argument_list|)
expr_stmt|;
name|gtk_init
argument_list|(
operator|&
name|dtd
operator|.
name|argc
argument_list|,
operator|&
name|dtd
operator|.
name|argv
argument_list|)
expr_stmt|;
name|gtk_rc_parse
argument_list|(
name|gimp_gtkrc
argument_list|()
argument_list|)
expr_stmt|;
name|dtd
operator|.
name|dlg
operator|=
name|gtk_dialog_new
argument_list|()
expr_stmt|;
name|gtk_window_set_title
argument_list|(
name|GTK_WINDOW
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
argument_list|,
name|PluginName
argument_list|)
expr_stmt|;
name|gtk_window_position
argument_list|(
name|GTK_WINDOW
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
argument_list|,
name|GTK_WIN_POS_MOUSE
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
argument_list|,
literal|"destroy"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|close_callback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/*  Action area  */
name|dtd
operator|.
name|ok_button
operator|=
name|gtk_button_new_with_label
argument_list|(
literal|"OK"
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|dtd
operator|.
name|ok_button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|dtd
operator|.
name|ok_button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|ok_callback
argument_list|,
name|GTK_OBJECT
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|dtd
operator|.
name|ok_button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_grab_default
argument_list|(
name|dtd
operator|.
name|ok_button
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|dtd
operator|.
name|ok_button
argument_list|)
expr_stmt|;
name|dtd
operator|.
name|cancel_button
operator|=
name|gtk_button_new_with_label
argument_list|(
literal|"Cancel"
argument_list|)
expr_stmt|;
name|GTK_WIDGET_SET_FLAGS
argument_list|(
name|dtd
operator|.
name|cancel_button
argument_list|,
name|GTK_CAN_DEFAULT
argument_list|)
expr_stmt|;
name|gtk_signal_connect_object
argument_list|(
name|GTK_OBJECT
argument_list|(
name|dtd
operator|.
name|cancel_button
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|cancel_callback
argument_list|,
name|GTK_OBJECT
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
operator|->
name|action_area
argument_list|)
argument_list|,
name|dtd
operator|.
name|cancel_button
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|dtd
operator|.
name|cancel_button
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Not really surprisingly this functon creates a slider and a label. */
end_comment

begin_comment
comment|/* The widget returned is the GtkObject *data, NOT the slider widget!!! */
end_comment

begin_function
DECL|function|create_slider_with_label (gchar * text,GtkWidget * container,GtkSignalFunc callback_func,gfloat initial_value,gfloat min_value,gfloat max_value)
specifier|static
name|ObjectAndLabel
name|create_slider_with_label
parameter_list|(
name|gchar
modifier|*
name|text
parameter_list|,
name|GtkWidget
modifier|*
name|container
parameter_list|,
name|GtkSignalFunc
name|callback_func
parameter_list|,
name|gfloat
name|initial_value
parameter_list|,
name|gfloat
name|min_value
parameter_list|,
name|gfloat
name|max_value
parameter_list|)
block|{
name|GtkObject
modifier|*
name|data
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkWidget
modifier|*
name|slider_field
decl_stmt|;
name|GtkWidget
modifier|*
name|slider_widget
decl_stmt|;
name|ObjectAndLabel
name|ret
decl_stmt|;
name|slider_field
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|slider_field
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|slider_field
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
name|text
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|label
argument_list|,
literal|140
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|slider_field
argument_list|)
argument_list|,
name|label
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|data
operator|=
name|gtk_adjustment_new
argument_list|(
name|initial_value
argument_list|,
name|min_value
argument_list|,
name|max_value
argument_list|,
literal|0.01
argument_list|,
literal|0.01
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|slider_widget
operator|=
name|gtk_hscale_new
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|data
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|slider_field
argument_list|)
argument_list|,
name|slider_widget
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|slider_widget
argument_list|,
literal|300
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_scale_set_value_pos
argument_list|(
name|GTK_SCALE
argument_list|(
name|slider_widget
argument_list|)
argument_list|,
name|GTK_POS_TOP
argument_list|)
expr_stmt|;
name|gtk_scale_set_digits
argument_list|(
name|GTK_SCALE
argument_list|(
name|slider_widget
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_range_set_update_policy
argument_list|(
name|GTK_RANGE
argument_list|(
name|slider_widget
argument_list|)
argument_list|,
name|GTK_UPDATE_DELAYED
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|data
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|callback_func
argument_list|,
operator|&
name|initial_value
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|slider_widget
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|slider_field
argument_list|)
expr_stmt|;
name|ret
operator|.
name|object
operator|=
operator|(
name|GtkWidget
operator|*
operator|)
name|data
expr_stmt|;
name|ret
operator|.
name|label
operator|=
operator|(
name|GtkLabel
operator|*
operator|)
name|label
expr_stmt|;
return|return
operator|(
name|ret
operator|)
return|;
block|}
end_function

begin_comment
comment|/*                        WARNING                    */
end_comment

begin_comment
comment|/* I need this function, taken directly from the gtk code, here.    My linker refuses to link this function from the gtk library.        Further information:        GIMP version:   0.99.10    gcc  version:   2.7.2.    ld   version:   cygnus-2.6 (with BFD 2.6.0.14)        All other gtk functions worked so far.                                     Peter */
end_comment

begin_function
specifier|static
name|void
DECL|function|gtk_option_menu_remove_contents (GtkOptionMenu * option_menu)
name|gtk_option_menu_remove_contents
parameter_list|(
name|GtkOptionMenu
modifier|*
name|option_menu
parameter_list|)
block|{
name|g_return_if_fail
argument_list|(
name|option_menu
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|g_return_if_fail
argument_list|(
name|GTK_IS_OPTION_MENU
argument_list|(
name|option_menu
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|GTK_BUTTON
argument_list|(
name|option_menu
argument_list|)
operator|->
name|child
condition|)
block|{
name|gtk_container_block_resize
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|option_menu
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|GTK_WIDGET
argument_list|(
name|option_menu
operator|->
name|menu_item
argument_list|)
operator|->
name|state
operator|!=
name|GTK_BUTTON
argument_list|(
name|option_menu
argument_list|)
operator|->
name|child
operator|->
name|state
condition|)
name|gtk_widget_set_state
argument_list|(
name|GTK_BUTTON
argument_list|(
name|option_menu
argument_list|)
operator|->
name|child
argument_list|,
name|GTK_WIDGET
argument_list|(
name|option_menu
operator|->
name|menu_item
argument_list|)
operator|->
name|state
argument_list|)
expr_stmt|;
name|GTK_WIDGET_UNSET_FLAGS
argument_list|(
name|GTK_BUTTON
argument_list|(
name|option_menu
argument_list|)
operator|->
name|child
argument_list|,
name|GTK_MAPPED
operator||
name|GTK_REALIZED
argument_list|)
expr_stmt|;
name|gtk_widget_reparent
argument_list|(
name|GTK_BUTTON
argument_list|(
name|option_menu
argument_list|)
operator|->
name|child
argument_list|,
name|option_menu
operator|->
name|menu_item
argument_list|)
expr_stmt|;
name|gtk_container_unblock_resize
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|option_menu
argument_list|)
argument_list|)
expr_stmt|;
name|option_menu
operator|->
name|menu_item
operator|=
name|NULL
expr_stmt|;
block|}
block|}
end_function

begin_function
DECL|function|create_functions_menu (GtkWidget * container)
specifier|static
name|void
name|create_functions_menu
parameter_list|(
name|GtkWidget
modifier|*
name|container
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|menu_field
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GtkWidget
modifier|*
name|menuitem
decl_stmt|;
name|GtkWidget
modifier|*
name|chooser
decl_stmt|;
name|GtkWidget
modifier|*
name|child
decl_stmt|;
name|GtkWidget
modifier|*
name|current_item
decl_stmt|;
name|gint
name|dummy
decl_stmt|;
name|menu_field
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|menu_field
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|menu_field
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Functions:"
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|label
argument_list|,
literal|70
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|menu_field
argument_list|)
argument_list|,
name|label
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|chooser
operator|=
name|gtk_option_menu_new
argument_list|()
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|menu_field
argument_list|)
argument_list|,
name|chooser
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|chooser
argument_list|,
literal|180
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_menu_new
argument_list|()
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"R(r) - 4th order poly"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function01_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_R_r
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"R(phi) - cosine"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function02_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_R_phi
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Phi(r) - 4th order poly"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function03_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_Phi_r
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Phi(phi) - cosine"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function04_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_Phi_phi
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"R(r)Phi(phi)"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function05_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_R_r_Phi_phi
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"R(r)R(phi)"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function06_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_R_r_R_phi
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Cosines"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function07_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_Cosines
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Gauss"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|function08_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|current_function
operator|==
name|FUNCTION_Gauss
condition|)
name|current_item
operator|=
name|menuitem
expr_stmt|;
name|gtk_option_menu_set_menu
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|chooser
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
comment|/* BEGIN - This code was taken from gtk 0.99.10*/
comment|/* Update the chooser in order to display the CORRECT function */
name|gtk_option_menu_remove_contents
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|chooser
argument_list|)
argument_list|)
expr_stmt|;
name|GTK_OPTION_MENU
argument_list|(
name|chooser
argument_list|)
operator|->
name|menu_item
operator|=
name|current_item
expr_stmt|;
name|child
operator|=
name|GTK_BIN
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|chooser
argument_list|)
operator|->
name|menu_item
argument_list|)
operator|->
name|child
expr_stmt|;
if|if
condition|(
name|child
condition|)
block|{
name|gtk_container_block_resize
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|chooser
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|GTK_WIDGET
argument_list|(
name|chooser
argument_list|)
operator|->
name|state
operator|!=
name|child
operator|->
name|state
condition|)
name|gtk_widget_set_state
argument_list|(
name|child
argument_list|,
name|GTK_WIDGET
argument_list|(
name|chooser
argument_list|)
operator|->
name|state
argument_list|)
expr_stmt|;
name|gtk_widget_reparent
argument_list|(
name|child
argument_list|,
name|GTK_WIDGET
argument_list|(
name|chooser
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_container_unblock_resize
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|chooser
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|gtk_widget_size_allocate
argument_list|(
name|GTK_WIDGET
argument_list|(
name|chooser
argument_list|)
argument_list|,
operator|&
operator|(
name|GTK_WIDGET
argument_list|(
name|chooser
argument_list|)
operator|->
name|allocation
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|GTK_WIDGET_DRAWABLE
argument_list|(
name|chooser
argument_list|)
condition|)
name|gtk_widget_draw
argument_list|(
name|GTK_WIDGET
argument_list|(
name|chooser
argument_list|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* END - This code was taken from gtk 0.99.10. Thanks to the developers.*/
name|gtk_widget_show
argument_list|(
name|chooser
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menu_field
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|create_effects_menu (GtkWidget * container)
specifier|static
name|void
name|create_effects_menu
parameter_list|(
name|GtkWidget
modifier|*
name|container
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|menu_field
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkWidget
modifier|*
name|menu
decl_stmt|;
name|GtkWidget
modifier|*
name|menuitem
decl_stmt|;
name|GtkWidget
modifier|*
name|chooser
decl_stmt|;
name|gint
name|dummy
decl_stmt|;
name|menu_field
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|menu_field
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|menu_field
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"Effects:"
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|label
argument_list|,
literal|70
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|menu_field
argument_list|)
argument_list|,
name|label
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|menu
operator|=
name|gtk_menu_new
argument_list|()
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #1"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect01_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #2"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect02_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #3"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect03_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #4"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect04_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #5"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect05_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #6"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect06_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #7"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect07_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Effect #8"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect08_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|menuitem
operator|=
name|gtk_menu_item_new_with_label
argument_list|(
literal|"Reset"
argument_list|)
expr_stmt|;
name|gtk_menu_append
argument_list|(
name|GTK_MENU
argument_list|(
name|menu
argument_list|)
argument_list|,
name|menuitem
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|menuitem
argument_list|)
argument_list|,
literal|"activate"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|effect09_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menuitem
argument_list|)
expr_stmt|;
name|chooser
operator|=
name|gtk_option_menu_new
argument_list|()
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|menu_field
argument_list|)
argument_list|,
name|chooser
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|chooser
argument_list|,
literal|180
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_option_menu_set_menu
argument_list|(
name|GTK_OPTION_MENU
argument_list|(
name|chooser
argument_list|)
argument_list|,
name|menu
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|chooser
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|menu_field
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* This function creates the panel for the cutoff function parameters. */
end_comment

begin_function
DECL|function|create_cutoff_panel (GtkWidget * container)
specifier|static
name|void
name|create_cutoff_panel
parameter_list|(
name|GtkWidget
modifier|*
name|container
parameter_list|)
block|{
name|GtkObject
modifier|*
name|data
decl_stmt|;
name|GtkWidget
modifier|*
name|label
decl_stmt|;
name|GtkWidget
modifier|*
name|slider
decl_stmt|;
name|GtkWidget
modifier|*
name|toggle
decl_stmt|;
name|gfloat
name|dummy
decl_stmt|;
name|gint
name|int_dummy
decl_stmt|;
name|toggle
operator|=
name|gtk_check_button_new_with_label
argument_list|(
literal|"Use cutoff"
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|toggle01
operator|=
name|toggle
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|toggle
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|toggle
argument_list|)
argument_list|,
literal|"toggled"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|use_cutoff_callback
argument_list|,
operator|&
name|int_dummy
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|toggle
argument_list|)
argument_list|,
name|parameter_values
operator|.
name|use_cutoff
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|toggle
argument_list|)
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|toggle
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"r"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|label
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.8
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|data
operator|=
name|gtk_adjustment_new
argument_list|(
name|parameter_values
operator|.
name|r
argument_list|,
literal|0.0
argument_list|,
literal|1.0
argument_list|,
literal|0.01
argument_list|,
literal|0.01
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider09
operator|=
operator|(
name|GtkWidget
operator|*
operator|)
name|data
expr_stmt|;
name|slider
operator|=
name|gtk_hscale_new
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|data
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|slider
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|slider
argument_list|,
literal|100
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_scale_set_value_pos
argument_list|(
name|GTK_SCALE
argument_list|(
name|slider
argument_list|)
argument_list|,
name|GTK_POS_TOP
argument_list|)
expr_stmt|;
name|gtk_scale_set_digits
argument_list|(
name|GTK_SCALE
argument_list|(
name|slider
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_range_set_update_policy
argument_list|(
name|GTK_RANGE
argument_list|(
name|slider
argument_list|)
argument_list|,
name|GTK_UPDATE_DELAYED
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|data
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|r_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|slider
argument_list|)
expr_stmt|;
name|label
operator|=
name|gtk_label_new
argument_list|(
literal|"dr"
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|label
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_misc_set_alignment
argument_list|(
name|GTK_MISC
argument_list|(
name|label
argument_list|)
argument_list|,
literal|0.8
argument_list|,
literal|0.5
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|label
argument_list|)
expr_stmt|;
name|data
operator|=
name|gtk_adjustment_new
argument_list|(
name|parameter_values
operator|.
name|dr
argument_list|,
literal|0.01
argument_list|,
literal|1.0
argument_list|,
literal|0.01
argument_list|,
literal|0.01
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider10
operator|=
operator|(
name|GtkWidget
operator|*
operator|)
name|data
expr_stmt|;
name|slider
operator|=
name|gtk_hscale_new
argument_list|(
name|GTK_ADJUSTMENT
argument_list|(
name|data
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|container
argument_list|)
argument_list|,
name|slider
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_set_usize
argument_list|(
name|slider
argument_list|,
literal|100
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_scale_set_value_pos
argument_list|(
name|GTK_SCALE
argument_list|(
name|slider
argument_list|)
argument_list|,
name|GTK_POS_TOP
argument_list|)
expr_stmt|;
name|gtk_scale_set_digits
argument_list|(
name|GTK_SCALE
argument_list|(
name|slider
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|gtk_range_set_update_policy
argument_list|(
name|GTK_RANGE
argument_list|(
name|slider
argument_list|)
argument_list|,
name|GTK_UPDATE_DELAYED
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|data
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|dr_callback
argument_list|,
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|slider
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* This function creates a preview. It should be called only once. */
end_comment

begin_comment
comment|/* This function writes all data to a global PreviewData preview_data */
end_comment

begin_function
DECL|function|create_preview (GDrawable * drawable)
specifier|static
name|void
name|create_preview
parameter_list|(
name|GDrawable
modifier|*
name|drawable
parameter_list|)
block|{
name|gint
name|i
decl_stmt|,
name|j
decl_stmt|;
name|gint
name|x0
decl_stmt|,
name|y0
decl_stmt|;
name|gint
name|x1
decl_stmt|,
name|y1
decl_stmt|,
name|x2
decl_stmt|,
name|y2
decl_stmt|;
name|gint
name|image_width
decl_stmt|,
name|image_height
decl_stmt|;
name|guchar
modifier|*
name|image_bytes
decl_stmt|;
name|gint
name|image_bpp
decl_stmt|;
name|gint
name|offset
decl_stmt|;
name|gint
name|count
decl_stmt|;
name|gfloat
name|delta_pixel
decl_stmt|;
name|GPixelRgn
name|image_rgn
decl_stmt|;
name|gimp_drawable_mask_bounds
argument_list|(
name|drawable
operator|->
name|id
argument_list|,
operator|&
name|x1
argument_list|,
operator|&
name|y1
argument_list|,
operator|&
name|x2
argument_list|,
operator|&
name|y2
argument_list|)
expr_stmt|;
name|image_width
operator|=
operator|(
name|x2
operator|-
name|x1
operator|)
expr_stmt|;
name|image_height
operator|=
operator|(
name|y2
operator|-
name|y1
operator|)
expr_stmt|;
name|image_bpp
operator|=
name|drawable
operator|->
name|bpp
expr_stmt|;
name|image_bytes
operator|=
operator|(
name|guchar
operator|*
operator|)
name|malloc
argument_list|(
name|image_bpp
operator|*
name|image_width
argument_list|)
expr_stmt|;
if|if
condition|(
name|image_width
operator|>
name|image_height
condition|)
block|{
name|preview_data
operator|.
name|scale
operator|=
operator|(
name|gfloat
operator|)
name|image_width
operator|/
operator|(
name|gfloat
operator|)
name|preview_width
expr_stmt|;
name|preview_data
operator|.
name|width
operator|=
name|preview_width
expr_stmt|;
name|preview_data
operator|.
name|height
operator|=
call|(
name|gfloat
call|)
argument_list|(
name|image_height
argument_list|)
operator|/
operator|(
name|preview_data
operator|.
name|scale
operator|)
expr_stmt|;
name|x0
operator|=
literal|0
expr_stmt|;
name|y0
operator|=
operator|(
name|preview_height
operator|-
name|preview_data
operator|.
name|height
operator|)
operator|/
literal|2
expr_stmt|;
block|}
else|else
block|{
name|preview_data
operator|.
name|scale
operator|=
operator|(
name|gfloat
operator|)
name|image_height
operator|/
operator|(
name|gfloat
operator|)
name|preview_height
expr_stmt|;
name|preview_data
operator|.
name|height
operator|=
name|preview_height
expr_stmt|;
name|preview_data
operator|.
name|width
operator|=
call|(
name|gfloat
call|)
argument_list|(
name|image_width
argument_list|)
operator|/
operator|(
name|preview_data
operator|.
name|scale
operator|)
expr_stmt|;
name|x0
operator|=
operator|(
name|preview_width
operator|-
name|preview_data
operator|.
name|width
operator|)
operator|/
literal|2
expr_stmt|;
name|y0
operator|=
literal|0
expr_stmt|;
block|}
name|preview_data
operator|.
name|bpp
operator|=
literal|3
expr_stmt|;
name|preview_data
operator|.
name|bits
operator|=
operator|(
name|guchar
operator|*
operator|)
name|malloc
argument_list|(
name|preview_data
operator|.
name|bpp
operator|*
name|preview_width
operator|*
name|preview_height
argument_list|)
expr_stmt|;
comment|/* Clear the preview area */
name|count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|preview_data
operator|.
name|bpp
operator|*
name|preview_width
operator|*
name|preview_height
condition|;
name|i
operator|++
control|)
name|preview_data
operator|.
name|bits
index|[
name|count
operator|++
index|]
operator|=
literal|0
expr_stmt|;
comment|/* Copy a thumbnail of the original image to the preview image. */
name|gimp_pixel_rgn_init
argument_list|(
operator|&
name|image_rgn
argument_list|,
name|drawable
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|drawable
operator|->
name|width
argument_list|,
name|drawable
operator|->
name|height
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|preview_data
operator|.
name|height
condition|;
name|j
operator|++
control|)
block|{
name|offset
operator|=
name|preview_data
operator|.
name|bpp
operator|*
operator|(
operator|(
name|y0
operator|+
name|j
operator|)
operator|*
name|preview_width
operator|+
name|x0
operator|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|delta_pixel
operator|=
literal|0.0
expr_stmt|;
name|gimp_pixel_rgn_get_row
argument_list|(
operator|&
name|image_rgn
argument_list|,
name|image_bytes
argument_list|,
name|x1
argument_list|,
name|y1
operator|+
call|(
name|int
call|)
argument_list|(
name|preview_data
operator|.
name|scale
operator|*
operator|(
name|gfloat
operator|)
name|j
argument_list|)
argument_list|,
name|image_width
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|preview_data
operator|.
name|width
condition|;
name|i
operator|++
control|)
block|{
switch|switch
condition|(
name|image_bpp
condition|)
block|{
case|case
literal|4
case|:
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
operator|++
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
operator|++
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
operator|++
index|]
expr_stmt|;
name|delta_pixel
operator|+=
name|preview_data
operator|.
name|scale
expr_stmt|;
name|count
operator|=
literal|4
operator|*
operator|(
name|int
operator|)
name|delta_pixel
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
operator|++
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
operator|++
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
operator|++
index|]
expr_stmt|;
name|delta_pixel
operator|+=
name|preview_data
operator|.
name|scale
expr_stmt|;
name|count
operator|=
literal|3
operator|*
operator|(
name|int
operator|)
name|delta_pixel
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
index|]
expr_stmt|;
name|delta_pixel
operator|+=
name|preview_data
operator|.
name|scale
expr_stmt|;
name|count
operator|=
literal|2
operator|*
operator|(
name|int
operator|)
name|delta_pixel
expr_stmt|;
break|break;
case|case
literal|1
case|:
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
index|]
expr_stmt|;
name|preview_data
operator|.
name|bits
index|[
name|offset
operator|++
index|]
operator|=
name|image_bytes
index|[
name|count
index|]
expr_stmt|;
name|delta_pixel
operator|+=
name|preview_data
operator|.
name|scale
expr_stmt|;
name|count
operator|=
operator|(
name|int
operator|)
name|delta_pixel
expr_stmt|;
break|break;
block|}
block|}
block|}
block|}
end_function

begin_comment
comment|/* This function re-calculates the preview image and displays it */
end_comment

begin_function
DECL|function|update_preview (GtkWidget * preview)
specifier|static
name|void
name|update_preview
parameter_list|(
name|GtkWidget
modifier|*
name|preview
parameter_list|)
block|{
name|guchar
modifier|*
name|dest
decl_stmt|;
name|gint
name|i
decl_stmt|,
name|j
decl_stmt|;
name|gfloat
name|u
decl_stmt|,
name|v
decl_stmt|;
name|gint
name|count
decl_stmt|;
if|if
condition|(
name|do_update_preview
operator|!=
literal|1
condition|)
return|return;
name|dest
operator|=
operator|(
name|guchar
operator|*
operator|)
name|malloc
argument_list|(
literal|3
operator|*
name|preview_width
argument_list|)
expr_stmt|;
comment|/* Distort and display the preview */
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|preview_height
condition|;
name|j
operator|++
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|preview_width
condition|;
name|i
operator|++
control|)
block|{
name|calculate_distortion_function
argument_list|(
name|i
argument_list|,
name|j
argument_list|,
name|preview_width
argument_list|,
name|preview_height
argument_list|,
operator|&
name|u
argument_list|,
operator|&
name|v
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|u
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|u
operator|<
name|preview_width
operator|)
operator|&&
operator|(
name|v
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|v
operator|<
name|preview_height
operator|)
condition|)
block|{
name|dest
index|[
name|count
index|]
operator|=
name|preview_data
operator|.
name|bits
index|[
literal|3
operator|*
operator|(
operator|(
name|int
operator|)
name|v
operator|*
name|preview_width
operator|+
operator|(
name|int
operator|)
name|u
operator|)
index|]
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|preview_data
operator|.
name|bits
index|[
literal|3
operator|*
operator|(
operator|(
name|int
operator|)
name|v
operator|*
name|preview_width
operator|+
operator|(
name|int
operator|)
name|u
operator|)
operator|+
literal|1
index|]
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|preview_data
operator|.
name|bits
index|[
literal|3
operator|*
operator|(
operator|(
name|int
operator|)
name|v
operator|*
name|preview_width
operator|+
operator|(
name|int
operator|)
name|u
operator|)
operator|+
literal|2
index|]
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
else|else
block|{
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
name|gtk_preview_draw_row
argument_list|(
name|GTK_PREVIEW
argument_list|(
name|preview
argument_list|)
argument_list|,
name|dest
argument_list|,
literal|0
argument_list|,
name|j
argument_list|,
name|preview_width
argument_list|)
expr_stmt|;
block|}
name|gtk_widget_draw
argument_list|(
name|preview
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|dest
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* This function creates the complete user dialog */
end_comment

begin_function
DECL|function|user_dialog ()
specifier|static
name|gint
name|user_dialog
parameter_list|()
block|{
name|GtkWidget
modifier|*
name|frame
decl_stmt|;
name|GtkWidget
modifier|*
name|main_box
decl_stmt|;
name|GtkWidget
modifier|*
name|north_box
decl_stmt|;
name|GtkWidget
modifier|*
name|south_box
decl_stmt|;
name|GtkWidget
modifier|*
name|west_box
decl_stmt|;
name|GtkWidget
modifier|*
name|preview_box
decl_stmt|;
name|GtkWidget
modifier|*
name|parameter_box
decl_stmt|;
name|GtkWidget
modifier|*
name|effects_box
decl_stmt|;
name|GtkWidget
modifier|*
name|cutoff_box
decl_stmt|;
name|GtkWidget
modifier|*
name|preview_frame
decl_stmt|;
name|GtkWidget
modifier|*
name|preview_display
decl_stmt|;
name|GtkWidget
modifier|*
name|functions_frame
decl_stmt|;
name|GtkWidget
modifier|*
name|functions_box
decl_stmt|;
name|ObjectAndLabel
name|oal
decl_stmt|;
name|GtkWidget
modifier|*
name|toggle
decl_stmt|;
name|gchar
name|buffer
index|[
literal|12
index|]
decl_stmt|;
comment|/* Create a basic dialog window */
name|create_base_dialog
argument_list|()
expr_stmt|;
comment|/*  The main box -- contains the north and south box  */
name|main_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|main_box
argument_list|)
argument_list|,
literal|15
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
operator|->
name|vbox
argument_list|)
argument_list|,
name|main_box
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Add the north box */
name|north_box
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|main_box
argument_list|)
argument_list|,
name|north_box
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|west_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|west_box
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|north_box
argument_list|)
argument_list|,
name|west_box
argument_list|)
expr_stmt|;
comment|/* Add the preview display */
name|preview_frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Preview image"
argument_list|)
expr_stmt|;
name|gtk_frame_set_shadow_type
argument_list|(
name|GTK_FRAME
argument_list|(
name|preview_frame
argument_list|)
argument_list|,
name|GTK_SHADOW_ETCHED_IN
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|west_box
argument_list|)
argument_list|,
name|preview_frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|preview_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|preview_box
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|preview_frame
argument_list|)
argument_list|,
name|preview_box
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
name|NULL
argument_list|)
expr_stmt|;
name|gtk_frame_set_shadow_type
argument_list|(
name|GTK_FRAME
argument_list|(
name|frame
argument_list|)
argument_list|,
name|GTK_SHADOW_IN
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|preview_box
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|preview_display
operator|=
name|gtk_preview_new
argument_list|(
name|GTK_PREVIEW_COLOR
argument_list|)
expr_stmt|;
name|gtk_preview_size
argument_list|(
name|GTK_PREVIEW
argument_list|(
name|preview_display
argument_list|)
argument_list|,
name|preview_width
argument_list|,
name|preview_height
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|preview_display
argument_list|)
expr_stmt|;
name|preview_data
operator|.
name|display
operator|=
name|preview_display
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
comment|/* Add the functions/effects frame */
name|functions_frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Functions / Effects"
argument_list|)
expr_stmt|;
name|gtk_frame_set_shadow_type
argument_list|(
name|GTK_FRAME
argument_list|(
name|functions_frame
argument_list|)
argument_list|,
name|GTK_SHADOW_ETCHED_IN
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|west_box
argument_list|)
argument_list|,
name|functions_frame
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|functions_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|functions_box
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|functions_frame
argument_list|)
argument_list|,
name|functions_box
argument_list|)
expr_stmt|;
comment|/* Add a test object to the functions/effects box (to be replaced.*/
name|create_functions_menu
argument_list|(
name|functions_box
argument_list|)
expr_stmt|;
name|create_effects_menu
argument_list|(
name|functions_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|functions_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|functions_frame
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|preview_display
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|preview_frame
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|preview_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|west_box
argument_list|)
expr_stmt|;
comment|/*  Create the parameter control box  */
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Parameter settings"
argument_list|)
expr_stmt|;
name|gtk_frame_set_shadow_type
argument_list|(
name|GTK_FRAME
argument_list|(
name|frame
argument_list|)
argument_list|,
name|GTK_SHADOW_ETCHED_IN
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|north_box
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|parameter_box
operator|=
name|gtk_vbox_new
argument_list|(
name|FALSE
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|parameter_box
argument_list|)
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a1_callback
argument_list|,
name|parameter_values
operator|.
name|a1
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider01
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label01
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a2_callback
argument_list|,
name|parameter_values
operator|.
name|a2
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider02
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label02
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a3_callback
argument_list|,
name|parameter_values
operator|.
name|a3
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider03
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label03
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a4_callback
argument_list|,
name|parameter_values
operator|.
name|a4
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider04
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label04
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a5_callback
argument_list|,
name|parameter_values
operator|.
name|a5
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider05
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label05
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a6_callback
argument_list|,
name|parameter_values
operator|.
name|a6
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider06
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label06
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a7_callback
argument_list|,
name|parameter_values
operator|.
name|a7
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider07
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label07
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|oal
operator|=
name|create_slider_with_label
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_box
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|a8_callback
argument_list|,
name|parameter_values
operator|.
name|a8
argument_list|,
operator|-
literal|10.0
argument_list|,
literal|10.0
argument_list|)
expr_stmt|;
name|widget_data
operator|.
name|slider08
operator|=
name|oal
operator|.
name|object
expr_stmt|;
name|widget_data
operator|.
name|label08
operator|=
name|oal
operator|.
name|label
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|parameter_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|north_box
argument_list|)
expr_stmt|;
comment|/* Create the south box (contains the cutoff panel)*/
name|south_box
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|main_box
argument_list|)
argument_list|,
name|south_box
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|frame
operator|=
name|gtk_frame_new
argument_list|(
literal|"Cutoff function"
argument_list|)
expr_stmt|;
name|gtk_frame_set_shadow_type
argument_list|(
name|GTK_FRAME
argument_list|(
name|frame
argument_list|)
argument_list|,
name|GTK_SHADOW_ETCHED_IN
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|south_box
argument_list|)
argument_list|,
name|frame
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|cutoff_box
operator|=
name|gtk_hbox_new
argument_list|(
name|FALSE
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|gtk_container_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|cutoff_box
argument_list|)
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|gtk_container_add
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|frame
argument_list|)
argument_list|,
name|cutoff_box
argument_list|)
expr_stmt|;
name|create_cutoff_panel
argument_list|(
name|cutoff_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|cutoff_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|frame
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|south_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|main_box
argument_list|)
expr_stmt|;
name|gtk_widget_show
argument_list|(
name|dtd
operator|.
name|dlg
argument_list|)
expr_stmt|;
name|gtk_main
argument_list|()
expr_stmt|;
name|gdk_flush
argument_list|()
expr_stmt|;
return|return
literal|1
return|;
block|}
end_function

begin_comment
comment|/* Modify the dialog controls such that they resemble the actual     parameter values. The parameters are modified by selecting an effect. */
end_comment

begin_function
DECL|function|update_dialog (void)
specifier|static
name|void
name|update_dialog
parameter_list|(
name|void
parameter_list|)
block|{
name|GtkAdjustment
modifier|*
name|adjustment
decl_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider01
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a1
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label01
argument_list|,
name|parameter_values
operator|.
name|lettering01
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider02
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a2
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label02
argument_list|,
name|parameter_values
operator|.
name|lettering02
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider03
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a3
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label03
argument_list|,
name|parameter_values
operator|.
name|lettering03
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider04
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a4
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label04
argument_list|,
name|parameter_values
operator|.
name|lettering04
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider05
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a5
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label05
argument_list|,
name|parameter_values
operator|.
name|lettering05
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider06
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a6
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label06
argument_list|,
name|parameter_values
operator|.
name|lettering06
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider07
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a7
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label07
argument_list|,
name|parameter_values
operator|.
name|lettering07
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider08
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|a8
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_label_set
argument_list|(
name|widget_data
operator|.
name|label08
argument_list|,
name|parameter_values
operator|.
name|lettering08
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider09
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|r
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|adjustment
operator|=
operator|(
name|GtkAdjustment
operator|*
operator|)
name|widget_data
operator|.
name|slider10
expr_stmt|;
name|adjustment
operator|->
name|value
operator|=
name|parameter_values
operator|.
name|dr
expr_stmt|;
name|gtk_signal_emit_by_name
argument_list|(
name|GTK_OBJECT
argument_list|(
name|adjustment
argument_list|)
argument_list|,
literal|"value_changed"
argument_list|)
expr_stmt|;
name|gtk_toggle_button_set_state
argument_list|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget_data
operator|.
name|toggle01
argument_list|)
argument_list|,
name|parameter_values
operator|.
name|use_cutoff
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/******************************************************************************/
end_comment

begin_comment
comment|/*                          Callback functions                                */
end_comment

begin_comment
comment|/******************************************************************************/
end_comment

begin_function
DECL|function|close_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|close_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gtk_main_quit
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
DECL|function|ok_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|ok_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gtk_widget_destroy
argument_list|(
name|GTK_WIDGET
argument_list|(
name|data
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|cancel_callback (GtkWidget * widget,gpointer data)
name|void
name|cancel_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|do_action
operator|=
operator|-
literal|1
expr_stmt|;
name|gtk_main_quit
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a1_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a1_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a1
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a2_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a2_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a2
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a3_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a3_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a3
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a4_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a4_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a4
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a5_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a5_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a5
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a6_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a6_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a6
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a7_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a7_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a7
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|a8_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|a8_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|a8
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|use_cutoff_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|use_cutoff_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|GTK_TOGGLE_BUTTON
argument_list|(
name|widget
argument_list|)
operator|->
name|active
condition|)
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|r_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|r_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|r
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|dr_callback (GtkAdjustment * adjustment,gpointer data)
specifier|static
name|void
name|dr_callback
parameter_list|(
name|GtkAdjustment
modifier|*
name|adjustment
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|parameter_values
operator|.
name|dr
operator|=
name|adjustment
operator|->
name|value
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect01_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect01_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|0
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect02_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect02_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|1
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect03_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect03_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|2
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect04_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect04_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|3
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect05_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect05_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|4
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect06_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect06_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|5
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect07_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect07_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|6
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect08_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect08_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|7
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|effect09_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|effect09_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|gint
name|f
init|=
name|parameter_values
operator|.
name|current_function
decl_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a1
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a2
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a3
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a4
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a5
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a6
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a7
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|a8
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|use_cutoff
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|r
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
name|EffectsParameters
index|[
name|f
index|]
index|[
literal|8
index|]
operator|.
name|dr
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function01_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function01_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|0
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_R_r
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function02_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function02_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|1
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_R_phi
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function03_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function03_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|2
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_Phi_r
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function04_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function04_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|3
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_Phi_phi
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function05_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function05_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|4
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_R_r_Phi_phi
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function06_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function06_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|5
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_R_r_R_phi
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function07_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function07_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|6
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_Cosines
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|function08_callback (GtkWidget * widget,gpointer data)
specifier|static
name|void
name|function08_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering01
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a1
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering02
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a2
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering03
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a3
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering04
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a4
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering05
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a5
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering06
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a6
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering07
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a7
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|parameter_values
operator|.
name|lettering08
argument_list|,
name|parameter_names
index|[
literal|7
index|]
operator|.
name|name_a8
argument_list|)
expr_stmt|;
name|parameter_values
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a5
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a2
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a6
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a3
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a7
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a4
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|a8
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|use_cutoff
operator|=
literal|0
expr_stmt|;
name|parameter_values
operator|.
name|r
operator|=
literal|0.5
expr_stmt|;
name|parameter_values
operator|.
name|dr
operator|=
literal|0.2
expr_stmt|;
name|parameter_values
operator|.
name|current_function
operator|=
name|FUNCTION_Gauss
expr_stmt|;
name|do_update_preview
operator|=
literal|0
expr_stmt|;
name|update_dialog
argument_list|()
expr_stmt|;
name|do_update_preview
operator|=
literal|1
expr_stmt|;
name|update_preview
argument_list|(
name|preview_data
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/******************************************************************************/
end_comment

begin_comment
comment|/*                    Image manipulation functions                            */
end_comment

begin_comment
comment|/******************************************************************************/
end_comment

begin_function
DECL|function|image_action (GDrawable * drawable,Parameters params)
name|void
name|image_action
parameter_list|(
name|GDrawable
modifier|*
name|drawable
parameter_list|,
name|Parameters
name|params
parameter_list|)
block|{
name|gint
name|width
decl_stmt|,
name|height
decl_stmt|;
name|gint
name|bytes
decl_stmt|;
name|gint
name|x1
decl_stmt|,
name|y1
decl_stmt|,
name|x2
decl_stmt|,
name|y2
decl_stmt|;
name|GPixelRgn
name|src_rgn
decl_stmt|,
name|dest_rgn
decl_stmt|;
name|guchar
modifier|*
name|dest
decl_stmt|;
name|guchar
modifier|*
name|src
decl_stmt|;
name|guchar
name|r
decl_stmt|,
name|g
decl_stmt|,
name|b
decl_stmt|;
name|gfloat
name|u
decl_stmt|,
name|v
decl_stmt|;
name|gint
name|image_size
decl_stmt|;
name|gint
name|i
decl_stmt|,
name|j
decl_stmt|;
name|gint
name|count
decl_stmt|;
name|gimp_drawable_mask_bounds
argument_list|(
name|drawable
operator|->
name|id
argument_list|,
operator|&
name|x1
argument_list|,
operator|&
name|y1
argument_list|,
operator|&
name|x2
argument_list|,
operator|&
name|y2
argument_list|)
expr_stmt|;
name|width
operator|=
operator|(
name|x2
operator|-
name|x1
operator|)
expr_stmt|;
name|height
operator|=
operator|(
name|y2
operator|-
name|y1
operator|)
expr_stmt|;
name|bytes
operator|=
name|drawable
operator|->
name|bpp
expr_stmt|;
name|image_size
operator|=
name|width
operator|*
name|height
operator|*
name|bytes
expr_stmt|;
comment|/* Allocate the necessary storage memory */
name|src
operator|=
operator|(
name|guchar
operator|*
operator|)
name|malloc
argument_list|(
name|image_size
argument_list|)
expr_stmt|;
name|dest
operator|=
operator|(
name|guchar
operator|*
operator|)
name|malloc
argument_list|(
name|width
operator|*
name|bytes
argument_list|)
expr_stmt|;
name|gimp_pixel_rgn_init
argument_list|(
operator|&
name|src_rgn
argument_list|,
name|drawable
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|drawable
operator|->
name|width
argument_list|,
name|drawable
operator|->
name|height
argument_list|,
name|FALSE
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|gimp_pixel_rgn_init
argument_list|(
operator|&
name|dest_rgn
argument_list|,
name|drawable
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|drawable
operator|->
name|width
argument_list|,
name|drawable
operator|->
name|height
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
comment|/* Get the source image */
name|get_source_image
argument_list|(
name|src_rgn
argument_list|,
name|src
argument_list|,
name|x1
argument_list|,
name|y1
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|bytes
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|bytes
condition|)
block|{
case|case
literal|4
case|:
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|height
condition|;
name|j
operator|++
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|width
condition|;
name|i
operator|++
control|)
block|{
name|calculate_distortion_function
argument_list|(
name|i
argument_list|,
name|j
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
operator|&
name|u
argument_list|,
operator|&
name|v
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|u
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|u
operator|<
name|width
operator|)
operator|&&
operator|(
name|v
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|v
operator|<
name|height
operator|)
condition|)
block|{
name|calculate_pixel_color
argument_list|(
name|u
argument_list|,
name|v
argument_list|,
name|src
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|bytes
argument_list|,
operator|&
name|r
argument_list|,
operator|&
name|g
argument_list|,
operator|&
name|b
argument_list|)
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|r
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|g
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|b
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|255
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
else|else
block|{
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
name|gimp_pixel_rgn_set_row
argument_list|(
operator|&
name|dest_rgn
argument_list|,
name|dest
argument_list|,
name|x1
argument_list|,
name|j
operator|+
name|y1
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|gimp_progress_update
argument_list|(
operator|(
name|double
operator|)
name|j
operator|/
operator|(
name|double
operator|)
name|height
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|3
case|:
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|height
condition|;
name|j
operator|++
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|width
condition|;
name|i
operator|++
control|)
block|{
name|calculate_distortion_function
argument_list|(
name|i
argument_list|,
name|j
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
operator|&
name|u
argument_list|,
operator|&
name|v
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|u
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|u
operator|<
name|width
operator|)
operator|&&
operator|(
name|v
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|v
operator|<
name|height
operator|)
condition|)
block|{
name|calculate_pixel_color
argument_list|(
name|u
argument_list|,
name|v
argument_list|,
name|src
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|bytes
argument_list|,
operator|&
name|r
argument_list|,
operator|&
name|g
argument_list|,
operator|&
name|b
argument_list|)
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|r
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|g
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|b
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
else|else
block|{
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
name|gimp_pixel_rgn_set_row
argument_list|(
operator|&
name|dest_rgn
argument_list|,
name|dest
argument_list|,
name|x1
argument_list|,
name|j
operator|+
name|y1
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|gimp_progress_update
argument_list|(
operator|(
name|double
operator|)
name|j
operator|/
operator|(
name|double
operator|)
name|height
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|2
case|:
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|height
condition|;
name|j
operator|++
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|width
condition|;
name|i
operator|++
control|)
block|{
name|calculate_distortion_function
argument_list|(
name|i
argument_list|,
name|j
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
operator|&
name|u
argument_list|,
operator|&
name|v
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|u
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|u
operator|<
name|width
operator|)
operator|&&
operator|(
name|v
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|v
operator|<
name|height
operator|)
condition|)
block|{
name|calculate_pixel_color
argument_list|(
name|u
argument_list|,
name|v
argument_list|,
name|src
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|bytes
argument_list|,
operator|&
name|r
argument_list|,
operator|&
name|g
argument_list|,
operator|&
name|b
argument_list|)
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|r
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|255
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
else|else
block|{
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
name|gimp_pixel_rgn_set_row
argument_list|(
operator|&
name|dest_rgn
argument_list|,
name|dest
argument_list|,
name|x1
argument_list|,
name|j
operator|+
name|y1
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|gimp_progress_update
argument_list|(
operator|(
name|double
operator|)
name|j
operator|/
operator|(
name|double
operator|)
name|height
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|1
case|:
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|height
condition|;
name|j
operator|++
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|width
condition|;
name|i
operator|++
control|)
block|{
name|calculate_distortion_function
argument_list|(
name|i
argument_list|,
name|j
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
operator|&
name|u
argument_list|,
operator|&
name|v
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|u
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|u
operator|<
name|width
operator|)
operator|&&
operator|(
name|v
operator|>=
literal|0
operator|)
operator|&&
operator|(
name|v
operator|<
name|height
operator|)
condition|)
block|{
name|calculate_pixel_color
argument_list|(
name|u
argument_list|,
name|v
argument_list|,
name|src
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|bytes
argument_list|,
operator|&
name|r
argument_list|,
operator|&
name|g
argument_list|,
operator|&
name|b
argument_list|)
expr_stmt|;
name|dest
index|[
name|count
index|]
operator|=
name|r
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
else|else
block|{
name|dest
index|[
name|count
index|]
operator|=
literal|0
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
name|gimp_pixel_rgn_set_row
argument_list|(
operator|&
name|dest_rgn
argument_list|,
name|dest
argument_list|,
name|x1
argument_list|,
name|j
operator|+
name|y1
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|gimp_progress_update
argument_list|(
operator|(
name|double
operator|)
name|j
operator|/
operator|(
name|double
operator|)
name|height
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
comment|/*  merge the shadow, update the drawable  */
name|gimp_drawable_flush
argument_list|(
name|drawable
argument_list|)
expr_stmt|;
name|gimp_drawable_merge_shadow
argument_list|(
name|drawable
operator|->
name|id
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gimp_drawable_update
argument_list|(
name|drawable
operator|->
name|id
argument_list|,
name|x1
argument_list|,
name|y1
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|src
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|dest
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|polar_coordinates (gfloat x,gfloat y,gfloat * rho,gfloat * phi)
specifier|static
name|void
name|polar_coordinates
parameter_list|(
name|gfloat
name|x
parameter_list|,
name|gfloat
name|y
parameter_list|,
name|gfloat
modifier|*
name|rho
parameter_list|,
name|gfloat
modifier|*
name|phi
parameter_list|)
block|{
name|gfloat
name|r
decl_stmt|,
name|p
decl_stmt|;
comment|/* Calculate the radius */
name|r
operator|=
name|sqrt
argument_list|(
name|x
operator|*
name|x
operator|+
name|y
operator|*
name|y
argument_list|)
expr_stmt|;
comment|/* exceptions first .. */
if|if
condition|(
operator|(
name|x
operator|==
literal|0.0
operator|)
operator|&&
operator|(
name|y
operator|==
literal|0.0
operator|)
condition|)
name|p
operator|=
literal|0.0
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|x
operator|<
name|epsilon
operator|)
operator|&&
operator|(
name|x
operator|>
operator|-
name|epsilon
operator|)
operator|&&
operator|(
name|y
operator|>
literal|0.0
operator|)
condition|)
name|p
operator|=
name|M_PI
operator|/
literal|2.0
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|x
operator|<
name|epsilon
operator|)
operator|&&
operator|(
name|x
operator|>
operator|-
name|epsilon
operator|)
operator|&&
operator|(
name|y
operator|<
literal|0.0
operator|)
condition|)
name|p
operator|=
literal|3.0
operator|*
name|M_PI
operator|/
literal|2.0
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|x
operator|>
literal|0.0
operator|)
operator|&&
operator|(
name|y
operator|<
name|epsilon
operator|)
operator|&&
operator|(
name|y
operator|>
operator|-
name|epsilon
operator|)
condition|)
name|p
operator|=
literal|0.0
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|x
operator|<
literal|0.0
operator|)
operator|&&
operator|(
name|y
operator|<
name|epsilon
operator|)
operator|&&
operator|(
name|y
operator|>
operator|-
name|epsilon
operator|)
condition|)
name|p
operator|=
name|M_PI
expr_stmt|;
comment|/* simple cases in the four quadrants */
elseif|else
if|if
condition|(
operator|(
name|x
operator|>
literal|0.0
operator|)
operator|&&
operator|(
name|y
operator|>
literal|0.0
operator|)
condition|)
name|p
operator|=
name|atan
argument_list|(
name|y
operator|/
name|x
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|x
operator|<
literal|0.0
operator|)
operator|&&
operator|(
name|y
operator|>
literal|0.0
operator|)
condition|)
name|p
operator|=
name|M_PI
operator|-
name|atan
argument_list|(
operator|-
name|y
operator|/
name|x
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|x
operator|<
literal|0.0
operator|)
operator|&&
operator|(
name|y
operator|<
literal|0.0
operator|)
condition|)
name|p
operator|=
name|M_PI
operator|+
name|atan
argument_list|(
name|y
operator|/
name|x
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|x
operator|>
literal|0.0
operator|)
operator|&&
operator|(
name|y
operator|<
literal|0.0
operator|)
condition|)
name|p
operator|=
literal|2.0
operator|*
name|M_PI
operator|-
name|atan
argument_list|(
operator|-
name|y
operator|/
name|x
argument_list|)
expr_stmt|;
comment|/* Return the values */
operator|*
name|rho
operator|=
name|r
expr_stmt|;
operator|*
name|phi
operator|=
name|p
expr_stmt|;
block|}
end_function

begin_comment
comment|/* The distortion functions */
end_comment

begin_function
DECL|function|distortion_function01 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function01
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
name|gfloat
name|r2
decl_stmt|;
name|r2
operator|=
name|x1
operator|*
name|x1
expr_stmt|;
operator|*
name|delta_x1
operator|=
name|parameter_values
operator|.
name|a1
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a2
operator|*
name|r2
operator|+
name|parameter_values
operator|.
name|a3
operator|*
name|r2
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a4
operator|*
name|r2
operator|*
name|r2
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function02 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function02
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
operator|*
name|delta_x1
operator|=
name|parameter_values
operator|.
name|a1
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a2
argument_list|)
operator|+
name|parameter_values
operator|.
name|a3
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a4
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function03 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function03
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
name|gfloat
name|r2
decl_stmt|;
name|r2
operator|=
name|x1
operator|*
name|x1
expr_stmt|;
operator|*
name|delta_x2
operator|=
name|parameter_values
operator|.
name|a1
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a2
operator|*
name|r2
operator|+
name|parameter_values
operator|.
name|a3
operator|*
name|r2
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a4
operator|*
name|r2
operator|*
name|r2
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function04 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function04
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
operator|*
name|delta_x2
operator|=
name|parameter_values
operator|.
name|a1
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a2
argument_list|)
operator|+
name|parameter_values
operator|.
name|a3
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a4
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function05 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function05
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
name|gfloat
name|P
decl_stmt|,
name|Q
decl_stmt|;
name|gfloat
name|r2
decl_stmt|;
name|r2
operator|=
name|x1
operator|*
name|x1
expr_stmt|;
name|P
operator|=
name|parameter_values
operator|.
name|a1
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a2
operator|*
name|r2
operator|+
name|parameter_values
operator|.
name|a3
operator|*
name|r2
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a4
operator|*
name|r2
operator|*
name|r2
expr_stmt|;
name|Q
operator|=
name|parameter_values
operator|.
name|a5
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a6
argument_list|)
operator|+
name|parameter_values
operator|.
name|a7
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a8
argument_list|)
expr_stmt|;
operator|*
name|delta_x2
operator|=
name|P
operator|*
name|Q
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function06 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function06
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
name|gfloat
name|P
decl_stmt|,
name|Q
decl_stmt|;
name|gfloat
name|r2
decl_stmt|;
name|r2
operator|=
name|x1
operator|*
name|x1
expr_stmt|;
name|P
operator|=
name|parameter_values
operator|.
name|a1
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a2
operator|*
name|r2
operator|+
name|parameter_values
operator|.
name|a3
operator|*
name|r2
operator|*
name|x1
operator|+
name|parameter_values
operator|.
name|a4
operator|*
name|r2
operator|*
name|r2
expr_stmt|;
name|Q
operator|=
name|parameter_values
operator|.
name|a5
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a6
argument_list|)
operator|+
name|parameter_values
operator|.
name|a7
operator|*
name|cos
argument_list|(
name|x2
operator|*
name|parameter_values
operator|.
name|a8
argument_list|)
expr_stmt|;
operator|*
name|delta_x2
operator|=
name|P
operator|*
name|Q
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function07 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function07
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
operator|*
name|delta_x1
operator|=
literal|0.1
operator|*
name|parameter_values
operator|.
name|a1
operator|*
name|sin
argument_list|(
literal|5.0
operator|*
name|parameter_values
operator|.
name|a3
operator|*
name|x1
argument_list|)
operator|*
name|cos
argument_list|(
literal|5.0
operator|*
name|parameter_values
operator|.
name|a4
operator|*
name|x1
argument_list|)
expr_stmt|;
operator|*
name|delta_x2
operator|=
literal|0.1
operator|*
name|parameter_values
operator|.
name|a2
operator|*
name|sin
argument_list|(
literal|5.0
operator|*
name|parameter_values
operator|.
name|a5
operator|*
name|x2
argument_list|)
operator|*
name|cos
argument_list|(
literal|5.0
operator|*
name|parameter_values
operator|.
name|a6
operator|*
name|x2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function08 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function08
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
name|gfloat
name|x0
decl_stmt|,
name|y0
decl_stmt|;
name|gfloat
name|lambda1
decl_stmt|,
name|lambda2
decl_stmt|;
name|x0
operator|=
name|parameter_values
operator|.
name|a3
operator|/
literal|10.0
expr_stmt|;
name|y0
operator|=
name|parameter_values
operator|.
name|a4
operator|/
literal|10.0
expr_stmt|;
name|lambda1
operator|=
literal|30.0
operator|/
operator|(
literal|10.1
operator|+
name|parameter_values
operator|.
name|a5
operator|)
expr_stmt|;
name|lambda2
operator|=
literal|30.0
operator|/
operator|(
literal|10.1
operator|+
name|parameter_values
operator|.
name|a6
operator|)
expr_stmt|;
operator|*
name|delta_x1
operator|=
literal|0.5
operator|*
name|parameter_values
operator|.
name|a1
operator|*
operator|(
name|x1
operator|-
name|x0
operator|)
operator|*
name|exp
argument_list|(
operator|-
name|lambda1
operator|*
operator|(
name|x1
operator|-
name|x0
operator|)
operator|*
operator|(
name|x1
operator|-
name|x0
operator|)
argument_list|)
expr_stmt|;
operator|*
name|delta_x2
operator|=
literal|0.5
operator|*
name|parameter_values
operator|.
name|a2
operator|*
operator|(
name|x2
operator|-
name|y0
operator|)
operator|*
name|exp
argument_list|(
operator|-
name|lambda2
operator|*
operator|(
name|x2
operator|-
name|y0
operator|)
operator|*
operator|(
name|x2
operator|-
name|y0
operator|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|distortion_function09 (gfloat x1,gfloat x2,gfloat * delta_x1,gfloat * delta_x2)
specifier|static
name|void
name|distortion_function09
parameter_list|(
name|gfloat
name|x1
parameter_list|,
name|gfloat
name|x2
parameter_list|,
name|gfloat
modifier|*
name|delta_x1
parameter_list|,
name|gfloat
modifier|*
name|delta_x2
parameter_list|)
block|{
comment|/*  *delta_x1 = 0.1*parameter_values.a1*sin(5.0*parameter_values.a3*x1)*cos(5.0*parameter_values.a4*x1);  *delta_x2 = 0.1*parameter_values.a2*sin(5.0*parameter_values.a5*x2)*cos(5.0*parameter_values.a6*x2); */
block|}
end_function

begin_function
DECL|function|calculate_distortion_function (gint i,gint j,gint width,gint height,gfloat * u,gfloat * v)
specifier|static
name|void
name|calculate_distortion_function
parameter_list|(
name|gint
name|i
parameter_list|,
name|gint
name|j
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|,
name|gfloat
modifier|*
name|u
parameter_list|,
name|gfloat
modifier|*
name|v
parameter_list|)
block|{
name|gint
name|x
decl_stmt|,
name|y
decl_stmt|;
name|gfloat
name|scale_factor
decl_stmt|;
name|gint
name|mx
decl_stmt|,
name|my
decl_stmt|;
name|gfloat
name|scaled_x
decl_stmt|,
name|scaled_y
decl_stmt|;
name|gfloat
name|delta_rho
decl_stmt|,
name|delta_phi
decl_stmt|;
name|gfloat
name|delta_x
decl_stmt|,
name|delta_y
decl_stmt|;
name|gfloat
name|rho
decl_stmt|,
name|phi
decl_stmt|;
name|gfloat
name|damp
decl_stmt|;
name|mx
operator|=
name|width
operator|/
literal|2
expr_stmt|;
name|my
operator|=
name|height
operator|/
literal|2
expr_stmt|;
comment|/* The scale factor is chosed such that the scaled image fits into a unit square. */
name|scale_factor
operator|=
operator|(
name|gfloat
operator|)
name|MAX
argument_list|(
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|x
operator|=
name|i
operator|-
name|mx
expr_stmt|;
name|y
operator|=
name|my
operator|-
name|j
expr_stmt|;
name|scaled_x
operator|=
operator|(
operator|(
name|float
operator|)
name|x
operator|)
operator|/
name|scale_factor
expr_stmt|;
name|scaled_y
operator|=
operator|(
operator|(
name|float
operator|)
name|y
operator|)
operator|/
name|scale_factor
expr_stmt|;
switch|switch
condition|(
name|parameter_values
operator|.
name|current_function
condition|)
block|{
case|case
name|FUNCTION_R_r
case|:
comment|/* Calculate the (u, v) coordinates of the distorted image           from the original image */
name|polar_coordinates
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|rho
argument_list|,
operator|&
name|phi
argument_list|)
expr_stmt|;
name|distortion_function01
argument_list|(
name|rho
argument_list|,
name|phi
argument_list|,
operator|&
name|delta_rho
argument_list|,
operator|&
name|delta_phi
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_rho
operator|*
name|cos
argument_list|(
name|phi
argument_list|)
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|-
name|damp
operator|*
name|scale_factor
operator|*
name|delta_rho
operator|*
name|sin
argument_list|(
name|phi
argument_list|)
expr_stmt|;
break|break;
case|case
name|FUNCTION_R_phi
case|:
comment|/* Calculate the (u, v) coordinates of the distorted image           from the original image */
name|polar_coordinates
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|rho
argument_list|,
operator|&
name|phi
argument_list|)
expr_stmt|;
name|distortion_function02
argument_list|(
name|rho
argument_list|,
name|phi
argument_list|,
operator|&
name|delta_rho
argument_list|,
operator|&
name|delta_phi
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_rho
operator|*
name|cos
argument_list|(
name|phi
argument_list|)
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|-
name|damp
operator|*
name|scale_factor
operator|*
name|delta_rho
operator|*
name|sin
argument_list|(
name|phi
argument_list|)
expr_stmt|;
break|break;
case|case
name|FUNCTION_Phi_r
case|:
comment|/* Calculate the (u, v) coordinates of the distorted image           from the original image */
name|polar_coordinates
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|rho
argument_list|,
operator|&
name|phi
argument_list|)
expr_stmt|;
name|distortion_function03
argument_list|(
name|rho
argument_list|,
name|phi
argument_list|,
operator|&
name|delta_rho
argument_list|,
operator|&
name|delta_phi
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|sin
argument_list|(
name|phi
argument_list|)
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|cos
argument_list|(
name|phi
argument_list|)
expr_stmt|;
break|break;
case|case
name|FUNCTION_Phi_phi
case|:
comment|/* Calculate the (u, v) coordinates of the distorted image           from the original image */
name|polar_coordinates
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|rho
argument_list|,
operator|&
name|phi
argument_list|)
expr_stmt|;
name|distortion_function04
argument_list|(
name|rho
argument_list|,
name|phi
argument_list|,
operator|&
name|delta_rho
argument_list|,
operator|&
name|delta_phi
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|sin
argument_list|(
name|phi
argument_list|)
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|cos
argument_list|(
name|phi
argument_list|)
expr_stmt|;
break|break;
case|case
name|FUNCTION_R_r_Phi_phi
case|:
comment|/* Calculate the (u, v) coordinates of the distorted image           from the original image */
name|polar_coordinates
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|rho
argument_list|,
operator|&
name|phi
argument_list|)
expr_stmt|;
name|distortion_function05
argument_list|(
name|rho
argument_list|,
name|phi
argument_list|,
operator|&
name|delta_rho
argument_list|,
operator|&
name|delta_phi
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|sin
argument_list|(
name|phi
argument_list|)
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|cos
argument_list|(
name|phi
argument_list|)
expr_stmt|;
break|break;
case|case
name|FUNCTION_R_r_R_phi
case|:
comment|/* Calculate the (u, v) coordinates of the distorted image           from the original image */
name|polar_coordinates
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|rho
argument_list|,
operator|&
name|phi
argument_list|)
expr_stmt|;
name|distortion_function06
argument_list|(
name|rho
argument_list|,
name|phi
argument_list|,
operator|&
name|delta_rho
argument_list|,
operator|&
name|delta_phi
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|cos
argument_list|(
name|phi
argument_list|)
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|-
name|damp
operator|*
name|scale_factor
operator|*
name|delta_phi
operator|*
name|sin
argument_list|(
name|phi
argument_list|)
expr_stmt|;
break|break;
case|case
name|FUNCTION_Cosines
case|:
comment|/* Calculate the (u, v) coordinates of the distorted image           from the original image */
name|distortion_function07
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|delta_x
argument_list|,
operator|&
name|delta_y
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_x
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|-
name|damp
operator|*
name|scale_factor
operator|*
name|delta_y
expr_stmt|;
break|break;
case|case
name|FUNCTION_Gauss
case|:
name|distortion_function08
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|,
operator|&
name|delta_x
argument_list|,
operator|&
name|delta_y
argument_list|)
expr_stmt|;
comment|/* calculate the damping factor */
name|damp
operator|=
literal|1.0
expr_stmt|;
if|if
condition|(
name|parameter_values
operator|.
name|use_cutoff
operator|!=
literal|0
condition|)
name|damp
operator|=
name|cutoff_function
argument_list|(
name|scaled_x
argument_list|,
name|scaled_y
argument_list|)
expr_stmt|;
operator|*
name|u
operator|=
operator|(
name|float
operator|)
name|x
operator|+
operator|(
name|float
operator|)
name|mx
operator|+
name|damp
operator|*
name|scale_factor
operator|*
name|delta_x
expr_stmt|;
operator|*
name|v
operator|=
operator|(
name|float
operator|)
name|my
operator|-
operator|(
name|float
operator|)
name|y
operator|-
name|damp
operator|*
name|scale_factor
operator|*
name|delta_y
expr_stmt|;
break|break;
block|}
block|}
end_function

begin_function
DECL|function|cutoff_function (gfloat u,gfloat v)
specifier|static
name|gfloat
name|cutoff_function
parameter_list|(
name|gfloat
name|u
parameter_list|,
name|gfloat
name|v
parameter_list|)
block|{
name|gfloat
name|radius
decl_stmt|;
name|gfloat
name|x
decl_stmt|;
name|radius
operator|=
name|sqrt
argument_list|(
name|u
operator|*
name|u
operator|+
name|v
operator|*
name|v
argument_list|)
expr_stmt|;
if|if
condition|(
name|radius
operator|<=
name|parameter_values
operator|.
name|r
condition|)
return|return
operator|(
literal|1.0
operator|)
return|;
name|x
operator|=
operator|(
name|radius
operator|-
name|parameter_values
operator|.
name|r
operator|)
operator|/
operator|(
literal|0.2
operator|*
name|parameter_values
operator|.
name|dr
operator|)
expr_stmt|;
return|return
operator|(
name|exp
argument_list|(
operator|-
name|x
operator|*
name|x
argument_list|)
operator|)
return|;
block|}
end_function

begin_function
DECL|function|calculate_pixel_color (gfloat u,gfloat v,guchar * source,gint width,gint height,gint bpp,guchar * r,guchar * g,guchar * b)
specifier|static
name|void
name|calculate_pixel_color
parameter_list|(
name|gfloat
name|u
parameter_list|,
name|gfloat
name|v
parameter_list|,
name|guchar
modifier|*
name|source
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|,
name|gint
name|bpp
parameter_list|,
name|guchar
modifier|*
name|r
parameter_list|,
name|guchar
modifier|*
name|g
parameter_list|,
name|guchar
modifier|*
name|b
parameter_list|)
block|{
name|gint
name|address
decl_stmt|;
name|gfloat
name|ru
decl_stmt|,
name|rv
decl_stmt|;
name|gint
name|u0
decl_stmt|,
name|v0
decl_stmt|;
name|gfloat
name|w0
decl_stmt|,
name|w1
decl_stmt|,
name|w2
decl_stmt|,
name|w3
decl_stmt|;
name|guchar
name|red
index|[
literal|4
index|]
decl_stmt|;
name|guchar
name|green
index|[
literal|4
index|]
decl_stmt|;
name|guchar
name|blue
index|[
literal|4
index|]
decl_stmt|;
if|if
condition|(
operator|(
operator|(
name|gint
operator|)
name|u
operator|<
name|width
operator|-
literal|1
operator|)
operator|&&
operator|(
operator|(
name|gint
operator|)
name|v
operator|<
name|height
operator|-
literal|1
operator|)
condition|)
block|{
name|ru
operator|=
name|u
operator|-
operator|(
name|int
operator|)
name|u
expr_stmt|;
name|rv
operator|=
name|v
operator|-
operator|(
name|int
operator|)
name|v
expr_stmt|;
comment|// Calculate the area weights.
name|w0
operator|=
operator|(
literal|1.0
operator|-
name|ru
operator|)
operator|*
name|rv
expr_stmt|;
name|w1
operator|=
name|rv
operator|*
name|ru
expr_stmt|;
name|w2
operator|=
operator|(
literal|1.0
operator|-
name|ru
operator|)
operator|*
operator|(
literal|1.0
operator|-
name|rv
operator|)
expr_stmt|;
name|w3
operator|=
operator|(
literal|1.0
operator|-
name|rv
operator|)
operator|*
name|ru
expr_stmt|;
comment|// Get the four pixel colors depending on bpp.
switch|switch
condition|(
name|bpp
condition|)
block|{
case|case
literal|4
case|:
case|case
literal|3
case|:
name|address
operator|=
name|bpp
operator|*
operator|(
operator|(
name|int
operator|)
name|v
operator|*
name|width
operator|+
operator|(
name|int
operator|)
name|u
operator|)
expr_stmt|;
name|red
index|[
literal|0
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
name|green
index|[
literal|0
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|1
index|]
expr_stmt|;
name|blue
index|[
literal|0
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|2
index|]
expr_stmt|;
name|address
operator|=
name|bpp
operator|*
operator|(
operator|(
name|int
operator|)
name|v
operator|*
name|width
operator|+
call|(
name|int
call|)
argument_list|(
name|u
operator|+
literal|1.0
argument_list|)
operator|)
expr_stmt|;
name|red
index|[
literal|1
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
name|green
index|[
literal|1
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|1
index|]
expr_stmt|;
name|blue
index|[
literal|1
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|2
index|]
expr_stmt|;
name|address
operator|=
name|bpp
operator|*
operator|(
call|(
name|int
call|)
argument_list|(
name|v
operator|-
literal|1.0
argument_list|)
operator|*
name|width
operator|+
operator|(
name|int
operator|)
name|u
operator|)
expr_stmt|;
name|red
index|[
literal|2
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
name|green
index|[
literal|2
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|1
index|]
expr_stmt|;
name|blue
index|[
literal|2
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|2
index|]
expr_stmt|;
name|address
operator|=
name|bpp
operator|*
operator|(
call|(
name|int
call|)
argument_list|(
name|v
operator|-
literal|1.0
argument_list|)
operator|*
name|width
operator|+
call|(
name|int
call|)
argument_list|(
name|u
operator|+
literal|1.0
argument_list|)
operator|)
expr_stmt|;
name|red
index|[
literal|3
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
name|green
index|[
literal|3
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|1
index|]
expr_stmt|;
name|blue
index|[
literal|3
index|]
operator|=
name|source
index|[
name|address
operator|+
literal|2
index|]
expr_stmt|;
operator|*
name|r
operator|=
name|w0
operator|*
name|red
index|[
literal|0
index|]
operator|+
name|w1
operator|*
name|red
index|[
literal|1
index|]
operator|+
name|w2
operator|*
name|red
index|[
literal|2
index|]
operator|+
name|w3
operator|*
name|red
index|[
literal|3
index|]
expr_stmt|;
operator|*
name|g
operator|=
name|w0
operator|*
name|green
index|[
literal|0
index|]
operator|+
name|w1
operator|*
name|green
index|[
literal|1
index|]
operator|+
name|w2
operator|*
name|green
index|[
literal|2
index|]
operator|+
name|w3
operator|*
name|green
index|[
literal|3
index|]
expr_stmt|;
operator|*
name|b
operator|=
name|w0
operator|*
name|blue
index|[
literal|0
index|]
operator|+
name|w1
operator|*
name|blue
index|[
literal|1
index|]
operator|+
name|w2
operator|*
name|blue
index|[
literal|2
index|]
operator|+
name|w3
operator|*
name|blue
index|[
literal|3
index|]
expr_stmt|;
break|break;
comment|/* For grayscale images, the grayvalue is stored in the       red component.      */
case|case
literal|2
case|:
case|case
literal|1
case|:
name|address
operator|=
name|bpp
operator|*
operator|(
operator|(
name|int
operator|)
name|v
operator|*
name|width
operator|+
operator|(
name|int
operator|)
name|u
operator|)
expr_stmt|;
name|red
index|[
literal|0
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
name|address
operator|=
name|bpp
operator|*
operator|(
operator|(
name|int
operator|)
name|v
operator|*
name|width
operator|+
call|(
name|int
call|)
argument_list|(
name|u
operator|+
literal|1.0
argument_list|)
operator|)
expr_stmt|;
name|red
index|[
literal|1
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
name|address
operator|=
name|bpp
operator|*
operator|(
call|(
name|int
call|)
argument_list|(
name|v
operator|-
literal|1.0
argument_list|)
operator|*
name|width
operator|+
operator|(
name|int
operator|)
name|u
operator|)
expr_stmt|;
name|red
index|[
literal|2
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
name|address
operator|=
name|bpp
operator|*
operator|(
call|(
name|int
call|)
argument_list|(
name|v
operator|-
literal|1.0
argument_list|)
operator|*
name|width
operator|+
call|(
name|int
call|)
argument_list|(
name|u
operator|+
literal|1.0
argument_list|)
operator|)
expr_stmt|;
name|red
index|[
literal|3
index|]
operator|=
name|source
index|[
name|address
index|]
expr_stmt|;
operator|*
name|r
operator|=
name|w0
operator|*
name|red
index|[
literal|0
index|]
operator|+
name|w1
operator|*
name|red
index|[
literal|1
index|]
operator|+
name|w2
operator|*
name|red
index|[
literal|2
index|]
operator|+
name|w3
operator|*
name|red
index|[
literal|3
index|]
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function

begin_function
DECL|function|get_source_image (GPixelRgn source_rgn,guchar * buffer,gint x,gint y,gint width,gint height,gint bytes)
specifier|static
name|void
name|get_source_image
parameter_list|(
name|GPixelRgn
name|source_rgn
parameter_list|,
name|guchar
modifier|*
name|buffer
parameter_list|,
name|gint
name|x
parameter_list|,
name|gint
name|y
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|,
name|gint
name|bytes
parameter_list|)
block|{
name|gint
name|offset
decl_stmt|;
name|gint
name|i
decl_stmt|,
name|j
decl_stmt|;
name|guchar
modifier|*
name|src_buffer
decl_stmt|;
name|src_buffer
operator|=
operator|(
name|guchar
operator|*
operator|)
name|malloc
argument_list|(
name|width
operator|*
name|bytes
argument_list|)
expr_stmt|;
name|offset
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|height
condition|;
name|j
operator|++
control|)
block|{
name|gimp_pixel_rgn_get_row
argument_list|(
operator|&
name|source_rgn
argument_list|,
name|src_buffer
argument_list|,
name|x
argument_list|,
name|j
operator|+
name|y
argument_list|,
name|width
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|bytes
operator|*
name|width
condition|;
name|i
operator|++
control|)
name|buffer
index|[
name|i
operator|+
name|offset
index|]
operator|=
name|src_buffer
index|[
name|i
index|]
expr_stmt|;
name|offset
operator|+=
name|bytes
operator|*
name|width
expr_stmt|;
block|}
name|free
argument_list|(
name|src_buffer
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

