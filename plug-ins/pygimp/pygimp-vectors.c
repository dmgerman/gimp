begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* -*- Mode: C; c-basic-offset: 4 -*-  * Gimp-Python - allows the writing of Gimp plugins in Python.  * Copyright (C) 2006  Manish Singh<yosh@gimp.org>  *  * This program is free software: you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 3 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program.  If not, see<http://www.gnu.org/licenses/>.  */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|HAVE_CONFIG_H
end_ifdef

begin_include
include|#
directive|include
file|<config.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|"pygimp.h"
end_include

begin_function_decl
specifier|static
name|PyObject
modifier|*
name|vectors_bezier_stroke_new
parameter_list|(
name|PyGimpVectors
modifier|*
name|vectors
parameter_list|,
name|int
name|stroke
parameter_list|)
function_decl|;
end_function_decl

begin_typedef
DECL|struct|__anon2bfb319e0108
typedef|typedef
struct|struct
block|{
name|PyObject_HEAD
DECL|member|vectors_ID
name|gint32
name|vectors_ID
decl_stmt|;
DECL|member|stroke
name|int
name|stroke
decl_stmt|;
DECL|typedef|PyGimpVectorsStroke
block|}
name|PyGimpVectorsStroke
typedef|;
end_typedef

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_get_length (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_get_length
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|precision
decl_stmt|;
name|double
name|length
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"precision"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"d:get_length"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|precision
argument_list|)
condition|)
return|return
name|NULL
return|;
name|length
operator|=
name|gimp_vectors_stroke_get_length
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|precision
argument_list|)
expr_stmt|;
return|return
name|PyFloat_FromDouble
argument_list|(
name|length
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_get_point_at_dist (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_get_point_at_dist
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|dist
decl_stmt|,
name|precision
decl_stmt|;
name|double
name|x
decl_stmt|,
name|y
decl_stmt|,
name|slope
decl_stmt|;
name|gboolean
name|valid
decl_stmt|;
name|PyObject
modifier|*
name|ret
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"dist"
block|,
literal|"precision"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"dd:get_point_at_dist"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|dist
argument_list|,
operator|&
name|precision
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_stroke_get_point_at_dist
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|dist
argument_list|,
name|precision
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|,
operator|&
name|slope
argument_list|,
operator|&
name|valid
argument_list|)
expr_stmt|;
name|ret
operator|=
name|PyTuple_New
argument_list|(
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret
operator|==
name|NULL
condition|)
return|return
name|NULL
return|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|0
argument_list|,
name|PyFloat_FromDouble
argument_list|(
name|x
argument_list|)
argument_list|)
expr_stmt|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|1
argument_list|,
name|PyFloat_FromDouble
argument_list|(
name|y
argument_list|)
argument_list|)
expr_stmt|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|2
argument_list|,
name|PyFloat_FromDouble
argument_list|(
name|slope
argument_list|)
argument_list|)
expr_stmt|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|3
argument_list|,
name|PyBool_FromLong
argument_list|(
name|valid
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_close (PyGimpVectorsStroke * self)
name|vs_close
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|)
block|{
name|gimp_vectors_stroke_close
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_translate (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_translate
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|off_x
decl_stmt|,
name|off_y
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"off_x"
block|,
literal|"off_y"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"dd:translate"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|off_x
argument_list|,
operator|&
name|off_y
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_stroke_translate
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|off_x
argument_list|,
name|off_y
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_scale (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_scale
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|scale_x
decl_stmt|,
name|scale_y
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"scale_x"
block|,
literal|"scale_y"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"dd:scale"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|scale_x
argument_list|,
operator|&
name|scale_y
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_stroke_scale
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|scale_x
argument_list|,
name|scale_y
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_rotate (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_rotate
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|center_x
decl_stmt|,
name|center_y
decl_stmt|,
name|angle
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"center_x"
block|,
literal|"center_y"
block|,
literal|"angle"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"ddd:rotate"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|center_x
argument_list|,
operator|&
name|center_y
argument_list|,
operator|&
name|angle
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_stroke_rotate
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|center_x
argument_list|,
name|center_y
argument_list|,
name|angle
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_flip (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_flip
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|int
name|flip_type
decl_stmt|;
name|double
name|axis
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"flip_type"
block|,
literal|"axis"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"id:flip"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|flip_type
argument_list|,
operator|&
name|axis
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_stroke_flip
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|flip_type
argument_list|,
name|axis
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_flip_free (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_flip_free
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|x1
decl_stmt|,
name|y1
decl_stmt|,
name|x2
decl_stmt|,
name|y2
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"x1"
block|,
literal|"y1"
block|,
literal|"x2"
block|,
literal|"y2"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"dddd:flip_free"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|x1
argument_list|,
operator|&
name|y1
argument_list|,
operator|&
name|x2
argument_list|,
operator|&
name|y2
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_stroke_flip_free
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|x1
argument_list|,
name|y1
argument_list|,
name|x2
argument_list|,
name|y2
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_interpolate (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vs_interpolate
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|precision
decl_stmt|;
name|double
modifier|*
name|coords
decl_stmt|;
name|int
name|i
decl_stmt|,
name|num_coords
decl_stmt|;
name|gboolean
name|closed
decl_stmt|;
name|PyObject
modifier|*
name|ret
decl_stmt|,
modifier|*
name|ret_coords
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"precision"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"d:interpolate"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|precision
argument_list|)
condition|)
return|return
name|NULL
return|;
name|coords
operator|=
name|gimp_vectors_stroke_interpolate
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|precision
argument_list|,
operator|&
name|num_coords
argument_list|,
operator|&
name|closed
argument_list|)
expr_stmt|;
name|ret
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret
operator|==
name|NULL
condition|)
return|return
name|NULL
return|;
name|ret_coords
operator|=
name|PyList_New
argument_list|(
name|num_coords
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_coords
operator|==
name|NULL
condition|)
block|{
name|Py_DECREF
argument_list|(
name|ret
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|num_coords
condition|;
name|i
operator|++
control|)
name|PyList_SetItem
argument_list|(
name|ret_coords
argument_list|,
name|i
argument_list|,
name|PyFloat_FromDouble
argument_list|(
name|coords
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|0
argument_list|,
name|ret_coords
argument_list|)
expr_stmt|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|1
argument_list|,
name|PyBool_FromLong
argument_list|(
name|closed
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|vs_methods
specifier|static
name|PyMethodDef
name|vs_methods
index|[]
init|=
block|{
block|{
literal|"get_length"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_get_length
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"get_point_at_dist"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_get_point_at_dist
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"close"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_close
block|,
name|METH_NOARGS
block|}
block|,
block|{
literal|"translate"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_translate
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"scale"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_scale
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"rotate"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_rotate
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"flip"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_flip
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"flip_free"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_flip_free
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"interpolate"
block|,
operator|(
name|PyCFunction
operator|)
name|vs_interpolate
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_get_ID (PyGimpVectorsStroke * self,void * closure)
name|vs_get_ID
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|PyInt_FromLong
argument_list|(
name|self
operator|->
name|stroke
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_get_vectors_ID (PyGimpVectorsStroke * self,void * closure)
name|vs_get_vectors_ID
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|PyInt_FromLong
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_get_points (PyGimpVectorsStroke * self,void * closure)
name|vs_get_points
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
name|double
modifier|*
name|controlpoints
decl_stmt|;
name|int
name|i
decl_stmt|,
name|num_points
decl_stmt|;
name|gboolean
name|closed
decl_stmt|;
name|PyObject
modifier|*
name|ret
decl_stmt|,
modifier|*
name|ret_points
decl_stmt|;
name|gimp_vectors_stroke_get_points
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
operator|&
name|num_points
argument_list|,
operator|&
name|controlpoints
argument_list|,
operator|&
name|closed
argument_list|)
expr_stmt|;
name|ret
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret
operator|==
name|NULL
condition|)
return|return
name|NULL
return|;
name|ret_points
operator|=
name|PyList_New
argument_list|(
name|num_points
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_points
operator|==
name|NULL
condition|)
block|{
name|Py_DECREF
argument_list|(
name|ret
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|num_points
condition|;
name|i
operator|++
control|)
name|PyList_SetItem
argument_list|(
name|ret_points
argument_list|,
name|i
argument_list|,
name|PyFloat_FromDouble
argument_list|(
name|controlpoints
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|0
argument_list|,
name|ret_points
argument_list|)
expr_stmt|;
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
literal|1
argument_list|,
name|PyBool_FromLong
argument_list|(
name|closed
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|vs_getsets
specifier|static
name|PyGetSetDef
name|vs_getsets
index|[]
init|=
block|{
block|{
literal|"ID"
block|,
operator|(
name|getter
operator|)
name|vs_get_ID
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|,
block|{
literal|"vectors_ID"
block|,
operator|(
name|getter
operator|)
name|vs_get_vectors_ID
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|,
block|{
literal|"points"
block|,
operator|(
name|getter
operator|)
name|vs_get_points
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|,
block|{
name|NULL
block|,
operator|(
name|getter
operator|)
literal|0
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
DECL|function|vs_dealloc (PyGimpVectorsStroke * self)
name|vs_dealloc
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|)
block|{
name|PyObject_DEL
argument_list|(
name|self
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vs_repr (PyGimpVectorsStroke * self)
name|vs_repr
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|)
block|{
name|PyObject
modifier|*
name|s
decl_stmt|;
name|char
modifier|*
name|name
decl_stmt|;
name|name
operator|=
name|gimp_item_get_name
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|)
expr_stmt|;
name|s
operator|=
name|PyString_FromFormat
argument_list|(
literal|"<gimp.VectorsStroke %d of gimp.Vectors '%s'>"
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|name
condition|?
name|name
else|:
literal|"(null)"
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|name
argument_list|)
expr_stmt|;
return|return
name|s
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vs_cmp (PyGimpVectorsStroke * self,PyGimpVectorsStroke * other)
name|vs_cmp
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyGimpVectorsStroke
modifier|*
name|other
parameter_list|)
block|{
if|if
condition|(
name|self
operator|->
name|vectors_ID
operator|==
name|other
operator|->
name|vectors_ID
condition|)
block|{
if|if
condition|(
name|self
operator|->
name|stroke
operator|==
name|other
operator|->
name|stroke
condition|)
return|return
literal|0
return|;
if|if
condition|(
name|self
operator|->
name|stroke
operator|>
name|other
operator|->
name|stroke
condition|)
return|return
operator|-
literal|1
return|;
return|return
literal|1
return|;
block|}
if|if
condition|(
name|self
operator|->
name|vectors_ID
operator|>
name|other
operator|->
name|vectors_ID
condition|)
return|return
operator|-
literal|1
return|;
return|return
literal|1
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|PyGimpVectorsStroke_Type
name|PyTypeObject
name|PyGimpVectorsStroke_Type
init|=
block|{
name|PyObject_HEAD_INIT
argument_list|(
name|NULL
argument_list|)
literal|0
block|,
comment|/* ob_size */
literal|"gimp.VectorsStroke"
block|,
comment|/* tp_name */
sizeof|sizeof
argument_list|(
name|PyGimpVectorsStroke
argument_list|)
block|,
comment|/* tp_basicsize */
literal|0
block|,
comment|/* tp_itemsize */
comment|/* methods */
operator|(
name|destructor
operator|)
name|vs_dealloc
block|,
comment|/* tp_dealloc */
operator|(
name|printfunc
operator|)
literal|0
block|,
comment|/* tp_print */
operator|(
name|getattrfunc
operator|)
literal|0
block|,
comment|/* tp_getattr */
operator|(
name|setattrfunc
operator|)
literal|0
block|,
comment|/* tp_setattr */
operator|(
name|cmpfunc
operator|)
name|vs_cmp
block|,
comment|/* tp_compare */
operator|(
name|reprfunc
operator|)
name|vs_repr
block|,
comment|/* tp_repr */
literal|0
block|,
comment|/* tp_as_number */
literal|0
block|,
comment|/* tp_as_sequence */
literal|0
block|,
comment|/* tp_as_mapping */
operator|(
name|hashfunc
operator|)
literal|0
block|,
comment|/* tp_hash */
operator|(
name|ternaryfunc
operator|)
literal|0
block|,
comment|/* tp_call */
operator|(
name|reprfunc
operator|)
literal|0
block|,
comment|/* tp_str */
operator|(
name|getattrofunc
operator|)
literal|0
block|,
comment|/* tp_getattro */
operator|(
name|setattrofunc
operator|)
literal|0
block|,
comment|/* tp_setattro */
literal|0
block|,
comment|/* tp_as_buffer */
name|Py_TPFLAGS_DEFAULT
operator||
name|Py_TPFLAGS_BASETYPE
block|,
comment|/* tp_flags */
name|NULL
block|,
comment|/* Documentation string */
operator|(
name|traverseproc
operator|)
literal|0
block|,
comment|/* tp_traverse */
operator|(
name|inquiry
operator|)
literal|0
block|,
comment|/* tp_clear */
operator|(
name|richcmpfunc
operator|)
literal|0
block|,
comment|/* tp_richcompare */
literal|0
block|,
comment|/* tp_weaklistoffset */
operator|(
name|getiterfunc
operator|)
literal|0
block|,
comment|/* tp_iter */
operator|(
name|iternextfunc
operator|)
literal|0
block|,
comment|/* tp_iternext */
name|vs_methods
block|,
comment|/* tp_methods */
literal|0
block|,
comment|/* tp_members */
name|vs_getsets
block|,
comment|/* tp_getset */
operator|(
name|PyTypeObject
operator|*
operator|)
literal|0
block|,
comment|/* tp_base */
operator|(
name|PyObject
operator|*
operator|)
literal|0
block|,
comment|/* tp_dict */
literal|0
block|,
comment|/* tp_descr_get */
literal|0
block|,
comment|/* tp_descr_set */
literal|0
block|,
comment|/* tp_dictoffset */
operator|(
name|initproc
operator|)
literal|0
block|,
comment|/* tp_init */
operator|(
name|allocfunc
operator|)
literal|0
block|,
comment|/* tp_alloc */
operator|(
name|newfunc
operator|)
literal|0
block|,
comment|/* tp_new */
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vbs_new_moveto (PyTypeObject * type,PyObject * args,PyObject * kwargs)
name|vbs_new_moveto
parameter_list|(
name|PyTypeObject
modifier|*
name|type
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|PyGimpVectors
modifier|*
name|vectors
decl_stmt|;
name|double
name|x0
decl_stmt|,
name|y0
decl_stmt|;
name|int
name|stroke
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"vectors"
block|,
literal|"x0"
block|,
literal|"y0"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"O!dd:new_moveto"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|PyGimpVectors_Type
argument_list|,
operator|&
name|vectors
argument_list|,
operator|&
name|x0
argument_list|,
operator|&
name|y0
argument_list|)
condition|)
return|return
name|NULL
return|;
name|stroke
operator|=
name|gimp_vectors_bezier_stroke_new_moveto
argument_list|(
name|vectors
operator|->
name|ID
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|)
expr_stmt|;
return|return
name|vectors_bezier_stroke_new
argument_list|(
name|vectors
argument_list|,
name|stroke
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vbs_new_ellipse (PyTypeObject * type,PyObject * args,PyObject * kwargs)
name|vbs_new_ellipse
parameter_list|(
name|PyTypeObject
modifier|*
name|type
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|PyGimpVectors
modifier|*
name|vectors
decl_stmt|;
name|double
name|x0
decl_stmt|,
name|y0
decl_stmt|,
name|radius_x
decl_stmt|,
name|radius_y
decl_stmt|,
name|angle
decl_stmt|;
name|int
name|stroke
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"vectors"
block|,
literal|"x0"
block|,
literal|"y0"
block|,
literal|"radius_x"
block|,
literal|"radius_y"
block|,
literal|"angle"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"O!ddddd:new_ellipse"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|PyGimpVectors_Type
argument_list|,
operator|&
name|vectors
argument_list|,
operator|&
name|x0
argument_list|,
operator|&
name|y0
argument_list|,
operator|&
name|radius_x
argument_list|,
operator|&
name|radius_y
argument_list|,
operator|&
name|angle
argument_list|)
condition|)
return|return
name|NULL
return|;
name|stroke
operator|=
name|gimp_vectors_bezier_stroke_new_ellipse
argument_list|(
name|vectors
operator|->
name|ID
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|,
name|radius_x
argument_list|,
name|radius_y
argument_list|,
name|angle
argument_list|)
expr_stmt|;
return|return
name|vectors_bezier_stroke_new
argument_list|(
name|vectors
argument_list|,
name|stroke
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vbs_lineto (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vbs_lineto
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|x0
decl_stmt|,
name|y0
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"x0"
block|,
literal|"y0"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"dd:lineto"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|x0
argument_list|,
operator|&
name|y0
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_bezier_stroke_lineto
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vbs_conicto (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vbs_conicto
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|x0
decl_stmt|,
name|y0
decl_stmt|,
name|x1
decl_stmt|,
name|y1
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"x0"
block|,
literal|"y0"
block|,
literal|"x1"
block|,
literal|"y1"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"dddd:conicto"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|x0
argument_list|,
operator|&
name|y0
argument_list|,
operator|&
name|x1
argument_list|,
operator|&
name|y1
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_bezier_stroke_conicto
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|,
name|x1
argument_list|,
name|y1
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vbs_cubicto (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vbs_cubicto
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|double
name|x0
decl_stmt|,
name|y0
decl_stmt|,
name|x1
decl_stmt|,
name|y1
decl_stmt|,
name|x2
decl_stmt|,
name|y2
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"x0"
block|,
literal|"y0"
block|,
literal|"x1"
block|,
literal|"y1"
block|,
literal|"x2"
block|,
literal|"y2"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"dddddd:cubicto"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|x0
argument_list|,
operator|&
name|y0
argument_list|,
operator|&
name|x1
argument_list|,
operator|&
name|y1
argument_list|,
operator|&
name|x2
argument_list|,
operator|&
name|y2
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_vectors_bezier_stroke_cubicto
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|x0
argument_list|,
name|y0
argument_list|,
name|x1
argument_list|,
name|y1
argument_list|,
name|x2
argument_list|,
name|y2
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|vbs_methods
specifier|static
name|PyMethodDef
name|vbs_methods
index|[]
init|=
block|{
block|{
literal|"new_moveto"
block|,
operator|(
name|PyCFunction
operator|)
name|vbs_new_moveto
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
operator||
name|METH_CLASS
block|}
block|,
block|{
literal|"new_ellipse"
block|,
operator|(
name|PyCFunction
operator|)
name|vbs_new_ellipse
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
operator||
name|METH_CLASS
block|}
block|,
block|{
literal|"lineto"
block|,
operator|(
name|PyCFunction
operator|)
name|vbs_lineto
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"conicto"
block|,
operator|(
name|PyCFunction
operator|)
name|vbs_conicto
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"cubicto"
block|,
operator|(
name|PyCFunction
operator|)
name|vbs_cubicto
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vbs_repr (PyGimpVectorsStroke * self)
name|vbs_repr
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|)
block|{
name|PyObject
modifier|*
name|s
decl_stmt|;
name|char
modifier|*
name|name
decl_stmt|;
name|name
operator|=
name|gimp_item_get_name
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|)
expr_stmt|;
name|s
operator|=
name|PyString_FromFormat
argument_list|(
literal|"<gimp.VectorsBezierStroke %d of gimp.Vectors '%s'>"
argument_list|,
name|self
operator|->
name|stroke
argument_list|,
name|name
condition|?
name|name
else|:
literal|"(null)"
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|name
argument_list|)
expr_stmt|;
return|return
name|s
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vbs_init (PyGimpVectorsStroke * self,PyObject * args,PyObject * kwargs)
name|vbs_init
parameter_list|(
name|PyGimpVectorsStroke
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|PyGimpVectors
modifier|*
name|vectors
decl_stmt|;
name|double
modifier|*
name|controlpoints
decl_stmt|;
name|gboolean
name|closed
init|=
name|FALSE
decl_stmt|;
name|PyObject
modifier|*
name|py_controlpoints
decl_stmt|,
modifier|*
name|item
decl_stmt|;
name|int
name|i
decl_stmt|,
name|num_points
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"vectors"
block|,
literal|"controlpoints"
block|,
literal|"closed"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"O!O|i:gimp.VectorsBezierStroke.__init__"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|PyGimpVectors_Type
argument_list|,
operator|&
name|vectors
argument_list|,
operator|&
name|py_controlpoints
argument_list|,
operator|&
name|closed
argument_list|)
condition|)
empty_stmt|;
return|return
operator|-
literal|1
return|;
if|if
condition|(
operator|!
name|PySequence_Check
argument_list|(
name|py_controlpoints
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"controlpoints must be a sequence"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
name|num_points
operator|=
name|PySequence_Length
argument_list|(
name|py_controlpoints
argument_list|)
expr_stmt|;
name|controlpoints
operator|=
name|g_new
argument_list|(
name|gdouble
argument_list|,
name|num_points
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|num_points
condition|;
name|i
operator|++
control|)
block|{
name|item
operator|=
name|PySequence_GetItem
argument_list|(
name|py_controlpoints
argument_list|,
name|i
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|PyFloat_Check
argument_list|(
name|item
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"controlpoints must be a sequence of floats"
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|controlpoints
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
name|controlpoints
index|[
name|i
index|]
operator|=
name|PyFloat_AsDouble
argument_list|(
name|item
argument_list|)
expr_stmt|;
block|}
name|self
operator|->
name|vectors_ID
operator|=
name|vectors
operator|->
name|ID
expr_stmt|;
name|self
operator|->
name|stroke
operator|=
name|gimp_vectors_stroke_new_from_points
argument_list|(
name|self
operator|->
name|vectors_ID
argument_list|,
name|GIMP_VECTORS_STROKE_TYPE_BEZIER
argument_list|,
name|num_points
argument_list|,
name|controlpoints
argument_list|,
name|closed
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|controlpoints
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|PyGimpVectorsBezierStroke_Type
name|PyTypeObject
name|PyGimpVectorsBezierStroke_Type
init|=
block|{
name|PyObject_HEAD_INIT
argument_list|(
name|NULL
argument_list|)
literal|0
block|,
comment|/* ob_size */
literal|"gimp.VectorsBezierStroke"
block|,
comment|/* tp_name */
sizeof|sizeof
argument_list|(
name|PyGimpVectorsStroke
argument_list|)
block|,
comment|/* tp_basicsize */
literal|0
block|,
comment|/* tp_itemsize */
comment|/* methods */
operator|(
name|destructor
operator|)
name|vs_dealloc
block|,
comment|/* tp_dealloc */
operator|(
name|printfunc
operator|)
literal|0
block|,
comment|/* tp_print */
operator|(
name|getattrfunc
operator|)
literal|0
block|,
comment|/* tp_getattr */
operator|(
name|setattrfunc
operator|)
literal|0
block|,
comment|/* tp_setattr */
operator|(
name|cmpfunc
operator|)
name|vs_cmp
block|,
comment|/* tp_compare */
operator|(
name|reprfunc
operator|)
name|vbs_repr
block|,
comment|/* tp_repr */
literal|0
block|,
comment|/* tp_as_number */
literal|0
block|,
comment|/* tp_as_sequence */
literal|0
block|,
comment|/* tp_as_mapping */
operator|(
name|hashfunc
operator|)
literal|0
block|,
comment|/* tp_hash */
operator|(
name|ternaryfunc
operator|)
literal|0
block|,
comment|/* tp_call */
operator|(
name|reprfunc
operator|)
literal|0
block|,
comment|/* tp_str */
operator|(
name|getattrofunc
operator|)
literal|0
block|,
comment|/* tp_getattro */
operator|(
name|setattrofunc
operator|)
literal|0
block|,
comment|/* tp_setattro */
literal|0
block|,
comment|/* tp_as_buffer */
name|Py_TPFLAGS_DEFAULT
block|,
comment|/* tp_flags */
name|NULL
block|,
comment|/* Documentation string */
operator|(
name|traverseproc
operator|)
literal|0
block|,
comment|/* tp_traverse */
operator|(
name|inquiry
operator|)
literal|0
block|,
comment|/* tp_clear */
operator|(
name|richcmpfunc
operator|)
literal|0
block|,
comment|/* tp_richcompare */
literal|0
block|,
comment|/* tp_weaklistoffset */
operator|(
name|getiterfunc
operator|)
literal|0
block|,
comment|/* tp_iter */
operator|(
name|iternextfunc
operator|)
literal|0
block|,
comment|/* tp_iternext */
name|vbs_methods
block|,
comment|/* tp_methods */
literal|0
block|,
comment|/* tp_members */
literal|0
block|,
comment|/* tp_getset */
operator|&
name|PyGimpVectorsStroke_Type
block|,
comment|/* tp_base */
operator|(
name|PyObject
operator|*
operator|)
literal|0
block|,
comment|/* tp_dict */
literal|0
block|,
comment|/* tp_descr_get */
literal|0
block|,
comment|/* tp_descr_set */
literal|0
block|,
comment|/* tp_dictoffset */
operator|(
name|initproc
operator|)
name|vbs_init
block|,
comment|/* tp_init */
operator|(
name|allocfunc
operator|)
literal|0
block|,
comment|/* tp_alloc */
operator|(
name|newfunc
operator|)
literal|0
block|,
comment|/* tp_new */
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_bezier_stroke_new (PyGimpVectors * vectors,int stroke)
name|vectors_bezier_stroke_new
parameter_list|(
name|PyGimpVectors
modifier|*
name|vectors
parameter_list|,
name|int
name|stroke
parameter_list|)
block|{
name|PyGimpVectorsStroke
modifier|*
name|self
decl_stmt|;
name|self
operator|=
name|PyObject_NEW
argument_list|(
name|PyGimpVectorsStroke
argument_list|,
operator|&
name|PyGimpVectorsBezierStroke_Type
argument_list|)
expr_stmt|;
if|if
condition|(
name|self
operator|==
name|NULL
condition|)
return|return
name|NULL
return|;
name|self
operator|->
name|vectors_ID
operator|=
name|vectors
operator|->
name|ID
expr_stmt|;
name|self
operator|->
name|stroke
operator|=
name|stroke
expr_stmt|;
return|return
operator|(
name|PyObject
operator|*
operator|)
name|self
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_remove_stroke (PyGimpVectors * self,PyObject * args,PyObject * kwargs)
name|vectors_remove_stroke
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|int
name|stroke_id
decl_stmt|;
comment|/* PyGimpVectorsStroke *stroke; */
name|PyObject
modifier|*
name|stroke
init|=
name|NULL
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"stroke"
block|,
name|NULL
block|}
decl_stmt|;
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"O:remove_stroke"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|stroke
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyInt_Check
argument_list|(
name|stroke
argument_list|)
condition|)
name|stroke_id
operator|=
name|PyInt_AsLong
argument_list|(
name|stroke
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|PyObject_IsInstance
argument_list|(
name|stroke
argument_list|,
operator|(
name|PyObject
operator|*
operator|)
operator|&
name|PyGimpVectorsStroke_Type
argument_list|)
condition|)
name|stroke_id
operator|=
operator|(
operator|(
name|PyGimpVectorsStroke
operator|*
operator|)
name|stroke
operator|)
operator|->
name|stroke
expr_stmt|;
else|else
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"stroke must be a gimp.VectorsBezierStroke object or an Integer"
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
name|gimp_vectors_remove_stroke
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|stroke_id
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_to_selection (PyGimpVectors * self,PyObject * args,PyObject * kwargs)
name|vectors_to_selection
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|GimpChannelOps
name|operation
init|=
name|GIMP_CHANNEL_OP_REPLACE
decl_stmt|;
name|gboolean
name|antialias
init|=
name|TRUE
decl_stmt|,
name|feather
init|=
name|FALSE
decl_stmt|;
name|double
name|feather_radius_x
init|=
literal|0.0
decl_stmt|,
name|feather_radius_y
init|=
literal|0.0
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"operation"
block|,
literal|"antialias"
block|,
literal|"feather"
block|,
literal|"feather_radius_x"
block|,
literal|"feather_radius_y"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"|iiidd:to_selection"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|operation
argument_list|,
operator|&
name|antialias
argument_list|,
operator|&
name|feather
argument_list|,
operator|&
name|feather_radius_x
argument_list|,
operator|&
name|feather_radius_y
argument_list|)
condition|)
return|return
name|NULL
return|;
name|gimp_context_push
argument_list|()
expr_stmt|;
name|gimp_context_set_antialias
argument_list|(
name|antialias
argument_list|)
expr_stmt|;
name|gimp_context_set_feather
argument_list|(
name|feather
argument_list|)
expr_stmt|;
name|gimp_context_set_feather_radius
argument_list|(
name|feather_radius_x
argument_list|,
name|feather_radius_y
argument_list|)
expr_stmt|;
name|gimp_image_select_item
argument_list|(
name|gimp_item_get_image
argument_list|(
name|self
operator|->
name|ID
argument_list|)
argument_list|,
name|operation
argument_list|,
name|self
operator|->
name|ID
argument_list|)
expr_stmt|;
name|gimp_context_pop
argument_list|()
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_parasite_find (PyGimpVectors * self,PyObject * args)
name|vectors_parasite_find
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|)
block|{
name|char
modifier|*
name|name
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTuple
argument_list|(
name|args
argument_list|,
literal|"s:parasite_find"
argument_list|,
operator|&
name|name
argument_list|)
condition|)
return|return
name|NULL
return|;
return|return
name|pygimp_parasite_new
argument_list|(
name|gimp_item_find_parasite
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|name
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_parasite_attach (PyGimpVectors * self,PyObject * args)
name|vectors_parasite_attach
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|)
block|{
name|PyGimpParasite
modifier|*
name|parasite
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTuple
argument_list|(
name|args
argument_list|,
literal|"O!:parasite_attach"
argument_list|,
operator|&
name|PyGimpParasite_Type
argument_list|,
operator|&
name|parasite
argument_list|)
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|gimp_item_attach_parasite
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|parasite
operator|->
name|para
argument_list|)
condition|)
block|{
name|PyErr_Format
argument_list|(
name|pygimp_error
argument_list|,
literal|"could not attach parasite '%s' to vectors (ID %d)"
argument_list|,
name|parasite
operator|->
name|para
operator|->
name|name
argument_list|,
name|self
operator|->
name|ID
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_parasite_detach (PyGimpVectors * self,PyObject * args)
name|vectors_parasite_detach
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|)
block|{
name|char
modifier|*
name|name
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTuple
argument_list|(
name|args
argument_list|,
literal|"s:parasite_detach"
argument_list|,
operator|&
name|name
argument_list|)
condition|)
return|return
name|NULL
return|;
if|if
condition|(
operator|!
name|gimp_item_detach_parasite
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|name
argument_list|)
condition|)
block|{
name|PyErr_Format
argument_list|(
name|pygimp_error
argument_list|,
literal|"could not detach parasite '%s' from vectors (ID %d)"
argument_list|,
name|name
argument_list|,
name|self
operator|->
name|ID
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_parasite_list (PyGimpVectors * self)
name|vectors_parasite_list
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|)
block|{
name|gint
name|num_parasites
decl_stmt|;
name|gchar
modifier|*
modifier|*
name|parasites
decl_stmt|;
if|if
condition|(
name|gimp_item_list_parasites
argument_list|(
name|self
operator|->
name|ID
argument_list|,
operator|&
name|num_parasites
argument_list|,
operator|&
name|parasites
argument_list|)
condition|)
block|{
name|PyObject
modifier|*
name|ret
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|ret
operator|=
name|PyTuple_New
argument_list|(
name|num_parasites
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|num_parasites
condition|;
name|i
operator|++
control|)
block|{
name|PyTuple_SetItem
argument_list|(
name|ret
argument_list|,
name|i
argument_list|,
name|PyString_FromString
argument_list|(
name|parasites
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|parasites
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|g_free
argument_list|(
name|parasites
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
name|PyErr_Format
argument_list|(
name|pygimp_error
argument_list|,
literal|"could not list parasites on vectors (ID %d)"
argument_list|,
name|self
operator|->
name|ID
argument_list|)
expr_stmt|;
return|return
name|NULL
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|vectors_methods
specifier|static
name|PyMethodDef
name|vectors_methods
index|[]
init|=
block|{
block|{
literal|"remove_stroke"
block|,
operator|(
name|PyCFunction
operator|)
name|vectors_remove_stroke
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"to_selection"
block|,
operator|(
name|PyCFunction
operator|)
name|vectors_to_selection
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|}
block|,
block|{
literal|"parasite_find"
block|,
operator|(
name|PyCFunction
operator|)
name|vectors_parasite_find
block|,
name|METH_VARARGS
block|}
block|,
block|{
literal|"parasite_attach"
block|,
operator|(
name|PyCFunction
operator|)
name|vectors_parasite_attach
block|,
name|METH_VARARGS
block|}
block|,
block|{
literal|"parasite_detach"
block|,
operator|(
name|PyCFunction
operator|)
name|vectors_parasite_detach
block|,
name|METH_VARARGS
block|}
block|,
block|{
literal|"parasite_list"
block|,
operator|(
name|PyCFunction
operator|)
name|vectors_parasite_list
block|,
name|METH_NOARGS
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_get_image (PyGimpVectors * self,void * closure)
name|vectors_get_image
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|pygimp_image_new
argument_list|(
name|gimp_item_get_image
argument_list|(
name|self
operator|->
name|ID
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_get_ID (PyGimpVectors * self,void * closure)
name|vectors_get_ID
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|PyInt_FromLong
argument_list|(
name|self
operator|->
name|ID
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_get_name (PyGimpVectors * self,void * closure)
name|vectors_get_name
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|PyString_FromString
argument_list|(
name|gimp_item_get_name
argument_list|(
name|self
operator|->
name|ID
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vectors_set_name (PyGimpVectors * self,PyObject * value,void * closure)
name|vectors_set_name
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
if|if
condition|(
name|value
operator|==
name|NULL
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"cannot delete name"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
if|if
condition|(
operator|!
name|PyString_Check
argument_list|(
name|value
argument_list|)
operator|&&
operator|!
name|PyUnicode_Check
argument_list|(
name|value
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"type mismatch"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
name|gimp_item_set_name
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|PyString_AsString
argument_list|(
name|value
argument_list|)
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_get_visible (PyGimpVectors * self,void * closure)
name|vectors_get_visible
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|PyBool_FromLong
argument_list|(
name|gimp_item_get_visible
argument_list|(
name|self
operator|->
name|ID
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vectors_set_visible (PyGimpVectors * self,PyObject * value,void * closure)
name|vectors_set_visible
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
if|if
condition|(
name|value
operator|==
name|NULL
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"cannot delete visible"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
if|if
condition|(
operator|!
name|PyInt_Check
argument_list|(
name|value
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"type mismatch"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
name|gimp_item_set_visible
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|PyInt_AsLong
argument_list|(
name|value
argument_list|)
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_get_linked (PyGimpVectors * self,void * closure)
name|vectors_get_linked
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|PyBool_FromLong
argument_list|(
name|gimp_item_get_linked
argument_list|(
name|self
operator|->
name|ID
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vectors_set_linked (PyGimpVectors * self,PyObject * value,void * closure)
name|vectors_set_linked
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
if|if
condition|(
name|value
operator|==
name|NULL
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"cannot delete linked"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
if|if
condition|(
operator|!
name|PyInt_Check
argument_list|(
name|value
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"type mismatch"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
name|gimp_item_set_linked
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|PyInt_AsLong
argument_list|(
name|value
argument_list|)
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_get_tattoo (PyGimpVectors * self,void * closure)
name|vectors_get_tattoo
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
return|return
name|PyInt_FromLong
argument_list|(
name|gimp_item_get_tattoo
argument_list|(
name|self
operator|->
name|ID
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vectors_set_tattoo (PyGimpVectors * self,PyObject * value,void * closure)
name|vectors_set_tattoo
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
if|if
condition|(
name|value
operator|==
name|NULL
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"cannot delete tattoo"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
if|if
condition|(
operator|!
name|PyInt_Check
argument_list|(
name|value
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"type mismatch"
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
name|gimp_item_set_tattoo
argument_list|(
name|self
operator|->
name|ID
argument_list|,
name|PyInt_AsLong
argument_list|(
name|value
argument_list|)
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_get_strokes (PyGimpVectors * self,void * closure)
name|vectors_get_strokes
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|void
modifier|*
name|closure
parameter_list|)
block|{
name|int
modifier|*
name|strokes
decl_stmt|;
name|int
name|i
decl_stmt|,
name|num_strokes
decl_stmt|;
name|PyObject
modifier|*
name|ret
decl_stmt|;
name|strokes
operator|=
name|gimp_vectors_get_strokes
argument_list|(
name|self
operator|->
name|ID
argument_list|,
operator|&
name|num_strokes
argument_list|)
expr_stmt|;
name|ret
operator|=
name|PyList_New
argument_list|(
name|num_strokes
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret
operator|==
name|NULL
condition|)
return|return
name|NULL
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|num_strokes
condition|;
name|i
operator|++
control|)
name|PyList_SetItem
argument_list|(
name|ret
argument_list|,
name|i
argument_list|,
name|vectors_bezier_stroke_new
argument_list|(
name|self
argument_list|,
name|strokes
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|strokes
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|vectors_getsets
specifier|static
name|PyGetSetDef
name|vectors_getsets
index|[]
init|=
block|{
block|{
literal|"ID"
block|,
operator|(
name|getter
operator|)
name|vectors_get_ID
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|,
block|{
literal|"image"
block|,
operator|(
name|getter
operator|)
name|vectors_get_image
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|,
block|{
literal|"name"
block|,
operator|(
name|getter
operator|)
name|vectors_get_name
block|,
operator|(
name|setter
operator|)
name|vectors_set_name
block|}
block|,
block|{
literal|"visible"
block|,
operator|(
name|getter
operator|)
name|vectors_get_visible
block|,
operator|(
name|setter
operator|)
name|vectors_set_visible
block|}
block|,
block|{
literal|"linked"
block|,
operator|(
name|getter
operator|)
name|vectors_get_linked
block|,
operator|(
name|setter
operator|)
name|vectors_set_linked
block|}
block|,
block|{
literal|"tattoo"
block|,
operator|(
name|getter
operator|)
name|vectors_get_tattoo
block|,
operator|(
name|setter
operator|)
name|vectors_set_tattoo
block|}
block|,
block|{
literal|"strokes"
block|,
operator|(
name|getter
operator|)
name|vectors_get_strokes
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|,
block|{
name|NULL
block|,
operator|(
name|getter
operator|)
literal|0
block|,
operator|(
name|setter
operator|)
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
DECL|function|vectors_dealloc (PyGimpVectors * self)
name|vectors_dealloc
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|)
block|{
name|PyObject_DEL
argument_list|(
name|self
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|PyObject
modifier|*
DECL|function|vectors_repr (PyGimpVectors * self)
name|vectors_repr
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|)
block|{
name|PyObject
modifier|*
name|s
decl_stmt|;
name|char
modifier|*
name|name
decl_stmt|;
name|name
operator|=
name|gimp_item_get_name
argument_list|(
name|self
operator|->
name|ID
argument_list|)
expr_stmt|;
name|s
operator|=
name|PyString_FromFormat
argument_list|(
literal|"<gimp.Vectors '%s'>"
argument_list|,
name|name
condition|?
name|name
else|:
literal|"(null)"
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|name
argument_list|)
expr_stmt|;
return|return
name|s
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vectors_cmp (PyGimpVectors * self,PyGimpVectors * other)
name|vectors_cmp
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyGimpVectors
modifier|*
name|other
parameter_list|)
block|{
if|if
condition|(
name|self
operator|->
name|ID
operator|==
name|other
operator|->
name|ID
condition|)
return|return
literal|0
return|;
if|if
condition|(
name|self
operator|->
name|ID
operator|>
name|other
operator|->
name|ID
condition|)
return|return
operator|-
literal|1
return|;
return|return
literal|1
return|;
block|}
end_function

begin_function
specifier|static
name|int
DECL|function|vectors_init (PyGimpVectors * self,PyObject * args,PyObject * kwargs)
name|vectors_init
parameter_list|(
name|PyGimpVectors
modifier|*
name|self
parameter_list|,
name|PyObject
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
name|kwargs
parameter_list|)
block|{
name|PyGimpImage
modifier|*
name|img
decl_stmt|;
name|char
modifier|*
name|name
decl_stmt|;
specifier|static
name|char
modifier|*
name|kwlist
index|[]
init|=
block|{
literal|"image"
block|,
literal|"name"
block|,
name|NULL
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|args
argument_list|,
name|kwargs
argument_list|,
literal|"O!s:gimp.Vectors.__init__"
argument_list|,
name|kwlist
argument_list|,
operator|&
name|PyGimpImage_Type
argument_list|,
operator|&
name|img
argument_list|,
operator|&
name|name
argument_list|)
condition|)
return|return
operator|-
literal|1
return|;
name|self
operator|->
name|ID
operator|=
name|gimp_vectors_new
argument_list|(
name|img
operator|->
name|ID
argument_list|,
name|name
argument_list|)
expr_stmt|;
if|if
condition|(
name|self
operator|->
name|ID
operator|<
literal|0
condition|)
block|{
name|PyErr_Format
argument_list|(
name|pygimp_error
argument_list|,
literal|"could not create vectors '%s' on image (ID %d)"
argument_list|,
name|name
argument_list|,
name|img
operator|->
name|ID
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
return|return
literal|0
return|;
block|}
end_function

begin_decl_stmt
DECL|variable|PyGimpVectors_Type
name|PyTypeObject
name|PyGimpVectors_Type
init|=
block|{
name|PyObject_HEAD_INIT
argument_list|(
name|NULL
argument_list|)
literal|0
block|,
comment|/* ob_size */
literal|"gimp.Vectors"
block|,
comment|/* tp_name */
sizeof|sizeof
argument_list|(
name|PyGimpVectors
argument_list|)
block|,
comment|/* tp_basicsize */
literal|0
block|,
comment|/* tp_itemsize */
comment|/* methods */
operator|(
name|destructor
operator|)
name|vectors_dealloc
block|,
comment|/* tp_dealloc */
operator|(
name|printfunc
operator|)
literal|0
block|,
comment|/* tp_print */
operator|(
name|getattrfunc
operator|)
literal|0
block|,
comment|/* tp_getattr */
operator|(
name|setattrfunc
operator|)
literal|0
block|,
comment|/* tp_setattr */
operator|(
name|cmpfunc
operator|)
name|vectors_cmp
block|,
comment|/* tp_compare */
operator|(
name|reprfunc
operator|)
name|vectors_repr
block|,
comment|/* tp_repr */
literal|0
block|,
comment|/* tp_as_number */
literal|0
block|,
comment|/* tp_as_sequence */
literal|0
block|,
comment|/* tp_as_mapping */
operator|(
name|hashfunc
operator|)
literal|0
block|,
comment|/* tp_hash */
operator|(
name|ternaryfunc
operator|)
literal|0
block|,
comment|/* tp_call */
operator|(
name|reprfunc
operator|)
literal|0
block|,
comment|/* tp_str */
operator|(
name|getattrofunc
operator|)
literal|0
block|,
comment|/* tp_getattro */
operator|(
name|setattrofunc
operator|)
literal|0
block|,
comment|/* tp_setattro */
literal|0
block|,
comment|/* tp_as_buffer */
name|Py_TPFLAGS_DEFAULT
block|,
comment|/* tp_flags */
name|NULL
block|,
comment|/* Documentation string */
operator|(
name|traverseproc
operator|)
literal|0
block|,
comment|/* tp_traverse */
operator|(
name|inquiry
operator|)
literal|0
block|,
comment|/* tp_clear */
operator|(
name|richcmpfunc
operator|)
literal|0
block|,
comment|/* tp_richcompare */
literal|0
block|,
comment|/* tp_weaklistoffset */
operator|(
name|getiterfunc
operator|)
literal|0
block|,
comment|/* tp_iter */
operator|(
name|iternextfunc
operator|)
literal|0
block|,
comment|/* tp_iternext */
name|vectors_methods
block|,
comment|/* tp_methods */
literal|0
block|,
comment|/* tp_members */
name|vectors_getsets
block|,
comment|/* tp_getset */
operator|(
name|PyTypeObject
operator|*
operator|)
literal|0
block|,
comment|/* tp_base */
operator|(
name|PyObject
operator|*
operator|)
literal|0
block|,
comment|/* tp_dict */
literal|0
block|,
comment|/* tp_descr_get */
literal|0
block|,
comment|/* tp_descr_set */
literal|0
block|,
comment|/* tp_dictoffset */
operator|(
name|initproc
operator|)
name|vectors_init
block|,
comment|/* tp_init */
operator|(
name|allocfunc
operator|)
literal|0
block|,
comment|/* tp_alloc */
operator|(
name|newfunc
operator|)
literal|0
block|,
comment|/* tp_new */
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|PyObject
modifier|*
DECL|function|pygimp_vectors_new (gint32 ID)
name|pygimp_vectors_new
parameter_list|(
name|gint32
name|ID
parameter_list|)
block|{
name|PyGimpVectors
modifier|*
name|self
decl_stmt|;
if|if
condition|(
operator|!
name|gimp_item_is_valid
argument_list|(
name|ID
argument_list|)
condition|)
block|{
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
return|return
name|Py_None
return|;
block|}
name|self
operator|=
name|PyObject_NEW
argument_list|(
name|PyGimpVectors
argument_list|,
operator|&
name|PyGimpVectors_Type
argument_list|)
expr_stmt|;
if|if
condition|(
name|self
operator|==
name|NULL
condition|)
return|return
name|NULL
return|;
name|self
operator|->
name|ID
operator|=
name|ID
expr_stmt|;
return|return
operator|(
name|PyObject
operator|*
operator|)
name|self
return|;
block|}
end_function

end_unit

