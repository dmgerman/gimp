begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * This is a plug-in for the GIMP.  *  * Generates clickable image maps.  *  * Copyright (C) 1998-1999 Maurits Rijk  lpeek.mrijk@consunet.nl  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 2 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program; if not, write to the Free Software  * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  *  */
end_comment

begin_include
include|#
directive|include
file|"imap_cmd_create.h"
end_include

begin_include
include|#
directive|include
file|"imap_command.h"
end_include

begin_include
include|#
directive|include
file|"imap_default_dialog.h"
end_include

begin_include
include|#
directive|include
file|"imap_grid.h"
end_include

begin_include
include|#
directive|include
file|"imap_main.h"
end_include

begin_include
include|#
directive|include
file|"imap_object.h"
end_include

begin_include
include|#
directive|include
file|"imap_string.h"
end_include

begin_typedef
DECL|struct|__anon2af64f4d0108
typedef|typedef
struct|struct
block|{
DECL|member|func
name|ObjectListCallbackFunc_t
name|func
decl_stmt|;
DECL|member|data
name|gpointer
name|data
decl_stmt|;
DECL|typedef|ObjectListCB_t
block|}
name|ObjectListCB_t
typedef|;
end_typedef

begin_decl_stmt
DECL|variable|_paste_buffer
specifier|static
name|ObjectList_t
modifier|*
name|_paste_buffer
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|gpointer
DECL|function|object_list_callback_add (ObjectListCallback_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_callback_add
parameter_list|(
name|ObjectListCallback_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|ObjectListCB_t
modifier|*
name|cb
init|=
name|g_new
argument_list|(
name|ObjectListCB_t
argument_list|,
literal|1
argument_list|)
decl_stmt|;
name|cb
operator|->
name|func
operator|=
name|func
expr_stmt|;
name|cb
operator|->
name|data
operator|=
name|data
expr_stmt|;
name|list
operator|->
name|list
operator|=
name|g_list_append
argument_list|(
name|list
operator|->
name|list
argument_list|,
name|cb
argument_list|)
expr_stmt|;
return|return
name|cb
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|object_list_callback_remove (ObjectListCallback_t * list,gpointer id)
name|object_list_callback_remove
parameter_list|(
name|ObjectListCallback_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|id
parameter_list|)
block|{
name|list
operator|->
name|list
operator|=
name|g_list_remove
argument_list|(
name|list
operator|->
name|list
argument_list|,
name|id
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|object_list_callback_call (ObjectListCallback_t * list,Object_t * obj)
name|object_list_callback_call
parameter_list|(
name|ObjectListCallback_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|ObjectListCB_t
modifier|*
name|cb
init|=
operator|(
name|ObjectListCB_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|cb
operator|->
name|func
argument_list|(
name|obj
argument_list|,
name|cb
operator|->
name|data
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|gpointer
DECL|function|object_list_add_changed_cb (ObjectList_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_add_changed_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|list
operator|->
name|changed_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|object_list_add_update_cb (ObjectList_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_add_update_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|list
operator|->
name|update_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|object_list_add_add_cb (ObjectList_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_add_add_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|list
operator|->
name|add_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|object_list_add_remove_cb (ObjectList_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_add_remove_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|list
operator|->
name|remove_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|object_list_add_select_cb (ObjectList_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_add_select_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|list
operator|->
name|select_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|object_list_add_move_cb (ObjectList_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_add_move_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|list
operator|->
name|move_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|object_list_add_geometry_cb (ObjectList_t * list,ObjectListCallbackFunc_t func,gpointer data)
name|object_list_add_geometry_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|list
operator|->
name|geometry_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|paste_buffer_add_add_cb (ObjectListCallbackFunc_t func,gpointer data)
name|paste_buffer_add_add_cb
parameter_list|(
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
if|if
condition|(
operator|!
name|_paste_buffer
condition|)
name|_paste_buffer
operator|=
name|make_object_list
argument_list|()
expr_stmt|;
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|_paste_buffer
operator|->
name|add_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|gpointer
DECL|function|paste_buffer_add_remove_cb (ObjectListCallbackFunc_t func,gpointer data)
name|paste_buffer_add_remove_cb
parameter_list|(
name|ObjectListCallbackFunc_t
name|func
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
if|if
condition|(
operator|!
name|_paste_buffer
condition|)
name|_paste_buffer
operator|=
name|make_object_list
argument_list|()
expr_stmt|;
return|return
name|object_list_callback_add
argument_list|(
operator|&
name|_paste_buffer
operator|->
name|remove_cb
argument_list|,
name|func
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove_add_cb (ObjectList_t * list,gpointer id)
name|object_list_remove_add_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|id
parameter_list|)
block|{
name|object_list_callback_remove
argument_list|(
operator|&
name|list
operator|->
name|add_cb
argument_list|,
name|id
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove_select_cb (ObjectList_t * list,gpointer id)
name|object_list_remove_select_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|id
parameter_list|)
block|{
name|object_list_callback_remove
argument_list|(
operator|&
name|list
operator|->
name|select_cb
argument_list|,
name|id
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove_remove_cb (ObjectList_t * list,gpointer id)
name|object_list_remove_remove_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|id
parameter_list|)
block|{
name|object_list_callback_remove
argument_list|(
operator|&
name|list
operator|->
name|remove_cb
argument_list|,
name|id
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove_move_cb (ObjectList_t * list,gpointer id)
name|object_list_remove_move_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|id
parameter_list|)
block|{
name|object_list_callback_remove
argument_list|(
operator|&
name|list
operator|->
name|move_cb
argument_list|,
name|id
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove_geometry_cb (ObjectList_t * list,gpointer id)
name|object_list_remove_geometry_cb
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|id
parameter_list|)
block|{
name|object_list_callback_remove
argument_list|(
operator|&
name|list
operator|->
name|geometry_cb
argument_list|,
name|id
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|Object_t
modifier|*
DECL|function|object_init (Object_t * obj,ObjectClass_t * class)
name|object_init
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
name|ObjectClass_t
modifier|*
name|class
parameter_list|)
block|{
name|obj
operator|->
name|class
operator|=
name|class
expr_stmt|;
name|obj
operator|->
name|refcount
operator|=
literal|1
expr_stmt|;
name|obj
operator|->
name|selected
operator|=
name|FALSE
expr_stmt|;
name|obj
operator|->
name|locked
operator|=
name|FALSE
expr_stmt|;
name|obj
operator|->
name|url
operator|=
name|g_strdup
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|obj
operator|->
name|target
operator|=
name|g_strdup
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|obj
operator|->
name|comment
operator|=
name|g_strdup
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|obj
operator|->
name|mouse_over
operator|=
name|g_strdup
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|obj
operator|->
name|mouse_out
operator|=
name|g_strdup
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|obj
operator|->
name|focus
operator|=
name|g_strdup
argument_list|(
literal|""
argument_list|)
expr_stmt|;
name|obj
operator|->
name|blur
operator|=
name|g_strdup
argument_list|(
literal|""
argument_list|)
expr_stmt|;
return|return
name|obj
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|object_destruct (Object_t * obj)
name|object_destruct
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
if|if
condition|(
name|obj
operator|->
name|class
operator|->
name|destruct
condition|)
name|obj
operator|->
name|class
operator|->
name|destruct
argument_list|(
name|obj
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
operator|->
name|url
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
operator|->
name|target
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
operator|->
name|comment
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
operator|->
name|mouse_over
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
operator|->
name|mouse_out
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
operator|->
name|focus
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
operator|->
name|blur
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|Object_t
modifier|*
DECL|function|object_ref (Object_t * obj)
name|object_ref
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|obj
operator|->
name|refcount
operator|++
expr_stmt|;
return|return
name|obj
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_unref (Object_t * obj)
name|object_unref
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
if|if
condition|(
operator|!
operator|--
name|obj
operator|->
name|refcount
condition|)
name|object_destruct
argument_list|(
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|Object_t
modifier|*
DECL|function|object_clone (Object_t * obj)
name|object_clone
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|Object_t
modifier|*
name|clone
init|=
name|obj
operator|->
name|class
operator|->
name|clone
argument_list|(
name|obj
argument_list|)
decl_stmt|;
name|clone
operator|->
name|class
operator|=
name|obj
operator|->
name|class
expr_stmt|;
name|clone
operator|->
name|refcount
operator|=
literal|1
expr_stmt|;
name|clone
operator|->
name|selected
operator|=
name|obj
operator|->
name|selected
expr_stmt|;
name|clone
operator|->
name|locked
operator|=
name|FALSE
expr_stmt|;
name|clone
operator|->
name|url
operator|=
name|g_strdup
argument_list|(
name|obj
operator|->
name|url
argument_list|)
expr_stmt|;
name|clone
operator|->
name|target
operator|=
name|g_strdup
argument_list|(
name|obj
operator|->
name|target
argument_list|)
expr_stmt|;
name|clone
operator|->
name|comment
operator|=
name|g_strdup
argument_list|(
name|obj
operator|->
name|comment
argument_list|)
expr_stmt|;
name|clone
operator|->
name|mouse_over
operator|=
name|g_strdup
argument_list|(
name|obj
operator|->
name|mouse_over
argument_list|)
expr_stmt|;
name|clone
operator|->
name|mouse_out
operator|=
name|g_strdup
argument_list|(
name|obj
operator|->
name|mouse_out
argument_list|)
expr_stmt|;
name|clone
operator|->
name|focus
operator|=
name|g_strdup
argument_list|(
name|obj
operator|->
name|focus
argument_list|)
expr_stmt|;
name|clone
operator|->
name|blur
operator|=
name|g_strdup
argument_list|(
name|obj
operator|->
name|blur
argument_list|)
expr_stmt|;
return|return
name|clone
return|;
block|}
end_function

begin_function
specifier|static
name|Object_t
modifier|*
DECL|function|object_copy (Object_t * src,Object_t * des)
name|object_copy
parameter_list|(
name|Object_t
modifier|*
name|src
parameter_list|,
name|Object_t
modifier|*
name|des
parameter_list|)
block|{
name|des
operator|->
name|class
operator|=
name|src
operator|->
name|class
expr_stmt|;
name|des
operator|->
name|selected
operator|=
name|src
operator|->
name|selected
expr_stmt|;
name|des
operator|->
name|locked
operator|=
name|FALSE
expr_stmt|;
name|g_strreplace
argument_list|(
operator|&
name|des
operator|->
name|url
argument_list|,
name|src
operator|->
name|url
argument_list|)
expr_stmt|;
name|g_strreplace
argument_list|(
operator|&
name|des
operator|->
name|target
argument_list|,
name|src
operator|->
name|target
argument_list|)
expr_stmt|;
name|g_strreplace
argument_list|(
operator|&
name|des
operator|->
name|comment
argument_list|,
name|src
operator|->
name|comment
argument_list|)
expr_stmt|;
name|g_strreplace
argument_list|(
operator|&
name|des
operator|->
name|mouse_over
argument_list|,
name|src
operator|->
name|mouse_over
argument_list|)
expr_stmt|;
name|g_strreplace
argument_list|(
operator|&
name|des
operator|->
name|mouse_out
argument_list|,
name|src
operator|->
name|mouse_out
argument_list|)
expr_stmt|;
name|g_strreplace
argument_list|(
operator|&
name|des
operator|->
name|focus
argument_list|,
name|src
operator|->
name|focus
argument_list|)
expr_stmt|;
name|g_strreplace
argument_list|(
operator|&
name|des
operator|->
name|blur
argument_list|,
name|src
operator|->
name|blur
argument_list|)
expr_stmt|;
return|return
name|des
return|;
block|}
end_function

begin_function
name|Object_t
modifier|*
DECL|function|object_assign (Object_t * obj,Object_t * des)
name|object_assign
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
name|Object_t
modifier|*
name|des
parameter_list|)
block|{
name|obj
operator|->
name|class
operator|->
name|assign
argument_list|(
name|obj
argument_list|,
name|des
argument_list|)
expr_stmt|;
return|return
name|object_copy
argument_list|(
name|obj
argument_list|,
name|des
argument_list|)
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_draw (Object_t * obj,GdkWindow * window)
name|object_draw
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
name|GdkWindow
modifier|*
name|window
parameter_list|)
block|{
name|PreferencesData_t
modifier|*
name|preferences
init|=
name|get_preferences
argument_list|()
decl_stmt|;
name|GdkGC
modifier|*
name|gc
init|=
operator|(
name|obj
operator|->
name|selected
operator|)
condition|?
name|preferences
operator|->
name|selected_gc
else|:
name|preferences
operator|->
name|normal_gc
decl_stmt|;
name|obj
operator|->
name|class
operator|->
name|draw
argument_list|(
name|obj
argument_list|,
name|window
argument_list|,
name|gc
argument_list|)
expr_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
operator|&&
name|preferences
operator|->
name|show_area_handle
condition|)
name|obj
operator|->
name|class
operator|->
name|draw_sashes
argument_list|(
name|obj
argument_list|,
name|window
argument_list|,
name|gc
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_edit (Object_t * obj,gboolean add)
name|object_edit
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
name|gboolean
name|add
parameter_list|)
block|{
if|if
condition|(
operator|!
name|obj
operator|->
name|class
operator|->
name|info_dialog
condition|)
name|obj
operator|->
name|class
operator|->
name|info_dialog
operator|=
name|create_edit_area_info_dialog
argument_list|(
name|obj
argument_list|)
expr_stmt|;
name|edit_area_info_dialog_show
argument_list|(
name|obj
operator|->
name|class
operator|->
name|info_dialog
argument_list|,
name|obj
argument_list|,
name|add
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_select (Object_t * obj)
name|object_select
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|obj
operator|->
name|selected
operator|=
name|TRUE
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|obj
operator|->
name|list
operator|->
name|select_cb
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_unselect (Object_t * obj)
name|object_unselect
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|obj
operator|->
name|selected
operator|=
name|FALSE
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|obj
operator|->
name|list
operator|->
name|select_cb
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_move (Object_t * obj,gint dx,gint dy)
name|object_move
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
name|gint
name|dx
parameter_list|,
name|gint
name|dy
parameter_list|)
block|{
name|obj
operator|->
name|class
operator|->
name|move
argument_list|(
name|obj
argument_list|,
name|dx
argument_list|,
name|dy
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|obj
operator|->
name|list
operator|->
name|geometry_cb
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_remove (Object_t * obj)
name|object_remove
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|object_list_remove
argument_list|(
name|obj
operator|->
name|list
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_lock (Object_t * obj)
name|object_lock
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|obj
operator|->
name|locked
operator|=
name|TRUE
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_unlock (Object_t * obj)
name|object_unlock
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|obj
operator|->
name|locked
operator|=
name|FALSE
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_set_url (Object_t * obj,const gchar * url)
name|object_set_url
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
specifier|const
name|gchar
modifier|*
name|url
parameter_list|)
block|{
name|g_strreplace
argument_list|(
operator|&
name|obj
operator|->
name|url
argument_list|,
name|url
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_set_target (Object_t * obj,const gchar * target)
name|object_set_target
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
specifier|const
name|gchar
modifier|*
name|target
parameter_list|)
block|{
name|g_strreplace
argument_list|(
operator|&
name|obj
operator|->
name|target
argument_list|,
name|target
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_set_comment (Object_t * obj,const gchar * comment)
name|object_set_comment
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
specifier|const
name|gchar
modifier|*
name|comment
parameter_list|)
block|{
name|g_strreplace
argument_list|(
operator|&
name|obj
operator|->
name|comment
argument_list|,
name|comment
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_set_mouse_over (Object_t * obj,const gchar * mouse_over)
name|object_set_mouse_over
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
specifier|const
name|gchar
modifier|*
name|mouse_over
parameter_list|)
block|{
name|g_strreplace
argument_list|(
operator|&
name|obj
operator|->
name|mouse_over
argument_list|,
name|mouse_over
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_set_mouse_out (Object_t * obj,const gchar * mouse_out)
name|object_set_mouse_out
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
specifier|const
name|gchar
modifier|*
name|mouse_out
parameter_list|)
block|{
name|g_strreplace
argument_list|(
operator|&
name|obj
operator|->
name|mouse_out
argument_list|,
name|mouse_out
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_set_focus (Object_t * obj,const gchar * focus)
name|object_set_focus
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
specifier|const
name|gchar
modifier|*
name|focus
parameter_list|)
block|{
name|g_strreplace
argument_list|(
operator|&
name|obj
operator|->
name|focus
argument_list|,
name|focus
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_set_blur (Object_t * obj,const gchar * blur)
name|object_set_blur
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
specifier|const
name|gchar
modifier|*
name|blur
parameter_list|)
block|{
name|g_strreplace
argument_list|(
operator|&
name|obj
operator|->
name|blur
argument_list|,
name|blur
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|gint
DECL|function|object_get_position_in_list (Object_t * obj)
name|object_get_position_in_list
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
return|return
name|g_list_index
argument_list|(
name|obj
operator|->
name|list
operator|->
name|list
argument_list|,
operator|(
name|gpointer
operator|)
name|obj
argument_list|)
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_emit_changed_signal (Object_t * obj)
name|object_emit_changed_signal
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|object_list_callback_call
argument_list|(
operator|&
name|obj
operator|->
name|list
operator|->
name|changed_cb
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_emit_geometry_signal (Object_t * obj)
name|object_emit_geometry_signal
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|object_list_callback_call
argument_list|(
operator|&
name|obj
operator|->
name|list
operator|->
name|geometry_cb
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_emit_update_signal (Object_t * obj)
name|object_emit_update_signal
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|object_list_callback_call
argument_list|(
operator|&
name|obj
operator|->
name|list
operator|->
name|update_cb
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|GdkPixmap
modifier|*
DECL|function|object_get_icon (Object_t * obj,GtkWidget * widget,GdkBitmap ** mask)
name|object_get_icon
parameter_list|(
name|Object_t
modifier|*
name|obj
parameter_list|,
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkBitmap
modifier|*
modifier|*
name|mask
parameter_list|)
block|{
if|if
condition|(
operator|!
name|obj
operator|->
name|class
operator|->
name|icon
condition|)
block|{
name|GtkStyle
modifier|*
name|style
init|=
name|gtk_widget_get_style
argument_list|(
name|widget
argument_list|)
decl_stmt|;
name|obj
operator|->
name|class
operator|->
name|icon
operator|=
name|gdk_pixmap_create_from_xpm_d
argument_list|(
name|widget
operator|->
name|window
argument_list|,
operator|&
name|obj
operator|->
name|class
operator|->
name|mask
argument_list|,
operator|&
name|style
operator|->
name|bg
index|[
name|GTK_STATE_NORMAL
index|]
argument_list|,
name|obj
operator|->
name|class
operator|->
name|get_icon_data
argument_list|()
argument_list|)
expr_stmt|;
block|}
operator|*
name|mask
operator|=
name|obj
operator|->
name|class
operator|->
name|mask
expr_stmt|;
return|return
name|obj
operator|->
name|class
operator|->
name|icon
return|;
block|}
end_function

begin_function
name|void
DECL|function|do_object_locked_dialog (void)
name|do_object_locked_dialog
parameter_list|(
name|void
parameter_list|)
block|{
specifier|static
name|DefaultDialog_t
modifier|*
name|dialog
decl_stmt|;
if|if
condition|(
operator|!
name|dialog
condition|)
block|{
name|dialog
operator|=
name|make_default_dialog
argument_list|(
literal|"Object locked"
argument_list|)
expr_stmt|;
name|default_dialog_hide_cancel_button
argument_list|(
name|dialog
argument_list|)
expr_stmt|;
name|default_dialog_hide_apply_button
argument_list|(
name|dialog
argument_list|)
expr_stmt|;
name|default_dialog_set_label
argument_list|(
name|dialog
argument_list|,
literal|"\n  You cannot delete the selected object  \n"
literal|"since it is currently being edited.\n"
argument_list|)
expr_stmt|;
block|}
name|default_dialog_show
argument_list|(
name|dialog
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|Object_t
modifier|*
DECL|function|object_factory_create_object (ObjectFactory_t * factory,gint x,gint y)
name|object_factory_create_object
parameter_list|(
name|ObjectFactory_t
modifier|*
name|factory
parameter_list|,
name|gint
name|x
parameter_list|,
name|gint
name|y
parameter_list|)
block|{
return|return
name|factory
operator|->
name|obj
operator|=
name|factory
operator|->
name|create_object
argument_list|(
name|x
argument_list|,
name|y
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|button_motion (GtkWidget * widget,GdkEventMotion * event,ObjectFactory_t * factory)
name|button_motion
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEventMotion
modifier|*
name|event
parameter_list|,
name|ObjectFactory_t
modifier|*
name|factory
parameter_list|)
block|{
name|gint
name|x
init|=
name|get_real_coord
argument_list|(
operator|(
name|gint
operator|)
name|event
operator|->
name|x
argument_list|)
decl_stmt|;
name|gint
name|y
init|=
name|get_real_coord
argument_list|(
operator|(
name|gint
operator|)
name|event
operator|->
name|y
argument_list|)
decl_stmt|;
name|round_to_grid
argument_list|(
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|)
expr_stmt|;
name|object_draw
argument_list|(
name|factory
operator|->
name|obj
argument_list|,
name|widget
operator|->
name|window
argument_list|)
expr_stmt|;
name|factory
operator|->
name|set_xy
argument_list|(
name|factory
operator|->
name|obj
argument_list|,
name|event
operator|->
name|state
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
expr_stmt|;
name|object_draw
argument_list|(
name|factory
operator|->
name|obj
argument_list|,
name|widget
operator|->
name|window
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_on_button_press (GtkWidget * widget,GdkEventButton * event,gpointer data)
name|object_on_button_press
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|GdkEventButton
modifier|*
name|event
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
specifier|static
name|ObjectFactory_t
modifier|*
name|factory
decl_stmt|;
name|PreferencesData_t
modifier|*
name|preferences
init|=
name|get_preferences
argument_list|()
decl_stmt|;
name|gint
name|x
init|=
name|get_real_coord
argument_list|(
operator|(
name|gint
operator|)
name|event
operator|->
name|x
argument_list|)
decl_stmt|;
name|gint
name|y
init|=
name|get_real_coord
argument_list|(
operator|(
name|gint
operator|)
name|event
operator|->
name|y
argument_list|)
decl_stmt|;
specifier|static
name|Object_t
modifier|*
name|obj
decl_stmt|;
if|if
condition|(
name|event
operator|->
name|type
operator|==
name|GDK_2BUTTON_PRESS
condition|)
return|return;
name|round_to_grid
argument_list|(
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|)
expr_stmt|;
if|if
condition|(
name|obj
condition|)
block|{
if|if
condition|(
name|event
operator|->
name|button
operator|==
literal|1
condition|)
block|{
if|if
condition|(
operator|!
name|factory
operator|->
name|finish
operator|||
name|factory
operator|->
name|finish
argument_list|(
name|obj
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
condition|)
block|{
name|gtk_signal_disconnect_by_func
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|button_motion
argument_list|,
name|factory
argument_list|)
expr_stmt|;
if|if
condition|(
name|object_is_valid
argument_list|(
name|obj
argument_list|)
condition|)
block|{
name|Command_t
modifier|*
name|command
init|=
name|create_command_new
argument_list|(
name|get_shapes
argument_list|()
argument_list|,
name|obj
argument_list|)
decl_stmt|;
name|command_execute
argument_list|(
name|command
argument_list|)
expr_stmt|;
if|if
condition|(
name|preferences
operator|->
name|prompt_for_area_info
condition|)
name|object_edit
argument_list|(
name|obj
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|object_draw
argument_list|(
name|obj
argument_list|,
name|widget
operator|->
name|window
argument_list|)
expr_stmt|;
name|object_unref
argument_list|(
name|obj
argument_list|)
expr_stmt|;
block|}
name|gdk_gc_set_function
argument_list|(
name|preferences
operator|->
name|normal_gc
argument_list|,
name|GDK_COPY
argument_list|)
expr_stmt|;
name|obj
operator|=
name|NULL
expr_stmt|;
name|main_clear_dimension
argument_list|()
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|event
operator|->
name|button
operator|==
literal|3
condition|)
block|{
name|object_draw
argument_list|(
name|obj
argument_list|,
name|widget
operator|->
name|window
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|factory
operator|->
name|cancel
operator|||
name|factory
operator|->
name|cancel
argument_list|(
name|event
argument_list|,
name|obj
argument_list|)
condition|)
block|{
name|gtk_signal_disconnect_by_func
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|button_motion
argument_list|,
name|factory
argument_list|)
expr_stmt|;
name|object_unref
argument_list|(
name|obj
argument_list|)
expr_stmt|;
name|gdk_gc_set_function
argument_list|(
name|preferences
operator|->
name|normal_gc
argument_list|,
name|GDK_COPY
argument_list|)
expr_stmt|;
name|obj
operator|=
name|NULL
expr_stmt|;
name|main_clear_dimension
argument_list|()
expr_stmt|;
block|}
else|else
block|{
name|object_draw
argument_list|(
name|obj
argument_list|,
name|widget
operator|->
name|window
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|event
operator|->
name|button
operator|==
literal|1
condition|)
block|{
name|factory
operator|=
operator|(
operator|(
name|ObjectFactory_t
operator|*
call|(
modifier|*
call|)
argument_list|(
name|guint
argument_list|)
operator|)
name|data
operator|)
operator|(
name|event
operator|->
name|state
operator|)
expr_stmt|;
name|obj
operator|=
name|object_factory_create_object
argument_list|(
name|factory
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
expr_stmt|;
name|gdk_gc_set_function
argument_list|(
name|preferences
operator|->
name|normal_gc
argument_list|,
name|GDK_EQUIV
argument_list|)
expr_stmt|;
name|gtk_signal_connect
argument_list|(
name|GTK_OBJECT
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|"motion_notify_event"
argument_list|,
operator|(
name|GtkSignalFunc
operator|)
name|button_motion
argument_list|,
name|factory
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|ObjectList_t
modifier|*
DECL|function|make_object_list (void)
name|make_object_list
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|g_new0
argument_list|(
name|ObjectList_t
argument_list|,
literal|1
argument_list|)
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_destruct (ObjectList_t * list)
name|object_list_destruct
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|object_list_remove_all
argument_list|(
name|list
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|list
operator|->
name|list
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|ObjectList_t
modifier|*
DECL|function|object_list_append_list (ObjectList_t * des,ObjectList_t * src)
name|object_list_append_list
parameter_list|(
name|ObjectList_t
modifier|*
name|des
parameter_list|,
name|ObjectList_t
modifier|*
name|src
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|src
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
name|object_list_append
argument_list|(
name|des
argument_list|,
name|object_clone
argument_list|(
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
argument_list|)
argument_list|)
expr_stmt|;
name|object_list_set_changed
argument_list|(
name|des
argument_list|,
operator|(
name|src
operator|)
condition|?
name|TRUE
else|:
name|FALSE
argument_list|)
expr_stmt|;
return|return
name|des
return|;
block|}
end_function

begin_function
name|ObjectList_t
modifier|*
DECL|function|object_list_copy (ObjectList_t * des,ObjectList_t * src)
name|object_list_copy
parameter_list|(
name|ObjectList_t
modifier|*
name|des
parameter_list|,
name|ObjectList_t
modifier|*
name|src
parameter_list|)
block|{
if|if
condition|(
name|des
condition|)
name|object_list_remove_all
argument_list|(
name|des
argument_list|)
expr_stmt|;
else|else
name|des
operator|=
name|make_object_list
argument_list|()
expr_stmt|;
return|return
name|object_list_append_list
argument_list|(
name|des
argument_list|,
name|src
argument_list|)
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_append (ObjectList_t * list,Object_t * object)
name|object_list_append
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|object
parameter_list|)
block|{
name|object
operator|->
name|list
operator|=
name|list
expr_stmt|;
name|list
operator|->
name|list
operator|=
name|g_list_append
argument_list|(
name|list
operator|->
name|list
argument_list|,
operator|(
name|gpointer
operator|)
name|object
argument_list|)
expr_stmt|;
name|object_list_set_changed
argument_list|(
name|list
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|add_cb
argument_list|,
name|object
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_prepend (ObjectList_t * list,Object_t * object)
name|object_list_prepend
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|object
parameter_list|)
block|{
name|object
operator|->
name|list
operator|=
name|list
expr_stmt|;
name|list
operator|->
name|list
operator|=
name|g_list_prepend
argument_list|(
name|list
operator|->
name|list
argument_list|,
operator|(
name|gpointer
operator|)
name|object
argument_list|)
expr_stmt|;
name|object_list_set_changed
argument_list|(
name|list
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|add_cb
argument_list|,
name|object
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_insert (ObjectList_t * list,gint position,Object_t * object)
name|object_list_insert
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gint
name|position
parameter_list|,
name|Object_t
modifier|*
name|object
parameter_list|)
block|{
name|object
operator|->
name|list
operator|=
name|list
expr_stmt|;
name|list
operator|->
name|list
operator|=
name|g_list_insert
argument_list|(
name|list
operator|->
name|list
argument_list|,
operator|(
name|gpointer
operator|)
name|object
argument_list|,
name|position
argument_list|)
expr_stmt|;
name|object_list_set_changed
argument_list|(
name|list
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|add_cb
argument_list|,
name|object
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove (ObjectList_t * list,Object_t * object)
name|object_list_remove
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|object
parameter_list|)
block|{
name|list
operator|->
name|list
operator|=
name|g_list_remove
argument_list|(
name|list
operator|->
name|list
argument_list|,
operator|(
name|gpointer
operator|)
name|object
argument_list|)
expr_stmt|;
name|object_list_set_changed
argument_list|(
name|list
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|remove_cb
argument_list|,
name|object
argument_list|)
expr_stmt|;
name|object_unref
argument_list|(
name|object
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove_link (ObjectList_t * list,GList * link)
name|object_list_remove_link
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|GList
modifier|*
name|link
parameter_list|)
block|{
name|list
operator|->
name|list
operator|=
name|g_list_remove_link
argument_list|(
name|list
operator|->
name|list
argument_list|,
name|link
argument_list|)
expr_stmt|;
name|object_list_set_changed
argument_list|(
name|list
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|remove_cb
argument_list|,
operator|(
name|Object_t
operator|*
operator|)
name|link
operator|->
name|data
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_update (ObjectList_t * list,Object_t * object)
name|object_list_update
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|object
parameter_list|)
block|{
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|update_cb
argument_list|,
name|object
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_draw (ObjectList_t * list,GdkWindow * window)
name|object_list_draw
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|GdkWindow
modifier|*
name|window
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
name|object_draw
argument_list|(
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
argument_list|,
name|window
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_draw_selected (ObjectList_t * list,GdkWindow * window)
name|object_list_draw_selected
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|GdkWindow
modifier|*
name|window
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
name|object_draw
argument_list|(
name|obj
argument_list|,
name|window
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|Object_t
modifier|*
DECL|function|object_list_find (ObjectList_t * list,gint x,gint y)
name|object_list_find
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gint
name|x
parameter_list|,
name|gint
name|y
parameter_list|)
block|{
name|Object_t
modifier|*
name|found
init|=
name|NULL
decl_stmt|;
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|class
operator|->
name|point_is_on
argument_list|(
name|obj
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
condition|)
name|found
operator|=
name|obj
expr_stmt|;
block|}
return|return
name|found
return|;
block|}
end_function

begin_function
name|Object_t
modifier|*
DECL|function|object_list_near_sash (ObjectList_t * list,gint x,gint y,MoveSashFunc_t * sash_func)
name|object_list_near_sash
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gint
name|x
parameter_list|,
name|gint
name|y
parameter_list|,
name|MoveSashFunc_t
modifier|*
name|sash_func
parameter_list|)
block|{
name|Object_t
modifier|*
name|found
init|=
name|NULL
decl_stmt|;
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
name|MoveSashFunc_t
name|func
init|=
name|obj
operator|->
name|class
operator|->
name|near_sash
argument_list|(
name|obj
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
decl_stmt|;
if|if
condition|(
name|func
condition|)
block|{
name|found
operator|=
name|obj
expr_stmt|;
operator|*
name|sash_func
operator|=
name|func
expr_stmt|;
block|}
block|}
block|}
return|return
name|found
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_remove_all (ObjectList_t * list)
name|object_list_remove_all
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|remove_cb
argument_list|,
name|obj
argument_list|)
expr_stmt|;
name|object_unref
argument_list|(
name|obj
argument_list|)
expr_stmt|;
block|}
name|g_list_free
argument_list|(
name|list
operator|->
name|list
argument_list|)
expr_stmt|;
name|list
operator|->
name|list
operator|=
name|NULL
expr_stmt|;
name|object_list_set_changed
argument_list|(
name|list
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|clear_paste_buffer (void)
name|clear_paste_buffer
parameter_list|(
name|void
parameter_list|)
block|{
if|if
condition|(
name|_paste_buffer
condition|)
name|object_list_remove_all
argument_list|(
name|_paste_buffer
argument_list|)
expr_stmt|;
else|else
name|_paste_buffer
operator|=
name|make_object_list
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|ObjectList_t
modifier|*
DECL|function|get_paste_buffer (void)
name|get_paste_buffer
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|_paste_buffer
return|;
block|}
end_function

begin_function
name|gint
DECL|function|object_list_cut (ObjectList_t * list)
name|object_list_cut
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|,
modifier|*
name|q
decl_stmt|;
name|gint
name|count
init|=
literal|0
decl_stmt|;
name|clear_paste_buffer
argument_list|()
expr_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|q
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|q
operator|=
name|p
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
if|if
condition|(
name|obj
operator|->
name|locked
condition|)
block|{
name|do_object_locked_dialog
argument_list|()
expr_stmt|;
block|}
else|else
block|{
name|object_list_append
argument_list|(
name|_paste_buffer
argument_list|,
name|obj
argument_list|)
expr_stmt|;
name|object_list_remove_link
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
block|}
name|object_list_set_changed
argument_list|(
name|list
argument_list|,
operator|(
name|count
operator|)
condition|?
name|TRUE
else|:
name|FALSE
argument_list|)
expr_stmt|;
return|return
name|count
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_copy_to_paste_buffer (ObjectList_t * list)
name|object_list_copy_to_paste_buffer
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
name|clear_paste_buffer
argument_list|()
expr_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
name|object_list_append
argument_list|(
name|_paste_buffer
argument_list|,
name|object_clone
argument_list|(
name|obj
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_paste (ObjectList_t * list)
name|object_list_paste
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|object_list_append_list
argument_list|(
name|list
argument_list|,
name|_paste_buffer
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_delete_selected (ObjectList_t * list)
name|object_list_delete_selected
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|,
modifier|*
name|q
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|q
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|q
operator|=
name|p
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
if|if
condition|(
name|obj
operator|->
name|locked
condition|)
block|{
name|do_object_locked_dialog
argument_list|()
expr_stmt|;
block|}
else|else
block|{
name|object_list_remove_link
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
name|object_unref
argument_list|(
name|obj
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_edit_selected (ObjectList_t * list)
name|object_list_edit_selected
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
name|object_edit
argument_list|(
name|obj
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function

begin_function
name|gint
DECL|function|object_list_select_all (ObjectList_t * list)
name|object_list_select_all
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
name|gint
name|count
init|=
literal|0
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
operator|!
name|obj
operator|->
name|selected
condition|)
block|{
name|object_select
argument_list|(
name|obj
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
return|return
name|count
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_select_next (ObjectList_t * list)
name|object_list_select_next
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
name|object_unselect
argument_list|(
name|obj
argument_list|)
expr_stmt|;
name|p
operator|=
operator|(
name|p
operator|->
name|next
operator|)
condition|?
name|p
operator|->
name|next
else|:
name|list
operator|->
name|list
expr_stmt|;
name|object_select
argument_list|(
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
argument_list|)
expr_stmt|;
for|for
control|(
name|p
operator|=
name|p
operator|->
name|next
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|obj
operator|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
expr_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
name|object_unselect
argument_list|(
name|obj
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
block|}
block|}
end_function

begin_function
DECL|function|object_list_select_prev (ObjectList_t * list)
name|void
name|object_list_select_prev
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
name|GList
modifier|*
name|q
init|=
operator|(
name|p
operator|->
name|prev
operator|)
condition|?
name|p
operator|->
name|prev
else|:
name|g_list_last
argument_list|(
name|list
operator|->
name|list
argument_list|)
decl_stmt|;
for|for
control|(
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|obj
operator|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
expr_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
name|object_unselect
argument_list|(
name|obj
argument_list|)
expr_stmt|;
block|}
name|object_select
argument_list|(
operator|(
name|Object_t
operator|*
operator|)
name|q
operator|->
name|data
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function

begin_function
name|gint
DECL|function|object_list_select_region (ObjectList_t * list,gint x,gint y,gint width,gint height)
name|object_list_select_region
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gint
name|x
parameter_list|,
name|gint
name|y
parameter_list|,
name|gint
name|width
parameter_list|,
name|gint
name|height
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
name|gint
name|count
init|=
literal|0
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|gint
name|obj_x
decl_stmt|,
name|obj_y
decl_stmt|,
name|obj_width
decl_stmt|,
name|obj_height
decl_stmt|;
name|object_get_dimensions
argument_list|(
name|obj
argument_list|,
operator|&
name|obj_x
argument_list|,
operator|&
name|obj_y
argument_list|,
operator|&
name|obj_width
argument_list|,
operator|&
name|obj_height
argument_list|)
expr_stmt|;
if|if
condition|(
name|obj_x
operator|>=
name|x
operator|&&
name|obj_x
operator|+
name|obj_width
operator|<=
name|x
operator|+
name|width
operator|&&
name|obj_y
operator|>=
name|y
operator|&&
name|obj_y
operator|+
name|obj_height
operator|<=
name|y
operator|+
name|height
condition|)
block|{
name|object_select
argument_list|(
name|obj
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
return|return
name|count
return|;
block|}
end_function

begin_function
name|gint
DECL|function|object_list_deselect_all (ObjectList_t * list,Object_t * exception)
name|object_list_deselect_all
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|exception
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
name|gint
name|count
init|=
literal|0
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
operator|&&
name|obj
operator|!=
name|exception
condition|)
block|{
name|object_unselect
argument_list|(
name|obj
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
block|}
return|return
name|count
return|;
block|}
end_function

begin_function
name|gint
DECL|function|object_list_nr_selected (ObjectList_t * list)
name|object_list_nr_selected
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
name|gint
name|count
init|=
literal|0
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
name|count
operator|++
expr_stmt|;
block|}
return|return
name|count
return|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_resize (ObjectList_t * list,gint percentage_x,gint percentage_y)
name|object_list_resize
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gint
name|percentage_x
parameter_list|,
name|gint
name|percentage_y
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|object_resize
argument_list|(
name|obj
argument_list|,
name|percentage_x
argument_list|,
name|percentage_y
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|object_list_swap_prev (ObjectList_t * list,GList * p)
name|object_list_swap_prev
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|GList
modifier|*
name|p
parameter_list|)
block|{
name|gpointer
name|swap
init|=
name|p
operator|->
name|data
decl_stmt|;
name|p
operator|->
name|data
operator|=
name|p
operator|->
name|prev
operator|->
name|data
expr_stmt|;
name|p
operator|->
name|prev
operator|->
name|data
operator|=
name|swap
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|move_cb
argument_list|,
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|move_cb
argument_list|,
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|prev
operator|->
name|data
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|object_list_swap_next (ObjectList_t * list,GList * p)
name|object_list_swap_next
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|GList
modifier|*
name|p
parameter_list|)
block|{
name|gpointer
name|swap
init|=
name|p
operator|->
name|data
decl_stmt|;
name|p
operator|->
name|data
operator|=
name|p
operator|->
name|next
operator|->
name|data
expr_stmt|;
name|p
operator|->
name|next
operator|->
name|data
operator|=
name|swap
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|move_cb
argument_list|,
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
argument_list|)
expr_stmt|;
name|object_list_callback_call
argument_list|(
operator|&
name|list
operator|->
name|move_cb
argument_list|,
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|next
operator|->
name|data
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_move_selected (ObjectList_t * list,gint dx,gint dy)
name|object_list_move_selected
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gint
name|dx
parameter_list|,
name|gint
name|dy
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
name|object_move
argument_list|(
name|obj
argument_list|,
name|dx
argument_list|,
name|dy
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_move_up (ObjectList_t * list,Object_t * obj)
name|object_list_move_up
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|GList
modifier|*
name|p
init|=
name|g_list_find
argument_list|(
name|list
operator|->
name|list
argument_list|,
operator|(
name|gpointer
operator|)
name|obj
argument_list|)
decl_stmt|;
name|object_list_swap_prev
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_move_down (ObjectList_t * list,Object_t * obj)
name|object_list_move_down
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|Object_t
modifier|*
name|obj
parameter_list|)
block|{
name|GList
modifier|*
name|p
init|=
name|g_list_find
argument_list|(
name|list
operator|->
name|list
argument_list|,
operator|(
name|gpointer
operator|)
name|obj
argument_list|)
decl_stmt|;
name|object_list_swap_next
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|object_list_move_selected_up (ObjectList_t * list)
name|object_list_move_selected_up
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
operator|&&
name|p
operator|->
name|prev
condition|)
name|object_list_swap_prev
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_move_selected_down (ObjectList_t * list)
name|object_list_move_selected_down
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|g_list_last
argument_list|(
name|list
operator|->
name|list
argument_list|)
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|prev
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
operator|&&
name|p
operator|->
name|next
condition|)
name|object_list_swap_next
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_move_to_front (ObjectList_t * list)
name|object_list_move_to_front
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|,
modifier|*
name|q
decl_stmt|;
name|guint
name|length
init|=
name|g_list_length
argument_list|(
name|list
operator|->
name|list
argument_list|)
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|length
condition|;
name|p
operator|=
name|q
operator|,
name|length
operator|--
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|q
operator|=
name|p
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
name|object_list_remove_link
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
name|object_list_append
argument_list|(
name|list
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_send_to_back (ObjectList_t * list)
name|object_list_send_to_back
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|,
modifier|*
name|q
decl_stmt|;
name|guint
name|length
init|=
name|g_list_length
argument_list|(
name|list
operator|->
name|list
argument_list|)
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|length
condition|;
name|p
operator|=
name|q
operator|,
name|length
operator|--
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|q
operator|=
name|p
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|obj
operator|->
name|selected
condition|)
block|{
name|object_list_remove_link
argument_list|(
name|list
argument_list|,
name|p
argument_list|)
expr_stmt|;
name|object_list_prepend
argument_list|(
name|list
argument_list|,
name|obj
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_write_csim (ObjectList_t * list,gpointer param,OutputFunc_t output)
name|object_list_write_csim
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|param
parameter_list|,
name|OutputFunc_t
name|output
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|output
argument_list|(
name|param
argument_list|,
literal|"<AREA SHAPE="
argument_list|)
expr_stmt|;
name|obj
operator|->
name|class
operator|->
name|write_csim
argument_list|(
name|obj
argument_list|,
name|param
argument_list|,
name|output
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|obj
operator|->
name|comment
condition|)
name|output
argument_list|(
name|param
argument_list|,
literal|" ALT=\"%s\""
argument_list|,
name|obj
operator|->
name|comment
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|obj
operator|->
name|target
condition|)
name|output
argument_list|(
name|param
argument_list|,
literal|" TARGET=\"%s\""
argument_list|,
name|obj
operator|->
name|target
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|obj
operator|->
name|mouse_over
condition|)
name|output
argument_list|(
name|param
argument_list|,
literal|" onMouseover=\"%s\""
argument_list|,
name|obj
operator|->
name|mouse_over
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|obj
operator|->
name|mouse_out
condition|)
name|output
argument_list|(
name|param
argument_list|,
literal|" onMouseout=\"%s\""
argument_list|,
name|obj
operator|->
name|mouse_out
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|obj
operator|->
name|focus
condition|)
name|output
argument_list|(
name|param
argument_list|,
literal|" onFocus=\"%s\""
argument_list|,
name|obj
operator|->
name|focus
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|obj
operator|->
name|blur
condition|)
name|output
argument_list|(
name|param
argument_list|,
literal|" onBlur=\"%s\""
argument_list|,
name|obj
operator|->
name|blur
argument_list|)
expr_stmt|;
name|output
argument_list|(
name|param
argument_list|,
literal|" HREF=\"%s\">\n"
argument_list|,
name|obj
operator|->
name|url
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_write_cern (ObjectList_t * list,gpointer param,OutputFunc_t output)
name|object_list_write_cern
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|param
parameter_list|,
name|OutputFunc_t
name|output
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
name|obj
operator|->
name|class
operator|->
name|write_cern
argument_list|(
name|obj
argument_list|,
name|param
argument_list|,
name|output
argument_list|)
expr_stmt|;
name|output
argument_list|(
name|param
argument_list|,
literal|" %s\n"
argument_list|,
name|obj
operator|->
name|url
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|object_list_write_ncsa (ObjectList_t * list,gpointer param,OutputFunc_t output)
name|object_list_write_ncsa
parameter_list|(
name|ObjectList_t
modifier|*
name|list
parameter_list|,
name|gpointer
name|param
parameter_list|,
name|OutputFunc_t
name|output
parameter_list|)
block|{
name|GList
modifier|*
name|p
decl_stmt|;
for|for
control|(
name|p
operator|=
name|list
operator|->
name|list
init|;
name|p
condition|;
name|p
operator|=
name|p
operator|->
name|next
control|)
block|{
name|Object_t
modifier|*
name|obj
init|=
operator|(
name|Object_t
operator|*
operator|)
name|p
operator|->
name|data
decl_stmt|;
if|if
condition|(
operator|*
name|obj
operator|->
name|comment
condition|)
name|output
argument_list|(
name|param
argument_list|,
literal|"# %s\n"
argument_list|,
name|obj
operator|->
name|comment
argument_list|)
expr_stmt|;
name|obj
operator|->
name|class
operator|->
name|write_ncsa
argument_list|(
name|obj
argument_list|,
name|param
argument_list|,
name|output
argument_list|)
expr_stmt|;
name|output
argument_list|(
name|param
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
block|}
block|}
end_function

end_unit

