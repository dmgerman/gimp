begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<ctype.h>
end_include

begin_include
include|#
directive|include
file|<time.h>
end_include

begin_include
include|#
directive|include
file|<math.h>
end_include

begin_include
include|#
directive|include
file|"expressions.h"
end_include

begin_decl_stmt
DECL|variable|x_val
DECL|variable|y_val
name|DBL
name|x_val
decl_stmt|,
name|y_val
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|nodes
specifier|static
name|NODE
modifier|*
name|nodes
index|[
name|MAX_STACK_ENTRIES
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|num_of_nodes
specifier|static
name|int
name|num_of_nodes
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|r_values
specifier|static
name|DBL
name|r_values
index|[
name|MAX_STACK_ENTRIES
index|]
decl_stmt|,
DECL|variable|g_values
name|g_values
index|[
name|MAX_STACK_ENTRIES
index|]
decl_stmt|,
DECL|variable|b_values
name|b_values
index|[
name|MAX_STACK_ENTRIES
index|]
decl_stmt|,
DECL|variable|alfa_values
name|alfa_values
index|[
name|MAX_STACK_ENTRIES
index|]
decl_stmt|,
DECL|variable|data_values
name|data_values
index|[
name|MAX_STACK_ENTRIES
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|func_st
specifier|static
name|func_type
modifier|*
name|func_st
index|[
name|MAX_STACK_ENTRIES
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|n_top
name|NODE
modifier|*
modifier|*
name|n_top
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|r_top
DECL|variable|g_top
DECL|variable|b_top
DECL|variable|alfa_top
name|DBL
modifier|*
name|r_top
decl_stmt|,
modifier|*
name|g_top
decl_stmt|,
modifier|*
name|b_top
decl_stmt|,
modifier|*
name|alfa_top
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|data_top
name|DBL
modifier|*
name|data_top
decl_stmt|;
end_decl_stmt

begin_function_decl
name|void
name|conv_1_3
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|conv_1_4
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|conv_3_1
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|conv_3_4
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|conv_4_1
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|conv_4_3
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|insert_convert_func
parameter_list|(
name|int
name|ifrom
parameter_list|,
name|int
name|ito
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**************************************************          EVALUATION& COMPILATION OF EXP  **************************************************/
end_comment

begin_function
DECL|function|eval_xy (DBL * result,DBL x,DBL y)
name|void
name|eval_xy
parameter_list|(
name|DBL
modifier|*
name|result
parameter_list|,
name|DBL
name|x
parameter_list|,
name|DBL
name|y
parameter_list|)
block|{
name|func_type
modifier|*
modifier|*
name|func
decl_stmt|;
name|int
name|i
decl_stmt|;
name|x_val
operator|=
name|x
expr_stmt|;
name|y_val
operator|=
name|y
expr_stmt|;
name|r_top
operator|=
name|r_values
operator|-
literal|1
expr_stmt|;
name|g_top
operator|=
name|g_values
operator|-
literal|1
expr_stmt|;
name|b_top
operator|=
name|b_values
operator|-
literal|1
expr_stmt|;
name|alfa_top
operator|=
name|alfa_values
operator|-
literal|1
expr_stmt|;
name|n_top
operator|=
name|nodes
expr_stmt|;
name|data_top
operator|=
name|data_values
expr_stmt|;
name|func
operator|=
name|func_st
expr_stmt|;
for|for
control|(
name|i
operator|=
name|num_of_nodes
init|;
name|i
condition|;
call|(
modifier|*
name|func
call|)
argument_list|()
operator|,
name|i
operator|--
operator|,
name|n_top
operator|++
operator|,
name|func
operator|++
control|)
empty_stmt|;
name|result
index|[
literal|0
index|]
operator|=
operator|*
name|r_top
expr_stmt|;
name|result
index|[
literal|1
index|]
operator|=
operator|*
name|g_top
expr_stmt|;
name|result
index|[
literal|2
index|]
operator|=
operator|*
name|b_top
expr_stmt|;
name|result
index|[
literal|3
index|]
operator|=
operator|*
name|alfa_top
expr_stmt|;
block|}
end_function

begin_function
DECL|function|find_tof (NODE * n)
name|char
name|find_tof
parameter_list|(
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|char
name|tmp
decl_stmt|,
name|ret
init|=
literal|1
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n
operator|->
name|noo
condition|;
name|i
operator|++
control|)
block|{
name|tmp
operator|=
name|find_tof
argument_list|(
operator|(
name|n
operator|->
name|offsprings
operator|)
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|tmp
operator|>
name|ret
condition|)
name|ret
operator|=
name|tmp
expr_stmt|;
block|}
if|if
condition|(
name|n
operator|->
name|op
operator|->
name|ret_type
operator|==
operator|-
literal|1
condition|)
name|n
operator|->
name|tof
operator|=
name|ret
expr_stmt|;
else|else
name|n
operator|->
name|tof
operator|=
name|n
operator|->
name|op
operator|->
name|ret_type
expr_stmt|;
return|return
name|n
operator|->
name|tof
return|;
block|}
end_function

begin_function
DECL|function|st_insert (func_type * func,NODE * n)
name|void
name|st_insert
parameter_list|(
name|func_type
modifier|*
name|func
parameter_list|,
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|nodes
index|[
name|num_of_nodes
index|]
operator|=
name|n
expr_stmt|;
name|func_st
index|[
name|num_of_nodes
index|]
operator|=
name|func
expr_stmt|;
name|num_of_nodes
operator|++
expr_stmt|;
block|}
end_function

begin_function
DECL|function|compile (NODE * n)
name|void
name|compile
parameter_list|(
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|int
name|ret
decl_stmt|,
name|oret
decl_stmt|;
name|int
name|cret
decl_stmt|;
name|ret
operator|=
name|n
operator|->
name|tof
expr_stmt|;
name|cret
operator|=
name|ret
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|cret
operator|>
literal|0
condition|)
name|cret
operator|--
expr_stmt|;
comment|/* 1,3,4 -=> 0,1,2 */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n
operator|->
name|noo
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|n
operator|->
name|op
operator|->
name|funcs
operator|!=
name|NULL
condition|)
if|if
condition|(
operator|(
operator|(
name|n
operator|->
name|op
operator|->
name|funcs
operator|)
index|[
name|i
index|]
index|[
name|cret
index|]
operator|)
operator|!=
name|NULL
condition|)
name|st_insert
argument_list|(
operator|(
operator|(
name|n
operator|->
name|op
operator|->
name|funcs
operator|)
index|[
name|i
index|]
index|[
name|cret
index|]
operator|)
argument_list|,
name|n
argument_list|)
expr_stmt|;
name|compile
argument_list|(
operator|(
name|n
operator|->
name|offsprings
operator|)
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|oret
operator|=
operator|(
name|n
operator|->
name|offsprings
operator|)
index|[
name|i
index|]
operator|->
name|tof
expr_stmt|;
if|if
condition|(
name|ret
operator|!=
name|oret
condition|)
name|insert_convert_func
argument_list|(
name|oret
argument_list|,
name|ret
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|n
operator|->
name|op
operator|->
name|funcs
operator|!=
name|NULL
condition|)
if|if
condition|(
operator|(
operator|(
name|n
operator|->
name|op
operator|->
name|funcs
operator|)
index|[
name|i
index|]
index|[
name|cret
index|]
operator|)
operator|!=
name|NULL
condition|)
name|st_insert
argument_list|(
operator|(
operator|(
name|n
operator|->
name|op
operator|->
name|funcs
operator|)
index|[
name|i
index|]
index|[
name|cret
index|]
operator|)
argument_list|,
name|n
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|n
operator|->
name|op
operator|->
name|last_func
operator|)
index|[
name|cret
index|]
operator|!=
name|NULL
condition|)
name|st_insert
argument_list|(
operator|(
name|n
operator|->
name|op
operator|->
name|last_func
operator|)
index|[
name|cret
index|]
argument_list|,
name|n
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n
operator|->
name|op
operator|->
name|nofd
condition|;
name|i
operator|++
control|)
block|{
operator|*
name|data_top
operator|=
name|n
operator|->
name|data
index|[
name|i
index|]
expr_stmt|;
name|data_top
operator|++
expr_stmt|;
block|}
block|}
end_function

begin_function
DECL|function|prepare_node (NODE * n)
name|void
name|prepare_node
parameter_list|(
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|char
name|lastret
decl_stmt|;
name|lastret
operator|=
name|find_tof
argument_list|(
name|n
argument_list|)
expr_stmt|;
name|num_of_nodes
operator|=
literal|0
expr_stmt|;
name|data_top
operator|=
name|data_values
expr_stmt|;
name|compile
argument_list|(
name|n
argument_list|)
expr_stmt|;
if|if
condition|(
name|lastret
operator|==
literal|3
condition|)
name|insert_convert_func
argument_list|(
literal|3
argument_list|,
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
name|lastret
operator|==
literal|1
condition|)
name|insert_convert_func
argument_list|(
literal|1
argument_list|,
literal|4
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|conv_1_3 (void)
name|void
name|conv_1_3
parameter_list|(
name|void
parameter_list|)
block|{
name|g_top
operator|++
expr_stmt|;
operator|*
name|g_top
operator|=
operator|*
name|r_top
expr_stmt|;
name|b_top
operator|++
expr_stmt|;
operator|*
name|b_top
operator|=
operator|*
name|r_top
expr_stmt|;
block|}
end_function

begin_function
DECL|function|conv_1_4 (void)
name|void
name|conv_1_4
parameter_list|(
name|void
parameter_list|)
block|{
name|g_top
operator|++
expr_stmt|;
operator|*
name|g_top
operator|=
operator|*
name|r_top
expr_stmt|;
name|b_top
operator|++
expr_stmt|;
operator|*
name|b_top
operator|=
operator|*
name|r_top
expr_stmt|;
name|alfa_top
operator|++
expr_stmt|;
operator|*
name|alfa_top
operator|=
literal|1.0
expr_stmt|;
block|}
end_function

begin_function
DECL|function|conv_3_1 (void)
name|void
name|conv_3_1
parameter_list|(
name|void
parameter_list|)
block|{
operator|*
name|r_top
operator|=
operator|*
name|r_top
operator|*
literal|0.299
operator|+
operator|*
name|g_top
operator|*
literal|0.587
operator|+
operator|*
name|b_top
operator|*
literal|0.114
expr_stmt|;
name|g_top
operator|--
expr_stmt|;
name|b_top
operator|--
expr_stmt|;
block|}
end_function

begin_function
DECL|function|conv_3_4 (void)
name|void
name|conv_3_4
parameter_list|(
name|void
parameter_list|)
block|{
name|alfa_top
operator|++
expr_stmt|;
operator|*
name|alfa_top
operator|=
literal|1.0
expr_stmt|;
block|}
end_function

begin_function
DECL|function|conv_4_1 (void)
name|void
name|conv_4_1
parameter_list|(
name|void
parameter_list|)
block|{
operator|*
name|r_top
operator|=
operator|*
name|r_top
operator|*
literal|0.299
operator|+
operator|*
name|g_top
operator|*
literal|0.587
operator|+
operator|*
name|b_top
operator|*
literal|0.114
expr_stmt|;
name|g_top
operator|--
expr_stmt|;
name|b_top
operator|--
expr_stmt|;
name|alfa_top
operator|--
expr_stmt|;
block|}
end_function

begin_function
DECL|function|conv_4_3 (void)
name|void
name|conv_4_3
parameter_list|(
name|void
parameter_list|)
block|{
operator|--
name|alfa_top
expr_stmt|;
block|}
end_function

begin_function
DECL|function|insert_convert_func (int ifrom,int ito)
name|void
name|insert_convert_func
parameter_list|(
name|int
name|ifrom
parameter_list|,
name|int
name|ito
parameter_list|)
block|{
if|if
condition|(
name|ifrom
operator|==
name|ito
condition|)
return|return;
if|if
condition|(
name|ifrom
operator|==
literal|1
condition|)
if|if
condition|(
name|ito
operator|==
literal|3
condition|)
name|st_insert
argument_list|(
name|conv_1_3
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
else|else
name|st_insert
argument_list|(
name|conv_1_4
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|ifrom
operator|==
literal|3
condition|)
if|if
condition|(
name|ito
operator|==
literal|1
condition|)
name|st_insert
argument_list|(
name|conv_3_1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
else|else
name|st_insert
argument_list|(
name|conv_3_4
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|ito
operator|==
literal|1
condition|)
name|st_insert
argument_list|(
name|conv_4_1
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
else|else
name|st_insert
argument_list|(
name|conv_4_3
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/************************************************/
end_comment

begin_function
DECL|function|destroy_node (NODE * n)
name|void
name|destroy_node
parameter_list|(
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
if|if
condition|(
name|n
operator|==
name|NULL
condition|)
return|return;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n
operator|->
name|noo
condition|;
name|i
operator|++
control|)
name|destroy_node
argument_list|(
operator|(
name|n
operator|->
name|offsprings
operator|)
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|n
argument_list|)
expr_stmt|;
return|return;
block|}
end_function

begin_function
DECL|function|dblrand ()
name|DBL
name|dblrand
parameter_list|()
block|{
return|return
operator|(
operator|(
name|DBL
operator|)
name|rand
argument_list|()
operator|)
operator|/
operator|(
operator|(
name|DBL
operator|)
name|RAND_MAX
operator|)
return|;
block|}
end_function

begin_function
DECL|function|init_random ()
name|void
name|init_random
parameter_list|()
block|{
name|srand
argument_list|(
name|time
argument_list|(
name|NULL
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|node_copy (NODE * n)
name|NODE
modifier|*
name|node_copy
parameter_list|(
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|NODE
modifier|*
name|nn
decl_stmt|;
name|int
name|i
decl_stmt|;
name|nn
operator|=
operator|(
name|NODE
operator|*
operator|)
name|malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|NODE
argument_list|)
argument_list|)
expr_stmt|;
operator|*
name|nn
operator|=
operator|*
name|n
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|n
operator|->
name|noo
condition|;
name|i
operator|++
control|)
operator|(
name|nn
operator|->
name|offsprings
operator|)
index|[
name|i
index|]
operator|=
name|node_copy
argument_list|(
operator|(
name|n
operator|->
name|offsprings
operator|)
index|[
name|i
index|]
argument_list|)
expr_stmt|;
return|return
name|nn
return|;
block|}
end_function

begin_function
DECL|function|expr_fprint (FILE * f,int i,NODE * n)
name|void
name|expr_fprint
parameter_list|(
name|FILE
modifier|*
name|f
parameter_list|,
name|int
name|i
parameter_list|,
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|char
name|tmp
index|[
literal|100
index|]
decl_stmt|;
name|int
name|j
decl_stmt|;
name|memset
argument_list|(
name|tmp
argument_list|,
literal|' '
argument_list|,
literal|100
argument_list|)
expr_stmt|;
name|tmp
index|[
name|i
operator|%
literal|100
index|]
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|n
operator|->
name|op
operator|->
name|nofd
operator|==
literal|1
condition|)
block|{
comment|/* float */
name|fprintf
argument_list|(
name|f
argument_list|,
literal|"%s%.8f\n"
argument_list|,
name|tmp
argument_list|,
name|n
operator|->
name|data
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|n
operator|->
name|op
operator|->
name|nofd
operator|>=
literal|3
condition|)
block|{
name|fprintf
argument_list|(
name|f
argument_list|,
literal|"%s#("
argument_list|,
name|tmp
argument_list|)
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|n
operator|->
name|op
operator|->
name|nofd
operator|-
literal|1
condition|;
name|j
operator|++
control|)
name|fprintf
argument_list|(
name|f
argument_list|,
literal|"%.8f "
argument_list|,
name|n
operator|->
name|data
index|[
name|j
index|]
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|f
argument_list|,
literal|"%.8f"
argument_list|,
name|n
operator|->
name|data
index|[
name|j
index|]
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|f
argument_list|,
literal|")\n"
argument_list|)
expr_stmt|;
return|return;
block|}
name|fprintf
argument_list|(
name|f
argument_list|,
literal|"%s(%s\n"
argument_list|,
name|tmp
argument_list|,
name|n
operator|->
name|op
operator|->
name|name
argument_list|)
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|n
operator|->
name|noo
condition|;
name|j
operator|++
control|)
name|expr_fprint
argument_list|(
name|f
argument_list|,
name|i
operator|+
literal|2
argument_list|,
operator|(
name|n
operator|->
name|offsprings
operator|)
index|[
name|j
index|]
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|f
argument_list|,
literal|"%s)\n"
argument_list|,
name|tmp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
DECL|function|expr_sprint (char * s,NODE * n)
name|int
name|expr_sprint
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|NODE
modifier|*
name|n
parameter_list|)
block|{
name|int
name|len
init|=
literal|0
decl_stmt|,
name|j
decl_stmt|,
name|t
decl_stmt|;
if|if
condition|(
name|n
operator|->
name|op
operator|->
name|nofd
operator|==
literal|1
condition|)
block|{
comment|/* float */
return|return
name|sprintf
argument_list|(
name|s
argument_list|,
literal|"%.8f\n"
argument_list|,
name|n
operator|->
name|data
index|[
literal|0
index|]
argument_list|)
return|;
block|}
if|if
condition|(
name|n
operator|->
name|op
operator|->
name|nofd
operator|>=
literal|3
condition|)
block|{
name|len
operator|=
name|sprintf
argument_list|(
name|s
argument_list|,
literal|"#("
argument_list|)
expr_stmt|;
name|s
operator|+=
name|len
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|n
operator|->
name|op
operator|->
name|nofd
operator|-
literal|1
condition|;
name|j
operator|++
control|)
block|{
name|t
operator|=
name|sprintf
argument_list|(
name|s
argument_list|,
literal|"%.8f "
argument_list|,
name|n
operator|->
name|data
index|[
name|j
index|]
argument_list|)
expr_stmt|;
name|s
operator|+=
name|t
expr_stmt|;
name|len
operator|+=
name|t
expr_stmt|;
block|}
name|t
operator|=
name|sprintf
argument_list|(
name|s
argument_list|,
literal|"%.8f)"
argument_list|,
name|n
operator|->
name|data
index|[
name|j
index|]
argument_list|)
expr_stmt|;
name|s
operator|+=
name|t
expr_stmt|;
name|len
operator|+=
name|t
expr_stmt|;
return|return
name|len
return|;
block|}
name|len
operator|=
name|sprintf
argument_list|(
name|s
argument_list|,
literal|"(%s"
argument_list|,
name|n
operator|->
name|op
operator|->
name|name
argument_list|)
expr_stmt|;
name|s
operator|+=
name|len
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|n
operator|->
name|noo
condition|;
name|j
operator|++
control|)
block|{
operator|*
name|s
operator|=
literal|' '
expr_stmt|;
name|s
operator|++
expr_stmt|;
name|len
operator|++
expr_stmt|;
name|t
operator|=
name|expr_sprint
argument_list|(
name|s
argument_list|,
operator|(
name|n
operator|->
name|offsprings
operator|)
index|[
name|j
index|]
argument_list|)
expr_stmt|;
name|s
operator|+=
name|t
expr_stmt|;
name|len
operator|+=
name|t
expr_stmt|;
block|}
operator|*
name|s
operator|=
literal|')'
expr_stmt|;
name|s
operator|++
expr_stmt|;
name|len
operator|++
expr_stmt|;
operator|*
name|s
operator|=
literal|'\000'
expr_stmt|;
return|return
name|len
return|;
block|}
end_function

begin_comment
comment|/******************************    FUNCTIONS FOR PARSING EXPRESSIONS  ******************************/
end_comment

begin_function
DECL|function|find_op (char * c)
specifier|static
name|int
name|find_op
parameter_list|(
name|char
modifier|*
name|c
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|Number_of_Functions
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|strcmp
argument_list|(
name|c
argument_list|,
name|FuncInfo
index|[
name|i
index|]
operator|.
name|name
argument_list|)
operator|==
literal|0
condition|)
return|return
name|i
return|;
return|return
operator|-
literal|1
return|;
block|}
end_function

begin_define
DECL|macro|EAT_EMPTY_SPACE (PTR)
define|#
directive|define
name|EAT_EMPTY_SPACE
parameter_list|(
name|PTR
parameter_list|)
define|\
value|while (isspace(*PTR)) (PTR)++;
end_define

begin_define
DECL|macro|PERROR (S)
define|#
directive|define
name|PERROR
parameter_list|(
name|S
parameter_list|)
define|\
value|{				\      int j;			\      if (S!=NULL)		\        printf("Error: %s\n",S);	\      for (j=0; j< params; j++)	\        destroy_node(offs[j]);	\      return NULL;		\    }
end_define

begin_function
DECL|function|parse_prefix_expression (char ** c)
name|NODE
modifier|*
name|parse_prefix_expression
parameter_list|(
name|char
modifier|*
modifier|*
name|c
parameter_list|)
block|{
name|int
name|p
decl_stmt|,
name|params
decl_stmt|;
name|int
name|i
decl_stmt|;
name|NODE
modifier|*
name|n
decl_stmt|;
name|DBL
name|v
decl_stmt|;
name|NODE
argument_list|*
operator|(
name|offs
index|[
name|MAX_NUMBER_OF_PARAMETERS
index|]
operator|)
argument_list|;
name|char
name|buff
index|[
literal|50
index|]
argument_list|;
name|EAT_EMPTY_SPACE
argument_list|(
operator|*
name|c
argument_list|)
argument_list|;
name|params
operator|=
literal|0
argument_list|;   if
operator|(
operator|*
operator|*
name|c
operator|==
literal|'('
operator|)
comment|/* operator */
block|{
name|char
operator|*
name|tmp
block|;
name|char
name|vtmp
block|;
operator|(
operator|*
name|c
operator|)
operator|++
block|;
name|EAT_EMPTY_SPACE
argument_list|(
operator|*
name|c
argument_list|)
block|;
name|tmp
operator|=
operator|*
name|c
block|;
while|while
condition|(
operator|(
operator|!
name|isspace
argument_list|(
operator|*
operator|*
name|c
argument_list|)
operator|)
operator|&&
operator|(
operator|*
operator|*
name|c
operator|!=
literal|')'
operator|)
condition|)
operator|(
operator|*
name|c
operator|)
operator|++
expr_stmt|;
name|vtmp
operator|=
operator|*
operator|*
name|c
argument_list|;
operator|*
operator|*
name|c
operator|=
literal|0
argument_list|;       if
operator|(
operator|(
name|p
operator|=
name|find_op
argument_list|(
name|tmp
argument_list|)
operator|)
operator|==
operator|-
literal|1
operator|)
block|{
name|sprintf
argument_list|(
name|buff
argument_list|,
literal|"unknown operator: %s"
argument_list|,
name|tmp
argument_list|)
block|;
name|PERROR
argument_list|(
argument|buff
argument_list|)
block|}
argument_list|;
operator|*
operator|*
name|c
operator|=
name|vtmp
argument_list|;       for
operator|(
name|i
operator|=
literal|0
expr|;
name|i
operator|<=
name|MAX_NUMBER_OF_PARAMETERS
expr|;
name|i
operator|++
operator|,
name|params
operator|++
operator|)
block|{
name|EAT_EMPTY_SPACE
argument_list|(
operator|*
name|c
argument_list|)
block|;
if|if
condition|(
operator|*
operator|*
name|c
operator|==
literal|')'
condition|)
break|break;
name|offs
index|[
name|i
index|]
operator|=
name|parse_prefix_expression
argument_list|(
name|c
argument_list|)
argument_list|; 	  if
operator|(
name|offs
index|[
name|i
index|]
operator|==
name|NULL
operator|)
name|PERROR
argument_list|(
operator|(
name|char
operator|*
operator|)
name|NULL
argument_list|)
argument_list|;
block|}
end_function

begin_if
if|if
condition|(
operator|*
operator|*
name|c
operator|!=
literal|')'
condition|)
name|PERROR
argument_list|(
literal|"')' expected"
argument_list|)
expr_stmt|;
end_if

begin_expr_stmt
operator|(
operator|*
name|c
operator|)
operator|++
expr_stmt|;
end_expr_stmt

begin_if
if|if
condition|(
operator|(
operator|(
name|FuncInfo
index|[
name|p
index|]
operator|.
name|nofp
operator|==
operator|-
literal|1
operator|)
operator|&&
operator|(
name|i
operator|==
literal|0
operator|)
operator|)
operator|||
operator|(
operator|(
name|FuncInfo
index|[
name|p
index|]
operator|.
name|nofp
operator|!=
operator|-
literal|1
operator|)
operator|&&
operator|(
name|i
operator|!=
name|FuncInfo
index|[
name|p
index|]
operator|.
name|nofp
operator|)
operator|)
condition|)
name|PERROR
argument_list|(
literal|"wrong number of parameters"
argument_list|)
expr_stmt|;
end_if

begin_expr_stmt
name|n
operator|=
operator|(
name|NODE
operator|*
operator|)
name|malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|NODE
argument_list|)
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|n
operator|->
name|op
operator|=
operator|&
operator|(
name|FuncInfo
index|[
name|p
index|]
operator|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|n
operator|->
name|noo
operator|=
name|i
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|memcpy
argument_list|(
operator|(
name|n
operator|->
name|offsprings
operator|)
argument_list|,
name|offs
argument_list|,
name|i
operator|*
sizeof|sizeof
argument_list|(
name|NODE
operator|*
argument_list|)
argument_list|)
expr_stmt|;
end_expr_stmt

begin_return
return|return
name|n
return|;
end_return

begin_expr_stmt
unit|}   if
operator|(
operator|(
operator|*
operator|*
name|c
operator|==
literal|'.'
operator|)
operator|||
operator|(
operator|*
operator|*
name|c
operator|==
literal|'+'
operator|)
operator|||
operator|(
operator|*
operator|*
name|c
operator|==
literal|'-'
operator|)
operator|||
name|isdigit
argument_list|(
operator|*
operator|*
name|c
argument_list|)
operator|)
block|{
name|v
operator|=
name|strtod
argument_list|(
operator|*
name|c
argument_list|,
name|c
argument_list|)
block|;
if|if
condition|(
operator|(
name|p
operator|=
name|find_op
argument_list|(
literal|"const"
argument_list|)
operator|)
operator|==
operator|-
literal|1
condition|)
name|PERROR
argument_list|(
literal|"Warning: there is no const in expression.tmpl"
argument_list|)
expr_stmt|;
name|n
operator|=
operator|(
name|NODE
operator|*
operator|)
name|malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|NODE
argument_list|)
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|n
operator|->
name|op
operator|=
operator|&
operator|(
name|FuncInfo
index|[
name|p
index|]
operator|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|n
operator|->
name|noo
operator|=
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
operator|(
name|n
operator|->
name|data
operator|)
index|[
literal|0
index|]
operator|=
name|v
expr_stmt|;
end_expr_stmt

begin_return
return|return
name|n
return|;
end_return

begin_expr_stmt
unit|}   if
operator|(
operator|*
operator|*
name|c
operator|==
literal|'#'
operator|)
block|{
name|DBL
name|tmp
index|[
literal|10
index|]
block|;
name|int
name|i
block|;
operator|(
operator|*
name|c
operator|)
operator|++
block|;
name|EAT_EMPTY_SPACE
argument_list|(
operator|*
name|c
argument_list|)
block|;
if|if
condition|(
operator|*
operator|*
name|c
operator|!=
literal|'('
condition|)
name|PERROR
argument_list|(
literal|"'(' expected"
argument_list|)
expr_stmt|;
operator|(
operator|*
name|c
operator|)
operator|++
expr_stmt|;
end_expr_stmt

begin_for
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|5
condition|;
name|i
operator|++
control|)
block|{
name|tmp
index|[
name|i
index|]
operator|=
name|strtod
argument_list|(
operator|*
name|c
argument_list|,
name|c
argument_list|)
expr_stmt|;
name|EAT_EMPTY_SPACE
argument_list|(
operator|*
name|c
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
operator|*
name|c
operator|==
literal|')'
condition|)
break|break;
block|}
end_for

begin_if
if|if
condition|(
operator|(
name|i
operator|!=
literal|2
operator|)
operator|&&
operator|(
name|i
operator|!=
literal|3
operator|)
condition|)
name|PERROR
argument_list|(
literal|"Wrong number of vector components"
argument_list|)
expr_stmt|;
end_if

begin_expr_stmt
operator|(
operator|*
name|c
operator|)
operator|++
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|n
operator|=
operator|(
name|NODE
operator|*
operator|)
name|malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|NODE
argument_list|)
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|n
operator|->
name|op
operator|=
operator|&
operator|(
name|FuncInfo
index|[
name|find_op
argument_list|(
operator|(
name|i
operator|==
literal|2
operator|)
condition|?
literal|"vector3"
else|:
literal|"vector4"
argument_list|)
index|]
operator|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|n
operator|->
name|noo
operator|=
literal|0
expr_stmt|;
end_expr_stmt

begin_for
for|for
control|(
init|;
name|i
operator|>=
literal|0
condition|;
name|i
operator|--
control|)
operator|(
name|n
operator|->
name|data
operator|)
index|[
name|i
index|]
operator|=
name|tmp
index|[
name|i
index|]
expr_stmt|;
end_for

begin_return
return|return
name|n
return|;
end_return

begin_expr_stmt
unit|}    sprintf
operator|(
name|buff
operator|,
literal|"Unexpected character: %c"
operator|,
operator|*
operator|*
name|c
operator|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|PERROR
argument_list|(
name|buff
argument_list|)
expr_stmt|;
end_expr_stmt

begin_macro
unit|}   DBL
DECL|function|double_xor (DBL p1,DBL p2)
name|double_xor
argument_list|(
argument|DBL p1
argument_list|,
argument|DBL p2
argument_list|)
end_macro

begin_block
block|{
if|#
directive|if
name|DBL_SIZE
operator|==
literal|8
name|int
modifier|*
name|i1
decl_stmt|,
modifier|*
name|i2
decl_stmt|,
modifier|*
name|i3
decl_stmt|;
name|DBL
name|ret
decl_stmt|;
name|i1
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|p1
expr_stmt|;
name|i2
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|p2
expr_stmt|;
name|i3
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|ret
expr_stmt|;
operator|*
name|i3
operator|=
operator|(
operator|*
name|i1
operator|)
operator|^
operator|(
operator|*
name|i2
operator|)
expr_stmt|;
name|i1
operator|++
expr_stmt|;
name|i2
operator|++
expr_stmt|;
name|i3
operator|++
expr_stmt|;
operator|*
name|i3
operator|=
operator|(
operator|*
name|i1
operator|)
operator|^
operator|(
operator|*
name|i2
operator|)
expr_stmt|;
return|return
name|ret
return|;
else|#
directive|else
error|#
directive|error
literal|"Please rewrite this function for your architecture... :-)"
endif|#
directive|endif
block|}
end_block

begin_function
DECL|function|double_or (DBL p1,DBL p2)
name|DBL
name|double_or
parameter_list|(
name|DBL
name|p1
parameter_list|,
name|DBL
name|p2
parameter_list|)
block|{
if|#
directive|if
name|DBL_SIZE
operator|==
literal|8
name|int
modifier|*
name|i1
decl_stmt|,
modifier|*
name|i2
decl_stmt|,
modifier|*
name|i3
decl_stmt|;
name|DBL
name|ret
decl_stmt|;
name|i1
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|p1
expr_stmt|;
name|i2
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|p2
expr_stmt|;
name|i3
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|ret
expr_stmt|;
operator|*
name|i3
operator|=
operator|(
operator|*
name|i1
operator|)
operator||
operator|(
operator|*
name|i2
operator|)
expr_stmt|;
name|i1
operator|++
expr_stmt|;
name|i2
operator|++
expr_stmt|;
name|i3
operator|++
expr_stmt|;
operator|*
name|i3
operator|=
operator|(
operator|*
name|i1
operator|)
operator||
operator|(
operator|*
name|i2
operator|)
expr_stmt|;
return|return
name|ret
return|;
else|#
directive|else
error|#
directive|error
literal|"Please rewrite this function for your architecture... :-)"
endif|#
directive|endif
block|}
end_function

begin_function
DECL|function|double_and (DBL p1,DBL p2)
name|DBL
name|double_and
parameter_list|(
name|DBL
name|p1
parameter_list|,
name|DBL
name|p2
parameter_list|)
block|{
if|#
directive|if
name|DBL_SIZE
operator|==
literal|8
name|int
modifier|*
name|i1
decl_stmt|,
modifier|*
name|i2
decl_stmt|,
modifier|*
name|i3
decl_stmt|;
name|DBL
name|ret
decl_stmt|;
name|i1
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|p1
expr_stmt|;
name|i2
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|p2
expr_stmt|;
name|i3
operator|=
operator|(
name|int
operator|*
operator|)
operator|&
name|ret
expr_stmt|;
operator|*
name|i3
operator|=
operator|(
operator|*
name|i1
operator|)
operator|&
operator|(
operator|*
name|i2
operator|)
expr_stmt|;
name|i1
operator|++
expr_stmt|;
name|i2
operator|++
expr_stmt|;
name|i3
operator|++
expr_stmt|;
operator|*
name|i3
operator|=
operator|(
operator|*
name|i1
operator|)
operator|*
operator|(
operator|*
name|i2
operator|)
expr_stmt|;
return|return
name|ret
return|;
else|#
directive|else
error|#
directive|error
literal|"Please rewrite this function for your architecture... :-)"
endif|#
directive|endif
block|}
end_function

begin_function_decl
DECL|variable|wrap_func
name|unsigned
name|char
function_decl|(
modifier|*
name|wrap_func
function_decl|)
parameter_list|(
name|DBL
parameter_list|)
init|=
name|wrap_func_rep
function_decl|;
end_function_decl

begin_function
DECL|function|wrap_func_cut (DBL n)
name|unsigned
name|char
name|wrap_func_cut
parameter_list|(
name|DBL
name|n
parameter_list|)
block|{
if|if
condition|(
name|n
operator|<
literal|0.0
condition|)
return|return
literal|0
return|;
if|if
condition|(
name|n
operator|>
literal|1.0
condition|)
return|return
literal|255
return|;
return|return
call|(
name|unsigned
name|char
call|)
argument_list|(
name|n
operator|*
literal|255.0
argument_list|)
return|;
block|}
end_function

begin_function
DECL|function|wrap_func_rep (DBL n)
name|unsigned
name|char
name|wrap_func_rep
parameter_list|(
name|DBL
name|n
parameter_list|)
block|{
return|return
call|(
name|unsigned
name|char
call|)
argument_list|(
literal|255.0
operator|*
operator|(
name|n
operator|-
name|floor
argument_list|(
name|n
argument_list|)
operator|)
argument_list|)
return|;
block|}
end_function

begin_function
DECL|function|wrap_func_pingpong (DBL n)
name|unsigned
name|char
name|wrap_func_pingpong
parameter_list|(
name|DBL
name|n
parameter_list|)
block|{
if|if
condition|(
operator|(
call|(
name|int
call|)
argument_list|(
name|n
operator|-
name|floor
argument_list|(
name|n
argument_list|)
argument_list|)
operator|)
operator|&
literal|1
condition|)
return|return
call|(
name|unsigned
name|char
call|)
argument_list|(
operator|(
literal|1.0
operator|-
name|n
operator|+
name|floor
argument_list|(
name|n
argument_list|)
operator|)
operator|*
literal|255
argument_list|)
return|;
else|else
return|return
call|(
name|unsigned
name|char
call|)
argument_list|(
literal|255.0
operator|*
operator|(
name|n
operator|-
name|floor
argument_list|(
name|n
argument_list|)
operator|)
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/******************************          NOISE   I was in hurry so I borrowed code from snoise plug-in  by Marcelo de Gomensoro Malheiros    Thank you !  ******************************/
end_comment

begin_define
DECL|macro|TABLE_SIZE
define|#
directive|define
name|TABLE_SIZE
value|256
end_define

begin_define
DECL|macro|WEIGHT (T)
define|#
directive|define
name|WEIGHT
parameter_list|(
name|T
parameter_list|)
value|((2.0*fabs(T) - 3.0)*(T)*(T)+1.0)
end_define

begin_typedef
DECL|struct|__anon279f63990108
typedef|typedef
struct|struct
block|{
DECL|member|x
DECL|member|y
name|DBL
name|x
decl_stmt|,
name|y
decl_stmt|;
DECL|typedef|Vector2d
block|}
name|Vector2d
typedef|;
end_typedef

begin_decl_stmt
DECL|variable|perm_tab
specifier|static
name|int
name|perm_tab
index|[
name|TABLE_SIZE
index|]
init|=
block|{
literal|254
block|,
literal|20
block|,
literal|180
block|,
literal|81
block|,
literal|171
block|,
literal|17
block|,
literal|83
block|,
literal|7
block|,
literal|18
block|,
literal|72
block|,
literal|154
block|,
literal|11
block|,
literal|12
block|,
literal|134
block|,
literal|251
block|,
literal|15
block|,
literal|173
block|,
literal|33
block|,
literal|252
block|,
literal|109
block|,
literal|21
block|,
literal|2
block|,
literal|101
block|,
literal|124
block|,
literal|24
block|,
literal|149
block|,
literal|136
block|,
literal|181
block|,
literal|112
block|,
literal|22
block|,
literal|220
block|,
literal|68
block|,
literal|67
block|,
literal|164
block|,
literal|87
block|,
literal|125
block|,
literal|44
block|,
literal|244
block|,
literal|38
block|,
literal|55
block|,
literal|40
block|,
literal|248
block|,
literal|138
block|,
literal|226
block|,
literal|36
block|,
literal|139
block|,
literal|103
block|,
literal|88
block|,
literal|75
block|,
literal|49
block|,
literal|74
block|,
literal|43
block|,
literal|16
block|,
literal|216
block|,
literal|210
block|,
literal|90
block|,
literal|203
block|,
literal|150
block|,
literal|58
block|,
literal|59
block|,
literal|29
block|,
literal|26
block|,
literal|159
block|,
literal|63
block|,
literal|64
block|,
literal|167
block|,
literal|66
block|,
literal|253
block|,
literal|105
block|,
literal|69
block|,
literal|232
block|,
literal|250
block|,
literal|50
block|,
literal|147
block|,
literal|95
block|,
literal|225
block|,
literal|4
block|,
literal|175
block|,
literal|71
block|,
literal|132
block|,
literal|80
block|,
literal|162
block|,
literal|200
block|,
literal|118
block|,
literal|247
block|,
literal|185
block|,
literal|45
block|,
literal|5
block|,
literal|91
block|,
literal|104
block|,
literal|97
block|,
literal|186
block|,
literal|187
block|,
literal|128
block|,
literal|41
block|,
literal|99
block|,
literal|96
block|,
literal|39
block|,
literal|131
block|,
literal|196
block|,
literal|148
block|,
literal|184
block|,
literal|102
block|,
literal|78
block|,
literal|34
block|,
literal|77
block|,
literal|106
block|,
literal|133
block|,
literal|211
block|,
literal|212
block|,
literal|108
block|,
literal|143
block|,
literal|137
block|,
literal|240
block|,
literal|51
block|,
literal|60
block|,
literal|215
block|,
literal|224
block|,
literal|152
block|,
literal|119
block|,
literal|120
block|,
literal|183
block|,
literal|6
block|,
literal|130
block|,
literal|158
block|,
literal|114
block|,
literal|229
block|,
literal|110
block|,
literal|14
block|,
literal|61
block|,
literal|166
block|,
literal|156
block|,
literal|227
block|,
literal|84
block|,
literal|57
block|,
literal|231
block|,
literal|92
block|,
literal|31
block|,
literal|161
block|,
literal|1
block|,
literal|209
block|,
literal|178
block|,
literal|142
block|,
literal|73
block|,
literal|129
block|,
literal|145
block|,
literal|3
block|,
literal|201
block|,
literal|98
block|,
literal|23
block|,
literal|177
block|,
literal|56
block|,
literal|25
block|,
literal|188
block|,
literal|127
block|,
literal|30
block|,
literal|202
block|,
literal|9
block|,
literal|219
block|,
literal|169
block|,
literal|160
block|,
literal|28
block|,
literal|198
block|,
literal|163
block|,
literal|135
block|,
literal|165
block|,
literal|193
block|,
literal|197
block|,
literal|8
block|,
literal|123
block|,
literal|117
block|,
literal|207
block|,
literal|192
block|,
literal|93
block|,
literal|19
block|,
literal|82
block|,
literal|126
block|,
literal|46
block|,
literal|214
block|,
literal|53
block|,
literal|155
block|,
literal|189
block|,
literal|208
block|,
literal|235
block|,
literal|113
block|,
literal|213
block|,
literal|0
block|,
literal|13
block|,
literal|27
block|,
literal|153
block|,
literal|190
block|,
literal|52
block|,
literal|151
block|,
literal|100
block|,
literal|194
block|,
literal|86
block|,
literal|10
block|,
literal|206
block|,
literal|255
block|,
literal|245
block|,
literal|176
block|,
literal|35
block|,
literal|172
block|,
literal|146
block|,
literal|204
block|,
literal|205
block|,
literal|236
block|,
literal|111
block|,
literal|42
block|,
literal|140
block|,
literal|54
block|,
literal|122
block|,
literal|233
block|,
literal|70
block|,
literal|94
block|,
literal|141
block|,
literal|121
block|,
literal|195
block|,
literal|218
block|,
literal|37
block|,
literal|191
block|,
literal|221
block|,
literal|170
block|,
literal|157
block|,
literal|239
block|,
literal|241
block|,
literal|179
block|,
literal|182
block|,
literal|228
block|,
literal|249
block|,
literal|230
block|,
literal|168
block|,
literal|89
block|,
literal|174
block|,
literal|234
block|,
literal|79
block|,
literal|107
block|,
literal|237
block|,
literal|238
block|,
literal|65
block|,
literal|85
block|,
literal|223
block|,
literal|242
block|,
literal|243
block|,
literal|222
block|,
literal|48
block|,
literal|116
block|,
literal|47
block|,
literal|62
block|,
literal|246
block|,
literal|199
block|,
literal|76
block|,
literal|32
block|,
literal|115
block|,
literal|144
block|,
literal|217
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|grad_tab
specifier|static
name|Vector2d
name|grad_tab
index|[
name|TABLE_SIZE
index|]
init|=
block|{
block|{
operator|-
literal|0.340904
block|,
literal|0.940098
block|}
block|,
block|{
operator|-
literal|0.933457
block|,
operator|-
literal|0.358689
block|}
block|,
block|{
operator|-
literal|0.776360
block|,
operator|-
literal|0.630290
block|}
block|,
block|{
literal|0.925639
block|,
operator|-
literal|0.378408
block|}
block|,
block|{
literal|0.084779
block|,
operator|-
literal|0.996400
block|}
block|,
block|{
literal|0.127247
block|,
operator|-
literal|0.991871
block|}
block|,
block|{
operator|-
literal|0.527260
block|,
literal|0.849704
block|}
block|,
block|{
operator|-
literal|0.468794
block|,
operator|-
literal|0.883308
block|}
block|,
block|{
literal|0.454024
block|,
literal|0.890989
block|}
block|,
block|{
literal|0.971369
block|,
literal|0.237577
block|}
block|,
block|{
operator|-
literal|0.016268
block|,
literal|0.999868
block|}
block|,
block|{
literal|0.905447
block|,
literal|0.424459
block|}
block|,
block|{
operator|-
literal|0.083460
block|,
operator|-
literal|0.996511
block|}
block|,
block|{
literal|0.333623
block|,
literal|0.942707
block|}
block|,
block|{
operator|-
literal|0.378842
block|,
operator|-
literal|0.925461
block|}
block|,
block|{
operator|-
literal|0.003822
block|,
literal|0.999993
block|}
block|,
block|{
operator|-
literal|0.993272
block|,
operator|-
literal|0.115804
block|}
block|,
block|{
literal|0.784827
block|,
operator|-
literal|0.619715
block|}
block|,
block|{
literal|0.999963
block|,
operator|-
literal|0.008588
block|}
block|,
block|{
literal|0.067801
block|,
operator|-
literal|0.997699
block|}
block|,
block|{
operator|-
literal|0.431667
block|,
operator|-
literal|0.902033
block|}
block|,
block|{
literal|0.836585
block|,
operator|-
literal|0.547838
block|}
block|,
block|{
literal|0.868525
block|,
operator|-
literal|0.495645
block|}
block|,
block|{
operator|-
literal|0.694388
block|,
literal|0.719601
block|}
block|,
block|{
literal|0.955062
block|,
operator|-
literal|0.296405
block|}
block|,
block|{
literal|0.966409
block|,
operator|-
literal|0.257010
block|}
block|,
block|{
literal|0.785965
block|,
operator|-
literal|0.618271
block|}
block|,
block|{
literal|0.431877
block|,
operator|-
literal|0.901932
block|}
block|,
block|{
literal|0.801459
block|,
operator|-
literal|0.598050
block|}
block|,
block|{
operator|-
literal|0.567396
block|,
operator|-
literal|0.823445
block|}
block|,
block|{
operator|-
literal|0.401807
block|,
literal|0.915724
block|}
block|,
block|{
literal|0.150691
block|,
literal|0.988581
block|}
block|,
block|{
operator|-
literal|0.284235
block|,
operator|-
literal|0.958755
block|}
block|,
block|{
operator|-
literal|0.855926
block|,
literal|0.517098
block|}
block|,
block|{
operator|-
literal|0.857330
block|,
operator|-
literal|0.514767
block|}
block|,
block|{
literal|0.581591
block|,
literal|0.813482
block|}
block|,
block|{
literal|0.026909
block|,
operator|-
literal|0.999638
block|}
block|,
block|{
operator|-
literal|0.997178
block|,
literal|0.075076
block|}
block|,
block|{
literal|0.168251
block|,
operator|-
literal|0.985744
block|}
block|,
block|{
operator|-
literal|0.952632
block|,
literal|0.304125
block|}
block|,
block|{
literal|0.982900
block|,
operator|-
literal|0.184139
block|}
block|,
block|{
literal|0.804087
block|,
operator|-
literal|0.594511
block|}
block|,
block|{
operator|-
literal|0.774009
block|,
operator|-
literal|0.633175
block|}
block|,
block|{
operator|-
literal|0.869432
block|,
literal|0.494052
block|}
block|,
block|{
operator|-
literal|0.568740
block|,
operator|-
literal|0.822518
block|}
block|,
block|{
operator|-
literal|0.667502
block|,
literal|0.744608
block|}
block|,
block|{
operator|-
literal|0.903558
block|,
operator|-
literal|0.428467
block|}
block|,
block|{
literal|0.999705
block|,
operator|-
literal|0.024288
block|}
block|,
block|{
literal|0.857228
block|,
literal|0.514937
block|}
block|,
block|{
literal|0.779031
block|,
operator|-
literal|0.626985
block|}
block|,
block|{
operator|-
literal|0.254156
block|,
operator|-
literal|0.967163
block|}
block|,
block|{
literal|0.797137
block|,
literal|0.603798
block|}
block|,
block|{
literal|0.352136
block|,
literal|0.935949
block|}
block|,
block|{
literal|0.192778
block|,
operator|-
literal|0.981242
block|}
block|,
block|{
literal|0.908687
block|,
literal|0.417477
block|}
block|,
block|{
operator|-
literal|0.976788
block|,
literal|0.214207
block|}
block|,
block|{
operator|-
literal|0.947997
block|,
operator|-
literal|0.318280
block|}
block|,
block|{
literal|0.989617
block|,
operator|-
literal|0.143730
block|}
block|,
block|{
operator|-
literal|0.918658
block|,
operator|-
literal|0.395053
block|}
block|,
block|{
literal|0.984556
block|,
operator|-
literal|0.175068
block|}
block|,
block|{
literal|0.828093
block|,
literal|0.560591
block|}
block|,
block|{
literal|0.796336
block|,
literal|0.604854
block|}
block|,
block|{
operator|-
literal|0.402179
block|,
operator|-
literal|0.915561
block|}
block|,
block|{
operator|-
literal|0.791991
block|,
literal|0.610532
block|}
block|,
block|{
operator|-
literal|0.238364
block|,
literal|0.971176
block|}
block|,
block|{
literal|0.012233
block|,
literal|0.999925
block|}
block|,
block|{
operator|-
literal|0.992889
block|,
operator|-
literal|0.119040
block|}
block|,
block|{
operator|-
literal|0.391251
block|,
literal|0.920284
block|}
block|,
block|{
literal|0.500683
block|,
literal|0.865631
block|}
block|,
block|{
operator|-
literal|0.996647
block|,
operator|-
literal|0.081818
block|}
block|,
block|{
literal|0.631211
block|,
literal|0.775611
block|}
block|,
block|{
literal|0.632632
block|,
literal|0.774453
block|}
block|,
block|{
literal|0.994086
block|,
literal|0.108596
block|}
block|,
block|{
operator|-
literal|0.349918
block|,
literal|0.936780
block|}
block|,
block|{
literal|0.528357
block|,
operator|-
literal|0.849022
block|}
block|,
block|{
literal|0.264896
block|,
operator|-
literal|0.964277
block|}
block|,
block|{
literal|0.886484
block|,
literal|0.462760
block|}
block|,
block|{
operator|-
literal|0.456045
block|,
literal|0.889957
block|}
block|,
block|{
literal|0.948901
block|,
literal|0.315574
block|}
block|,
block|{
operator|-
literal|0.762707
block|,
literal|0.646744
block|}
block|,
block|{
literal|0.975860
block|,
literal|0.218399
block|}
block|,
block|{
literal|0.966273
block|,
literal|0.257521
block|}
block|,
block|{
operator|-
literal|0.785780
block|,
operator|-
literal|0.618506
block|}
block|,
block|{
operator|-
literal|0.729822
block|,
literal|0.683638
block|}
block|,
block|{
literal|0.409543
block|,
literal|0.912291
block|}
block|,
block|{
operator|-
literal|0.815786
block|,
literal|0.578354
block|}
block|,
block|{
operator|-
literal|0.754687
block|,
operator|-
literal|0.656085
block|}
block|,
block|{
operator|-
literal|0.945713
block|,
literal|0.325003
block|}
block|,
block|{
operator|-
literal|0.722036
block|,
operator|-
literal|0.691855
block|}
block|,
block|{
literal|0.071182
block|,
operator|-
literal|0.997463
block|}
block|,
block|{
operator|-
literal|0.622102
block|,
operator|-
literal|0.782936
block|}
block|,
block|{
literal|0.126728
block|,
literal|0.991937
block|}
block|,
block|{
literal|0.841445
block|,
literal|0.540343
block|}
block|,
block|{
operator|-
literal|0.714751
block|,
literal|0.699379
block|}
block|,
block|{
literal|0.792850
block|,
operator|-
literal|0.609417
block|}
block|,
block|{
literal|0.419202
block|,
operator|-
literal|0.907893
block|}
block|,
block|{
literal|0.975360
block|,
literal|0.220620
block|}
block|,
block|{
operator|-
literal|0.924087
block|,
literal|0.382183
block|}
block|,
block|{
literal|0.605739
block|,
operator|-
literal|0.795663
block|}
block|,
block|{
operator|-
literal|0.762163
block|,
literal|0.647385
block|}
block|,
block|{
operator|-
literal|0.774114
block|,
literal|0.633046
block|}
block|,
block|{
literal|0.999734
block|,
literal|0.023045
block|}
block|,
block|{
operator|-
literal|0.921373
block|,
operator|-
literal|0.388681
block|}
block|,
block|{
operator|-
literal|0.665487
block|,
literal|0.746410
block|}
block|,
block|{
operator|-
literal|0.589795
block|,
operator|-
literal|0.807553
block|}
block|,
block|{
operator|-
literal|0.568207
block|,
literal|0.822886
block|}
block|,
block|{
literal|0.921615
block|,
literal|0.388105
block|}
block|,
block|{
operator|-
literal|0.272729
block|,
operator|-
literal|0.962091
block|}
block|,
block|{
literal|0.675038
block|,
operator|-
literal|0.737783
block|}
block|,
block|{
literal|0.313405
block|,
literal|0.949620
block|}
block|,
block|{
literal|0.741975
block|,
literal|0.670428
block|}
block|,
block|{
operator|-
literal|0.497474
block|,
operator|-
literal|0.867479
block|}
block|,
block|{
operator|-
literal|0.864656
block|,
literal|0.502364
block|}
block|,
block|{
literal|0.975093
block|,
literal|0.221797
block|}
block|,
block|{
operator|-
literal|0.989268
block|,
operator|-
literal|0.146109
block|}
block|,
block|{
literal|0.980503
block|,
operator|-
literal|0.196505
block|}
block|,
block|{
operator|-
literal|0.798513
block|,
operator|-
literal|0.601978
block|}
block|,
block|{
literal|0.240607
block|,
operator|-
literal|0.970623
block|}
block|,
block|{
operator|-
literal|0.393014
block|,
literal|0.919533
block|}
block|,
block|{
literal|0.084637
block|,
operator|-
literal|0.996412
block|}
block|,
block|{
operator|-
literal|0.467677
block|,
operator|-
literal|0.883899
block|}
block|,
block|{
literal|0.062876
block|,
literal|0.998021
block|}
block|,
block|{
operator|-
literal|0.903742
block|,
operator|-
literal|0.428078
block|}
block|,
block|{
literal|0.983263
block|,
operator|-
literal|0.182191
block|}
block|,
block|{
literal|0.251135
block|,
literal|0.967952
block|}
block|,
block|{
operator|-
literal|0.970324
block|,
literal|0.241807
block|}
block|,
block|{
literal|0.126711
block|,
operator|-
literal|0.991940
block|}
block|,
block|{
literal|0.274262
block|,
literal|0.961655
block|}
block|,
block|{
literal|0.997314
block|,
operator|-
literal|0.073242
block|}
block|,
block|{
operator|-
literal|0.923689
block|,
literal|0.383144
block|}
block|,
block|{
literal|0.496499
block|,
operator|-
literal|0.868037
block|}
block|,
block|{
operator|-
literal|0.053434
block|,
operator|-
literal|0.998571
block|}
block|,
block|{
operator|-
literal|0.933781
block|,
operator|-
literal|0.357845
block|}
block|,
block|{
operator|-
literal|0.851126
block|,
literal|0.524961
block|}
block|,
block|{
literal|0.853828
block|,
literal|0.520555
block|}
block|,
block|{
literal|0.271485
block|,
operator|-
literal|0.962443
block|}
block|,
block|{
literal|0.365644
block|,
operator|-
literal|0.930755
block|}
block|,
block|{
literal|0.017294
block|,
operator|-
literal|0.999850
block|}
block|,
block|{
operator|-
literal|0.850236
block|,
literal|0.526402
block|}
block|,
block|{
literal|0.679557
block|,
literal|0.733622
block|}
block|,
block|{
operator|-
literal|0.245285
block|,
literal|0.969451
block|}
block|,
block|{
literal|0.985317
block|,
operator|-
literal|0.170734
block|}
block|,
block|{
literal|0.457752
block|,
operator|-
literal|0.889080
block|}
block|,
block|{
literal|0.981181
block|,
literal|0.193092
block|}
block|,
block|{
literal|0.298175
block|,
operator|-
literal|0.954511
block|}
block|,
block|{
literal|0.824137
block|,
literal|0.566390
block|}
block|,
block|{
literal|0.218332
block|,
operator|-
literal|0.975875
block|}
block|,
block|{
operator|-
literal|0.508714
block|,
operator|-
literal|0.860935
block|}
block|,
block|{
literal|0.875234
block|,
operator|-
literal|0.483699
block|}
block|,
block|{
literal|0.508538
block|,
operator|-
literal|0.861039
block|}
block|,
block|{
operator|-
literal|0.207871
block|,
operator|-
literal|0.978156
block|}
block|,
block|{
literal|0.424732
block|,
literal|0.905319
block|}
block|,
block|{
operator|-
literal|0.383099
block|,
literal|0.923707
block|}
block|,
block|{
literal|0.181913
block|,
operator|-
literal|0.983315
block|}
block|,
block|{
literal|0.888078
block|,
literal|0.459693
block|}
block|,
block|{
operator|-
literal|0.379999
block|,
operator|-
literal|0.924987
block|}
block|,
block|{
operator|-
literal|0.028810
block|,
operator|-
literal|0.999585
block|}
block|,
block|{
literal|0.196453
block|,
operator|-
literal|0.980513
block|}
block|,
block|{
literal|0.029305
block|,
operator|-
literal|0.999571
block|}
block|,
block|{
literal|0.221861
block|,
operator|-
literal|0.975078
block|}
block|,
block|{
literal|0.668131
block|,
operator|-
literal|0.744044
block|}
block|,
block|{
literal|0.682511
block|,
operator|-
literal|0.730875
block|}
block|,
block|{
literal|0.058054
block|,
operator|-
literal|0.998313
block|}
block|,
block|{
operator|-
literal|0.085181
block|,
operator|-
literal|0.996365
block|}
block|,
block|{
literal|0.225010
block|,
operator|-
literal|0.974357
block|}
block|,
block|{
literal|0.180953
block|,
operator|-
literal|0.983492
block|}
block|,
block|{
operator|-
literal|0.806028
block|,
operator|-
literal|0.591877
block|}
block|,
block|{
literal|0.998739
block|,
literal|0.050204
block|}
block|,
block|{
operator|-
literal|0.989319
block|,
literal|0.145767
block|}
block|,
block|{
literal|0.172447
block|,
literal|0.985019
block|}
block|,
block|{
operator|-
literal|0.935325
block|,
literal|0.353790
block|}
block|,
block|{
operator|-
literal|0.908229
block|,
literal|0.418473
block|}
block|,
block|{
literal|0.959731
block|,
literal|0.280919
block|}
block|,
block|{
literal|0.840561
block|,
literal|0.541718
block|}
block|,
block|{
literal|0.991777
block|,
operator|-
literal|0.127978
block|}
block|,
block|{
literal|0.682358
block|,
operator|-
literal|0.731018
block|}
block|,
block|{
literal|0.574395
block|,
operator|-
literal|0.818578
block|}
block|,
block|{
operator|-
literal|0.121657
block|,
operator|-
literal|0.992572
block|}
block|,
block|{
operator|-
literal|0.432900
block|,
operator|-
literal|0.901442
block|}
block|,
block|{
operator|-
literal|0.999856
block|,
literal|0.016945
block|}
block|,
block|{
operator|-
literal|0.550735
block|,
operator|-
literal|0.834680
block|}
block|,
block|{
operator|-
literal|0.978364
block|,
literal|0.206890
block|}
block|,
block|{
literal|0.943332
block|,
literal|0.331851
block|}
block|,
block|{
literal|0.166796
block|,
literal|0.985991
block|}
block|,
block|{
literal|0.222451
block|,
literal|0.974944
block|}
block|,
block|{
literal|0.765695
block|,
literal|0.643204
block|}
block|,
block|{
operator|-
literal|0.449596
block|,
operator|-
literal|0.893232
block|}
block|,
block|{
operator|-
literal|0.984817
block|,
operator|-
literal|0.173596
block|}
block|,
block|{
literal|0.290036
block|,
literal|0.957016
block|}
block|,
block|{
operator|-
literal|0.638124
block|,
literal|0.769934
block|}
block|,
block|{
literal|0.102617
block|,
literal|0.994721
block|}
block|,
block|{
operator|-
literal|0.757623
block|,
operator|-
literal|0.652692
block|}
block|,
block|{
operator|-
literal|0.983166
block|,
literal|0.182717
block|}
block|,
block|{
literal|0.977482
block|,
operator|-
literal|0.211021
block|}
block|,
block|{
literal|0.739869
block|,
literal|0.672751
block|}
block|,
block|{
operator|-
literal|0.942317
block|,
literal|0.334721
block|}
block|,
block|{
operator|-
literal|0.515641
block|,
literal|0.856805
block|}
block|,
block|{
literal|0.270002
block|,
literal|0.962860
block|}
block|,
block|{
operator|-
literal|0.598114
block|,
operator|-
literal|0.801411
block|}
block|,
block|{
literal|0.313478
block|,
literal|0.949596
block|}
block|,
block|{
literal|0.229444
block|,
literal|0.973322
block|}
block|,
block|{
operator|-
literal|0.697821
block|,
operator|-
literal|0.716272
block|}
block|,
block|{
literal|0.062743
block|,
operator|-
literal|0.998030
block|}
block|,
block|{
operator|-
literal|0.158614
block|,
literal|0.987341
block|}
block|,
block|{
operator|-
literal|0.529376
block|,
operator|-
literal|0.848387
block|}
block|,
block|{
literal|0.191143
block|,
operator|-
literal|0.981562
block|}
block|,
block|{
literal|0.601182
block|,
operator|-
literal|0.799112
block|}
block|,
block|{
literal|0.976461
block|,
literal|0.215694
block|}
block|,
block|{
operator|-
literal|0.893194
block|,
operator|-
literal|0.449672
block|}
block|,
block|{
operator|-
literal|0.786058
block|,
literal|0.618153
block|}
block|,
block|{
operator|-
literal|0.999201
block|,
literal|0.039958
block|}
block|,
block|{
operator|-
literal|0.991278
block|,
literal|0.131790
block|}
block|,
block|{
literal|0.475348
block|,
operator|-
literal|0.879798
block|}
block|,
block|{
literal|0.399412
block|,
operator|-
literal|0.916772
block|}
block|,
block|{
literal|0.157454
block|,
operator|-
literal|0.987526
block|}
block|,
block|{
literal|0.998391
block|,
literal|0.056713
block|}
block|,
block|{
operator|-
literal|0.942481
block|,
literal|0.334260
block|}
block|,
block|{
operator|-
literal|0.041131
block|,
operator|-
literal|0.999154
block|}
block|,
block|{
literal|0.501194
block|,
literal|0.865335
block|}
block|,
block|{
operator|-
literal|0.649762
block|,
operator|-
literal|0.760137
block|}
block|,
block|{
literal|0.682994
block|,
literal|0.730424
block|}
block|,
block|{
literal|0.717300
block|,
literal|0.696765
block|}
block|,
block|{
operator|-
literal|0.362297
block|,
literal|0.932063
block|}
block|,
block|{
literal|0.980846
block|,
literal|0.194787
block|}
block|,
block|{
literal|0.037116
block|,
operator|-
literal|0.999311
block|}
block|,
block|{
operator|-
literal|0.999897
block|,
operator|-
literal|0.014356
block|}
block|,
block|{
operator|-
literal|0.919892
block|,
operator|-
literal|0.392171
block|}
block|,
block|{
operator|-
literal|0.950399
block|,
literal|0.311032
block|}
block|,
block|{
literal|0.683221
block|,
literal|0.730212
block|}
block|,
block|{
literal|0.702763
block|,
operator|-
literal|0.711424
block|}
block|,
block|{
literal|0.945516
block|,
literal|0.325574
block|}
block|,
block|{
operator|-
literal|0.728458
block|,
operator|-
literal|0.685091
block|}
block|,
block|{
operator|-
literal|0.791297
block|,
literal|0.611433
block|}
block|,
block|{
operator|-
literal|0.707706
block|,
literal|0.706507
block|}
block|,
block|{
operator|-
literal|0.342698
block|,
literal|0.939446
block|}
block|,
block|{
literal|0.585173
block|,
operator|-
literal|0.810908
block|}
block|,
block|{
literal|0.637824
block|,
operator|-
literal|0.770182
block|}
block|,
block|{
literal|0.232521
block|,
literal|0.972591
block|}
block|,
block|{
literal|0.814065
block|,
literal|0.580774
block|}
block|,
block|{
operator|-
literal|0.488897
block|,
operator|-
literal|0.872342
block|}
block|,
block|{
operator|-
literal|0.486172
block|,
operator|-
literal|0.873863
block|}
block|,
block|{
literal|0.219057
block|,
operator|-
literal|0.975712
block|}
block|,
block|{
literal|0.876775
block|,
operator|-
literal|0.480900
block|}
block|,
block|{
literal|0.446701
block|,
operator|-
literal|0.894683
block|}
block|,
block|{
literal|0.954116
block|,
literal|0.299437
block|}
block|,
block|{
operator|-
literal|0.201992
block|,
literal|0.979387
block|}
block|,
block|{
literal|0.613498
block|,
literal|0.789696
block|}
block|,
block|{
operator|-
literal|0.062938
block|,
operator|-
literal|0.998017
block|}
block|,
block|{
operator|-
literal|0.711028
block|,
literal|0.703164
block|}
block|,
block|{
operator|-
literal|0.175823
block|,
literal|0.984422
block|}
block|,
block|{
literal|0.867027
block|,
literal|0.498261
block|}
block|,
block|{
literal|0.170418
block|,
operator|-
literal|0.985372
block|}
block|,
block|{
operator|-
literal|0.993594
block|,
literal|0.113005
block|}
block|,
block|{
operator|-
literal|0.999964
block|,
literal|0.008470
block|}
block|,
block|{
operator|-
literal|0.236945
block|,
literal|0.971523
block|}
block|,
block|{
literal|0.993534
block|,
literal|0.113539
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|DBL
DECL|function|solid_noise (DBL x,DBL y)
name|solid_noise
parameter_list|(
name|DBL
name|x
parameter_list|,
name|DBL
name|y
parameter_list|)
block|{
name|Vector2d
name|v
decl_stmt|;
name|int
name|a
decl_stmt|,
name|b
decl_stmt|,
name|i
decl_stmt|,
name|j
decl_stmt|,
name|n
decl_stmt|;
name|int
name|ha
decl_stmt|,
name|hb
decl_stmt|;
name|DBL
name|sum
decl_stmt|;
name|sum
operator|=
literal|0.0
expr_stmt|;
name|x
operator|*=
literal|5.
expr_stmt|;
comment|/* GAG operates on interval<0,1>,<0,1> so noise (x,y) would be */
name|y
operator|*=
literal|5.
expr_stmt|;
comment|/* so uninteresting when unscaled :-) */
name|a
operator|=
operator|(
name|int
operator|)
name|floor
argument_list|(
name|x
argument_list|)
expr_stmt|;
name|b
operator|=
operator|(
name|int
operator|)
name|floor
argument_list|(
name|y
argument_list|)
expr_stmt|;
name|ha
operator|=
operator|(
name|a
operator|%
name|TABLE_SIZE
operator|)
operator|+
name|TABLE_SIZE
expr_stmt|;
comment|/* to avoid negative values of a or b */
name|hb
operator|=
operator|(
name|b
operator|%
name|TABLE_SIZE
operator|)
operator|+
name|TABLE_SIZE
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
literal|2
condition|;
name|j
operator|++
control|)
block|{
name|n
operator|=
name|perm_tab
index|[
operator|(
name|ha
operator|+
name|i
operator|+
name|perm_tab
index|[
operator|(
name|hb
operator|+
name|j
operator|)
operator|%
name|TABLE_SIZE
index|]
operator|)
operator|%
name|TABLE_SIZE
index|]
expr_stmt|;
name|v
operator|.
name|x
operator|=
name|x
operator|-
name|a
operator|-
name|i
expr_stmt|;
name|v
operator|.
name|y
operator|=
name|y
operator|-
name|b
operator|-
name|j
expr_stmt|;
name|sum
operator|+=
name|WEIGHT
argument_list|(
name|v
operator|.
name|x
argument_list|)
operator|*
name|WEIGHT
argument_list|(
name|v
operator|.
name|y
argument_list|)
operator|*
operator|(
name|grad_tab
index|[
name|n
index|]
operator|.
name|x
operator|*
name|v
operator|.
name|x
operator|+
name|grad_tab
index|[
name|n
index|]
operator|.
name|y
operator|*
name|v
operator|.
name|y
operator|)
expr_stmt|;
block|}
return|return
name|sum
return|;
block|}
end_function

begin_comment
comment|/******************************    expression library initialisation  ******************************/
end_comment

begin_function
DECL|function|expr_init ()
name|void
name|expr_init
parameter_list|()
block|{
name|init_random
argument_list|()
expr_stmt|;
block|}
end_function

end_unit

