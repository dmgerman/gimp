begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* GIMP - The GNU Image Manipulation Program  * Copyright (C) 1995 Spencer Kimball and Peter Mattis  *  * metadata-editor.c  * Copyright (C) 2016, 2017 Ben Touchette  *  * This program is free software: you can redistribute it and/or modify  * it under the terms of the GNU General Public License as published by  * the Free Software Foundation; either version 3 of the License, or  * (at your option) any later version.  *  * This program is distributed in the hope that it will be useful,  * but WITHOUT ANY WARRANTY; without even the implied warranty of  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  * GNU General Public License for more details.  *  * You should have received a copy of the GNU General Public License  * along with this program.  If not, see<http://www.gnu.org/licenses/>.  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<ctype.h>
end_include

begin_include
include|#
directive|include
file|<gegl.h>
end_include

begin_include
include|#
directive|include
file|<gtk/gtk.h>
end_include

begin_include
include|#
directive|include
file|<gexiv2/gexiv2.h>
end_include

begin_include
include|#
directive|include
file|<glib.h>
end_include

begin_include
include|#
directive|include
file|<glib/gstdio.h>
end_include

begin_include
include|#
directive|include
file|<libgimp/gimp.h>
end_include

begin_include
include|#
directive|include
file|<libgimp/gimpui.h>
end_include

begin_include
include|#
directive|include
file|"libgimp/stdplugins-intl.h"
end_include

begin_include
include|#
directive|include
file|"metadata-tags.h"
end_include

begin_include
include|#
directive|include
file|"metadata-xml.h"
end_include

begin_include
include|#
directive|include
file|"metadata-impexp.h"
end_include

begin_include
include|#
directive|include
file|"metadata-misc.h"
end_include

begin_define
DECL|macro|PLUG_IN_PROC
define|#
directive|define
name|PLUG_IN_PROC
value|"plug-in-metadata-editor"
end_define

begin_define
DECL|macro|PLUG_IN_BINARY
define|#
directive|define
name|PLUG_IN_BINARY
value|"metadata-editor"
end_define

begin_define
DECL|macro|PLUG_IN_ROLE
define|#
directive|define
name|PLUG_IN_ROLE
value|"gimp-metadata"
end_define

begin_define
DECL|macro|DEFAULT_TEMPLATE_FILE
define|#
directive|define
name|DEFAULT_TEMPLATE_FILE
value|"gimp_metadata_template.xml"
end_define

begin_comment
comment|/*  local function prototypes  */
end_comment

begin_function_decl
specifier|static
name|void
name|query
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|run
parameter_list|(
specifier|const
name|gchar
modifier|*
name|name
parameter_list|,
name|gint
name|nparams
parameter_list|,
specifier|const
name|GimpParam
modifier|*
name|param
parameter_list|,
name|gint
modifier|*
name|nreturn_vals
parameter_list|,
name|GimpParam
modifier|*
modifier|*
name|return_vals
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gboolean
name|metadata_editor_dialog
parameter_list|(
name|gint32
name|image_id
parameter_list|,
name|GimpMetadata
modifier|*
name|metadata
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|metadata_dialog_editor_set_metadata
parameter_list|(
name|GExiv2Metadata
modifier|*
name|metadata
parameter_list|,
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|metadata_editor_write_callback
parameter_list|(
name|GtkWidget
modifier|*
name|dialog
parameter_list|,
name|GtkBuilder
modifier|*
name|builder
parameter_list|,
name|gint32
name|image_id
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|impex_combo_callback
parameter_list|(
name|GtkComboBoxText
modifier|*
name|combo
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|gpsaltsys_combo_callback
parameter_list|(
name|GtkComboBoxText
modifier|*
name|combo
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|remove_substring
parameter_list|(
specifier|const
name|gchar
modifier|*
name|string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|substring
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|gboolean
name|hasCreatorTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|gboolean
name|hasLocationCreationTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|gboolean
name|hasImageSupplierTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|on_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|entry_widget
parameter_list|,
name|gchar
modifier|*
name|tag
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|on_create_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|on_patient_dob_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|on_study_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|on_series_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|property_release_id_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|property_release_id_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|model_release_id_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|model_release_id_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|shown_location_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|shown_location_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|feat_org_name_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|feat_org_name_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|feat_org_code_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|feat_org_code_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|artwork_object_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|artwork_object_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|reg_entry_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|reg_entry_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|image_creator_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|image_creator_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|copyright_own_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|copyright_own_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|list_row_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|gchar
modifier|*
name|tag
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|list_row_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|gchar
modifier|*
name|tag
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|gint
name|count_tags
parameter_list|(
name|GExiv2Metadata
modifier|*
name|metadata
parameter_list|,
specifier|const
name|gchar
modifier|*
name|header
parameter_list|,
specifier|const
name|gchar
modifier|*
modifier|*
name|tags
parameter_list|,
name|int
name|items
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|get_tags
parameter_list|(
name|GExiv2Metadata
modifier|*
name|metadata
parameter_list|,
specifier|const
name|gchar
modifier|*
name|header
parameter_list|,
specifier|const
name|gchar
modifier|*
modifier|*
name|tags
parameter_list|,
specifier|const
name|int
name|items
parameter_list|,
specifier|const
name|int
name|count
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|gboolean
name|hasModelReleaseTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|gboolean
name|hasPropertyReleaseTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|organisation_image_code_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|organisation_image_name_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|prop_rel_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|loc_sho_sub_loc_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|loc_sho_city_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|loc_sho_state_prov_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|loc_sho_cntry_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|loc_sho_cntry_iso_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|reg_org_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|reg_item_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|aoo_title_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|aoo_copyright_notice_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|aoo_source_inv_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|aoo_source_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|aoo_creator_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|aoo_date_creat_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cr_owner_name_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cr_owner_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_name_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_phone1_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_phone_type1_cell_edited_callback
parameter_list|(
name|GtkCellRendererCombo
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_phone2_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_phone_type2_cell_edited_callback
parameter_list|(
name|GtkCellRendererCombo
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_email_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|licensor_web_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|int
name|index
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|cell_edited_callback_combo
parameter_list|(
name|GtkCellRendererCombo
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|int
name|index
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* local variables */
end_comment

begin_decl_stmt
DECL|variable|tagdata
name|gchar
modifier|*
name|tagdata
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|last_gpsaltsys_sel
specifier|static
name|int
name|last_gpsaltsys_sel
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|gimpmetadata
name|gboolean
name|gimpmetadata
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|force_write
name|gboolean
name|force_write
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|lang_default
specifier|static
specifier|const
name|gchar
modifier|*
name|lang_default
init|=
literal|"lang=\"x-default\""
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|seq_default
specifier|static
specifier|const
name|gchar
modifier|*
name|seq_default
init|=
literal|"type=\"Seq\""
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|bag_default
specifier|static
specifier|const
name|gchar
modifier|*
name|bag_default
init|=
literal|"type=\"Bag\""
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|meta_args
name|metadata_editor
name|meta_args
decl_stmt|;
end_decl_stmt

begin_decl_stmt
DECL|variable|PLUG_IN_INFO
specifier|const
name|GimpPlugInInfo
name|PLUG_IN_INFO
init|=
block|{
name|NULL
block|,
comment|/* init_proc  */
name|NULL
block|,
comment|/* quit_proc  */
name|query
block|,
comment|/* query_proc */
name|run
block|,
comment|/* run_proc   */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* ============================================================================  * ==[           ]=============================================================  * ==[ FUNCTIONS ]=============================================================  * ==[           ]=============================================================  * ============================================================================  */
end_comment

begin_macro
DECL|function|MAIN ()
name|MAIN
argument_list|()
end_macro

begin_comment
comment|/* ============================================================================  * ==[ QUERY ]=================================================================  * ============================================================================  */
end_comment

begin_function
specifier|static
name|void
name|query
parameter_list|(
name|void
parameter_list|)
block|{
specifier|static
specifier|const
name|GimpParamDef
name|metadata_args
index|[]
init|=
block|{
block|{
name|GIMP_PDB_INT32
block|,
literal|"run-mode"
block|,
literal|"Run mode { RUN-INTERACTIVE (0) }"
block|}
block|,
block|{
name|GIMP_PDB_IMAGE
block|,
literal|"image"
block|,
literal|"Input image"
block|}
block|}
decl_stmt|;
name|gimp_install_procedure
argument_list|(
name|PLUG_IN_PROC
argument_list|,
name|N_
argument_list|(
literal|"Edit metadata (IPTC, GPS, DICOM)"
argument_list|)
argument_list|,
literal|"Edit metadata information attached to the "
literal|"current image. Some or all of this metadata "
literal|"will be saved in the file, depending on the output "
literal|"file format."
argument_list|,
literal|"Ben Touchette"
argument_list|,
literal|"Ben Touchette"
argument_list|,
literal|"2017"
argument_list|,
name|N_
argument_list|(
literal|"Edit metadata"
argument_list|)
argument_list|,
literal|"*"
argument_list|,
name|GIMP_PLUGIN
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|metadata_args
argument_list|)
argument_list|,
literal|0
argument_list|,
name|metadata_args
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gimp_plugin_menu_register
argument_list|(
name|PLUG_IN_PROC
argument_list|,
literal|"<Image>/Image/Metadata"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[ RUN ]===================================================================  * ============================================================================  */
end_comment

begin_function
specifier|static
name|void
DECL|function|run (const gchar * name,gint nparams,const GimpParam * param,gint * nreturn_vals,GimpParam ** return_vals)
name|run
parameter_list|(
specifier|const
name|gchar
modifier|*
name|name
parameter_list|,
name|gint
name|nparams
parameter_list|,
specifier|const
name|GimpParam
modifier|*
name|param
parameter_list|,
name|gint
modifier|*
name|nreturn_vals
parameter_list|,
name|GimpParam
modifier|*
modifier|*
name|return_vals
parameter_list|)
block|{
specifier|static
name|GimpParam
name|values
index|[
literal|1
index|]
decl_stmt|;
name|GimpPDBStatusType
name|status
init|=
name|GIMP_PDB_SUCCESS
decl_stmt|;
operator|*
name|nreturn_vals
operator|=
literal|1
expr_stmt|;
operator|*
name|return_vals
operator|=
name|values
expr_stmt|;
name|values
index|[
literal|0
index|]
operator|.
name|type
operator|=
name|GIMP_PDB_STATUS
expr_stmt|;
name|values
index|[
literal|0
index|]
operator|.
name|data
operator|.
name|d_status
operator|=
name|GIMP_PDB_EXECUTION_ERROR
expr_stmt|;
name|force_write
operator|=
name|FALSE
expr_stmt|;
name|INIT_I18N
argument_list|()
expr_stmt|;
name|gimp_ui_init
argument_list|(
name|PLUG_IN_BINARY
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|name
argument_list|,
name|PLUG_IN_PROC
argument_list|)
condition|)
block|{
name|GimpMetadata
modifier|*
name|metadata
decl_stmt|;
name|gint32
name|image_ID
init|=
name|param
index|[
literal|1
index|]
operator|.
name|data
operator|.
name|d_image
decl_stmt|;
name|metadata
operator|=
name|gimp_image_get_metadata
argument_list|(
name|image_ID
argument_list|)
expr_stmt|;
comment|/* Always show metadata dialog so we can add          appropriate iptc data as needed. Sometimes          license data needs to be added after the          fact and the image may not contain metadata          but should have it added as needed. */
if|if
condition|(
operator|!
name|metadata
condition|)
block|{
name|metadata
operator|=
name|gimp_metadata_new
argument_list|()
expr_stmt|;
name|gimp_image_set_metadata
argument_list|(
name|image_ID
argument_list|,
name|metadata
argument_list|)
expr_stmt|;
block|}
name|metadata_editor_dialog
argument_list|(
name|image_ID
argument_list|,
name|metadata
argument_list|)
expr_stmt|;
name|status
operator|=
name|GIMP_PDB_SUCCESS
expr_stmt|;
block|}
else|else
block|{
name|status
operator|=
name|GIMP_PDB_CALLING_ERROR
expr_stmt|;
block|}
name|values
index|[
literal|0
index|]
operator|.
name|data
operator|.
name|d_status
operator|=
name|status
expr_stmt|;
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[ EDITOR DIALOG UI ]======================================================  * ============================================================================  */
end_comment

begin_function
specifier|static
name|GtkWidget
modifier|*
DECL|function|builder_get_widget (GtkBuilder * builder,const gchar * name)
name|builder_get_widget
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|,
specifier|const
name|gchar
modifier|*
name|name
parameter_list|)
block|{
name|GObject
modifier|*
name|object
init|=
name|gtk_builder_get_object
argument_list|(
name|builder
argument_list|,
name|name
argument_list|)
decl_stmt|;
return|return
name|GTK_WIDGET
argument_list|(
name|object
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|gboolean
DECL|function|metadata_editor_dialog (gint32 image_id,GimpMetadata * g_metadata)
name|metadata_editor_dialog
parameter_list|(
name|gint32
name|image_id
parameter_list|,
name|GimpMetadata
modifier|*
name|g_metadata
parameter_list|)
block|{
name|GtkBuilder
modifier|*
name|builder
decl_stmt|;
name|GtkWidget
modifier|*
name|dialog
decl_stmt|;
name|GtkWidget
modifier|*
name|metadata_vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|impex_combo
decl_stmt|;
name|GtkWidget
modifier|*
name|content_area
decl_stmt|;
name|GExiv2Metadata
modifier|*
name|metadata
decl_stmt|;
name|gchar
modifier|*
name|ui_file
decl_stmt|;
name|gchar
modifier|*
name|title
decl_stmt|;
name|gchar
modifier|*
name|name
decl_stmt|;
name|GError
modifier|*
name|error
init|=
name|NULL
decl_stmt|;
name|gboolean
name|run
decl_stmt|;
name|metadata
operator|=
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
expr_stmt|;
name|builder
operator|=
name|gtk_builder_new
argument_list|()
expr_stmt|;
name|meta_args
operator|.
name|image_id
operator|=
name|image_id
expr_stmt|;
name|meta_args
operator|.
name|builder
operator|=
name|builder
expr_stmt|;
name|meta_args
operator|.
name|metadata
operator|=
name|metadata
expr_stmt|;
name|meta_args
operator|.
name|filename
operator|=
name|g_strconcat
argument_list|(
name|g_get_home_dir
argument_list|()
argument_list|,
literal|"/"
argument_list|,
name|DEFAULT_TEMPLATE_FILE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|ui_file
operator|=
name|g_build_filename
argument_list|(
name|gimp_data_directory
argument_list|()
argument_list|,
literal|"ui"
argument_list|,
literal|"plug-ins"
argument_list|,
literal|"plug-in-metadata-editor.ui"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gtk_builder_add_from_file
argument_list|(
name|builder
argument_list|,
name|ui_file
argument_list|,
operator|&
name|error
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"Error occured while loading UI file!\n"
argument_list|)
expr_stmt|;
name|g_printerr
argument_list|(
literal|"Message: %s\n"
argument_list|,
name|error
operator|->
name|message
argument_list|)
expr_stmt|;
name|g_clear_error
argument_list|(
operator|&
name|error
argument_list|)
expr_stmt|;
if|if
condition|(
name|ui_file
condition|)
name|g_free
argument_list|(
name|ui_file
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|builder
argument_list|)
expr_stmt|;
return|return
name|FALSE
return|;
block|}
name|g_free
argument_list|(
name|ui_file
argument_list|)
expr_stmt|;
name|name
operator|=
name|gimp_image_get_name
argument_list|(
name|image_id
argument_list|)
expr_stmt|;
name|title
operator|=
name|g_strdup_printf
argument_list|(
name|_
argument_list|(
literal|"Metadata Editor: %s"
argument_list|)
argument_list|,
name|name
argument_list|)
expr_stmt|;
if|if
condition|(
name|name
condition|)
name|g_free
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|dialog
operator|=
name|gimp_dialog_new
argument_list|(
name|title
argument_list|,
literal|"gimp-metadata-editor-dialog"
argument_list|,
name|NULL
argument_list|,
literal|0
argument_list|,
name|gimp_standard_help_func
argument_list|,
name|PLUG_IN_PROC
argument_list|,
name|GTK_STOCK_CANCEL
argument_list|,
name|GTK_RESPONSE_NO
argument_list|,
name|_
argument_list|(
literal|"Write Metadata"
argument_list|)
argument_list|,
name|GTK_RESPONSE_YES
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|meta_args
operator|.
name|dialog
operator|=
name|dialog
expr_stmt|;
name|gtk_dialog_set_default_response
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dialog
argument_list|)
argument_list|,
name|GTK_RESPONSE_YES
argument_list|)
expr_stmt|;
name|gtk_dialog_set_alternative_button_order
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dialog
argument_list|)
argument_list|,
name|GTK_RESPONSE_YES
argument_list|,
name|GTK_RESPONSE_NO
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|gimp_window_set_transient
argument_list|(
name|GTK_WINDOW
argument_list|(
name|dialog
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|title
condition|)
name|g_free
argument_list|(
name|title
argument_list|)
expr_stmt|;
name|content_area
operator|=
name|gtk_dialog_get_content_area
argument_list|(
name|GTK_DIALOG
argument_list|(
name|dialog
argument_list|)
argument_list|)
expr_stmt|;
name|metadata_vbox
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"metadata-vbox"
argument_list|)
expr_stmt|;
name|impex_combo
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"impex_combo"
argument_list|)
expr_stmt|;
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|impex_combo
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Select:"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|impex_combo
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Import metadata"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|impex_combo
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Export metadata"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|impex_combo
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|impex_combo
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|impex_combo_callback
argument_list|)
argument_list|,
operator|&
name|meta_args
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|metadata_vbox
argument_list|)
argument_list|,
literal|12
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|content_area
argument_list|)
argument_list|,
name|metadata_vbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|metadata_dialog_editor_set_metadata
argument_list|(
name|metadata
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|run
operator|=
operator|(
name|gimp_dialog_run
argument_list|(
name|GIMP_DIALOG
argument_list|(
name|dialog
argument_list|)
argument_list|)
operator|==
name|GTK_RESPONSE_YES
operator|)
expr_stmt|;
if|if
condition|(
name|run
condition|)
block|{
name|metadata_editor_write_callback
argument_list|(
name|dialog
argument_list|,
name|builder
argument_list|,
name|image_id
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|meta_args
operator|.
name|filename
condition|)
block|{
name|g_free
argument_list|(
name|meta_args
operator|.
name|filename
argument_list|)
expr_stmt|;
block|}
return|return
name|TRUE
return|;
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[                   ]=====================================================  * ==[ PRIVATE FUNCTIONS ]=====================================================  * ==[                   ]=====================================================  * ============================================================================  */
end_comment

begin_function
specifier|static
name|void
DECL|function|remove_substring (const gchar * string,const gchar * substring)
name|remove_substring
parameter_list|(
specifier|const
name|gchar
modifier|*
name|string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|substring
parameter_list|)
block|{
if|if
condition|(
name|string
operator|!=
name|NULL
operator|&&
name|substring
operator|!=
name|NULL
condition|)
block|{
name|gchar
modifier|*
name|p
init|=
name|strstr
argument_list|(
name|string
argument_list|,
name|substring
argument_list|)
decl_stmt|;
if|if
condition|(
name|p
condition|)
block|{
name|strcpy
argument_list|(
name|p
argument_list|,
name|p
operator|+
name|strlen
argument_list|(
name|substring
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|gint
DECL|function|count_tags (GExiv2Metadata * metadata,const gchar * header,const gchar ** tags,gint items)
name|count_tags
parameter_list|(
name|GExiv2Metadata
modifier|*
name|metadata
parameter_list|,
specifier|const
name|gchar
modifier|*
name|header
parameter_list|,
specifier|const
name|gchar
modifier|*
modifier|*
name|tags
parameter_list|,
name|gint
name|items
parameter_list|)
block|{
name|int
name|tagcount
decl_stmt|;
name|gchar
name|tag
index|[
literal|256
index|]
decl_stmt|;
name|tagcount
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|int
name|oo
init|=
literal|1
init|;
name|oo
operator|<
literal|256
condition|;
name|oo
operator|++
control|)
block|{
for|for
control|(
name|int
name|ii
init|=
literal|0
init|;
name|ii
operator|<
name|items
condition|;
name|ii
operator|++
control|)
block|{
name|g_sprintf
argument_list|(
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|,
literal|"%s[%d]"
argument_list|,
name|header
argument_list|,
name|oo
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|,
literal|"%s%s"
argument_list|,
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|,
operator|(
name|gchar
operator|*
operator|)
name|tags
index|[
name|ii
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|gexiv2_metadata_has_tag
argument_list|(
name|metadata
argument_list|,
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|)
condition|)
block|{
name|tagcount
operator|++
expr_stmt|;
break|break;
block|}
block|}
block|}
return|return
name|tagcount
return|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|get_tags (GExiv2Metadata * metadata,const gchar * header,const gchar ** tags,const gint items,const gint count)
name|get_tags
parameter_list|(
name|GExiv2Metadata
modifier|*
name|metadata
parameter_list|,
specifier|const
name|gchar
modifier|*
name|header
parameter_list|,
specifier|const
name|gchar
modifier|*
modifier|*
name|tags
parameter_list|,
specifier|const
name|gint
name|items
parameter_list|,
specifier|const
name|gint
name|count
parameter_list|)
block|{
name|gchar
name|tag
index|[
literal|256
index|]
decl_stmt|;
for|for
control|(
name|int
name|ooo
init|=
literal|1
init|;
name|ooo
operator|<
name|count
operator|+
literal|1
condition|;
name|ooo
operator|++
control|)
block|{
for|for
control|(
name|int
name|iii
init|=
literal|0
init|;
name|iii
operator|<
name|items
condition|;
name|iii
operator|++
control|)
block|{
name|gchar
modifier|*
name|value
decl_stmt|;
name|g_sprintf
argument_list|(
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|,
literal|"%s[%d]"
argument_list|,
name|header
argument_list|,
name|ooo
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|,
literal|"%s%s"
argument_list|,
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|,
operator|(
name|gchar
operator|*
operator|)
name|tags
index|[
name|iii
index|]
argument_list|)
expr_stmt|;
name|value
operator|=
name|gexiv2_metadata_get_tag_string
argument_list|(
name|metadata
argument_list|,
operator|(
name|gchar
operator|*
operator|)
operator|&
name|tag
argument_list|)
expr_stmt|;
name|tagdata
index|[
name|ooo
operator|-
literal|1
index|]
index|[
name|iii
index|]
operator|=
name|strdup
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[ DATE CALLBACKS ]========================================================  * ============================================================================  */
end_comment

begin_function
name|void
DECL|function|on_create_date_button_clicked (GtkButton * widget,gpointer data)
name|on_create_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|on_date_button_clicked
argument_list|(
name|widget
argument_list|,
operator|(
name|GtkWidget
operator|*
operator|)
name|data
argument_list|,
literal|"Xmp.photoshop.DateCreated"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|on_patient_dob_date_button_clicked (GtkButton * widget,gpointer data)
name|on_patient_dob_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|on_date_button_clicked
argument_list|(
name|widget
argument_list|,
operator|(
name|GtkWidget
operator|*
operator|)
name|data
argument_list|,
literal|"Xmp.DICOM.PatientDOB"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|on_study_date_button_clicked (GtkButton * widget,gpointer data)
name|on_study_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|on_date_button_clicked
argument_list|(
name|widget
argument_list|,
operator|(
name|GtkWidget
operator|*
operator|)
name|data
argument_list|,
literal|"Xmp.DICOM.StudyDateTime"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|on_series_date_button_clicked (GtkButton * widget,gpointer data)
name|on_series_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|on_date_button_clicked
argument_list|(
name|widget
argument_list|,
operator|(
name|GtkWidget
operator|*
operator|)
name|data
argument_list|,
literal|"Xmp.DICOM.SeriesDateTime"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|on_date_button_clicked (GtkButton * widget,GtkWidget * entry_widget,gchar * tag)
name|on_date_button_clicked
parameter_list|(
name|GtkButton
modifier|*
name|widget
parameter_list|,
name|GtkWidget
modifier|*
name|entry_widget
parameter_list|,
name|gchar
modifier|*
name|tag
parameter_list|)
block|{
name|GtkBuilder
modifier|*
name|builder
decl_stmt|;
name|GtkWidget
modifier|*
name|calendar_dialog
decl_stmt|;
name|GtkWidget
modifier|*
name|calendar_content_area
decl_stmt|;
name|GtkWidget
modifier|*
name|calendar_vbox
decl_stmt|;
name|GtkWidget
modifier|*
name|calendar
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|date_text
decl_stmt|;
name|gchar
modifier|*
name|ui_file
decl_stmt|;
name|GError
modifier|*
name|error
init|=
name|NULL
decl_stmt|;
name|GDateTime
modifier|*
name|current_datetime
decl_stmt|;
name|guint
name|year
decl_stmt|,
name|month
decl_stmt|,
name|day
decl_stmt|;
name|builder
operator|=
name|gtk_builder_new
argument_list|()
expr_stmt|;
name|ui_file
operator|=
name|g_build_filename
argument_list|(
name|gimp_data_directory
argument_list|()
argument_list|,
literal|"ui"
argument_list|,
literal|"plug-ins"
argument_list|,
literal|"plug-in-metadata-editor-calendar.ui"
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gtk_builder_add_from_file
argument_list|(
name|builder
argument_list|,
name|ui_file
argument_list|,
operator|&
name|error
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"Error occured while loading UI file!\n"
argument_list|)
expr_stmt|;
if|if
condition|(
name|error
operator|!=
name|NULL
condition|)
block|{
name|g_printerr
argument_list|(
literal|"Message: %s\n"
argument_list|,
name|error
operator|->
name|message
argument_list|)
expr_stmt|;
name|g_clear_error
argument_list|(
operator|&
name|error
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|ui_file
condition|)
name|g_free
argument_list|(
name|ui_file
argument_list|)
expr_stmt|;
name|g_object_unref
argument_list|(
name|builder
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|ui_file
condition|)
name|g_free
argument_list|(
name|ui_file
argument_list|)
expr_stmt|;
name|date_text
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry_widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|date_text
operator|&&
name|date_text
index|[
literal|0
index|]
operator|!=
literal|'\0'
condition|)
block|{
name|sscanf
argument_list|(
name|date_text
argument_list|,
literal|"%d-%d-%d;"
argument_list|,
operator|&
name|year
argument_list|,
operator|&
name|month
argument_list|,
operator|&
name|day
argument_list|)
expr_stmt|;
name|month
operator|--
expr_stmt|;
block|}
else|else
block|{
name|current_datetime
operator|=
name|g_date_time_new_now_local
argument_list|()
expr_stmt|;
name|year
operator|=
name|g_date_time_get_year
argument_list|(
name|current_datetime
argument_list|)
expr_stmt|;
name|month
operator|=
name|g_date_time_get_month
argument_list|(
name|current_datetime
argument_list|)
operator|-
literal|1
expr_stmt|;
name|day
operator|=
name|g_date_time_get_day_of_month
argument_list|(
name|current_datetime
argument_list|)
expr_stmt|;
block|}
name|calendar_dialog
operator|=
name|gtk_dialog_new_with_buttons
argument_list|(
name|_
argument_list|(
literal|"Calendar Date:"
argument_list|)
argument_list|,
name|NULL
argument_list|,
name|GTK_DIALOG_MODAL
operator||
name|GTK_DIALOG_DESTROY_WITH_PARENT
argument_list|,
name|GTK_STOCK_CANCEL
argument_list|,
name|GTK_RESPONSE_NO
argument_list|,
name|_
argument_list|(
literal|"Set Date"
argument_list|)
argument_list|,
name|GTK_RESPONSE_YES
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_dialog_set_default_response
argument_list|(
name|GTK_DIALOG
argument_list|(
name|calendar_dialog
argument_list|)
argument_list|,
name|GTK_RESPONSE_YES
argument_list|)
expr_stmt|;
name|gtk_dialog_set_alternative_button_order
argument_list|(
name|GTK_DIALOG
argument_list|(
name|calendar_dialog
argument_list|)
argument_list|,
name|GTK_RESPONSE_YES
argument_list|,
name|GTK_RESPONSE_NO
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|gimp_window_set_transient
argument_list|(
name|GTK_WINDOW
argument_list|(
name|calendar_dialog
argument_list|)
argument_list|)
expr_stmt|;
name|calendar_content_area
operator|=
name|gtk_dialog_get_content_area
argument_list|(
name|GTK_DIALOG
argument_list|(
name|calendar_dialog
argument_list|)
argument_list|)
expr_stmt|;
name|calendar_vbox
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"calendar-vbox"
argument_list|)
expr_stmt|;
name|gtk_container_set_border_width
argument_list|(
name|GTK_CONTAINER
argument_list|(
name|calendar_vbox
argument_list|)
argument_list|,
literal|12
argument_list|)
expr_stmt|;
name|gtk_box_pack_start
argument_list|(
name|GTK_BOX
argument_list|(
name|calendar_content_area
argument_list|)
argument_list|,
name|calendar_vbox
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|calendar
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"calendar"
argument_list|)
expr_stmt|;
name|gtk_calendar_select_month
argument_list|(
name|GTK_CALENDAR
argument_list|(
name|calendar
argument_list|)
argument_list|,
name|month
argument_list|,
name|year
argument_list|)
expr_stmt|;
name|gtk_calendar_select_day
argument_list|(
name|GTK_CALENDAR
argument_list|(
name|calendar
argument_list|)
argument_list|,
name|day
argument_list|)
expr_stmt|;
name|gtk_calendar_mark_day
argument_list|(
name|GTK_CALENDAR
argument_list|(
name|calendar
argument_list|)
argument_list|,
name|day
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_dialog_run
argument_list|(
name|GTK_DIALOG
argument_list|(
name|calendar_dialog
argument_list|)
argument_list|)
operator|==
name|GTK_RESPONSE_YES
condition|)
block|{
name|gchar
name|date
index|[
literal|25
index|]
decl_stmt|;
name|gtk_calendar_get_date
argument_list|(
name|GTK_CALENDAR
argument_list|(
name|calendar
argument_list|)
argument_list|,
operator|&
name|year
argument_list|,
operator|&
name|month
argument_list|,
operator|&
name|day
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
operator|(
name|gchar
operator|*
operator|)
operator|&
name|date
argument_list|,
literal|"%d-%02d-%02d"
argument_list|,
name|year
argument_list|,
name|month
operator|+
literal|1
argument_list|,
name|day
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry_widget
argument_list|)
argument_list|,
name|date
argument_list|)
expr_stmt|;
block|}
name|gtk_widget_destroy
argument_list|(
name|calendar_dialog
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[ SEPCIAL TAGS HANDLERS ]=================================================  * ============================================================================  */
end_comment

begin_function
name|gboolean
DECL|function|hasImageSupplierTagData (GtkBuilder * builder)
name|hasImageSupplierTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
block|{
name|gint
name|loop
decl_stmt|;
for|for
control|(
name|loop
operator|=
literal|0
init|;
name|loop
operator|<
name|imageSupplierInfoHeader
operator|.
name|size
condition|;
name|loop
operator|++
control|)
block|{
name|GObject
modifier|*
name|object
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|text
decl_stmt|;
name|object
operator|=
name|gtk_builder_get_object
argument_list|(
name|builder
argument_list|,
name|default_metadata_tags
index|[
name|loop
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|imageSupplierInfoTags
index|[
name|loop
index|]
operator|.
name|mode
argument_list|,
literal|"single"
argument_list|)
condition|)
block|{
name|text
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|object
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|text
operator|&&
operator|*
name|text
condition|)
return|return
name|TRUE
return|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|imageSupplierInfoTags
index|[
name|loop
index|]
operator|.
name|mode
argument_list|,
literal|"multi"
argument_list|)
condition|)
block|{
name|text
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|object
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|text
operator|&&
operator|*
name|text
condition|)
return|return
name|TRUE
return|;
block|}
block|}
return|return
name|FALSE
return|;
block|}
end_function

begin_function
name|gboolean
DECL|function|hasLocationCreationTagData (GtkBuilder * builder)
name|hasLocationCreationTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
block|{
name|gint
name|loop
decl_stmt|;
for|for
control|(
name|loop
operator|=
literal|0
init|;
name|loop
operator|<
name|creatorContactInfoHeader
operator|.
name|size
condition|;
name|loop
operator|++
control|)
block|{
name|GObject
modifier|*
name|object
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|text
decl_stmt|;
name|object
operator|=
name|gtk_builder_get_object
argument_list|(
name|builder
argument_list|,
name|default_metadata_tags
index|[
name|loop
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|locationCreationInfoTags
index|[
name|loop
index|]
operator|.
name|mode
argument_list|,
literal|"single"
argument_list|)
condition|)
block|{
name|text
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|object
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|text
operator|&&
operator|*
name|text
condition|)
return|return
name|TRUE
return|;
block|}
block|}
return|return
name|FALSE
return|;
block|}
end_function

begin_function
name|gboolean
DECL|function|hasModelReleaseTagData (GtkBuilder * builder)
name|hasModelReleaseTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
block|{
return|return
name|FALSE
return|;
block|}
end_function

begin_function
name|gboolean
DECL|function|hasPropertyReleaseTagData (GtkBuilder * builder)
name|hasPropertyReleaseTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
block|{
return|return
name|FALSE
return|;
block|}
end_function

begin_function
name|gboolean
DECL|function|hasCreatorTagData (GtkBuilder * builder)
name|hasCreatorTagData
parameter_list|(
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
block|{
name|gint
name|loop
decl_stmt|;
for|for
control|(
name|loop
operator|=
literal|0
init|;
name|loop
operator|<
name|creatorContactInfoHeader
operator|.
name|size
condition|;
name|loop
operator|++
control|)
block|{
name|GObject
modifier|*
name|object
decl_stmt|;
specifier|const
name|gchar
modifier|*
name|text
decl_stmt|;
name|object
operator|=
name|gtk_builder_get_object
argument_list|(
name|builder
argument_list|,
name|default_metadata_tags
index|[
name|loop
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|creatorContactInfoTags
index|[
name|loop
index|]
operator|.
name|mode
argument_list|,
literal|"single"
argument_list|)
condition|)
block|{
name|text
operator|=
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|object
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|text
operator|&&
operator|*
name|text
condition|)
return|return
name|TRUE
return|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|creatorContactInfoTags
index|[
name|loop
index|]
operator|.
name|mode
argument_list|,
literal|"multi"
argument_list|)
condition|)
block|{
name|GtkTextView
modifier|*
name|text_view
init|=
name|GTK_TEXT_VIEW
argument_list|(
name|object
argument_list|)
decl_stmt|;
name|GtkTextBuffer
modifier|*
name|buffer
init|=
name|gtk_text_view_get_buffer
argument_list|(
name|text_view
argument_list|)
decl_stmt|;
name|GtkTextIter
name|start
decl_stmt|;
name|GtkTextIter
name|end
decl_stmt|;
name|gtk_text_buffer_get_start_iter
argument_list|(
name|buffer
argument_list|,
operator|&
name|start
argument_list|)
expr_stmt|;
name|gtk_text_buffer_get_end_iter
argument_list|(
name|buffer
argument_list|,
operator|&
name|end
argument_list|)
expr_stmt|;
name|text
operator|=
name|gtk_text_buffer_get_text
argument_list|(
name|buffer
argument_list|,
operator|&
name|start
argument_list|,
operator|&
name|end
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
name|text
operator|&&
operator|*
name|text
condition|)
return|return
name|TRUE
return|;
block|}
block|}
return|return
name|FALSE
return|;
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[ SET DIALOG METADATA ]===================================================  * ============================================================================  */
end_comment

begin_comment
comment|/* CELL EDITED */
end_comment

begin_function
name|void
DECL|function|cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data,int index)
name|cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|int
name|index
parameter_list|)
block|{
name|GtkTreeModel
modifier|*
name|model
decl_stmt|;
name|GtkTreePath
modifier|*
name|path
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|model
operator|=
operator|(
name|GtkTreeModel
operator|*
operator|)
name|data
expr_stmt|;
name|path
operator|=
name|gtk_tree_path_new_from_string
argument_list|(
name|path_string
argument_list|)
expr_stmt|;
name|gtk_tree_model_get_iter
argument_list|(
name|model
argument_list|,
operator|&
name|iter
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|GTK_LIST_STORE
argument_list|(
name|model
argument_list|)
argument_list|,
operator|&
name|iter
argument_list|,
name|index
argument_list|,
name|new_text
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
DECL|function|cell_edited_callback_combo (GtkCellRendererCombo * cell,const gchar * path_string,const gchar * new_text,gpointer data,int column)
name|cell_edited_callback_combo
parameter_list|(
name|GtkCellRendererCombo
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|int
name|column
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|widget
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|GtkTreePath
modifier|*
name|path
decl_stmt|;
name|GtkTreeSelection
modifier|*
name|selection
decl_stmt|;
name|widget
operator|=
name|GTK_WIDGET
argument_list|(
name|data
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|selection
operator|=
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_tree_selection_get_selected
argument_list|(
name|GTK_TREE_SELECTION
argument_list|(
name|selection
argument_list|)
argument_list|,
name|NULL
argument_list|,
operator|&
name|iter
argument_list|)
condition|)
block|{
name|path
operator|=
name|gtk_tree_model_get_path
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_tree_path_free
argument_list|(
name|path
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|column
argument_list|,
name|new_text
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_name_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_name_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_id_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_phone1_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_phone1_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_phone_type1_cell_edited_callback (GtkCellRendererCombo * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_phone_type1_cell_edited_callback
parameter_list|(
name|GtkCellRendererCombo
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback_combo
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|3
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_phone2_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_phone2_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|4
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_phone_type2_cell_edited_callback (GtkCellRendererCombo * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_phone_type2_cell_edited_callback
parameter_list|(
name|GtkCellRendererCombo
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback_combo
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|5
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_email_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_email_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|6
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_web_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|licensor_web_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|7
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|cr_owner_name_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|cr_owner_name_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|cr_owner_id_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|cr_owner_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|img_cr8_name_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|img_cr8_name_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|img_cr8_id_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|img_cr8_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|aoo_copyright_notice_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|aoo_copyright_notice_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|5
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|aoo_source_inv_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|aoo_source_inv_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|4
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|aoo_source_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|aoo_source_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|3
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|aoo_creator_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|aoo_creator_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|aoo_date_creat_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|aoo_date_creat_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|aoo_title_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|aoo_title_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|reg_org_id_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|reg_org_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|reg_item_id_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|reg_item_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|loc_sho_sub_loc_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|loc_sho_sub_loc_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|loc_sho_city_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|loc_sho_city_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|loc_sho_state_prov_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|loc_sho_state_prov_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|loc_sho_cntry_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|loc_sho_cntry_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|3
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|loc_sho_cntry_iso_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|loc_sho_cntry_iso_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|4
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|loc_sho_wrld_reg_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|loc_sho_wrld_reg_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|cell_edited_callback
argument_list|(
name|cell
argument_list|,
name|path_string
argument_list|,
name|new_text
argument_list|,
name|data
argument_list|,
literal|5
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|prop_rel_id_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|prop_rel_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkTreeModel
modifier|*
name|model
decl_stmt|;
name|GtkTreePath
modifier|*
name|path
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|column
decl_stmt|;
name|model
operator|=
operator|(
name|GtkTreeModel
operator|*
operator|)
name|data
expr_stmt|;
name|path
operator|=
name|gtk_tree_path_new_from_string
argument_list|(
name|path_string
argument_list|)
expr_stmt|;
name|column
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|cell
argument_list|)
argument_list|,
literal|"column"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_tree_model_get_iter
argument_list|(
name|model
argument_list|,
operator|&
name|iter
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|GTK_LIST_STORE
argument_list|(
name|model
argument_list|)
argument_list|,
operator|&
name|iter
argument_list|,
name|column
argument_list|,
name|new_text
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|mod_rel_id_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|mod_rel_id_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkTreeModel
modifier|*
name|model
decl_stmt|;
name|GtkTreePath
modifier|*
name|path
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|column
decl_stmt|;
name|model
operator|=
operator|(
name|GtkTreeModel
operator|*
operator|)
name|data
expr_stmt|;
name|path
operator|=
name|gtk_tree_path_new_from_string
argument_list|(
name|path_string
argument_list|)
expr_stmt|;
name|column
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|cell
argument_list|)
argument_list|,
literal|"column"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_tree_model_get_iter
argument_list|(
name|model
argument_list|,
operator|&
name|iter
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|GTK_LIST_STORE
argument_list|(
name|model
argument_list|)
argument_list|,
operator|&
name|iter
argument_list|,
name|column
argument_list|,
name|new_text
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|organisation_image_name_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|organisation_image_name_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkTreeModel
modifier|*
name|model
decl_stmt|;
name|GtkTreePath
modifier|*
name|path
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|column
decl_stmt|;
name|model
operator|=
operator|(
name|GtkTreeModel
operator|*
operator|)
name|data
expr_stmt|;
name|path
operator|=
name|gtk_tree_path_new_from_string
argument_list|(
name|path_string
argument_list|)
expr_stmt|;
name|column
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|cell
argument_list|)
argument_list|,
literal|"column"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_tree_model_get_iter
argument_list|(
name|model
argument_list|,
operator|&
name|iter
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|GTK_LIST_STORE
argument_list|(
name|model
argument_list|)
argument_list|,
operator|&
name|iter
argument_list|,
name|column
argument_list|,
name|new_text
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|organisation_image_code_cell_edited_callback (GtkCellRendererText * cell,const gchar * path_string,const gchar * new_text,gpointer data)
name|organisation_image_code_cell_edited_callback
parameter_list|(
name|GtkCellRendererText
modifier|*
name|cell
parameter_list|,
specifier|const
name|gchar
modifier|*
name|path_string
parameter_list|,
specifier|const
name|gchar
modifier|*
name|new_text
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkTreeModel
modifier|*
name|model
decl_stmt|;
name|GtkTreePath
modifier|*
name|path
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|column
decl_stmt|;
name|model
operator|=
operator|(
name|GtkTreeModel
operator|*
operator|)
name|data
expr_stmt|;
name|path
operator|=
name|gtk_tree_path_new_from_string
argument_list|(
name|path_string
argument_list|)
expr_stmt|;
name|column
operator|=
name|GPOINTER_TO_INT
argument_list|(
name|g_object_get_data
argument_list|(
name|G_OBJECT
argument_list|(
name|cell
argument_list|)
argument_list|,
literal|"column"
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_tree_model_get_iter
argument_list|(
name|model
argument_list|,
operator|&
name|iter
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|GTK_LIST_STORE
argument_list|(
name|model
argument_list|)
argument_list|,
operator|&
name|iter
argument_list|,
name|column
argument_list|,
name|new_text
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* CELL / ROW REMOVE */
end_comment

begin_function
specifier|static
name|void
DECL|function|list_row_remove_callback (GtkWidget * widget,gpointer data,gchar * tag)
name|list_row_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|gchar
modifier|*
name|tag
parameter_list|)
block|{
name|GtkBuilder
modifier|*
name|builder
init|=
name|data
decl_stmt|;
name|GtkWidget
modifier|*
name|list_widget
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkTreeSelection
modifier|*
name|selection
decl_stmt|;
name|GtkTreePath
modifier|*
name|path
decl_stmt|;
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|tag
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|selection
operator|=
name|gtk_tree_view_get_selection
argument_list|(
operator|(
name|GtkTreeView
operator|*
operator|)
name|list_widget
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_tree_selection_get_selected
argument_list|(
name|selection
argument_list|,
name|NULL
argument_list|,
operator|&
name|iter
argument_list|)
condition|)
block|{
name|gint
name|number_of_rows
decl_stmt|;
name|path
operator|=
name|gtk_tree_model_get_path
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_remove
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_tree_path_free
argument_list|(
name|path
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* Make sur that two rows are always showing, else it looks ugly. */
if|if
condition|(
name|number_of_rows
operator|<
literal|2
condition|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|property_release_id_remove_callback (GtkWidget * widget,gpointer data)
name|property_release_id_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.PropertyReleaseID"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|model_release_id_remove_callback (GtkWidget * widget,gpointer data)
name|model_release_id_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.ModelReleaseID"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|shown_location_remove_callback (GtkWidget * widget,gpointer data)
name|shown_location_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.LocationShown"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|feat_org_name_remove_callback (GtkWidget * widget,gpointer data)
name|feat_org_name_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageName"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|feat_org_code_remove_callback (GtkWidget * widget,gpointer data)
name|feat_org_code_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageCode"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|artwork_object_remove_callback (GtkWidget * widget,gpointer data)
name|artwork_object_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.ArtworkOrObject"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|reg_entry_remove_callback (GtkWidget * widget,gpointer data)
name|reg_entry_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.RegistryId"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|image_creator_remove_callback (GtkWidget * widget,gpointer data)
name|image_creator_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.ImageCreator"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|copyright_own_remove_callback (GtkWidget * widget,gpointer data)
name|copyright_own_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.CopyrightOwner"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_remove_callback (GtkWidget * widget,gpointer data)
name|licensor_remove_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_remove_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.Licensor"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* CELL / ROW ADD */
end_comment

begin_function
specifier|static
name|void
DECL|function|list_row_add_callback (GtkWidget * widget,gpointer data,gchar * tag)
name|list_row_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|,
name|gchar
modifier|*
name|tag
parameter_list|)
block|{
name|GtkBuilder
modifier|*
name|builder
init|=
name|data
decl_stmt|;
name|GtkWidget
modifier|*
name|list_widget
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|tag
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|property_release_id_add_callback (GtkWidget * widget,gpointer data)
name|property_release_id_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.PropertyReleaseID"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|model_release_id_add_callback (GtkWidget * widget,gpointer data)
name|model_release_id_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.ModelReleaseID"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|shown_location_add_callback (GtkWidget * widget,gpointer data)
name|shown_location_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.LocationShown"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|feat_org_name_add_callback (GtkWidget * widget,gpointer data)
name|feat_org_name_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageName"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|feat_org_code_add_callback (GtkWidget * widget,gpointer data)
name|feat_org_code_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageCode"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|artwork_object_add_callback (GtkWidget * widget,gpointer data)
name|artwork_object_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.ArtworkOrObject"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|reg_entry_add_callback (GtkWidget * widget,gpointer data)
name|reg_entry_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.iptcExt.RegistryId"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|image_creator_add_callback (GtkWidget * widget,gpointer data)
name|image_creator_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.ImageCreator"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|copyright_own_add_callback (GtkWidget * widget,gpointer data)
name|copyright_own_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.CopyrightOwner"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|licensor_add_callback (GtkWidget * widget,gpointer data)
name|licensor_add_callback
parameter_list|(
name|GtkWidget
modifier|*
name|widget
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|list_row_add_callback
argument_list|(
name|widget
argument_list|,
name|data
argument_list|,
literal|"Xmp.plus.Licensor"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Set dialog display settings and data */
end_comment

begin_function
specifier|static
name|void
DECL|function|metadata_dialog_editor_set_metadata (GExiv2Metadata * metadata,GtkBuilder * builder)
name|metadata_dialog_editor_set_metadata
parameter_list|(
name|GExiv2Metadata
modifier|*
name|metadata
parameter_list|,
name|GtkBuilder
modifier|*
name|builder
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|combo_widget
decl_stmt|;
name|GtkWidget
modifier|*
name|entry_widget
decl_stmt|;
name|GtkWidget
modifier|*
name|text_widget
decl_stmt|;
name|GtkWidget
modifier|*
name|button_widget
decl_stmt|;
name|gint
name|width
decl_stmt|,
name|height
decl_stmt|;
name|gchar
modifier|*
name|value
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|gint32
name|numele
init|=
name|G_N_ELEMENTS
argument_list|(
name|default_metadata_tags
argument_list|)
decl_stmt|;
comment|/* Setup Buttons */
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_licensor_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_licensor_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_copyright_own_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|copyright_own_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_copyright_own_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|copyright_own_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_image_creator_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|image_creator_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_image_creator_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|image_creator_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_reg_entry_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|reg_entry_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_reg_entry_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|reg_entry_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_artwork_object_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|artwork_object_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_artwork_object_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|artwork_object_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_feat_org_code_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|feat_org_code_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_feat_org_code_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|feat_org_code_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_feat_org_name_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|feat_org_name_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_feat_org_name_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|feat_org_name_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_shown_location_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|shown_location_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_shown_location_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|shown_location_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_model_rel_id_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|model_release_id_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_model_rel_id_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|model_release_id_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"add_prop_rel_id_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|property_release_id_add_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
name|button_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"rem_prop_rel_id_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|button_widget
argument_list|)
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|property_release_id_remove_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
comment|/* Setup Comboboxes */
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.xmp.Rating"
argument_list|)
expr_stmt|;
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|_
argument_list|(
literal|"Unrated"
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<
literal|6
condition|;
name|i
operator|++
control|)
block|{
name|gchar
modifier|*
name|display
init|=
name|g_strdup_printf
argument_list|(
literal|"%d"
argument_list|,
name|i
argument_list|)
decl_stmt|;
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|display
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|display
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.xmpRights.Marked"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|marked
index|[
name|i
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.photoshop.Urgency"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|9
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|urgency
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.MinorModelAgeDisclosure"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|13
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|minormodelagedisclosure
index|[
name|i
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.ModelReleaseStatus"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|4
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|modelreleasestatus
index|[
name|i
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_get_size_request
argument_list|(
name|combo_widget
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
expr_stmt|;
name|gtk_widget_set_size_request
argument_list|(
name|combo_widget
argument_list|,
literal|180
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.iptcExt.DigitalSourceType"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|4
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|digitalsourcetype
index|[
name|i
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.PropertyReleaseStatus"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|4
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|propertyreleasestatus
index|[
name|i
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|gtk_widget_get_size_request
argument_list|(
name|combo_widget
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
expr_stmt|;
name|gtk_widget_set_size_request
argument_list|(
name|combo_widget
argument_list|,
literal|180
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.DICOM.PatientSex"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|4
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|dicom
index|[
name|i
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Exif.GPSInfo.GPSLatitudeRef"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|gpslatref
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Exif.GPSInfo.GPSLongitudeRef"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|gpslngref
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Exif.GPSInfo.GPSAltitudeRef"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|gpsaltref
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"GPSAltitudeSystem"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
block|{
name|gtk_combo_box_text_append_text
argument_list|(
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
name|gpsaltsys
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|G_OBJECT
argument_list|(
name|combo_widget
argument_list|)
argument_list|,
literal|"changed"
argument_list|,
name|G_CALLBACK
argument_list|(
name|gpsaltsys_combo_callback
argument_list|)
argument_list|,
name|builder
argument_list|)
expr_stmt|;
comment|/* Set up text view heights */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|numele
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"multi"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|text_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|gtk_widget_get_size_request
argument_list|(
name|text_widget
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
expr_stmt|;
name|gtk_widget_set_size_request
argument_list|(
name|text_widget
argument_list|,
name|width
argument_list|,
name|height
operator|+
literal|60
argument_list|)
expr_stmt|;
block|}
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|creatorContactInfoHeader
operator|.
name|size
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"multi"
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|text_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|id
argument_list|)
expr_stmt|;
name|gtk_widget_get_size_request
argument_list|(
name|text_widget
argument_list|,
operator|&
name|width
argument_list|,
operator|&
name|height
argument_list|)
expr_stmt|;
name|gtk_widget_set_size_request
argument_list|(
name|text_widget
argument_list|,
name|width
argument_list|,
name|height
operator|+
literal|60
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* Set up lists */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|imageSupplierInfoHeader
operator|.
name|size
condition|;
name|i
operator|++
control|)
block|{
name|GtkWidget
modifier|*
name|widget
decl_stmt|;
name|widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|imageSupplierInfoTags
index|[
name|i
index|]
operator|.
name|id
argument_list|)
expr_stmt|;
name|value
operator|=
name|gexiv2_metadata_get_tag_interpreted_string
argument_list|(
name|metadata
argument_list|,
name|imageSupplierInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
condition|)
block|{
name|gchar
modifier|*
name|value_clean
decl_stmt|;
name|gchar
modifier|*
name|value_utf
decl_stmt|;
name|value_clean
operator|=
name|g_strdup
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
name|value_utf
operator|=
name|g_locale_to_utf8
argument_list|(
name|value_clean
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"single"
argument_list|,
name|imageSupplierInfoTags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
name|value_utf
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"multi"
argument_list|,
name|imageSupplierInfoTags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkTextBuffer
modifier|*
name|buffer
decl_stmt|;
name|buffer
operator|=
name|gtk_text_view_get_buffer
argument_list|(
name|GTK_TEXT_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_text_buffer_set_text
argument_list|(
name|buffer
argument_list|,
name|value_utf
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|locationCreationInfoHeader
operator|.
name|size
condition|;
name|i
operator|++
control|)
block|{
name|GtkWidget
modifier|*
name|widget
decl_stmt|;
name|widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|locationCreationInfoTags
index|[
name|i
index|]
operator|.
name|id
argument_list|)
expr_stmt|;
name|value
operator|=
name|gexiv2_metadata_get_tag_interpreted_string
argument_list|(
name|metadata
argument_list|,
name|locationCreationInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
condition|)
block|{
name|gchar
modifier|*
name|value_clean
decl_stmt|;
name|gchar
modifier|*
name|value_utf
decl_stmt|;
name|value_clean
operator|=
name|g_strdup
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
name|value_utf
operator|=
name|g_locale_to_utf8
argument_list|(
name|value_clean
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"single"
argument_list|,
name|locationCreationInfoTags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
name|value_utf
argument_list|)
expr_stmt|;
block|}
block|}
block|}
comment|/* Set up tag data */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|creatorContactInfoHeader
operator|.
name|size
condition|;
name|i
operator|++
control|)
block|{
name|GtkWidget
modifier|*
name|widget
decl_stmt|;
name|widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|id
argument_list|)
expr_stmt|;
name|value
operator|=
name|gexiv2_metadata_get_tag_interpreted_string
argument_list|(
name|metadata
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
condition|)
block|{
name|gchar
modifier|*
name|value_clean
decl_stmt|;
name|gchar
modifier|*
name|value_utf
decl_stmt|;
name|value_clean
operator|=
name|g_strdup
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
name|value_utf
operator|=
name|g_locale_to_utf8
argument_list|(
name|value_clean
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"single"
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
name|value_utf
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"multi"
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkTextBuffer
modifier|*
name|buffer
decl_stmt|;
name|buffer
operator|=
name|gtk_text_view_get_buffer
argument_list|(
name|GTK_TEXT_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_text_buffer_set_text
argument_list|(
name|buffer
argument_list|,
name|value_utf
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|numele
condition|;
name|i
operator|++
control|)
block|{
name|GtkWidget
modifier|*
name|widget
decl_stmt|;
name|widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|value
operator|=
name|gexiv2_metadata_get_tag_interpreted_string
argument_list|(
name|metadata
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|value
operator|||
name|value
index|[
literal|0
index|]
operator|==
literal|'\0'
condition|)
block|{
name|gint
name|index
decl_stmt|;
if|if
condition|(
name|value
condition|)
name|g_free
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|index
operator|=
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|other_tag_index
expr_stmt|;
if|if
condition|(
name|index
operator|>
operator|-
literal|1
condition|)
block|{
name|value
operator|=
name|gexiv2_metadata_get_tag_interpreted_string
argument_list|(
name|metadata
argument_list|,
name|equivalent_metadata_tags
index|[
name|index
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|value
condition|)
block|{
name|gchar
modifier|*
name|value_clean
decl_stmt|;
name|gchar
modifier|*
name|value_utf
decl_stmt|;
name|value_clean
operator|=
name|g_strdup
argument_list|(
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|lang_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|bag_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
name|seq_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|remove_substring
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSAltitude"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|new_value_clean
index|[
literal|2
index|]
decl_stmt|;
name|new_value_clean
index|[
literal|0
index|]
operator|=
name|strtok
argument_list|(
name|value_clean
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|value_clean
argument_list|,
name|new_value_clean
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
block|}
name|value_utf
operator|=
name|g_locale_to_utf8
argument_list|(
name|value_clean
argument_list|,
operator|-
literal|1
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"single"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|widget
argument_list|)
argument_list|,
name|value_utf
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"multi"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkTextBuffer
modifier|*
name|buffer
decl_stmt|;
name|buffer
operator|=
name|gtk_text_view_get_buffer
argument_list|(
name|GTK_TEXT_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|gtk_text_buffer_set_text
argument_list|(
name|buffer
argument_list|,
name|value_utf
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"list"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.CopyrightOwner"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|store_index
decl_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* COPYRIGHT OWNER - NAME */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_CR_OWNER_NAME
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|cr_owner_name_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_CR_OWNER_NAME
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* COPYRIGHT OWNER - ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_CR_OWNER_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|cr_owner_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_CR_OWNER_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|store_index
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_CR_OWNER_NAME
argument_list|,
name|NULL
argument_list|,
name|COL_CR_OWNER_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_CR_OWNER_NAME
argument_list|,
name|NULL
argument_list|,
name|COL_CR_OWNER_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.ImageCreator"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|store_index
decl_stmt|;
name|gchar
name|arr1
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|arr2
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* IMAGE CREATOR - NAME */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_IMG_CR8_NAME
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|img_cr8_name_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_IMG_CR8_NAME
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* IMAGE CREATOR - ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_IMG_CR8_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|img_cr8_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_IMG_CR8_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|store_index
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_IMG_CR8_NAME
argument_list|,
operator|&
name|arr1
index|[
name|item
index|]
argument_list|,
name|COL_IMG_CR8_ID
argument_list|,
operator|&
name|arr2
index|[
name|item
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_IMG_CR8_NAME
argument_list|,
name|NULL
argument_list|,
name|COL_IMG_CR8_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.ArtworkOrObject"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|store_index
decl_stmt|;
name|gchar
name|arr1
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|arr2
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|arr3
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|arr4
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|arr5
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|arr6
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* ARTWORK OR OBJECT - TITLE */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_TITLE
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_title_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_TITLE
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - DATE CREATED */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_DATE_CREAT
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
operator|!=
name|NULL
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_date_creat_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_DATE_CREAT
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - CREATOR */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_CREATOR
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
operator|!=
name|NULL
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_creator_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_CREATOR
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - SOURCE */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_SOURCE
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_source_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_SOURCE
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - SOURCE INVENTORY ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_SRC_INV_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_source_inv_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_SRC_INV_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - COPYRIGHT NOTICE */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_CR_NOT
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_copyright_notice_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_CR_NOT
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|store_index
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_TITLE
argument_list|,
operator|&
name|arr1
index|[
name|item
index|]
argument_list|,
name|COL_AOO_DATE_CREAT
argument_list|,
operator|&
name|arr2
index|[
name|item
index|]
argument_list|,
name|COL_AOO_CREATOR
argument_list|,
operator|&
name|arr3
index|[
name|item
index|]
argument_list|,
name|COL_AOO_SOURCE
argument_list|,
operator|&
name|arr4
index|[
name|item
index|]
argument_list|,
name|COL_AOO_SRC_INV_ID
argument_list|,
operator|&
name|arr5
index|[
name|item
index|]
argument_list|,
name|COL_AOO_CR_NOT
argument_list|,
operator|&
name|arr6
index|[
name|item
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_TITLE
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_DATE_CREAT
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_CREATOR
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_SOURCE
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_SRC_INV_ID
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_CR_NOT
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.RegistryId"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|store_index
decl_stmt|;
name|gchar
name|arr1
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|arr2
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* LOCATION SHOWN - SUB LOCATION */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_REGSITRY_ORG_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
operator|!=
name|NULL
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
operator|(
name|GtkCellRenderer
operator|*
operator|)
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|reg_org_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_REGSITRY_ORG_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LOCATION SHOWN - CITY */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_REGSITRY_ITEM_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|reg_item_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_REGSITRY_ITEM_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|store_index
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_REGSITRY_ORG_ID
argument_list|,
operator|&
name|arr1
index|[
name|item
index|]
argument_list|,
name|COL_REGSITRY_ITEM_ID
argument_list|,
operator|&
name|arr2
index|[
name|item
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_REGSITRY_ORG_ID
argument_list|,
name|NULL
argument_list|,
name|COL_REGSITRY_ITEM_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.OrganisationInImageName"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|gint
name|i_ctr
decl_stmt|;
name|gint
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|organisation_image_name_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_ORG_IMG_NAME
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_NAME
argument_list|,
operator|&
name|arr
index|[
name|item
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_NAME
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.OrganisationInImageCode"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|int
name|i_ctr
decl_stmt|;
name|int
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|organisation_image_code_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_ORG_IMG_CODE
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_CODE
argument_list|,
operator|&
name|arr
index|[
name|item
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_CODE
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.PropertyReleaseID"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|int
name|i_ctr
decl_stmt|;
name|int
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|prop_rel_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_PROP_REL_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_PROP_REL_ID
argument_list|,
operator|&
name|arr
index|[
name|item
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|store_index
operator|==
literal|1
condition|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_PROP_REL_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_PROP_REL_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.ModelReleaseID"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|int
name|i_ctr
decl_stmt|;
name|int
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|mod_rel_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_PROP_REL_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|store_index
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|store_index
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_MOD_REL_ID
argument_list|,
operator|&
name|arr
index|[
name|item
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|store_index
operator|==
literal|1
condition|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_MOD_REL_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_MOD_REL_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"combo"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|gint32
name|data
init|=
literal|0
decl_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSLatitudeRef"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strncmp
argument_list|(
literal|"N"
argument_list|,
name|value
argument_list|,
literal|1
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strncmp
argument_list|(
literal|"S"
argument_list|,
name|value
argument_list|,
literal|1
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSLongitudeRef"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strncmp
argument_list|(
literal|"E"
argument_list|,
name|value
argument_list|,
literal|1
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strncmp
argument_list|(
literal|"W"
argument_list|,
name|value
argument_list|,
literal|1
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSAltitudeRef"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strncmp
argument_list|(
literal|"A"
argument_list|,
name|value
argument_list|,
literal|1
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strncmp
argument_list|(
literal|"B"
argument_list|,
name|value
argument_list|,
literal|1
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.xmp.Rating"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"1"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"2"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"3"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|3
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"4"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|4
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"5"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|5
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.xmpRights.Marked"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"True"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"False"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.photoshop.Urgency"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"1"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"2"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"3"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|3
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"4"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|4
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"5"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|5
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"6"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|6
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"7"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|7
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"8"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|8
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.MinorModelAgeDisclosure"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age Unknown"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 25 or Over"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 24"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 23"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|3
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 22"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|4
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 21"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|5
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 20"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|6
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 19"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|7
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 18"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|8
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 17"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|9
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 16"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|10
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 15"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|11
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Age 14 or Under"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|12
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.ModelReleaseStatus"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|gint
name|loop
decl_stmt|;
for|for
control|(
name|loop
operator|=
literal|0
init|;
name|loop
operator|<
literal|4
condition|;
name|loop
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|modelreleasestatus
index|[
name|loop
index|]
operator|.
name|data
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|loop
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|modelreleasestatus
index|[
name|loop
index|]
operator|.
name|display
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|loop
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.DigitalSourceType"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|gint
name|loop
decl_stmt|;
for|for
control|(
name|loop
operator|=
literal|0
init|;
name|loop
operator|<
literal|4
condition|;
name|loop
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|digitalsourcetype
index|[
name|loop
index|]
operator|.
name|data
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|loop
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|digitalsourcetype
index|[
name|loop
index|]
operator|.
name|display
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|loop
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.PropertyReleaseStatus"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|gint
name|loop
decl_stmt|;
for|for
control|(
name|loop
operator|=
literal|0
init|;
name|loop
operator|<
literal|4
condition|;
name|loop
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|propertyreleasestatus
index|[
name|loop
index|]
operator|.
name|data
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|loop
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|propertyreleasestatus
index|[
name|loop
index|]
operator|.
name|display
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|loop
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.DICOM.PatientSex"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"male"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"female"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|2
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"other"
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|data
operator|=
literal|3
expr_stmt|;
block|}
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|widget
argument_list|)
argument_list|,
name|data
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"list"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.Licensor"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkTreeModel
modifier|*
name|phonemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkListStore
modifier|*
name|phonestore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|GtkTreeIter
name|phoneiter
decl_stmt|;
name|gint
name|counter
decl_stmt|;
name|counter
operator|=
name|count_tags
argument_list|(
name|metadata
argument_list|,
name|licensor_header
argument_list|,
name|licensor
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|licensor
argument_list|)
argument_list|)
expr_stmt|;
name|get_tags
argument_list|(
name|metadata
argument_list|,
name|licensor_header
argument_list|,
name|licensor
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|licensor
argument_list|)
argument_list|,
name|counter
argument_list|)
expr_stmt|;
name|phonestore
operator|=
name|gtk_list_store_new
argument_list|(
literal|1
argument_list|,
name|G_TYPE_STRING
argument_list|)
expr_stmt|;
name|gtk_list_store_append
argument_list|(
name|phonestore
argument_list|,
operator|&
name|phoneiter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|phonestore
argument_list|,
operator|&
name|phoneiter
argument_list|,
literal|0
argument_list|,
literal|"Unknown"
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|1
init|;
name|i
operator|<
literal|6
condition|;
name|i
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|phonestore
argument_list|,
operator|&
name|phoneiter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|phonestore
argument_list|,
operator|&
name|phoneiter
argument_list|,
literal|0
argument_list|,
name|phone_types
index|[
name|i
index|]
operator|.
name|display
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
name|phonemodel
operator|=
name|GTK_TREE_MODEL
argument_list|(
name|phonestore
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* LICENSOR - NAME */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_NAME
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_name_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_NAME
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LICENSOR - ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LICENSOR - PHONE NUMBER 1 */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_PHONE1
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_phone1_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_PHONE1
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LICENSOR - PHONE TYPE 1 */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_PHONE_TYPE1
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
literal|"text-column"
argument_list|,
literal|0
argument_list|,
literal|"has-entry"
argument_list|,
name|FALSE
argument_list|,
literal|"model"
argument_list|,
name|phonemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_phone_type1_cell_edited_callback
argument_list|)
argument_list|,
name|widget
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_PHONE_TYPE1
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LICENSOR - PHONE NUMBER 2 */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_PHONE2
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_phone2_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_PHONE2
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LICENSOR - PHONE TYPE 2 */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_PHONE_TYPE2
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
literal|"text-column"
argument_list|,
literal|0
argument_list|,
literal|"has-entry"
argument_list|,
name|FALSE
argument_list|,
literal|"model"
argument_list|,
name|phonemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_phone_type2_cell_edited_callback
argument_list|)
argument_list|,
name|widget
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_PHONE_TYPE2
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LICENSOR - EMAIL */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_EMAIL
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_email_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_EMAIL
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LICENSOR - WEB ADDRESS */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LICENSOR_WEB
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|licensor_web_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LICENSOR_WEB
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|counter
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|counter
condition|;
name|item
operator|++
control|)
block|{
name|gchar
name|type1
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|type2
index|[
literal|256
index|]
decl_stmt|;
name|gint
name|types
decl_stmt|;
name|strcpy
argument_list|(
name|type1
argument_list|,
name|phone_types
index|[
literal|0
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|type2
argument_list|,
name|phone_types
index|[
literal|0
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
for|for
control|(
name|types
operator|=
literal|0
init|;
name|types
operator|<
literal|6
condition|;
name|types
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|3
index|]
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|data
argument_list|)
condition|)
block|{
name|strcpy
argument_list|(
name|type1
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|5
index|]
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|data
argument_list|)
condition|)
block|{
name|strcpy
argument_list|(
name|type2
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|display
argument_list|)
expr_stmt|;
block|}
block|}
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_NAME
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|0
index|]
argument_list|,
name|COL_LICENSOR_ID
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|1
index|]
argument_list|,
name|COL_LICENSOR_PHONE1
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|2
index|]
argument_list|,
name|COL_LICENSOR_PHONE_TYPE1
argument_list|,
operator|(
name|gchar
operator|*
operator|)
operator|&
name|type1
argument_list|,
name|COL_LICENSOR_PHONE2
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
name|COL_LICENSOR_PHONE_TYPE2
argument_list|,
operator|(
name|gchar
operator|*
operator|)
operator|&
name|type2
argument_list|,
name|COL_LICENSOR_EMAIL
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|6
index|]
argument_list|,
name|COL_LICENSOR_WEB
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|7
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_NAME
argument_list|,
name|NULL
argument_list|,
name|COL_LICENSOR_ID
argument_list|,
name|NULL
argument_list|,
name|COL_LICENSOR_PHONE1
argument_list|,
name|NULL
argument_list|,
name|COL_LICENSOR_PHONE_TYPE1
argument_list|,
name|phone_types
index|[
literal|0
index|]
operator|.
name|display
argument_list|,
name|COL_LICENSOR_PHONE2
argument_list|,
name|NULL
argument_list|,
name|COL_LICENSOR_PHONE_TYPE1
argument_list|,
name|phone_types
index|[
literal|0
index|]
operator|.
name|display
argument_list|,
name|COL_LICENSOR_EMAIL
argument_list|,
name|NULL
argument_list|,
name|COL_LICENSOR_WEB
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.CopyrightOwner"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|counter
decl_stmt|;
name|counter
operator|=
name|count_tags
argument_list|(
name|metadata
argument_list|,
name|copyrightowner_header
argument_list|,
name|copyrightowner
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|copyrightowner
argument_list|)
argument_list|)
expr_stmt|;
name|get_tags
argument_list|(
name|metadata
argument_list|,
name|copyrightowner_header
argument_list|,
name|copyrightowner
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|copyrightowner
argument_list|)
argument_list|,
name|counter
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* COPYRIGHT OWNER - NAME */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_CR_OWNER_NAME
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|cr_owner_name_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_CR_OWNER_NAME
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* COPYRIGHT OWNER - ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_CR_OWNER_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|cr_owner_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_CR_OWNER_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|counter
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|counter
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_CR_OWNER_NAME
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|0
index|]
argument_list|,
name|COL_CR_OWNER_ID
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|1
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_CR_OWNER_NAME
argument_list|,
name|NULL
argument_list|,
name|COL_CR_OWNER_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.ImageCreator"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|counter
decl_stmt|;
name|counter
operator|=
name|count_tags
argument_list|(
name|metadata
argument_list|,
name|imagecreator_header
argument_list|,
name|imagecreator
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|imagecreator
argument_list|)
argument_list|)
expr_stmt|;
name|get_tags
argument_list|(
name|metadata
argument_list|,
name|imagecreator_header
argument_list|,
name|imagecreator
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|imagecreator
argument_list|)
argument_list|,
name|counter
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* IMAGE CREATOR - NAME */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_IMG_CR8_NAME
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|img_cr8_name_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_IMG_CR8_NAME
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* IMAGE CREATOR - ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_IMG_CR8_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|img_cr8_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_IMG_CR8_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|counter
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|counter
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_IMG_CR8_NAME
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|0
index|]
argument_list|,
name|COL_IMG_CR8_ID
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|1
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_IMG_CR8_NAME
argument_list|,
name|NULL
argument_list|,
name|COL_IMG_CR8_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.ArtworkOrObject"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|counter
decl_stmt|;
name|counter
operator|=
name|count_tags
argument_list|(
name|metadata
argument_list|,
name|artworkorobject_header
argument_list|,
name|artworkorobject
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|artworkorobject
argument_list|)
argument_list|)
expr_stmt|;
name|get_tags
argument_list|(
name|metadata
argument_list|,
name|artworkorobject_header
argument_list|,
name|artworkorobject
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|artworkorobject
argument_list|)
argument_list|,
name|counter
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* ARTWORK OR OBJECT - TITLE */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_TITLE
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_title_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_TITLE
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - DATED CREATED */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_DATE_CREAT
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_date_creat_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_DATE_CREAT
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - CREATOR */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_CREATOR
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_creator_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_CREATOR
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - SOURCE */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_SOURCE
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_source_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_SOURCE
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - SOURCE INVENTORY ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_SRC_INV_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_source_inv_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_SRC_INV_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* ARTWORK OR OBJECT - COPYRIGHT NOTICE */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_AOO_CR_NOT
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|aoo_copyright_notice_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_AOO_CR_NOT
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|counter
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|counter
condition|;
name|item
operator|++
control|)
block|{
comment|/* remove substring for language id in title field */
name|remove_substring
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
name|lang_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
literal|" "
argument_list|)
condition|)
block|{
name|remove_substring
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
name|remove_substring
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
name|bag_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
literal|" "
argument_list|)
condition|)
block|{
name|remove_substring
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
name|remove_substring
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
name|seq_default
argument_list|)
expr_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
literal|" "
argument_list|)
condition|)
block|{
name|remove_substring
argument_list|(
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_TITLE
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
name|COL_AOO_DATE_CREAT
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|0
index|]
argument_list|,
name|COL_AOO_CREATOR
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|5
index|]
argument_list|,
name|COL_AOO_SOURCE
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|1
index|]
argument_list|,
name|COL_AOO_SRC_INV_ID
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|2
index|]
argument_list|,
name|COL_AOO_CR_NOT
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|3
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_TITLE
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_DATE_CREAT
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_CREATOR
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_SOURCE
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_SRC_INV_ID
argument_list|,
name|NULL
argument_list|,
name|COL_AOO_CR_NOT
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.RegistryId"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|counter
decl_stmt|;
name|counter
operator|=
name|count_tags
argument_list|(
name|metadata
argument_list|,
name|registryid_header
argument_list|,
name|registryid
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|registryid
argument_list|)
argument_list|)
expr_stmt|;
name|get_tags
argument_list|(
name|metadata
argument_list|,
name|registryid_header
argument_list|,
name|registryid
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|registryid
argument_list|)
argument_list|,
name|counter
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* REGISTRY - ORGANIZATION ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_REGSITRY_ORG_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|reg_org_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_REGSITRY_ORG_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* REGISTRY - ITEM ID */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_REGSITRY_ITEM_ID
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|reg_item_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_REGSITRY_ITEM_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|counter
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|counter
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_REGSITRY_ORG_ID
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|0
index|]
argument_list|,
name|COL_REGSITRY_ITEM_ID
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|1
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_REGSITRY_ORG_ID
argument_list|,
name|NULL
argument_list|,
name|COL_REGSITRY_ITEM_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.LocationShown"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gint
name|counter
decl_stmt|;
name|counter
operator|=
name|count_tags
argument_list|(
name|metadata
argument_list|,
name|locationshown_header
argument_list|,
name|locationshown
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|locationshown
argument_list|)
argument_list|)
expr_stmt|;
name|get_tags
argument_list|(
name|metadata
argument_list|,
name|locationshown_header
argument_list|,
name|locationshown
argument_list|,
name|G_N_ELEMENTS
argument_list|(
name|locationshown
argument_list|)
argument_list|,
name|counter
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
comment|/* LOCATION SHOWN - SUB LOCATION */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LOC_SHO_SUB_LOC
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|loc_sho_sub_loc_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LOC_SHO_SUB_LOC
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LOCATION SHOWN - CITY */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LOC_SHO_CITY
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|loc_sho_city_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LOC_SHO_CITY
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LOCATION SHOWN - STATE PROVINCE */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LOC_SHO_STATE_PROV
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|loc_sho_state_prov_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LOC_SHO_STATE_PROV
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LOCATION SHOWN - COUNTRY */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LOC_SHO_CNTRY
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|loc_sho_cntry_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LOC_SHO_CNTRY
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LOCATION SHOWN - COUNTRY ISO */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LOC_SHO_CNTRY_ISO
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|loc_sho_cntry_iso_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LOC_SHO_CNTRY_ISO
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* LOCATION SHOWN - WORLD REGION */
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
name|COL_LOC_SHO_CNTRY_WRLD_REG
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|loc_sho_wrld_reg_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_LOC_SHO_CNTRY_WRLD_REG
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|counter
operator|>
literal|0
condition|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|counter
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_SUB_LOC
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|0
index|]
argument_list|,
name|COL_LOC_SHO_CITY
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|1
index|]
argument_list|,
name|COL_LOC_SHO_STATE_PROV
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|2
index|]
argument_list|,
name|COL_LOC_SHO_CNTRY
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|3
index|]
argument_list|,
name|COL_LOC_SHO_CNTRY_ISO
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|4
index|]
argument_list|,
name|COL_LOC_SHO_CNTRY_WRLD_REG
argument_list|,
name|tagdata
index|[
name|item
index|]
index|[
literal|5
index|]
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|counter
operator|==
literal|1
condition|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_SUB_LOC
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CITY
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_STATE_PROV
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CNTRY
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CNTRY_ISO
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CNTRY_WRLD_REG
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_SUB_LOC
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CITY
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_STATE_PROV
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CNTRY
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CNTRY_ISO
argument_list|,
name|NULL
argument_list|,
name|COL_LOC_SHO_CNTRY_WRLD_REG
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.OrganisationInImageName"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|gint
name|i_ctr
decl_stmt|;
name|gint
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gint
name|item
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|organisation_image_name_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_ORG_IMG_NAME
argument_list|)
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_NAME
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.OrganisationInImageCode"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|int
name|i_ctr
decl_stmt|;
name|int
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gint
name|item
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|organisation_image_code_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_ORG_IMG_CODE
argument_list|)
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_CODE
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.PropertyReleaseID"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|int
name|i_ctr
decl_stmt|;
name|int
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gint
name|item
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|prop_rel_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_PROP_REL_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_PROP_REL_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.ModelReleaseID"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GList
modifier|*
name|rlist
decl_stmt|;
name|GList
modifier|*
name|r
decl_stmt|;
name|GtkTreeViewColumn
modifier|*
name|column
decl_stmt|;
name|GtkCellRenderer
modifier|*
name|renderer
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|GtkListStore
modifier|*
name|liststore
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|gchar
modifier|*
name|str
decl_stmt|;
name|int
name|i_ctr
decl_stmt|;
name|int
name|store_index
decl_stmt|;
name|gchar
name|arr
index|[
literal|256
index|]
index|[
literal|256
index|]
decl_stmt|;
name|gint
name|item
decl_stmt|;
comment|/* seperate list on commas */
name|store_index
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i_ctr
operator|=
literal|0
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|value
argument_list|,
literal|",;"
argument_list|)
init|;
name|str
condition|;
name|i_ctr
operator|++
operator|,
name|str
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
literal|",;"
argument_list|)
control|)
block|{
comment|/* remove leading whitespace */
name|gint
name|l
init|=
name|strlen
argument_list|(
name|str
argument_list|)
decl_stmt|;
while|while
condition|(
name|isspace
argument_list|(
name|str
index|[
name|l
operator|-
literal|1
index|]
argument_list|)
condition|)
operator|--
name|l
expr_stmt|;
while|while
condition|(
operator|*
name|str
operator|&&
name|isspace
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
operator|,
operator|--
name|l
expr_stmt|;
comment|/* stuff into array */
name|strcpy
argument_list|(
name|arr
index|[
name|i_ctr
index|]
argument_list|,
name|str
argument_list|)
expr_stmt|;
name|store_index
operator|++
expr_stmt|;
block|}
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
expr_stmt|;
name|liststore
operator|=
name|GTK_LIST_STORE
argument_list|(
name|treemodel
argument_list|)
expr_stmt|;
name|gtk_tree_selection_set_mode
argument_list|(
name|gtk_tree_view_get_selection
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|)
argument_list|,
name|GTK_SELECTION_SINGLE
argument_list|)
expr_stmt|;
name|column
operator|=
name|gtk_tree_view_get_column
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|widget
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|rlist
operator|=
name|gtk_cell_layout_get_cells
argument_list|(
name|GTK_CELL_LAYOUT
argument_list|(
name|column
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|rlist
init|;
name|r
condition|;
name|r
operator|=
name|r
operator|->
name|next
control|)
block|{
name|renderer
operator|=
name|r
operator|->
name|data
expr_stmt|;
name|g_object_set
argument_list|(
name|renderer
argument_list|,
literal|"editable"
argument_list|,
name|TRUE
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|renderer
argument_list|,
literal|"edited"
argument_list|,
name|G_CALLBACK
argument_list|(
name|mod_rel_id_cell_edited_callback
argument_list|)
argument_list|,
name|treemodel
argument_list|)
expr_stmt|;
name|g_object_set_data
argument_list|(
name|G_OBJECT
argument_list|(
name|renderer
argument_list|)
argument_list|,
literal|"column"
argument_list|,
name|GINT_TO_POINTER
argument_list|(
name|COL_PROP_REL_ID
argument_list|)
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
literal|2
condition|;
name|item
operator|++
control|)
block|{
name|gtk_list_store_append
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|)
expr_stmt|;
name|gtk_list_store_set
argument_list|(
name|liststore
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_PROP_REL_ID
argument_list|,
name|NULL
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
comment|/* Set creation date */
name|entry_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"create_date_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry_widget
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|on_create_date_button_clicked
argument_list|)
argument_list|,
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.photoshop.DateCreated"
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Set patient dob date */
name|entry_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"dob_date_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry_widget
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|on_patient_dob_date_button_clicked
argument_list|)
argument_list|,
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.DICOM.PatientDOB"
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Set study date */
name|entry_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"study_date_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry_widget
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|on_study_date_button_clicked
argument_list|)
argument_list|,
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.DICOM.StudyDateTime"
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Set series date */
name|entry_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"series_date_button"
argument_list|)
expr_stmt|;
name|g_signal_connect
argument_list|(
name|entry_widget
argument_list|,
literal|"clicked"
argument_list|,
name|G_CALLBACK
argument_list|(
name|on_series_date_button_clicked
argument_list|)
argument_list|,
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.DICOM.SeriesDateTime"
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[ WRITE METADATA ]========================================================  * ============================================================================  */
end_comment

begin_function
specifier|static
name|void
DECL|function|set_tag_string (GimpMetadata * metadata,const gchar * name,const gchar * value)
name|set_tag_string
parameter_list|(
name|GimpMetadata
modifier|*
name|metadata
parameter_list|,
specifier|const
name|gchar
modifier|*
name|name
parameter_list|,
specifier|const
name|gchar
modifier|*
name|value
parameter_list|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|metadata
argument_list|)
argument_list|,
name|name
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|metadata
argument_list|)
argument_list|,
name|name
argument_list|,
name|value
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"metadata-editor: failed to set tag [%s]\n"
argument_list|,
name|name
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
DECL|function|metadata_editor_write_callback (GtkWidget * dialog,GtkBuilder * builder,gint32 image_id)
name|metadata_editor_write_callback
parameter_list|(
name|GtkWidget
modifier|*
name|dialog
parameter_list|,
name|GtkBuilder
modifier|*
name|builder
parameter_list|,
name|gint32
name|image_id
parameter_list|)
block|{
name|GimpMetadata
modifier|*
name|g_metadata
decl_stmt|;
name|gint
name|max_elements
decl_stmt|;
name|gint
name|i
decl_stmt|;
name|GtkWidget
modifier|*
name|list_widget
decl_stmt|;
name|GtkTreeIter
name|iter
decl_stmt|;
name|GtkTreeModel
modifier|*
name|treemodel
decl_stmt|;
name|gchar
modifier|*
name|rc_data
decl_stmt|;
name|gint
name|number_of_rows
decl_stmt|;
name|gchar
name|output_data
index|[
literal|256
operator|*
literal|1024
index|]
decl_stmt|;
name|gchar
name|tag
index|[
literal|1024
index|]
decl_stmt|;
name|gint
name|counter
decl_stmt|;
name|gint
name|row
decl_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
name|g_metadata
operator|=
name|gimp_image_get_metadata
argument_list|(
name|image_id
argument_list|)
expr_stmt|;
name|gimp_metadata_add_xmp_history
argument_list|(
name|g_metadata
argument_list|,
literal|"metadata"
argument_list|)
expr_stmt|;
comment|/* DO ORG IMG NAME (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageName"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_NAME
argument_list|,
operator|&
name|rc_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|rc_data
operator|&&
operator|*
name|rc_data
condition|)
block|{
name|strcat
argument_list|(
name|output_data
argument_list|,
name|rc_data
argument_list|)
expr_stmt|;
if|if
condition|(
name|row
operator|+
literal|1
operator|<
name|number_of_rows
condition|)
name|strcat
argument_list|(
name|output_data
argument_list|,
literal|", "
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageName"
argument_list|,
name|output_data
argument_list|)
expr_stmt|;
comment|/* DO ORG IMG CODE (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageCode"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_ORG_IMG_CODE
argument_list|,
operator|&
name|rc_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|rc_data
operator|&&
operator|*
name|rc_data
condition|)
block|{
name|strcat
argument_list|(
name|output_data
argument_list|,
name|rc_data
argument_list|)
expr_stmt|;
if|if
condition|(
name|row
operator|+
literal|1
operator|<
name|number_of_rows
condition|)
name|strcat
argument_list|(
name|output_data
argument_list|,
literal|", "
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
literal|"Xmp.iptcExt.OrganisationInImageCode"
argument_list|,
name|output_data
argument_list|)
expr_stmt|;
comment|/* DO MODEL RELEASE (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.ModelReleaseID"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_MOD_REL_ID
argument_list|,
operator|&
name|rc_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|rc_data
operator|&&
operator|*
name|rc_data
condition|)
block|{
name|strcat
argument_list|(
name|output_data
argument_list|,
name|rc_data
argument_list|)
expr_stmt|;
if|if
condition|(
name|row
operator|+
literal|1
operator|<
name|number_of_rows
condition|)
name|strcat
argument_list|(
name|output_data
argument_list|,
literal|", "
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
literal|"Xmp.plus.ModelReleaseID"
argument_list|,
name|output_data
argument_list|)
expr_stmt|;
comment|/* DO PROPERTY RELEASE (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.PropertyReleaseID"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_PROP_REL_ID
argument_list|,
operator|&
name|rc_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|rc_data
operator|&&
operator|*
name|rc_data
condition|)
block|{
name|strcat
argument_list|(
name|output_data
argument_list|,
name|rc_data
argument_list|)
expr_stmt|;
if|if
condition|(
name|row
operator|+
literal|1
operator|<
name|number_of_rows
condition|)
name|strcat
argument_list|(
name|output_data
argument_list|,
literal|", "
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
literal|"Xmp.plus.PropertyReleaseID"
argument_list|,
name|output_data
argument_list|)
expr_stmt|;
comment|/* DO LOCATION SHOWN (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.iptcExt.LocationShown"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* CLEAR LOCATION SHOW DATA */
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|locationshown_header
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
literal|256
condition|;
name|row
operator|++
control|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|G_N_ELEMENTS
argument_list|(
name|locationshown
argument_list|)
condition|;
name|item
operator|++
control|)
block|{
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|locationshown_header
argument_list|,
name|row
argument_list|,
name|locationshown
index|[
name|item
index|]
argument_list|)
expr_stmt|;
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* SET LOCATION SHOW DATA */
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
literal|"Xmp.iptcExt.LocationShown"
argument_list|,
name|GEXIV2_STRUCTURE_XA_BAG
argument_list|)
expr_stmt|;
name|counter
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|tag_data
decl_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_SUB_LOC
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|locationshown_header
argument_list|,
name|counter
argument_list|,
name|locationshown
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_CITY
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|locationshown_header
argument_list|,
name|counter
argument_list|,
name|locationshown
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_STATE_PROV
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|locationshown_header
argument_list|,
name|counter
argument_list|,
name|locationshown
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_CNTRY
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|locationshown_header
argument_list|,
name|counter
argument_list|,
name|locationshown
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_CNTRY_ISO
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|locationshown_header
argument_list|,
name|counter
argument_list|,
name|locationshown
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LOC_SHO_CNTRY_WRLD_REG
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|locationshown_header
argument_list|,
name|counter
argument_list|,
name|locationshown
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|counter
operator|++
expr_stmt|;
block|}
block|}
comment|/* DO ARTWORK OR OBJECT (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.iptcExt.ArtworkOrObject"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* CLEAR ARTWORK OR OBJECT DATA */
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|artworkorobject_header
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
literal|256
condition|;
name|row
operator|++
control|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|G_N_ELEMENTS
argument_list|(
name|artworkorobject
argument_list|)
condition|;
name|item
operator|++
control|)
block|{
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|artworkorobject_header
argument_list|,
name|row
argument_list|,
name|artworkorobject
index|[
name|item
index|]
argument_list|)
expr_stmt|;
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* SET ARTWORK OR OBJECT DATA */
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
literal|"Xmp.iptcExt.ArtworkOrObject"
argument_list|,
name|GEXIV2_STRUCTURE_XA_BAG
argument_list|)
expr_stmt|;
name|counter
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|tag_data
decl_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_TITLE
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|artworkorobject_header
argument_list|,
name|counter
argument_list|,
name|artworkorobject
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_DATE_CREAT
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|artworkorobject_header
argument_list|,
name|counter
argument_list|,
name|artworkorobject
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_CREATOR
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|artworkorobject_header
argument_list|,
name|counter
argument_list|,
name|artworkorobject
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_SOURCE
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|artworkorobject_header
argument_list|,
name|counter
argument_list|,
name|artworkorobject
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_SRC_INV_ID
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|artworkorobject_header
argument_list|,
name|counter
argument_list|,
name|artworkorobject
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_AOO_CR_NOT
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|artworkorobject_header
argument_list|,
name|counter
argument_list|,
name|artworkorobject
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|counter
operator|++
expr_stmt|;
block|}
block|}
comment|/* DO REGISTRY ID (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.iptcExt.RegistryId"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* CLEAR REGISTRY ID DATA */
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|registryid_header
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
literal|256
condition|;
name|row
operator|++
control|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|G_N_ELEMENTS
argument_list|(
name|registryid
argument_list|)
condition|;
name|item
operator|++
control|)
block|{
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|registryid_header
argument_list|,
name|row
argument_list|,
name|registryid
index|[
name|item
index|]
argument_list|)
expr_stmt|;
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* SET REGISTRY ID DATA */
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
literal|"Xmp.iptcExt.RegistryId"
argument_list|,
name|GEXIV2_STRUCTURE_XA_BAG
argument_list|)
expr_stmt|;
name|counter
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|tag_data
decl_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_REGSITRY_ORG_ID
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|registryid_header
argument_list|,
name|counter
argument_list|,
name|registryid
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_REGSITRY_ITEM_ID
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|registryid_header
argument_list|,
name|counter
argument_list|,
name|registryid
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|counter
operator|++
expr_stmt|;
block|}
block|}
comment|/* DO IMAGE CREATOR (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.ImageCreator"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* CLEAR IMAGE CREATOR DATA */
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|imagecreator_header
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
literal|256
condition|;
name|row
operator|++
control|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|G_N_ELEMENTS
argument_list|(
name|imagecreator
argument_list|)
condition|;
name|item
operator|++
control|)
block|{
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|imagecreator_header
argument_list|,
name|row
argument_list|,
name|imagecreator
index|[
name|item
index|]
argument_list|)
expr_stmt|;
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* SET IMAGE CREATOR DATA */
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
literal|"Xmp.plus.ImageCreator"
argument_list|,
name|GEXIV2_STRUCTURE_XA_SEQ
argument_list|)
expr_stmt|;
name|counter
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|tag_data
decl_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_IMG_CR8_NAME
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|imagecreator_header
argument_list|,
name|counter
argument_list|,
name|imagecreator
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_IMG_CR8_ID
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|imagecreator_header
argument_list|,
name|counter
argument_list|,
name|imagecreator
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|counter
operator|++
expr_stmt|;
block|}
block|}
comment|/* DO COPYRIGHT OWNER (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.CopyrightOwner"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* CLEAR COPYRIGHT OWNER DATA */
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|copyrightowner_header
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
literal|256
condition|;
name|row
operator|++
control|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|G_N_ELEMENTS
argument_list|(
name|copyrightowner
argument_list|)
condition|;
name|item
operator|++
control|)
block|{
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|copyrightowner_header
argument_list|,
name|row
argument_list|,
name|copyrightowner
index|[
name|item
index|]
argument_list|)
expr_stmt|;
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* SET COPYRIGHT OWNER DATA */
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
literal|"Xmp.plus.CopyrightOwner"
argument_list|,
name|GEXIV2_STRUCTURE_XA_SEQ
argument_list|)
expr_stmt|;
name|counter
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|tag_data
decl_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_CR_OWNER_NAME
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|copyrightowner_header
argument_list|,
name|counter
argument_list|,
name|copyrightowner
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_CR_OWNER_ID
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|copyrightowner_header
argument_list|,
name|counter
argument_list|,
name|copyrightowner
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|counter
operator|++
expr_stmt|;
block|}
block|}
comment|/* DO LICENSOR (LISTSTORE) */
name|list_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Xmp.plus.Licensor"
argument_list|)
expr_stmt|;
name|treemodel
operator|=
name|gtk_tree_view_get_model
argument_list|(
name|GTK_TREE_VIEW
argument_list|(
name|list_widget
argument_list|)
argument_list|)
expr_stmt|;
name|number_of_rows
operator|=
name|gtk_tree_model_iter_n_children
argument_list|(
name|treemodel
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* CLEAR LICENSOR DATA */
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|licensor_header
argument_list|)
expr_stmt|;
name|output_data
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
literal|256
condition|;
name|row
operator|++
control|)
block|{
name|gint
name|item
decl_stmt|;
for|for
control|(
name|item
operator|=
literal|0
init|;
name|item
operator|<
name|G_N_ELEMENTS
argument_list|(
name|licensor
argument_list|)
condition|;
name|item
operator|++
control|)
block|{
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|row
argument_list|,
name|licensor
index|[
name|item
index|]
argument_list|)
expr_stmt|;
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* SET LICENSOR DATA */
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
literal|"Xmp.plus.Licensor"
argument_list|,
name|GEXIV2_STRUCTURE_XA_SEQ
argument_list|)
expr_stmt|;
name|counter
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|row
operator|=
literal|0
init|;
name|row
operator|<
name|number_of_rows
condition|;
name|row
operator|++
control|)
block|{
if|if
condition|(
name|gtk_tree_model_iter_nth_child
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|NULL
argument_list|,
name|row
argument_list|)
condition|)
block|{
name|gchar
modifier|*
name|tag_data
decl_stmt|;
name|gchar
name|type1
index|[
literal|256
index|]
decl_stmt|;
name|gchar
name|type2
index|[
literal|256
index|]
decl_stmt|;
name|gint
name|types
decl_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_NAME
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_ID
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_PHONE1
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_PHONE_TYPE1
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|type1
argument_list|,
name|phone_types
index|[
literal|0
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
for|for
control|(
name|types
operator|=
literal|0
init|;
name|types
operator|<
literal|6
condition|;
name|types
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|tag_data
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|display
argument_list|)
condition|)
block|{
name|strcpy
argument_list|(
name|type1
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|type1
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_PHONE2
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_PHONE_TYPE2
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
name|strcpy
argument_list|(
name|type2
argument_list|,
name|phone_types
index|[
literal|0
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
for|for
control|(
name|types
operator|=
literal|0
init|;
name|types
operator|<
literal|6
condition|;
name|types
operator|++
control|)
block|{
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|tag_data
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|display
argument_list|)
condition|)
block|{
name|strcpy
argument_list|(
name|type2
argument_list|,
name|phone_types
index|[
name|types
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|type2
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_EMAIL
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|6
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|gtk_tree_model_get
argument_list|(
name|treemodel
argument_list|,
operator|&
name|iter
argument_list|,
name|COL_LICENSOR_WEB
argument_list|,
operator|&
name|tag_data
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|g_snprintf
argument_list|(
name|tag
argument_list|,
sizeof|sizeof
argument_list|(
name|tag
argument_list|)
argument_list|,
literal|"%s[%d]%s"
argument_list|,
name|licensor_header
argument_list|,
name|counter
argument_list|,
name|licensor
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
name|set_tag_string
argument_list|(
name|g_metadata
argument_list|,
name|tag
argument_list|,
name|tag_data
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|tag_data
argument_list|)
expr_stmt|;
name|counter
operator|++
expr_stmt|;
block|}
block|}
comment|/* DO CREATOR TAGS */
if|if
condition|(
name|hasCreatorTagData
argument_list|(
name|builder
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|creatorContactInfoHeader
operator|.
name|header
argument_list|,
literal|"type=\"Struct\""
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|creatorContactInfoHeader
operator|.
name|size
condition|;
name|i
operator|++
control|)
block|{
name|GObject
modifier|*
name|object
init|=
name|gtk_builder_get_object
argument_list|(
name|builder
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|id
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"single"
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkEntry
modifier|*
name|entry
init|=
name|GTK_ENTRY
argument_list|(
name|object
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|gtk_entry_get_text
argument_list|(
name|entry
argument_list|)
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"multi"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkTextView
modifier|*
name|text_view
init|=
name|GTK_TEXT_VIEW
argument_list|(
name|object
argument_list|)
decl_stmt|;
name|GtkTextBuffer
modifier|*
name|buffer
decl_stmt|;
name|GtkTextIter
name|start
decl_stmt|;
name|GtkTextIter
name|end
decl_stmt|;
name|gchar
modifier|*
name|text
decl_stmt|;
name|buffer
operator|=
name|gtk_text_view_get_buffer
argument_list|(
name|text_view
argument_list|)
expr_stmt|;
name|gtk_text_buffer_get_start_iter
argument_list|(
name|buffer
argument_list|,
operator|&
name|start
argument_list|)
expr_stmt|;
name|gtk_text_buffer_get_end_iter
argument_list|(
name|buffer
argument_list|,
operator|&
name|end
argument_list|)
expr_stmt|;
name|text
operator|=
name|gtk_text_buffer_get_text
argument_list|(
name|buffer
argument_list|,
operator|&
name|start
argument_list|,
operator|&
name|end
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|text
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
name|g_free
argument_list|(
name|text
argument_list|)
expr_stmt|;
block|}
block|}
block|}
comment|/* DO SINGLE, MULTI AND COMBO TAGS */
else|else
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|creatorContactInfoHeader
operator|.
name|header
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|creatorContactInfoHeader
operator|.
name|size
condition|;
name|i
operator|++
control|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|creatorContactInfoTags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
name|max_elements
operator|=
name|G_N_ELEMENTS
argument_list|(
name|default_metadata_tags
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|max_elements
condition|;
name|i
operator|++
control|)
block|{
name|GObject
modifier|*
name|object
init|=
name|gtk_builder_get_object
argument_list|(
name|builder
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
decl_stmt|;
comment|/* SINGLE TAGS */
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"single"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkEntry
modifier|*
name|entry
init|=
name|GTK_ENTRY
argument_list|(
name|object
argument_list|)
decl_stmt|;
name|gchar
modifier|*
name|value_entry
init|=
name|g_strdup
argument_list|(
name|gtk_entry_get_text
argument_list|(
name|entry
argument_list|)
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSLongitude"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
specifier|const
name|gchar
name|delimiters_dms
index|[]
init|=
literal|" deg'\""
decl_stmt|;
name|gchar
modifier|*
name|s
init|=
name|g_strdup
argument_list|(
name|value_entry
argument_list|)
decl_stmt|;
name|gchar
name|lng
index|[
literal|256
index|]
decl_stmt|;
name|gchar
modifier|*
name|str1
decl_stmt|;
name|gchar
modifier|*
name|str2
decl_stmt|;
name|gchar
modifier|*
name|str3
decl_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|s
argument_list|,
literal|"."
argument_list|)
condition|)
block|{
name|gdouble
name|degs
decl_stmt|;
name|gint
name|deg
decl_stmt|;
name|gint
name|min
decl_stmt|;
name|gint
name|sec
decl_stmt|;
name|degs
operator|=
name|atof
argument_list|(
name|s
argument_list|)
expr_stmt|;
if|if
condition|(
name|degs
operator|<
literal|0
condition|)
name|degs
operator|*=
operator|-
literal|1
expr_stmt|;
name|deg
operator|=
operator|(
name|gint
operator|)
name|degs
expr_stmt|;
name|min
operator|=
call|(
name|gint
call|)
argument_list|(
operator|(
name|degs
operator|-
name|deg
operator|)
operator|*
literal|60.f
argument_list|)
expr_stmt|;
name|sec
operator|=
call|(
name|gint
call|)
argument_list|(
operator|(
name|degs
operator|-
operator|(
name|float
operator|)
name|deg
operator|-
call|(
name|float
call|)
argument_list|(
name|min
operator|/
literal|60.f
argument_list|)
operator|)
operator|*
literal|60.f
operator|*
literal|60.f
argument_list|)
expr_stmt|;
name|str1
operator|=
name|malloc
argument_list|(
literal|256
argument_list|)
expr_stmt|;
name|str2
operator|=
name|malloc
argument_list|(
literal|256
argument_list|)
expr_stmt|;
name|str3
operator|=
name|malloc
argument_list|(
literal|256
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
name|str1
argument_list|,
literal|"%d"
argument_list|,
name|deg
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
name|str2
argument_list|,
literal|"%d"
argument_list|,
name|min
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
name|str3
argument_list|,
literal|"%d"
argument_list|,
name|sec
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|str1
operator|=
name|strtok
argument_list|(
name|s
argument_list|,
name|delimiters_dms
argument_list|)
expr_stmt|;
name|str2
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
name|delimiters_dms
argument_list|)
expr_stmt|;
name|str3
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
name|delimiters_dms
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|str1
condition|)
block|{
name|strcpy
argument_list|(
name|lng
argument_list|,
name|str1
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lng
argument_list|,
literal|"/1"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strcpy
argument_list|(
name|lng
argument_list|,
literal|"0/1"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|str2
condition|)
block|{
name|strcat
argument_list|(
name|lng
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lng
argument_list|,
name|str2
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lng
argument_list|,
literal|"/1"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strcat
argument_list|(
name|lng
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lng
argument_list|,
literal|"0/1"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|str3
condition|)
block|{
name|strcat
argument_list|(
name|lng
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lng
argument_list|,
name|str3
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lng
argument_list|,
literal|"/1"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strcat
argument_list|(
name|lng
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lng
argument_list|,
literal|"0/1"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|lng
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|strstr
argument_list|(
name|s
argument_list|,
literal|"."
argument_list|)
condition|)
block|{
name|free
argument_list|(
name|str1
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|str2
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|str3
argument_list|)
expr_stmt|;
block|}
name|free
argument_list|(
name|s
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSLatitude"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
specifier|const
name|gchar
name|delimiters_dms
index|[]
init|=
literal|" deg'\""
decl_stmt|;
name|gchar
modifier|*
name|s
init|=
name|g_strdup
argument_list|(
name|value_entry
argument_list|)
decl_stmt|;
name|gchar
name|lat
index|[
literal|256
index|]
decl_stmt|;
name|gchar
modifier|*
name|str1
decl_stmt|;
name|gchar
modifier|*
name|str2
decl_stmt|;
name|gchar
modifier|*
name|str3
decl_stmt|;
if|if
condition|(
name|strstr
argument_list|(
name|s
argument_list|,
literal|"."
argument_list|)
condition|)
block|{
name|gdouble
name|degs
decl_stmt|;
name|gint
name|deg
decl_stmt|;
name|gint
name|min
decl_stmt|;
name|gint
name|sec
decl_stmt|;
name|degs
operator|=
name|atof
argument_list|(
name|s
argument_list|)
expr_stmt|;
if|if
condition|(
name|degs
operator|<
literal|0
condition|)
name|degs
operator|*=
operator|-
literal|1
expr_stmt|;
name|deg
operator|=
call|(
name|gint
call|)
argument_list|(
name|degs
argument_list|)
expr_stmt|;
name|min
operator|=
call|(
name|gint
call|)
argument_list|(
operator|(
name|degs
operator|-
name|deg
operator|)
operator|*
literal|60.f
argument_list|)
expr_stmt|;
name|sec
operator|=
call|(
name|gint
call|)
argument_list|(
operator|(
name|degs
operator|-
operator|(
name|float
operator|)
name|deg
operator|-
call|(
name|float
call|)
argument_list|(
name|min
operator|/
literal|60.f
argument_list|)
operator|)
operator|*
literal|60.f
operator|*
literal|60.f
argument_list|)
expr_stmt|;
name|str1
operator|=
name|malloc
argument_list|(
literal|256
argument_list|)
expr_stmt|;
name|str2
operator|=
name|malloc
argument_list|(
literal|256
argument_list|)
expr_stmt|;
name|str3
operator|=
name|malloc
argument_list|(
literal|256
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
name|str1
argument_list|,
literal|"%d"
argument_list|,
name|deg
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
name|str2
argument_list|,
literal|"%d"
argument_list|,
name|min
argument_list|)
expr_stmt|;
name|g_sprintf
argument_list|(
name|str3
argument_list|,
literal|"%d"
argument_list|,
name|sec
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|str1
operator|=
name|strtok
argument_list|(
name|s
argument_list|,
name|delimiters_dms
argument_list|)
expr_stmt|;
name|str2
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
name|delimiters_dms
argument_list|)
expr_stmt|;
name|str3
operator|=
name|strtok
argument_list|(
name|NULL
argument_list|,
name|delimiters_dms
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|str1
condition|)
block|{
name|strcpy
argument_list|(
name|lat
argument_list|,
name|str1
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lat
argument_list|,
literal|"/1"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strcpy
argument_list|(
name|lat
argument_list|,
literal|"0/1"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|str2
condition|)
block|{
name|strcat
argument_list|(
name|lat
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lat
argument_list|,
name|str2
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lat
argument_list|,
literal|"/1"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strcat
argument_list|(
name|lat
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lat
argument_list|,
literal|"0/1"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|str3
condition|)
block|{
name|strcat
argument_list|(
name|lat
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lat
argument_list|,
name|str3
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lat
argument_list|,
literal|"/1"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|strcat
argument_list|(
name|lat
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|lat
argument_list|,
literal|"0/1"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|lat
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|s
condition|)
name|free
argument_list|(
name|s
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSAltitude"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|GtkWidget
modifier|*
name|combo_widget
decl_stmt|;
name|gchar
name|alt_str
index|[
literal|256
index|]
decl_stmt|;
name|gdouble
name|alt_d
decl_stmt|;
name|gint
name|msr
decl_stmt|;
name|combo_widget
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"GPSAltitudeSystem"
argument_list|)
expr_stmt|;
name|msr
operator|=
name|gtk_combo_box_get_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo_widget
argument_list|)
argument_list|)
expr_stmt|;
name|alt_d
operator|=
name|atof
argument_list|(
name|gtk_entry_get_text
argument_list|(
name|entry
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|msr
operator|==
literal|1
condition|)
name|alt_d
operator|=
operator|(
name|alt_d
operator|*
literal|12
operator|*
literal|2.54d
operator|)
operator|/
literal|100
expr_stmt|;
name|alt_d
operator|*=
literal|10.f
expr_stmt|;
name|g_snprintf
argument_list|(
name|alt_str
argument_list|,
sizeof|sizeof
argument_list|(
name|alt_str
argument_list|)
argument_list|,
literal|"%d/10"
argument_list|,
operator|(
name|gint
operator|)
name|alt_d
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|alt_str
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
specifier|const
name|gchar
modifier|*
name|text_value
init|=
name|gtk_entry_get_text
argument_list|(
name|entry
argument_list|)
decl_stmt|;
if|if
condition|(
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_TEXT
operator|||
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_NONE
condition|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|GEXIV2_STRUCTURE_XA_NONE
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|text_value
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_BAG
condition|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|GEXIV2_STRUCTURE_XA_BAG
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|text_value
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_SEQ
condition|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|GEXIV2_STRUCTURE_XA_SEQ
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|text_value
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
comment|/* MULTI TAGS */
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"multi"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkTextView
modifier|*
name|text_view
init|=
name|GTK_TEXT_VIEW
argument_list|(
name|object
argument_list|)
decl_stmt|;
name|GtkTextBuffer
modifier|*
name|buffer
decl_stmt|;
name|GtkTextIter
name|start
decl_stmt|;
name|GtkTextIter
name|end
decl_stmt|;
name|gchar
modifier|*
name|text
decl_stmt|;
name|buffer
operator|=
name|gtk_text_view_get_buffer
argument_list|(
name|text_view
argument_list|)
expr_stmt|;
name|gtk_text_buffer_get_start_iter
argument_list|(
name|buffer
argument_list|,
operator|&
name|start
argument_list|)
expr_stmt|;
name|gtk_text_buffer_get_end_iter
argument_list|(
name|buffer
argument_list|,
operator|&
name|end
argument_list|)
expr_stmt|;
name|text
operator|=
name|gtk_text_buffer_get_text
argument_list|(
name|buffer
argument_list|,
operator|&
name|start
argument_list|,
operator|&
name|end
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
if|if
condition|(
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_TEXT
operator|||
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_NONE
condition|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|GEXIV2_STRUCTURE_XA_NONE
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|text
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_BAG
condition|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|GEXIV2_STRUCTURE_XA_BAG
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|text
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|xmp_type
operator|==
name|GIMP_XMP_SEQ
condition|)
block|{
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
name|gexiv2_metadata_set_xmp_tag_struct
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|GEXIV2_STRUCTURE_XA_SEQ
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|text
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|text
condition|)
name|g_free
argument_list|(
name|text
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"list"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
comment|/* MIGHT DO SOMETHING HERE */
block|}
comment|/* COMBO TAGS */
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"combo"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|mode
argument_list|)
condition|)
block|{
name|GtkComboBoxText
modifier|*
name|combo
decl_stmt|;
name|gint32
name|value
decl_stmt|;
name|combo
operator|=
name|GTK_COMBO_BOX_TEXT
argument_list|(
name|object
argument_list|)
expr_stmt|;
name|value
operator|=
name|gtk_combo_box_get_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.xmp.Rating"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
name|value
operator|==
literal|0
condition|)
block|{
if|if
condition|(
operator|!
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to clear tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gchar
modifier|*
name|save
decl_stmt|;
name|save
operator|=
name|g_strdup_printf
argument_list|(
literal|"%d"
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|save
argument_list|)
expr_stmt|;
name|g_free
argument_list|(
name|save
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.DICOM.PatientSex"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
switch|switch
condition|(
name|value
condition|)
block|{
case|case
literal|0
case|:
if|if
condition|(
operator|!
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to clear tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|1
case|:
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"male"
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|2
case|:
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"female"
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|3
case|:
if|if
condition|(
operator|!
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"other"
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to set tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSLongitudeRef"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
switch|switch
condition|(
name|value
condition|)
block|{
case|case
literal|0
case|:
if|if
condition|(
operator|!
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to clear tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|1
case|:
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"E"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"W"
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSLatitudeRef"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
switch|switch
condition|(
name|value
condition|)
block|{
case|case
literal|0
case|:
if|if
condition|(
operator|!
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to clear tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|1
case|:
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"N"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"S"
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Exif.GPSInfo.GPSAltitudeRef"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
switch|switch
condition|(
name|value
condition|)
block|{
case|case
literal|0
case|:
if|if
condition|(
operator|!
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to clear tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|1
case|:
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"0"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
literal|"1"
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.ModelReleaseStatus"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|modelreleasestatus
index|[
name|value
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.PropertyReleaseStatus"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
name|value
operator|==
literal|0
condition|)
block|{
if|if
condition|(
operator|!
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to clear tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|propertyreleasestatus
index|[
name|value
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.plus.MinorModelAgeDisclosure"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
if|if
condition|(
name|value
operator|==
literal|0
condition|)
block|{
if|if
condition|(
operator|!
name|gexiv2_metadata_clear_tag
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|g_printerr
argument_list|(
literal|"failed to clear tag [%s]\n"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|minormodelagedisclosure
index|[
name|value
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
literal|"Xmp.iptcExt.DigitalSourceType"
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|)
condition|)
block|{
name|gexiv2_metadata_set_tag_string
argument_list|(
name|GEXIV2_METADATA
argument_list|(
name|g_metadata
argument_list|)
argument_list|,
name|default_metadata_tags
index|[
name|i
index|]
operator|.
name|tag
argument_list|,
name|digitalsourcetype
index|[
name|value
index|]
operator|.
name|data
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|gimp_image_set_metadata
argument_list|(
name|image_id
argument_list|,
name|g_metadata
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* ============================================================================  * ==[ METADATA IMPORT / EXPORT FILE DIALOG UI ]===============================  * ============================================================================  */
end_comment

begin_function
specifier|static
name|void
DECL|function|import_dialog_metadata (metadata_editor * args)
name|import_dialog_metadata
parameter_list|(
name|metadata_editor
modifier|*
name|args
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|file_dialog
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|file_dialog
operator|=
name|gtk_file_chooser_dialog_new
argument_list|(
literal|"Import Metadata File"
argument_list|,
name|NULL
argument_list|,
name|GTK_FILE_CHOOSER_ACTION_OPEN
argument_list|,
name|GTK_STOCK_CANCEL
argument_list|,
name|GTK_RESPONSE_CANCEL
argument_list|,
name|GTK_STOCK_OPEN
argument_list|,
name|GTK_RESPONSE_ACCEPT
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_file_chooser_set_filename
argument_list|(
name|GTK_FILE_CHOOSER
argument_list|(
name|file_dialog
argument_list|)
argument_list|,
name|args
operator|->
name|filename
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_dialog_run
argument_list|(
name|GTK_DIALOG
argument_list|(
name|file_dialog
argument_list|)
argument_list|)
operator|==
name|GTK_RESPONSE_ACCEPT
condition|)
block|{
name|filename
operator|=
name|gtk_file_chooser_get_filename
argument_list|(
name|GTK_FILE_CHOOSER
argument_list|(
name|file_dialog
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|filename
condition|)
block|{
if|if
condition|(
name|args
operator|->
name|filename
condition|)
block|{
name|g_free
argument_list|(
name|args
operator|->
name|filename
argument_list|)
expr_stmt|;
block|}
name|args
operator|->
name|filename
operator|=
name|g_strdup
argument_list|(
name|filename
argument_list|)
expr_stmt|;
name|import_file_metadata
argument_list|(
name|args
argument_list|)
expr_stmt|;
block|}
block|}
name|gtk_widget_destroy
argument_list|(
name|file_dialog
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|export_dialog_metadata (metadata_editor * args)
name|export_dialog_metadata
parameter_list|(
name|metadata_editor
modifier|*
name|args
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|file_dialog
decl_stmt|;
name|gchar
modifier|*
name|filename
decl_stmt|;
name|file_dialog
operator|=
name|gtk_file_chooser_dialog_new
argument_list|(
literal|"Export Metadata File"
argument_list|,
name|NULL
argument_list|,
name|GTK_FILE_CHOOSER_ACTION_SAVE
argument_list|,
name|GTK_STOCK_CANCEL
argument_list|,
name|GTK_RESPONSE_CANCEL
argument_list|,
name|GTK_STOCK_SAVE
argument_list|,
name|GTK_RESPONSE_ACCEPT
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|gtk_file_chooser_set_do_overwrite_confirmation
argument_list|(
name|GTK_FILE_CHOOSER
argument_list|(
name|file_dialog
argument_list|)
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|gtk_file_chooser_set_filename
argument_list|(
name|GTK_FILE_CHOOSER
argument_list|(
name|file_dialog
argument_list|)
argument_list|,
name|args
operator|->
name|filename
argument_list|)
expr_stmt|;
if|if
condition|(
name|gtk_dialog_run
argument_list|(
name|GTK_DIALOG
argument_list|(
name|file_dialog
argument_list|)
argument_list|)
operator|==
name|GTK_RESPONSE_ACCEPT
condition|)
block|{
name|filename
operator|=
name|gtk_file_chooser_get_filename
argument_list|(
name|GTK_FILE_CHOOSER
argument_list|(
name|file_dialog
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|filename
condition|)
block|{
if|if
condition|(
name|args
operator|->
name|filename
condition|)
block|{
name|g_free
argument_list|(
name|args
operator|->
name|filename
argument_list|)
expr_stmt|;
block|}
name|args
operator|->
name|filename
operator|=
name|g_strdup
argument_list|(
name|filename
argument_list|)
expr_stmt|;
name|export_file_metadata
argument_list|(
name|args
argument_list|)
expr_stmt|;
block|}
block|}
name|gtk_widget_destroy
argument_list|(
name|file_dialog
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|impex_combo_callback (GtkComboBoxText * combo,gpointer data)
name|impex_combo_callback
parameter_list|(
name|GtkComboBoxText
modifier|*
name|combo
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|metadata_editor
modifier|*
name|args
decl_stmt|;
name|gint32
name|selection
decl_stmt|;
name|args
operator|=
name|data
expr_stmt|;
name|selection
operator|=
name|gtk_combo_box_get_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo
argument_list|)
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|selection
condition|)
block|{
case|case
literal|1
case|:
comment|/* Import */
name|import_dialog_metadata
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
comment|/* Export */
name|export_dialog_metadata
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|gtk_combo_box_set_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
end_function

begin_function
specifier|static
name|void
DECL|function|gpsaltsys_combo_callback (GtkComboBoxText * combo,gpointer data)
name|gpsaltsys_combo_callback
parameter_list|(
name|GtkComboBoxText
modifier|*
name|combo
parameter_list|,
name|gpointer
name|data
parameter_list|)
block|{
name|GtkWidget
modifier|*
name|entry
decl_stmt|;
name|GtkBuilder
modifier|*
name|builder
decl_stmt|;
name|gint32
name|selection
decl_stmt|;
name|gchar
name|alt_str
index|[
literal|256
index|]
decl_stmt|;
name|double
name|alt_d
decl_stmt|;
name|builder
operator|=
name|data
expr_stmt|;
name|selection
operator|=
name|gtk_combo_box_get_active
argument_list|(
name|GTK_COMBO_BOX
argument_list|(
name|combo
argument_list|)
argument_list|)
expr_stmt|;
name|entry
operator|=
name|builder_get_widget
argument_list|(
name|builder
argument_list|,
literal|"Exif.GPSInfo.GPSAltitude"
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|selection
condition|)
block|{
case|case
literal|0
case|:
comment|/* Meters */
if|if
condition|(
name|last_gpsaltsys_sel
operator|!=
literal|0
condition|)
block|{
name|alt_d
operator|=
name|atof
argument_list|(
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|alt_d
operator|=
operator|(
name|alt_d
operator|*
operator|(
literal|12
operator|*
literal|2.54d
operator|)
operator|)
operator|/
literal|100
expr_stmt|;
name|g_snprintf
argument_list|(
name|alt_str
argument_list|,
sizeof|sizeof
argument_list|(
name|alt_str
argument_list|)
argument_list|,
literal|"%2f"
argument_list|,
operator|(
name|float
operator|)
name|alt_d
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|alt_str
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|1
case|:
comment|/* Feet */
if|if
condition|(
name|last_gpsaltsys_sel
operator|!=
literal|1
condition|)
block|{
name|alt_d
operator|=
name|atof
argument_list|(
name|gtk_entry_get_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|alt_d
operator|=
name|alt_d
operator|*
literal|3.28d
expr_stmt|;
name|g_snprintf
argument_list|(
name|alt_str
argument_list|,
sizeof|sizeof
argument_list|(
name|alt_str
argument_list|)
argument_list|,
literal|"%2f"
argument_list|,
operator|(
name|float
operator|)
name|alt_d
argument_list|)
expr_stmt|;
name|gtk_entry_set_text
argument_list|(
name|GTK_ENTRY
argument_list|(
name|entry
argument_list|)
argument_list|,
name|alt_str
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
name|last_gpsaltsys_sel
operator|=
name|selection
expr_stmt|;
block|}
end_function

end_unit

