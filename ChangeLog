2006-06-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/pygimp/gimpui.py: applied patch from Joao S. O. Bueno
	Calligaris that makes PF_FILE use a GtkFileChooserButton. Fixes
	bug #326986.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptransformtool.c (gimp_transform_tool_notify_type):
	do not call bounds() and recalc() with a NULL display.  Added
	sanity checks for the display parameter to both functions.
	Fixes bug #345791.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_menu.c: commented out the non-functional
	Zoom menu.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_preview.c: improved dialog layout.

2006-06-27  Michael Natterer  <mitch@gimp.org>

	* plug-ins/print/print-draw-page.c: s/uft8/utf8/ makes it compile.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/depthmerge.c
	* plug-ins/common/illusion.c
	* plug-ins/script-fu/script-fu.c some more canonical procedure
	names that we missed earlier.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/CML_explorer.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/depthmerge.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/fractaltrace.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/mblur.c
	* plug-ins/common/png.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/tga.c
	* plug-ins/common/threshold_alpha.c
	* plug-ins/common/tiler.c
	* plug-ins/common/unsharp.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gfli/gfli.c
	* plug-ins/gimpressionist/gimp.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/script-fu/script-fu.c
	* plug-ins/twain/twain.c
	* plug-ins/winsnap/winsnap.c: use canonical parameter names.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/FractalExplorer.c
	* plug-ins/Lighting/lighting_main.c
	* plug-ins/MapObject/mapobject_main.c: use canonical procedure and
	parameter names. Marked procedure blurbs for translation.

	* plug-ins/winicon/main.c: use canonical procedure and parameter
	names.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpalignoptions.c: removed unused includes and stubs.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h (NUM_PROCESSORS_BLURB): simplified.

	* app/config/gimpguiconfig.c: changed default window hints back to
	"normal". Fixes bug #344242.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig-dialog.[ch]
	* plug-ins/gfig/gfig-dobject.h
	* plug-ins/gfig/gfig.[ch]: put extern variables where they belong.
	Patch from Daniel Richard G. (bug #342455).

2006-06-27  Sven Neumann  <sven@gimp.org>

	Based on a patch from Zbigniew Chyla:

	* app/core/gimpunit.c (_gimp_unit_get_singular, _gimp_unit_get_plural):
	don't call gettext() on strings returned by _gimp_unit_get_user_unit().

2006-06-27  Sven Neumann  <sven@gimp.org>

	Applied patch from Zbigniew Chyla:

	* app/gimp-intl.h
	* libgimp/stdplugins-intl.h: removed most content and include
	<glib/gi18n.h> instead.

	* libgimp/libgimp-intl.h: define ngettext() macro as wrapper around
	dngettext().

2006-06-27  Sven Neumann  <sven@gimp.org>

	I18n improvements based on a patch from Zbigniew Chyla:

	* app/main.c:
	* modules/controller_midi.c
	* plug-ins/script-fu/scripts/guides-new.scm: marked strings for
	translation.

	* app/widgets/gimpdock.c
	* libgimpwidgets/gimppageselector.c
	* plug-ins/common/plugin-browser.c: use ngettext() for plural forms.

2006-06-27  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpexport.c (gimp_export_image): use NULL as the
	special value, not "silent".

	* plug-ins/print/print-draw-page.c: changed accordingly.  Also
	fixed handling of filename encoding.

2006-06-26  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimp/gimpexport.c: if format arg is "silent", export
	without popping a dialog -- saves duplicating code.

	* plug-ins/print/print-draw-page.c
	* plug-ins/print/print-draw-page.h
	* plug-ins/print/print-page-layout.c
	* plug-ins/print/print-page-layout.h
	* plug-ins/print/print-settings.c
	* plug-ins/print/print-settings.h
	* plug-ins/print/print.h:         new files	

	* plug-ins/print/Makefile.am
	* plug-ins/print/print.c:  modified

	Progress toward GtkPrintOperation plug-in.  Should already
	be usable, but very ugly.

2006-06-26  Sven Neumann  <sven@gimp.org>

	* app/gui/gui-vtable.c (gui_pdb_dialog_new): hide the button-bar.

2006-06-26  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c: use STOCK_WARNING instead of
	STOCK_WILBER_EEK for the quit dialog.

2006-06-25  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-pdb.c: quick fix so colors in the PDB work
	again.

2006-06-25  Manish Singh  <yosh@gimp.org>

	* libgimp/gimpuitypes.h
	* libgimp/gimpselectbutton.[ch]: abstract class for resource selection
	buttons.

	* libgimp/gimpfontselectbutton.[ch]: derive from GimpSelectButton.

	* libgimp/gimpbrushselectbutton.[ch]
	* libgimp/gimpgradientselectbutton.[ch]
	* libgimp/gimppaletteselectbutton.[ch]
	* libgimp/gimppatternselectbutton.[ch]: replacements for
	gimp_foo_select widgets, akin to GimpFontSelectButton.

	* libgimp/gimpbrushmenu.[ch]
	* libgimp/gimpgradientmenu.[ch]
	* libgimp/gimppalettemenu.[ch]
	* libgimp/gimppatternmenu.[ch]: deprecate old API, and reimplement
	in terms of GimpFooSelectButton.

	* libgimp/gimpfontmenu.[ch]: change to use the GimpSelectButton API.

	* libgimp/gimpuimarshal.list: new marshallers for the above new
	widgets.

	* libgimp/gimpui.h: add new headers.

	* libgimp/Makefile.am: add new files.

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfig/gfig-style.[ch]
	* plug-ins/script-fu/script-fu-interface.c: use new API.

2006-06-25  Manish Singh  <yosh@gimp.org>

	* libgimp/gimpbrushes.c
	* modules/cdisplay_colorblind.c: fix some ytpos.

2006-06-25  Manish Singh  <yosh@gimp.org>

	* app/plug-in/plug-in-params.c
	* libgimp/gimp.[ch]
	* libgimpbase/gimpprotocol.[ch]
	* plug-ins/common/colormap-remap.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/grid.c
	* plug-ins/pygimp/pygimp-pdb.c
	* plug-ins/script-fu/siod-wrapper.c
	* tools/pdbgen/pdb.pl: turn d_int8 and d_int8array into guint8.
	Fixes bug #344431.

2006-06-25  DindinX  <dindinx@gimp.org>

	* plug-ins/common/tga.c: untabified.

2006-06-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c (script_fu_interface):
	ellipsize the progress label to avoid dialog resizing.

2006-06-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_preview.[ch]: moved rulers out of the
	scrolled window and update them when the scroll adjustments
	change. Fixes bug #341149.

	* plug-ins/imagemap/imap_about.c
	* plug-ins/imagemap/imap_menu.c: unrelated cleanups.

2006-06-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/print.c: the name of the binary is "print".

2006-06-23  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c: applied patch from Eric Lamarque that adds
	a new function to check for a valid URI. Fixes bug #332835.

2006-06-22  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* configure.in: adjust requirements for building gtk-print plug-in
	-- requires gtk+ 2.9.3.

	* plug-ins/print/Makefile.am
	* plug-ins/print/print.c: new plug-in using GtkPrintOperation.
	Mainly infrastructure at this point -- output is wildly
	incorrect.

2006-06-22  Sven Neumann  <sven@gimp.org>

	* menus/toolbox-menu.xml.in: moved separator.

2006-06-22  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptransformtool.c: (gimp_transform_tool_control):
	always upchain.

	(gimp_transform_tool_cursor_update): use the small crosshair
	instead of GIMP_CURSOR_MOUSE as default cursor to avoid hotspot
	jumping.

	(gimp_transform_tool_doit): call prepare() after bounds().

2006-06-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c
	* plug-ins/common/colormap-remap.c
	* plug-ins/helpbrowser/dialog.c: popup the menu on Shift-F10.

2006-06-22  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/preferences-dialog.c (prefs_dialog_new): pack the
	page icon with 6px padding too, just as the page label.

2006-06-21  Sven Neumann  <sven@gimp.org>

	* app/tools/gimp-tools.c (gimp_tools_restore): don't attempt to
	reorder to a position >= container->num_children.

2006-06-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c: Always use crosshair cursor
	if shift or ctrl are down; fixes bug #345551.

2006-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colormap-remap.c: moved hints to the bottom.

2006-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colormap-remap.c: applied patch from Mukund
	Sivaraman that adds a "Reverse Order" option in favor of having
	ascending and descending sort functions.

2006-06-21  Sven Neumann  <sven@gimp.org>

	* docs/Makefile.am (EXTRA_DIST): stop distributing Wilber.svg.

	* libgimpcolor/gimpcolorspace.h: formatting.

2006-06-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c: if there is a floating
	selection and mouse is clicked outside it without movement, anchor it.

	* app/tools/gimprectangletool.c: corner handle area was scaling
	improperly when image was zoomed.

2006-06-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/dialogs/authors.h: autogenerated file; committing changes
	caused by Roman's previous commit.

2006-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colormap-remap.c: added a right-click menu that
	allows to sort the colormap by hue, saturation or value.

2006-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colormap-remap.c: added a Reset button and
	prepared for colormap sorting.

2006-06-21  Roman Joost  <romanofski@gimp.org>

	* AUTHORS
	* authors.xml: sorted previously added names alphabetically

2006-06-21  Sven Neumann  <sven@gimp.org>

	* libgimp/gimp.[ch] (gimp_shm_addr): return a const pointer.
	(gimp_message_func): removed wrong cast.

2006-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/warp.c: minor code cleanup.

2006-06-21  Roman Joost  <romanofski@gimp.org>

	* AUTHORS
	* authors.xml: added active docwriters from the GIMP manual

2006-06-20  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in
	* plug-ins/Makefile.am
	* plug-ins/print/Makefile.am: added build infrastructure for new
	print plug-in.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in
	* plug-ins/common/plugin-defs.pl
	* plug-ins/common/Makefile.am
	* plug-ins/common/gnomeprint.c
	* plug-ins/common/winprint.c: removed gnomeprint and winprint
	plug-ins. We will have a plug-in based on GtkPrint for GIMP 2.4.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in
	* plug-ins/Makefile.am
	* plug-ins/print: removed the gimp-print plug-in. gutenprint comes
	with a GIMP plug-in, so there is no point in supporting this any
	longer.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* authors.xml: only use the "artist" role for the newly added
	contributors.

2006-06-20  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_set_image): don't
	try to set "." as current_folder_uri.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* app/dialogs/tips-dialog.c: use GIMP_STOCK_INFO for the tips dialog.

	* data/images/Makefile.am: do not install unused wilber icons.

2006-06-20  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/stock-wilber-*: tweak shape a bit
	* data/images/wilber-icon.png, gimp-logo.png: reflect the changes
	  here as well.

2006-06-20  Jakub Steiner <jimmac@ximian.com>

	* authors.xml: add Andreas, Lapo and Bill as artists.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/preferences/Makefile.am: install icons at
	22x22 pixel size.

	* app/dialogs/preferences-dialog.c (prefs_notebook_append_page):
	try to load icons at 22x22 instead of scaling down the large one.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* themes/Default/Makefile.am
	* themes/Default/imagerc: removed imagerc, it was outdated anyway.

	* themes/Default/images/Makefile.am: don't install the icons that
	are compiled in.

2006-06-20  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/*xcf: forgot the source xcfs

2006-06-20  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/*: apply Tango style on the default iconset.
	A teamwork of Andreas Nilsson, Lapo Calamandrei, William
	Szilvester and myself.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl

	* plug-ins/common/desktop-link.c: new load plug-in that parses a
	.desktop file and if it is a link, asks GIMP to open the file the
	link points to (bug #326956).

2006-06-20  Sven Neumann  <sven@gimp.org>

	* app/dialogs/about-dialog.c (about_dialog_create): only unref the
	logo pixmap if it is not NULL; loading it may fail.

2006-06-20  Sven Neumann  <sven@gimp.org>

	* app/tools/tools-enums.h: added TRANSFORM_HANDLE_NONE (will get
	rid of TRANSFORM_CREATING later).

	* app/tools/gimptransformtool.[ch]: added member "use_handles" and
	default to FALSE for all "use_foo" variables.  Only deal with the
	handles the specific transform tool asks for.  Set cursors
	according to the active handle.

	* app/tools/gimpfliptool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c: changed accordingly.

2006-06-19  Sven Neumann  <sven@gimp.org>

	* app/actions/error-console-commands.c
	* app/display/gimpdisplayshell-draw.c
	* app/display/gimpdisplayshell-scale.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimptexttool.c
	* app/widgets/gimpcellrendereraccel.c
	* app/widgets/gimpviewabledialog.c
	* app/widgets/gimpviewrenderer.c: changed casts in calls to
	g_object_add_weak_pointer() to silence compiler warnings.

2006-06-19  Sven Neumann  <sven@gimp.org>

	* app/config/gimpguiconfig.c (DEFAULT_WEB_BROWSER): changed to
	"firefox", most distributions seem to have renamed the binary.

2006-06-19  Sven Neumann  <sven@gimp.org>

	* data/images/gimp-logo.png: replaced with the application logo
	(bug #343948).

	* data/images/gimp2_2_logo.png: the old logo, as a reference.

	* app/dialogs/about-dialog.c: let GtkAboutDialog deal with the logo.
	Moved the text animation below the copyright notice and draw it on
in <Layers>, <Channels>, <Vectors> and
	<ColormapEditor>:

	* app/pdb/gimppluginprocedure.c
	(gimp_plug_in_procedure_add_menu_path): added the argument type
	checks for the new locations. Factored out duplicated code.

	* app/menus/menus.c (menus_init): add the "plug-in" action
	group to the resp. UI managers.

	* app/menus/plug-in-menus.c (plug_in_menus_menu_path_added):
	support them here too.

	* app/widgets/gimpimageeditor.[ch]
	* app/widgets/gimpitemtreeview.[ch]: added get_image() functions.

	* app/actions/plug-in-commands.c: added new utility functions
	which collect plug-in arguments from GimpImageEditor and
	GimpItemTreeView widgets.

	* menus/channels-menu.xml
	* menus/colormap-editor-menu.xml
	* menus/layers-menu.xml
	* menus/vectors-menu.xml: added separators.

	* menus/image-menu.xml.in: added a "Colormap" placeholder in
	Colors/Map

	* plug-ins/common/colormap-remap.c (query): register a menu
	entry in <ColormapEditor> and moved the existing one to the
	"Colormap" placeholder. Also register an icon to make this
	menu item clearly distinct from the others in that menu.

	Unrelated:

	* plug-ins/common/colormap-remap.c (run): cleaned up quite a
	bit. Fixed last-vals code and simplified map handling.

	(remap_swap): removed, folded into run().

	(remap_dialog): use the passed map to initialize the dialog so it
	starts with the last-vals. Tweaked layout to have 16 columns
	and simplified cell renderer creation.

2006-06-16  Manish Singh  <yosh@gimp.org>

	* app/errors.c
	* app/main.c
	* app/file/gimprecentlist.c
	* libgimpbase/gimpsignal.c
	* libgimp/gimp.c
	* modules/controller_midi.c
	* plug-ins/common/gqbist.c: use _GNU_SOURCE instead of the other
	_FOO_SOURCE variables to support -ansi -pedantic on glibc systems,
	since anything else breaks compilation of otherwise working code.
	Fixes bug #344203.

2006-06-16  Sven Neumann  <neumann@jpk.com>

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-colormap-*.png
	* themes/Default/images/stock-indexed-palette-*.png: renamed
	stock-indexed-palette to stock-colormap.

	* libgimpwidgets/gimpstock.[ch]: deprecated
	GIMP_STOCK_INDEXED_PALETTE in favor of GIMP_STOCK_COLORMAP.

	* app/actions/actions.c
	* app/actions/colormap-editor-actions.c
	* app/actions/colormap-editor-commands.c
	* app/actions/context-actions.c
	* app/actions/dialogs-actions.c
	* app/dialogs/dialogs.c: use the new stock-id.

2006-06-16  Sven Neumann  <neumann@jpk.com>

	* app/pdb/gimppluginprocedure.c (gimp_plug_in_procedure_get_label):
	* plug-ins/script-fu/script-fu-interface.c (script_fu_interface):
	when cutting away ellipsis, also look for U+2026 HORIZONTAL ELLIPSIS.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd_save.c: improved error message.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/convert-script: removed; it's barely useful
	nowadays.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c: removed the About
	dialog.  That information is available from the Procedure Browser
	and scripts should look and feel as much like plug-ins as
	possible.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-types.h (struct SFScript): renamed
	member "help" to "blurb" since that's what it is being used for
	when the script procedure is registered.

	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/script-fu/script-fu-scripts.c: changed accordingly.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c (script_fu_add_script):
	use a canonical name for the automatically added run-mode parameter.
	Untabbified.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* app/core/gimplist.c (gimp_list_new, gimp_list_new_weak): for
	debugging purposes, set the children type as the name of the list.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* app/actions/debug-actions.c: no need to be extra concise here.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* app/actions/image-commands.c (image_convert_cmd_callback):
	always call gimp_image_flush() so that the image mode radio
	buttons reflect the image state.  Attach the indexed conversion
	dialog to the shell to avoid multiple instances.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mapcolor.c (query): marked blurb for translation.

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colormap-remap.c: renamed to "Rearrange Colormap".

2006-06-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/rcm/rcm.c
	* plug-ins/rcm/rcm_dialog.c: renamed to "Rotate Colors"; it
	doesn't actually work on indexed images at all.

2006-06-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl

	* plug-ins/common/colormap-remap.c: added new plug-in for colormap
	manipulation written by Mukund Sivaraman.

2006-06-15  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c (gimp_image_convert): remove
	duplicate colors for all palette types (except for MAKE_PALETTE
	since there shouldn't be any unused colors then).  That's what
	the PDB documentation claims the function would be doing.

	* app/dialogs/convert-dialog.c: allow use of the "Remove unused
	colors" toggle for all but the optimized palette.

2006-06-15  Sven Neumann  <sven@gimp.org>

	* app/actions/image-actions.c (image_actions_update): improved
	code to set the image mode radio actions; set their sensitivity
	also.

	* app/actions/image-commands.c (image_configure_grid_cmd_callback):
	fixed cast to silence compiler warning.

2006-06-15  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockbook.c (gimp_dockbook_get_tab_widget): set
	the event box' window invisible so we get the right background
	with all themes.

2006-06-14  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c: Fix sporadic crash
	resulting from previous change.

2006-06-14  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c: As suggested by Joao,
	halt tool on changes to selection or image size.

2006-06-14  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/vinvert.c: another patch from Mukund that cleans
	up i18n initialization.

2006-06-14  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpbycolorselect.c: fix crash when changing
	threshold with no display active.

2006-06-14  Sven Neumann  <sven@gimp.org>

	* app/actions/image-actions.c: use radio items for the Image mode
	as suggested in bug #344871.

	* app/actions/image-commands.[ch] (image_convert_cmd_callback):
	changed accordingly.

2006-06-14  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/[many].pdb: in help texts, refer to other
	procedures using_c_syntax(). This way gtk-doc can cross-reference
	them correctly in libgimp, and app.pl will transform them
	'to-canonical-names' for PDB registering.

	* app/pdb/[many]_cmds.c
	* libgimp/[many]_pdb.c: regenerated.

2006-06-13  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpbycolorselect.[ch]: allow modifying threshold
	without having to re-click on image each time.  Fixes
	bug #126748.

2006-06-13  Tor Lillqvist  <tml@novell.com>

	* app/plug-in/gimpenvirontable.c (gimp_environ_table_populate):
	Free the string vector returned by g_listenv().

	* libgimpwidgets/gimpwidgets.def: Remove deprecated
	gimp_prop_file_entry_new.

2006-06-13  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* menus/image-menu.xml.in: remove strong/weak undo from menu;
	still available using Shift-Ctrl-[ZY].  See bug #144854.

2006-06-13  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/vinvert.c: applied patch from Mukund Sivaraman
	which speeds up the plug-in significantly by using an optimized
	RGB <-> HSV conversion and proper region iterating. Did some more
	cleanups.

2006-06-13  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.h: doubled the size of
	the preview and adapted the dialog layout to the larger preview.

2006-06-12  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	Finally implemented the suggestion in bug #144854, of
	"strong" undo/redo commands that continue undoing so long
	as they only encounter visibility changes.

	* app/actions/edit-actions.c
	* app/actions/edit-commands.c
	* app/actions/edit-commands.h: added "strong undo"
	and "strong redo" commands/actions.

	* app/core/gimpimage-undo.[ch]: added functions
	gimp_image_strong_undo() and gimp_image_strong_redo().

	* app/core/gimpundo.[ch]: added utility function
	gimp_undo_is_weak().

	* app/widgets/gimphelp-ids.h:added id's.

	* menus/image-menu.xml.in: added to edit menu, bound to C-S-z and
	C-S-y.

	This will no doubt need tweaking, but I will consider it
	to fix bug #144854.

2006-06-12  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/gnomeprint.c: try not to distort
	image when printing.  Fixes bug #344547 but this
	plug-in needs a lot more work to be useful.

2006-06-12  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c: don't autoshrink when
	there is no display; fixes crash reported by Carol.

2006-06-12  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c
	* app/tools/gimprectangletool.c: fix three issues identified by
	jimmac: (1) when shift or ctrl are pressed, should start a new
	rect regardless of pointer loc; (2) zoom was incorrectly affecting
	width of sensitive areas; (3) must emit "rectangle-changed" after
	keyboard-driven rectangle movement.

2006-06-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.[ch]: applied patch from
	Joao S. O. Bueno Calligaris that makes the plug-in work on grayscale
	images and makes it override the alpha channel (bug #340771).

2006-06-12  Tor Lillqvist  <tml@novell.com>

	* app/plug-in/gimpenvirontable.c (gimp_environ_table_populate):
	Use g_listenv() and g_getenv() instead of looking at environ
	directly. Fixes breakage on Win32 when any (!) environment
	variable has a non-ASCII value, as environ is in system codepage,
	while we want UTF-8.

2006-06-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/redeye.c (remove_redeye): cleanup, use
	gimp_drawable_mask_intersect(), reduced number of progress updates.

2006-06-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/snoise.c (solid_noise): cleanup, use
	gimp_drawable_mask_intersect(), reduced number of progress updates.

2006-06-12  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpzoompreview.c (gimp_zoom_preview_get_source):
	documentation.

	* plug-ins/common/channel_mixer.c: minor cleanup and loop unrolling.
	Introduced an inline function to avoid code duplication.

2006-06-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/siod-wrapper.c (marshall_proc_db_call):
	removed check for success again; it is being checked in the for()
	loop already.

2006-06-11  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpellipseselecttool.c (gimp_ellipse_select_tool_draw):
	Call gimp_rectangle_tool_draw.

2006-06-11  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c: handle situations
	where the user "flips" the rectangle while modifying it.
	This solution is not perfect, but better than before.

	* app/tools/gimprectangletool.c: remove unneeded variable.

2006-06-11  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleselecttool.c
	* app/tools/gimprectangletool.c: make auto-shrink work.  Does
	the wrong thing for ellipse-select, though.

2006-06-10  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	Following up on previous commit, with assist from yosh.

	* app/tools/gimpnewrectselectoptions.[ch]
	* app/tools/gimpnewrectselecttool.[ch]: removed

	* app/tools/gimprectangleselectoptions.[ch]: magic-moved
	from gimpnewrectselectoptions.[ch]

	* app/tools/gimprectangleselecttool.[ch]: magic-moved
	from gimpnewrectselecttool.[ch]

	* app/tools/Makefile.am
	* app/tools/gimp-tools.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimpellipseselecttool.h
	* app/tools/gimpselectionoptions.c: change file names to
	refer to moved files.

2006-06-10  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	Here is the big change-over, finally.

	* app/tools/gimprectselecttool.[ch]: removed.

	* app/tools/Makefile.am
	* app/tools/gimp-tools.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimpellipseselecttool.h
	* app/tools/gimpnewrectselectoptions.c
	* app/tools/gimpnewrectselectoptions.h
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimpnewrectselecttool.h
	* app/tools/gimpselectionoptions.c
	* app/widgets/gimptoolbox.c
	* menus/image-menu.xml.in: get rid of the "new" in everything
	referring to the new rect select tool, except filenames.  This
	will wait for yosh to perform cvs-magic-foo.

	* app/tools/gimprectangleoptions.[ch]
	* app/tools/gimprectangletool.[ch]: fix a couple of minor
	problems that popped up during testing.

2006-06-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpeditor.c (gimp_editor_add_action_button): simply
	use gimp_button_new() instead of g_object_new(). Don't set the
	"use-stock" property and reordered some code. Keeps GtkButton from
	thinking that is has constructed the button's child itself and
	thus makes the function more rubust against changes in GtkButton.

2006-06-10  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpcroptool.c
	* app/tools/gimpellipseselecttool.c
	* app/tools/gimprectangletool.[ch]: code cleanups

	* app/tools/gimpnewrectselecttool.[ch]: try to do what
	the user intuitively expects when deciding which selection
	operation to perform.  When modifying an existing rectangle,
	always use the operation with which it was created.

2006-06-10  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/siod-wrapper.c (marshall_proc_db_call):
	Additional simplifications for return values by using the same
	code for all INT32 PDB types. Wrong member name was being used
	for INT16 and INT8 return types. Added back if statement that
	was removed but is needed.

2006-06-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpcropoptions.c: clean up code.

	* app/tools/gimpnewrectselecttool.c: really remove some
	commented-out code.

	* app/tools/gimprectangleoptions.[ch]: add "aspect-square"
	and "controls-expanded" properties.  Show "Make square" and
	"Expand from center" in options so that we don't need modifier
	keys to do this.  Place numerical entries inside an expander
	and hide them by default.

2006-06-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/core-enums.[ch]: add GimpAlignReferenceType enum

	* app/core/gimpimage-arrange.c: support using a channel as
	reference for alignment.

	* app/tools/gimpaligntool.[ch]: support aligning with a list item,
	image, selection, active layer, active channel, or active path.
	Now similar in form and function to Inkscape Align/Distribute
	dialog.

2006-06-09  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpfileentry.[ch]: deprecate the GimpFileEntry
	widget, use GtkFileChooserButton instead.

	* libgimpwidgets/gimppatheditor.c: undef GIMP_DISABLE_DEPRECATED
	as long as we are still using GimpFileEntry here.

	* libgimpwidgets/gimppropwidgets.[ch]: removed
	gimp_prop_file_entry_new(); use gimp_prop_file_chooser_button_new()
	instead.

2006-06-09  Sven Neumann  <sven@gimp.org>

	* app/batch.c (batch_run_cmd): formatting.

2006-06-08  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/png.c
	* po/Makefile.in.in: revert changes inintentionally included
	in previous commit.

2006-06-08  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/core-enums.[ch]: add GIMP_ARRANGE_FOO values
	to GimpAlignmentType, and change CENTER to HCENTER,
	MIDDLE to VCENTER.

	* app/core/gimpimage-arrange.c: extensively rewritten
	to handle arrangement of objects, and to do the
	required sorting of lists by offset.

	* app/tools/gimpaligntool.[ch]: added ability to arrange
	groups of layers etc with constant spacing.  Also try
	to change things so that the tool aligns with the
	object that users expect intuitively.

2006-06-08  Simon Budig  <simon@gimp.org>

	* plug-ins/common/sel_gauss.c: fix the EXPAND macro to make
	picky compilers happy. Fixes bug #344326, spotted by
	Eric Lamarque.

2006-06-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/siod-wrapper.c (marshall_proc_db_call):
	simplified quite a bit by using the same code for all INT32 PDB
	types.

2006-06-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-console.c (script_fu_eval_run):
	in case of an error, output the SIOD error message to stderr.

	* plug-ins/script-fu/siod-wrapper.c: minor cleanup.

2006-06-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/siod-wrapper.c: allow CSS color keywords to
	be used in place of the '(r g b) color notation.

	* plug-ins/script-fu/scripts/test-sphere.scm: documented this new
	feature.

	* plug-ins/script-fu/scripts/*.scm: replaced some colors with
	color names.

2006-06-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c (menu_popup): do not use
	gtk_menu_attach_to_widget() but gtk_menu_set_screen(). Menus don't
	like to be attached multiple times.

2006-06-07  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpimage-arrange.[ch]: added, utility function for
	aligning and arranging things in an image.

	* app/core/gimpitem-align.[ch}: removed, no longer needed.

	* app/core/gimpimage-item-list.[ch] (gimp_image_item_list_align):
	removed this function, no longer used.

	* app/core/Makefile.am: changes described above.

	* app/core/gimpguide.c: remove bit of cruft left accidentally.

	* app/tools/gimpalignoptions.[ch]: remove "alignment type"
	option, not needed at this point.

	* app/tools/gimpaligntool.[ch]: numerous changes, most
	importantly ability to align guides, and use them for
	alignment.  More work coming on this tool.

2006-06-07  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpguide.[ch]: add "removed" signal and associated
	paraphernalia.

	* app/core/gimpimage-guides.c (gimp_image_remove_guide): call
	gimp_guide_removed() to cause signal emission.

2006-06-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpnewrectselecttool.c: removed extra semicolon to
	fix build on Solaris (bug #344203).

2006-06-07  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/display/gimpdisplayshell.c (gimp_display_shell_expose_guide):
	fix typo, s/get_position/get_orientation/.

2006-06-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpguide.c: removed unused includes and property blurbs;
	fixed registration of the "id" property, it is not a GIMP_CONFIG
	property.

2006-06-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpguide.[ch]: added gimp_guide_get_ID().

	* app/core/gimpimage-crop.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-flip.c
	* app/core/gimpimage-guides.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-rotate.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage-snap.c
	* app/core/gimpimage-undo-push.c
	* app/display/gimpdisplayshell-draw.c
	* app/display/gimpdisplayshell.c
	* app/tools/gimpmovetool.c
	* app/xcf/xcf-save.c
	* tools/pdbgen/pdb/guides.pdb: use accessors instead of accessing
	GimpGuide's struct members directly.

	* app/pdb/guides_cmds.c: regenerated.

2006-06-07  Sven Neumann  <sven@gimp.org>

	* app/actions/error-console-actions.c:
	* app/actions/error-console-commands.[ch]
	* app/widgets/gimphelp-ids.h
	* menus/error-console-menu.xml: added "select-all" action as
	suggested in bug #328838.

2006-06-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpguide.[ch]: added a setter for "orientation".

	* app/core/gimpimage-resize.c (gimp_image_resize_with_layers):
	removed unused variable; use for() loops to iterate over guides
	and sample points.

2006-06-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpguide.[ch]: derive from GObject, we don't need any
	GimpObject functionality here.  Declare "orientation" and "id"
	properties CONSTRUCT_ONLY, added a gimp_guide_new() function and
	emit notify on position changes.

	* app/core/gimpimage-guides.c: use gimp_guide_new() to instantiate
	guides.

	* app/core/gimpimage.c (gimp_image_get_memsize): formatting.

2006-06-07  Michael Natterer  <mitch@gimp.org>

	* app/actions/context-commands.c: cosmetic cleanup.

	* app/core/core-types.h: move the GimpGuide typedef to the
	"misc objects" section.

	* app/tools/gimpforegroundselecttool.c: cosmetic cleanup.

	* app/tools/gimpmeasuretool.c (gimp_measure_tool_cursor_update):
	use the new corner and side cursors instead of using X cursors.

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): renamed local variable
	"update_cursor" to "update_sw_cursor", it has confused me too
	often...

2006-06-07  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpguide.[ch]: new files, implementing GimpGuide as a
	GimpObject

	* app/core/Makefile.am: add new files as sources

	* app/core/gimpimage-guides.[ch]: use the new object instead of
	defining GimpGuide here as a struct.

	* app/core/gimpimage-crop.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-flip.c
	* app/core/gimpimage-resize.c
	* app/core/gimpimage-rotate.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage-snap.c
	* app/core/gimpimage-undo-push.c
	* app/core/gimpimage.c
	* app/display/gimpdisplayshell-draw.c
	* app/display/gimpdisplayshell.c
	* app/tools/gimpmovetool.c
	* app/xcf/xcf-save.c
	* tools/pdbgen/pdb/guides.pdb: include "core/gimpguide.h", and use
	g_object_ref/unref instead of gimp_image_guide_ref/unref.

	* app/pdb/guides_cmds.c: regenerated.

2006-06-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_initialize):
	initialize guide with the option's guide value.
	(gimp_rectangle_tool_notify_guide): always sync with the option's
	guide value, even when tool->display is NULL.

2006-06-06  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimprectangle.c: added guide notification.

2006-06-06  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_draw): removed
	unused variable; other cleanups.

2006-06-06  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimprectangletool.c: cleanup, moved the guide drawing
	to a utility function.

2006-06-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c: minor cleanup, plugged a
	tiny memleak in script_fu_find_scripts().

2006-06-06  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectangletool.c
	(gimp_rectangle_tool_notify_highlight): minor cleanup.

2006-06-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.[ch]
	* plug-ins/script-fu/script-fu.c (script_fu_refresh_proc): applied
	a modified patch from Kevin Cozens.  Fixes bug #330981.

2006-06-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/decompose.c: applied a modified patch from
	Clarence Risher that adds support for a registration color
	(bug #338049).

2006-06-06  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/gimpcolorspace.[ch] (gimp_rgb_to_hsv4): added a
	const qualifier.

2006-06-06  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpnewrectselecttool.c
	(gimp_new_rect_select_tool_cancel)
	(gimp_new_rect_select_tool_rectangle_changed): flush the image
	after changing it.

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_halt): don't
	flush it here.

2006-06-06  Sven Neumann  <sven@gimp.org>

	* app/actions/select-commands.c: minor cleanup.

2006-06-05  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/paint-funcs/scale-funcs.c (scale_region_lanczos):
	fix variable declarations accidentally changed from gdouble
	to gint in revision 1.7; fixes bug #343804.

2006-06-06  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version to 2.3.10.

2006-06-05  Sven Neumann  <sven@gimp.org>

	* Made 2.3.9 development release.

2006-06-05  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpdrawtool.c
	(gimp_draw_tool_draw_rectangle_by_anchor)
	(gimp_draw_tool_draw_arc_by_anchor): subtract 1 from outlined
	width/height instead of adding 1 to filled.

2006-06-05  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_draw): use
	GimpDrawTool API, not GimpCanvas one. Some cleanup.

2006-06-05  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/selection.pdb: fixed documentation of
	gimp-selection-sharpen (bug #343911).

	* libgimp/gimpselection_pdb.c: regenerated.

2006-06-05  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]
	* app/core/gimpchannel.[ch]
	* app/core/gimpselection.c:
	* app/actions/select-commands.c: further cleaned up the patch from
	bug #88633.

2006-06-05  Karine Delvare  <edhel@gimp.org>

	* app/tools/tools-enums.[ch]: added GimpRectangleGuide enum.

	* app/tools/gimpcropoptions.c
	* app/tools/gimprectangleoptions.[ch]
	* app/tools/gimprectangletool.c: added GimpRectangleGuide option to
	draw guides inside the rectangle. Fixes bug #323669.

2006-06-05  Michael Natterer  <mitch@gimp.org>

	Applied slightly modified patch from saulgoode which allows to
	border a selection without feathering. Fixes bug #88633.

	* app/paint-funcs/paint-funcs.[ch] (border_region): added boolean
	"feather_border" parameter.

	* app/core/gimpchannel.[ch]: GimpChannel::border(): ditto.

	* app/core/gimpselection.c: changed accordingly.

	* app/actions/select-commands.c: added a toggle to the border
	dialog and pass it to gimp_channel_border().

	* tools/pdbgen/pdb/selection.pdb: pass TRUE here.

	* app/pdb/selection_cmds.c: regenerated.

2006-06-05  Michael Natterer  <mitch@gimp.org>

	* app/tools/tools-enums.[ch]: removed enum GimpRectangleMode.

	* app/tools/gimprectangletool.[ch]: added virtual function
	GimpRectangleTool::cancel(). Added public wrapper for it. Removed
	coordinates paramaters from gimp_rectangle_tool_execute(). Removed
	gimp_rectangle_tool_response(), need to call either execute() or
	cancel() now. Added gimp_rectangle_tool_halt() which disconnects
	the tool from the display without canceling it.

	* app/tools/gimpcroptool.c: changed accordingly.

	* app/tools/gimpnewrectselecttool.c: moved the rectangle creating
	code from the execute() implementation to the new function
	gimp_new_rect_select_tool_rect_select(). Added cancel()
	implementation which pops the remembered undo step if
	appropriate. Call the new rect_select() wrapper from
	rectangle_changed() so we don't create the rectangle on both
	button_release *and* execute(), breaking modifiers and stuff.

2006-06-05  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c (splash_create): connect to "expose-event" with
	G_SIGNAL_CONNECT_AFTER so that the text is rendered on the image.

2006-06-05  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: added back support for animated splashes but
	continue to use the optimized code for static splash images.

2006-06-05  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-user-install.[ch]
	* app/app_procs.c: always migrate old user settings during user
	installation.

	* app/dialogs/user-install-dialog.[ch]: don't ask questions and
	only show the dialog in case of an error.

2006-06-05  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectangletool.c: formatting.

2006-06-04  Seth Burgess <sjburges@gimp.org>

	* plug-ins/common/png.c: fixed file_png_set_defaults; wrong # of
	  return values, missing "set" if/else set, wrong set param count,
	  and off by one error in the parameter indexes.  Thanks to Kevin
	  on helping track these down.

2006-06-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c:
	* app/tools/gimpnewrectselecttool.c: enable canceling of
	current action by holding down mouse button 3.

2006-06-04  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpscaletool.c (gimp_scale_tool_size_notify):
	strcmp() the property name, so we don't change the size on random
	property changes. Fixes the tool reverting to the previous
	width/height on each new transform (destroying the previous size
	box causes it to emit stuff like "notify::visible").

	(gimp_scale_tool_prepare): additionally, disconnect from the size
	box before destroying it (paranoia).

2006-06-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpnewrectselectoptions.c: turn highlighting off by
	default.

2006-06-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_draw):
	draw anchors in corners; clean up code a bit.

	* app/tools/gimpnewrectselecttool.c: actually remove some code
	previously commented out.

2006-06-04  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppropwidgets.c
	(gimp_prop_file_chooser_button_callback): fix typo so the "notify"
	signal doesn't stay blocked.

	* app/dialogs/preferences-dialog.c: added "Reset" button which
	resets all prefs values to their defaults. Fixes bug #342112.

2006-06-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.[ch]: add new signal
	"rectangle-changed" and method rectangle_changed.
	Emit them on button release and when dimensions are
	changed in controls.

	* app/tools/gimpnewrectselecttool.c: use rectangle_changed
	method to change selection, undoing previous change if
	necessary.

2006-06-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpthumbbox.c (gimp_thumb_box_new): changed
	mnemonic from "_Preview" to "Pr_eview" because the GTK+ HEAD
	file chooser has a "_Places" mnemonic now.

	* app/widgets/gimpcomponenteditor.c: minor cleanup.

2006-06-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolorframe.c (gimp_color_frame_set_color): use
	gimp_rgba_distance() instead of gimp_rgb_distance(), so alpha
	changes update the color frame too.

2006-06-03  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.[ch]: renamed
	gimp_image_coords_in_active_drawable() to
	gimp_image_coords_in_active_pickable() and added boolean
	"sample_merged" and "selected_only" parameters. Use floor()
	instead of ROUND(), we want to round to the actual pixel, not to
	the nearest pixel boundary.

	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolortool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimptransformtool.c: changed accordingly. Removed
	quite some duplicated code which checked sample_merged and the
	mask value at the cursor location.

	* app/tools/gimpbycolorselecttool.c: use the hand tool cursor,
	there's also a hand in the toolbox icon. Fixed cursor_update()
	function to set the bad modifier when there is no pickable pixel
	at the cursor loction.

	* app/tools/gimpfuzzyselecttool.c: added cursor_update()
	implementation which does the same as by_color_select's one.

	* app/tools/gimpselectiontool.c
	(gimp_selection_tool_cursor_update): don't override the bad
	modifier which was set by a subclass' cursor_update().

2006-06-03  Michael Natterer  <mitch@gimp.org>

	Make better use of the available 32x32 pixels so the cursors look
	less crowded:

	* cursors/cursor-corner-*.png
	* cursors/cursor-side-*.png
	* cursors/xbm/cursor-corner-*.xbm
	* cursors/xbm/cursor-side-*.xbm: made the crosshair lines one
	pixel longer.

	* cursors/modifier-join.png
	* cursors/modifier-pattern.png
	* cursors/xbm/modifier-join-mask.xbm
	* cursors/xbm/modifier-join.xbm
	* cursors/xbm/modifier-pattern-mask.xbm
	* cursors/xbm/modifier-pattern.xbm: moved one pixel to the right.

	* cursors/tool-*.png
	* cursors/xbm/tool-*.png: moved closer to the bottom right corner.

	* cursors/gimp-tool-cursors.xcf: ditto.

2006-06-03  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpnewrectselecttool.c
	(gimp_new_rect_select_tool_button_press): check for function ==
	INACTIVE, not CREATING || EXECUTING when checking whether to start
	moving.

	* app/tools/gimpselectiontool.c (gimp_selection_tool_oper_update):
	changed modifiers so alt+ctrl does cut+float+move and alt+shift
	does copy+float+move.

2006-06-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: move statically declared
	variables into "private" struct.

2006-06-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpbase/Makefile.am: include gimpcpuaccel.h in
	libgimpbaseinclude_HEADERS; missed in Sven's changes.

2006-06-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpnewrectselecttool.[ch]: use RECT_INACTIVE state,
	(but doesn't seem to do anything).  More importantly, change
	logic so that button_release executes the tool, and button
	release undo's if appropriate.

2006-06-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.[ch]: add new function RECT_INACTIVE
	for cases where no rectangle exists.  This may take some
	tweaking to get right.

2006-06-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_button_press):
	if function is RECT_CREATING, start a new rectangle.

	* app/tools/gimpnewrectselecttool.c: remove g_printerr statement that
	mitch added for debugging.

2006-06-02  Michael Natterer  <mitch@gimp.org>

	* cursors/Makefile.am
	* cursors/cursor-corner-bottom-left.png
	* cursors/cursor-corner-bottom-right.png
	* cursors/cursor-corner-top-left.png
	* cursors/cursor-corner-top-right.png
	* cursors/cursor-side-bottom.png
	* cursors/cursor-side-left.png
	* cursors/cursor-side-right.png
	* cursors/cursor-side-top.png
	* cursors/xbm/cursor-corner-bottom-left-mask.xbm
	* cursors/xbm/cursor-corner-bottom-left.xbm
	* cursors/xbm/cursor-corner-bottom-right-mask.xbm
	* cursors/xbm/cursor-corner-bottom-right.xbm
	* cursors/xbm/cursor-corner-top-left-mask.xbm
	* cursors/xbm/cursor-corner-top-left.xbm
	* cursors/xbm/cursor-corner-top-right-mask.xbm
	* cursors/xbm/cursor-corner-top-right.xbm
	* cursors/xbm/cursor-side-bottom-mask.xbm
	* cursors/xbm/cursor-side-bottom.xbm
	* cursors/xbm/cursor-side-left-mask.xbm
	* cursors/xbm/cursor-side-left.xbm
	* cursors/xbm/cursor-side-right-mask.xbm
	* cursors/xbm/cursor-side-right.xbm
	* cursors/xbm/cursor-side-top-mask.xbm
	* cursors/xbm/cursor-side-top.xbm: new cursors for edge and corner
	resizing. They perfectly align with the small crosshair and can be
	used together with tool cursors and cursor modifiers.

	* cursors/gimp-tool-cursors.xcf: add them here too.

	* app/widgets/widgets-enums.h: add them to the GimpCursorType enum.

	* app/widgets/gimpcursor.c: add them here too.

	* app/display/gimpdisplayshell-cursor.c: treat them like the small
	crosshair (don't replace them by the small crosshair but use them
	as-is). Also allow the bad modifier with the large crosshair.

	* app/tools/gimprectangletool.c
	(gimp_rectangle_tool_cursor_update): use the new cursors. Don't
	call gimp_tool_set_cursor() here.

	(gimp_rectangle_tool_response): reset "function" to RECT_CREATING
	when resetting the tool.

	* app/tools/gimpselectiontool.[ch] (struct GimpSelectionTool):
	added boolean member "allow_move" which defalts to TRUE.

	(gimp_selection_tool_oper_update): don't move masks, floating
	selections or anything when "allow_move" is FALSE. Changed
	behavior of click inside a selection to simply create a new
	selection, need to press alt+shift now to drag-float the
	selection. Please test this, it's a pretty fundamental change!

	(gimp_selection_tool_cursor_update): use the tool's configured
	cursor instead of always GIMP_CURSOR_MOUSE, so this function can
	be called after gimp_rectangle_tool_cursor_update() to add the
	plus, minus etc. modifiers.

	* app/tools/gimpnewrectselecttool.c: implement
	GimpTool::cursor_update() and call
	gimp_rectangle_tool_cursor_update() from there. Chain up to get
	the plus, minus etc. modifiers added.

	Re-enble selection moving:

	(gimp_new_rect_select_tool_oper_update): set GimpSelectionTool's
	"allow_move" to FALSE unless the rectangle tool is in an idle
	state.

	(gimp_new_rect_select_tool_button_press): allow a selection moving
	to be started if the rectangle tool is idle. Fall back to starting
	a rect select if gimp_selection_tool_start_edit() returned FALSE.

2006-06-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mkgen.pl: always look at $plugins{$_}->{cflags}.

	* plug-ins/common/plugin-defs.pl: use MMX_EXTRA_CFLAGS for the
	selective gaussian blur plug-in.

	* plug-ins/common/Makefile.am: regenerated.

2006-06-02  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpparasite.[ch]: hide the GimpParamSpecParasite
	struct like we do with other custom param specs.

2006-06-02  Sven Neumann  <sven@gimp.org>

	* libgimp/gimp.[ch]
	* libgimp/gimp.def: removed gimp_use_cpu_accel() again. libgimp
	handles this transparently by calling gimp_cpu_accel_set_use().

2006-06-02  Sven Neumann  <sven@gimp.org>

	* app/composite/gimp-composite.c (gimp_composite_use_cpu_accel):
	need to test for GIMP_COMPOSITE_OPTION_NOEXTENSIONS.

	* libgimp/gimp.c (gimp_config): call gimp_cpu_accel_set_use() from
	here, not in gimp_main().

	* plug-ins/common/sel_gauss.c: applied patch from Loren Merritt
	that adds MMX code to boost the plug-in speed (bug #342860).

2006-06-02  Sven Neumann  <sven@gimp.org>

	Moved the CPU detection code to libgimpbase (see bug #342860):

	* app/base/Makefile.am
	* app/base/cpu-accel.[ch]
	* app/base/test-cpu-accel.c: removed here...

	* libgimpbase/Makefile.am
	* libgimpbase/gimpbase.h
	* libgimpbase/gimpcpuaccel.[ch]

	* libgimpbase/test-cpu-accel.c: ... and added here again with
	some API changes.

	* app/composite/Makefile.am
	* app/composite/make-installer.py: changed accordingly.

	* app/composite/gimp-composite-*-installer.c: regenerated.

	* libgimp/gimp.c (gimp_main): call gimp_set_use_cpu_accel().

	* libgimpbase/gimpbase.def: updated.

2006-06-01  Michael Natterer  <mitch@gimp.org>

	* cursors/Makefile.am
	* cursors/modifier-bad.png
	* cursors/xbm/modifier-bad-mask.xbm
	* cursors/xbm/modifier-bad.xbm: new "bad" cursor modifier.
	Replaces the "bad" cursor.

	* cursors/gimp-tool-cursors.xcf: added it here too.

	* app/widgets/widgets-enums.h: added GIMP_CURSOR_MODIFIER_BAD.

	* app/widgets/gimpcursor.c: add the bad modifier. Leave the bad
	cursor there for now.

	* app/display/gimpdisplayshell-callbacks.c
	* app/tools/gimpaligntool.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolortool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c: use the modifier instead of the
	cursor. Fixes hotspot jumping when switching between normal and
	bad cursors. The changed cursor_update() functions even make more
	sense IMHO. Fixes bug #158407.

2006-06-01  Sven Neumann  <sven@gimp.org>

	Added basic framework for plug-ins to access the use_cpu_accel
	configuration (bug #342860):

	* app/composite/gimp-composite.[ch]: added new function
	gimp_composite_use_cpu_accel().

	* libgimpbase/gimpprotocol.[ch]: added use_cpu_accel to the config
	message.

	* app/plug-in/gimppluginmanager-call.c: pass the return value of
	gimp_composite_use_cpu_accel() for config.use_cpu_accel.

	* libgimp/gimp.[ch]: make the config value accessible by means of
	a new function gimp_use_cpu_accel().

	* libgimp/gimp.def: updated.

2006-06-01  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sel_gauss.c: applied patch from Loren Merritt
	that replaces the floating-point implementation of selective
	gaussian blur with a fixed-point version (bug #342860).

2006-05-31  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.[ch]: add "constrain" property to
	specify whether to clip at image bounds when computing dimensions.

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c: set "constrain" to TRUE.

	* app/tools/gimpellipseselecttool.c: set "constrain" to FALSE.

	Hopefully fixes bug #329817.

2006-05-31  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorscale.c: removed #define SHADOW 1, it's
	not a constant value. Use the GtkRange::trough-border style
	property instead.

2006-05-30  Raphaël Quinet  <raphael@gimp.org>

	* plug-ins/metadata/xmp-parse.c: protect against broken XMP blocks
	using rdf:Alt instead of rdf:Seq.  Fixes bug #343315.

	* plug-ins/metadata/xmpdump.c (main): call g_set_prgname() to get
	better messages from glib.

	* data/images/gimp-splash.png: new splash screen, waiting for the
	old animation feature to be restored.

2006-05-30  Michael Natterer  <mitch@gimp.org>

	Honor active components when pasting. Fixes bug #150845:

	* app/core/gimplayer-floating-sel.c (floating_sel_composite):
	don't temporarily set all image components to active while
	compositing.

	* app/core/gimpimage.c (gimp_image_set_component_active):
	relax()/rigor() the floating selection around setting the "active"
	flag. Also make sure the projection is updated correctly.

2006-05-30  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdataeditor.c (gimp_data_editor_name_activate)
	* app/widgets/gimpdatafactoryview.c
	(gimp_data_factory_view_tree_name_edited): strip the newly
	entered name from whitespace and reject empty names.

2006-05-30  Manish Singh  <yosh@gimp.org>

	* app/batch.c (batch_run): GIMP_BATCH_INTERPRETER can be set in
	the environment to override the default batch interpreter procedure.

	* plug-ins/pygimp/plug-ins/happy-valley-relief.py: basic python
	code evaluator function.

	* plug-ins/pygimp/plug-ins/Makefile.am: add above file.

2006-05-30  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpfu.py: Other code places should allow
	menu paths to be None too.

2006-05-30  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpfu.py: Allow menu paths to be None.

2006-05-30  Manish Singh  <yosh@gimp.org>

	* app/file/gimprecentlist.c: #define _GNU_SOURCE instead of
	_SVID_SOURCE, so we get all the declarations we need. Fixes
	bug #342390.

2006-05-29  Manish Singh  <yosh@gimp.org>

	* libgimpwidgets/gimpchainbutton.c
	* libgimpwidgets/gimppixmap.c: #include "config.h"

2006-05-29  Manish Singh  <yosh@gimp.org>

	* app/errors.c
	* app/main.c
	* app/file/gimprecentlist.c
	* libgimp/gimp.c
	* libgimpbase/gimpsignal.c
	* modules/cdisplay_lcms.c
	* modules/cdisplay_proof.c
	* modules/controller_midi.c
	* plug-ins/common/gqbist.c
	* plug-ins/metadata/xmp-schemas.h: miscellaneous fixes for building
	with -ansi -pedantic. Mostly #define _FOO_SOURCE stuff. Thanks to
	Daniel Richard G. for the patch. Fixes bug #342390.

2006-05-30  Tor Lillqvist  <tml@novell.com>

	* libgimpwidgets/gimpwidgets.def: Sync.

2006-05-29  Sven Neumann  <sven@gimp.org>

	* configure.in: use PANGO_DISABLE_DEPRECATED for pango < 0.13.0.

	* app/text/gimptext-vectors.c: added const qualifiers to the
	FT_Vector parameters of the FT_Outline_Funcs.

2006-05-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdialogfactory.c
	(gimp_dialog_factory_dialog_new_internal): code cleanup; only call
	gtk_window_present() if called with present == TRUE.

2006-05-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushgenerated.c (gimp_brush_generated_load): don't
	choke on brush files with empty names (bug #343140).
	(gimp_brush_generated_save): warn about brushes with empty names.

2006-05-29  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdock.c (gimp_dock_key_press_event): make sure
	that text widgets get all key events first. Fixes bug #301006.

2006-05-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-server.c: suppress progress popups
	by installing progress handlers that do nothing (bug #317498).

	* plug-ins/script-fu/script-fu-interface.c: formatting.

2006-05-29  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/channel.pdb (channel_combine_masks): push a
	channel undo. Fixes bug #343026.

	* app/pdb/channel_cmds.c: regenerated.

2006-05-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/presets.c: check for NULL before using a
	string pointer. Fixes bug #343121.

2006-05-28  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/pnm.c: applied patch from Martin Collins which
	adds PBM (bitmap) support. Fixes bug #167578. Did some additional
	cleanups and sprinkled some gimp_progress_update(1.0).

2006-05-28  Michael Natterer  <mitch@gimp.org>

	Applied patch from David Gowers which adds actions to select
	palette and colormap colors. Modified the patch quite a bit.
	Fixes bug #130123.

	* app/widgets/gimpcolormapeditor.[ch]
	* app/widgets/gimppaletteeditor.[ch]: add functions get_index()
	which gets the currently selected color's index (optionally the
	index of a passed color), set_index() which sets the selected
	color by index, and max_index() which returns the maximum possible
	color index.

	* app/dialogs/dialogs-constructors.c: changed accordingly.

	* app/actions/context-actions.c
	* app/actions/context-commands.[ch]: actions and callbacks which
	use the new functions.

2006-05-28  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/script-fu/scripts/reverse-layers.scm: revert
	previous change: allow layers without alpha to be moved up.

2006-05-28  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppalette-import.[ch]: added support for extracting
	colors from the selected pixels only.

	* app/dialogs/palette-import-dialog.c: added "Sample merged" and
	"Selected Pixels only" toggles. Fixes bug #316212. Cleaned up the
	code quite a bit.

2006-05-28  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcolorpickertool.c (gimp_color_picker_tool_picked):
	removed all code except info dialog updating and chain up instead.

	* app/tools/gimpcolortool.c (gimp_color_tool_real_picked): newly
	added default implementation. Also updates the colormap dialog and
	picks into a palette.

	* app/tools/gimppainttool.c (gimp_paint_tool_color_picked):
	removed. The default impl. does this and much more now. Hopefully
	fixes bug #320660.

2006-05-27  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/script-fu/scripts/reverse-layers.scm: if any layers
        are opaque, make them transparent when reversing. Current CVS
        allows moving opaque layers above the bottom, but that might change.

2006-05-27  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-crop.c (gimp_image_crop_guess_bgcolor):
	remove code duplication, cleanup.

2006-05-27  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.h: fix spacing broken by tab removal.

2006-05-27  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/enumcode.pl: cast the return value of
	gimp_enums_get_type_names() to (const gchar **) to fix compiler
	warning.

	* libgimp/gimpenums.c.tail: regenerated.

2006-05-26  Manish Singh  <yosh@gimp.org>

	* gimp.pc.in: define datarootdir, so we work with newer autoconf.

2006-05-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/reverse-layers.scm: new script from
	Akkana Peck which reverses the layers in an image.

2006-05-26  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/dicom.c: applied patch from Dov Grobgeld
	with several fixes for dicom loading, fixes bug #163256.

2006-05-26  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/palette-import-dialog.c: set the "Number of colors"
	and "Interval" widgets insensitive for indexed images.
	Fixes bug #342970.

2006-05-24  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/png.c: moved "Load defaults" and "Save defaults"
	buttons to a separate line. Fixes bug #310291.

2006-05-24  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/jpeg/gimpexif.c
	* plug-ins/jpeg/jpeg-load.c
	* plug-ins/jpeg/jpeg-save.h
	* plug-ins/jpeg/jpeg.c
	* plug-ins/jpeg/jpeg.h: fix multiply-defined linker symbols;
	fixes bug #342456.

2006-05-24  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/copy-visible.scm: use canonical
	procedure names in the help string.

2006-05-24  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h (SWAP_PATH_BLURB, TEMP_PATH_BLURB):
	use "folder" in place of "directory".

	* app/dialogs/preferences-dialog.c: use GtkFileChooserButtons for
	the "swap-path" and "temp-path" preferences and a simple GtkEntry
	for the "web-browser" preference.

	* modules/cdisplay_proof.c: use a GtkFileChooserButton instead of
	a GimpFileEntry widget.

2006-05-24  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontext.c (gimp_context_tool_list_thaw): the
	default tool is the paintbrush, not rect select.

	* app/tools/gimp-tools.c (gimp_tools_register): attach the default
	visibility state to the tool_info.

	* app/actions/tools-commands.c (tools_reset_cmd_callback): use the
	attached boolean instead of reimplementing the default visibility
	logic.

2006-05-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/raw.c (load_dialog): use a GtkFileChooserButton
	instead of a GimpFileEntry widget.

	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-types.h: use GtkFileChooserButton
	for SF_FILENAME and SF_DIRNAME parameters.

2006-05-24  Sven Neumann  <sven@gimp.org>

	* app/dialogs/palette-import-dialog.c: use a GtkFileChooserButton
	instead of a GimpFileEntry widget.

	* data/palettes/Tango.gpl (Name): removed "Palette" from name.

2006-05-24  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppatheditor.[ch]: renamed a parameter, updated
	gtk-doc comment.

2006-05-24  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpfileentry.c: use GTK_STOCK_OPEN instead of
	"..."  to label the "Browse" button. This makes the widget more
	similar to the GtkFileChooserButton and addresses bug #342749.

2006-05-24  Michael Natterer  <mitch@gimp.org>

	* app/pdb/gimppdb.c (gimp_pdb_real_register_procedure)
	(gimp_pdb_real_unregister_procedure): use g_hash_table_replace()
	instead of g_hash_table_insert() and make sure the used key is
	always the name of the first procedure in the list.
	Fixes bug #342578.

	(It's actually a miracle that only the PDB browser crashed, and
	not GIMP, since we were using pointers to g_free()'d memory as
	keys when different plug-ins registered procedures with the same
	name)

2006-05-23  Sven Neumann  <sven@gimp.org>

	* configure.in: improved output for missing libasound.

2006-05-23  Michael Natterer  <mitch@gimp.org>

	Fix for bug #333156:

	* app/paint-funcs/paint-funcs-types.h (enum CombinationMode):
	added value COMBINE_INTEN_A_INDEXED.

	* app/paint-funcs/paint-funcs.c
	(combine_inten_a_and_indexed_pixels): new function which
	implements the new CombinationMode.

	(combine_sub_region)
	(combine_regions): added the needed bits to call the new function.

	* app/core/gimpprojection-construct.c (project_indexed): added
	mask PixelRegion parameter since that's supported by paint-funcs
	now, replaced g_warning() about unimplemented combine type
	by call to combine_regions(..., COMBINE_INTEN_A_INDEXED).

	(gimp_projection_construct_layers): pass the mask to
	project_indexed() and removed comments about not supporting it.

2006-05-23  Karine Delvare  <edhel@gimp.org>

	* app/core/gimpcontext.c
	* app/tools/gimp-tools.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectselecttool.c
	* app/widgets/gimptoolbox.c
	* menus/image-menu.xml.in: replace old rect select by new in the
	toolbox.

2006-05-23  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.[ch]: eek, I broke the build.

2006-05-23  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c: revert rect select execution on
	leaving, revert auto-conversion to selection.

2006-05-23  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimpnewrectselecttool.c: don't execute
	gimp_rectangle_tool_response() twice. Fixes bug #342506.

2006-05-23  Sven Neumann  <sven@gimp.org>

	It makes more sense to have GimpData::dirty indicate a name change
	than to invalidate the previews whenever the name changes.

	* app/core/gimpdata.c: call gimp_object_name_changed() from
	gimp_data_real_dirty() instead of implementing
	GimpObject::name-changed and calling gimp_data_dirty() from there.

	* app/core/gimpbrushclipboard.c
	* app/core/gimppalette.c
	* app/core/gimppatternclipboard.c: call gimp_data_dirty() in place
	of gimp_object_name_changed().

	* app/core/gimpbrushgenerated.c (gimp_brush_generated_dirty):
	chain up unconditionally.

2006-05-23  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: add the drawable's offset
	to the x and y returned by gimp_drawable_mask_intersect() because
	all transform functions expect image coordinates.
	Fixes bug #342548.

	* app/pdb/drawable_transform_cmds.c
	* app/pdb/transform_tools_cmds.c: regenerated.

2006-05-23  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptransformtool.c (gimp_transform_tool_dialog_update):
	don't call the virtual function if there is no dialog.

	(gimp_transform_tool_recalc): show the dialog here after updating it.

	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c (dialog_update): don't show it here.

2006-05-22  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppainttool.c (gimp_paint_tool_control): remove
	some #if 0'ed cruft.

2006-05-22  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.[ch]: re-apply heavily modified patch
	from Michael Schumacher which shows the clone source even while
	not painting. Fixes bug #324224. Did some additional cleanup.

2006-05-22 Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/png.c: fix remapping of colors when
	saving IndexedA images; fixes bug #303864.

2006-05-22  Sven Neumann  <sven@gimp.org>

	* app/actions/plug-in-commands.c (plug_in_collect_image_args):
	removed debugging output.

	* app/tools/gimpscaletool.c: create the GimpSizeBox in the
	prepare() method to make entering relative sizes work.

2006-05-22  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpscaletool.c (gimp_scale_tool_prepare): initialize
	width, height and keep-aspect properties of the size box.

2006-05-22  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c: revert previous change. Tools must
	not do anything essential in cursor_update(), and poking in the
	GimpClone struct is a bad hack. Will look into this.

2006-05-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpclonetool.c:  apply patch from Michael
	Schumacher to show clone source even while not
	painting; fixes bug #324224.

2006-05-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/tools-enums.h (enum GimpToolAction): prefix with
	GIMP_TOOL_ACTION_

	* app/display/gimpdisplay.c
	* app/display/gimpdisplayshell.c
	* app/tools/gimpaligntool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcolortool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpdrawtool.c
	* app/tools/gimpforegroundselecttool.c
	* app/tools/gimpfreeselecttool.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimppainttool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimptexttool.c
	* app/tools/gimptool.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c
	* app/tools/tool_manager.c: changed accordingly. Introduce a
	common style for GimpTool::control()'s switch() block. Some
	minor cleanups.

2006-05-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/tool_manager.c (tool_manager_image_clean_dirty): don't
	try to reset the active tool by destroying and re-creating it
	because this doesn't work while gimp->busy is TRUE. Call
	tool_manager_control_active(HALT) instead, which is the right way
	to do it anyway. Fixes bug #330083.

	Sprinkled some local variables all over the place to get rid of a
	gazillion tool_manager->active_tool.

2006-05-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpaligntool.c: get rid of "dispose" method, use
	tool-control-halt to shut things down instead.

2006-05-21  Michael Natterer  <mitch@gimp.org>

	One of the following changes fixes a crash on exit when there is a
	cut buffer and a clipboard manager is runnig. I don't care which,
	since they are all the right thing to do:

	* app/widgets/gimpdialogfactory.c (gimp_dialog_factory_finalize):
	don't remove the factory from the hash table of all factories here...

	(gimp_dialog_factory_dispose): ...but here. Use the right key for
	the toolbox factory.

	(gimp_dialog_factories_set_busy)
	(gimp_dialog_factories_unset_busy): check the return value of
	g_type_class_ref() before using it.

	Unrelated:

	(gimp_dialog_factory_dispose): free the list of open dialogs here,
	not in dispose(). Don't leak all the factory's session infos.

2006-05-21  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpimage-item-list.[ch]: new files with functions to
	translate, flip, rotate, transform and align a list of items
	inside an undo group.

	(gimp_image_item_list_get_list): returns a list of items matching
	any combination of GimpItemTypeMask and GimpItemSet.

	* app/core/gimpitem.[ch]: added new function gimp_item_is_in_set().

	* app/core/gimpitem-linked.[ch]: use the new functions. Removed
	gimp_item_linked_get_list().

	* app/tools/gimpeditselectiontool.c: use
	gimp_image_item_list_get_list() instead of
	gimp_item_linked_get_list().

	* app/core/gimpimage-resize.c
	* app/tools/gimpaligntool.c: use the new functions instead of
	creating and iterating the lists manually.

2006-05-20  Manish Singh  <yosh@gimp.org>

	Fixes to address -ansi -pedantic compilation (bug #342390).
	Thanks goes to Daniel Richard G. for noticing and suggesting
	fixes.

	* libgimpbase/gimpsignal.c: #include "config.h" and define
	__POSIX_SOURCE for sigaction stuff.

	* app/base/tile-swap.c (tile_swap_test): use more portable
	S_IRUSR and S_IWUSR, instead of S_IREAD and S_IWRITE.

	* plug-ins/common/ripple.c
	* plug-ins/imagemap/imap_main.c: use C89 comments.

	* plug-ins/Lighting/lighting_preview.h: don't define spin widget
	variables here...

	* plug-ins/Lighting/lighting_ui.[ch]: ... and instead take care
	of them here.

2006-05-19  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpwidgets/gimpwidgets.c (gimp_coordinates_callback):
	use ROUND() to prevent incorrect chainbutton logic.  Fixes
	bug #336259.

2006-05-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpscaletool.c (gimp_scale_tool_dialog_update,
	gimp_scale_tool_size_notify): use the same rounding to determine
	width and height from the TransInfo struct.

2006-05-19  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/vpropagate.c: swap meanings of "dilate" and
	"erode"; fixes bug #156545.

2006-05-19  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/tga.c: gracefully handle incorrect alpha info in
	header; fixes bug #306675.

2006-05-19  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpitem-linked.h: remove enum GimpItemLinkedMask...

	* app/core/core-enums.[ch]: ...and add it here as GimpItemTypeMask.
	Renamed enum GimpImageResizeLayers to GimpItemSet.

	* app/core/gimpitem-linked.[ch]
	* app/core/gimpimage-resize.[ch]
	* app/dialogs/resize-dialog.[ch]
	* app/actions/image-commands.c
	* app/actions/layers-commands.c
	* app/tools/gimpeditselectiontool.c: changed accordingly.

2006-05-19  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/image.pdb: do not use enum values in C syntax
	to describe the image mode.

	* app/pdb/convert_cmds.c
	* app/pdb/image_cmds.c
	* libgimp/gimpconvert_pdb.c
	* libgimp/gimpimage_pdb.c: regenerated.

2006-05-19  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl: turn c_style_procedure_names() in
	$proc->{help} into 'canonical-procedure-names'.

	* tools/pdbgen/pdb/color.pdb: std_pdb_deprecated() expects
	canonical procedure names.

	* app/pdb/color_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/drawable_transform_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/progress_cmds.c: regenerated.

2006-05-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptransformoptions.[ch]: removed one of the two
	constrain properties.

	* app/tools/gimprotatetool.c
	* app/tools/gimptransformtool.c: changed accordingly.

	* app/tools/gimpscaletool.c: sync "constrain" with the size-box's
	"keep-aspect" property.

2006-05-19  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpsizebox.c: connect to the chain-button and
	update the "keep-aspect" property when it is toggled.

2006-05-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpaligntool.c (gimp_align_tool_register): actually
	use the new tool icon.

2006-05-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/dialogs/file-save-dialog.c: make sure to disconnect
	callback added in previous change.

2006-05-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/dialogs/file-save-dialog.c: make sure dialog has
	not been destroyed when setting sensitive; fixes
	bug #322978.

2006-05-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpparamspecs-desc.c: use the enum's name instead of
	the nick, strip the "GIMP_" prefix and canonicalize it.

2006-05-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu.c (script_fu_run): reverted one
	aspect of the last change and always load the scripts again.

2006-05-18  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/app.pl
	* tools/pdbgen/lib.pl: removed code that used to fiddle with the
	argument descriptions.

	* tools/pdbgen/pdb/*.pdb: removed %%desc%% placeholders, added some
	missing argument descriptions.

	* app/pdb/*_cmds.c
	* libgimp/gimpdrawabletransform_pdb.c
	* libgimp/gimpfloatingsel_pdb.c
	* libgimp/gimpgradient_pdb.c
	* libgimp/gimppainttools_pdb.c: regenerated.

	* app/core/Makefile.am
	* app/core/gimpparamspecs-desc.[ch] (gimp_param_spec_get_desc):
	new function that creates a parameter description for the PDB.

	* app/pdb/gimppdb-query.c
	* app/pdb/procedural_db_cmds.c: use the new function to create the
	descriptions on the fly.

2006-05-18  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimphuesaturationtool.c: add tooltips to all hue
	partition radio buttons.

	* app/tools/gimptextoptions.[ch]
	* app/tools/gimpvectoroptions.[ch]: add the widgets that are
	needed by the tools as members to the options structs instead of
	attaching them with g_object_set_data().

	* app/tools/gimptexttool.c
	* app/tools/gimpvectortool.c: access the struct members instead of
	using g_object_get_data().

2006-05-17  Kevin Cozens  <kcozens@cvs.gnome.org>

	* configure.in: Added quotes in two AM_CONDITIONAL lines to avoid
	complaints of "test: too many arguments" when running ./configure.

2006-05-18  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimp-tools.c (gimp_tools_init): move the align tool
	after the move tool.

2006-05-17  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* themes/Default/images/tools/stock-tool-align-16.png
	* themes/Default/images/tools/stock-tool-align-22.png
	* libgimpwidgets/gimpstock.c
	* libgimpwidgets/gimpstock.h
	* themes/Default/images/Makefile.am: add new (ugly) icon
	for alignment tool.

	* app/tools/gimpaligntool.c: use the new icon; change
	"pressed" to "clicked" for buttons.

2006-05-17  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpvectortool.c (gimp_vector_tool_set_vectors): use
	the same method as the newly added text tool code for finding a
	suitable display for the vectors.

2006-05-17  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpbrushclipboard.c
	(gimp_brush_clipboard_buffer_changed)
	* app/core/gimppatternclipboard.c
	(gimp_pattern_clipboard_buffer_changed): limit the size of
	clipboard brushes and patterns to 512x512 pixels to prevent OOM
	conditions when copying from huge drawables.

2006-05-17  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpaligntool.[ch]: major change in ui, to make
	this tool behave like alignment tools found in vector apps.
	now you select items by clicking or drawing a rubber-band
	rectangle, add items by holding down shift, and then press
	a button to align all the selected items.

2006-05-17  Michael Natterer  <mitch@gimp.org>

	* app/actions/plug-in-commands.c: moved the collection of plug-in
	args to a utilty function. Add another function that is called
	when the plug-in lives in <Brushes>, <Palettes> etc. and pass the
	active object's name to the plug-in.

	* plug-ins/pygimp/plug-ins/Makefile.am
	* plug-ins/pygimp/plug-ins/palette-offset.py
	* plug-ins/pygimp/plug-ins/palette-sort.py
	* plug-ins/pygimp/plug-ins/palette-to-gradient.py: added new
	scripts written by Joao S. O. Bueno Calligaris and fixed by Carol
	Spears. Changed them myself again. The stuff doesn't work as
	expected because python-fu has too much asumptions in its
	register() code, and the sort script doesn't implement all modes
	of Adrian's palette sorting perl script. Addresses bug #104639.

2006-05-17  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpbrushclipboard.c
	(gimp_brush_clipboard_buffer_changed)
	* app/core/gimppatternclipboard.c
	(gimp_pattern_clipboard_buffer_changed): remove calls to
	gimp_data_dirty() because the emission of "name-changed" takes
	care of that.

2006-05-17  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushclipboard.c
	(gimp_brush_clipboard_buffer_changed)
	* app/core/gimppatternclipboard.c
	(gimp_pattern_clipboard_buffer_changed): emit "name-changed" so that
	the description is being updated.

2006-05-17  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp.c (gimp_real_initialize): add a clipboard pattern
	to the pattern factory (forgot to commit this file).

2006-05-17  Manish Singh  <yosh@gimp.org>

	* po-libgimp/Makefile.in.in
	* po-plug-ins/Makefile.in.in
	* po-script-fu/Makefile.in.in
	* po-tips/Makefile.in.in: revert previous changes, it doesn't
	look straightforward to change these without bumping up the
	intltool dependency.

2006-05-17  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpresolutionentry.c: synced function names with
	the header file.

	* libgimpwidgets/gimpwidgets.def: added missing entries.

2005-05-16  Manish Singh  <yosh@gimp.org>

	* po-libgimp/Makefile.in.in
	* po-plug-ins/Makefile.in.in
	* po-script-fu/Makefile.in.in
	* po-tips/Makefile.in.in: synchronized with po/Makefile.in.in.

	* gimptool-2.0.in
	* gimptool-win32.c.in: add reference to datarootdir.

2006-05-16  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimppatternclipboard.[ch]: new GimpPattern subclass
	that auto-updates its contents from gimp->global_buffer.

	* app/core/gimp.c (gimp_real_initialize): add a clipboard pattern
	to the pattern factory.

	* app/widgets/gimpaction.c (gimp_action_set_proxy): replace the
	GimpView by a new one if the viewable type changes, instead of
	running into a warning (didn't happen before because this is only
	used for imagefiles and patterns, which didn't have subclasses).

2006-05-16  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimprectangletool.c: check if the tool has a display
	before using it

2006-05-16  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.[ch]: implement copy_color() and
	copy_color_pixels() which copy only the color bytes into a dest
	that has one byte less than src. Renamed component_pixels() to
	copy_component_pixels().

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpbrushclipboard.[ch]: new GimpBrush subclass that
	auto-updates its contents from gimp->global_buffer.

	* app/core/gimp.c (gimp_real_initialize): add a clipboard brush to
	the brush factory. Fixes bug #111082.

2006-05-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/*/*.c: declared GimpPlugInInfo and GimpParamDef arrays
	as const.

2006-05-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu.c: removed empty quit() method.
	Only load scripts when extension-script-fu is started.

	* plug-ins/script-fu/script-fu-scripts.c: minor cleanup.

2006-05-16  Sven Neumann  <sven@gimp.org>

	* app/app_procs.c (app_run): indentation.

	* app/core/gimp.c (gimp_real_initialize)
	* app/plug-in/gimppluginmanager.c (gimp_plug_in_manager_restore):
	moved a call to status_callback() to the plug-in manager.

2006-05-16  Kristian Rietveld  <kris@gtk.org>

	* configure.in: correct small typo.

2006-05-15  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/plug-ins/colorxhtml.py: Minor cleanups.

2006-05-15  Michael Schumacher  <schumaml@cvs.gnome.org>

	* libgimpmodule/Makefile.am: added missing GLIB_LIBS to
	LIBADD. The recent changes to the gmodule check in configure.in
	had broken the build.

2006-05-15  Sven Neumann  <sven@gimp.org>

	* app/plug-in/gimpplugin.c: removed debugging output.

2006-05-15  Sven Neumann  <sven@gimp.org>

	* app/*/*.c:
	* lib*/*.c: removed erroneous semicolon after G_DEFINE_TYPE macros.

2006-05-15  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-utils.c: include "libgimpconfig/gimpconfig.h".

2006-05-14  Michael Natterer  <mitch@gimp.org>

	Allow to initialize a new layer mask with any of the image's
	channels. Fixes bug #310207.

	* libgimpbase/gimpbaseenums.h (enum GimpAddMaskType): added
	value GIMP_ADD_CHANNEL_MASK.

	* libgimpbase/gimpbaseenums.c
	* tools/pdbgen/enums.pl: regenerated.

	* app/core/gimplayer.[ch] (gimp_layer_create_mask): added
	GimpChannel* parameter. Hacked the GIMP_ADD_SELECTION_MASK code a
	bit so it can handle GIMP_ADD_CHANNEL_MASK too. Cleaned up the
	function a bit.

	* app/dialogs/layer-add-mask-dialog.[ch]: added a menu of the
	image's channels.

	* app/actions/layers-commands.c (layers_add_mask_response): pass
	the channel selected in the menu to gimp_layer_create_mask().

	* tools/pdbgen/pdb/layer.pdb (layer_create_mask): use the image's
	active channel when GIMP_ADD_CHANNEL_MASK is passed. Fail if there
	is no active channel.

	* app/pdb/layer_cmds.c: regenerated.

2006-05-14  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptexttool.c (gimp_text_tool_set_layer): find a
	suitable display and fully set up the tool (just as the vector
	tool does). Fixes bug #322182.

	(gimp_text_tool_button_press): chain up to activate the tool.

	(gimp_text_tool_set_drawable): removed redundant check.

2006-05-13  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.c (gimp_layer_transform): add an alpha
	channel if the layer has none and interpolation is requested.
	Works around bug #315048, the real fix would be to implement
	interpolation on layers without alpha.

2006-05-13  Michael Natterer  <mitch@gimp.org>

	Added some new text layer actions and menu items (bug #316299).

	* app/actions/layers-actions.c: added actions for "Text to Path",
	"Text along Path" and "Text to Selection" (use the alpha to
	selection callback for text to selection)

	* app/actions/layers-commands.[ch]: added
	layers_text_to_vectors_cmd_callback() and
	layers_text_along_vectors_cmd_callback().

	* app/widgets/gimphelp-ids.h: help IDs for the new actions.

	* menus/image-menu.xml.in
	* menus/layers-menu.xml: added them to the layers menus in the
	image window and the layers dialog.

2006-05-13  Hans Breuer  <hans@breuer.org>

	* **/makefile.msc app/gimpcore.def : updated
	* app/core/gimp-util.c : dont include "config/gimpbaseconfig.c", it
	gives an redefinition error with msvc. Instead include
	config/gimpbaseconfig.h and libgimpconfig/gimpconfig-path.h

	* plug-ins/common/psd_save.c : fix c99isms (declarations only at the
	start of a block)

2006-05-12  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpview.h: save 20 bytes per instance by using
	single bits instead of 6 gbooleans.

	* app/widgets/gimpview.c: some code cleanup.

	* app/widgets/gimpviewrendererbrush.c: don't #include "gimpbrush.h".

	* app/widgets/gimpviewrendererbuffer.c: #include "gimpviewable.h"
	instead of "gimpbuffer.h".

	* app/widgets/gimpviewrenderergradient.c
	* app/widgets/gimpviewrendererimagefile.c
	* app/widgets/gimpviewrendererimagefile.h: micro cosmetics.

2006-05-12  Michael Natterer  <mitch@gimp.org>

	* plug-ins/imagemap/imap_csim.y: fix warning about unused return
	value of g_list_append().

	* plug-ins/imagemap/imap_csim_parse.[ch]: regenerated (using
	bison 2.1 instead of 2.0, lots of things changed, please test).

2006-05-12  Michael Natterer  <mitch@gimp.org>

	* configure.in: check for gmodule-no-export-2.0, not for
	gmodule-2.0. Also removed gobject-2.0 from the gmodule check, i
	have no idea why it was there.

	* libgimpmodule/Makefile.am: s/GMODULE/GMODULE_NO_EXPORT/ because
	we only want to import modules here, not export our own symbols.

	(note that this change is actually useless, because libgimpmodule
	 exports its symbols anyway, but it's more correct this way).

2006-05-12  Michael Natterer  <mitch@gimp.org>

	* app/config/Makefile.am: make test-config link again.
	Fixes bug #340601.

2006-05-11  Michael Natterer  <mitch@gimp.org>

	* app/pdb/gimppdb-query.c (gimp_pdb_proc_info): restored old
	version of this function, it was correct after all (spotted by
	Kevin Cozens).

2006-05-11  Michael Natterer  <mitch@gimp.org>

	Applied modified patch from Michael J. Hammel which allows to
	remove all keyboard shortcuts from the menus (fixes bug #331839):

	* app/dialogs/preferences-dialog.c: added "Remove all keyboard
	shortcuts" button to the "Interface" section.

	* app/menus/menus.[ch]: added menus_remove() which does the
	shortcut removal.

2006-05-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewrendererbrush.c
	* app/widgets/gimpviewrendererbuffer.c: use
	gimp_viewable_get_size() and get rid of useless
	local "brush" and "buffer" variables.

2006-05-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c: code cleanup, no logic changed.

	* app/widgets/gimptoolbox-color-area.c: make the very first click
	on the color area work as expected.

2006-05-10  Sven Neumann  <sven@gimp.org>

	* app/composite/gimp-composite-mmx.c
	(gimp_composite_swap_rgba8_rgba8_rgba8_mmx): applied patch from
	Mukund that replaces remaining movntq instructions in MMX assembly
	(bug #162778).

2006-05-09  Simon Budig  <simon@gimp.org>

	* themes/Default/images/stock-color-triangle-16.png: New icon
	to reflect the corrected triangular color selector.

2006-05-09  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.c (gimp_image_new)
	* app/core/gimpitem.c (gimp_item_configure)
	* app/display/gimpdisplay.c (gimp_display_new): make sure IDs wrap
	correctly at G_MAXINT and skip IDs which are currently in use.

	It makes no sense to treat gimp->image_table and gimp->images
	differently, since they keep the same set of images. And it makes
	no sense to treat gimp->displays and gimp->images differently.
	Moved all container adding into the objects' constructors:

	* app/core/gimp.c (gimp_create_image): don't add the new image
	to gimp->images here...

	* app/core/gimpimage.c (gimp_image_constructor): ...but here.

	* app/core/gimp-gui.c (gimp_create_display): don't add the new
	display to gimp->displays here...

	* app/display/gimpdisplay.c (gimp_display_new): ...but here.

2006-05-09  Michael Natterer  <mitch@gimp.org>

	* app/gui/gui-vtable.c: don't #include "pdb/gimppluginprocedure.h".

2006-05-08  Simon Budig  <simon@gimp.org>

	* plug-ins/script-fu/siod/sliba.c: Insert a missing break that
	was responsible for a weird output of integer arrays.
	Untabbified.

2006-05-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_new): set the
	alternative button order here...

	* app/dialogs/file-open-dialog.c (file_open_dialog_new)
	* app/dialogs/file-save-dialog.c (file_save_dialog_new): ...instead
	of here.

2006-05-08  Simon Budig  <simon@gimp.org>

	* plug-ins/common/postscript.c: fix typo...

2006-05-08  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-enums.[ch]: changed enum PlugInImageType
	to GimpPlugInImageType.

	* app/pdb/gimppluginprocedure.[ch]: changed accordingly.

2006-05-08  Simon Budig  <simon@gimp.org>

	* plug-ins/common/postscript.c: improve the error message when
	spawning ghostscript does not work. See bug #340996. Untabbified.

2006-05-08  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdrawable.c: don't #include "gimp.h".

2006-05-07  Simon Budig  <simon@gimp.org>

	* modules/colorsel_triangle.c: Make the hue angle behave
	mathematically correct. Fixes bug #141922

	* plug-ins/script-fu/scripts/circuit.scm: Fix multi line description.

	* docs/Wilber.svg: Add xmlns attribute to the svg element, so
	firefox renders it when reading it from disk.

2006-05-07  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-scale.c (gimp_display_shell_scale):
	return early if the shell is already at the requested zoom level.
	(paranoia addition for bug #165032, which was already fixed by the
	fix for bug #164281)

2006-05-07  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpbrusheditor.c: hide the button bar, which is
	useless for the brush editor. Fixes user confusion (bug #306704).

2006-05-06  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppainttool.c: connect to the context's
	"brush-changed" signal and update the brush core's brush
	accordingly. Fixes inconsistent brush preview when not moving
	the mouse while the brush changes (bug #323404).

2006-05-06  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparamspecs.[ch]: added "gboolean none_ok" members
	to GimpParamSpecImageID, GimpParamSpecItemID and
	GimpParamSpecDisplayID.  If none_ok is set, allow '0' and '-1' as
	valid IDs. Added "none_ok" parameter to all ID param spec
	constructors.

	* app/xcf/xcf.c: require real image IDs, but allow images without
	active drawable.

	* app/pdb/gimp-pdb-compat.c: set none_ok to TRUE in all compat
	param specs, so only IDs that are really random garbage don't pass
	validation. Fixes validation errors with 0 and -1 IDs (bug #339840).

	* tools/pdbgen/app.pl: set none_ok to FALSE by default. Added
	support for $arg->{none_ok} to control it.

	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/progress.pdb
	* tools/pdbgen/pdb/text_tool.pdb: use none_ok instead of
	no_success (which disables validation entirely).

	* app/pdb/[many]_cmds.c: regenerated.

2006-05-05  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/gifload.c (DoExtension): Revert back to unsigned
	chars for the buffer, and only cast to gchar if we know we're dealing
	with a comment. Fixes bug #339865.

2006-05-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/gimppluginmanager-call.[ch]
	(gimp_plug_in_manager_call_run): changed parameter "gint display_ID"
	to "GimpObject *display".

	* app/pdb/gimpprocedure.[ch]
	* app/pdb/gimppluginprocedure.c
	* app/pdb/gimptemporaryprocedure.c: changed
	GimpProcedure::execute_async() the same way.

	* app/plug-in/gimppluginmanager.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/widgets/gimphelp.c: changed accordingly.

2006-05-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/gimppluginmanager.[ch]: added signals
	"plug-in-opened" and "plug-in-closed". Added functions
	gimp_plug_in_manager_add_open_plug_in() and _remove_open_plug_in()
	which maintain the list of open plug-ins and emit the signals.

	* app/plug-in/gimpplugin.c (gimp_plug_in_open)
	(gimp_plug_in_close): don't touch manager->open_plug_ins and don't
	ref/unref the plug-in. Call above new functions instead. Don't
	call gimp_pdb_dialogs_check().

	* app/core/gimp-gui.[ch]
	* app/gui/gui-vtable.c: removed gimp_pdb_dialogs_check().

	* app/widgets/gimppdbdialog.[ch]: removed
	gimp_pdb_dialogs_check_callback() and connect to the
	plug-in-manager's "plug-in-closed" signal instead.

2006-05-04  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/gimppluginshm.c: cleaned up a bit.

	(gimp_plug_in_shm_new): return NULL if anything goes wrong,
	instead of a GimpPlugInShm structure that contains no shm (we
	don't need multiple cases of "there is no shm"),

	* app/plug-in/gimppluginmanager.[ch]
	(gimp_plug_in_manager_get_shm_ID)
	(gimp_plug_in_manager_get_shm_addr): removed these functions.

	* app/plug-in/gimppluginmanager-call.c (gimp_plug_in_manager_call_run)
	* app/plug-in/gimpplugin-message.c (gimp_plug_in_handle_tile_req):
	get the shm ID and addr directly from manager->shm if it exists,
	use -1 and NULL otherwise.

	Unrelated:

	* app/plug-in/gimppluginmanager.c: move most stuff from
	gimp_plug_in_manager_exit() to gimp_plug_in_manager_finalize().
	Simplify plug-in killing in _exit().

2006-05-04  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-user-install.[ch]: added a "verbose" parameter.

	* app/app_procs.c (app_run): abort if the user installation fails.

2006-05-04  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/gimpplugin.[ch] (struct GimpPlugIn): remove member
	"name" and unused cruft "ref_count". Reordered other members a bit.

	(gimp_plug_in_new): set GimpObject's name to
	g_filename_display_basename(path) instead.

	Use GimpObject's name instead of plug_in->name for error messages
	and pass the full path to gimp_plug_in_debug_argv()

	* app/plug-in/gimpplugindebug.c (gimp_plug_in_debug_argv): extract
	the path's basename ourselves.

	* app/plug-in/gimpplugin-message.c: GimpObject's name for
	error messages.

2006-05-04  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparamspecs.c (gimp_string_array_new)
	(gimp_param_string_array_validate): restore the strict checks
	on string arrays.

	* app/plug-in/gimppluginmanager-help-domain.c
	(gimp_plug_in_manager_get_help_domains): return NULL string arrays
	when there are 0 help domains to fix the inconsistency at its root.

2006-05-04  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/gimpplugin.c
	* app/plug-in/gimppluginmanager-call.c: use the right procedure
	types in calls to gimp_plug_in_proc_frame_foo().

2006-05-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpselectiondata.c
	(gimp_selection_data_get_tool_info): port to using
	gimp_selection_data_get_object(), it was simply forgotten.
	Fixes tool dropping (bug #336402).

2006-05-03  Michael Natterer  <mitch@gimp.org>

	Made an object out of the plug-in struct. Also change refcounting
	considerably:

	- gimp_plug_in_open() adds a reference that is only dropped by
	  gimp_plug_in_close().
	- temporarily ref the plug-in while handling messages.
	- remporarily ref the plug-in while a recursive main loop is
	  running.
	- each caller of gimp_plug_in_new() also unrefs the plug-in before
	  returning, the only reference that persists across functions
	  (that keeps the plug-in alive) is the one added by open().

	* app/plug-in/plug-in.[ch]
	* app/plug-in/plug-in-context.[ch]
	* app/plug-in/plug-in-message.[ch]
	* app/plug-in/plug-in-progress.[ch]: removed these files...

	* app/plug-in/gimpplugin.[ch]
	* app/plug-in/gimpplugin-context.[ch]
	* app/plug-in/gimpplugin-message.[ch]
	* app/plug-in/gimpplugin-progress.[ch]: ...and added here as GObject.

	* app/plug-in/plug-in-proc-frame.[ch]: removed...

	* app/plug-in/gimppluginprocframe.[ch]: ...and added with a namespace.

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-types.h
	* app/plug-in/gimppluginmanager-call.c
	* app/plug-in/gimppluginmanager-file.c
	* app/plug-in/gimppluginmanager.[ch]
	* app/pdb/gimppluginprocedure.c
	* app/pdb/gimptemporaryprocedure.c
	* app/pdb/gimptemporaryprocedure.h
	* tools/pdbgen/pdb/context.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/message.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/progress.pdb
	* tools/pdbgen/pdb/undo.pdb: changed accordingly.

	* app/pdb/context_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/help_cmds.c
	* app/pdb/message_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/progress_cmds.c
	* app/pdb/undo_cmds.c: regenerated.

2006-05-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gifload.c: removed some unused code, untabified.

2006-05-03  Sven Neumann  <sven@gimp.org>

	* app/core/gimpparamspecs.c (gimp_string_array_new,
	gimp_param_string_array_validate): relaxed the checks so that
	GimpStringArray deals correctly with (length == 0 && data != NULL).
	Fixes bug #340365.

2006-05-03  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-merge.c: allow Merge operations on single
	layers as suggested in bug #340491.

2006-05-02  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-enums.[ch]: added enum GimpPlugInCallMode
	which can be one of { NONE, QUERY, INIT, RUN }.

	* app/plug-in/Makefile.am
	* app/plug-in/gimppluginmanager-run.[ch]: removed again...

	* app/plug-in/gimppluginmanager-call.[ch]: ...and added
	here. Added gimp_plug_in_manager_call_init() and
	gimp_plug_in_manager_call_query().

	* app/plug-in/plug-in.[ch]: removed plug_in_call_query() and
	plug_in_call_init().

	(struct PlugIn): removed members "init", "query" and "synchronous".

	(plug_in_open): added parameters "call_mode" and "synchronous".

	* app/plug-in/gimppluginmanager.c
	* app/plug-in/plug-in-message.c
	* app/pdb/gimppluginprocedure.c
	* app/pdb/gimptemporaryprocedure.c
	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly.

	* app/pdb/plug_in_cmds.c: regenerated.

2006-05-02  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: code cleanup, rephrased radio
	button labels.

2006-05-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainercombobox.c
	(gimp_container_combo_box_remove_item): turned a #warning into an
	explanation because the bug it referred to is marked as WONTFIX.

2006-05-02  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpproceduraldb.[ch] (gimp_procedural_db_set_data):
	added const qualifier.

2006-05-02  Sven Neumann  <sven@gimp.org>

	* fileicon.ico
	* wilber.ico: new icons for the Windows build created by Jernej
	Simončič based on the icons drawn by Jimmac (bug #340223).

2006-04-29  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in.[ch]: removed plug_in_push() and
	plug_in_pop()...

	* app/plug-in/gimppluginmanager.[ch]: ...and added them here as
	gimp_plug_in_manager_plug_in_push() and _pop()

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_run): changed
	accordingly.

	* app/plug-in/plug-in.c (plug_in_close): removed an unused
	variable, moved another one to a local scope.

	* app/plug-in/plug-in.h: indentation.

2006-04-29  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/gimppluginmanager-locale-domain.c
	(gimp_plug_in_manager_get_locale_domains): NULL-terminate string
	arrays here too, so they can be freed with g_strfreev() (even
	though they currently aren't).

	* app/widgets/gimphelp.c: set the plug-in arguments
	correctly. Fixes warnings and makes help work again.

2006-04-29  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: fixed signal connection.

	* app/core/gimp-user-install.c: indentation.

2006-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am (AM_CPP_FLAGS): define GIMP_APP_VERSION.

	* app/core/gimp-user-install.c: use GIMP_APP_VERSION instead of
	hardcoding it.

2006-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/gimp-user-install.[ch]: new files based on code that
	used to live in user-install-dialog.c.

	* app/dialogs/user-install-dialog.[ch]: only the dialog code
	remained here.

	* app/app_procs.c: use the new user-install API.  Perform a
	non-interactive user installation when running without a display.

2006-04-29  Tor Lillqvist  <tml@novell.com>

	* app/plug-in/gimppluginmanager-locale-domain.c
	(gimp_plug_in_manager_get_locale_domains): NULL-terminate the
	locale_domains and locale_paths string vectors, as they are freed
	with g_strfreev() in gimp_plug_in_manager_restore().

	* app/plug-in/plug-in.c (plug_in_close): Make it compile again on
	Win32. Use g_usleep() instead of select()/Sleep() Unix/Windows
	ifdef.

2006-04-29  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-run.[ch]: removed...

	* app/plug-in/gimppluginmanager-run.[ch]: ...and added as methods
	of GimpPlugInManager.

	* app/pdb/gimppluginprocedure.c
	* app/pdb/gimptemporaryprocedure.c: changed accordingly.

2006-04-29  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.[ch]: removed unused code and
	unused parameters passed to user_install_dialog_run().

	* app/app_procs.c (app_run): changed accordingly.

2006-04-29  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-types.h
	* app/plug-in/gimppluginmanager.[ch]: new object which keeps all
	plug-in related stuff that was kept in the Gimp instance. Has
	"menu-branch-added" and "last-plug-in-changed" signals.

	* app/plug-in/plug-ins.[ch]: removed, all its functions are in
	GimpPlugInManager now.

	* app/core/gimpmarshal.list: new marshaller for the new object.

	* app/core/gimp.[ch]: removed all plug-in related stuff and keep a
	GimpPlugInManager around.

	* app/plug-in/plug-in-data.[ch]
	* app/plug-in/plug-in-file.[ch]
	* app/plug-in/plug-in-help-domain.[ch]
	* app/plug-in/plug-in-locale-domain.[ch]
	* app/plug-in/plug-in-menu-branch.[ch]
	* app/plug-in/plug-ins-query.[ch]: removed...

	* app/plug-in/gimppluginmanager-data.[ch]
	* app/plug-in/gimppluginmanager-file.[ch]
	* app/plug-in/gimppluginmanager-help-domain.[ch]
	* app/plug-in/gimppluginmanager-locale-domain.[ch]
	* app/plug-in/gimppluginmanager-menu-branch.[ch]
	* app/plug-in/gimppluginmanager-query.[ch]: ...and added as
	methods of GimpPlugInManager.

	* app/plug-in/plug-in-debug.[ch]
	* app/plug-in/plug-in-shm.[ch]: removed...

	* app/plug-in/gimpplugindebug.[ch]
	* app/plug-in/gimppluginshm.[ch]: ...and added as properly
	namespaced structs with constructors and destructors.

	* app/core/Makefile.am
	* app/core/gimpenvirontable.[ch]
	* app/core/gimpinterpreterdb.[ch]: removed...

	* app/plug-in/gimpenvirontable.[ch]
	* app/plug-in/gimpinterpreterdb.[ch]: ...and added here unchanged.

	* app/core/gimp-gui.[ch]
	* app/gui/gui-vtable.c: remove gimp_menus_create_branch() and all
	related stuff.

	* app/actions/plug-in-actions.[ch]: connect to the
	plug-in-manager's "menu-path-added" signal and create menu branch
	actions accordingly.

	* app/plug-in/plug-in-context.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-run.[ch]
	* app/plug-in/plug-in.[ch]
	* app/app_procs.c
	* app/actions/file-commands.c
	* app/actions/plug-in-commands.c
	* app/core/gimpimage.c
	* app/dialogs/file-open-location-dialog.c
	* app/dialogs/file-save-dialog.c
	* app/file/file-open.c
	* app/gui/gui.c
	* app/menus/plug-in-menus.c
	* app/pdb/gimppluginprocedure.c
	* app/pdb/gimptemporaryprocedure.c
	* app/widgets/gimpdnd-xds.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimpfileprocview.c
	* app/widgets/gimphelp.c
	* app/widgets/gimpthumbbox.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/context.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/message.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/pdb/progress.pdb
	* tools/pdbgen/pdb/undo.pdb: follow above refactoring.

	* app/pdb/context_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/help_cmds.c
	* app/pdb/message_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/procedural_db_cmds.c
	* app/pdb/progress_cmds.c
	* app/pdb/undo_cmds.c: regenerated.

2006-04-28  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: code and user interface cleanup.

2006-04-28  Tor Lillqvist  <tml@novell.com>

	* HACKING: Clarify the wording about TABs. s/bracket/brace/ .

2006-04-27  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-locale-domain.[ch] (plug_in_locale_domains):
	new function which returns string arrays of all registered locale
	domains and paths.

	(plug_in_standard_locale_domain): removed this function. The
	standard plug-in domain is included in the domains returned by
	plug_in_locale_domains().

	* app/plug-in/plug-ins.c (plug_ins_init): simply bind the text
	domains here instead of calling gimp_menus_init(). Destroy
	gimp->plug_in_defs much earlier.

	* app/core/gimp-gui.[ch]
	* app/gui/gui-vtable.c: removed gimp_menus_init().

	* app/menus/plug-in-menus.[ch]: removed plug_in_menus_init(),
	binding text domains is completely done in the core now.

2006-04-27  Michael Natterer  <mitch@gimp.org>

	Added some signals inspired by Rockwalrus' libpdb:

	* app/pdb/gimppdb.[ch]: added signals "register-procedure" and
	"unregister-procedure".

	* app/pdb/gimppluginprocedure.[ch]: added signal "menu-path-added".

	* app/actions/plug-in-actions.[ch]
	* app/menus/plug-in-menus.[ch]: connect to the new signals and
	create/destroy plug-in actions and menus accordingly. Made all
	needed functions private and merged some of them with the newly
	added signal callbacks.

	* app/core/gimp-gui.[ch]
	* app/gui/gui-vtable.c: removed gimp_menus_create_item() and
	gimp_menus_delete_item() and all related stuff.

	* app/plug-in/plug-in.c
	* app/plug-in/plug-ins.c: removed calls to the removed functions.

	* app/plug-in/plug-ins.c (plug_ins_init): add the plug-in
	procedures to the PDB *after* calling gimp_menus_init() so their
	locale domains are properly initialized when the menus are
	created.

2006-04-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpcontext.c: fixed argument order for using
	GIMP_CONFIG_INSTALL_PROP_RGB().

2006-04-27  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/gimprgb.[ch]: hide the GimpParamSpecRGB struct
	again.  Added getter for the has_alpha field.

	* libgimpcolor/gimpcolor.def: updated.

	* app/config/gimpconfig-dump.c
	* libgimpconfig/gimpconfig-serialize.c: use
	gimp_param_spec_rgb_has_alpha() instead of accessing the
	GimpParamSpecRGB struct directly.

2006-04-27  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/gimprgb.[ch]: added "has_alpha" to GimpParamSpecRGB.
	Made the GimpParamSpecRGB struct public. When validating a color,
	only look at the alpha channel if has_alpha is set.

	* libgimpconfig/gimpconfig-params.h: added "has_alpha" to the
	GIMP_CONFIG_INSTALL_PROP_RGB macro definition.

	* libgimpconfig/gimpconfig-serialize.c: serialize color values as
	"(rgb r g b)" if the param-spec indicates that the alpha channel
	is meaningless.

	* app/config/gimpconfig-dump.c: take "has_alpha" into account when
	documenting color properties.

	* app/core/gimpcontext.c
	* app/core/gimpgrid.c
	* app/display/gimpdisplayoptions.c
	* app/text/gimptext.c
	* app/widgets/gimpaction.c
	* app/widgets/gimpcolorbar.c
	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/gimpcolorbutton.c: specify whether color properties
	have an alpha channel.

	* tools/pdbgen/app.pl: handle "has_alpha" for color paramaters.

	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/context.pdb
	* tools/pdbgen/pdb/grid.pdb
	* tools/pdbgen/pdb/image.pdb: set the "has_alpha" flag where
	appropriate.

	* app/pdb/gimp-pdb-compat.c (gimp_pdb_compat_param_spec): set
	"has_alpha" to TRUE for GIMP_PDB_COLOR.

	* app/pdb/channel_cmds.c
	* app/pdb/context_cmds.c
	* app/pdb/gradient_cmds.c
	* app/pdb/grid_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/palette_cmds.c
	* app/pdb/palettes_cmds.c
	* app/pdb/selection_tools_cmds.c: regenerated.

	* app/config/gimpdisplayconfig.c (gimp_display_config_class_init):
	removed unused code.

2006-04-27  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/gimprgb.h: indentation.

2006-04-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppluginaction.[ch]: use a GParamSpecObject instead
	of GParamSpecPointer for the "procedure" property. Keep a reference
	on the action's procedure. Did a global s/proc/procedure/.

2006-04-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/warp.c: some cleanup, still a mess.

2006-04-27  Michael Natterer  <mitch@gimp.org>

	* app/actions/plug-in-commands.c (plug_in_repeat_cmd_callback):
	truncate the value array to the number of actually set parameters.

2006-04-27  Michael Natterer  <mitch@gimp.org>

	* app/Makefile.am (SUBDIRS): changed order of subdirs to match the
	bottom-up module dependency order more closely.

2006-04-27  Michael Natterer  <mitch@gimp.org>

	* configure.in: use G_DISABLE_DEPRECATED also when building
	against glib 2.10

2006-04-27  Michael Natterer  <mitch@gimp.org>

	* app/menus/menus.c: namespace cleanup: renamed
	menu_can_change_accels() to menus_can_change_accels().

2006-04-26  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (depth_first_search): added newlines.

	* app/core/gimpimage-contiguous-region.c: added const qualifiers.

2006-04-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c: use gimp_progress_set_text() instead
	of gimp_progress_init() to change the progress text.

2006-04-26  Sven Neumann  <sven@gimp.org>

	* app/actions/vectors-commands.c
	(vectors_selection_to_vectors_cmd_callback): do not pass an
	invalid drawable to the plug-in, just omit the argument.
	Fixes bug #339759.

2006-04-26  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/scale-funcs.c: code cleanup, moved variables into
	local scopes, added const qualifiers.

2006-04-26  Michael Natterer  <mitch@gimp.org>

	* app/pdb/Makefile.am
	* app/pdb/pdb-types.h
	* app/pdb/gimppdb.[ch]: new object GimpPDB which keeps all
	procedures and functions to register and run them. Renamed all
	functions and did some cleanups.

	* app/pdb/gimp-pdb.[ch]
	* app/core/gimp.[ch]: removed the same stuff here.

	* app/pdb/gimp-pdb-query.[ch]: removed these files...

	* app/pdb/gimppdb-query.[ch]: ...added here as members of GimpPDB.

	* app/pdb/gimp-pdb-compat.h: fix include guard.

	* app/batch.c
	* app/actions/vectors-commands.c
	* app/dialogs/about-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimphelp.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/font_select.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/palette_select.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed includes and function
	calls accordingly.

	* tools/pdbgen/app.pl: pass around GimpPDB instead of Gimp
	pointers to register the internal procedures with. Changed some
	newlines in the generated code.

	* app/pdb/*_cmds.c
	* app/pdb/internal_procs.[ch]: regenerated.

	* app/core/gimppdbprogress.[ch]
	* app/widgets/gimppdbdialog.[ch]: added "pdb" CONSTRUCT_ONLY
	properties.

	* app/plug-in/plug-in-progress.c
	* app/gui/gui-vtable.c: pass gimp->pdb when creating them.

	* app/widgets/gimpbrushselect.c
	* app/widgets/gimpfontselect.c
	* app/widgets/gimpgradientselect.c
	* app/widgets/gimppaletteselect.c
	* app/widgets/gimppatternselect.c: use the new local pdb pointers
	instead of some foo->bar->gimp->pdb overkill.

2006-04-25  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpthresholdtool.c: added an "Auto" button and
	initialize the tool with a default threshold of 127 again.
	Removed some cruft and did some cleanup.

2006-04-25  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c: code cleanup, moved variables into
	local scopes, added const qualifiers.

2006-04-25  Sven Neumann  <sven@gimp.org>

	* app/core/gimpchannel.c (gimp_channel_real_border)
	* app/paint-funcs/paint-funcs.c (border_region): added some empty
	lines to improve readability.

2006-04-24  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: moved the installation log
	into a GtkExpander.

	* app/actions/dialogs-commands.c (dialogs_create_dock): added
	const qualifiers to fix compiler warnings.

2006-04-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/xjt/xjt.c: undef GIMP_DISABLE_DEPRECATED to fix the
	build on IRIX MIPSpro (bug #339336).

2006-04-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gifload.c: implement a thumbnail load procedure
	that loads only the first frame of a GIF animation.

2006-04-24  DindinX  <dindinx@gimp.org>

	* plug-ins/common/redeye.c: use a zoom preview instead of a drawable
	one.

2006-04-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl
	* plug-ins/common/redeye.c: added Redeye Removal plug-in, written
	by Robert Merkel and Andreas Røsdal. Fixes bug #91795.

2006-04-23  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/plugin-defs.pl: use PNG_CFLAGS for the png plugin.

	* plug-ins/common/Makefile.am: regenerated.

2006-04-23  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/png.c: don't use long deprecated libpng API, and
	drop support for ancient libpng versions. Fixes bug #339402.

	* configure.in: use pkg-config to detect libpng. This means we now
	require at least libpng 1.2.2, but that's over four years old, so
	that shouldn't be that big a deal.

2006-04-23  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewabledialog.c: added "viewable" as a property.

2006-04-23  Sven Neumann  <sven@gimp.org>

	* app/dialogs/module-dialog.c
	* app/dialogs/palette-import-dialog.c: use GimpDialog instead of a
	GimpViewableDialog with a NULL viewable.

	* app/widgets/gimpviewabledialog.c: deprecate use of
	GimpViewableDialog with a NULL viewable.

	* app/dialogs/resolution-calibrate-dialog.c: whitespace.

2006-04-22  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.[ch] (gimp_prop_scale_entry_new):
	renamed parameters to please gtk-doc.

2006-04-21  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h: minor string changes.

	* app/config/gimprc.c: declared an array as const.

	* app/dialogs/user-install-dialog.c: further streamlining of the
	user installation.

2006-04-21  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: in an effort to basically
	get rid of the user installation dialog, removed the license and
	tuning pages as well as the code that was responsible for the
	nifty orange style. More to come ...

2006-04-21  Sven Neumann  <sven@gimp.org>

	Applied a slightly modified version of a patch from Lode Leroy
	(bug #336183):

	* app/base/gimphistogram.[ch]: added new function
	gimp_histogram_get_threshold() that returns an optimal
	binarization threshold.

	* app/tools/gimpthresholdtool.c: use the new function to
	initialize the Threshold tool.

2006-04-21  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimputils.c (gimp_utf8_strtrim): strlen != sizeof

2006-04-21  Sven Neumann  <sven@gimp.org>

	* app/base/curves.c
	* app/widgets/gimpsessioninfo.c: minor code cleanup, removed
	trailing whitespace.

2006-04-20  Simon Budig  <simon@gimp.org>

	* app/base/curves.c: implemented a new interpolation for the
	"smooth" curve type. This fixes the artefacts as described in
	bug #169078 although there definitely is room for improvement.

	This has an impact on the API as now the curves used by the
	gimp-curves-spline PDB call change. I do however believe, that
	the change is for good and the old behaviour was simply buggy.

2006-04-20  Tor Lillqvist  <tml@novell.com>

	* app/widgets/gimpsessioninfo.c (get_appropriate_monitor): New
	helper function. Same functionality as
	gdk_screen_get_monitor_at_window(), except that it takes a window
	geometry as parameter and not the window itself.
	(gimp_session_info_set_geometry): Make sure the window is
	completely inside a monitor. (#339099, #324254)

2006-04-20  Simon Budig  <simon@gimp.org>

	* plug-ins/common/convmatrix.c: only access existing toggle buttons.
	Fixes bug #339124.

2006-04-20  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]: convolve_region() takes a
	const matrix parameter.

	* app/paint/gimpconvolve.c
	* app/tools/gimpiscissorstool.c: use const convolution matrices.

	* libgimpbase/gimputils.c (gimp_utf8_strtrim): avoid another small
	relocation.

	* modules/colorsel_cmyk.c
	* regexrepl/regex.c: use const arrays of const strings.

2006-04-19  Simon Budig  <simon@gimp.org>

	* plug-ins/imagemap/imap_main.c: removed unused code
	Fixes bug #339046

	* tools/pdbgen/pdb/paths.pdb: removed deprecated docs
	* app/pdb/paths_cmds.c: regenerated

2006-04-19  Sven Neumann  <sven@gimp.org>

	* app/composite/make-installer.py: generate const arrays.

	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-generic-installer.c
	* app/composite/gimp-composite-mmx-installer.c
	* app/composite/gimp-composite-sse-installer.c
	* app/composite/gimp-composite-sse2-installer.c: regenerated.

2006-04-19  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: removed an unneeded call to
	gtk_widget_realize() (bug #324254). Sprinkled const qualifiers to
	avoid relocations.

2006-04-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: fixed bug in range calculation
	that caused display errors in the last row (bug #338378).

2006-04-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg.c (run): initialize global variables. Fixes
	bug #338373.

	* plug-ins/jpeg/NEWS: removed.

	* app/core/gimpparamspecs.c: indentation.

2006-04-18  Manish Singh  <yosh@gimp.org>

	* app/core/gimppickable.c (gimp_pickable_flush): do not return
	a value with void functions. Fixes bug #338904.

2006-04-18  Sven Neumann  <sven@gimp.org>

	* app/actions/plug-in-actions.c: indentation.

2006-04-18  Sven Neumann  <sven@gimp.org>

	* app/actions/dialogs-commands.c
	* app/config/gimpconfig-dump.c
	* app/core/gimpcontext.c
	* app/core/gimpdocumentlist.c
	* app/core/gimpparasitelist.c
	* app/display/gimpdisplayshell.c: avoid unnecessary relocations.

2006-04-18  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Remove obsolete entry for no_NO

2006-04-18  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (siox_drb): sync parameter names with the
	declaration in the header file.

2006-04-18  Manish Singh  <yosh@gimp.org>

	* app/core/gimpparamspecs.c: void functions should not try to return
	values. Fixes bug #338792.

2006-04-15  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpclipboard.c (gimp_clipboard_set_buffer): fix
	parameter name in API docs.

2006-04-15  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-utils.[ch]: added
	gimp_g_type_instance_get_memsize() and
	gimp_g_param_spec_get_memsize().
	Changed gimp_g_object_get_memsize() to use
	gimp_g_type_instance_get_memsize().
	Handle more boxed types in gimp_g_value_get_memsize().

	* app/core/gimp.c (gimp_get_memsize): add the memsize of some
	members that are new or were forgotten.

	* app/pdb/gimpprocedure.c
	* app/pdb/gimppluginprocedure.c: implement GimpObject::get_memsize().

2006-04-14  Manish Singh  <yosh@gimp.org>

	* app/plug-in/plug-in.h: Some compilers don't handle "'" in #error
	directives well. Reword to not use a contraction.

2006-04-13  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gif.c: code cleanup by Clarence Risher
	(bug #338002).

2006-04-13  Sven Neumann  <sven@gimp.org>

	* app/actions/file-actions.c: resolved conflicting mnemonic for
	the "Acquire" submenu.

2006-04-12  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimpnewrectselecttool.c: auto-convert rectangle to
	selection after creating or reiszing it.

2006-04-12  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version to 2.3.9.

2006-04-12  Sven Neumann  <sven@gimp.org>

	* Made 2.3.8 development release.

2006-04-12  Sven Neumann  <sven@gimp.org>

	* app/*.[ch]
	* app/*/*.[ch]: converted tabs to spaces.

2006-04-12  Sven Neumann  <sven@gimp.org>

	* libgimp*/gimp*.[ch]: converted tabs to spaces.

2006-04-12  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/lib.pl: create code with spaces instead of tabs.

	* libgimp/gimp*_pdb.[ch]: regenerated.

2006-04-12  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c
	* tools/kernelgen.c: converted tabs to spaces.

2006-04-12  Sven Neumann  <sven@gimp.org>

	* app/pdb/gimp-pdb.c (gimp_pdb_init_procs): removed profiling code.

2006-04-11  Carol Spears  <carol@gimp.org>

	* data/images/gimp-splash.png: new splash, nicknamed "Where's bolsh?".

2006-04-11  Manish Singh  <yosh@gimp.org>

	* desktop/Makefile.am: honor $(DESTDIR). Fixes bug #338147. Also
	some minor cleanups.

2006-04-11  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablepreview.c: increased SELECTION_BORDER to 8.

2006-04-11  Kevin Cozens  <kcozens@cvs.gnome.org>

	* app/pdb/gimp-pdb-query.c: Changed formatting of output from
	gimp-procedural-db-dump to make it more easily human (and machine)
	readable. Fixes bug #337843.

2006-04-11  Sven Neumann  <sven@gimp.org>

	* app/units.c
	* app/core/gimp-contexts.c: converted tabs to spaces.

2006-04-11  Michael Natterer  <mitch@gimp.org>

	* app/file/file-utils.[ch]
	* tools/pdbgen/pdb/fileops.pdb: fix typo: s/thumnail/thumbnail/

	* app/pdb/fileops_cmds.c: regenerated.

2006-04-11  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontext.[ch]: removed antique
	gimp_context_get_name() and _set_name().

	* app/actions/vectors-commands.c: #include "gimp-utils.h"

2006-04-10  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-ins.c (plug_ins_add_to_db): don't iterate the
	list of plug-in procedures here, take a GimpPlugInProcedure
	argument instead.

	(plug_ins_init): iterate the list here, just as all other lists
	too. Renamed local "filename" variable to "pluginrc". Moved
	"basename" to local scopes.

	* tools/pdbgen/pdb/procedural_db.pdb: minor cleanup.

	* app/pdb/procedural_db_cmds.c: regenerated.

2006-04-10  Sven Neumann  <sven@gimp.org>

	* libgimpmodule/gimpmoduledb.c (gimp_module_db_module_remove_func):
	don't ignore the return value of g_list_remove().

2006-04-10  Michael Natterer  <mitch@gimp.org>

	* app/file/file-utils.[ch]: added file_utils_load_thumbnail() and
	file_utils_save_thumbnail().

	* tools/pdbgen/pdb/fileops.pdb: remove lots of code and includes
	and use the new functions.

	* app/pdb/fileops_cmds.c: regenerated.

2006-04-10  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-file.c: some cleanup.

	(plug_in_file_register_load_handler)
	(plug_in_file_register_save_handler): first check if we have the
	procedure, then check its arguments, not the other way around
	(using an additional lookup). Old weird code was needed because
	these functions were split between app/plug-in and app/pdb.

	* app/plug-in/plug-in-file.h: whitespace.

2006-04-10  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpzoommodel.c (gimp_zoom_model_zoom_step):
	declared the array of zoom factors as const.

2006-04-10  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpactiongroup.[ch]: take const arrays of action
	entries.

	* app/actions/*-actions.c: declare action arrays as const.

2006-04-10  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-ins.[ch]: removed the plug_ins_file_foo()
	functions.

	* tools/pdbgen/pdb/fileops.pdb: removed lots of load and save
	handler register code.

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-file.[ch]: added everything in these new
	files. Load and save handlers are installed with
	plug_in_file_register_load_handler() and _save_handler() which
	also check the passed file procedure's parameters.

	* app/pdb/fileops_cmds.c: regenerated.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-ins-help.[ch]
	* app/plug-in/plug-ins-locale.[ch]: remove these files again...

	* app/plug-in/plug-in-help-domain.[ch]
	* app/plug-in/plug-in-locale-domain.[ch]: ... and add them here
	with changed namespace.

	* app/plug-in/plug-in-menu-branch.[ch]: new files keeping menu
	branches registered by plug-ins.

	* app/plug-in/plug-ins.[ch]: removed the menu branch stuff here.

	* app/actions/plug-in-actions.c
	* app/menus/plug-in-menus.c
	* app/plug-in/plug-in.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimpfileprocview.c
	* app/widgets/gimphelp.c
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly.

	* app/pdb/help_cmds.c
	* app/pdb/plug_in_cmds.c: regenerated.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-ins.[ch]: remove plug_ins_add_internal() and
	made plug_ins_procedure_insert() public as plug_ins_procedure_add().
	There's no reason internal plug-ins should be treated differently.

	* app/xcf/xcf.c: use plug_ins_procedure_add().

	* app/plug-in/plug-ins-help.c: fix comment.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-params.[ch] (plug_in_params_destroy):
	removed this function. We only have shallow GPParam arrays in the
	core that can be freed with g_free(), and gp_params_destroy()
	could always be used for freeing deep copies.

	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-run.c: simply g_free() the GPParam arrays.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-params.[ch]: removed function
	plug_in_proc_args_check().

	* app/pdb/gimppluginprocedure.[ch]: added new function
	gimp_plug_in_procedure_add_menu_path() which performs all menu
	path checks that were in the function above and adds the new
	menu_path to the procedure's list of menu_paths.

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_install)
	* app/plug-in/plug-in.c (plug_in_menu_register): use the new
	function and removed manual adding of the menu path to
	proc->menu_paths.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-ins-help.[ch]
	* app/plug-in/plug-ins-locale.[ch]: new files managing plug-in
	help domains and locale domains.

	* app/plug-in/plug-ins.[ch]: removed the functions here. Minor
	unrelated cleanups.

	* app/plug-in/plug-in.c
	* app/actions/plug-in-actions.c
	* app/menus/plug-in-menus.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimpfileprocview.c
	* app/widgets/gimphelp.c
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/plug_in.pdb: changed includes accordingly.

	* app/pdb/help_cmds.c
	* app/pdb/plug_in_cmds.c: regenerated.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-rc.[ch] (plug_in_rc_parse): return a GSList*
	of PlugInDefs instead of a boolean. Don't return anything if any
	parse error occurs (before, we trusted PlugInDefs from partially
	broken files). Don't call plug_ins_def_add_from_rc() and don't
	#include "plug-ins.h".

	* app/plug-in/plug-ins.[ch]: made plug_ins_def_add_from_rc()
	private and call it on all PlugInDefs returned by plug_in_rc_parse().
	Renamed plug_ins_init_file() to plug_ins_add_from_file()

	(plug_ins_init): remove code that checks for duplicate plug-in
	procedures...

	(plug_ins_procedure_insert): ... and add it where it belongs.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/xcf/xcf.c (xcf_init): don't register the XCF procedures
	with the PDB here...

	* app/plug-in/plug-ins.c (plug_ins_add_to_db): ... instead, don't
	special case internal procedures here so they get registered along
	with all other plug-in procedures.

2006-04-09  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-def.c (plug_in_def_set_mtime): set the mtime
	of all the plug_in_def's procedures too.

	* app/plug-in/plug-in-params.c: don't include "plug-in.h"

	* app/plug-in/plug-in-rc.c: minor cleanup. Fixed one error
	return value.

	* app/plug-in/plug-in.c (plug_in_push): simply use g_slist_remove();
	fiddling with list nodes manually is a questionable "optimization"
	for removing the first list element.

	* app/plug-in/plug-ins.c (plug_ins_init): some cleanup.

2006-04-08  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimprectangletool.c: center constraint with control
	key.

2006-04-07  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_run)
	(plug_in_handle_proc_return_priv): removed PlugInBlocked cruft,
	it was probably unused since ages.

	(plug_in_handle_proc_return_priv): removed...

	(plug_in_handle_proc_return)
	(plug_in_handle_temp_proc_return): ...and added its only remaining
	function call here.

	(plug_in_handle_tile_req): check if the requested drawable ID
	is really a drawable (not a vectors or...)

	(plug_in_handle_proc_install): cleanup.

2006-04-07  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-run.[ch]: made plug_in_run_temp() public and
	changed its parameters to match the ones of plug_in_run().

	* app/pdb/gimpprocedure.[ch]: added GimpProcedure::execute_async()
	which takes an additional display_ID parameter and returns nothing.

	* app/pdb/gimppluginprocedure.c
	* app/pdb/gimptemporaryprocedure.c: implement it, using
	plug_in_run() and plug_in_run_temp().

	* app/core/gimp-utils.[ch]: added gimp_value_array_truncate()
	which takes a GValueArray and the number of values to truncate the
	array to.

	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/pdb/gimp-pdb.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimphelp.c: use gimp_procedure_execute_async()
	instead of plug_in_run() and don't #include "plug-in-run.h".
	Truncate GValueArray passed to plug-ins again, and don't just pass
	some default values to the noninteractive args.

	Unrelated:

	* tools/pdbgen/pdb/plug_in.pdb: don't call
	gimp_menus_create_branch() here.

	* app/plug-in/plug-ins.c (plug_ins_menu_branch_add): call it here
	instead.

	* app/pdb/plug_in_cmds.c: regenerated.

2006-04-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpobject.h: added "guint disconnected : 1", we
	have enough space for flags now.

	* app/core/gimpobject.c (gimp_object_dispose): use the new
	object->disconnected flag instead of attaching that boolean to the
	object.

2006-04-07  Sven Neumann  <sven@gimp.org>

	* app/xcf/xcf.c (xcf_loaders): declared the array as const.

2006-04-07  Sven Neumann  <sven@gimp.org>

	* app/actions/tool-options-commands.c
	* app/core/gimp.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpbuffer.c
	* app/core/gimpcontext.c
	* app/core/gimpdatafactory.c
	* app/core/gimpgradient-load.c
	* app/core/gimpimage-merge.c
	* app/core/gimpimage-undo-push.c
	* app/core/gimpitem.c
	* app/core/gimplayer.c
	* app/core/gimplayermask.c
	* app/core/gimplist.c
	* app/core/gimppalette.c
	* app/dialogs/template-options-dialog.c
	* app/display/gimpdisplayshell-dnd.c
	* app/file/file-open.c
	* app/paint/gimp-paint.c
	* app/widgets/gimpdataeditor.c
	* app/widgets/gimpdatafactoryview.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimptemplateview.c
	* app/widgets/gimptoolbox-dnd.c: use gimp_object_set_static_name()
	and gimp_object_take_name() where appropriate.

2006-04-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpobject.[ch]: added flag "guint static_name : 1" and
	new APIs gimp_object_set_static_name() and _take_name().

	* app/pdb/gimpprocedure.[ch]: removed member "name". Use
	GimpObject's name instead.

	* app/actions/plug-in-actions.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/menus/plug-in-menus.c
	* app/pdb/gimp-pdb-query.c
	* app/pdb/gimp-pdb.c
	* app/pdb/gimppluginprocedure.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-ins-query.c
	* app/plug-in/plug-ins.c
	* app/xcf/xcf.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/fileops.pdb: use GimpObject API to set/get
	a procedure's name.

	* app/pdb/*_cmds.c: regenerated.

2006-04-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable.[ch]: renamed gimp_drawable_shadow() to
	gimp_drawable_get_shadow_tiles().

	* app/core/gimpimage.[ch]: renamed gimp_image_shadow() to
	gimp_image_get_shadow_tiles() and gimp_image_free_shadow() to
	gimp_image_free_shadow_tiles().

	* app/core/gimpdrawable-desaturate.c
	* app/core/gimpdrawable-equalize.c
	* app/core/gimpdrawable-invert.c
	* app/core/gimpdrawable-levels.c
	* app/core/gimpimagemap.c
	* app/plug-in/plug-in-message.c
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/image.pdb: changed accordingly.

	* app/pdb/color_cmds.c
	* app/pdb/image_cmds.c: regenerated.

2006-04-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable.[ch]: renamed gimp_drawable_cmap() to
	gimp_drawable_get_colormap() and let it return a const array.

	* app/core/gimpdrawable-convert.c
	* app/core/gimpimage-convert.c
	* app/core/gimpselection.c
	* app/display/gimpdisplayshell-preview.c: changed accordingly.

2006-04-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable.[ch]: renamed gimp_drawable_data() to
	gimp_drawable_get_tiles().

	* app/[lots of files]: changed accordingly.

2006-04-07  Michael Natterer  <mitch@gimp.org>

	* app/pdb/gimp-pdb.c (gimp_pdb_register)
	(gimp_pdb_unregister): ref all registered procedures.

	* app/xcf/xcf.c
	* tools/pdbgen/app.pl: unref newly created procedures after
	registering them.

	* app/core/gimp.[ch]: renamed member "plug_in_proc_defs" to
	"plug_in_procedures". Renamed "proc_def" variables to "procedure".

	* app/actions/plug-in-actions.c
	* app/menus/plug-in-menus.c: changed accordingly.

	* app/plug-in/plug-ins.[ch]: keep a reference to all procs which
	are in gimp->plug_in_procedures.

	(plug_ins_exit): unref them all and free the list. Apparently we
	were leaking them before on exit.

	* app/plug-in/plug-in-def.[ch]: s/proc_defs/procedures/. Ref
	procedures added with plug_in_def_add_procedure(). Added
	plug_in_def_remove_procedure() which unrefs them again. Removed
	"free_proc_defs" parameter from plug_in_def_free() and always
	unref the procedures.

	* app/plug-in/plug-in.[ch]: added plug_in_add_temp_proc() and
	plug_in_remove_temp() proc. Ref the added procedures.

	* app/plug-in/plug-in-message.c: use the new APIs instead of
	adding/removing procs and temp procs from their lists manually.
	Unref the newly created procedure after adding them to the
	plug_in_def or plug_in.

	* app/plug-in/plug-in-rc.[ch]
	* app/plug-in/plug-ins-query.c
	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly.

	* app/pdb/*_cmds.c: regenerated.

2006-04-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-merge.[ch] (gimp_image_merge_visible_layers):
	allow to discard invisible layers as suggested in bug #337557.

	* app/actions/image-commands.c
	* app/dialogs/image-merge-layers-dialog.[ch]: added a check button
	to the Merge Visible Layers dialog to control the new feature.

	* app/file/file-open.c
	* tools/pdbgen/pdb/image.pdb: pass FALSE for the new parameter.

	* app/pdb/image_cmds.c: regenerated.

2006-04-06  Sven Neumann  <sven@gimp.org>

	* app/composite/gimp-composite.c: removed unused global arrays.

2006-04-06  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/enumcode.pl: generate a const arrays of const strings.

	* libgimp/gimpenums.c.tail: regenerated.

2006-04-06  Sven Neumann  <sven@gimp.org>

	* app/dialogs/authors.xsl: generate const arrays of const strings.

	* app/dialogs/authors.h: regenerated.

2006-04-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimpcontext.c
	* app/core/gimpimage.c
	* app/paint-funcs/paint-funcs.c
	* app/widgets/gimpcontrollerkeyboard.c
	* app/widgets/gimpcontrollerwheel.c
	* app/widgets/gimpcursor.c
	* app/widgets/gimpdockable.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimpdockseparator.c
	* libgimp/gimpbrushselect.c
	* libgimp/gimpfontselect.c
	* libgimp/gimpgradientselect.c
	* libgimp/gimppaletteselect.c
	* libgimp/gimppatternselect.c
	* libgimpwidgets/gimpchainbutton.c
	* libgimpwidgets/gimpcolorscales.c
	* libgimpwidgets/gimpcolorselect.c
	* libgimpwidgets/gimppickbutton.c
	* libgimpwidgets/gimpstock.c: sprinkled some const qualifiers.

2006-04-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c (gimp_data_error_quark)
	* libgimpconfig/gimpconfig-error.c (gimp_config_error_quark)
	* libgimpthumb/gimpthumb-error.c (gimp_thumb_error_quark):
	g_quark_from_static_string() is already reasonably fast, not much
	point in caching the result.

2006-04-06  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: added some documentation.

2006-04-06  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in-enums.h
	* libgimpbase/gimpbaseenums.h: moved GimpRunMode enum to libgimpbase.

	* app/plug-in/plug-in-enums.c
	* libgimp/gimpenums.h
	* libgimpbase/gimpbaseenums.c
	* tools/pdbgen/enums.pl: regenerated.

	* libgimpbase/gimpbase.def: updated.

2006-04-06  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-types.h
	* app/plug-in/plug-in-proc-def.[ch]: removed...

	* app/pdb/Makefile.am
	* app/pdb/pdb-types.h
	* app/pdb/gimppluginprocedure.[ch]: ...and added here. Virtualized
	get_progname().

	* app/pdb/gimptemporaryprocedure.[ch]: new class derived from
	GimpPlugInProcedure.

	* app/pdb/gimpprocedure.[ch] (struct GimpProcedure): remove union
	exec_method and all the structs it needed. Procedure execution is
	properly virtualized now. Removed gimp_procedure_initialize() and
	grow the args and values arrays dynamically in
	gimp_procedure_add_argument()/return_value(). Added marshal_func
	parameter to gimp_procedure_new().

	* app/actions/plug-in-actions.c
	* app/actions/plug-in-commands.c
	* app/core/gimp-gui.c
	* app/dialogs/file-save-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/file/file-utils.c
	* app/gui/gui-vtable.c
	* app/menus/plug-in-menus.c
	* app/plug-in/plug-in-def.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-run.c
	* app/plug-in/plug-in.c
	* app/plug-in/plug-ins-query.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimpfileprocview.c
	* app/widgets/gimppluginaction.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/app.pl: changed accordingly.

	* app/pdb/*_cmds.c: regenerated.

	* app/pdb/gimp-pdb.c: added uglyness to make the app link again.

2006-04-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/compose.c: add layers in the expected order.

	* plug-ins/common/decompose.c: fixed out-of-bounds access to layer
	array (bug #322310).

2006-04-06  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-run.[ch]: removed plug_in_repeat()...

	* app/actions/plug-in-commands.c: ...and merged it into
	plug_in_repeat_cmd_callback(). It's essentially the same code as
	plug_in_run_cmd_callback() and there's no reason (except
	historical ones) to keep its implementation separate.

2006-04-06  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/common/mkgen.pl
	* plug-ins/common/plugin-defs.pl: introduced a new parameter
	'extralibs' and changed mkgen.pl to treat this equally to
	'optional' for non-optional plug-ins that needs different libs on
	different platforms

	* plug-ins/common/Makefile.am: regenerated

2006-04-05  Michael Schumacher  <schumaml@cvs.gnome.org>

	* configure.in: don't exclude the screenshot plug-in on os_win32

	* plug-ins/common/Makefile.am: change $(SCREENSHOT) into screenshot
	to make the screenshot plug-in build and install on the Microsoft
	Windows platform.

2006-04-05  Sven Neumann  <sven@gimp.org>

	* app/base/lut-funcs.[ch]: minor code cleanup, renamed a function,
	declared some functions as static.

	* app/core/gimpdrawable-equalize.c: changed accordingly.

2006-04-05   Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c
	* app/widgets/gimpimagepropview.c
	* app/widgets/gimpsizebox.c
	* app/widgets/gimptemplateeditor.c: replaced "dpi" with "ppi"
	(bug #326718).

2006-04-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-proc-frame.[ch]: added
	plug_in_proc_frame_get_return_vals().

	* app/plug-in/plug-in-run.c: removed plug_in_get_return_vals()
	and call plug_in_proc_frame_get_return_vals() instead.
	Don't leak stuff in case calling the plug-in fails.

2006-04-05  Tor Lillqvist  <tml@novell.com>

	* app/core/gimpobject.c (gimp_object_get_memsize): Check if
	object->name is NULL before attempting to pass it to
	g_strdup_printf(). Use "anonymous" for unnamed objects.

2006-04-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gifload.c: pulse the progress when loading an
	animation because we cannot tell beforehand how many frames are to
	be loaded.

2006-04-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_install):
	don't canonicalize names of GParamSpecs, they do this themselves.

2006-04-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-types.h
	* app/plug-in/plug-in-proc-def.[ch]: renamed to GimpPlugInProcedure
	and made a GObject derived from GimpProcedure (instead of having
	a pointer to a GimpProcedure). Added image_types and file_magic
	utility functions taken from plug-ins.[ch]. Still lives in the
	same crappy files because I am undecided where to put it...

	* app/pdb/gimpprocedure.c (gimp_procedure_real_execute): removed
	switch() statement and always call the internal marshaller because
	GimpProcedure::execute() is properly overridden by
	GimpPlugInProcedure now.

	* app/plug-in/plug-ins.[ch]: removed the mime_type and file_magic
	utilities added to GimpPlugInProcedure.

	* app/actions/file-commands.c
	* app/actions/plug-in-actions.[ch]
	* app/actions/plug-in-commands.[ch]
	* app/core/gimp-gui.[ch]
	* app/core/gimp.[ch]
	* app/core/gimpimage.[ch]
	* app/dialogs/file-open-dialog.c
	* app/dialogs/file-save-dialog.c
	* app/dialogs/print-size-dialog.c
	* app/file/file-open.[ch]
	* app/file/file-save.[ch]
	* app/file/file-utils.[ch]
	* app/gui/gui-vtable.c
	* app/menus/plug-in-menus.[ch]
	* app/plug-in/plug-in-def.[ch]
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-run.c
	* app/plug-in/plug-in.c
	* app/plug-in/plug-ins-query.c
	* app/widgets/gimpactiongroup.[ch]
	* app/widgets/gimpdnd-xds.c
	* app/widgets/gimpfiledialog.[ch]
	* app/widgets/gimpfileprocview.[ch]
	* app/widgets/gimppluginaction.[ch]
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/plug_in.pdb: changed accordingly.

	* app/pdb/fileops_cmds.c
	* app/pdb/plug_in_cmds.c: regenerated.

2006-04-04  Michael Natterer  <mitch@gimp.org>

	* app/pdb/gimpprocedure.[ch]: made it a GObject. Removed member
	"static_proc". Renamed gimp_procedure_init() to
	gimp_procedure_initialize().

	* app/pdb/gimp-pdb.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-proc-def.c
	* app/plug-in/plug-in-rc.c
	* app/xcf/xcf.c: changed accordingly.

	* tools/pdbgen/app.pl: register all internal procs
	dynamically. The static proc structs are gone.

	* tools/pdbgen/pdb/fileops.pdb: cosmetic change.

	* app/pdb/*_cmds.c: regenerated.

2006-04-04  Michael Natterer  <mitch@gimp.org>

	* app/pdb/Makefile.am
	* app/pdb/procedural_db.[ch]
	* app/pdb/procedural-db-query.[ch]: removed...

	* app/pdb/gimp-pdb.[ch]
	* app/pdb/gimp-pdb-query.[ch]: ...and added namespacefied.

	* app/batch.c
	* app/actions/vectors-commands.c
	* app/core/gimp.c
	* app/core/gimppdbprogress.c
	* app/dialogs/about-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/file/file-utils.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-params.c
	* app/plug-in/plug-in-proc-def.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-ins-query.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimpbrushselect.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimpfontselect.c
	* app/widgets/gimpgradientselect.c
	* app/widgets/gimphelp.c
	* app/widgets/gimppaletteselect.c
	* app/widgets/gimppatternselect.c
	* app/widgets/gimppdbdialog.c
	* app/xcf/xcf.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/font_select.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/palette_select.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

	* app/pdb/*_cmds.c: regenerated.

2006-04-04  Michael Natterer  <mitch@gimp.org>

	* app/pdb/Makefile.am
	* app/pdb/gimpargument.[ch]: removed...

	* app/pdb/gimp-pdb-compat.[ch]: ...and added with renamed functions.
	Added gimp_pdb_compat_param_spec().

	* app/pdb/gimpprocedure.[ch]: removed gimp_procedure_add_compat_arg()
	and _add_compat_value(). Use gimp_pdb_compat_param_spec() plus
	gimp_procedure_add_argument()/return_value() instead.

	* app/pdb/procedural-db-query.c
	* app/pdb/procedural_db.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-params.c
	* app/plug-in/plug-in-rc.c
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

	* app/xcf/xcf.c: no need to use compat functions here.

	* app/pdb/procedural_db_cmds.c: regnerated.

2006-04-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainertreeview-dnd.c
	(gimp_container_tree_view_drag_leave)
	(gimp_container_tree_view_drag_motion): use the correct API to
	unset the tree view's drop indicator. Apparently using the wrong
	API has stopped working due to changes in GtkTreeView...

2006-04-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gif.c (save_image): nicer progress update when
	saving GIF animations.

2006-04-04  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/gifload.c (ReadImage): update the progress text
	to show the frame number when loading multi-frame GIFs.

2006-04-04  Michael Natterer  <mitch@gimp.org>

	* app/pdb/pdb-types.h
	* app/pdb/gimpargument.[ch]: removed struct GimpArgument, struct
	GimpArgumentSpec, gimp_argument_init() and
	gimp_arguments_destroy().

	* app/pdb/gimpprocedure.h (struct GimpProcedure): use arrays of
	GParamSpec* for kepping proc inargs/outargs.

	* app/pdb/gimpprocedure.[ch]
	* app/pdb/procedural_db.[ch]
	* app/plug-in/plug-in-params.[ch]
	* app/plug-in/plug-in-proc-frame.[ch]
	* app/plug-in/plug-in-run.[ch]: use GValueArrays for procedure
	arguments and return values. Removed all n_args and n_return_vals
	parameters because GValueArrays know their length.

	* app/batch.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/core/gimppdbprogress.c
	* app/dialogs/about-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/pdb/procedural-db-query.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimpbrushselect.c
	* app/widgets/gimpfontselect.c
	* app/widgets/gimpgradientselect.c
	* app/widgets/gimphelp.c
	* app/widgets/gimppaletteselect.c
	* app/widgets/gimppatternselect.c
	* app/widgets/gimppdbdialog.[ch]
	* app/xcf/xcf.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly. Also
	removed #include "gimpargument.h" from most files.

	* app/pdb/*_cmds.c: regenerated.

2006-04-04  Sven Neumann  <sven@gimp.org>

	* app/text/gimpfont.c: moved new code to a utility function. Avoid
	use of deprecated Pango API. Removed tabs and trailing whitespace.

2006-04-04  Tor Lillqvist  <tml@novell.com>

	* app/text/gimpfont.c (gimp_font_get_new_preview): Provide
	script-specific short sample strings instead of "Aa" for fonts
	that seem to be designed for some specific non-Latin
	script. Pending a complete redesign and reimplementation of font
	selection, this is at least an improvement, and a partial solution
	to #137624.

2006-04-04  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-params.c (plug_in_params_to_args): don't
	compare GType with GimpPDBArgType (never "clean up" before
	committing ;)

2006-04-03  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparamspecs.[ch]: added a shitload of new GTypes and
	corresponding GParamSpecs to use them as PDB arguments.
	Each GimpPDBArgType has one or more corresponding GTypes in the
	core now.

	* app/pdb/gimpargument.[ch] (struct GimpArgument)
	(struct GimpArgumentSpec): removed "type" member because the
	GValue's/GParamSpec's GType carries just as much information now.

	(gimp_argument_type_to_pdb_arg_type): new function which maps
	GTypes to GimpPDBArgType.

	(gimp_pdb_arg_type_to_string): formerly known as
	procedural_db_type_name().

	* app/pdb/gimpprocedure.[ch]
	* app/pdb/procedural_db.[ch]: completely switch to GValue. Use the
	new GParamSpecs for procedure arguments. GimpPDBArgType is only
	used for adding compat args/values of plug-in procedures.

	(procedural_db_run_proc): the va_list expects a sequence of
	(GType, value, GType, value, ..., G_TYPE_NONE) now.

	* app/plug-in/plug-in-params.[ch]: changed accordingly.

	(plug_in_param_defs_check): removed this function.

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_install): use
	plug_in_proc_args_check() instead and initialize the GimpProcedure
	before doing so.

	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb.pl: use the new param spec types and their
	utility functions. Changed argument/value registration
	accordingly.

	* app/pdb/procedural-db-query.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/core/gimppdbprogress.c
	* app/dialogs/about-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimpbrushselect.c
	* app/widgets/gimpfontselect.c
	* app/widgets/gimpgradientselect.c
	* app/widgets/gimphelp.c
	* app/widgets/gimppaletteselect.c
	* app/widgets/gimppatternselect.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

	* app/pdb/*_cmds.c: regenerated.

2006-04-03  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl: remove newline flood.

	* app/pdb/internal_procs.c: regenerated shorter.

2006-04-03  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/drawable.pdb: improved API documentation for
	gimp-drawable-fill (bug #336864).

	* app/pdb/drawable_cmds.c
	* libgimp/gimpdrawable_pdb.c: regenerated.

2006-04-03  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-close.c: reduced precision of the
	display of time since the last change.

2006-04-03  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpscaletool.c: added a GimpSizeBox as a replacement
	for the InfoDialog widgets. Needs more work ...

2006-04-03  Sven Neumann  <sven@gimp.org>

	* desktop/Makefile.am: added an install hook that touches the
	toplevel icon theme directory as required by the spec.

2006-04-02  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-params.c: handle storage of GIMP_PDB_INT32
	plug-in params in GValues of type G_TYPE_UINT, they are used for
	guides and tattoos.

	* tools/pdbgen/pdb/guides.pdb (image_find_next_guide): don't
	validate the "guide" parameter, because 0 is an allowed value
	here.

	* app/pdb/guides_cmds.c: regenerated.

2006-04-02  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimprectangletool.c: square constraint with shift key.

2006-04-02  Michael Natterer  <mitch@gimp.org>

	Silence compiler warnings about...

	* app/config/gimprc-unknown.c: ...unused return value of
	g_slist_concat().

	* app/tools/gimpdrawtool.c: ...uninitialized variabe.

	* app/xcf/xcf-save.c: ...pointer signedness.

2006-04-02  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimptile.c (gimp_tile_cache_insert): silence warning
	about unused return value of g_list_concat().

2006-04-02  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb.pl: added a const_type member to all PDB types.
	Removed casts from all get_value_funcs which return const
	pointers, they can stay const now.

	* tools/pdbgen/app.pl: use the const_type to declare input args.

	* app/pdb/gimpprocedure.h: pass const arguments to the internal
	marshallers.

	* app/xcf/xcf.c: changed accordingly.

	* tools/pdbgen/pdb/paint_tools.pdb
	* tools/pdbgen/pdb/paths.pdb: added some const qualifiers.

	* tools/pdbgen/lib.pl: use the const_type for input args instead
	of adding the const qualifier based on the type.

	* app/pdb/_cmds.c
	* libgimp/gimpparasite_pdb.[ch]: regenerated.

	Unrelated:

	* app/pdb/gimpargument.c (gimp_arguments_destroy): no need any
	more to destroy the argument array in reverse order (we don't need
	access to the previous element because arrays in GValues memory
	manage themselves now).

2006-04-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparasitelist.[ch] (gimp_parasite_list_add): removed
	the return value again.

	(gimp_parasite_list_find): return a const parasite.

	* app/core/gimp-parasites.[ch]
	* app/core/gimpimage.[ch]
	* app/core/gimpitem.[ch] (*_parasite_attach): take a const
	parasite. Make a local copy of the parasite struct because
	gimp_parasite_shift_parent() changes it.

	(*_parasite_find): return a const parasite.

	* app/core/gimptemplate.c
	* app/text/gimptextlayer-xcf.c
	* app/xcf/xcf-load.c: changed accordingly.

2006-04-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-undo-push.[ch]
	(gimp_image_undo_push_image,item_parasite): use "const GimpParasite*"
	instead of gpointer for the parasite parameter.

	* app/core/gimpparasitelist.[ch] (gimp_parasite_list_add): added
	const to the parasite parameter, return the actually added
	parasite (which is a copy).

	* app/core/gimpunit.[ch] (_gimp_unit_new): added const to all
	string parameters.

2006-04-02  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/lib.pl: use the variable initializer defined with
	the PDB type instead of figuring it manually. Removed a line of
	code that checked for enums without "Gimp" prefix.

	* libgimp/gimpbrush_pdb.c
	* libgimp/gimpchannel_pdb.c
	* libgimp/gimpcontext_pdb.c
	* libgimp/gimpgradient_pdb.c
	* libgimp/gimplayer_pdb.c
	* libgimp/gimpunit_pdb.c
	* libgimp/gimpvectors_pdb.c: all doubles are initialized with 0.0
	instead of 0 now.

2006-04-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparamspecs.[ch]: removed GIMP_TYPE_PARASITE,
	GIMP_TYPE_PARAM_PARASITE and the GimpRGB utility functions. Some
	fixes/cleanup in the new array and string array code.

	* libgimpbase/gimpbase.def
	* libgimpbase/gimpparasite.[ch]
	* libgimpcolor/gimpcolor.def
	* libgimpcolor/gimprgb.[ch]: added the parasite and rgb stuff here.

	* app/pdb/gimpargument.c: #include "libgimpbase/gimpbase.h"

	* app/pdb/procedural_db.c: removed unused variable.

2006-04-01  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimpnewrectselecttool.c: don't automatically
	auto-shrink.

2006-04-01  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparamspecs.[ch]: added struct GimpArray which can
	keep static or allocated data. Added boxed types GIMP_TYPE_ARRAY
	and GIMP_TYPE_STRING_ARRAY. Added GParamSpecs for PDB int32,
	int16, int8, float and string arrays. Added functions to get, dup,
	set and set_static the various arrays from/to GValues.

	* app/pdb/gimpprocedure.c
	* app/pdb/procedural_db.c
	* app/plug-in/plug-in-params.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb.pl: use the new param pspecs and gimp_value
	functions to keep arrays in GimpArguments.

	* app/pdb/gimpargument.[ch] (gimp_arguments_destroy): removed
	parameter "gboolean full_destroy". It's not needed any longer
	because the GValues fully memory-manage all their data now.

	* app/batch.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/core/gimppdbprogress.c
	* app/dialogs/about-dialog.c
	* app/dialogs/print-size-dialog.c
	* app/dialogs/resize-dialog.c
	* app/display/gimpdisplayshell-handlers.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-run.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimphelp.c
	* app/widgets/gimppdbdialog.c
	* tools/pdbgen/pdb/fileops.pdb: changed accordingly.

	* app/pdb/brush_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/buffer_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/fonts_cmds.c
	* app/pdb/gimpargument.c
	* app/pdb/gimpargument.h
	* app/pdb/gimpprocedure.c
	* app/pdb/gradient_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/paint_tools_cmds.c
	* app/pdb/palettes_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/pattern_cmds.c
	* app/pdb/patterns_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/procedural_db.c
	* app/pdb/procedural_db_cmds.c
	* app/pdb/selection_tools_cmds.c
	* app/pdb/vectors_cmds.c: regenerated.

	... and ported everything to perl btw...

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/pdb/pdb-types.h
	* app/pdb/gimpargument.h: renamed struct Argument to GimpArgument
	and struct ProcArg to GimpArgumentSpec.

	* app/batch.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/core/gimppdbprogress.c
	* app/dialogs/about-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/pdb/gimpargument.c
	* app/pdb/gimpprocedure.[ch]
	* app/pdb/procedural-db-query.c
	* app/pdb/procedural_db.[ch]
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-params.[ch]
	* app/plug-in/plug-in-proc-frame.h
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-run.[ch]
	* app/plug-in/plug-ins.c
	* app/widgets/gimpbrushselect.c
	* app/widgets/gimpfontselect.c
	* app/widgets/gimpgradientselect.c
	* app/widgets/gimphelp.c
	* app/widgets/gimppaletteselect.c
	* app/widgets/gimppatternselect.c
	* app/widgets/gimppdbdialog.[ch]
	* app/xcf/xcf.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

	* app/pdb/*_cmds.c: regenerated.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/pdb/Makefile.am
	* app/pdb/gimpargument.[ch]: moved Argument and ProcArg structs
	and functions to these new files. Renamed functions to
	gimp_argument_foo().

	* app/pdb/procedural_db.[ch]: removed them here.

	* app/batch.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/core/gimppdbprogress.c
	* app/dialogs/about-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/pdb/gimpprocedure.c
	* app/pdb/procedural_db_cmds.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-params.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-run.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimphelp.c
	* app/widgets/gimppdbdialog.c
	* app/xcf/xcf.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/fileops.pdb: changed #includes and function
	calls accordingly.

	* app/pdb/*_cmds.c: regenerated.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/pdb/pdb-types.h
	* app/pdb/gimpprocedure.h: renamed struct ProcRecord to
	GimpProcedure. Added GIMP_IS_PROCEDURE() which checks for != NULL.

	* app/pdb/gimpprocedure.c
	* app/pdb/procedural-db-query.c
	* app/pdb/procedural_db.[ch]
	* app/batch.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/file/file-open.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-proc-def.h
	* app/plug-in/plug-in-proc-frame.[ch]
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-run.[ch]
	* app/plug-in/plug-in.[ch]
	* app/plug-in/plug-ins-query.c
	* app/plug-in/plug-ins.[ch]
	* app/widgets/gimphelp.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/app.pl: changed accordingly. Renamed 'proc_rec' and
	similarily named variables and parameters to 'procedure'.

	* tools/pdbgen/pdb/procedural_db.pdb: changed 'procedure'
	parameters to 'procedure_name'.

	* app/pdb/*_cmds.c
	* libgimp/gimpproceduraldb_pdb.[ch]: regenerated.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/pdb/gimpprocedure.h (struct ProcRecord): added new member
	"gboolean static_strings", so the ProcRecord struct and its
	strings can be marked as static separately.

	* app/pdb/gimpprocedure.[ch] (gimp_procedure_dispose): removed.

	(gimp_procedure_free): don't free the struct if it's static.

	(gimp_procedure_set_strings)
	(gimp_procedure_set_static_strings)
	(gimp_procedure_take_strings): new functions to set a procedure's
	strings.

	* app/pdb/procedural_db.c (procedural_db_free_entry): simply call
	gimp_procedure_free() on all procedures, the memory-manage
	themselves now.

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_install): use
	gimp_procedure_set_strings() instead of setting them manually.

	* app/xcf/xcf.c: register gimp-xcf-load and gimp-xcf-save
	dynamically so further ProcRecord struct changes don't affect this
	file.

	* tools/pdbgen/app.pl: set "static_proc" to TRUE for static procs.

	* app/pdb/*_cmds.c: regenerated.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-proc-def.h (struct PlugInProcDef)
	(plug_in_proc_def_set_icon): changed "icon_data" from gchar* to
	guint8*.

	* app/plug-in/plug-in-proc-def.c
	* app/plug-in/plug-in-rc.c
	* app/xcf/xcf.c: cast a bit to the fix resulting warnings. There
	are less casts needed than before.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/pdb/gimpprocedure.[ch] (struct ProcRecord): added new member
	"gboolean static_proc" which indicates whether a ProcRecord struct
	and its strings are static.

	(gimp_procedure_dispose): new function which frees the procedure's
	args and values, and its strings if it is not static.

	* app/xcf/xcf.c
	* tools/pdbgen/app.pl: set "static_proc" to TRUE for static procs.

	* app/pdb/procedural_db.c (procedural_db_free): call
	gimp_procedure_free() or gimp_procedure_dispose(), depending on
	procedure->static_proc.

	* app/pdb/procedural_db.h: removed #if 0'ed cruft.

	* app/plug-in/plug-in-proc-def.[ch]: removed
	plug_in_proc_def_get_proc().

	* app/file/file-open.c
	* app/file/file-save.c
	* tools/pdbgen/pdb/fileops.pdb: access proc_def->procedure directly.

	* app/pdb/*_cmds.c: regenerated.

2006-03-31  Sven Neumann  <sven@gimp.org>

	* app/dialogs/Makefile.am
	* app/dialogs/dialogs-types.h
	* app/dialogs/dialogs.c
	* app/dialogs/info-dialog.[ch]: good bye InfoDialog.

	* app/tools/gimpperspectivetool.[ch]
	* app/tools/gimprotatetool.[ch]
	* app/tools/gimpsheartool.[ch]
	* app/tools/gimptransformtool.[ch]: use GimpToolDialog instead of
	InfoDialog and add the widgets manually.

	* app/tools/gimpscaletool.c: commented out use of InfoDialog. This
	tools still needs to be ported to GimpToolDialog.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/pdb/gimpprocedure.[ch]: added gimp_procedure_new() and
	gimp_procedure_free() functions.

	* app/plug-in/plug-in-proc-def.h (struct PlugInProcDef): use a
	ProcRecord pointer instead of including the entire struct.

	* app/plug-in/plug-in-proc-def.c: use the new() and free()
	functions above to allocate/free the ProcRecord.

	* app/actions/plug-in-actions.c
	* app/actions/plug-in-commands.c
	* app/menus/plug-in-menus.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-run.c
	* app/plug-in/plug-in.c
	* app/plug-in/plug-ins-query.c
	* app/plug-in/plug-ins.c
	* app/xcf/xcf.c: changed accordingly.

	Unrelated:

	* app/pdb/gimpprocedure.c (gimp_procedure_execute): be more verbose
	when warning about out-of-bounds parameter values.

	* tools/pdbgen/pdb/fileops.pdb: allow GIMP_RUN_WITH_LAST_VALS for
	file_save because indirect saving (e.g. remote or compressed)
	needs it.

	* app/pdb/fileops_cmds.c: regenerated.

2006-03-31  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/scale-funcs.c: fixed compiler warning and
	sprinkled some empty lines for readability.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockable.c (gimp_dockable_destroy): always set
	dockable->blurb to NULL, also if its memory is shared with
	dockable->name.

2006-03-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_get_new_pixbuf): use
	"gtk-dialog-question" instead of "gimp-wilber-eek" to indicate a
	missing thumbnail.

2006-03-31  Michael Natterer  <mitch@gimp.org>

	* app/pdb/Makefile.am
	* app/pdb/gimpprocedure.[ch]: new files containing the functions
	operating on *one* procedure. Factored out of procedural_db.[ch]
	and renamed to gimp_procedure_foo().

	* app/pdb/procedural_db.[ch]: removed them here.

	* app/pdb/procedural-db-query.c
	* app/batch.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/core/gimppdbprogress.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-proc-def.[ch]
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-in-run.c
	* app/plug-in/plug-ins.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimphelp.c
	* app/widgets/gimppdbdialog.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/app.pl: changed #includes and function calls
	accordingly. No logic changed.

	* app/pdb/*_cmds.c: regenerated.

2006-03-31  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd_save.c: applied a patch from Guillermo
	S. Romero that adds basic support for saving layer masks.

2006-03-30  Sven Neumann  <sven@gimp.org>

	* app/paint/gimpclone.[ch]: use doubles for src coordinates. Added
	properties for "src-drawable", "src-x" and "src-y".

	* tools/pdbgen/pdb/paint_tools.pdb: resurrected cloning from
	drawables over the PDB. This used to be broken for quite a while.

	* app/pdb/paint_tools_cmds.c: regenerated.

2006-03-30  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_execute_proc): don't
	memset(0) the array of return values if the procedure didn't
	succeed. GValues don't like to be treated like that and I don't
	understand what the memsetting is good for. It just looks like a
	very bad hack.

	* app/file/file-open.c: additionally, don't access return_vals[>0]
	unless the procedure returned successfully.

	* app/core/gimppdbprogress.c
	* app/widgets/gimppdbdialog.c: procedural_db_run_proc() always
	returns non-NULL, no need to check for it.

2006-03-30  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/procedural_db.pdb: got rid of one more (the
	last?) perl utility function.

2006-03-30  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-utils.[ch]: added gimp_get_temp_filename().

	* tools/pdbgen/pdb/fileops.pdb (temp_name): removed the
	implementation here and call gimp_get_temp_filename() instead.

	* app/pdb/fileops_cmds.c: regenerated.

2006-03-30  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.h (structs Argument and ProcArg): renamed
	member "arg_type" to "type".

	* app/pdb/procedural_db.c
	* app/pdb/procedural-db-query.c
	* app/actions/plug-in-commands.c
	* app/core/gimppdbprogress.c
	* app/plug-in/plug-in-params.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-rc.c
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

	* app/pdb/fileops_cmds.c
	* app/pdb/procedural_db_cmds.c: regenerated.

2006-03-30  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (siox_foreground_extract): actually increment
	the tile counter used to limit the number of progress updates.

2006-03-30  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_free_entry): also
	unref the ProcRecord's GParamSpecs.

2006-03-30  Sven Neumann  <sven@gimp.org>

	* app/core/gimpparamspecs.c (gimp_param_parasite_validate): return
	FALSE in case of a valid parasite.

2006-03-30  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpwire.c (gimp_wire_read, gimp_wire_write):
	sprinkled a few G_UNLIKELY() macros to help the compiler.

2006-03-30  Sven Neumann  <sven@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_free_entry): actually
	free the memory allocated for the procedure entry.

2006-03-30  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.[ch] (struct Argument): replace the value
	union by a GValue.

	(procedural_db_argument_init)
	(procedural_db_compat_arg_init): new functions to initialize
	an Argument. They call g_value_init() on the Argument's value.

	(procedural_db_arguments)
	(procedural_db_return_values): initialize the returned Argument
	arrays so their GValues are ready to use. Allow to get the
	(unsuccessful) return values of a NULL ProcRecord.

	(procedural_db_destroy_args): g_value_unset() the values. Added a
	"gboolean full_destroy" parameter. Its only effect is to destroy
	PDB arrays, everything else is nicely memory managed by GValue.

	(procedural_db_execute)
	(procedural_db_run_proc): do GValue stuff. Added n_args and
	n_return_vals parameters to execute().

	(procedural_db_execute_proc): private function to execute a
	procedure. Validates the passed in arguments using the registered
	GParamSpecs before passing them to the resp. exec method.

	* app/plug-in/plug-in-params.[ch] (plug_in_params_to_args): needs
	an array of ProcArgs now in order to initialize the Arguments'
	GValues correctly. Passing NULL ProcArgs uses
	procedural_db_compat_arg_init(), so procedures (plug-ins)
	returning more values than expected work.

	(plug_in_args_to_params): do GValue stuff here too.

	(plug_in_args_destroy): removed this function,
	procedural_db_destroy_args() does the same now.

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_run):
	simplified quite a bit because everything returns n_return_values
	now. Call plug_in_params_to_args() only of the procedure was found.

	(plug_in_handle_proc_return_priv): pass ProcRecs to
	plug_in_params_to_args().

	* app/batch.c
	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/core/gimppdbprogress.c
	* app/dialogs/about-dialog.c
	* app/file/file-open.c
	* app/file/file-save.c
	* app/plug-in/plug-ins.c
	* app/plug-in/plug-in-progress.c
	* app/plug-in/plug-in-run.[ch]
	* app/widgets/gimphelp.c
	* app/widgets/gimppdbdialog.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/fileops.pdb: changed accordingly: don't
	g_new/g_free Argument arrays, always use procedural_db_foo()
	functions. Use GValue functions to get/set Arguments.

	* tools/pdbgen/pdb.pl: added get_value_func and set_value_func to
	all PDB types. Removed id_func, id_ret_func and check_func. Added
	flags which indicated that a type is an ID. Removed unused utility
	functions.

	* tools/pdbgen/lib.pl: use the flag instead of looking at
	functions and value types.

	* tools/pdbgen/app.pl: use the get_value_func and set_value_func
	to marshal inargs and outargs. Removed all checks performed on
	inargs because that's done by GParamSpec validation now. Added the
	missing bits to register excluded values with GimpParamSpecEnum.

	* app/pdb/*_cmds.c: regenerated.

2006-03-30  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-params.c (plug_in_param_defs_check): can't
	just cast the GPParamDefs to ProcArgs any more, their struct
	layouts are different now. Convert them into temporary ProcArgs
	before calling plug_in_proc_args_check()

2006-03-29  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparamspecs.[ch]: added GimpParamSpecEnum, which is
	a GParamSpecEnum plus the possibility to exclude values.
	Fixed lots of validation functions.
	Made all structs and macros public.

2006-03-29  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_init_proc): switch to
	g_return_val_if_fail() because it got a return value.

2006-03-29  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/fileops.pdb (file_save): pass the filename, not
	a GimpImage to file_utils_filename_to_uri(). Fixes bug #336527.

	* app/pdb/fileops_cmds.c: regenerated.

2006-03-29  Sven Neumann  <sven@gimp.org>

	* desktop/gimp.desktop.in.in: dropped the extension from the icon
	name (bug #336498).

2006-03-29  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/drawable.pdb (drawable_type_with_alpha): fixed
	forgotten antique enum values (RGBA_GIMAGE -> GIMP_RGB_IMAGE etc.)

	* app/pdb/drawable_cmds.c: regenerated.

2006-03-29  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.[ch] (procedural_db_init_proc): return the
	procedure.

	* tools/pdbgen/app.pl: use a local ProcRecord* variable so the
	generated code becomes more readable.

	* app/pdb/*_cmds.c: regenerated.

2006-03-29  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimp.c (gimp_run_procedure2): add newline to g_printerr().

2006-03-29  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/Makefile.am: added an explicit dependency to
	force creation of gimp-wilber-pixbufs.h.

2006-03-29  Sven Neumann  <sven@gimp.org>

	* desktop/Makefile.am
	* desktop/gimp.png: removed.

	* desktop/16x16/gimp.png
	* desktop/22x22/gimp.png
	* desktop/24x24/gimp.png
	* desktop/32x32/gimp.png
	* desktop/48x48/gimp.png
	* desktop/64x64/gimp.png
	* desktop/scalable/gimp.svg: new application icons in different
	sizes, contributed by Jakub Steiner.

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-wilber-32.png
	* themes/Default/images/stock-wilber-48.png: removed.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/wilber-16.png
	* libgimpwidgets/wilber-32.png
	* libgimpwidgets/wilber-48.png
	* libgimpwidgets/wilber-64.png: new window icons, identical to the
	new application icons.

	* libgimpwidgets/gimpwidgets-private.c: use the new window icons.

2006-03-29  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-params.c
	* app/plug-in/plug-in.c: string review.

2006-03-29  Tor Lillqvist  <tml@novell.com>

	* plug-ins/common/winprint.c (query): Make it compile again, add
	missing parameter to gimp_install_procedure().

2006-03-28  Sven Neumann  <sven@gimp.org>

        * configure.in (ALL_LINGUAS): removed "ka" until all po files have
	been added.

2006-03-28 Vladimer Sichinava  <vlsichinava@gmail.com>

        * configure.in: Added "ka" (Georgian) to ALL_LINGUAS

2006-03-28  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.[ch] (struct ProcArg): replace "name"
	and "description" by a GParamSpec.

	(procedural_db_init_proc)
	(procedural_db_add_argument)
	(procedural_db_add_return_value)
	(procedural_db_add_compat_arg)
	(procedural_db_add_compat_val): new functions which dynamically
	allocate and register arguments and return value arrays based on
	GParamSpecs.

	* app/pdb/procedural-db-query.c
	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-in-proc-def.c
	* app/plug-in/plug-in-rc.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

	* tools/pdbgen/app.pl: get rid of all ProcArg arrays and generate
	code that registers args and values with the procedures.

	* app/pdb/*_cmds.c: regenerated.

2006-03-28  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockbook.c (gimp_dockbook_drop_dockable): allow
	dropping of dockables from the same dockbook to the empty space
	next to the notebook tabs. This moves the dockable to the end.

2006-03-28  Sven Neumann  <sven@gimp.org>

	* app/*: did a global gdisp -> display substitution.

2006-03-28  Sven Neumann  <sven@gimp.org>

	* app/*
	* plug-ins/common/psd.c
	* plug-ins/rcm/rcm_misc.c: did a global gimage -> image substitution.

2006-03-28  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparamspecs.[ch] (gimp_param_spec_string): reordered
	params to be consistent with other param specs.

	(gimp_value_get_rgb): utility function which reads the value
	into a GimpRGB struct, instead of returning a pointer.

	(gimp_value_set_rgb): added for symmetry. Just calls
	g_value_set_boxed().

2006-03-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-exif.c
	* plug-ins/jpeg/jpeg-load.c
	* plug-ins/jpeg/jpeg.h: added a utility function to work around
	filename encoding problems when reading EXIF data (bug #335391).

2006-03-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/flame/flame.c
	* plug-ins/gfig/gfig.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/gimp.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/maze/maze.c
	* plug-ins/metadata/metadata.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/print/print.c
	* plug-ins/rcm/rcm.c
	* plug-ins/winsnap/winsnap.c: reviewed blurbs and marked them for
	translation.

2006-03-28  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_arguments): argh, get
	types from procedure->args, not procedure->values.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.[ch]: renamed procedural_db_return_args()
	to procedural_db_return_values() and added
	procedural_db_arguments(), which returns a newly allocated,
	initialized array of the procedure's arguments.

	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c
	* app/plug-in/plug-in-run.c
	* app/widgets/gimphelp.c
	* app/xcf/xcf.c
	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/fileops.pdb: changed accordingly, some cleanup.

	* app/pdb/*_cmds.c: regenerated.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.h (ArgMarshal): pass the ProcRecord as
	first parameter, so marshallers have access to their ProcRecord
	without the need for global variables.

	* app/pdb/procedural_db.c
	* app/xcf/xcf.c
	* tools/pdbgen/app.pl: changed addordingly.

	* tools/pdbgen/app.pl: removed support for invoke->proc. Introduce
	invoke->no_marshalling instead which indicates that invoke->code
	should be used literally as marshaller code, without any
	substitutions or generated variables.

	* tools/pdbgen/pdb/fileops.pdb: changed accordingly.

	* app/pdb/*_cmds.c: regenerated.

2006-03-27  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.c
	* app/tools/gimpforegroundselecttool.c: use Ctrl to switch between
	foreground and background refinement.

2006-03-27  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimpnewrectselecttool.c: allow modifier keys to work.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpparamspecs.[ch]: new unused files. Checked in so
	they can be easily reviewed.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/paint/paint-enums.h: register GimpBrushApplicationMode.

	* app/paint/paint-enums.c
	* tools/pdbgen/enums.pl: regenerated.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/enums.pl: was reordered by the commit below.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/base/base-enums.h
	* app/core/core-enums.h
	* app/plug-in/plug-in-enums.h: register some more enums.

	* app/plug-in/Makefile.am: added rules to generate plug-in-enums.c

	* app/base/base-enums.c
	* app/core/core-enums.c
	* app/plug-in/plug-in-enums.c: (re)generated.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/file/file-open.c
	* app/file/file-save.c
	* app/plug-in/plug-ins.c: use procedural_db_run_proc() instead of
	procedural_db_execute(). execute() should be avoided for anything
	but PDB-internal calls.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_run_proc): some fixes and
	more robustness:

	- Procedures return proc->num_values + 1 return values, not only
	  proc->num_values.
	- Allocate the Argment array with g_new0 and initialize all its
	  types before parsing the va_list.
	- Stop parsing the va_list on GIMP_PDB_END, so passing less
	  parameters is possible.
	- Cleanup switch() cases.

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* libgimpcolor/gimprgb.c (gimp_param_rgb_init): default to fully
	opaque black instead of fully transparent.

	(gimp_param_spec_rgb): allow a NULL default value. Simply use the
	opaque black set in init().

2006-03-27  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_run_proc): return a
	proper CALLING_ERROR on parameter type mispatch, not just NULL.

	* app/pdb/procedural_db.h: removed unused struct NetExec.

2006-03-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/fade-outline.scm: simplified blurb.

2006-03-27  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied changes from Kristian Jantz that
	improve the progress update from the SIOX routine.

2006-03-26  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/lib.pl: removed support for arg->implicit_fill.

	* tools/pdbgen/pdb/progress.pdb (progress_init): remove it without
	replacement, the generated function on the libgimp side is
	internal anyway.

	* libgimp/gimpprogress_pdb.[ch] (_gimp_progress_init): regenerated
	with a display_ID parameter.

	* libgimp/gimpprogress.c (gimp_progress_init): pass
	gimp_default_display() to _gimp_progress_init().

2006-03-26  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimpcropoptions.c
	* app/tools/gimprectangleoptions.[ch]
	* app/tools/gimprectangletool.[ch]: moved options gui creation
	from the tool to the options.

	* app/tools/gimpselectionoptions.c
	* app/tools/gimpnewrectselecttool.[ch]
	* app/tools/gimpellipseselecttool.[ch]: ported ellipse selection
	tool to the new rectangle interface.

2006-03-25  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptool.[ch]
	* app/tools/tool_manager.[ch]: add "gboolean proximity" parameter
	to GimpTool::oper_update() in order to emphasize its importance
	and to avoid peeking around in the GimpDisplayShell struct.

	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcolortool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpforegroundselecttool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimppainttool.c
	* app/tools/gimprectangletool.[ch]
	* app/tools/gimpselectiontool.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c: changed accordingly. Got rid of
	quite some "display/gimpdisplayshell.h" includes.

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): pass shell->proximity to
	tool_manager_oper_update_active().

2006-03-25  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpforegroundselecttool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimpvectortool.c (GimpTool::oper_update): don't push
	status messages when shell->proximity is FALSE. Make sure the old
	status message gets popped regardless of shell->proximity's
	value. Fixes stuck status bar messages.

2006-03-25  Karine Delvare  <edhel@gimp.org>

	* app/tools/gimprectangletool.c: react to highlight notification.
	Fixes bug #335652.

2006-03-25  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl: factored out a utility function. I need it
	in another pretty messed up tree ;)

2006-03-25  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/brush.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/context.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/gradient.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/paint_tools.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/selection_tools.pdb
	* tools/pdbgen/pdb/text_tool.pdb: removed all ':' before and all
	'()' around %%desc%%.

	* tools/pdbgen/app.pl: add () to int32, float and boolean
	descriptions automatically. They all look the same now.

	* tools/pdbgen/lib.pl: tweaked regex so %%desc%% doesn't appear in
	libgimp API docs.

	* app/pdb/brush_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/channel_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/context_cmds.c
	* app/pdb/floating_sel_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/paint_tools_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/selection_tools_cmds.c
	* app/pdb/text_tool_cmds.c
	* libgimp/gimpedit_pdb.c
	* libgimp/gimpplugin_pdb.c: regenerated.

2006-03-24  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb: replace '<' by '<=' in all
	int32 ranges so they specify min and max values.

	* app/pdb/channel_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/drawable_transform_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/procedural_db_cmds.c: regenerated.

2006-03-24  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/brush.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/display.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/floating_sel.pdb
	* tools/pdbgen/pdb/gradient.pdb
	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/paint_tools.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/selection_tools.pdb
	* tools/pdbgen/pdb/text_tool.pdb
	* tools/pdbgen/pdb/transform_tools.pdb
	* tools/pdbgen/pdb/undo.pdb
	* tools/pdbgen/pdb/vectors.pdb: replaced 'True', 'true' and
	'non-zero' by 'TRUE' where appropriate. Added %%desc%% to enum arg
	descriptions where missing. Get object names using
	gimp_object_get_name(). Set 'success' more consistently. Removed
	{ } from all enum arg descriptions...

	* tools/pdbgen/app.pl (make_arg_recs): ...and add the { }
	generically here. Removed some code that replaced the ',' by 'or'
	for enums without { } so all enums are now documented the same.

	* app/pdb/<some>_cmds.c
	* libgimp/<some>_pdb.c: regenerated.

2006-03-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c (load_thumbnail_image): close the file
	descriptor.

2006-03-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mapcolor.c
	* plug-ins/common/warp.c: avoid using FG and BG.

2006-03-24  Sven Neumann  <sven@gimp.org>

	* app/actions/colormap-editor-actions.c
	* app/actions/gradient-editor-actions.c
	* app/actions/palette-editor-actions.c
	* app/core/gimp-edit.c
	* app/core/gimpchannel-select.c: some more string changes, mainly
	avoiding the use of FG and BG in labels where there's no need for
	being concise.

2006-03-24  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectselecttool.c: renamed from "Rect Select" to
	"Rectangle Select" (bug #335715).

	* app/core/gimpchannel-select.c (gimp_channel_select_rectangle):
	string change (bug #335715).

	* plug-ins/common/svg.c: follow the change to the file format
	label done in the shared-mime-info package (bug #335716).

	* configure.in: fixed the --without-libtiff case in the summary
	(bug #335764).

2006-03-23  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-gui.[ch]
	* app/gui/gui-vtable.c
	* app/plug-in/plug-in-progress.[ch]: pass displays around as
	GimpObject, not as integer IDs.

	* tools/pdbgen/pdb/progress.pdb: changed accordingly.

	* app/pdb/progress_cmds.c
	* libgimp/gimpprogress_pdb.c: regenerated.

2006-03-23  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/stddefs.pdb: removed std_image_arg(),
	std_antialias_arg() and std_orientation_enum().

	* tools/pdbgen/pdb/*.pdb: changed accordingly. Did a global
	s/gimage/image/. Some more cleanup.

	* tools/pdbgen/pdb/grid.pdb
	* tools/pdbgen/pdb/guides.pdb: removed utility functions.

	* tools/pdbgen/pdb/vectors.pdb: reordered procedures. Removed
	obsolete procedure.

	* app/pdb/channel_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/grid_cmds.c
	* app/pdb/guides_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/parasite_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/selection_tools_cmds.c
	* app/pdb/text_tool_cmds.c
	* app/pdb/undo_cmds.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpdrawable_pdb.c
	* libgimp/gimpimage_pdb.[ch]
	* libgimp/gimpvectors_pdb.[ch]: regenerated.

2006-03-23  Sven Neumann  <sven@gimp.org>

	* themes/Small/gtkrc: commented out the hardcoded font setting.
	It's just wrong to do this until bug #325767 has been addressed.

2006-03-23  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayoptions.c: avoid code duplication by
	using a #define.

	* app/config/gimpdisplayconfig.c: for fullscreen mode, default to
	the same settings as we do for normal editing mode.

2006-03-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd.c
	* plug-ins/common/psd_save.c: converted shorts to gint16 and longs
	to gint32 to fix 64bit problems as reported in bug #335130.

2006-03-23  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (siox_foreground_extract): fixed the potential
	problem that the cache wouldn't have been cleared correctly if
	both background and foreground areas are added at the same time.

2006-03-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/randomize.c: removed version number from dialog
	title, improved progress update.

2006-03-22  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl: removed support for invoke->pass_through.

	* tools/pdbgen/pdb/fileops.pdb: added a C utility function and
	call it from both register_load_handler() and
	register_magic_load_handler() instead of letting the generated
	invokers call each other.

	* app/pdb/fileops_cmds.c: regenerated.

2006-03-22  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/buffer.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/display.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/font_select.pdb
	* tools/pdbgen/pdb/gimprc.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/text_tool.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: more perl stuff flattened,
	cleanup, nitpickyness.

	* app/pdb/buffer_cmds.c
	* app/pdb/color_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/selection_cmds.c
	* libgimp/gimpselection_pdb.[ch]: regenerated.

2006-03-22  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (siox_foreground_extract): fixed assertions and
	progress calculation.

2006-03-22  Simon Budig  <simon@gimp.org>

	* tools/pdbgen/pdb/paths.pdb: deprecated path_get_point_at_dist()

	* app/pdb/paths_cmds.c
	* libgimp/gimppaths_pdb.[ch]: regenerated.

2006-03-22  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch] (siox_foreground_extract): let the caller
	specify a region of interest. Call the progress function more often.

	* app/core/gimpdrawable-foreground-extract.c
	(gimp_drawable_foreground_extract_siox): pass a region of interest
	to siox_foreground_extract() to speed up the SIOX tool.

2006-03-22  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/image.pdb: reordered vectors procedures.

	* tools/pdbgen/pdb/parasite.pdb: removed all utility functions
	and added parasite procedures for vectors.

	* tools/pdbgen/pdb/paths.pdb: removed get_visible() and
	set_visible(), deprecated all procedures that are already
	implemented in the vectors namespace.

	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/vectors.pdb: minor cleanup.

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/channel_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/parasite_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpimage_pdb.[ch]
	* libgimp/gimpparasite_pdb.[ch]
	* libgimp/gimppaths_pdb.[ch]
	* libgimp/gimpvectors_pdb.c: regenerated.

2006-03-22  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.h: export GimpBrushGeneratedShape to the PDB.

	* tools/pdbgen/pdb/brush.pdb: use it instead of int32.

	* libgimp/gimp.def: add gimp_brush_generated_shape_get_type().

	* tools/pdbgen/pdb/brush_select.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/display.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/floating_sel.pdb
	* tools/pdbgen/pdb/font_select.pdb
	* tools/pdbgen/pdb/fonts.pdb
	* tools/pdbgen/pdb/gimprc.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/help.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/message.pdb
	* tools/pdbgen/pdb/misc.pdb
	* tools/pdbgen/pdb/paint_tools.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/palette_select.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/paths.pdb
	* tools/pdbgen/pdb/pattern_select.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/text_tool.pdb: more perl/C code separation,
	removed some more utility functions, cleanup.

	* app/pdb/brush_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/fonts_cmds.c
	* app/pdb/gimprc_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/palettes_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/patterns_cmds.c
	* tools/pdbgen/enums.pl
	* libgimp/gimpbrush_pdb.[ch]
	* libgimp/gimpenums.c.tail
	* libgimp/gimpenums.h: regenerated.

2006-03-21  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/gradient.pdb: removed all perl utility
	functions. Added some C ones instead. Doc fixes.

	* app/pdb/gradient_cmds.c
	* libgimp/gimpgradient_pdb.c: regenerated.

2006-03-21  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: removed properties that are
	rather internal states.

2006-03-21  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangleoptions.[ch]
	* app/tools/gimprectangletool.[ch]: hide properties accessors.

2006-03-21  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcropoptions.c: use GIMP_RECTANGLE_OPTIONS_PROP_LAST
	instead of duplicating properties.

2006-03-21  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl: removed support for arg->cond.

	* tools/pdbgen/edit.pdb
	* tools/pdbgen/image.pdb: move its logic into the C code.

	* app/pdb/edit_cmds.c
	* app/pdb/image_cmds.c: regenerated.

2006-03-19  Michael Natterer  <mitch@gimp.org>

	* app/core/core-types.h: define GIMP_COORDS_DEFAULT_VALUES, a
	struct initializer for GimpCoords.

	* app/core/gimpimage-snap.c
	* app/paint/gimppaintcore-stroke.c
	* app/vectors/gimpbezierstroke.c
	* app/vectors/gimpvectors-compat.c
	* tools/pdbgen/pdb/paint_tools.pdb
	* tools/pdbgen/pdb/vectors.pdb: use it here.

	* app/pdb/paint_tools_cmds.c
	* app/pdb/vectors_cmds.c: regenerated.

2006-03-19  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: untabbified.

2006-03-19  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl: remove some code that has no effect on the
	generated code any more.

2006-03-18  Sven Neumann  <sven@gimp.org>

	* app/actions/context-actions.c: added more action blurbs.

	* menus/image-menu.xml.in: moved toolbox and fg/bg color actions
	to the bottom of the Tools menu.

2006-03-18  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl
	* tools/pdbgen/pdb/progress.pdb: got rid of the unused
	arg->no_id_lookup.

	* tools/pdbgen/pdb/plug_in.pdb: flattened a forgotten foreach().

2006-03-18  Sven Neumann  <sven@gimp.org>

	* app/actions/plug-in-actions.c
	* app/actions/select-actions.c
	* app/actions/view-actions.c: added more action blurbs.

2006-03-18  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/unit.pdb: got rid of all perl utility
	functions.

	* app/pdb/unit_cmds.c: regenerated.

2006-03-18  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/drawable.pdb: got rid of all perl utility
	functions.

	* app/pdb/drawable_cmds.c
	* libgimp/gimpdrawable_pdb.c: regenerated.

2006-03-18  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/app.pl: removed support for arg->on_success and
	arg->on_fail.

	* tools/pdbgen/pdb/gradient_select.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/paint_tools.pdb
	* tools/pdbgen/pdb/selection_tools.pdb: moved their logic to the C
	code.

	* app/pdb/gradient_select_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/paint_tools_cmds.c
	* app/pdb/selection_tools_cmds.c: regenerated.

2006-03-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/lic.c: applied a patch from Karine Delvare that
	fixes a performance problem in the Van Gogh plug-in (bug #113615).

2006-03-17  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpplugin.py: _run should pass on the return
	value. Fixes bug #334874.

2006-03-17  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb.pl: generically map NULL to -1 when returning
	object IDs.

	* tools/pdbgen/app.pl: remove support for "return_fail => foo"
	which did the same on a per-return-value basis. Removed some more
	obscure perl without any effect on the generated code.

	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/text_tool.pdb: don't use "return_fail => foo".

	* app/pdb/channel_cmds.c
	* app/pdb/display_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/drawable_transform_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/transform_tools_cmds.c
	* app/pdb/vectors_cmds.c: regenerated.

2006-03-17  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/image.pdb: removed all remaining utility
	functions, some cleanup and doc fixes.

	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.c: regenerated.

2006-03-17  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]
	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: allow to use red, green or
	blue for the selection preview used by the foreground selection tool.

2006-03-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/*.c: removed trailing period from procedure blurbs.

2006-03-16  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/image.pdb: replaced code generated by now gone
	utility functions list_proc() and type_move() by pdbgen
	boilerplate code. Fixed wrapper of gimp_image_lower_channel() to
	actually lower the channel (it was lowering the active layer).

	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.[ch]: regenerated.

2006-03-15  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/AlienMap2.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/align_layers.c
	* plug-ins/common/animationplay.c
	* plug-ins/common/animoptimize.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/autocrop.c
	* plug-ins/common/autostretch_hsv.c
	* plug-ins/common/blinds.c
	* plug-ins/common/blur.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/bumpmap.c
	* plug-ins/common/c_astretch.c
	* plug-ins/common/cartoon.c
	* plug-ins/common/ccanalyze.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/checkerboard.c
	* plug-ins/common/color_enhance.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/compose.c
	* plug-ins/common/convmatrix.c
	* plug-ins/common/cubism.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/decompose.c
	* plug-ins/common/deinterlace.c
	* plug-ins/common/depthmerge.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/destripe.c
	* plug-ins/common/diffraction.c
	* plug-ins/common/displace.c
	* plug-ins/common/dog.c
	* plug-ins/common/edge.c
	* plug-ins/common/emboss.c
	* plug-ins/common/engrave.c
	* plug-ins/common/exchange.c
	* plug-ins/common/film.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/fp.c
	* plug-ins/common/fractaltrace.c
	* plug-ins/common/gauss.c
	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/gnomeprint.c
	* plug-ins/common/gqbist.c
	* plug-ins/common/gradmap.c
	* plug-ins/common/grid.c
	* plug-ins/common/guillotine.c
	* plug-ins/common/hot.c
	* plug-ins/common/illusion.c
	* plug-ins/common/iwarp.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/laplace.c
	* plug-ins/common/lic.c
	* plug-ins/common/mail.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/mblur.c
	* plug-ins/common/mosaic.c
	* plug-ins/common/neon.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/nlfilt.c
	* plug-ins/common/noisify.c
	* plug-ins/common/normalize.c
	* plug-ins/common/nova.c
	* plug-ins/common/oilify.c
	* plug-ins/common/papertile.c
	* plug-ins/common/photocopy.c
	* plug-ins/common/pixelize.c
	* plug-ins/common/plasma.c
	* plug-ins/common/plugin-browser.c
	* plug-ins/common/polar.c
	* plug-ins/common/procedure-browser.c
	* plug-ins/common/randomize.c
	* plug-ins/common/retinex.c
	* plug-ins/common/ripple.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/screenshot.c
	* plug-ins/common/sel_gauss.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/shift.c
	* plug-ins/common/sinus.c
	* plug-ins/common/smooth_palette.c
	* plug-ins/common/snoise.c
	* plug-ins/common/sobel.c
	* plug-ins/common/softglow.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/spread.c
	* plug-ins/common/struc.c
	* plug-ins/common/threshold_alpha.c
	* plug-ins/common/tile.c
	* plug-ins/common/tileit.c
	* plug-ins/common/tiler.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/unsharp.c
	* plug-ins/common/video.c
	* plug-ins/common/vinvert.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/warp.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/common/wind.c
	* plug-ins/common/winprint.c
	* plug-ins/common/zealouscrop.c: Give "helpful" blurbs to menu-
	accessible plugins, and mark them for translation.  Probably there
	is room for improvement in some of them.  Still needs to be done for
	plug-ins not in "common".

2006-03-15  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/channel.pdb
	* tools/pdbgen/pdb/layer.pdb: removed dim(), accessors(),
	get_prop() and set_prop() utility functions and expand everything
	to pdbgen boilerplate code. Use the real layer mask API instead of
	the crap from pdb_glue.h. Fixed some API docs.

	* app/pdb/channel_cmds.c
	* app/pdb/layer_cmds.c
	* libgimp/gimplayer_pdb.c: regenerated.

	* app/pdb/Makefile.am
	* app/pdb/pdb_glue.h: bye bye uglyness.

2006-03-15  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb.pl: define init values for all pdb types.

	* tools/pdbgen/app.pl: unconditionally initialize all return
	values, and don't initialize any parameter.

	* tools/pdbgen/pdb/*.pdb: removed init => 1 from all arguments
	and return values.

	* app/pdb/*_cmds.c: regenerated.

2006-03-15  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/context.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gimprc.pdb
	* tools/pdbgen/pdb/gradient.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/guides.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/layer.pdb
	* tools/pdbgen/pdb/message.pdb
	* tools/pdbgen/pdb/misc.pdb
	* tools/pdbgen/pdb/paths.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/undo.pdb
	* tools/pdbgen/pdb/unit.pdb: get rid of much more alias => 'foo'.
	Even more cleanup.

	* app/pdb/context_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/fileops_cmds.c
	* app/pdb/gradient_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/guides_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/layer_cmds.c
	* app/pdb/message_cmds.c
	* app/pdb/misc_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/plug_in_cmds.c
	* app/pdb/procedural_db_cmds.c
	* app/pdb/selection_cmds.c
	* app/pdb/undo_cmds.c
	* app/pdb/unit_cmds.c
	* libgimp/gimpdrawable_pdb.[ch]
	* libgimp/gimpimage_pdb.[ch]: regenerated.

2006-03-15  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/brush.pdb
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/context.pdb
	* tools/pdbgen/pdb/drawable.pdb
	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/gradient.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/palette.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/paths.pdb
	* tools/pdbgen/pdb/pattern.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: let pdbgen handle *only*
	variables for arguments and return values and declare all local
	variables inside the C code. Removed lots of alias => '<expression>'
	and no_declare => 1 stuff from return values, instead let pdbgen
	declare the variables and assign them manually in the C code.
	More cleanup.

	* tools/pdbgen/app.pl: removed support for proc->vars.

	* app/pdb/brush_cmds.c
	* app/pdb/brushes_cmds.c
	* app/pdb/context_cmds.c
	* app/pdb/drawable_cmds.c
	* app/pdb/drawable_transform_cmds.c
	* app/pdb/gradient_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/image_cmds.c
	* app/pdb/palette_cmds.c
	* app/pdb/palettes_cmds.c
	* app/pdb/paths_cmds.c
	* app/pdb/pattern_cmds.c
	* app/pdb/patterns_cmds.c
	* app/pdb/procedural_db_cmds.c
	* app/pdb/transform_tools_cmds.c
	* libgimp/gimpbrush_pdb.c
	* libgimp/gimpbrushes_pdb.c
	* libgimp/gimpgradient_pdb.c
	* libgimp/gimpgradients_pdb.c
	* libgimp/gimppalette_pdb.c
	* libgimp/gimppalettes_pdb.c
	* libgimp/gimppatterns_pdb.c: regenerated.

2006-03-15  Sven Neumann  <sven@gimp.org>

	* app/actions/channels-actions.c
	* app/actions/edit-actions.c
	* app/actions/file-actions.c
	* app/actions/image-actions.c
	* app/actions/layers-actions.c
	* app/actions/view-actions.c: added more action blurbs.

2006-03-15  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpaction.c (gimp_action_set_proxy): enabled
	tooltips on all menu items for easier review of the action blurbs.
	This should be made configurable.

2006-03-15  Sven Neumann  <sven@gimp.org>

	* app/actions/image-actions.c
	* app/actions/layers-actions.c: added more tooltips, please review.

2006-03-14  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/*.pdb: remove lots of perl crack:
	- create almost	all parameter arrays manually instead of
	  generating them from utility functions
	- removed lots of other utility functions
	- moved variable declarations into the enclosed code snippets
	  where possible
	- some cleanup and API doc fixes

	* tools/pdbgen/stddefs.pdb: added some perl crack:
	define utility functions for all contributors which own more than
	some functions, so they can change their names and email addresses
	at a central place.

	* app/pdb/[many].c: regenerated.

	* libgimp/gimpcolor_pdb.c
	* libgimp/gimpdrawabletransform_pdb.c
	* libgimp/gimptransformtools_pdb.c
	* libgimp/gimpvectors_pdb.c: ditto. Changed affect only API docs.

2006-03-13  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-guides.[ch]: added gimp_image_get_guide() and
	gimp_image_get_next_guide(), which take a guide_ID and return the
	image's GimpGuide with that ID (the one after that for next_guide())

	* tools/pdbgen/pdb/guides.pdb: use them instead of having this
	code here.

	* app/pdb/guides_cmds.c: regenerated.

2006-03-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage.c (gimp_image_raise_layer_to_top,
	gimp_image_lower_layer_to_bottom): silently return TRUE if the
	layer is already at the top (or the bottom respectively).

2006-03-11  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpwire.h: added a const qualifier to the
	GimpWireIOFunc signature.

	* libgimp/gimp.c (gimp_write)
	* app/plug-in/plug-in.c (plug_in_write): changed accordingly.

2006-03-10  Sven Neumann  <ven@gimp.org>

	* app/widgets/gimpaction.c: factored out some code to a utility
	function.

	* app/config/gimpguiconfig.[ch]
	* app/config/gimprc-blurbs.h
	* app/dialogs/preferences-dialog.c
	* app/gui/gui.c
	* app/plug-in/plug-in-run.c
	* libgimp/gimp.c
	* libgimpbase/gimpprotocol.[ch]: renamed tool_tips to tooltips in
	variables and in the gimprc.

	* app/config/gimpbaseconfig.[ch]: removed stingy_memory_use from
	the GimpBaseConfig struct.

2006-03-10  Sven Neumann  <sven@gimp.org>

	* modules/colorsel_water.c: remove color if Shift is pressed.

2006-03-10  Sven Neumann  <sven@gimp.org>

	* app/actions/drawable-actions.c
	* app/actions/image-actions.c
	* app/actions/layers-actions.c: added tooltips, more to come here.

2006-03-10  Sven Neumann  <sven@gimp.org>

	* app/actions/plug-in-actions.c (plug_in_actions_add_proc): use
	the procedure blurb as tooltip.

	* plug-ins/common/blur.c
	* plug-ins/common/gauss.c
	* plug-ins/common/mblur.c: rephrased some blurbs and marked them
	for translation.

	* app/pdb/procedural-db-query.c: formatting.

2006-03-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpuimanager.c: connect to the menu items' "select"
	and "deselect" signals instead of "enter-notify-event" and
	"leave-notify-event", so tooltips work with keynav.

2006-03-09  Michael Natterer  <mitch@gimp.org>

	* app/gui/gui.c: show tooltps from the global image popup menu too.

2006-03-09  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpuimanager.[ch]: added "show-tooltip" and
	"hide-tooltip" signals. Connect to each menu item's
	enter-notify-event and leave-notify-event. On enter, emit
	show-tooltip, on leave emit hide-tooltip.

	* app/display/gimpdisplayshell.c: connect to the menubar ui
	manager's show-tooltip and hide-tooltip signals and show the tip
	in the display's status bar.

2006-03-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd.c: create empty layers of image size instead
	of skipping empty layers in PSD files (bug #317044).

2006-03-09  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpexport.c (gimp_export_image): offer the choice to
	Flatten or Merge Visible Layers (bug #332336).

2006-03-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: added accelerators for "close"
	and "quit" actions.

	* plug-ins/helpbrowser/dialog.c: added "close" to the popup menu.

2006-03-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_main.c (button_press): do not attempt to
	use a NULL function pointer.

	* plug-ins/imagemap/imap_preview.c: added some sanity checks.

2006-03-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: also add the popup menu to the
	standard playback window, not only to the detached one.

2006-03-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: register an icon, improved
	tooltips, some minor cleanups.

2006-03-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): free the whole list instead of
	deleting it one element at a time.

2006-03-06  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplay.c (gimp_display_reconnect): keep a
	reference on the old image until the display is connected to the
	new one. Fixes bug #333568.

	* app/display/gimpdisplay-handlers.c: fixed typo in comment.

	* app/actions/file-commands.c: cosmetics.

2006-03-05  DindinX  <dindinx@gimp.org>

	* app/core/gimpimage-merge.c: fixed merge down (previously broken by a
	not that purely cosmetic change). Spotted by Amar Takhar.

2006-03-04  Sven Neumann  <sven@gimp.org>

	* app/dialogs/file-save-dialog.c (file_save_dialog_use_extension):
	use descriptive verbs in action buttons instead of Yes and No.

2006-03-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolordisplayeditor.c
	* app/widgets/gimpcontrollereditor.c
	* app/widgets/gimpcontrollerlist.c: set tooltips dynamically.

2006-03-03  Sven Neumann  <sven@gimp.org>

	* app/dialogs/vectors-import-dialog.c (vectors_import_dialog_new)
	* app/widgets/gimpfiledialog.c (gimp_file_dialog_add_filters):
	fixed capitalization of filter names.

2006-03-03  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/fileops.pdb:
	* app/dialogs/file-open-dialog.c
	* app/display/gimpdisplayshell-dnd.c
	* app/file/file-open.[ch]
	* app/widgets/gimplayertreeview.c: pass the selected load procedure
	to file_open_layer() or NULL if none is selected. Fixes bug #333207.

	* app/pdb/fileops_cmds.c: regenerated.

2006-03-02  Manish Singh  <yosh@gimp.org>

	* plug-ins/jpeg/jpeg-exif.c (jpeg_query): use proper sentinel type
	for gtk_dialog_set_alternative_button_order. Fixes bug #330800.

2006-03-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.c (gimp_image_real_flush): made it a static
	function (was accidentially non-static).

2006-03-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppickable.[ch]: added new methods ::get_bytes() and
	::flush()

	* app/core/gimpchannel.c
	* app/core/gimpdrawable.c
	* app/core/gimpimagemap.c
	* app/core/gimpprojection.c: implement ::get_bytes()

	* app/core/gimpprojection.c: implement ::flush() (immediately
	process both the idle renderer's queue and the unflushed update
	areas, to make sure that any reading from the projection will
	re-construct it).

	* app/core/gimp-edit.c
	* app/core/gimpchannel.c
	* app/core/gimpimage-contiguous-region.c
	* app/core/gimpimage-crop.c
	* app/core/gimppalette-import.c
	* app/paint/gimpclone.c
	* app/tools/gimpbycolorselecttool.c
	* app/tools/gimpiscissorstool.c
	* tools/pdbgen/pdb/image.pdb: use the pickable interface more
	consistently when reading from any drawable or the projection, and
	call gimp_pickable_flush() before doing so. Fixes bug #332933.

	* app/core/gimpimage-pick-color.c: added comment why the we don't
	call gimp_pickable_flush() here.

	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.c: regenerated.

2006-03-02  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/image.pdb: corrected documentation for
	gimp_image_[lower|raise]_layer(). We do not any longer refuse to
	raise and lower based on a missing alpha channel.

	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.c: regenerated.

2006-03-02  Sven Neumann  <sven@gimp.org>

	* autogen.sh: readded version check for glib-gettextize.

2005-03-02  Øyvind Kolås  <pippin@gimp.org>

	* autogen.sh: added improved check_version() function that handles
	multiple digits in major/minor/micro.

2006-03-02  Sven Neumann  <sven@gimp.org>

	* autogen.sh: removed version check for glib-gettextize. It didn't
	work with glib 2.10.x.

2006-03-01  Sven Neumann  <sven@gimp.org>

	* app/about.h: use U+00A9 COPYRIGHT SIGN.

2006-02-28  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/Makefile.am
	* plug-ins/pygimp/pygimp-util.h: New file, provides only an
	initialization wrapper for now (pygimp_init_pygobject).

	* plug-ins/pygimp/gimpcolormodule.c
	* plug-ins/pygimp/gimpenumsmodule.c: Use pygimp_init_pygobject here.
	Closes bug #332622.

2006-02-28  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrush.c
	* app/core/gimpbuffer.c
	* app/core/gimpimagefile.c
	* app/core/gimppattern.c
	* app/dialogs/preferences-dialog.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimprectangletool.c
	* app/tools/gimprectselecttool.c
	* app/widgets/gimpimagepropview.c
	* app/widgets/gimpsizebox.c
	* app/widgets/gimptemplateeditor.c
	* plug-ins/common/ccanalyze.c
	* plug-ins/common/svg.c
	* plug-ins/common/wmf.c
	* plug-ins/imagemap/imap_cmd_guides.c
	* plug-ins/imagemap/imap_statusbar.c: use U+00D7 MULTIPLICATION SIGN
	instead of x when displaying sizes.

2006-02-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: coding style cleanup.

2006-02-27  Manish Singh  <yosh@gimp.org>

	* app/base/cpu-accel.c
	* app/composite/gimp-composite-3dnow.h
	* app/composite/gimp-composite-mmx.h
	* app/composite/gimp-composite-sse.h
	* app/composite/gimp-composite-sse2.h: check for __PIC__ in addition
	to PIC.

2006-02-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-merge.c: purely cosmetic change.

2006-02-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c (detach_callback): show the
	shape window with a small offset.

2006-02-26  Simon Budig  <simon@gimp.org>

	* plug-ins/bmp/bmpwrite.c: properly round the resolution entry.
	Fixes bug #332501.

2005-06-26  Hans Breuer  <hans@breuer.org>

	* **/makefile.msc app/gimpcore.def : updated

2006-02-26  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpzoompreview.c: added "drawable" as construct-only
	property so that the widget can be constructed using g_object_new().

2006-02-26  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpaspectpreview.c: added "drawable" as construct-only
	property so that the widget can be constructed using g_object_new().

2006-02-26  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablepreview.c: added "drawable" as construct-only
	property so that the widget can be constructed using g_object_new().

2006-02-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: use a normal toplevel window for
	the plug-in dialog. Moved the Help button to the toolbar. Use a
	toggle action for Play.

2006-02-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpstock.h: added a define for GIMP_STOCK_DETACH
	to the list of missing icons.

	* app/actions/dockable-actions.c: use GIMP_STOCK_DETACH instead of
	GTK_STOCK_CONVERT.

	* plug-ins/common/animationplay.c: unveiled a long-standing secret
	feature of the Animation Playback plug-in by. Needs more love.

2006-02-25  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c (quit_close_all_dialog_container_changed):
	default to GTK_RESPONSE_CANCEL.

2006-02-25  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c (remap_indexed_layer): fixed bug
	introduced by optimization (bug #332324).

2006-02-25  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c (generate_histogram_gray): only
	count pixels with an alpha value > 127.

2006-02-24  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc.c (gimp_rc_save)
	* app/gui/session.c (session_save): s/The GIMP/GIMP/

2006-02-24  Simon Budig  <simon@gimp.org>

	* app/base/lut-funcs.c: change the LUT function for the contrast.
	Fixes the buggy behaviour as described in bug #319872 and
	bug #332068 and makes the behaviour consistent with the standard
	contrast formula. However, I am leaving the bug open to discuss
	further improvements.

	Untabbified.

2006-02-23  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpwire.[ch]: added utility functions to send
	GimpRGB values over the wire.

	* libgimpbase/gimpprotocol.c: use the new functions.

2006-02-22  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpvectors-import.c: fix the import of svg circles.

2006-02-21  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-data.[ch]: new files which keep the
	plug-in data list.

	* app/pdb/procedural_db.[ch]: removed here, it only cluttered the
	file with unrelated functionality.

	* app/core/gimp.[ch]
	* app/actions/plug-in-commands.c
	* tools/pdbgen/pdb/procedural_db.pdb: changed accordingly.

	* app/pdb/procedural_db_cmds.c: regenerated.

2006-02-20  Michael Natterer  <mitch@gimp.org>

	* app/actions/file-actions.c (file_actions_setup)
	* app/actions/plug-in-actions.c (plug_in_actions_setup): use ""
	instead of NULL for "no label" on an action (we can't rely on the
	stock item to provide the label that prevents the gtk warning from
	firing).

2006-02-20  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: zero division check should be
	changed according to the aspect redefinition

2006-02-20  Simon Budig  <simon@gimp.org>

	* app/tools/gimppaintoptions-gui.c: allow maximum jitter of 5.0.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* app/config/gimpcoreconfig.[ch]
	* app/config/gimprc-blurbs.h
	* app/core/gimp.[ch]: keep a history of recently used plug-ins.

	* app/plug-in/plug-in-run.[ch] (plug_in_repeat): pass an index
	into the plug-in history.

	* app/actions/plug-in-actions.c
	* app/actions/plug-in-commands.c
	* app/menus/plug-in-menus.c
	* menus/image-menu.xml.in: added a submenu with recently used
	plug-ins to the Filters menu. Fixes bug #148855.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpmagnifytool.c: renamed to Zoom tool.

	* menus/image-menu.xml.in: changed accordingly.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfgbgview.c (gimp_fg_bg_view_expose): tweaked
	drawing of shadows.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* etc/sessionrc: set tab-style for dockables.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* configure.in: updated comments.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/Lighting/lighting_ui.c: use a check button instead of a
	toggle button.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mosaic.c: use a combo-box to select the tiling
	primitives.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/progress.pdb
	* libgimp/gimpprogress.[ch]: applied slightly modified patch from
	Stephane Chauveau.  Wraps the gimp_progress_update() PDB call so
	that redundant progress updates are suppressed in libgimp.  This
	gives a noticeable speedup for all plug-ins that update the
	progress too often (bug #331470).

	* libgimp/gimpprogress_pdb.[ch]: regenerated.

2006-02-20  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpplugin.c (gimp_plugin_icon_register): added a cast to
	get rid of a compiler warning.

2006-02-19  Tor Lillqvist  <tml@novell.com>

	* configure.in: Don't think we have Mac OS X TWAIN if on Win32.

2006-02-19  DindinX  <dindinx@gimp.org>

	* plug-ins/common/mosaic.c: applied a (slightly modified) patch from
	Esben Mose Hansen which add triangles as a tile type.

2006-02-19  Manish Singh  <yosh@gimp.org>

	* m4macros/binreloc.m4: introduce automake conditional USE_BINRELOC.

	* app/Makefile.am: ... and use the above here, so that -rpath is only
	specified when binreloc functionality is enabled. Fixes bug #331677.

2006-02-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gif.c (save_image): removed warning when reusing
	a color index for transparency. Shouldn't pose a problem for any
	GIF viewer and only confuses our users.

2006-02-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gauss.c: added some const qualifiers and other
	minor cleanups.

2006-02-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gauss.c: applied patch from Stephane Chauveau.
	Code cleanup and major performance improvements (bug #331569).

2006-02-18  Sven Neumann  <sven@gimp.org>

	* app/config/gimpguiconfig.c: as an experiment, removed the color
	and foo area from the toolbox and added a Colors dock to the
	default session.

2006-02-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/convmatrix.c (redraw_channels): check if the
	widget exists before setting its state.

2006-02-17  Sven Neumann  <sven@gimp.org>

	* app/dialogs/desaturate-dialog.c: applied patch from Alexandre
	Prokoudine that adds a missing mnemonic (bug #331473).

2006-02-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/iwarp.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/ifscompose/ifscompose_utils.c: applied patches from
	Stephane Chauveau. Reduces number of progress updates (bug #331470).

2006-02-17  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: use a scrolled window as
	suggested in bug #331436.

2006-02-16  Sven Neumann  <sven@gimp.org>

	* app/config/gimpguiconfig.c: as an experiment, changed default
	window hint for toolbox and docks to utility window.

2006-02-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c: applied patch from Stephane Chauveau
	that corrects the calculation of the tile cache size (bug #331344).

2006-02-15  Carol Spears  <carol@gimp.org>

	* plug-ins/pygimp/gimpfu.py: removed the snake image from the
        gimp-python dialogs.

2006-02-15  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptooldialog.c: do not unset focus-on-map for all
	tool dialogs.

	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpmeasuretool.c: explicitely do it here instead.

2006-02-15  Sven Neumann  <sven@gimp.org>

	* app/dialogs/info-dialog.c: unset focus-on-map for info dialogs.

2006-02-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c (render_frame): applied patch
	from Michael Schumacher that fixes a potential crash in the
	plug-in (bug #328919).

2006-02-14  Sven Neumann  <sven@gimp.org>

	Added some tool shortcuts:

	* app/tools/gimpcroptool.c: Shift+C
	* app/tools/gimpfuzzyselecttool.c: changed from Z to U.
	* app/tools/gimpmagnifytool.c: Z.
	* app/tools/gimpmeasuretool.c: Shift+M.

2006-02-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/despeckle.c (despeckle_median): fixed incorrect
	loop boundaries. Should fix bug #331044.

2006-02-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icoload.c
	* plug-ins/winicon/icosave.c: applied patches from Felix Pahl.
	Fixes incorrect bit shifts that caused scrambled transparency
	(bug #330692).

2006-02-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sparkle.c: renamed parameter from opacity to
	transparency, since that's how it is being used (bug #331086,
	spotted by Joao).

	* plug-ins/common/gauss.c (gauss): apply multiply_alpha() on the
	source buffer, not the destination (bug #331051, spotted by
	Stephane Chauveau).

2006-02-13  Sven Neumann  <sven@gimp.org>

	* app/config/gimpguiconfig.c: make the internal help browser the
	default for all platforms (bug #329888).

2006-02-13  Sven Neumann  <sven@gimp.org>

	* configure.in: output a nicer and more complete summary.

2006-02-12  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimplayer.c: remove extra semicolon; fix for
	bug #330882 from Jens Granseuer.

2006-02-09  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version to 2.3.8.

2006-02-08  Sven Neumann  <sven@gimp.org>

	* Made 2.3.7 development release.

2006-02-08  Roman Joost	<romanofski@gimp.org>

	* data/images/gimp-splash.png: splash screen for a new release

2006-02-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu.c: register menu branches for the
	web-browser script.

	* plug-ins/script-fu/scripts/web-browser.scm: string review.

2006-02-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpimagemaptool.c: use canonical property names.

2006-02-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/raw.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/helpbrowser/dialog.c
	* plug-ins/imagemap/imap_browse.c
	* plug-ins/print/gimp_main_window.c: use canonical signal names.

2006-02-07  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablepreview.[ch]
	* libgimp/gimpzoompreview.c: reduced code duplication by exporting
	two GimpDrawablePreview functions for internal use.

2006-02-07  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c
	(gimp_scrolled_preview_area_event): fixed check that suppresses
	the redraw for motion events that don't cause the preview to scroll.

2006-02-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectangletool.c: applied a patch from Dennis
	Bjorklund that prevents a possible division by zero and fixes the
	calculation of the center point.

2006-02-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-gui.c
	* app/widgets/gimptoolbox.c: use GIMP_ACRONYM.

	* app/main.c (gimp_show_version): use GIMP_NAME.

	* app/about.h (GIMP_LICENSE): s/This program/GIMP/g

2006-02-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: added const qualifier.

2006-02-06  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreview.c: connect-after to "realize" and
	"size-allocate" signals of the preview area and call the
	set-cursor method from the callback.

	* libgimpwidgets/gimpscrolledpreview.c: no need to explicitely set
	the cursor now that the virtual method is used correctly.

	* libgimp/gimpzoompreview.c: implement set-cursor and set the move
	cursor in accordance with the zoom factor.

2006-02-06  DindinX  <dindinx@gimp.org>

	* plug-ins/common/mblur.c: length should at least be 1, or the zoom
	mode will produce garbage. length==0 is useless in other modes.
	(reported by daelstorm on freenode/#gimp)

2006-02-03  Jay Cox  <jaycox@gimp.org>

	* plug-ins/common/ripple.c: Fixed antialiasing.  Replaced "black"
	with "blank".  Fixes bug #308750

2006-02-03  Carol Spears  <carol@gimp.org>

	* app/tools/gimprectangletool.c: Applied patch from Joao S. O. Bueno
	Calligaris that corrects status bar coordinate display.  Fixes bug
        #329817

2006-02-04  DindinX  <dindinx@gimp.org>

	* plug-ins/common/pnm.c: untabbified and some other small
	style-related fixes.

2006-02-03  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: aspect ratio should be width /
	height.

2006-02-01  Matt Wilson  <msw@gimp.org>

	* plug-ins/common/compressor.c (run): file_{gz,bz2}_save takes 5
	parameters, not 4.  Correct the nparams check in non-interactive
	mode.

2006-02-01  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animoptimize.c: renamed to "Unoptimize".

	* plug-ins/common/polar.c: renamed to "Polar Coordinates" and some
	other string changes.

2006-02-01  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_about.c
	* plug-ins/imagemap/imap_file.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_menu.c
	* plug-ins/imagemap/imap_preferences.c: renamed to "Image Map" and
	unified spelling.

2006-01-31  Michael Schumacher  <schumaml@cvs.gnome.org>

	* app/core/gimpbrushpipe.c: applying a patch by Joao S. O. Bueno
	Calligaris which implements PIPE_SELECT_VELOCITY for brush
	pipes. Fixes bug #150227.

2006-01-31  Sven Neumann  <sven@gimp.org>

	* app/tools/gimplevelstool.c (gimp_levels_tool_color_picker_new):
	manually add the icons to the color picker buttons instead of
	abusing the stock-id property. Fixes bug #325745.

2006-01-31  Michael Natterer  <mitch@gimp.org>

	* autogen.sh: s/head -1/head -n 1/ (spotted by brix).

2006-01-30  Akkana Peck	 <akkana@cvs.gnome.org>

	* configure.in: don't report yes for xjt if on Windows.

2006-01-30  Michael Schumacher  <schumaml@cvs.gnome.org>

	* app/tools/gimpmeasuretool.c: use the closest corner of the
	current pixel as origin. Fixes bug #329000.

2006-01-30  Sven Neumann  <sven@gimp.org>

	* app/config/config-types.h: moved GIMP_PARAM defines from here ...

	* libgimpbase/gimpparam.h: ... to this new files.

	* libgimpbase/Makefile.am
	* libgimpbase/gimpbasetypes.h: include the new header file.

	* libgimp/gimpfontselectbutton.c
	* libgimpconfig/gimpcolorconfig.c
	* libgimpthumb/gimpthumbnail.c
	* libgimpwidgets/gimpcellrenderercolor.c
	* libgimpwidgets/gimpcellrenderertoggle.c
	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/gimpcolorbutton.c
	* libgimpwidgets/gimpcolordisplay.c
	* libgimpwidgets/gimpcontroller.c
	* libgimpwidgets/gimpdialog.c
	* libgimpwidgets/gimpenumcombobox.c
	* libgimpwidgets/gimpintcombobox.c
	* libgimpwidgets/gimppageselector.c
	* libgimpwidgets/gimppreview.c
	* libgimpwidgets/gimppreviewarea.c
	* libgimpwidgets/gimpzoommodel.c: use the GIMP_PARAM defines to
	avoid unnecessary string allocations.

2006-01-29  Michael Natterer  <mitch@gimp.org>

	* autogen.sh: make autoconf check more robust and the generic
	"Tool old" error message more verbose.

2006-01-29  Akkana Peck	 <akkana@cvs.gnome.org>

	* configure.in: Print a table of features enabled/disabled
        at the end (as discussed in bug 303383c11 and c13).

2006-01-29  Roman Joost	 <romanofski@gimp.org>

	* plug-ins/script-fu/scripts/web-browser.scm: adds eight
	bookmarks to the user manual (Basics, Dialogs and Docks, Drawing
	Simple Objects, Fileformats, Photography, Preparing for the Web,
	Using Paths). It also adds a new link to http://docs.gimp.org.

2006-01-26  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpthumbbox.c: some finetuning to the labels.

2006-01-25  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpzoompreview.[ch]: added a priv pointer to the
	instance struct and changed the GET_PRIVATE() macro to access the
	private data via that pointer.

2006-01-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpintcombobox.[ch]
	* libgimpwidgets/gimppageselector.[ch]
	* libgimpwidgets/gimpzoommodel.[ch]: added a priv pointer to the
	instance struct and changed the GET_PRIVATE() macro to access the
	private data via that pointer.

	* libgimpwidgets/gimpscrolledpreview.[ch]
	* libgimpwidgets/gimpwidgets.def: added a priv pointer to the
	instance struct and moved all private data to the
	GimpScrolledPreviewPrivate struct. Added freeze/thaw methods so
	that derived widgets can be implemented without accessing private
	data.

	* libgimp/gimpzoompreview.c: use gimp_scrolled_preview_[freeze|thaw].

	* libgimp/gimpfontselectbutton.[ch]: let the priv pointer be an
	anonymous void pointer.

2006-01-25  Sven Neumann  <sven@gimp.org>

	* docs/gimp.1.in: document some more environment variables.

	* docs/gimprc.5.in
	* docs/gimptool.1.in: unified spelling of "plug-in".

2006-01-24  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/guides-new.scm
	* plug-ins/script-fu/scripts/guides-new-percent.scm: allow guides
	at the right and bottom edges of the canvas. Fixes bug #328320.

2006-01-21  Simon Budig  <simon@gimp.org>

	* desktop/gimp.desktop.in.in: Added "GTK" category. Fixes
	bug #328012.

        * tools/pdbgen/pdb/vectors.pdb: removed unused variables.
	* app/pdb/vectors_cmds.c: regenerated.

2006-01-21  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangleoptions.c
	* app/tools/gimprectangletool.c: indentation fixes.

2006-01-20  Michael Natterer  <mitch@gimp.org>

	* configure.in: applied modified patch from Henrik Brix Andersen
	which adds the possibility to build --without-alsa, even if alsa
	is available. Fixes bug #327777.

2006-01-19  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_dispose):
	don't call g_free() on a widget pointer. Fixes bug #327639.

2006-01-18  Michael Natterer  <mitch@gimp.org>

	* app/config/config-types.h: define GIMP_PARAM_STATIC_STRINGS
	which is G_PARAM_STATIC_NAME|NICK|BLURB. Also define
	GIMP_PARAM_READABLE, _WRITABLE and _READWRITE which include
	GIMP_PARAM_STATIC_STRINGS.

	* app/*/*.c: use them for all object properties so their
	strings are not copied.

2006-01-17  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/quit-dialog.c (quit_close_all_dialog_new):
	s/preview-size/view-size/

2006-01-17  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/image-new-dialog.c (image_new_dialog_new): one
	more s/preview-size/view-size/.

2006-01-17  Raphaël Quinet  <raphael@gimp.org>

	* tools/pdbgen/pdb/buffer.pdb
	* tools/pdbgen/pdb/color.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/guides.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/paths.pdb
	* tools/pdbgen/pdb/selection.pdb
	* tools/pdbgen/pdb/selection_tools.pdb: removed trailing
	whitespace in the parts of these files generating C code.

	* app/composite/make-installer.py (print_function_table): updated
	so that the code does not add trailing whitespace in generated
	function tables.

	* (about 130 *.[ch] files): automatically removed trailing
	whitespace from 3460 lines.

2006-01-17  Sven Neumann  <sven@gimp.org>

	* app/about.h (GIMP_COPYRIGHT): updated year in copyright.

	* app/actions/dialogs-actions.c: string change.

2006-01-17  Michael Natterer  <mitch@gimp.org>

	* app/actions/dockable-actions.c
	* app/actions/dockable-commands.[ch]
	* app/dialogs/dialogs-constructors.[ch]
	* app/dialogs/dialogs.c
	* app/display/gimpdisplayshell-layer-select.c
	* app/widgets/gimpbrusheditor.[ch]
	* app/widgets/gimpbrushfactoryview.h
	* app/widgets/gimpbufferview.[ch]
	* app/widgets/gimpchanneltreeview.c
	* app/widgets/gimpcomponenteditor.[ch]
	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontainercombobox.[ch]
	* app/widgets/gimpcontainereditor.[ch]
	* app/widgets/gimpcontainerentry.[ch]
	* app/widgets/gimpcontainergridview.[ch]
	* app/widgets/gimpcontainerpopup.[ch]
	* app/widgets/gimpcontainertreeview.[ch]
	* app/widgets/gimpcontainerview.[ch]
	* app/widgets/gimpdatafactoryview.[ch]
	* app/widgets/gimpdevicestatus.c
	* app/widgets/gimpdialogfactory.[ch]
	* app/widgets/gimpdocumentview.[ch]
	* app/widgets/gimpfontview.[ch]
	* app/widgets/gimpgradienteditor.[ch]
	* app/widgets/gimpimageview.[ch]
	* app/widgets/gimpitemtreeview.[ch]
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimpmenudock.c
	* app/widgets/gimppatternfactoryview.[ch]
	* app/widgets/gimppropwidgets.[ch]
	* app/widgets/gimpselectioneditor.[ch]
	* app/widgets/gimpsessioninfo.[ch]
	* app/widgets/gimptemplateview.[ch]
	* app/widgets/gimptooloptionseditor.c
	* app/widgets/gimptoolview.[ch]
	* app/widgets/gimpundoeditor.[ch]
	* app/widgets/gimpviewablebox.c
	* app/widgets/gimpviewablebutton.[ch]
	* app/widgets/gimpviewabledialog.[ch]
	* app/widgets/gimpviewrenderer.c: change the word "preview" to
	"view" whereever we talk about GimpView or GimpViewRenderer
	objects or their sizes. Ther were renamed from "Preview" a long
	time ago and we had a preview/view naming mess ever since.

2006-01-14  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpconfig-utils.[ch] (gimp_config_connect_full):
	variant of gimp_config_connect() which allows the connected
	objects to have different property names.

	* app/widgets/widgets-enums.[ch]: removed enum GimpViewType...

	* app/core/core-enums.[ch]: ...and added it here.

	* app/widgets/gimpviewablebutton.[ch] (gimp_viewable_button_new):
	added "button_preview_size" parameter so the button and popup
	preview sizes can be specified separately.

	* app/widgets/gimptemplateeditor.c: changed accordingly.

	* app/widgets/gimpviewablebox.[ch] (gimp_prop_*_box_new):
	new functions which take additional "view_type_prop" and
	"view_size_prop" parameters and sync the passed context's
	properties with the resp. properties of the viewable button.

	* app/paint/gimppaintoptions.[ch]
	* app/tools/gimpbucketfilloptions.c
	* app/tools/gimpclonetool.c
	* app/tools/gimppaintoptions-gui.c
	* app/tools/gimptextoptions.[ch]: added view-type and view-size
	properties to the options objects and use the new viewable box
	constructors so the selected view types and sizes are persistant
	across sessions. Fixes bug #315443.

2006-01-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpsessioninfo.c (gimp_session_info_restore): always
	set the current page of dockbooks, also if it's the first one.

2006-01-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/flarefx.c: renamed to "Lens Flare", don't use
	the term "Cursor" incorrectly (bug #326700).

	* plug-ins/common/nova.c: renamed to "Supernova", don't use the
	term "Cursor" incorrectly (bug #326700).

2006-01-12  Sven Neumann  <sven@gimp.org>

	* app/actions/actions.c
	* app/actions/cursor-info-actions.c
	* app/actions/dialogs-actions.c
	* app/config/gimprc-blurbs.h
	* app/dialogs/dialogs.c
	* app/dialogs/preferences-dialog.c
	* app/widgets/gimphelp-ids.h: use the term Pointer instead of
	Cursor when refering to the mouse pointer (bug #326700).

2006-01-11  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in.[ch]
	* tools/pdbgen/pdb/plug_in.pdb: moved code from the PDB wrapper to
	a utility function in the core.

	* app/pdb/plug_in_cmds.c: regenerated.

2006-01-11  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/plug_in.pdb (plugin_menu_register): warn if a
	plug-in attempts to register a menu path for a procedure that it
	didn't install.

	* app/pdb/plug_in_cmds.c: regenerated.

2006-01-07  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdialog.c: implement GtkWidget::hide() and set
	the the focus widget to NULL, so a focussed entry emits focus_out
	and its callbacks are invoked immediately (before the call to
	gtk_widget_hide() returns). Fixes crashes and warnings in tool
	dialogs when hitting escape while a spinbutton is being edited.

	* app/tools/gimptransformtool.c
	(gimp_transform_tool_force_expose_preview): return silently
	instead of warning when being called while the draw tool is not
	active (same scenario as above).

2006-01-07  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied patch from Tobias Lenz that plugs a
	memleak and yields another small speedup.

2006-01-06  Sven Neumann  <sven@gimp.org>

	* gimptool-2.0.in: if available use pkg-config to determine
	compiler and linker flags at runtime. Fixes bug #324761.

2006-01-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-save.c (save_image): give more feedback by
	changing the file size label while the preview is being regenerated.

2006-01-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-save.c: merged a patch from Mukund that fixes
	handling of EXIF data when preview is enabled (bug #303383).

2006-01-05  Michael Natterer  <mitch@gimp.org>

	* app/gui/gui.c (gui_sanity_check): depend on gtk+ >= 2.8.8 also
	at runtime. We don't want to debug everybody's gtk problems...

2006-01-05  Sven Neumann  <sven@gimp.org>

	* configure.in: depend on gtk+ >= 2.8.8 (see bug #325794).

2006-01-05  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/brush.pdb (gimp-brush-set-spacing): allow to
	change the spacing of brushes the user doesn't have write access
	to. The user interface allows to do that as well.

	* app/pdb/brush_cmds.c: regenerated.

2006-01-04  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/context.pdb: fixed docs for gimp-context-push/pop.

	* app/pdb/context_cmds.c
	* libgimp/gimpcontext_pdb.c: regenerated.

2006-01-03  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h (SWAP_PATH_BLURB): added missing space
	(bug #325617).

2006-01-03  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdialog.c (gimp_dialog_init): connect to our
	own "response" signal so our callback is the first one called.

	(gimp_dialog_response): let the activated widget grab the focus,
	so input fields which update their model and/or constraints on
	focus_out are properly recalculated. Fixes bug #309373.

2006-01-02  Simon Budig  <simon@gimp.org>

	* libgimp/gimp.def: added a bunch of missing symbols.

2006-01-02  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/context.pdb
	* libgimp/gimp.def: added gimp-context-get/set-paint-method which
	get/set the context's paint-info by name. Use these functions to
	stroke with any paint method (still only with its default paint
	options).

	* app/pdb/context_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpcontext_pdb.[ch]: regenerated.

2006-01-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert-data.h
	* app/core/gimpimage-convert.c: applied patch by Adam D. Moss that
	replaces the default dither matrix by a 32x32 Bayer pattern (see
	bug #136604).

2005-12-30  DindinX  <dindinx@gimp.org>

	* libgimpmath/gimpvector.c
	* libgimpconfig/gimpconfig-deserialize.c: shut up some compiler
	warnings.

2005-12-30  DindinX  <dindinx@gimp.org>

	* plug-ins/ifscompose/ifscompose_utils.c: fixed some compiler warnings
	and did some cleanups.

2005-12-30  DindinX  <dindinx@gimp.org>

	* plug-ins/gfig/gfig-arc.c
	* plug-ins/gfig/gfig-grid.c
	* plug-ins/gfig/gfig-poly.c
	* plug-ins/gfig/gfig-spiral.c
	* plug-ins/gfig/gfig-star.c: fixed some compiler warnings and did some
	cleanups.

2005-12-30  DindinX  <dindinx@gimp.org>

	* plug-ins/common/depthmerge.c: fixed some compiler warnings and did
	some cleanups.

2005-12-30  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainerentry.c (gimp_container_entry_init):
	set "inline-completion" and unset "popup-set-width" properties.

2005-12-30  Sven Neumann  <sven@gimp.org>

	* app/actions/image-actions.c
	* app/actions/view-actions.c
	* app/dialogs/image-properties-dialog.c: use new stock icons from
	GTK+ 2.8.

2005-12-30  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockable.[ch]: #define GIMP_DOCKABLE_DRAG_OFFSET
	publically.

	* app/widgets/gimpdockbook.c (gimp_dockbook_tab_drag_end): use the
	define to reset the dockable's drag offsets.

2005-12-30  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/preferences-dialog.c
	(prefs_tree_select_callback)
	(prefs_notebook_page_callback): clean up treeview/model code.

2005-12-30  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpgradienteditor.c (view_events): typo.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_new):
	commented out gravity setting. While it's nice with
	"resize-windows-on-zoom" it doesn't yield satisfying behaviour in
	most cases.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockbook.c (gimp_dockbook_dockable_added): set
	the current notebook page to the dockable that was just added.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdialogfactory.c (gimp_dialog_factories_show_foreach):
	fiddle with the "focus-on-map" window hint to prevent the dialogs
	from grabbing the focus away from the image window. Fixes bug #167762
	for window managers supporting this hint.

	* app/display/gimpdisplayshell-callbacks.c: removed redundant call
	to gdk_window_focus() that wasn't having the desired effect anyway.

2005-12-29  Simon Budig  <simon@gimp.org>

	* tools/pdbgen/pdb/image.pdb: new function:
	    image_add_vectors

	* tools/pdbgen/pdb/vectors.pdb: new functions:
	    vectors_get_strokes
	    vectors_stroke_get_point_at_dist
	    vectors_stroke_close

	removed nonfunctional undo code (that does not belong here anyways)
	and fixed a bug in [...]_cubicto.

	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpimage_pdb.[ch]
	* libgimp/gimpvectors_pdb.[ch]: regenerated.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdialogfactory.[ch]: split
	gimp_dialog_factories_toggle() into two functions. Turned the
	tri-state into a simple boolean state. Dialogs are now either
	shown or not, without treating the toolbox any special.

	* app/actions/dialogs-commands.c
	* app/display/gimpdisplayshell-callbacks.c: changed accordingly.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/main.c: added --license command-line option.

	* docs/gimp.1.in: documented the new option.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockbook.c: set the source dockable insensitive
	during the drag operation.

2005-12-29  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.[ch]: extended
	gimp_bezier_stroke_new_ellipse() with an "angle" parameter.
	* app/vectors/gimpvectors-import.c: changed accordingly, untabbified.

	* tools/pdbgen/pdb/vectors.pdb: added PDB-wrappers for
	      vectors_bezier_stroke_new_moveto
	      vectors_bezier_stroke_lineto
	      vectors_bezier_stroke_conicto
	      vectors_bezier_stroke_cubicto
	      vectors_bezier_stroke_new_ellipse

	Undo does not work properly yet.

	* app/pdb/internal_procs.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpvectors_pdb.[ch]: regenerated.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.c (gimp_dockable_expose_event): moved
	some code to an internal helper function.

2005-12-29  DindinX  <dindinx@gimp.org>

	* plug-ins/common/waves.c: small cleanups

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.[ch]: invalidate stored coordinates on
	button release.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockbook.c: let the drag icon mimic the
	appearance of a notebook tab.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockbook.c (gimp_dockbook_tab_drag_begin): use
	the width of the source widget as the minimum width of the drag icon.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.[ch]: store coordinates of last button
	press event.

	* app/widgets/gimpdockbook.c (gimp_dockbook_tab_drag_begin): set
	the drag hotspot to the mouse position that started the drag.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.c (gimp_dockable_expose_event): draw the
	standalone dockable like a notebook tab to indicate that it can be
	dragged.

2005-12-29  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimphelpui.c (gimp_help_set_help_data): allow to
	unset the tooltip by passing NULL.

	* app/widgets/gimpdockseparator.c: unset the tooltip while the same
	text is being shown as a label.

2005-12-29  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpbaseenums.[ch] (enum GimpPDBArgType): renamed
	GIMP_PDB_PATH to GIMP_PDB_VECTORS and added the former as an alias
	for the latter.

	* libgimp/gimp.h (union _GimpParamData): added back d_path member
	to maintain source compatibility.

	* tools/pdbgen/pdb.pl
	* libgimp/gimp.c
	* app/pdb/procedural_db.c
	* app/plug-in/plug-in-params.c
	* libgimpbase/gimpprotocol.[ch]
	* plug-ins/pygimp/pygimp-pdb.c
	* plug-ins/script-fu/siod-wrapper.c: s/GIMP_PDB_PATH/GIMP_PDB_VECTORS/

	* app/pdb/image_cmds.c
	* app/pdb/procedural_db_cmds.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpimage_pdb.c
	* libgimp/gimpvectors_pdb.c
	* tools/pdbgen/enums.pl: regenerated.

2005-12-29  Simon Budig  <simon@gimp.org>

	* tools/pdbgen/pdb/vectors.pdb:
	   gimp_vectors_[gs]et_locked  renamed to _linked for consistency.

	   gimp_vectors_[gs]et_tattoo, gimp_vectors_get_image: new.

	* app/pdb/internal_procs.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpvectors_pdb.[ch]: regenerated

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolormapeditor.c: code cleanup, use alloca in
	gimp_colormap_editor_clear().

2005-12-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.c: make sure the title area is cleared
	when the timeout is cancelled.

2005-12-28  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-pdb.c: handle d_path -> d_vectors rename.

2005-12-28  Sven Neumann  <sven@gimp.org>

	* HACKING
	* INSTALL: document the changed dependencies.

	* configure.in
	* app/sanity.c: check for glib >= 2.8.2 at compile and run-time.

	* app/plug-in/plug-in.c: removed workaround for glib < 2.8.2.

2005-12-28  Simon Budig  <simon@gimp.org>

	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/vectors.pdb: Added new functions for the vectors
	PDB API. Minor cleanups. Please try to use them and test:

	  gimp_image_get_active_vectors
	  gimp_image_set_active_vectors
	  gimp_image_get_vectors_by_tattoo
	  gimp_image_lower_vectors
	  gimp_image_lower_vectors_to_bottom
	  gimp_image_raise_vectors
	  gimp_image_raise_vectors_to_top
	  gimp_image_remove_vectors

	  gimp_vectors_get_locked
	  gimp_vectors_set_locked
	  gimp_vectors_get_name
	  gimp_vectors_set_name
	  gimp_vectors_get_visible
	  gimp_vectors_set_visible
	  gimp_vectors_stroke_get_length
	  gimp_vectors_stroke_remove
	  gimp_vectors_stroke_scale

	* libgimp/gimp.[ch]: renamed the unused d_path to d_vectors and
	use it. Untabbified.

	* devel-docs/libgimp/tmpl/gimpvectors.sgml
	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpimage_pdb.[ch]
	* libgimp/gimpvectors_pdb.[ch]: Regenerated

	* app/vectors/gimpstroke.h: minor cleanup.

2005-12-28  Sven Neumann  <sven@gimp.org>

	* menus/image-menu.xml.in: added "Image/Arrange" placeholder.

	* plug-ins/common/align_layers.c: moved to the Image menu, it
	doesn't work on a single layer.

2005-12-28  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am
	* app/about.h: new file collecting some strings about the app.

	* app/main.c
	* app/dialogs/about-dialog.c
	* app/dialogs/user-install-dialog.c: use the defines from about.h.

2005-12-28  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpfiledialog.[ch]: set the new
	"do-overwrite-confirmation" property on GtkFileChooser. Removed
	gimp_file_overwrite_dialog().

	* app/dialogs/file-save-dialog.c (file_save_dialog_check_uri):
	removed broken code which tried to figure if a file exists.
	Fixes bug #309729.

	* app/widgets/gimpdnd-xds.c: added gimp_file_overwrite_dialog()
	here as private utility function.

2005-12-28  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/about-dialog.c: set the new "wrap-license" property
	on GtkAboutDialog and remove the explicit newlines from the string
	holding the GPL.

2005-12-28  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-utils.[ch]: removed
	gimp_action_get_accel_closure().

	* app/widgets/gimpactionview.c (gimp_action_view_new): use
	gtk_action_get_accel_closure() instead.

2005-12-28  Michael Natterer  <mitch@gimp.org>

	* configure.in: bump version to 2.3.7,
	require GTK+ >= 2.8.0 and pango >= 2.10.0.

	* app/gui/gui.c (gui_sanity_check): changed accordingly.

2005-12-28  Sven Neumann  <sven@gimp.org>

	* Made 2.3.6 development release from the 22nd Chaos Communication
	Congress.

2005-12-28  Sven Neumann  <sven@gimp.org>

	* data/images/gimp-splash.png: splash screen for the 22C3 release.

2005-12-28  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/paint_tools.pdb: follow paint-info renaming.

	* app/pdb/paint_tools_cmds.c: regenerated.

2005-12-27  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpconvolve.c (gimp_convolve_register)
	* app/paint/gimpdodgeburn.c (gimp_dodge_burn_register): fixed
	stock IDs.

2005-12-27  Michael Natterer  <mitch@gimp.org>

	Fixed incomplete core/ui separation of paint tools and paint
	methods:

	* app/core/core-enums.h
	* app/core/gimpcontext.[ch]: added a "paint-info" property and API
	so the current paint method can be selected without the need for
	an active tool.

	(gimp_context_real_set_tool): set the paint-info to
	tool_info->paint_info so the paint method follows the active tool
	just as the active image follows the active display.

	* app/core/gimp.h (struct Gimp)
	* app/core/gimppaintinfo.[ch]: added "standard_paint_info" API
	and stuff to be consistent with other context object properties.

	* app/paint/gimp-paint.c: set the paintbrush as
	standard_paint_info.

	* app/core/gimpstrokedesc.c (gimp_stroke_desc_new): removed the
	hack of falling back to the paintbrush when there is no active
	tool and use the active paint method instead. Fall back to the
	standard paint method if there is no active one.
	(nothing in the core uses the active tool any more now).

	* app/widgets/gimpdeviceinfo.h: add the paint info to the
	properties which are saved in devicerc.

	Added identifiers (names) and stock-ids to GimpPaintInfo:

	* app/core/gimppaintinfo.[ch] (gimp_paint_info_new): added
	identifier and stock-id parameters.

	* app/core/gimptoolinfo.c (gimp_tool_info_new): removed the hack
	of setting the paint-info stock-id from the tool-info stock-id.

	* app/paint/paint-types.h
	* app/paint/gimp-paint.c: changed GimpPaintRegisterCallback
	accordingly.

	* app/tools/gimp-tools.c (gimp_tools_register): changed paint
	info names accordingly.

	* app/paint/*.c (gimp_*_register): pass identifier and stock-id
	accordingly.

2005-12-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c (query): fixed type of threshold
	parameter (bug #325007).

2005-12-23  DindinX  <dindinx@gimp.org>

	* plug-ins/common/apply_lens.c
	* plug-ins/common/blinds.c: revert to aspect preview until these
	plug-ins fully support zoomed preview.

2005-12-23  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.c
	* app/core/gimpdrawable.c
	* app/core/gimplayer.c
	* app/core/gimplayermask.c
	* app/text/gimptextlayer.c
	* app/vectors/gimpvectors.c: moved variables to local scopes in
	implementations of GimpItem::duplicate()

2005-12-23  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c
	* app/vectors/gimpstroke.c: shuffled some g_return*_if_fail
	around as suggested by mitch.

2005-12-21  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfileprocview.c: removed icons from
	GimpFileProcView.  It turned out that the Wilber icon is commonly
	mistaken as an indicator for the selected file-type.

2005-12-20  Michael Natterer  <mitch@gimp.org>

	* libgimp/*.c
	* libgimpconfig/*.c
	* libgimpmodule/*.c
	* libgimpthumb/*.c
	* libgimpwidgets/*.c: port to G_DEFINE_TYPE() and friends. Some
	related cleanup.

2005-12-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c: removed unused variable.

2005-12-19  Michael Natterer  <mitch@gimp.org>

	* app/widgets/*.c: port to G_DEFINE_TYPE() and friends. Some
	related cleanup.

2005-12-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/svg.c: fixed handling of librsvg API change,
	based on a patch by S. Mukund (bug #314400).

2005-12-18  Manish Singh  <yosh@gimp.org>

	* plug-ins/script-fu/siod-wrapper.c: Finish the reverting here.

2005-12-16  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/siod/siod.h
	* plug-ins/script-fu/siod/sliba.c: Reverted changes to handling
	of string arrays to stay backward compatible (see bug #168290 and
	bug #317634). These files were not reverted when other files were.

2005-12-16  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/screenshot.c (shoot_dialog): cleaned up the GUI.

2005-12-16  Sven Neumann  <sven@gimp.org>

	* app/paint/paint-enums.[ch]: changed description of
	GIMP_CLONE_ALIGN_NO enum value.

	* app/tools/gimpclonetool.c (gimp_clone_options_gui): use a combo
	box for the align mode.

2005-12-14  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpprotocol.[ch]: declare gp_params_destroy() in
	the private header file.

	* libgimp/gimp.c (gimp_destroy_params): removed extern declaration.

	* libgimpbase/gimpenv.h: changed parameter name to match what's
	used in gimpenv.c.

	* libgimpbase/gimpreloc.c: changed comments to please gtk-doc.

2005-12-13  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpwire.[ch]: let the private wire methods live in
	the GIMP namespace. Declare internal functions as such and prefix
	them with an underscore.

	* libgimp/gimp.c
	* libgimp/gimptile.c
	* libgimpbase/gimpbase.def
	* libgimpbase/gimpprotocol.c
	* app/plug-in/plug-in-message.[ch]
	* app/plug-in/plug-in-run.c
	* app/plug-in/plug-in.c: changed accordingly.

2005-12-13  Michael Natterer  <mitch@gimp.org>

	* app/tools/*.c: port to G_DEFINE_TYPE() and friends. Some related
	cleanup.

2005-12-12  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/script-fu/siod/slib.c: added a fix for the script-fu
	crash in chinese (and maybe other) locales. Applied to both
	branches. Fixes bug #163212.

2005-12-11  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpstrokedesc.c (gimp_stroke_desc_new): fall back to
	the paintbrush if we can't get the paint method from the active
	tool (because there is no active tool). Fixes bug #323778.

2005-12-10  Michael Natterer  <mitch@gimp.org>

	* app/config/*.c
	* app/core/*.c
	* app/display/*.c
	* app/text/*.c
	* app/vectors/*.c: port to G_DEFINE_TYPE() and friends. Some related
	core reordering and cleanup.

2005-12-07  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpclone.c (gimp_clone_motion): In fixed mode, paint
	incremental so the individual brushes are properly applied on top
	of each other. Fixes bug #322791.

2005-12-07  Michael Natterer  <mitch@gimp.org>

	* app/paint/*: use G_DEFINE_TYPE().

2005-12-07  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimphelpui.c: allow to cancel context sensitive
	help by pressing escape.

2005-12-07  Michael Schumacher  <schumaml@cvs.gnome.org>

	* app/paint/gimpclone.c
	* app/paint/paint-enums.c
	* app/paint/paint-enums.h: added alignment mode for cloning from a
	fixed location source as suggested in bug #322791.

2005-12-06  Manish Singh  <yosh@gimp.org>

	* autogen.sh: Allow overriding from shell environment variables,
	and prefer any overrid automakes to the default, so long as the
	version is new enough.

2005-12-06  Sven Neumann  <sven@gimp.org>

	* autogen.sh: applied a patch provided by Pierre-Paul Lavoie that
	makes it easier to adapt autogen.sh to uncommon executable names
	(bug #323341).

2005-12-06  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablepreview.c (gimp_drawable_preview_destroy):
	initialize all fields of the struct passed to gimp_set_data().

2005-12-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/edge.c: corrected the algorithm name as
	suggested in bug #323304.

2005-12-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/iwarp.c: applied a modified version of a patch
	by Joao S. O. Bueno Calligaris that makes the IWarp preview
	resizable (bug #323177).

2005-12-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mkgen.pl
	* plug-ins/faxg3/Makefile.am
	* plug-ins/help/Makefile.am
	* plug-ins/metadata/Makefile.am: workaround for libtool brokeness
	on Linux (bug #314513 and bug #323085)

	* plug-ins/common/Makefile.am: regenerated.

2005-12-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/uri/uri-backend-wget.c (uri_backend_load_image): added
	"-v" to the wget command-line options. Fixes bug #322977.

2005-11-30  Manish Singh  <yosh@gimp.org>

	* plug-ins/uri/uri-backend-wget.c (uri_backend_load_image): timeout
	message format string should use %d, not %s.

2005-11-30  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/screenshot.c: can't use gtk_main_quit as a
	timeout function, since it doesn't return a value. Wrap it in a
	function that returns FALSE instead. Fixes bug #322343.

2005-11-28  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: handle fixed_width,
	fixed_height, and fixed_aspect in a reasonable way.
	Also don't crash when user modifies aspect of a
	nonexistent rectangle, and disconnect notify
	handler in dispose.

2005-11-30  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpeditor.c (gimp_editor_add_button)
	(gimp_editor_add_action_button): set the "use-stock" property on
	the created buttons so changes of the underlying action's name
	don't change the button's icon to a string.

2005-11-28  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: don't crash when
	user modifies width/height of nonexistent rectangle, and
	make sure to disconnect option notify handlers in dispose.
	Should fix bug #322396.

2005-11-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdeviceinfo.[ch]: added GdkDisplay member since
	there is no way fo figure the display a GdkDevice exists on.
	Minor cleanups.

	* app/widgets/gimpdevices.[ch]: connect to the GdkDeviceManager
	and add input devices when displays are opened. Added API to get
	the GimpContainer of devices.

	* app/widgets/gimpdevicestatus.[ch]: don't just show the devices
	of the default display. Instead get the device container from the
	new API above and update the GUI when devices are added/removed.
	Cleaned up the whole file quite a bit.

2005-11-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdeviceinfo.c (gimp_device_info_get_property):
	use gtk_accelerator_name() instead of serializing the accelerator
	manually.

2005-11-27  Michael Natterer  <mitch@gimp.org>

	Apparently, there was a reason for implementing the window actions
	separately for views and docks, fixed the bugs resulting from the
	merge:

	* app/actions/dock-actions.c (dock_actions_update): only update
	the dock actions if the update function is called in the context
	of a dock (not in the context of an image window). Fixes docks
	jumping to other screens on any action on an image window on that
	screen.

	* app/actions/view-actions.c (view_actions_setup): add the window
	actions only to action groups that live in an image window or
	global popup ui manager (not to action groups that belong to a
	dock or dockable). Prevents bugs similar to the one above.

2005-11-26  Michael Natterer  <mitch@gimp.org>

	* app/menus/window-menu.c (window_menu_display_opened,closed):
	don't crash if gdk_display_get_name() returns NULL.

2005-11-26  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_unrealize):
	new function which destroys the GCs kept by the shell and
	unrealizes the navigation popup.

2005-11-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/oilify.c: applied a patch by Daniel Richard G.
	that greatly improves the output of the Oilify filter (bug #322258).
	Also changed the default to use the Intensity algorithm as
	suggested in bug #322296.

2005-11-24  Sven Neumann  <sven@gimp.org>

	* app/gui/gui-vtable.c (gui_message): reverted previous change.

2005-11-24  Sven Neumann  <sven@gimp.org>

	* app/gui/gui-vtable.c (gui_message): only show the error console
	but don't move the keyboard focus to it. Fixes bug #322210.

2005-11-24  Michael Natterer  <mitch@gimp.org>

	* app/actions/dock-actions.c
	* app/actions/view-actions.c
	* app/actions/window-actions.c
	* app/actions/window-commands.[ch]
	* menus/dockable-menu.xml.in
	* menus/image-menu.xml.in: added "Open Display" dialog for
	debugging purposes.

2005-11-23  Michael Natterer  <mitch@gimp.org>

	* libgimpmodule/gimpmodule.c: print error messages unconditionally
	and let "verbose" print module access debugging stuff. Misc cleanup.

2005-11-23  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptoolcontrol.[ch]: cleaned up and reordered
	instance struct and functions. Renamed functions so getters and
	setters actually have "get" and "set" in their names.

	* app/display/gimpdisplayshell-autoscroll.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/tools/gimpaligntool.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpforegroundselecttool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimpvectortool.c
	* app/tools/tool_manager.c: changed accordingly.

2005-11-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/sel2path/sel2path.[ch]: set a translatable name for the
	created path.

2005-11-22  Sven Neumann  <sven@gimp.org>

	* app/vectors/gimpvectors.c (gimp_vectors_stroke): return
	successfully when stroking an empty path. Fixes bug #322067.

2005-11-22  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c: request motion hints in
	the navigation popup and redraw the window immidiately to give
	better feedback.

2005-11-22  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreview.c: moved the controls closer to the
	preview.

2005-11-22  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpzoompreview.c: zoom on Ctrl-Scroll events.

	* libgimpwidgets/gimpscrolledpreview.c
	(gimp_scrolled_preview_area_event): correctly clamp adjustment
	value on scroll events. Ignore scroll events when Ctrl is pressed.

2005-11-21  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c
	(gimp_scrolled_preview_area_event): scroll using the mouse wheel.

2005-11-21  Sven Neumann  <sven@gimp.org>

	* menus/image-menu.xml.in: added "Animators" placeholder.

	* plug-ins/script-fu/script-fu.c (script_fu_extension_init):
	removed registration of "Animators" submenu.

2005-11-21  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: renamed "discontiguous" to
	"continuous", both in the UI and as a variable.

2005-11-21  Sven Neumann  <sven@gimp.org>

	* app/actions/context-actions.c (context_brush_radius_actions):
	added default keyboard shortcuts for changing the brush radius
	as suggested in bug #322028.

2005-11-21  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpzoommodel.c (gimp_zoom_button_new): connect
	to the model's "zoomed" signal and set the button sensitivity.

2005-11-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/MapObject/mapobject_main.[ch]
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_ui.c: must not keep pointers in the
	struct that is being used to preserve data between invocations of
	the plug-in. Fixes bug #321932.

2005-11-19  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppaintoptions-gui.c
	* app/tools/gimpselectionoptions.c: code cleanup.

2005-11-19  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpaligntool.c
	* app/tools/gimpcolortool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectortool.c: started to get rid of all stock GDK
	cursors in preparation of fixing bug #158407.

2005-11-18  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpgradienteditor.c (view_events):
	* app/widgets/gimpnavigationview.c (gimp_navigation_view_scroll):
	changed wheel scrolling to be HIG-compliant (control zooms). Also
	handle GDK_SCROLL_LEFT/RIGHT correctly and made shift switch the
	scroll axis. The widgets behave as the image window now.

2005-11-18  Jakub Steiner <jimmac@ximian.com>

	* data/palettes/Tango.gpl: Made the greens more vibrant.

2005-11-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpgradienteditor.c: implement GtkWidget::unrealize()
	and destroy the control pixmap. fixes crash when moving the dialog
	to another display.

	* menus/dockable-menu.xml.in: added a separator before the
	"Move to Screen" submenu.

2005-11-17  Michael Natterer  <mitch@gimp.org>

	* app/actions/window-actions.[ch]: connect to GdkDisplayManager
	and automatically add/remove move-to-screen actions when
	displays are opened/closed.

	* app/menus/window-menu.c: added similar code here to add/remove
	menu items for the above actions.

	* app/actions/Makefile.am
	* app/actions/window-commands.[ch]: new files containing window
	close and move-to-screen callbacks. There is no need to implement
	these twice for GimpDock and GimpDisplay.

	* app/actions/dock-commands.[ch]
	* app/actions/view-commands.[ch]: remove the callbacks here.

	* app/actions/dock-actions.c
	* app/actions/view-actions.c: changed accordingly.

2005-11-16  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/curve_bend.c (p_gimp_rotate): use
	gimp_drawable_transform_rotate_default instead of deprecated
	gimp-rotate PDB call. Fixes bug #321692.

2005-11-16  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpenv.c (gimp_toplevel_directory)
	* app/widgets/gimpcolormapeditor.c (gimp_colormap_editor_draw_cell):
	plugged memory leaks.

2005-11-16  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.c (gimp_layer_convert):
	gimp_layer_transform_color() wants the destination image passed,
	not the source image.

2005-11-16  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpreloc.c: minor cleanups.

2005-11-15  Michael Natterer  <mitch@gimp.org>

	Allow to construct a group of radio actions in multiple chunks.
	(not used yet).

	* app/widgets/gimpactiongroup.[ch]
	(gimp_action_group_add_radio_actions): added "GSList *radio_group"
	parameter and return value.

	* app/actions/dockable-actions.c
	* app/actions/gradient-editor-actions.c
	* app/actions/quick-mask-actions.c
	* app/actions/text-editor-actions.c
	* app/actions/view-actions.c
	* app/actions/window-actions.c: pass NULL as radio_group.

2005-11-15  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainercombobox.c: implement
	GtkWidget::unrealize() and unrealize all GimpViewRenderers.
	Fixes BadMatch with the renderers' GCs on display change.

2005-11-14  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: better looking rectangle boundary.

2005-11-14  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_mask_bounds):
	return TRUE only if the selection intersects with the viewport, as
	expected by gimp_display_shell_selection_invis(), which is the
	only caller of this function. Fixes bug #319029.

2005-11-13  Sven Neumann  <sven@gimp.org>

	* plug-ins/sgi/sgi.c (run): fixed cut'n'paste bug that broke saving.

2005-11-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdatafactory.c (gimp_data_factory_data_free): do not
	return a value from a void function. Fixes bug #321333.

2005-11-11  Sven Neumann  <sven@gimp.org>

	* INSTALL: document --enable-binreloc.

2005-11-11  Michael Natterer  <mitch@gimp.org>

	* m4macros/binreloc.m4: disable binreloc by default.

2005-11-11  Sven Neumann  <sven@gimp.org>

	* app/base/tile-swap.c (tile_swap_default_in): fixed compilation
	of experimental threaded tile-swapper. Fixes bug #320977.

2005-11-09  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpmodule.c: wrap gimpenv directory functions.

2005-11-09  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: better fixed-aspect behavior.

2005-11-09  Simos Xenitellis  <simos@gnome.org>

	* configure.in: (Re)Added tt (Tatarish) to ALL_LINGUAS,
	added stubs for missing PO files.

2005-11-09  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c: reverted patch which makes
	alpha=255 when turned off because these functions are not only
	used for display projection. Re-opens bug #143315.
	Fixes bug #307213.

2005-11-08  Michael Natterer  <mitch@gimp.org>

	* configure.in: Removed 'tt' again until all po files are there.

2005-11-08  Simos Xenitellis  <simos@gnome.org>

	* configure.in: Added tt (Tatarish) to ALL_LINGUAS.

2005-11-08  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/guides-new.scm
	* plug-ins/script-fu/scripts/guides-new-percent.scm: look at the
	image's width/height, not the drawable's. Fixes bug #320933.

2005-11-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-modules.c
	* app/menus/menus.c: more output on --verbose

2005-11-06  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcolorpickertool.c (gimp_color_picker_tool_picked):
	when picking FG or BG color from an indexed layer, select its
	index in the colormap editor. Fixes bug #320660.

2005-11-06  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-contexts.c
	* app/core/gimp-documents.c
	* app/core/gimp-parasites.c
	* app/core/gimp-templates.c
	* app/core/gimp-units.c
	* app/core/gimpdatafactory.c
	* app/core/gimptooloptions.c
	* app/gui/color-history.[ch]
	* app/gui/gui.c
	* app/gui/session.c
	* app/plug-in/plug-ins.c
	* app/text/gimp-fonts.c
	* app/tools/gimp-tools.c
	* app/widgets/gimpcontrollers.c
	* app/widgets/gimpdevices.c: when running --verbose, print the
	name of each config file parsed or written.

2005-11-06  Sven Neumann  <sven@gimp.org>

	Added support for binary relocation by means of binreloc, largely
	based on a patch by Hongli Lai:

	* m4macros/Makefile.am
	* m4macros/binreloc.m4: new file providing a macro to check for
	binreloc support.

	* acinclude.m4
	* configure.in: use the macro.

	* libgimpbase/Makefile.am
	* libgimpbase/gimpreloc.[ch]: new files providing binreloc support
	on Linux.

	* libgimpbase/gimpenv.[ch]: use binreloc, provide a function to
	initialize the environment machinery.

	* libgimpbase/gimpbase.def: updated.

	* app/Makefile.am: fiddle with the LDFLAGS for binreloc.

	* app/main.c (main): gimp_env_init(FALSE).

	* libgimp/gimp.c (gimp_main): gimp_env_init(TRUE).

2005-11-06  Sven Neumann  <sven@gimp.org>

	* modules/controller_midi.c (midi_set_device): corrected casting.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am: removed unused variable scriptdata.

	* app/plug-in/plug-ins.c (plug_ins_init): Fixed progress value for
	plug-in query and initialization.

	* plug-ins/common/uniteditor.c (new_unit_dialog): use a
	GtkMessageDialog instead of g_message(). Some string changes.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins.c (plug_ins_init): fine-tuning.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/app.pl: removed calls to the splash update function
	during initialization of internal procedures. This only takes time
	and doesn't provide useful information.

	* app/pdb/internal_procs.[ch]: regenerated.

	* app/pdb/procedural_db.[ch]: changed accordingly.

	* core/gimp.c: call the splash update function from here.

2005-11-05  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c: don't return void in a
	function returning a gboolean.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: added some commented-out debug output that can
	be used to get an idea of where the startup time is being spent.

	* app/core/gimp.c
	* app/pdb/internal_procs.c
	* app/pdb/procedural_db.c
	* app/plug-in/plug-ins.c
	* tools/pdbgen/app.pl: cosmetic changes.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c (splash_area_expose): set the clip region
	instead of just the clip rectangle.

	* configure.in: bumped version to 2.3.6.

2005-11-04  Manish Singh  <yosh@gimp.org>

	* app/core/gimpenvirontable.c (gimp_environ_table_load_env_file):
	remove now unused "expanded" variable.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* Made 2.3.5 development release.

2005-11-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontrollereditor.c (gimp_controller_editor_init):
	set the widget's spacing to 12 pixels.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/actions/Makefile.am (libappactions_a_SOURCES): fixed typo.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied a patch by Gerald Friedland that
	changes the code to clear the cache selectively instead of dumping
	it completely if the foreground or background area is changed.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/core/gimpenvirontable.c (gimp_environ_table_load_env_file):
	gimp_config_path_expand() only ever returns NULL if called with a
	NULL path argument.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-dump.c: fixed typo.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/errors.c
	* app/sanity.c: s/The GIMP/GIMP/

2005-11-03  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: set the splash image as back pixmap.

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpaction.c
	* app/widgets/gimpcoloreditor.c
	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontrollerlist.c
	* app/widgets/gimpmenudock.c
	* app/widgets/gimppluginaction.c
	* app/widgets/gimptooloptionseditor.c
	* app/widgets/gimpwidgets-utils.c
	* libgimpwidgets/gimpcellrenderercolor.c: use gtk_widget_get_settings()
	instead of gtk_settings_get_for_screen(gtk_widget_get_screen())

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpclipboard.c (gimp_clipboard_set_text): added
	g_return_if_fail (GIMP_IS_GIMP (gimp)).

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/text/gimptext.c: code cleanup, untabified.

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/actions/data-commands.c
	* app/core/gimpprogress.c: #include "gimp.h" instead of "gimp-gui.h"

2005-11-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/tga.c (save_image): allocate a tile cache.

2005-11-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/actions/data-commands.c: add missing include file.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c
	* app/widgets/gimpimagepropview.c
	* app/widgets/gimpsizebox.c
	* app/widgets/gimptemplateeditor.c: use ngettext() for plural forms.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpmemsize.c (gimp_memsize_to_string): use
	dngettext() for plural form.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimppattern.c: rephrased error message for consistency
	and to avoid another plural form.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.c: use g_utf8_strlen().

	* plug-ins/uri/uri-backend-wget.c: use ngettext().

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpprocbrowserdialog.c
	* libgimpwidgets/gimppropwidgets.c
	* plug-ins/uri/uri-backend-wget.c: use dngettext() for plural
	forms. Fixes bug #320460, bug #320461 and bug #320462.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpclipboard.[ch] (gimp_clipboard_set_text): clear
	the GIMP clipboard. Suppress debug output unless gimp is started
	with the --verbose command-line option.

	* app/actions/data-commands.c
	* app/actions/documents-commands.c: adapt to clipboard API change.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.c
	* plug-ins/uri/uri-backend-wget.c: added translator comments for
	plural forms (bug #320461 and bug #320462).

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpsizebox.[ch]: added a GtkSizeGroup member and put
	all labels into the group.

	* app/dialogs/scale-dialog.c: put the "Interpolation:" label into
	the same size box.

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpprocbrowserdialog.c (browser_search): added comment
	that _("%d procedures") should be translated with a plural form
	for *lots* of procedures. Fixes bug #320460.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushgenerated.c: fixed compiler warning.

	* app/core/gimpobject.c: turned "name" into a construct property.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushgenerated.c (gimp_brush_generated_load): use
	gimp_brush_generated_new() to create the brush object. Removed
	redundant calls to gimp_data_dirty().

	* app/core/gimpdata.c: freeze the data object during construction.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/actions/data-commands.c
	* app/actions/documents-commands.c
	* app/widgets/gimpclipboard.[ch]: moved text clipboard handling to
	utility function to avoid code duplication.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins.c: formatting.

2005-10-31  Michael Natterer  <mitch@gimp.org>

	Applied modified patch from Luis de Bethencourt Guimera which adds
	a "Save document history" prefs option. Fixes bug #140001.

	* app/config/gimprc-blurbs.h
	* app/config/gimpcoreconfig.[ch]: added boolean property
	"save-document-hitory".

	* app/core/gimp.c
	* app/file/file-open.c
	* app/file/file-save.c: don't save the document history and don't
	add files to the desktop-wide list of recently used files if the
	option is FALSE.

	* app/dialogs/preferences-dialog.c: added its toggle to the
	"Environment" page.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpmessagebox.c (gimp_message_box_init): reverted
	the change for bug #302400; it caused bug #319962 to be opened.
	Instead unset the focus chain for the message box.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins.c (plug_ins_init): only call the status
	callback for plug-ins that are actually queried or initialized.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/actions/data-commands.[ch]: added new action command
	data_copy_location_cmd_callback().

	* app/actions/brushes-actions.c
	* app/actions/gradients-actions.c
	* app/actions/palettes-actions.c
	* app/actions/patterns-actions.c
	* app/widgets/gimphelp-ids.h
	* menus/brushes-menu.xml
	* menus/gradients-menu.xml
	* menus/palettes-menu.xml
	* menus/patterns-menu.xml: added Copy Location menu entries to all
	data views. Allows to retrieve the file location for data files.

2005-10-31  Tor Lillqvist  <tml@novell.com>

	* gimptool-win32.c.in: Drop unnecessary <sys/stat.h>.
	(gtk_config): Drop the GIMP 1.2.x and gtk+-1-3-win32-production
	support.
	(get_cflags): Output GIMP's -I switch before GTK's CFLAGS. Use
	"include/gimp-2.0" instead of just "include".
	(get_libs, get_libs_noui): Update the list of libraries to match
	reality, use GIMP_API_VERSION in library names.
	(get_sys_plugin_dir): Use GIMP_PLUGIN_VERSION and not
	GIMP_MAJOR_VERSION.GIMP_MINOR_VERSION in the plug-in folder name.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.[ch]
	* app/core/gimpdatafactory.c: applied a heavily modified version
	of the patch provided by Shlomi Fish in bug #311740. Introduces a
	cache to speed up reloading of data files.

	* app/actions/data-commands.c: set gimp busy while refreshing data
	factories.

	* app/widgets/gimpwidgets-utils.c (gimp_widget_accel_changed):
	free the return value of gimp_get_accel_string().

2005-10-31  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewablebutton.[ch] (gimp_viewable_button_new):
	add GimpViewType parameter.

	* app/widgets/gimptemplateeditor.c
	* app/widgets/gimpviewablebox.c: pass view types, using grid view
	for brushes and patterns ass suggested in bug #315443.

2005-10-30  Michael Natterer  <mitch@gimp.org>

	Fixed bug #316395:

	* app/actions/dialogs-actions.c (dialogs_dockable_actions)
	* app/actions/quick-mask-actions.c (quick_mask_toggle_actions):
	added tooltips to action entries.

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): use
	gimp_widget_set_accel_help() to set the tooltip so it contains
	the accelerator.

	* app/dialogs/dialogs-constructors.c (dialogs_dockable_constructor):
	attach the dialog's identifier to the dockable widget (hack).

	* app/widgets/gimpdockbook.c (gimp_dockbook_get_tab_widget): use
	the attached identifier to find the action for this dockable in
	the dock's UI manager (HACK HACK). Use the found action to set
	a tooltip with accelerator.

	* app/widgets/gimpwidgets-utils.c (gimp_widget_set_accel_help):
	fixed bug in fallback code what should never be used.

2005-10-30  Michael Natterer  <mitch@gimp.org>

	* app/actions/dialogs-actions.c (dialogs_dockable_actions): removed
	shift+ctrl+t accelerator from dialogs-tool-options because it's
	already taken by view-show-guides. Fixes bug #320196.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/user-install-dialog.c: added global "oldgimp_major"
	an "oldgimp_minor" variables.

	(user_install_dialog_run): set them to the version of the gimp
	directory that should be migrated.

	(user_install_migrate_files): skip "menurc" only when migrating
	from 2.0. Fixes bug #317170.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	 Fix bug #145492:

	* app/actions/file-commands.c (file_save_cmd_callback)
	* app/dialogs/file-save-dialog.c (file_save_dialog_save_image):
	set the "file-quit" action insensitive while the image is being
	saved to prevent data loss.

	* app/widgets/gimptoolbox.c (gimp_toolbox_delete_event): activate
	the "file-quit" action instead of calling gimp_exit() directly so
	trying to close the toolbox while saving is impossible too.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpconvolve.c (gimp_convolve_motion): allocate both
	oversize buffers with the right size, instead of one twice with
	the wrong size. Was broken since porting to pixel_region_init_data().
	Spotted by Seth Burgess. Fixes bug #317340.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/image.pdb: improved documentation of
	gimp-image-clean-all and gimp-image-is-dirty. Fixes bug #318075.

	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.c: regenerated.

2005-10-28  Michael Natterer  <mitch@gimp.org>

	* app/actions/image-actions.c: removed "colors-transform-menu".

	* menus/image-menu.xml.in: revamped again: Moved desaturate and
	the invert items to the toplevel, into a separator-enclosed group.
	Changed Modify to a placeholder again. Things that have no useful
	category can't go to a sub-menu, so please don't invent one just
	for the sake of it.

	* plug-ins/common/channel_mixer.c: -> Colors/Components
	* plug-ins/common/vinvert.c: -> Colors/Invert

2005-10-28  Carol Spears  <carol@gimp.org>

	* app/actions/image-actions.c: Changed colors-modify-menu to
        colors-transform-menu

	* menus/image-menu.xml.in: moved Desaturate and Invert into the tools
        section of the colors-menu.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/AlienMap2.c: renamed to "Alien Map".

2005-10-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/hot.c: also moved into Colors/Modify.

	* menus/image-menu.xml.in: moved Info submenu to the bottom.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied a patch by Tobias Lenz that makes use
	of the state that was added to SIOX in order to speed up the tool.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppageselector.[ch]: added new signal "activate"
	and emit it if the user activates an item in the icon view.

	* plug-ins/common/poppler.c
	* plug-ins/common/postscript.c: activate the dialog if the page
	selector emits "activate" as suggested in bug #320080.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: handle gimpprint just like other libraries. It
	doesn't make sense any longer to require it.

	* app/paint/gimpink-blob.c: commented out unused code.

2005-10-27  Manish Singh  <yosh@gimp.org>

	* app/paint-funcs/paint-funcs.h: declare component_pixels,
	combine_mask_and_alpha_channel_{stipple,stroke}. Fixes bug #319811.

2005-10-27  Michael Natterer  <mitch@gimp.org>

	* configure.in: check for gnome-keyring.

	* plug-ins/uri/uri-backend.h
	* plug-ins/uri/uri-backend-wget.c
	* plug-ins/uri/uri-backend-gnomevfs.c: added "plugin_name",
	boolean "run" and "run_mode" parameters to uri_backend_init().

	* plug-ins/uri/uri-backend-gnomevfs.c (uri_backend_init):
	initialize the gnome authentication manager only when called
	interactively from "run". Also call gimp_ui_init() when using the
	auth manager, since recent versions seem to require an already
	initialized GTK+. When running noninteractively and gnome-keyring
	is available, implement the needed GnomeVFS authentication
	callbacks ourselves and ask gnome-keyring directly.

	* plug-ins/uri/uri.c: pass the additional parameters to
	uri_backend_init().

2005-10-26  Carol Spears  <carol@gimp.org>

	* app/actions/image-actions.c: added colors-info-menu and
        colors-modify-menu as children of colors-menu

	* menus/image-menu.xml.in: changed Modify placeholder to
        colors-modify-menu menuaction and added color-info-menu action to
        colors-menu

        * plug-ins/common/colortoalpha.c: moved to Colors/Modify in the
        registration part.

2005-10-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-console.c (script_fu_console_run):
	removed run-mode check.

2005-10-26  Michael Natterer  <mitch@gimp.org>

	Fixed bug #313547:

	* app/widgets/gimpdataeditor.c
	(gimp_data_editor_set_aux_info)
	(gimp_data_editor_get_aux_info): store the state of edit_active
	in sessionrc.

	(gimp_data_editor_constructor): enable edit_active by default.

2005-10-25  Michael Natterer  <mitch@gimp.org>

	Let the data editors optionally follow the active brush, palette
	and gradient. Still needs to be saved in sessionrc and probably
	be enabled by default. Addresses bug #313547.

	* app/widgets/gimpdataeditor.[ch]: added new functions
	gimp_data_editor_set,get_edit_active().

	Make it configurable from the palette and gradient editor menus:

	* app/actions/gradient-editor-actions.c
	* app/actions/palette-editor-actions.c: added actions...

	* app/actions/data-editor-commands.[ch]: ...and callbacks...
	(new file).

	* app/widgets/gimphelp-ids.h: ...help IDs...

	* menus/gradient-editor-menu.xml
	* menus/palette-editor-menu.xml: ...and menu items.

	Add menu to the brush editor and make it configurable there too:

	* app/actions/Makefile.am
	* app/actions/actions.c
	* app/actions/brush-editor-actions.[ch]
	* app/menus/menus.c
	* menus/Makefile.am
	* menus/brush-editor-menu.xml: added all the bits needed for
	the new menu.

	* app/widgets/gimpbrusheditor.[ch]: use the menu. Added menu_factory
	parameter to the contstructor.

	* app/dialogs/dialogs-constructors.c: changed accordingly.

2005-10-25  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-close.c
	* app/widgets/gimpactionview.c
	* modules/controller_midi.c: g_source_unref() GSources after
	attaching them.

2005-10-25  DindinX  <dindinx@gimp.org>

	* app/paint-funcs/scale-funcs.c (subsample_region): correctly pass
	the region offset to pixel_region_get_row().

2005-10-25  Bill skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimppaintoptions-gui.c (jitter_options_gui):
	Use a scale entry instead of spinbutton for jitter amount,
	as discussed in bug #163049.

2005-10-25  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-contiguous-region.c
	(struct ContinuousRegionData)
	(gimp_image_contiguous_region_by_color)
	(contiguous_region_by_color): the color samples are always RGB or
	RGBA, so always compare 3 or 4 bytes of pixel data, and not just
	the number of bytes of the drawable/projection. Fixes "select by
	color" on GRAYA (bug #319683).

2005-10-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/lib.pl: add G_GNUC_INTERNAL to declaration of
	wrapped PDB functions.

	* libgimp/gimpchannel_pdb.h
	* libgimp/gimpdrawable_pdb.h
	* libgimp/gimpgimprc_pdb.h
	* libgimp/gimpimage_pdb.h
	* libgimp/gimplayer_pdb.h
	* libgimp/gimpplugin_pdb.h
	* libgimp/gimpproceduraldb_pdb.h
	* libgimp/gimpprogress_pdb.h
	* libgimp/gimpselection_pdb.h
	* libgimp/gimpunit_pdb.h: regenerated.

	* libgimp/gimptile.h
	* libgimp/gimpunitcache.h
	* libgimpthumb/gimpthumb-utils.h
	* libgimpwidgets/gimpcolorarea.h
	* libgimpwidgets/gimphelpui.h: declare internal functions as such
	using G_GNUC_INTERNAL.

2005-10-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/paths.pdb: added getter and setter for path
	visibility (bug #319617).

	* app/pdb/internal_procs.c
	* app/pdb/paths_cmds.c
	* libgimp/gimppaths_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-10-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/png.c: load and save embedded ICC profiles, based
	on a patch from Ture Pålsson (bug #319580).

	* devel-docs/parasites.txt: document the "icc-profile-name" parasite.

2005-10-24  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-path-16.png
	* themes/Default/images/tools/stock-tool-path-22.png: works on
	dark themes (bug #168981)

2005-10-24  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-airbrush-16.png
	* themes/Default/images/tools/stock-tool-airbrush-22.png: make it
	work on dark background

2005-10-24  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockable.c (gimp_dockable_realize): create the
	title window as GDK_WINDOW_CHILD, not GDK_WINDOW_TEMP.

2005-10-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: add "notify" callbacks for changes
	of width, height, or aspect entries in the tool options.

2005-10-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c:
	* app/tools/gimpnewrectselecttool.c Make clicking inside an existing
	selection create rect matching the marching ants.

2005-10-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleoptions.c: remove fixed-center stuff
	from options gui in order to simplify it.

2005-10-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/twain/twain.c: renamed menu entry to "Scanner/Camera"
	as suggested in bug #311965.

2005-10-20  Sven Neumann  <sven@gimp.org>

	* app/batch.c (batch_run): always call the batch interpreter in
	NON-INTERACTIVE mode (see bug #167964).

	* plug-ins/script-fu/script-fu-text-console.c: removed the run-mode
	check.

2005-10-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c (title_changed): replace newlines
	with spaces to avoid multiple lines in the combo box.

2005-10-20  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: renamed "multiblob"
	property to "discontinuous" and added a check button for it.

2005-10-19  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.[ch]: move tool_control out of
	rectangle tool and into users of it, and make rect select execute
	on leaving but crop tool not.  Also rename functions and clean up
	formatting a bit.

2005-10-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/plugin-browser.c: strip ellipsis from menu labels.

2005-10-19  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: "execute" the tool if the
	user switches to a different tool or clicks in a different
	image.  Good for rect select, not so sure about crop.

2005-10-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/warp.c: use gimp_drawable_mask_intersect()
	instead of gimp_drawable_mask_bounds().

2005-10-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcurvestool.[ch]: added keyboard control to the
	Curves tool as suggested in bug #154809.

2005-10-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcurvestool.c (gimp_curves_tool_oper_update): set
	cursor modifier and status bar hints to improve discoverability of
	Curves tool features.

2005-10-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/presets.c: added a Save icon.

2005-10-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpaligntool.[ch]: Make buttons insensitive
	until a target item has been selected; fixes bug #309038.

2005-10-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpaligntool.c: Remove bogus stuff about
	weak pointers, and disconnect properly in dispose
	callback instead of finalize, as suggested by mitch.
	Fixes bug #314880.

2005-10-18  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-selection.c: formatting.

2005-10-17  Manish Singh  <yosh@gimp.org>

	* app/core/gimppalette-import.c
	(gimp_palette_import_create_image_palette): delete stray ;

2005-10-17  Manish Singh  <yosh@gimp.org>

	* app/base/siox.c (siox_drb): declare mindistbg, mindistfg, and alpha
	float variables at the start of the block.

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/base/base-enums.h
	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselecttool.[ch]: export stateful SIOX to
	the core API and use it from the foreground selection tool.

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/base/base.c (base_init)
	* app/base/tile-swap.c (tile_swap_init): create temp and swap
	directories using g_mkdir_with_parents() (bug #308658).

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: added "multiblob"
	property to GimpForegroundSelectOptions and pass it to
	gimp_drawable_foreground_extract_siox().

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/file/file-open.[ch]: added run-mode parameter to
	file_open_layer().

	* app/dialogs/file-open-dialog.c
	* app/display/gimpdisplayshell-dnd.c
	* app/widgets/gimplayertreeview.c: pass GIMP_RUN_INTERACTIVE to
	file_open_layer().

	* tools/pdbgen/pdb/fileops.pdb: export file_open_layer() to the PDB
	as file-load-layer.

	* app/pdb/fileops_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpfileops_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-10-16  Akkana Peck  <akkana@shallowsky.com>

	* plug-ins/pygimp/plug-ins/gimpcons.py
	* plug-ins/pygimp/plug-ins/pdbbrowse.py
	* plug-ins/pygimp/plug-ins/sphere.py
	* plug-ins/script-fu/script-fu.c
	* plug-ins/script-fu/scripts/3d-outline.scm
	* plug-ins/script-fu/scripts/3dTruchet.scm
	* plug-ins/script-fu/scripts/alien-glow-arrow.scm
	* plug-ins/script-fu/scripts/alien-glow-bar.scm
	* plug-ins/script-fu/scripts/alien-glow-bullet.scm
	* plug-ins/script-fu/scripts/alien-glow-button.scm
	* plug-ins/script-fu/scripts/alien-glow-logo.scm
	* plug-ins/script-fu/scripts/alien-neon-logo.scm
	* plug-ins/script-fu/scripts/basic1-logo.scm
	* plug-ins/script-fu/scripts/basic2-logo.scm
	* plug-ins/script-fu/scripts/beveled-button.scm
	* plug-ins/script-fu/scripts/beveled-pattern-arrow.scm
	* plug-ins/script-fu/scripts/beveled-pattern-bullet.scm
	* plug-ins/script-fu/scripts/beveled-pattern-button.scm
	* plug-ins/script-fu/scripts/beveled-pattern-heading.scm
	* plug-ins/script-fu/scripts/beveled-pattern-hrule.scm
	* plug-ins/script-fu/scripts/blended-logo.scm
	* plug-ins/script-fu/scripts/bovinated-logo.scm
	* plug-ins/script-fu/scripts/camo.scm
	* plug-ins/script-fu/scripts/carved-logo.scm
	* plug-ins/script-fu/scripts/chalk.scm
	* plug-ins/script-fu/scripts/chip-away.scm
	* plug-ins/script-fu/scripts/chrome-logo.scm
	* plug-ins/script-fu/scripts/comic-logo.scm
	* plug-ins/script-fu/scripts/coolmetal-logo.scm
	* plug-ins/script-fu/scripts/crystal-logo.scm
	* plug-ins/script-fu/scripts/flatland.scm
	* plug-ins/script-fu/scripts/frosty-logo.scm
	* plug-ins/script-fu/scripts/gimp-headers.scm
	* plug-ins/script-fu/scripts/gimp-labels.scm
	* plug-ins/script-fu/scripts/glossy.scm
	* plug-ins/script-fu/scripts/glowing-logo.scm
	* plug-ins/script-fu/scripts/gradient-bevel-logo.scm
	* plug-ins/script-fu/scripts/i26-gunya2.scm
	* plug-ins/script-fu/scripts/land.scm
	* plug-ins/script-fu/scripts/neon-logo.scm
	* plug-ins/script-fu/scripts/news-text.scm
	* plug-ins/script-fu/scripts/pupi-button.scm
	* plug-ins/script-fu/scripts/rendermap.scm
	* plug-ins/script-fu/scripts/sota-chrome-logo.scm
	* plug-ins/script-fu/scripts/speed-text.scm
	* plug-ins/script-fu/scripts/sphere.scm
	* plug-ins/script-fu/scripts/starburst-logo.scm
	* plug-ins/script-fu/scripts/starscape-logo.scm
	* plug-ins/script-fu/scripts/swirltile.scm
	* plug-ins/script-fu/scripts/swirly-pattern.scm
	* plug-ins/script-fu/scripts/t-o-p-logo.scm
	* plug-ins/script-fu/scripts/test-sphere.scm
	* plug-ins/script-fu/scripts/text-circle.scm
	* plug-ins/script-fu/scripts/textured-logo.scm
	* plug-ins/script-fu/scripts/title-header.scm
	* plug-ins/script-fu/scripts/truchet.scm:
	Move the script categories that were in Xtns->Script-Fu
        directly into Xtns. Language specific tools (e.g. Refresh,
        Console) remain in language-specific menus. Bug 145507.

2005-10-15  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimpselectiontool.c: let status info be pushed.

2005-10-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/channel_mixer.c: indentation and other cleanups.

2005-10-13  Sven Neumann  <sven@gimp.org>

	* app/dialogs/palette-import-dialog.c: minor dialog tweaks.

2005-10-13  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorarea.[ch]: pass sensitivity to
	_gimp_color_area_render_buf().

	* libgimpwidgets/gimpcellrenderercolor.c
	(gimp_cell_renderer_color_render): respect cell and widget
	sensitivity.

2005-10-13  Sven Neumann  <sven@gimp.org>

	* app/actions/tools-actions.c
	* app/actions/tools-commands.c: special case gimp-rotate-tool
	being called from the Layer menu and set transform type to
	GIMP_TRANSFORM_TYPE_LAYER. Fixes bug #318540.

2005-10-13  Jakub Steiner <jimmac@ximian.com>

	* data/palettes/Tango.gpl: Added the tango icon palette
	  (http://www.tango-project.org)

2005-10-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/displace.c: check that displacement maps have
	the same size as the target drawable, return a PDB_CALLING_ERROR
	otherwise. Fixes bug #318644.

2005-10-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/plugin-browser.c: store the installation time in
	the models, not only the string representation. Sort by time, not
	alphabetically. Fixes bug #318652.

2005-10-12  Sven Neumann  <sven@gimp.org>

	* app/base/base-types.h
	* app/base/siox.[ch]: applied patch from Gerald Friedland that
	introduces a state to the SIOX operation.

	* app/core/gimpdrawable-foreground-extract.c: adapted to the new API.

2005-10-11  Michael Natterer  <mitch@gimp.org>

	* libgimpthumb/gimpthumbnail.c: the mime-type is stored in
	"tEXt::Thumb::Mimetype", not in "tEXt::Thumb::Image::Mimetype".
	Fixed this and reordered properties so "tEXt::Thumb" and
	"tEXt::Thumb::Image" stuff is grouped together again.

2005-10-10  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorselection.c: added a pick button, it's
	too useful to be just in the color dockable.

2005-10-10  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpviewable.c (gimp_viewable_get_description): set the
	"tooltip" return value to NULL before calling the virtual function.

	* app/core/gimpbrush.c
	* app/core/gimpbuffer.c
	* app/core/gimpchannel.c
	* app/core/gimplayer.c
	* app/core/gimppaintinfo.c
	* app/core/gimppalette.c
	* app/core/gimppattern.c
	* app/core/gimptoolinfo.c (get_description): don't do it here.

	* app/core/gimpbuffer.c
	* app/core/gimppaintinfo.c: untabbify, cleanup.

	* app/core/gimpobject.c: emit "notify::name" whenerver the name
	changes, clenup.

2005-10-09  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: Enable selection masking, even if it
	looks buggy. It looks to me that the bug is in
	gimp_drawable_get_sub_preview (), not handling the selection drawable
	as a normal drawable.

2005-10-09  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: better handling of selections and
	navigation popup. Still not perfect.

2005-10-09  DindinX  <dindinx@gimp.org>

	* libgimp/gimpdrawablepreview.c: made the navigation popup respect
	the aspect ratio of the selection or the drawable.

2005-10-08  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.c: added status bar info to tell the
	user what to do once the rectangle area is drawn. Fixes bug #318267.

2005-10-07  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/grid.pdb: fixed (false) uninitialized variable
	warnings and cleaned up the code a bit.

	* app/pdb/grid_cmds.c: regenerated.

2005-10-07  Sven Neumann  <sven@gimp.org>

	* app/dialogs/palette-import-dialog.c (palette_import_filename_changed)
	(palette_import_file_callback): use UTF8 encoding with GtkEntry.

2005-10-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette-import.[ch]: added new function
	gimp_palette_import_from_drawable(), respecting the selection as
	suggested in bug #316212.

2005-10-06  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/gauss.c: always use RLE if horz or
	vert radius is less than 1.  Fixes bug #315953.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-save.c: can't use smoothing with nonstandard
	sampling ratios. Set the slider sensitivity accordingly (bug #318081).

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/gimpressionist.c: removed About dialog.

	* plug-ins/gimpressionist/Makefile.am
	* plug-ins/gimpressionist/logo.png: removed logo.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/gimpressionist.[ch]
	* plug-ins/gimpressionist/orientation.c
	* plug-ins/gimpressionist/orientmap.[ch]
	* plug-ins/gimpressionist/placement.c
	* plug-ins/gimpressionist/presets.c
	* plug-ins/gimpressionist/preview.c
	* plug-ins/gimpressionist/repaint.c
	* plug-ins/gimpressionist/size.c

	* plug-ins/gimpressionist/sizemap.c: various minor improvements
	like setting all dialogs transient to the main window.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/presets.c
	* app/config/gimprc-blurbs.h
	* app/dialogs/quit-dialog.c
	* app/config/gimpcoreconfig.c: changed "The GIMP" to "GIMP".

	* plug-ins/common/xbm.c: unmarked same string for translation.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimputils.c: gimp_canonicalize_identifier() is new API,
	mark it as such.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprocbrowserdialog.c: capitalization and other string
	changes.

	* libgimpwidgets/gimpbrowser.c: string unification. Set the
	message label italic.

	* plug-ins/common/plugin-browser.c: use ngettext() for plural forms.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* app/dialogs/dialogs-constructors.c
	* app/dialogs/keyboard-shortcuts-dialog.[ch]: include a check
	button for the "save-accels" gimprc property.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/help/domain.c: try to improve the error message that is
	shown for missing help files.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* app/dialogs/about-dialog.c: set application name to "GIMP", the
	expanded acronym is in the comment already.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c: fixed string.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpaspectpreview.c
	* libgimp/gimpzoompreview.c: added missing API docs.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/siod-wrapper.c: reverted changes to handling
	of string arrays to stay backward compatible (see bug #168290 and
	bug #317634).

	* plug-ins/script-fu/scripts/font-map.scm: reverted change that
	was done to adapt to above changes (see bug #308681).

2005-10-04  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpbrushcore.c (gimp_brush_core_start): set
	core->jitter here for all brush-based paint tools.

	(gimp_brush_core_interpolate): cleanup.

	* app/paint/gimpbrushcore.h: removed trailing whitespace.

	* app/paint/gimpclone.c (gimp_clone_motion)
	* app/paint/gimppaintbrush.c (_gimp_paintbrush_motion): removed
	jitter stuff here.

2005-10-04  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: another optimization by Tobias Lenz.

2005-10-04  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: small optimization by Tobias Lenz.

2005-10-03  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppainttool.c (gimp_paint_tool_color_picked):
	fix compile warning by adding default: for unused enum values.

2005-10-03  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* gimp/app/paint/gimpbrushcore.c
	* gimp/app/paint/gimpbrushcore.h
	* gimp/app/paint/gimpclone.c
	* gimp/app/paint/gimppaintbrush.c
	* gimp/app/paint/gimppaintoptions.c
	* gimp/app/paint/gimppaintoptions.h
	* gimp/app/tools/gimppaintoptions-gui.c: Apply patch from
	Adrian Likins to add "jitter" to paint tools (bug #163049),
	with small fixes for coding style and default jitter set
	to 0.2 instead of 0.0.

2005-10-02  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.[ch]: added a new function:
	gimp_zoom_preview_get_factor(), which is a proxy to get the zoom
	factor of the zoom model used by the zoom preview.
	Also renamed the zoom field of the private data of gimpzoompreview to
	model, since it is a gimpzoommodel.

	* libgimp/gimpui.def: added gimp_zoom_preview_get_factor.

	* plug-ins/common/nova.c: use gimp_zoom_preview_get_factor to
	correctly handle the position of the nova at various zoom level.
	There still are problems if there is a selection before when running
	this plugin.

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c: fixed the bogus snaps. One
	should not calculate tangents for points beyond the end of the
	array...

	Don't leak lots of g_arrays...

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c: a segment doesn't necessarily
	have a matching tangent. Check for this when iterating over all
	segments of a path...

	* app/vectors/gimpstroke.c: fix the dispatch of
	_nearest_intersection_get().

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c: correctly pass back the
	nearest coordinate. Snapping sortof works.

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/core/gimpcoords.c: use ABS instead of fabs.

	* app/core/gimpimage-snap.c: Use proper default values for the
	coordinates.

	* app/vectors/gimpbezierstroke.c: Fix a bug plus add some debug
	output. For some reason does not snap yet.

2005-10-02  Sven Neumann  <sven@gimp.org>

	* app/file/file-utils.[ch]: introduced variants of
	file_utils_uri_to_utf8_filename() and
	file_utils_uri_to_utf8_basename() that use g_filename_display_name()
	and g_filename_display_basename().

	* app/actions/data-commands.c
	* app/actions/documents-commands.c
	* app/actions/file-actions.c
	* app/actions/file-commands.c
	* app/core/gimpimage.c
	* app/core/gimpimagefile.c
	* app/dialogs/file-open-dialog.c
	* app/dialogs/file-open-location-dialog.c
	* app/dialogs/file-save-dialog.c
	* app/dialogs/palette-import-dialog.c
	* app/display/gimpdisplayshell-close.c
	* app/display/gimpdisplayshell-dnd.c
	* app/display/gimpdisplayshell-title.c
	* app/file/file-open.c
	* app/widgets/gimpdnd-xds.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimpthumbbox.c
	* app/widgets/gimptoolbox-dnd.c
	* app/widgets/gimptoolbox.c
	* app/widgets/gimpviewabledialog.c: use the new functions.

	* plug-ins/help/domain.c: use g_filename_display_name().

2005-10-01  Michael Natterer  <mitch@gimp.org>

	* app/sanity.c (sanity_check_glib): we require 2.8.0 now.

2005-10-01  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpwidgetsmarshal.list: added VOID__DOUBLE_DOUBLE
	marshaller.

	* libgimpwidgets/gimpzoommodel.[ch]: new signal: "zoomed", emitted
	when the zoom factor changes.  This signal have the old factor and the
	new factor as argument.

	* libgimp/gimpzoompreview.c: use the "zoomed" signal instead of the
	"notify::value" one. This allow to use the old and new factors to keep
	the preview centered on the same point.

2005-10-01  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: call gtk_adjustment_value_changed in
	addition to gtk_adjustment_changed, so the offsets are correctly
	updated.

2005-09-30  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-pdb.c (pf_call): use canonical name for
	run-mode.

	* plug-ins/pygimp/plug-ins/clothify.py
	* plug-ins/pygimp/plug-ins/foggify.py: revert the below, since
	we eat the run-mode parameter again.

2005-09-30  Carol Spears  <carol@gimp.org>

	* plug-ins/pygimp/plug-ins/clothify.py
	* plug-ins/pygimp/plug-ins/foggify.py: Added run_mode parameter.

2005-10-01  Simon Budig  <simon@gimp.org>

	* app/core/gimpcoords.[ch]: Added small utility function for the
	manhattan metric.

	* app/vectors/gimpstroke.[ch]: virtualized stubs provided by mitch

	* app/vectors/gimpbezierstroke.c: Reworked some internal functions
	to make it easier to access the parameters for the coordinates of an
	stroke interpolation. Simplified the straight line test. Added an
	implementation of the _nearest_tangent_get () function that does
	not yet seem to work properly. Not sure where the problem is.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/actions/image-commands.c
	* app/actions/layers-commands.c
	* app/actions/view-actions.c
	* app/core/gimpdrawable-foreground-extract.c
	* app/core/gimpimagefile.c
	* app/core/gimpprogress.c
	* app/dialogs/convert-dialog.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimptransformtool.c
	* app/widgets/gimpthumbbox.c
	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: removed '...' from
	progress messages. Removed spaces between the text and the '...'
	in some other places.

	* app/pdb/drawable_transform_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/transform_tools_cmds.c: regenerated.

2005-09-30  Carol Spears  <carol@gimp.org>

	* plug-ins/pygimp/gimpfu.py: removed code that limited plug-in
        registration.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/vectors/gimpstroke.[ch]: added stubs of two new snapping
	functions.

	* app/core/gimpimage-snap.c: removed their #defines here.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]
	* libgimpbase/gimpbaseenums.[ch]: moved GimpGridStyle enum to
	libgimpbase.

	* app/core/gimpimage-grid.h: indentation.

	* app/pdb/Makefile.am
	* libgimp/Makefile.am
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/pdb/grid.pdb: applied slightly modified patch by
	Sylvain FORET that adds a PDB API for the image grid.

	* app/pdb/grid_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimp_pdb.h
	* libgimp/gimpenums.c.tail
	* libgimp/gimpgrid_pdb.[ch]
	* tools/pdbgen/enums.pl
	* tools/pdbgen/groups.pl: (re)generated.

	* libgimp/gimp.def
	* libgimpbase/gimpbase.def: updated.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gbr.c (save_image): handle RGB drawables and
	implicitely add the alpha channel.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/actions/dialogs-actions.c (dialogs_toplevel_actions): use
	GIMP_STOCK_CHAR_PICKER for the keyboard shortcuts dialog. Not
	quite right but at least greppable when we have a proper icon.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/dialog.c: removed forgotten foreign registration of
	"gimp-keyboard-shortcuts-dialog".

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* plug-ins/*/*.c: removed '...' from progress messages. They are
	redundant because we are already in a progress. Ported some more
	g_strdup_printf()/gimp_progress_init() to
	gimp_progress_init_printf(). Core will follow...

2005-09-29  Manish Singh  <yosh@gimp.org>

	* plug-ins/uri/uri-backend-wget.c: Finish porting to new progress
	API (and make it build).

	* plug-ins/uri/uri-backend-gnomevfs.c: Convert a g_strdup_printf
	gimp_progress_set_text pair to gimp_progress_set_text_printf.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* app/actions/dialogs-actions.c
	* app/dialogs/dialogs-constructors.[ch]
	* app/dialogs/dialogs.c
	* app/dialogs/keyboard-shortcuts-dialog.[ch]: register the keyboard
	shortcut dialog with the dialog factory as singleton toplevel dialog.

	* app/dialogs/preferences-dialog.c: changed accordingly.

	* menus/image-menu.xml.in: added a "Keyboard Shortcuts" entry to
	the Edit menu.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* app/dialogs/Makefile.am
	* app/dialogs/keyboard-shortcuts-dialog.[ch]
	* app/dialogs/preferences-dialog.c
	* app/widgets/gimphelp-ids.h: moved Keyboard Shortcuts dialog into
	it's own file.

2005-09-29  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/common/autocrop.c:
	It was cropping too much, eliminating the first non-background
	row/column on each edge.

2005-09-29  Sven Neumann  <sven@gimp.org>

	* app/base/tile-cache.c
	* app/base/tile-manager.c
	* app/base/tile-private.h
	* app/base/tile-swap.c
	* app/base/tile.c: keep the data size of a tile in the Tile struct
	instead of recalculating it over and over again. Adds an overhead
	of 4 bytes per tile but speeds up the tile cache significantly.

2005-09-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: optimizations by Tobias Lenz.

2005-09-29  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/progress.pdb: removed the "wrap" from
	gimp_progress_set_text() so it shows up as libgimp function again.

	* libgimp/gimpprogress_pdb.[ch]: regenerated.

	* libgimp/gimpprogress.[ch]: changed the old
	gimp_progress_set_text() to gimp_progress_set_text_printf() and
	added gimp_progress_init_printf(). (did this because the method of
	calling init(NULL) followed by set_text("foo") caused popup
	progress windows to be resized after they were shown).

	* libgimp/gimp.def: changed accordingly.

	* plug-ins/*/*.c: use gimp_progress_init_printf() instead of
	init(NULL) plus set_text(foo) and changed users of set_text() to
	use set_text_printf().

2005-09-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c: removed the frame
	around the progress bar.

2005-09-29  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/common/zealouscrop.c:
	Update every 20 steps, instead of 19 out of every 20.

2005-09-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-console.c
	(script_fu_browse_callback): don't set the procedure browser
	transient to the script-fu console.

2005-09-28  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpprogressbox.c
	* plug-ins/script-fu/script-fu-interface.c: made progress bars HIG
	compliant (with italic label below).

	* app/widgets/gimpfiledialog.[ch]: use a GimpProgressBox intead of
	implementing the progress bar again.

2005-09-28  Michael Natterer  <mitch@gimp.org>

	* app/actions/dialogs-actions.c (dialogs_dockable_actions): fixed
	action parameter to match both the palette list and grid.
	Fixes bug #317435.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpscanner.c (gimp_scanner_new_file): mmap the
	config file using GMappedFile. Let's see how well this works...

2005-08-28  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/chrome-it.scm: Removed extraneous -
	in register block left when script was renamed.

	* plug-ins/script-fu/scripts/text-circle.scm: Fixed minor errors
	in comments.

2005-09-28  Tor Lillqvist  <tml@novell.com>

	* libgimp/gimp.def: Fix typo.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gqbist.c: use a single random number generator
	for the lifetime of the plug-in. Fixes bug #317355.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* docs/Makefile.am
	* docs/keybindings.txt
	* docs/quick_reference.ps
	* docs/quick_reference.tar.gz: removed outdated documentation that
	is now being maintained in the user manual (bug #316423).

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c
	(gimp_scrolled_preview_nav_popup_expose): draw the rectangle
	according to the scrollbar adjustments.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.[ch]
	(gimp_scrolled_preview_set_position): must not set the adjustment
	value directly. Instead make sure that the scrollbar adjustments
	are uptodate and use gtk_adjustment_set_value().

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreview.[ch]: renamed newly added function to
	gimp_preview_get_controls(). Increased row padding for controls.

	* libgimpwidgets/gimpwidgets.def
	* libgimp/gimpzoompreview.c: changed accordingly.

	* libgimpbase/gimputils.c (gimp_enum_get_value): ref the enum
	class instead of only peeking at it.

	* libgimpwidgets/gimpzoommodel.c (gimp_zoom_button_new): set a
	tooltip on zoom buttons that only show an icon.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreview.[ch]: added a hbox to the table and
	the "Update Preview" checkbutton there. Added a function to access
	this control box. Increased default size to 200.

	* libgimpwidgets/gimpscrolledpreview.[ch]: added function
	gimp_scrolled_preview_set_policy() to control when the scrollbars
	should be shown.

	* libgimpwidgets/gimpwidgets.def: updated.

	* libgimp/gimpzoompreview.c: pack the zoom buttons into the
	preview's control box. Commented out the label, it shows a bogus
	zoom factor. Set scrollbar policy to ALWAYS to avoid resizing.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimphistogrameditor.[ch]: do not calculate the
	histogram if the histogram dock is invisible.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs-generic.h (swap_pixels): replaced
	binary operations with a naive but faster implementation using a
	local variable.

	* app/composite/gimp-composite-generic.c
	(gimp_composite_swap_any_any_any_generic): same change here.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: minor code cleanups by Tobias Lenz.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpintcombobox.c: document how to construct an
	empty GimpIntComboBox using g_object_new().

	* plug-ins/common/aa.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/compose.c
	* plug-ins/common/decompose.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/gflare/gflare.c
	* plug-ins/pagecurl/pagecurl.c: use g_object_new() to construct an
	empty GimpIntComboBox. The old way of doing it caused warnings.

2005-09-27  Michael Natterer  <mitch@gimp.org>

	* app/actions/data-commands.c
	* app/actions/file-commands.c
	* app/actions/templates-commands.c
	* app/dialogs/image-scale-dialog.c
	* app/dialogs/resize-dialog.c
	* app/dialogs/vectors-options-dialog.c
	* app/tools/gimptexttool.c
	* libgimpwidgets/gimpcolorbutton.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/aa.c
	* plug-ins/gimpressionist/orientmap.c
	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/xjt/xjt.c: fixed indentation in calls to
	gtk_dialog_set_alternative_button_order().

2005-09-27  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/buffer.pdb: added gimp-buffers-get-list,
	should probably get its own PDB group.

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/buffer_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpbuffer_pdb.[ch]: regenerated.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-gui.h
	* app/core/gimp-utils.h
	* app/core/gimpimage-undo.h
	* app/text/gimptextlayer.h
	* app/widgets/gimpeditor.h
	* app/widgets/gimpmenufactory.h
	* app/widgets/gimpmessagedialog.h
	* app/widgets/gimpsessioninfo.h
	* app/widgets/gimptooldialog.h
	* app/widgets/gimpviewabledialog.h: use G_GNUC_NULL_TERMINATED
	where appropriate.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprocbrowserdialog.h
	* libgimpwidgets/gimpbrowser.h
	* libgimpwidgets/gimpdialog.h
	* libgimpwidgets/gimpintcombobox.h
	* libgimpwidgets/gimpoldwidgets.h
	* libgimpwidgets/gimpwidgets.h: use G_GNUC_NULL_TERMINATED where
	appropriate.

	* libgimp/gimpprocbrowserdialog.c
	* libgimpwidgets/gimpbrowser.c: added missing API docs.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprocbrowserdialog.[ch]: let
	gimp_proc_browser_dialog_new() take standard dialog parameters,
	similar to gimp_dialog_new().

	* plug-ins/common/procedure-browser.c
	* plug-ins/pygimp/procbrowser.c
	* plug-ins/script-fu/script-fu-console.c: changed accordingly.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c (script_fu_interface):
	use GTK_STOCK_ABOUT for the About button (bug #317339).

2005-09-27  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpbuffer.[ch]: added gimp_buffer_get_bytes()
	and gimp_buffer_get_image_type().

	* tools/pdbgen/pdb/edit.pdb: removed edit_named_rename() and
	edit_named_delete().

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/groups.pl
	* tools/pdbgen/pdb/buffer.pdb: new PDB group featuring
	buffer_rename(), delete(), get_width(), get_height(), get_bytes(),
	get_image_type(). Fixes bug #315130.

	* app/pdb/Makefile.am
	* libgimp/Makefile.am
	* libgimp/gimp.def: changed accordingly.

	* app/pdb/buffer_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimp_pdb.h
	* libgimp/gimpbuffer_pdb.[ch]
	* libgimp/gimpedit_pdb.[ch]: (re)generated.

2005-09-27  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.c: zooming out more is zooming out
	three times, not zooming in. Fixes bug #155446.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): applied
	patch from Robert Ögren that works around problem creating guides
	with a tablet on Windows by enabling extension events for the
	rulers.  Fixes the first problem described in bug #168516.

	* configure.in: bumped version to 2.3.5.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* Made 2.3.4 development release.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	Allow to disable the color picker info dialog. Fixes bug #315011:

	* app/tools/tools-enums.[ch] (enum GimpColorPickerMode): added
	value GIMP_COLOR_PICK_MODE_PALETTE.

	* app/tools/gimpcolorpickeroptions.[ch]: deprecated property
	"add-to-palette" and added property "use-info-window". Changed
	tool options GUI accordingly.

	* app/tools/gimpcolorpickertool.c
	(gimp_color_picker_tool_modifier_key): made <shift> toggle
	the use-info-window property.

	(gimp_color_picker_tool_picked): moved palette picking code
	into the pick_mode switch() statement.

	* app/tools/gimpcolortool.c (gimp_color_tool_cursor_update):
	show a "plus" cursor when adding to the palette.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c (script_fu_interface):
	set "activates-default" on all entries.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c: removed some frames
	from the Script-Fu dialogs.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* app/actions/debug-commands.c (debug_dump_menus_cmd_callback)
	(debug_dump_menus_recurse_menu): resurrected.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	Allow plug-ins to register menu entries in the <Brushes>,
	<Gradients>, <Palettes>, <Patterns> and <Fonts> menus:

	* app/actions/actions.c (action_data_get_gimp): return a Gimp
	also if "data" is a GimpContainerView or GimpContainerEditor.

	* app/gui/gui-vtable.c (gui_menus_add_proc)
	* app/plug-in/plug-in-params.c (plug_in_proc_args_check): support
	the new plug-in menu locations.

	* app/menus/menus.c (menus_init): add the "plug-in" action group
	to the resp. UI managers.

	* menus/brushes-menu.xml
	* menus/buffers-menu.xml
	* menus/fonts-menu.xml
	* menus/gradients-menu.xml
	* menus/palettes-menu.xml
	* menus/patterns-menu.xml: added separators at the end of the menus.

	* plug-ins/script-fu/scripts/font-map.scm: -> <Fonts>
	* plug-ins/script-fu/scripts/gradient-example.scm: -> <Gradients>
	* plug-ins/script-fu/scripts/mkbrush.scm: -> <Brushes>

	* plug-ins/script-fu/script-fu.c (script_fu_extension_init): don't
	register the "Make Brush" menu branch.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c
	* tools/test-clipboard.c: use G_OPTION_FLAG_NO_ARG where needed.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/paste-as-brush.scm
	* plug-ins/script-fu/scripts/paste-as-pattern.scm: cleanup.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* app/actions/edit-actions.c: renamed action back to "Paste as
	New" and added a second action with the "New Image" label. The
	original label is needed for <Toolbox>/File/Acquire.

	* menus/image-menu.xml.in: changed accordingly.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-params.c (plug_in_proc_args_check): drop the
	restriction that plug-ins registered in <Image> must have
	RUN-MODE, IMAGE, DRAWABLE parameters because everything but
	RUN-MODE is actually treated as optional be the rest of the code.

	* plug-ins/script-fu/scripts/paste-as-brush.scm
	* plug-ins/script-fu/scripts/paste-as-pattern.scm: removed IMAGE
	and DRAWABLE parameters.

	* plug-ins/common/screenshot.c
	* plug-ins/twain/twain.c
	* plug-ins/winsnap/winsnap.c: register menu entries in
	<Image>/File/Acquire

2005-09-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gqbist.c: minor dialog tweak.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c
	* app/file/file-save.c
	* app/file/file-open.c: use g_access() from gstdio.h.

	* app/config/gimpconfig-file.c (gimp_config_file_copy)
	* libgimpthumb/gimpthumbnail.c: use g_chmod() from gstdio.h.

	* app/file/gimprecentlist.c
	* libgimpconfig/gimpconfigwriter.c: use g_creat() from gstdio.h.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* menus/image-menu.xml.in: added Colors/Modify placeholder.

	* plug-ins/common/vinvert.c: moved to Colors/Modify/Invert.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: bumped the required version of glib to 2.8.

	* app/main.c: use G_OPTION_FLAG_NO_ARG with callback options that
	take no argument. Fixes command-line options needed for 'make
	dist', such as '--dump-gimprc'

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/carve-it.scm
	* plug-ins/script-fu/scripts/chrome-it.scm: renamed to "Stencil Carve"
	and "Stencil Chrome" and moved to Filters/Decor.

	* plug-ins/script-fu/script-fu.c: don't register menu branches
	"Filters/Selection" and "Filters/Decor/Stencil Ops".

2005-09-25  Carol Spears  <carol@gimp.org>

	* plug-ins/common/max_rgb.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/borderaverage.c moved menu entry from Colors to
        Colors/Info and added some vital information to the registration
        information.

	* plug-ins/common/channel_mixer.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/colorify.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/fp.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/retinex.c moved menu entry from Colors to
        Colors/Modify.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/fade-outline.scm: renamed to
	"Fade to Layer Mask..." and moved to the Select menu.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/max_rgb.c: moved it back, the plug-in changes
	the image. Renamed to "Maximum RGB".

2005-09-25  Carol Spears  <carol@gimp.org>

	* plug-ins/common/max_rgb.c moved menu entry from Colors to
        Colors/Info.

	* plug-ins/common/smooth_palette.c moved menu entry from Colors to
        Colors/Info.

	* plug-ins/common/semiflatten.c removed menu entry from Colors and
        added it to Filters/Web

	* plug-ins/pygimp/plug-ins/py-slice.py added the patch from
        Joao S. O. Bueno Calligaris that was attached to bug #159564.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/edit-actions.c
	* menus/image-menu.xml.in: added "Edit/Paste as" submenu and moved
	"Paste as new" there (renamed to "New Image").

	* plug-ins/script-fu/scripts/Makefile.am
	* plug-ins/script-fu/scripts/paste-as-brush.scm
	* plug-ins/script-fu/scripts/paste-as-pattern.scm: new scripts
	roughly derived from select-to-brush and select-to-pattern.

	* plug-ins/script-fu/scripts/select-to-brush.scm
	* plug-ins/script-fu/scripts/select-to-image.scm
	* plug-ins/script-fu/scripts/select-to-pattern.scm: don't register
	menu entries.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]: applied patch from Gerald Friedland and
	Tobias Lenz. Introduces a hash table to speed up the algorithm
	and changes the post-processing so that multiple disjunct objects
	can be selected.

	* app/tools/gimpforegroundselecttool.c: changed tooltip, the tool
	doesn't any longer extract single objects only.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgetsenums.[ch]: removed GimpZoomWidgetType.

	* libgimpwidgets/gimpzoommodel.[ch]: removed gimp_zoom_widget_new()
	in favor of gimp_zoom_button_new().

	* libgimp/gimpzoompreview.c: changed accordingly.

	* libgimpwidgets/gimpwidgets.def: updated.

	* plug-ins/MapObject/mapobject_main.[ch]
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_ui.c: use a GimpZoomModel and let
	it create the zoom buttons.

	* plug-ins/MapObject/mapobject_apply.c
	* plug-ins/MapObject/mapobject_image.c
	* plug-ins/MapObject/mapobject_shade.c: include "gimp/gimpui.h".

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/help/Makefile.am (gimp_help_lookup_LDADD): link
	against libgimpbase now that we use gimp_data_directory().

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/distress-selection.scm: renamed to
	"Distort..." and moved to Select/Modify.

2005-09-24  Hans Breuer  <hans@breuer.org>

	* **makefile.msc : updated

	* app/dialogs/user-install-dialog.c : only add the migrate page if
	there is something to migrate from. Avoids on version being NULL.

	* app/dialogs/file-save-dialog.c : the g_print() output was crashing
	on the assumption that ->menu_label != NULL. It is for colorhtml.py.

	* app/widgets/gimpselectiondata.c : use HAVE_UNISTD_H and move
	* process.h definition by G_OS_WIN32 below it being defined
	* app/widgets/gimpwidgets-utils.c(gimp_window_get_native) : cast
	return value to (GdkNativeWindow) it is not necessary an int.

	* libgimpwidgets/gimpwidgets.def : added gimp_zoom_type_get_type

	* plug-ins/help/gimp-help-lookup.c : dynamic lookup of help_root
	instead of hard-coding DATADIR/GIMP_HELP_PREFIX

	* plug-ins/xjt/xjt.c : there is no pid_t with msvc, typedef one.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/plug-in-actions.c
	* menus/image-menu.xml.in: get rid of Filters/Effects because it
	doesn't mean anything. Added Filters/Generic and Filters/Combine
	back instead. Not perfect either but more meaningful.

	* plug-ins/common/depthmerge.c
	* plug-ins/common/film.c: -> Filters/Combine

	* plug-ins/common/convmatrix.c
	* plug-ins/common/vpropagate.c: -> Filters/Generic

	* plug-ins/script-fu/scripts/erase-rows.scm: -> Filters/Distorts

	* plug-ins/script-fu/scripts/predator.scm: -> Filters/Artistic

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/convert-dialog.c
	* app/dialogs/palette-import-dialog.c: added icons to the
	affirmative action buttons.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c (view_zoom_actions): use
	GIMP_STOCK_CHAR_PICKER for the actions which are only there for
	keyboard shortcuts. Not perfect but better than before.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/file-actions.c (file_actions): made Shift+Ctrl+W the
	shortcut for "Close all".

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/psd.c: massively indented and de-uglyfied,
	(not many lines unmodified). Still not the incarnation of
	beautiful code, but more readable for an eye used to Gimp code.
	No logic changes, just formatting.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c (run): set "is_ID" to TRUE, not FALSE
	when decoding the "compose-data" parasite. Fixes Recompose.
	Return error, not success if recomposing fails. Misc cleanups.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpzoommodel.[ch]: added gimp_zoom_model_zoom()
	and changed gimp_zoom_model_get_fraction() to take a model instead
	of the zoom factor.

	* app/display/gimpdisplayshell.[ch]: use a GimpZoomModel for the
	display scale factor.

	* app/actions/image-commands.c
	* app/actions/view-actions.c
	* app/actions/view-commands.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-scale.c
	* app/display/gimpdisplayshell-title.c
	* app/display/gimpnavigationeditor.c
	* app/display/gimpstatusbar.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpmagnifytool.c: changed accordingly.

2005-09-25  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcroptool.c: fixed assignment of local variable
	"rectangle_exists".

2005-09-25  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpnewrectselecttool.c: fixed assignment of local
	variable "rectangle_exists".

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): reordered checks for
	the modifiers pressed on <Tab> so NumLock and friends don't
	interfere. Fixes bug #317118.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgetsenums.h: added more values to the
	GimpZoomType enum.

	* libgimpwidgets/gimpzoommodel.c (gimp_zoom_model_zoom_step):
	handle the new enum values.

	* app/actions/view-commands.c (view_zoom_cmd_callback) use the new
	values.

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): cosmetics.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpzoommodel.[ch]: minor cleanup, documentation.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/quit-dialog.c (quit_close_all_dialog_new): another
	patch from Sylvain Foret that fixes the dialog title for the close
	all dialog. Fixes bug #317137. Also pass the right help IDs to
	gimp_message_dialog_new().

2005-09-24  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpwidgetsenums.h: remove the GIMP_ZOOM_LABEL value
	from GimpZoomWidgetType.

	* libgimpwidgets/gimpwidgetsenums.c: regenerated.

	* libgimp/gimpzoompreview.c: provides two read only properties,
	"fraction" and "percentage" to be used with prop widgets.

	* libgimpwidgets/gimpzoommodel.c: use a gimp_prop_label to show the
	zoom fraction.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/actions/file-actions.c: set "Close all" insensitive when
	there are no displays.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c
	* app/actions/view-commands.[ch]: de-uglify callback names for
	"new" and "close".

2005-09-24  Michael Natterer  <mitch@gimp.org>

	Applied (slightly modified) patch from Sylvain Foret which adds
	"Close All" menu entries and dialog. Fixes bug #163532.

	* app/actions/file-actions.c
	* app/actions/file-commands.[ch]: added "file-close-all" action
	and callback.

	* app/dialogs/dialogs-constructors.[ch]
	* app/dialogs/dialogs.c
	* app/dialogs/quit-dialog.[ch]: added close all dialog which is a
	modified quit dialog.

	* app/widgets/gimphelp-ids.h: added help ID.

	* menus/image-menu.xml.in
	* menus/toolbox-menu.xml.in: add close all next to quit.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-scale.c
	(gimp_display_shell_scale_dialog): set "activates-default" on all
	spinbuttons.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c: fixed some brokenness caused by my
	last "cleanup". Should work as before now.

	* plug-ins/common/decompose.c: cleaned up GUI and code.

2005-09-24  DindinX  <dindinx@gimp.org>

	* app/widgets/widgets-enums.h: Moved the GimpZoomType enum from
	here...

	* libgimpwidgets/gimpwidgetsenums.h: ...to here.

	* app/widgets/widgets-enums.c
	* libgimpwidgets/gimpwidgetsenums.c: regenerated.

	* app/display/gimpdisplayshell-scale.[ch]: removed
	gimp_display_shell_scale_zoom_step and
	gimp_display_shell_scale_get_fraction from here...

	* libgimpwidgets/gimpzoommodel.[ch]: ... to here so we can use these
	utility functions in plug-ins and in the core.
	Also removed the step-size property since the zoom-model now use
	gimp_zoom_model_zoom_step.

	* app/actions/view-commands.c
	* app/display/gimpdisplayshell-title.c
	* app/display/gimpdisplayshell.c
	* app/tools/gimpmagnifytool.c: modified accordingly.

	* libgimp/gimpzoompreview.c: don't pass any argument to the
	gimp_zoom_model_new function.

	* libgimpwidgets/gimpwidgets.def: added gimp_zoom_model_zoom_step
	(gimp_zoom_model_get_fraction was already there)

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintcore.h
	* app/tools/gimpimagemaptool.c
	* tools/test-clipboard.c: indentation fixes.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpactiongroup.c
	(gimp_action_group_set_action_hide_empty): renamed from
	set_action_important(). Set the "hide-if-empty" property so
	showing an insensitive "Empty" item instead of hiding the submenu
	works again (did this ever work?).

	* app/actions/tool-options-actions.c (tool_options_actions_setup):
	changed accordingly. Keeps the tool options submenus from
	disappearing.

2005-09-23  Michael Natterer  <mitch@gimp.org>

	* menus/image-menu.xml.in: reordered submenus and placeholders
	so stuff is not grouped that randomly any longer.

	* plug-ins/script-fu/scripts/hsv-graph.scm: move it to the "Info"
	placeholder so it is next to histogram and ccanalyze.

2005-09-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-save.c: added a tooltip that explains how to
	obtain the file size.

2005-09-22  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: added a check for libgnomeprintui.

	* plug-ins/common/gnomeprint.c: added a simple Print plug-in that
	uses libgnomeprint and libgnomeprintui. Needs more work.

	* plug-ins/common/plugin-defs.pl: added the new plug-in.

	* plug-ins/common/Makefile.am: regenerated.

2005-09-22  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.c: renamed the properties "value",
	"minimum" and "maximum".

	* libgimp/gimpzoompreview.c: modified accordingly.

2005-09-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/print.c: canonicalize procedure name and parameters.

2005-09-22  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c: reorganized and cleaned up GUI and code.

2005-09-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd.c
	* plug-ins/common/psd_save.c: don't hardcode unit conversion factors.

2005-09-21  Jay Cox  <jaycox@gimp.org>

	* plug-ins/common/psd.c: Load the resolution properly when it is
	specified in px/cm.
	* plug-ins/common/psd_save.c: Save the resolution of the image in
	the file.  Fixes bug #310426

2005-09-21  Sven Neumann  <sven@gimp.org>

	* HACKING: minor update.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/spheredesigner.c: update the preview from an
	idle handler. Removed obsolete "Update Preview" button.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/spheredesigner.c: more compact dialog layout,
	renamed "Textures" to "Layers" and make sure that one is always
	selected.

2005-09-21  Michael Natterer  <mitch@gimp.org>

	Separated the global buffer logic from the clipboard
	implementation:

	* app/widgets/gimpclipboard.[ch]: removed all knowledge about
	gimp->global_buffer. Removed the Gimp::buffer-changed callback.
	Made gimp_clipboard_set_buffer() public and remember the set
	buffer in the GimpClipboard struct. Fixed the has_buffer() and
	has_svg() functions.

	* app/gui/gui.c: connect to Gimp::buffer-changed here and call
	gimp_clipboard_set_buffer() from the callback.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c: use ngettext for plural forms.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/cubism.c: initialize variables.

	* plug-ins/common/depthmerge.c: declare all functions as static.

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.[ch]: make use of private data instead
	of struct members. Added a gimp_zoom_preview_get_drawable so we
	can still get the drawable from a preview in plug-ins.

	Also changed gimp_zoom_preview_get_data() to
	gimp_zoom_preview_get_source(), to make it more obvious what it
	returns.

	* libgimp/gimpui.def
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/blinds.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/colorify.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/illusion.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/nova.c
	* plug-ins/common/polar.c
	* plug-ins/common/retinex.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c: changed accordingly.

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.[ch]: use private data instead of
	struct members. Added min-factor and max-factor properties so we can
	set the zoom range. These can be set by a new utility function:
	gimp_zoom_model_set_range.

	* libgimpwidgets/gimpwidgets.def: added gimp_zoom_model_set_range.

	* libgimp/gimpzoompreview.c: use gimp_zoom_model_set_range so we can
	only zoom in.

2005-09-20  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.c (erode_region, dilate_region):
	fixed bug in buffer initialization, spotted by Tobias Lenz.

2005-09-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/svg.c: corrected version check (bug #314400).

2005-09-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscale.c: invalidate the buffer when the
	widget's sensitivity changes. Draw a stipple pattern on the
	insensitive color scale.

2005-09-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/raw.c (query): fixed capitalization.

2005-09-20  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c: applied patch from Sylvain Foret
	which allows to use fixed greyscale values instead of drawables
	for color components. Fixes bug #309112.

2005-09-20  Sven Neumann  <sven@gimp.org>

	* app/core/gimpitem.c: added read-only properties for id, width
	and height.

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimp/gimpui.def: added the functions from gimpzoompreview.h

	* libgimpwidgets/gimpwidgets.def: added the functions from
	gimpzoommodel.h

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.[ch]: New object to handle zoom
	factor, and create widgets to control or view this value.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h: Added gimpzoommodel.[ch].

	* libgimpwidgets/gimpwidgetsenums.h: new enum: GimpZoomWidgetType.
	This enumerate which knid of widget you can created from the zoom
	model.

	* libgimpwidgets/gimpwidgetsenums.c
	* libgimpwidgets/gimpwidgetstypes.h: regenerated.

	* libgimpwidgets/gimppreview.c: move the update toggle to the bottom
	of the box.

	* libgimp/Makefile.am
	* libgimp/gimpui.h
	* libgimp/gimpuitypes.h
	* libgimp/gimpzoompreview.[ch]: New widget, derivated from
	GimpScrolledPreview, which offer the same functionnalities as the
	GimpAspectPreview widget plus zoom facilities.

	* plug-ins/common/AlienMap2.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/blinds.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/colorify.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/illusion.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/nova.c
	* plug-ins/common/polar.c
	* plug-ins/common/retinex.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c: use a GimpZoomPreview instead of a
	GimpAspectPreview.

2005-09-19  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpclipboard.[ch]: added new public function
	gimp_clipboard_set_svg() and internal stuff to offer and transfer
	the svg data to the clipboard.

	* app/actions/vectors-commands.c (vectors_copy_cmd_callback)
	(vectors_paste_cmd_callback): implement copy/paste of vectors as
	SVG. Fixes bug #316547.

	* app/widgets/gimpvectorstreeview.c
	(gimp_vectors_tree_view_drag_svg): don't add the terminating
	nul-byte of the svg string to svg_data_length, it confuses the XML
	parser.

	* app/actions/vectors-actions.c
	* app/actions/vectors-commands.[ch]
	* menus/vectors-menu.xml: reordered export/import so they are in
	the same order as copy/paste.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: moved toolbar out of main vbox.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* autogen.sh
	* configure.in
	* app/main.c
	* app/widgets/gimptoolbox.c
	* plug-ins/script-fu/scripts/web-browser.scm: changed "The GIMP"
	to "GNU Image Manipulation Program" or just "GIMP".

2005-09-19  Sven Neumann  <sven@gimp.org>

	* app/actions/actions.c: use GTK_STOCK_FILE for File actions.

	* app/actions/dialogs-actions.c
	* plug-ins/gimpressionist/gimpressionist.c
	* plug-ins/print/gimp_main_window.c: use GTK_STOCK_ABOUT for About
	dialogs.

	* app/actions/actions.c
	* app/actions/brushes-actions.c
	* app/actions/channels-actions.c
	* app/actions/channels-commands.c
	* app/actions/colormap-editor-actions.c
	* app/actions/gradients-actions.c
	* app/actions/layers-actions.c
	* app/actions/layers-commands.c
	* app/actions/palette-editor-actions.c
	* app/actions/palettes-actions.c
	* app/actions/patterns-actions.c
	* app/actions/templates-actions.c
	* app/actions/templates-commands.c
	* app/actions/text-editor-actions.c
	* app/actions/tool-options-actions.c
	* app/actions/vectors-actions.c
	* app/actions/vectors-commands.c
	* app/tools/gimptexttool.c
	* app/widgets/gimpcontrollereditor.c
	* app/widgets/gimpcontrollerlist.c
	* plug-ins/flame/flame.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/orientation.c
	* plug-ins/gimpressionist/size.c
	* plug-ins/metadata/interface.c: s/GIMP_STOCK_EDIT/GTK_STOCK_EDIT/

2005-09-19  Michael Natterer  <mitch@gimp.org>

	Did a global s/qmask/quick-mask/:

	* app/actions/qmask-actions.[ch]
	* app/actions/qmask-commands.[ch]
	* app/core/gimpimage-qmask.[ch]
	* menus/qmask-menu.xml
	* themes/Default/images/stock-qmask-off-16.png
	* themes/Default/images/stock-qmask-on-16.png: removed.

	* app/actions/quick-mask-actions.[ch]
	* app/actions/quick-mask-commands.[ch]
	* app/core/gimpimage-quick-mask.[ch]
	* menus/quick-mask-menu.xml
	* themes/Default/images/stock-quick-mask-off-16.png
	* themes/Default/images/stock-quick-mask-on-16.png: added.

	* app/actions/Makefile.am
	* app/actions/actions.c
	* app/core/Makefile.am
	* app/core/core-enums.[ch]
	* app/core/gimpchannel.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-undo.c
	* app/core/gimpimage.[ch]
	* app/core/gimpundo.[ch]
	* app/display/gimpdisplayshell-appearance.c
	* app/display/gimpdisplayshell-callbacks.[ch]
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell.[ch]
	* app/menus/menus.c
	* app/widgets/gimphelp-ids.h
	* libgimpwidgets/gimpstock.[ch]
	* menus/Makefile.am
	* menus/image-menu.xml.in
	* themes/Default/images/Makefile.am: changed accordingly.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_get_new_pixbuf): use
	GTK_STOCK_DIRECTORY for GIMP_THUMB_STATE_FOLDER.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: replaced buttons with toolbar.

2005-09-18  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c (view_zoom_actions): added stock IDs
	and help IDs to the new zoom actions.

	* menus/image-menu.xml.in: removed the <accelerator .../> lines
	again. Actions don't need a visible proxy to be activatable.

2005-09-18  Sven Neumann  <sven@gimp.org>

	* app/actions/view-actions.c (view_zoom_actions):
	* menus/image-menu.xml.in: added extra Zoom In/Out actions and
	bind them to the Add/Subtract keys on the keypad (bug #316555).

2005-09-17  Michael Natterer  <mitch@gimp.org>

	We don't need two labels for "Toggle Quick Mask":

	* app/actions/qmask-actions.c: removed "qmask-active" action.

	* menus/qmask-menu.xml: use "qmask-toggle" instead.

	* app/actions/actions.c (action_groups): s/QuickMask/Quick Mask/
	Fixes bug #316569.

2005-09-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpactionview.c (gimp_action_view_new): skip
	actions if their name starts with '<' (menu actions created by
	plug-ins have names like "<Image>/Foo/Bar"). Scroll the
	pre-selected action to the center of the view, not to the top.

	* app/widgets/gimpcontrollereditor.c
	(gimp_controller_editor_edit_clicked): make the action editor
	transient to the controller editor. Show the edited event's name
	in the controller editor's header.

	* app/widgets/gimpcontrollerwheel.c: use gimp_get_mod_string()
	instead of hardcoding the modifiers in tons of translatable
	strings. Don't call gettext() in GimpController::get_blurb(),
	the strings are already translated.

	* app/widgets/gimpcontrollerkeyboard.c: removed call to gettext()
	here too.

2005-09-16  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpimagemaptool.c (gimp_image_map_tool_initialize):
	set the imagemap tool dialogs transient to the image window. See
	comments in bug #316521.

2005-09-16  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-utils.[ch] (gimp_widget_set_accel_help):
	mis-named and mis-placed function that sets a widget's tooltip to
	the action's tooltip plus the action's keyboard shortcut.

	* app/widgets/gimptoolbox.c: at least the code is not here any
	more.

	* app/actions/tools-actions.c: use tool_info->help, not ->blurb
	as the action's tooltip so the above works.

2005-09-13  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcroptool.c
	* app/tools/gimprectangleoptions.c
	* app/tools/gimprectangletool.c
	* app/tools/gimpnewrectselecttool.c: changed the way we stay inside
	images boundaries so each tool decides whether it does or not.

2005-09-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c (gimp_toolbox_substitute_underscores):
	removed.

2005-09-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-utils.c (gimp_get_mod_name_*): removed
	"<>" around modifiers.

	* app/tools/gimpbucketfilloptions.c
	* app/tools/gimpcolorpickeroptions.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcropoptions.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpflipoptions.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimpmagnifyoptions.c
	* app/tools/gimpmoveoptions.c
	* app/tools/gimpselectionoptions.c
	* app/tools/gimptransformoptions.c
	* app/widgets/gimpeditor.c
	* app/widgets/gimpthumbbox.c: added "()" around the whole modifier
	string where appropriate.

	* app/widgets/gimptoolbox.c (gimp_toolbox_button_accel_changed):
	use gimp_get_mod_string() instead of homebrewn variant of the same
	code.

	* app/widgets/gimpcontrollerkeyboard.c: replaced tons of static
	translatable strings containing modifiers by generated ones using
	gimp_get_mod_string() (traded for some more memory consumption).

2005-09-13  Michael Natterer  <mitch@gimp.org>

	* app/actions/dockable-actions.c (dockable_actions_update): don't
	make "Detach Tab" insensitive if there are other dockbooks in the
	dock.

	* app/widgets/gimpdock.[ch]
	* app/widgets/gimpdockseparator.[ch]: cleanup.

2005-09-13  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: don't modify the rectangle while
	moving, and stick to edges when going out of image boundaries.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/actions/edit-actions.c: use "Undo History" instead of "Undo
	Editor" in user-visible string. Removed wrongly used ellipsis.

	* app/dialogs/offset-dialog.c: added translator comment.

	* app/dialogs/quit-dialog.c: string change.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: allow to disable build of the poppler plug-in.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-close.c (gimp_time_since): use
	ngettext for plural forms.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* modules/colorsel_cmyk.c: added comments for translators.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette-import.c (gimp_palette_import_from_image):
	ignore transparent pixels as suggested in bug #316212.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpbucketfilloptions.c: reorder options as suggested
	in bug #316150.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-title.c
	(gimp_display_shell_format_title): use ngettext for plural form.

	* app/dialogs/user-install-dialog.c: string fix (bug #316148).

2005-09-12  Michael Natterer  <mitch@gimp.org>

	Really fix bug #150593:

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpdockseparator.[ch]: new widget implementing the
	droppable separator bar in docks.

	* app/widgets/gimpdock.c: use it and removed local separator
	utility functions.

	* app/widgets/gimptoolbox.c: use GimpDockSeparator API to show/hide
	the label. Expand the separator initially.

	* themes/Default/gtkrc
	* themes/Small/gtkrc: the separator height style property moved
	from GimpDock to GimpDockSeparator.

2005-09-12  Akkana Peck  <akkana@cvs.gnome.org>

	* menus/image-menu.xml.in
	* app/actions/image-actions.c: Move Mode menu from Colors
	back to Image, and rename it back to Mode, as per consensus
	on #gimp.

2005-09-12  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptoolbox.c: set the label style italic. Moved
	separator code into utility functions.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c (gimp_toolbox_book_added)
	(gimp_toolbox_book_removed): if there is no dockbook added, expand
	the separator and add a label telling the user that she can drop
	dockables there. Fixes bug #150593.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.[ch] (enum GimpUndoType): replaced lots of
	bogus strings by properly translatable ones. Many of them are
	fallbacks anyway, but they should be presentable to the user.
	Fixes bug #315964.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpstatusbar.c: don't include "core/gimpmarshal.h",
	replaced '_' by '-' in property name.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c (script_fu_response):
	bail out if the action_area is insensitive. Ignores attempts to
	close the window while the script is running. Fixes bug #308662.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainerbox.c
	(gimp_container_box_set_size_request): take the container's
	border_width into account.

	* app/widgets/gimpcontainergridview.c
	(gimp_container_grid_view_init): make sure GTK_SHADOW_IN is set on
	the scrolled window, not on the viewport, so we get the same
	results for list and grid views when using
	gimp_container_box_set_size_request().

	* app/widgets/gimpcontainerpopup.[ch]: added setters and getters
	for view_type and preview_size, don't allow the preview to grow
	larger than the popup.

	* app/widgets/gimpviewablebutton.[ch]: added "popup-view-type" and
	"popup-preview-size" properties and setters/getters.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewablebox.c: factored out common code in
	preparation of fixing bug #315443.

	* app/widgets/gimpviewablebutton.h (struct GimpViewableButton):
	"popup_preview_size" is a gint, not a GimpViewType.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpiscissorstool.c	(gimp_iscissors_tool_button_release):
	use gimp_draw_tool_on_handle() to figure if we need to close the
	path. Makes sure that the anchor's sensitive area matches its size
	on screen. Fixes bug #134250.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpbase-private.h: GimpUnitVTable -> GimpUnitVtable

	* libgimpbase/gimpbase-private.c
	* libgimp/gimp.c (gimp_main)
	* app/units.c (units_init): changed accordingly.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c (gimp_clone_options_gui): moved the
	"Sample merged" toggle below the "Image source" radio button.
	Also fixed capitalization of "Sample merged".

2005-09-10  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprogress.h: match parameter name in .c file.

2005-09-09  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/aa.c
	* plug-ins/common/csource.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gih.c
	* plug-ins/common/gtm.c
	* plug-ins/common/mng.c
	* plug-ins/common/pat.c
	* plug-ins/common/png.c
	* plug-ins/common/pnm.c
	* plug-ins/common/postscript.c
	* plug-ins/common/psp.c
	* plug-ins/common/raw.c
	* plug-ins/common/sunras.c
	* plug-ins/common/tga.c
	* plug-ins/common/tiff.c
	* plug-ins/common/xbm.c
	* plug-ins/common/xpm.c
	* plug-ins/gfli/gfli.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/sgi/sgi.c
	* plug-ins/winicon/icodialog.c: actually call
	gimp_window_set_transient() on save dialogs.
	Really fixes bug #62988.

2005-09-09  Michael Natterer  <mitch@gimp.org>

	Added parent window API to the GimpProgress interface and to
	the libgimp progress stuff. Might look strange, but does
	the right thing in almost all cases (image window, file dialog,
	script-fu dialog etc). Fixes bug #62988.

	* app/core/gimpprogress.[ch]: added GimpProgress::get_window()
	which should return a toplevel window ID if the progress is in a
	window that wants to be the transient parent of plug-in dialogs.

	* app/widgets/gimpwidgets-utils.[ch] (gimp_window_get_native): new
	function which returns the window handle of a GtkWindow's GdkWindow.

	* app/widgets/gimpfiledialog.c: implement ::get_window().

	* app/display/gimpdisplay.[ch]: ditto. Removed window handle API.

	* app/gui/gui-vtable.c: changed accordingly.

	* libgimpbase/gimpbaseenums.[ch] (enum GimpProgressCommand):
	added GIMP_PROGRESS_COMMAND_GET_WINDOW.

	* app/plug-in/plug-in-progress.[ch] (plug_in_progress_get_window):
	new function. Also renamed some functions to match the
	GimpProgress interface, and not the legacy PDB procedure names.

	* tools/pdbgen/pdb/progress.pdb
	* app/core/gimppdbprogress.c: implement get_window() on both
	sides of the wire, keeping backward compatibility (hopefully).

	* libgimp/gimpprogress.[ch]: deprecated gimp_progress_install()
	and added gimp_progress_install_vtable() which takes a vtable with
	padding to be extensible. Added get_window() vtable entry and
	dispatch it accordingly. Also added pulse() which was implemented
	in a hackish way before. Everything is of course backward
	compatible.

	* libgimp/gimpprogressbar.c: inmplement the get_window() stuff
	so a plug-in dialog containing a progress can be the transient
	parent of another dialog in another plug-in.

	* libgimp/gimpui.[ch] (gimp_ui_get_progress_window): new function
	which returns a foreign GdkWindow of this plug-ins progress
	window.

	Renamed gimp_window_set_transient_for_default_display() to
	gimp_window_set_transient() and make it use the progress' window
	handle instead of the display's (which is the right thing to do in
	almost all cases).

	* libgimp/gimp.def
	* libgimp/gimpui.def: add the new functions.

	* tools/pdbgen/enums.pl
	* app/pdb/internal_procs.c
	* app/pdb/progress_cmds.c
	* libgimp/gimpprogress_pdb.[ch]: regenerated.

	* libgimp/gimpexport.c
	* plug-ins/*/*.c: follow API change.

2005-09-09  Tor Lillqvist  <tml@novell.com>

	* gimptool-win32.c.in (get_prefix, maybe_append_exe)
	* libgimpbase/gimpdatafiles.c (is_script): Practice what I preach
	and use g_ascii_strcasecmp() instead of g_strcasecmp().

2005-09-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/print.c (printrc_load): use g_ascii_strcasecmp()
	instead of strcasecmp().

2005-09-09  Michael Natterer  <mitch@gimp.org>

	* configure.in: Removed 'hi' again until all po files are there.

2005-09-09  Rajesh Ranjan  <rajeshkajha@yahoo.com>

	* configure.in: Added 'hi' to ALL_LINGUAS.

2005-09-08  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer-floating-sel.c (floating_sel_boundary): if
	the floating selection has no alpha, manually create BoundSegs of
	its outline instead of calling boundary_find() (which creates a
	boundary of the last channel). Fixes bug #145373.

	* app/widgets/gimplayertreeview.c
	(gimp_layer_tree_view_floating_selection_changed): update all
	layer names' text attributes, not only for layers with alpha.
	Fixes layer name display when making a new layer out of a floating
	selection without alpha.

2005-09-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainertreeview.c: allow to popup the context
	menu from the views' empty area. Fixes bug #314719.

2005-09-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel-combine.c (gimp_channel_combine_ellipse):
	use gimp_rectangle_intersect() instead of just looking at the
	passed in w,h to figure whether nothing needs to be done. While
	the algorithm does nicely with an entirely out-of-image ellipse,
	the channel's bounds were set to a rectangle of zero width or
	height, which caused subsequent calls to gimp_channel_bounds() to
	return broken bounds. Fixes bug #315417.

	(gimp_channel_combine_rect)
	(gimp_channel_combine_mask): use gimp_rectangle_intersect() here
	too instead of the usual unclear CLAMPing on x1,y1,x2,y2.

2005-09-07  Ankit Patel  <ankit644@yahoo.com>

	* configure.in: Added 'gu' to ALL_LINGUAS.

2005-09-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimperrordialog.[ch]: don't set a window icon, the
	dialog should be transient anyway.

	* app/dialogs/dialogs-constructors.c: changed accordingly.

2005-09-06  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/paint-funcs/paint-funcs-generic.h (blend_pixels): change
	variables from unsigned to signed -- fixes problem described
	in comment 17 of bug #163721.

2005-09-06  Sven Neumann  <sven@gimp.org>

	* app/dialogs/stroke-dialog.c (stroke_dialog_new): use
	gtk_object_sink() to destroy a floating widget.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* plug-ins: Call gimp_window_set_transient_for_default_display()
	for most plug-in dialogs. Not yet done are load and save dialogs
	and dialogs created from language bindings.

2005-09-05  Sven Neumann  <sven@gimp.org>

	Address bug #307971:

	* app/core/gimp-gui.[ch]
	* app/display/gimpdisplay.[ch]
	* app/gui/gui-vtable.c
	* tools/pdbgen/pdb/display.pdb: added PDB function to obtain a
	window handle on an image display.

	* app/pdb/display_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpdisplay_pdb.[ch]: regenerated.

	* libgimp/gimpui.[ch]: added functions to set a GtkWindow transient
	to an image display.

	* plug-ins/common/gauss.c: use the new function exemplarily.

	* libgimp/gimp.def
	* libgimp/gimpui.def: updated.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* app/actions/edit-actions.c
	* app/menus/menus.c
	* app/widgets/gimpundoeditor.c
	* menus/Makefile.am
	* menus/undo-editor-menu.xml: added menu for undo editor.

2005-09-05  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/edit.pdb: applied patch from David Gowers which
	adds "gimp-edit-named-delete". Addresses bug #315130. Added
	"gimp-edit-named-rename" additionally.

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/edit_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpedit_pdb.[ch]: regenerated.

2005-09-05  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-edit.c: don't let named cut/copy affect the global
	buffer. Fixes bug #315225. Also make "Global Buffer" translatable.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* app/core/gimp.[ch]
	* app/core/gimpimage-new.c: removed the confusing and redundant
	feature of having the New Image dialog default to the size of the
	global buffer. Please use Paste as New instead. Fixes bug #315106.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectangletool.c: terminate variable argument list.
	Fixes bug #315255.

2005-09-05  Michael Natterer  <mitch@gimp.org>

	* app/actions/edit-actions.c
	* app/actions/edit-commands.[ch]
	* menus/image-menu.xml.in: applied modified patch from David
	Gowers which adds an "edit-named-copy-visible" actions and its
	menu item. Addresses bug #315130.

2005-09-04  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangleoptions.c: evil => GIMP_MAX_IMAGE_SIZE.

2005-09-04  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: stay within image boundaries.

2005-09-04  Michael Natterer  <mitch@gimp.org>

	Cleaned up and fixed the order in which default tool options and
	user context values are initialized, and added loading / saving of
	the global user context.  Fixes bug #165078.

	* app/core/Makefile.am
	* app/core/gimp-contexts.[ch]: new files which manage the global
	contexts. Contains gimp_contexts_init/exit/load/save/clear().

	* app/core/gimp.c: use the new init/exit functions instead of
	implementing the stuff here.

	* app/tools/gimp-tools.c: load/save/clear the user context from
	here so it follows the same logic as the tool options. Reset all
	tool options before loading the user context and copy the user
	context's property to all tool options before loading tool
	options.

	* app/core/gimptoolinfo.c (gimp_tool_info_new): don't initialize
	the tool options with the users context's properties. It's way too
	early here and they will be overwritten later.

	* app/widgets/gimpdevices.c (gimp_devices_restore): initialize all
	device contexts with the user context's properties before loading
	the devices and copying the active one back to the user context.

2005-09-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/coffee.scm
	* plug-ins/script-fu/scripts/fade-outline.scm
	* plug-ins/script-fu/scripts/glossy.scm
	* plug-ins/script-fu/scripts/gradient-bevel-logo.scm
	* plug-ins/script-fu/scripts/select-to-pattern.scm: string fixes as
	pointed out in bug #315211.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/base/temp-buf.c (temp_buf_resize): do new_size calculation
	only when needed.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintcore.c (gimp_paint_core_get_orig_image)
	(gimp_paint_core_get_orig_proj): replaced manual calculation of
	the offset of a pixel in a tile (marked as /* dubious... */ for a
	reason) by simply using the offset parameters of tile_data_pointer().

2005-09-03  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.[ch]
	* app/tools/gimprectangleoptions.[ch]: code cleanup, replace
	virtualization functions with interface properties.

	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpnewrectselecttool.[ch]
	* app/tools/gimpcropoptions.[ch]
	* app/tools/gimpnewrectselectoptions.[ch]: code cleanup, use said
	interface properties.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/base/pixel-surround.c: s/row_stride/rowstride/g.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/base/pixel-region.[ch]: some general cleanup.

	(pixel_region_init_temp_buf)
	(pixel_region_init_data): new functions which initialize pixel
	regions on TempBufs and on raw contiguous arrays of pixel data.

	(pixel_region_configure): fixed a bug that has probably been there
	forever: when processing contiguous (non-tiled) data, interpret
	the original x and y coordinates of the region as offsets into
	the data. Before this fix, the initial x and y were simply ignored
	(by using them in a broken way), thus always forcing the upper
	left corner of the region being the beginning of the passed data.

	Lots of code was working around this problem by setting the
	pixel_region's data pointer to the proper starting pixel of the
	region in the middle the buffer.

	* libgimp/gimppixelrgn.c: some general cleanup.

	(gimp_pixel_rgn_configure): same fix as above. Fortunately, nobody
	seems to know that libgimp pixel regions can be used on arrays of
	data, just as core ones. Only two plug-ins were using this
	feature, and they are antique and written by spencer and federico,
	respectively. They both don't use offsets into the buffers and are
	not affected by this change. It's highly unlikely that anybody out
	there knows/uses this feature, so it can IMHO be safely changed.

	* app/base/temp-buf.c
	* app/core/gimpbuffer.c
	* app/core/gimpdrawable-combine.c
	* app/core/gimpdrawable-preview.c
	* app/core/gimpimage-preview.c
	* app/core/gimplayer.c
	* app/paint/gimpbrushcore.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimppaintcore.c
	* app/paint/gimpsmudge.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimppainttool.c: use the pixel_region_init_foo()
	functions instead of initializing regions of TempBufs and raw data
	manually. Removed lots of workarounds for the broken offset
	handling. The changed places of code are much more readable now.

2005-09-03  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimptextoptions.c: minor string changes.

2005-09-03  Seth Burgess <sjburges@gimp.org>

	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorizetool.c
	* app/tools/gimphuesaturationtool.c: change the update policy to
	GTK_UPDATE_CONTINUOUS for considerably better responsiveness

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-edit.[ch] (gimp_edit_paste_as_new): don't create a
	display here.

	(gimp_edit_named_cut)
	(gimp_edit_named_copy)
	(gimp_edit_named_copy_visible): new functions containing named
	buffer wrappers around the functions affecting the global buffer
	only.

	* app/actions/edit-commands.c: use the new functions instead of
	implementing them here, create a display for the image returned
	by paste as new.

	* app/actions/buffers-commands.c
	* app/widgets/gimptoolbox-dnd.c: create displays here too.

	* tools/pdbgen/pdb/edit.pdb: added wrappers for paste as new and
	wrappers for all the cut/copy/paste named stuff.
	Fixes bug #315130. Cleaned up and de-obfuscated.

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/edit_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpedit_pdb.[ch]: regenerated.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainertreeview.c: allow to popup menus on
	empty container views using the standard Shift-F10 keybinding.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* modules/Makefile.am: applied patch that fixes a build issue on
	Cygwin (bug #314893).

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptextoptions.c
	* app/widgets/gimpwidgets-utils.[ch]: dropped the labels from text
	tool options that have icons. Reduces visual clutter.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_expose): draw guides over the grid.

2005-09-02  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c (test_clipboard_copy_callback): don't
	quit the main loop after transferring the data to GTK, it needs a
	running main loop to get the chunks transferred to X.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/dialogs/convert-dialog.c
	* app/dialogs/image-merge-layers-dialog.c
	* app/dialogs/layer-add-mask-dialog.c
	* app/dialogs/offset-dialog.c: use verbs instead of "OK" in the
	confirmative dialog button.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* AUTHORS
	* app/dialogs/authors.h: regenerated.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpwrite.c
	* plug-ins/common/aa.c
	* plug-ins/common/csource.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gif.c
	* plug-ins/common/gih.c
	* plug-ins/common/gtm.c
	* plug-ins/common/mail.c
	* plug-ins/common/mng.c
	* plug-ins/common/pat.c
	* plug-ins/common/png.c
	* plug-ins/common/pnm.c
	* plug-ins/common/postscript.c
	* plug-ins/common/psp.c
	* plug-ins/common/raw.c
	* plug-ins/common/sunras.c
	* plug-ins/common/svg.c
	* plug-ins/common/tga.c
	* plug-ins/common/tiff.c
	* plug-ins/common/xbm.c
	* plug-ins/common/xpm.c
	* plug-ins/fits/fits.c
	* plug-ins/gfli/gfli.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/script-fu/script-fu-server.c
	* plug-ins/sgi/sgi.c
	* plug-ins/winicon/icodialog.c
	* plug-ins/xjt/xjt.c: use verbs instead of "OK" in the
	confirmative dialog button.

2005-09-02  Tor Lillqvist  <tml@novell.com>

	* authors.xml: Mark people as documenter or artist, based on
	ChangeLogs and other information. Remove translator names, they
	are in the respective .po files.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c (load_image)
	* plug-ins/jpeg/jpeg-save.c (save_image): removed tile cache again,
	it doesn't help for the way the plug-in accesses the pixels.

2005-09-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette.[ch]: reverted, it duplicates existing
	functionality.

	* app/core/gimppalette-import.c
	(gimp_palette_import_from_indexed_image): name the colors using
	their index in the colormap.

2005-09-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette.[ch]: added gimp_palette_new_from_colormap().

2005-09-01  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c
	* libgimp/gimpprocbrowserdialog.c: use ngettext() for plural forms
	(bug #314764).

2005-08-31  Sven Neumann  <sven@gimp.org>

	* libgimp/gimp.c (gimp_run_procedure2, gimp_run_procedure):
	improved documentation.

2005-08-31  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/preferences-dialog.c
	(prefs_check_button_add_with_icon): added optional size group
	parameter and add the icon to the group.

	(prefs_dialog_new): align the icons on the tool options and
	toolbox pages.

2005-08-29  Michael Natterer  <mitch@gimp.org>

	The previous commit added tons of code just to completely break
	clone align behavior. Reverted lots of the changes and do the
	sample-merged stuff at the innermost place (gimp_clone_motion).
	This change also enables changing sample-merged between paint
	strokes.

	* app/paint/gimpclone.[ch] (struct GimpClone): changed member
	"src_pickable" back to "src_drawable".

	(gimp_clone_paint): completely reverted.

	(gimp_clone_motion): do the drawable/projection -> pickable
	stuff and drawable offset handling here.

	Fixed signal handling to connect to the drawable's "removed"
	signal (not "disconnect", eek). Disconnect from the signal once
	the drawable has been removed.

	* app/tools/gimpclonetool.c: changed accordingly.

2005-08-29  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/gif.c: added toggles which allow to always use
	the frame delay and disposal entered in the dialog, overriding the
	ones specified in the layer names. Fixes bug #314726. Also fixed
	missing and non-working mnemonics.

2005-08-29  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: fix canceling the tool.

2005-08-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/poppler.c: retitled dialog to "Import from PDF"
	and changed the confirmative button label to "Import".

2005-08-28  Michael Natterer  <mitch@gimp.org>

	Implement "Sample Merged" for the clone tool. Fixes bug #123627.

	* app/paint/gimppaintcore.[ch] (struct GimpPaintCore): added
	members "saved_proj_tiles" which stores the unmodified projection,
	"orig_proj_buf" which stores the unmodified temp paint application
	buf and "use_saved_proj" which controls if all the additional
	stuff should be allocated and managed.

	(gimp_paint_core_start): allocate the saved_proj_tiles if needed.

	(gimp_paint_core_get_orig_proj): new function like
	gimp_paint_core_get_orig_image() which returns unmodified
	projection pixels for paint application.

	(gimp_paint_core_validate_saved_proj_tiles): new function like
	gimp_paint_core_validate_undo_tiles() which copies the tiles that
	will be dirtied to saved_proj_tiles.

	(gimp_paint_core_paste): call above validate_saved_proj_tiles() so
	projection tiles are saved before dirtying them.

	* app/paint/gimpclone.[ch]: replaced member src_drawable by
	src_pickable and use the image's projection if sample_merged it
	TRUE. Adjust src offsets accordingly and use GimpPaintCore's new
	get_orig_proj() API to get the src pixels.

	* app/paint/gimpcloneoptions.[ch]: added boolean "sample_merged"
	property.

	* app/tools/gimpclonetool.c: follow GimpClone's src_drawable ->
	src_pickable change.

	(gimp_clone_tool_button_press): set the paint_core's
	"use_saved_proj" boolean before chaining up.

	(gimp_clone_options_gui): add a "Sample Merged" toggle button.

2005-08-28  Manish Singh  <yosh@gimp.org>

	* m4macros/pythondev.m4: python headers on Win32 don't live in a
	versioned subdir. Handle that case.

2005-08-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewrendererpalette.c
	(gimp_view_renderer_palette_init): initialize renderer->columns
	to != 0 to avoid floating point exceptions on initial layout
	calculation. Fixes bug #314663.

2005-08-27  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/common/gradmap.c: applied a patch by David Gowers,
	which makes palette-map behave the same as gradient-map.
	Fixes bug #313458.

2005-08-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c (load_image)
	* plug-ins/jpeg/jpeg-save.c (save_image): set tile cache.

2005-08-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/svg.c: deal with SVG API change. This is a
	compile-time check and thus somewhat ugly because it requires a
	recompile of the plug-in when updating librsvg. Fixes bug #314400.

2005-08-26  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/about-dialog.c (about_dialog_add_logo): move the
	logo to the top of the dialog.

2005-08-26  Tor Lillqvist  <tml@novell.com>

	* app/plug-in/plug-in.c (plug_in_prep_for_exec, plug_in_open):
	Instead of passing a child_setup function whose body is ifdeffed
	out on Win32 to g_spawn_async(), pass NULL for child_setup on
	Win32. Newer g_spawn_async() implementations on Win32 warn if
	child_setup functions are attempted to be used, as they don't make
	sense because without any fork(), they are called in the parent
	process.

2005-08-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/blend-anim.scm: removed newline from
	description.

2005-08-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/sel2path/curve.c (new_curve_list)
	* plug-ins/sel2path/fit.c (split_at_corners)
	* plug-ins/winicon/icosave.c (ico_init_data): initialize variables.

2005-08-25  Michael Natterer  <mitch@gimp.org>

	* configure.in: define FOO_DISABLE_DEPRECATED for the new stable
	versions of GTK+ and Pango.

	Check for poppler >= 0.4.1, they did another API change.

	* plug-ins/common/poppler.c: and some more #ifdefs to
	poppler_page_render_to_pixbuf().

2005-08-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpview.[ch]: minor code and formatting cleanup.

2005-08-25  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpscanconvert.c: fixed API docs.

2005-08-25  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimputils.h (gimp_canonicalize_identifier): sync
	parameter name with implementation to please gtk-doc.

2005-08-24  Tor Lillqvist  <tml@novell.com>

	Make GIMP work on Win32 even if installed in a path containing
	random non-ASCII characters.

	* libgimpbase/gimpenv.c (gimp_toplevel_directory): [Win32] Use
	wide-char API on NT-based Windowses. Keep the toplevel directory
	name in UTF-8. The rest of GIMP assumes it is UTF-8 anyway, and
	for instance passes file names constructed from it to g_open().

	* app/plug-in/plug-in.c (plug_in_open): On Win32, if compiled
	against GLib < 2.8.2, convert the pathname arguments passed to
	g_spawn_async() to locale charset (system codepage). The
	g_spawn*() functions in GLib < 2.8.2 take system codepage
	arguments and not UTF-8.

2005-08-24  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/paint-funcs/paint-funcs-generic.h (blend_pixels):
	Change blending algorithm to fix misbehavior of smudge
	tool, should fix bug #163721.

2005-08-24  Sven Neumann  <sven@gimp.org>

	* app/actions/image-commands.c
	* app/actions/layers-commands.c
	* app/dialogs/image-scale-dialog.c
	* app/dialogs/resize-dialog.[ch]: remember the selected unit for
	scale and resize dialogs on a per-image basis (bug #312950).

2005-08-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/i26-gunya2.scm
	* plug-ins/script-fu/scripts/ripply-anim.scm: reverted the last
	change...

	* plug-ins/common/displace.c: ... and fixed the plug-in instead.
	The number of parameters must not change. Provide a new procedure
	for polar mode instead.

2005-08-24  Tor Lillqvist  <tml@novell.com>

	* plug-ins/script-fu/scripts/i26-gunya2.scm
	* plug-ins/script-fu/scripts/ripply-anim.scm: Add the new last
	parameter to plug-in-displace calls. (See entry for displace.c
	from 2005-02-10 below.)

2005-08-24  Sven Neumann  <sven@gimp.org>

	* configure.in: fixed quotes in AC_DEFINE() macros.

2005-08-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/iwarp.c (iwarp_dialog): added a hint on how to
	use this plug-in.

2005-08-23  Sven Neumann  <sven@gimp.org>

	* [lots of files]: applied capitalization patches contributed by
	Stephan Binner. Fixes bug #309657.

2005-08-23  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: minor optimizations.

	* app/actions/gradients-actions.c
	* app/actions/patterns-actions.c
	* plug-ins/metadata/interface.c: applied patch from Stephan Binner
	that fixes wrong use of ellipsis (bug #309657).

2005-08-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sample_colorize.c: use GTK_STOCK_APPLY and fixed
	capitalization in button label.

2005-08-23  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/poppler.c: added loading of pages as images.
	Addresses bug #138495.

2005-08-22  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/sample_colorize.c (smp_dialog): applied patch
	from David Gowers that adds mnemonics to all action area
	buttons. Fixes bug #314191.

2005-08-22  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: converted comments to gtk-doc
	inline API docs.

2005-08-22  Sven Neumann  <sven@gimp.org>

	* tools/test-clipboard.c: added --version command-line option.

2005-08-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpselectionoptions.c (gimp_selection_options_gui):
	the "Antialias" toggle got lost, resurrect it.

2005-08-21  Jens Seidel  <jseidel@cvs.gnome.org>

	* app/paint/gimpconvolve.c
	* app/tools/gimpiscissorstool.c
	* app/vectors/gimpvectors-import.c
	* libgimp/gimp.c
	* m4macros/gimp-2.0.m4
	* m4macros/gimpprint.m4
	* plug-ins/common/wind.c
	* plug-ins/fits/fitsrw.c
	* plug-ins/metadata/xmp-model.c
	* plug-ins/uri/uri-backend-wget.c: Fixed the typo
	"occured" (also in all effected PO files to avoid fuzzyness)

2005-08-21  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppencil.h
	* app/paint/gimppenciloptions.[ch]
	* app/widgets/widgets-types.h
	* app/widgets/gimptooldialog.h: don't simply typedef object
	instance structs which add no members as their parent instance
	structs. Give them their own instance structs.  Fixes gtk-doc
	confusion.

2005-08-21  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.h: removed HALF_WAY define, it's
	BOUNDARY_HALF_WAY now.

2005-08-20  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_proc_changed):
	when looking for the file extension, only look at the part after
	the last directory separator.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.[ch]: even more cleanup, replaced informal
	comments by API docs.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.[ch]: renamed puclic functions, defines and
	enums to live in a proper "boundary" namespace. Cleaned up and
	simplified internal code even more.

	* app/core/gimpchannel.c
	* app/core/gimpdrawable-stroke.c
	* app/core/gimplayer-floating-sel.c
	* app/paint/gimppaintcore-stroke.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimppainttool.c: changed accordingly.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.c: rename local "ns" variables to "num_segs"
	now that the global "num_segs" is gone.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.c: moved the entire internal state of boundary
	creation and sorting from <eek>global variables</eek> to a new
	"Boundary" struct that needs to be newly allocated for each
	boundary. Yes this allocates and frees memory more often than
	before but the old code was simply one big eek.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.c (sort_boundary): look at the passed "ns"
	variable instead of at the global "num_segs" one to figure if the
	passed array of BoundSegs is empty. Fixes bug #313922 at its root.

2005-08-19  Akkana Peck  <akkana@cvs.gnome.org>

	* app/tools/gimpdrawtool.c: Fix the parameter check at the
	beginning of gimp_draw_tool_draw_boundary, to fix the crash
	described in bug 313922.

2005-08-20  Sven Neumann  <sven@gimp.org>

	* authors.xml: exemplarily added artist and documenter roles to
	some contributors.

	* app/dialogs/authors.xsl: generate arrays for the new roles.

	* app/dialogs/authors.h: regenerated.

	* app/dialogs/about-dialog.c: pass the new arrays to the
	GtkAboutDialog constructor.

2005-08-20  Sven Neumann  <sven@gimp.org>

	* authors.dtd
	* authors.xml: simplified by making dc: the default namespace.

	* authors.xsl
	* app/dialogs/authors.xsl: match the toplevel element in the dc:
	namespace.

2005-08-19  Sven Neumann  <sven@gimp.org>

	* authors.dtd
	* authors.xml: use elements and attributes from Dublin Core.

	* authors.xsl
	* app/dialogs/authors.xsl: changed accordingly.

	* app/dialogs/authors.h: regenerated.

	* app/dialogs/about-dialog.c: Peter and Spencer are now part of
	the list of authors (but listed before everyone else).

2005-08-19  Sven Neumann  <sven@gimp.org>

	* app/dialogs/about-dialog.c: set the role and window position.

2005-08-19  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpguiconfig.c (DEFAULT_WEB_BROWSER): changed to
	"mozilla-firefox %s" (was "mozilla %s").

2005-08-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/curve_bend.c
	* plug-ins/common/plugin-browser.c
	* plug-ins/helpbrowser/dialog.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/jpeg/jpeg-load.c: use canonical procedure names with
	gimp_run_procedure().

2005-08-19  Sven Neumann  <sven@gimp.org>

	* app/dialogs/authors.xsl: generate a NULL terminated array.

	* app/dialogs/authors.h: regenerated.

	* app/dialogs/about-dialog.[ch]: embedded the about box into a
	GtkAboutDialog.

	* app/dialogs/dialogs-constructors.c: pass a GimpContext to
	about_dialog_create().

2005-08-19  Nathan Summers  <rock@gimp.org>

	* plugins/common/poppler.c: removed some extraneous commas.

2005-08-19  Michael Natterer  <mitch@gimp.org>

	Poppler 0.4 changes the API of poppler_page_render_to_pixbuf():

	* configure.in: define HAVE_POPPLER_0_4 if it is available.

	* plug-ins/common/poppler.c: added some #ifdefs to compile with
	both the new and old version. Can be removed in some weeks
	propably.

2005-08-18  Michael Natterer  <mitch@gimp.org>

	* cursors/Makefile.am
	* cursors/gimp-tool-cursors.xcf
	* cursors/modifier-join.png
	* cursors/xbm/modifier-join-mask.xbm
	* cursors/xbm/modifier-join.xbm: images for a "join" cursor modifier.

	* app/widgets/widgets-enums.h
	* app/widgets/gimpcursor.c: add the cursor.

	* app/tools/gimpvectortool.c: use it for connecting strokes.
	Fixes bug #313252.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: removed reference to SIOX
	algorithm from tooltip, it's an implementation detail.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: updated year in copyright.

	* libgimpwidgets/gimpwidgets-private.c (gimp_widgets_init):
	register the default window icons in descending sizes.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimptemplate.c: go back to using dpi as the default
	resolution unit.

	* app/core/gimp-utils.[ch]: moved the code to determine the unit
	from the locale settings here as gimp_get_default_unit().

	* app/dialogs/print-size-dialog.c
	* app/widgets/gimpimagepropview.c: use the unit returned by the
	new function to display the print size (bug #107497).

2005-08-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/procedure-browser.c (run): reverted last change.

	* libgimp/gimpprocbrowserdialog.[ch]: emit new signal "row-activated"
	instead of emitting "response" with GTK_RESPONSE_APPLY.

	* plug-ins/pygimp/procbrowser.c
	* plug-ins/script-fu/script-fu-console.c: connect to "row-activated"
	and call gtk_dialog_response() with GTK_RESPONSE_APPLY.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/procedure-browser.c (run): only close the dialog
	on GTK_RESPONSE_CLOSE.

2005-08-18  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/animoptimize.c
	* plug-ins/common/pnm.c
	* plug-ins/metadata/interface.c
	* plug-ins/metadata/metadata.c: some forgotten canonical names.

	* plug-ins/metadata/Makefile.am
	* plug-ins/metadata/metadata.h: new header containing the
	procedure name #defines for metadata.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* configure.in: check for langinfo.h and _NL_MEASUREMENT_MEASUREMENT.

	* app/core/gimptemplate.c: try to determine the default unit from
	the locale settings. Supposed to fix bug #107497.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.c (smooth_region): fixed
	initialization of row array.

	* app/base/siox.c: minor cleanups.

2005-08-17  Tor Lillqvist  <tml@novell.com>

	* plug-ins/winsnap/Makefile.am (LDADD): Use $(WINDRES) to handle
	cross-compilation.

	* plug-ins/winsnap/winsnap.rc: Refer to the .ico files in
	lowercase, in case cross-compiling.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied patch by Kristian Jantz. Reimplements
	find_max_blob() so that it needs less memory. Slows things down a
	bit, but that can be improved later.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/grid.c: update the progress less frequently.

2005-08-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.c (gimp_palette_view_focus): when
	focussing the widget, select the palette's first entry if none is
	selected. Enables cursor navigation after tabbing in.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/deinterlace.c: fixed boundary conditions.

2005-08-16  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/script-fu/scripts/grid-system.scm: Rename "Grid" to
	"Divisions" to avoid confusion with the existing grid plug-in;
	move into Render->Pattern along with the other Grid plug-in.

2005-08-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.c (gimp_palette_view_focus): return
	FALSE on TAB_FORWARD and TAB_BACKWARD. Enables tabbing out of the
	widget.

2005-08-17  Michael Natterer  <mitch@gimp.org>

	* app/actions/layers-actions.c
	* app/actions/plug-in-actions.c
	* app/actions/image-actions.c: moved all color menu actions to
	image-actions.c because that's the place where we collect menu
	actions of menus that don't have its own foo-actions.c file.
	Renamed them all to "colors-foo-menu".

	* menus/image-menu.xml.in: changed accordingly.

2005-08-16  Akkana Peck  <akkana@cvs.gnome.org>

	* menus/image-menu.xml.in
	* app/actions/image-actions.c
	* app/actions/plug-in-actions.c
	* plug-ins/common/compose.c
	* plug-ins/common/decompose.c
	* plug-ins/common/vinvert.c: Remove erroneous extra *compose
	entries, and move *compose into a Components submenu (re IRC
	discussion); move Value Invert to near Invert (suggested by mitch)

2005-08-16  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainerview.[ch]: added utility function
	gimp_container_view_install_properties() to reduce code duplication
	in classes implementing this interface.

	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontainercombobox.c
	* app/widgets/gimpcontainerentry.c: changed accordingly.

2005-08-16  Sven Neumann  <sven@gimp.org>

	* configure.in
	* plug-ins/uri/Makefile.am: redid the libgnomeui and gnome-vfs
	checks so that pkg-config combines the compiler and linker flags
	instead of concatenating them in the Makefile.

2005-08-15  Akkana Peck  <akkana@cvs.gnome.org>

	* app/actions/image-actions.c
	* app/tools/gimpaligntool.c
	* menus/image-menu.xml.in
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/autostretch_hsv.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/c_astretch.c
	* plug-ins/common/ccanalyze.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/color_enhance.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/compose.c
	* plug-ins/common/decompose.c
	* plug-ins/common/exchange.c
	* plug-ins/common/fp.c
	* plug-ins/common/gradmap.c
	* plug-ins/common/hot.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/normalize.c
	* plug-ins/common/retinex.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/smooth_palette.c
	* plug-ins/common/vinvert.c
	* plug-ins/rcm/rcm.c
	* plug-ins/script-fu/scripts/hsv-graph.scm: Move all color-related
	functions from the Image and Filters menus to a new toplevel
	Colors menu (as discussed in bug 116145).

2005-08-16  Sven Neumann  <sven@gimp.org>

	* configure.in: define G_DISABLE_DEPRECATED unless glib >= 2.9.0.

	* app/core/gimpscanconvert.c: added missing include.

	* app/text/gimp-fonts.c
	* libgimp/gimp.c
	* libgimpwidgets/gimpcolornotebook.c
	* plug-ins/helpbrowser/dialog.c: fixed signedness warnings.

	* plug-ins/bmp/bmpread.c (ReadBMP): initialize variable.

2005-08-15  Manish Singh  <yosh@gimp.org>

	* configure.in: fix reversed libgnomeui conditional test for
	the AC_DEFINE.

2005-08-16  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/tga.c
	* plug-ins/common/threshold_alpha.c
	* plug-ins/common/tiff.c
	* plug-ins/common/tile.c
	* plug-ins/common/tileit.c
	* plug-ins/common/tiler.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/unsharp.c
	* plug-ins/common/video.c
	* plug-ins/common/vinvert.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/warp.c
	* plug-ins/common/waves.c
	* plug-ins/common/webbrowser.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/common/wind.c
	* plug-ins/common/winprint.c
	* plug-ins/common/wmf.c
	* plug-ins/common/xbm.c
	* plug-ins/common/xpm.c
	* plug-ins/common/xwd.c
	* plug-ins/common/zealouscrop.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* configure.in: check for libgnomeui-2.0. Added version
	requirements (>= 2.10.0) for libgnomeui and gnome-vfs.

	* plug-ins/uri/Makefile.am
	* plug-ins/uri/uri-backend-gnomevfs.c: if libgnomeui is available,
	call gnome_authentication_manager_init() so the URI plug-in can
	access sites that require authentication.

	(this needs more hacking so packagers can build both versions of
	the uri plug-in at the same time, since they will want to make the
	libgnomeui dependency optional)

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/randomize.c
	* plug-ins/common/raw.c
	* plug-ins/common/retinex.c
	* plug-ins/common/ripple.c
	* plug-ins/common/rotate.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/screenshot.c
	* plug-ins/common/sel_gauss.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/shift.c
	* plug-ins/common/sinus.c
	* plug-ins/common/smooth_palette.c
	* plug-ins/common/snoise.c
	* plug-ins/common/sobel.c
	* plug-ins/common/softglow.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/spread.c
	* plug-ins/common/struc.c
	* plug-ins/common/sunras.c
	* plug-ins/common/svg.c: canonicalize procedure and parameter
	names. Misc cleanups.

2005-08-15  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/sample_colorize.c (smp_constrain): add an extra
	user data arg, so we fit the GimpDrawableConstraintFunc type.

2005-08-15  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.[ch]
	* app/tools/gimprectangleoptions.[ch]: transform into an interface.

	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpnewrectselecttool.[ch]: use the rectangletool interface.

	* app/tools/gimpcropoptions.[ch]
	* app/tools/gimpnewrectselectoptions.[ch]: use the rectangleoptions
	interface.

	* app/tools/Makefile.am: added gimpnewrectselectionoptions.[ch]

2005-08-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/rcm/rcm_callback.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/rcm/rcm_misc.[ch]: redraw the previews if their size
	changes. Fixes bug #172284.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/CML_explorer.c
	* plug-ins/common/cartoon.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/colorify.c
	* plug-ins/common/compose.c
	* plug-ins/common/csource.c
	* plug-ins/flame/flame.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfli/gfli.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/sgi/sgi.c: fix indentation.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/papertile.c
	* plug-ins/common/pat.c
	* plug-ins/common/pcx.c
	* plug-ins/common/photocopy.c
	* plug-ins/common/pix.c
	* plug-ins/common/pixelize.c
	* plug-ins/common/plasma.c
	* plug-ins/common/plugin-browser.c
	* plug-ins/common/png.c
	* plug-ins/common/polar.c
	* plug-ins/common/procedure-browser.c
	* plug-ins/common/psd.c
	* plug-ins/common/psd_save.c
	* plug-ins/common/psp.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/poppler.c: make sure the opened image has a
	filename that cannot be saved (ok, we don't have a PDF save
	plug-in, but PS does the same and this way it's consistent).

	* plug-ins/common/poppler.c
	* plug-ins/common/postscript.c: canonicalize procedure and
	parameter names.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/postscript.c: applied patch from Felix Riemann
	that adds page counting and a page selector widget to the load
	dialog.  Fixed some minor issues in the patch and added code that
	names layers and images after the document's pages. Disable undo
	on all created images and set them clean before returning them.
	Addresses bug #138495.

2005-08-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd_save.c: fixed signedness issue.

2005-08-14  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/jigsaw.c
	* plug-ins/common/laplace.c
	* plug-ins/common/lic.c
	* plug-ins/common/mail.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/mblur.c
	* plug-ins/common/mng.c
	* plug-ins/common/mosaic.c
	* plug-ins/common/neon.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/nlfilt.c
	* plug-ins/common/noisify.c
	* plug-ins/common/normalize.c
	* plug-ins/common/nova.c
	* plug-ins/common/oilify.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  Manish Singh  <yosh@gimp.org>

	* app/core/gimpimage-preview.c (gimp_image_get_new_preview): if the
	offsets of the layer are such that they are just on the border of
	the image, detect that and bail instead of trying to make a
	sub-preview with a 0 dimension. Fixes bug #312144.

2005-08-14  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/gauss.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c
	* plug-ins/common/gif.c
	* plug-ins/common/gifload.c
	* plug-ins/common/gih.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/glob.c
	* plug-ins/common/gqbist.c
	* plug-ins/common/gradmap.c
	* plug-ins/common/grid.c
	* plug-ins/common/gtm.c
	* plug-ins/common/guillotine.c
	* plug-ins/common/header.c
	* plug-ins/common/hot.c
	* plug-ins/common/illusion.c
	* plug-ins/common/iwarp.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/decompose.c
	* plug-ins/common/deinterlace.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/destripe.c
	* plug-ins/common/dicom.c
	* plug-ins/common/diffraction.c
	* plug-ins/common/displace.c
	* plug-ins/common/dog.c
	* plug-ins/common/edge.c
	* plug-ins/common/emboss.c
	* plug-ins/common/engrave.c
	* plug-ins/common/exchange.c
	* plug-ins/common/film.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/fp.c
	* plug-ins/common/fractaltrace.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  DindinX  <dindinx@gimp.org>

	* plug-ins/common/threshold_alpha.c: added a preview, and some minor
	cleanups.

2005-08-13  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/AlienMap2.c
	* plug-ins/common/CEL.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/aa.c
	* plug-ins/common/align_layers.c
	* plug-ins/common/animationplay.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/autocrop.c
	* plug-ins/common/autostretch_hsv.c
	* plug-ins/common/blinds.c
	* plug-ins/common/blur.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/bumpmap.c
	* plug-ins/common/c_astretch.c
	* plug-ins/common/cartoon.c
	* plug-ins/common/ccanalyze.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/checkerboard.c
	* plug-ins/common/color_enhance.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/compose.c
	* plug-ins/common/compressor.c
	* plug-ins/common/convmatrix.c
	* plug-ins/common/csource.c
	* plug-ins/common/cubism.c
	* plug-ins/common/curve_bend.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  DindinX  <dindinx@gimp.org>

	* plug-ins/common/checkerboard.c: added a preview, and some minor
	cleanups.

2005-08-12  DindinX  <dindinx@gimp.org>

	* plug-ins/common/sample_colorize.c: shut up a Gtk-Critical Warning
	that happened after reopening the filter, but only when a gradient had
	been selected on the previous invocation.

2005-08-12  DindinX  <dindinx@gimp.org>

	* plug-ins/common/sample_colorize.c: preliminary clean-ups.

2005-08-12  Michael Natterer  <mitch@gimp.org>

	* plug-ins/bmp/bmp.c
	* plug-ins/faxg3/faxg3.c
	* plug-ins/fits/fits.c
	* plug-ins/flame/flame.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfig/gfig.[ch]
	* plug-ins/gflare/gflare.c
	* plug-ins/gfli/gfli.c
	* plug-ins/help/help.c
	* plug-ins/helpbrowser/helpbrowser.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/jpeg/jpeg.[ch]
	* plug-ins/maze/maze.[ch]
	* plug-ins/maze/maze_face.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/rcm/rcm.[ch]
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/sel2path/sel2path.c
	* plug-ins/sgi/sgi.c
	* plug-ins/uri/uri.c
	* plug-ins/xjt/xjt.c: canonicalize procedure and parameter names.
	#define them instead of repeating the same string several times.
	Minor cleanups.

2005-08-12  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-proc-def.c (plug_in_proc_def_get_help_id):
	removed s/_/-/, proc names are already canonicalized.

2005-08-10  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version to 2.3.4.

2005-08-10  Michael Natterer  <mitch@gimp.org>

	* cursors/tool-paths-anchor.png
	* cursors/tool-paths-control.png
	* cursors/tool-paths-segment.png
	* cursors/tool-paths.png
	* cursors/xbm/tool-paths-control-mask.xbm
	* cursors/xbm/tool-paths-control.xbm: applied Jimmac's changes.

2005-08-10  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/xbm.c (mask_ext_entry_callback): fixed
	copy'n'paste bug that was clearing the identifier prefix when
	editing the mask extension.

2005-08-10  Jakub Steiner <jimmac@ximian.com>

	* cursors/gimp-tool-cursors.xcf: touched up RGBA versions; add
	  color; for controls, change circles to squares.

2005-08-10  Simon Budig  <simon@gimp.org>

	* app/tools/gimpvectortool.c: small fixes to the cursors - now
	the handles have their respective cursor as well.

2005-08-10  Sven Neumann  <sven@gimp.org>

	* Made 2.3.3, the "What The Hack" release.

	* data/images/gimp-splash.png: What The Splash, photo by antenne.

2005-08-10  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/preferences-dialog.c (prefs_dialog_new): don't have
	widgets from different pages in the same size group. Fixes spacing
	on the "Display" page.

2005-08-10  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am: fixed dist-dump-gimprc rule.

2005-08-09  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs.[ch] (extract_from_inten_pixels)
	(extract_from_indexed_pixels): pass src_bytes and dest_bytes to
	these functions instead of just the source's bytes and whether it
	has an alpha. Honor dest_bytes when extracting instead of crashing
	by always asuming that the destination has alpha.
	Fixes bug #312392.

	(extract_from_region): removed has_alpha parameter. pass
	src->bytes and dest->bytes to above functions.

	* app/core/gimpselection.c (gimp_selection_extract): changed
	accordingly.

2005-08-09  Michael Natterer  <mitch@gimp.org>

	* cursors/gimp-tool-cursors.xcf: changed path tool cursor to
	actually show a path and added 3 new cursors which are supposed
	to show a path's anchor, handle and segments. Someone really
	needs to beautify these...

	* cursors/tool-paths.png
	* cursors/xbm/tool-paths-mask.xbm
	* cursors/xbm/tool-paths.xbm: changed accordingly.

	* cursors/Makefile.am
	* cursors/tool-paths-anchor.png
	* cursors/tool-paths-control.png
	* cursors/tool-paths-segment.png
	* cursors/xbm/tool-paths-anchor-mask.xbm
	* cursors/xbm/tool-paths-anchor.xbm
	* cursors/xbm/tool-paths-control-mask.xbm
	* cursors/xbm/tool-paths-control.xbm
	* cursors/xbm/tool-paths-segment-mask.xbm
	* cursors/xbm/tool-paths-segment.xbm: new files.

	* app/widgets/widgets-enums.h (enum GimpToolCursorType): added
	PATH_ANCHOR, PATH_CONTROL and PATH_SEGMENTS.

	* app/widgets/gimpcursor.c: added the new cursors.

	* app/tools/gimpvectortool.c (gimp_vector_tool_cursor_update):
	use them. Fixes bug #124972.

2005-08-09  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/xbm.c: make sure the mask file has valid C
	identifiers, too.

2005-08-09  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: renamed Granularity to
	Color Sensitivity, both in the GUI and in the APIs.

2005-08-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/dicom.c: use an empty string instead of "?" for
	the unknown value (bug #313008).

2005-08-09  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.c: reduced default brush
	size a little.

	* app/config/gimpxmlparser.c: fixed signedness warnings.

	* plug-ins/imagemap/imap_browse.c (handle_drop): UTF-8 validate
	the dropped text before setting it on the entry.

2005-08-08  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/psd.c: Generate valid names for aux channels that
	do not have names defined. Fixes bug #312963.

2005-08-09  Sven Neumann  <sven@gimp.org>

	* app/core/gimplayer.c (gimp_layer_transform_color): take image
	type instead of basetype of the source drawable. Handle conversion
	from drawables without alpha channel.
	(gimp_layer_new_from_region): handle source regions without alpha.

2005-08-08  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-foreground-select-16.png
	* themes/Default/images/tools/stock-tool-foreground-select-22.png:
	  icon for the new tool. Hopefully gets the message across.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): optimized further.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: added another call to gimp_progress_update().

	* app/core/gimp.c (gimp_init): fixed harmless cut-n-paste error.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: added the possibility to specify
	a clip rectangle.

	* app/base/siox.c (find_max_blob): use g_try_malloc().

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): optimizations.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): fixed for offsetted regions.
	Do thresholding as part of find_max_blob().

2005-08-08  Michael Natterer  <mitch@gimp.org>

	* cursors/gimp-tool-cursors.xcf: resized all layers to image size.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): check boundary conditions
	before pushing a pixel to the queue.

2005-08-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdataeditor.c: made hitting Escape in the name
	entry restore the data's original name. Enables undoing of
	accidential editing. Addresses bug #169257.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-draw.c (gimp_display_shell_get_pen_gc)
	* app/tools/gimpforegroundselecttool.c: use round joins for the
	brush strokes.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: do not attempt foreground
	extraction until the user has specificied a foreground area.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c
	(gimp_foreground_select_tool_draw): do not use drawable offsets.
	Disabled the rectangle indicating the working area.

2005-08-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-resize.c (gimp_image_resize_with_layers):
	take care of sample points. Addresses bug #137776.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: made variables more local to make the code
	easier to read and to optimize.

2005-08-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.[ch] (gimp_layer_flatten): new function.

	* app/actions/layers-actions.c
	* app/actions/layers-commands.[ch]
	* app/widgets/gimphelp-ids.h
	* menus/image-menu.xml.in
	* menus/layers-menu.xml: added "Remove Alpha Channel" action,
	action callback, help ID and menu items. Fixes bug #309762.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: micro optimizations.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: do not restart draw tool
	unless shell->proximity.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c
	(gimp_foreground_select_tool_draw): show the extents of the working
	area if the user moves the mouse out of it. Is this useful?

	* app/tools/gimpforegroundselectoptions.c: removed colons from labels.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.c: increased default brush
	size and upper limit.

	* app/tools/gimpforegroundselecttool.c: draw a brush outline.

2005-08-06  Manish Singh  <yosh@gimp.org>

	* plug-ins/Makefile.am: remove dbbrowser from SUBDIRS.

2005-08-06  Manish Singh  <yosh@gimp.org>

	* plug-ins/dbbrowser/plugin-browser.c
	* plug-ins/dbbrowser/procedure-browser.c: removed these files...

	* plug-ins/common/plugin-browser.c
	* plug-ins/common/procedure-browser.c: ...and added them here.

	* plug-ins/common/mkgen.pl: transform - to _ in makefile variable
	names, and attach optional CFLAGS to only the plugins that need
	them.

	* plug-ins/common/plugin-defs.pl: added plugin-browser and
	procedure-browser, and changed poppler, svg, and wmf to use the new
	CFLAGS stuff.

	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am: regenerated.

	* configure.in: remove plug-ins/dbbrowser reference.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]: reordered parameters to match the order of
	parameters in gimp_drawable_foreground_extract_siox().

	* app/core/gimpdrawable-foreground-extract.c: changed accordingly.

	* app/tools/gimpforegroundselectoptions.[ch]: draw slider value to
	the right.

	* app/tools/gimpfreeselecttool.[ch]: added
	gimp_free_select_tool_select() to call the virtual select() method.

	* app/tools/gimpforegroundselecttool.[ch]: queue an idle select if
	the smoothness or granularity values change in the tool options.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]: expose all
	parameters of the SIOX algorithm. Provide default values.

	* app/tools/gimpforegroundselectoptions.[ch]: added properties and
	user interface for all SIOX parameters.

	* app/tools/gimpforegroundselecttool.c: changed accordingly.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: added a statusbar message
	to encourage the user to draw on the object.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c
	* app/core/gimpdrawable-foreground-extract.c: moved rectangle
	intersection into gimp_drawable_foreground_extract().

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: added gimp_scan_convert_compose(),
	an alternative to gimp_scan_convert_render() that allows to compose
	strokes on a drawable.

	* app/tools/gimpforegroundselecttool.c: use the new function to
	get rid of temporary channels for applying the strokes. Also fixed
	calculation of stroke width from display scale.

2005-08-06  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpuimanager.c (gimp_ui_manager_ui_popup): applied
	patch from Robert Ögren that frees the event returned by
	gtk_get_current_event(). Fixes bug #312017.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-draw.c (gimp_display_shell_draw_pen):
	* app/tools/gimpforegroundselecttool.c: correctly handle a stroke
	consisting of just a single point.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.[ch]
	* libgimpwidgets/gimpwidgets.def: added gimp_prop_hscale_new().

	* app/tools/gimpforegroundselectoptions.c: added a control for the
	stroke width.

	* app/tools/gimpforegroundselecttool.c: cancel the tool if the
	active drawable or the image size changes.

	* app/widgets/gimpcontrollerlist.c: fixed signedness warning.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/display/gimpcanvas.c (gimp_canvas_set_custom_gc) do not
	drop the reference if the same custom GC is being set again.

	* app/display/gimpdisplayshell-draw.[ch]
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell.[ch]: added GC and methods to draw
	on the canvas with a solid pen.

	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: draw using the new pen
	functions. Scale the stroke width with the display scale.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette-import.c:
	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c: fixed signedness warnings.

2005-08-05  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/test-sphere.scm: Added missing argument
	in define statement. Fixed spelling errors.

	* ChangeLog: Corrected my e-mail address.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/batch.c: canonicalize hardcoded procedure names.

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselecttool.c: restrict the working area
	to the double of the bounding box of the initial selection.

2005-08-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_install):
	canonicalize proc args registered by plug-ins.

	* plug-ins/script-fu/siod-wrapper.c: removed s/_/-/ for proc args.

2005-08-05  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/pdbgen.pl: store canonical names of proc names and
	args in the proc structure.

	* tools/pdbgen/app.pl
	* tools/pdbgen/lib.pl: use the above.

	* app/pdb/*_cmds.c: regenerated.

2005-08-05  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpitem.c (gimp_item_parasite_attach): revert previous
	change. Instead, don't push undos if the item is not attached.

2005-08-05  Sven Neumann  <sven@gimp.org>

	* app/xcf/xcf-load.c (xcf_load_image): disable undo while the
	image is being loaded.

	* app/core/gimpitem.c (gimp_item_parasite_attach): don't try to
	push an undo step if undo is disabled. Gets rid of warnings while
	loading an XCF file with undoable drawable parasites.

2005-08-04  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-rgb.c: don't wrap deprecated function
	gimp_rgb_intensity().

2005-08-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpimagepropview.c: increased spacing between
	property groups to 12 pixels.

2005-08-04  Sven Neumann  <sven@gimp.org>

	* app/xcf/xcf.c: canonicalize PDB parameter names.

2005-08-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.c: added cursor navigation.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* app/vectors/gimpvectors-compat.[ch]
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c: fixed signedness warnings.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpbaseenums.h: typo: FOEEGROUND -> FOREGROUND.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_new):
	canonicalize hardcoded procedure names.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/module-dialog.c
	* app/dialogs/palette-import-dialog.c
	* app/gui/gui.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpvectortool.c
	* app/widgets/gimpaction.c
	* app/widgets/gimpcoloreditor.c
	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontainertreeview.c
	* app/widgets/gimpcursorview.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimpdrawabletreeview.c
	* app/widgets/gimpeditor.c
	* app/widgets/gimpenumaction.c
	* app/widgets/gimperrordialog.c
	* app/widgets/gimpfileprocview.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimpmenudock.c
	* app/widgets/gimpmessagebox.c
	* app/widgets/gimpmessagedialog.c
	* app/widgets/gimppluginaction.c
	* app/widgets/gimpprogressdialog.c
	* app/widgets/gimpsamplepointeditor.c
	* app/widgets/gimpstringaction.c
	* app/widgets/gimptemplateeditor.c
	* app/widgets/gimptoolbox-image-area.c
	* app/widgets/gimptoolbox.c: use canonical names for signals and
	properties.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* plug-ins/help/Makefile.am: link against libgimpcolor. WhyTheHack
	did this work before?

2005-08-03  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: added GIMP_UNDO_FOREGROUND_SELECT.

	* app/tools/Makefile.am
	* app/tools/gimpforegroundselecttool-undo.[ch]: added stubs for
	undo in the new foreground selection tool.

	* tools/pdbgen/pdb/procedural_db.pdb: include gimpbase.h for
	gimp_canonicalize_identifier().

	* app/pdb/procedural_db_cmds.c: regenerated.

	* app/file/file-utils.c: fixed signedness warning.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* libgimpmath/gimpmd5.c
	* libgimpmath/test-md5.c
	* plug-ins/common/CEL.c
	* plug-ins/common/cartoon.c
	* plug-ins/common/emboss.c
	* plug-ins/common/exchange.c
	* plug-ins/common/gifload.c
	* plug-ins/common/poppler.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/jpeg/jpeg-save.h
	* plug-ins/metadata/interface.c
	* plug-ins/metadata/metadata.c
	* plug-ins/metadata/xmp-model.c
	* plug-ins/script-fu/siod/sliba.c: fixed signedness warnings.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/gimprgb.[ch]: deprecated RGB intensity functions
	and definitions. These coefficients do not accurately compute
	luminance for contemporary monitors. Instead the coefficients from
	the sRGB spec should be used which have now been added.

	* libgimpcolor/gimpcolor.def: updated.

	* libgimp/gimpdrawable.c
	* libgimp/gimppixelfetcher.c
	* app/base/colorize.c
	* app/base/levels.c
	* app/base/temp-buf.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-convert.c
	* app/core/gimpdrawable-desaturate.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage.c
	* app/gui/splash.c
	* app/widgets/gimpgradienteditor.c
	* modules/colorsel_triangle.c
	* plug-ins/common/aa.c
	* plug-ins/common/bumpmap.c
	* plug-ins/common/colorify.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/displace.c
	* plug-ins/common/engrave.c
	* plug-ins/common/gradmap.c
	* plug-ins/common/grid.c
	* plug-ins/common/mng.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/png.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gfli/gfli.c
	* plug-ins/maze/handy.c
	* plug-ins/pagecurl/pagecurl.c: use gimp_rgb_luminance() and
	friends instead of the deprecated intensity functions.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpprocbrowserdialog.[ch]: removed all parameters from
	gimp_proc_browser_dialog_new() and removed the "scheme_names"
	stuff.

	* plug-ins/dbbrowser/procedure-browser.c
	* plug-ins/pygimp/procbrowser.c
	* plug-ins/script-fu/script-fu-console.c: changed accordingly.

	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-types.h
	* plug-ins/script-fu/siod-wrapper.c: removed all sorts of
	conversions between '-' and '_' for procedure names.

	* plug-ins/script-fu/script-fu.c: use canonical names for
	script-fu's procedures.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* app/actions/vectors-commands.c
	* app/widgets/gimphelp.c: canonicalized some hardcoded procedure
	names because internal functions accept only canonical names now.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	Changed naming scheme for PDB procedure names from
	random_crap_that_traditionally_has_underscores to
	enforced-canonical-identifiers. I'm pretty sure some things are
	broken after this commit. More changes to come...

	* libgimpbase/gimpbase.def
	* libgimpbase/gimputils.[ch]: added gimp_canonicalize_identifier().

	* app/pdb/procedural_db.[ch] (struct ProcRecord): added
	"gchar *original_name" to keep a procedure's original name as
	reigstered by plug-ins (compat cruft).

	(procedural_db_init_procs): canonicalized list of deprecated
	procedures.

	* app/plug-in/plug-in-proc-def.c (plug_in_proc_def_free): free
	original_name.

	* app/plug-in/plug-in-message.c: canonicalize procedure names
	which are received over the wire.

	* app/plug-in/plug-in-rc.c: serialize the original_name and create
	the canonicalized name on-the-fly when deserializing.

	* app/plug-in/plug-in-run.c: pass the original_name to plug-ins
	when running them because they strcmp() the passed procedure name.

	* app/plug-in/plug-ins.c (plug_ins_add_to_db): pass
	canonical procedure names to procedural_db_execute().

	(plug_ins_file_proc_compare): special-case "gimp-xcf", not "gimp_xcf".

	* app/xcf/xcf.c: changed static XCF procedures accordingly.

	* tools/pdbgen/app.pl
	* tools/pdbgen/lib.pl: do some trivial substitutions to generate
	canonicalized names in app/, and C identifiers with underscores in
	libgimp/.

	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/pdb/text_tool.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: canonicaloized procedure
	names in calls to std_pdb_deprecated() and in procedure names in
	generated C code.

	* app/pdb/*_cmds.c
	* libgimp/*_pdb.c: regenerated.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpdrawablecombobox.c
	* libgimp/gimpfontselectbutton.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimpimagecombobox.c
	* libgimp/gimppalettemenu.c
	* libgimp/gimppatternmenu.c: fixed signedness warnings.

2005-08-02  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/procbrowser.c: Quick and dirty restore of browser
	functionality.

2005-08-02  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpuitypes.h: added GimpProcBrowserDialog typedef here.

	* libgimp/gimpprocbrowserdialog.[ch]
	* libgimp/gimpprocview.[ch]: fixed copyright headers, added
	G_BEGIN_DECLS / G_END_DECLS.

2005-08-02  Michael Natterer  <mitch@gimp.org>

	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/dbbrowser/gimpprocbrowser.[ch]
	* plug-ins/dbbrowser/gimpprocview.[ch]: removed these files...

	* libgimp/Makefile.am
	* libgimp/gimpui.h
	* libgimp/gimpui.def
	* libgimp/gimpprocbrowserdialog.[ch]
	* libgimp/gimpprocview.[ch]: ...and added them here. Turned the
	procedure browser into a widget called GimpProcBrowserDialog and
	changed its API completely. Fixes bug #165009.

	* plug-ins/dbbrowser/plugin-browser.c
	* plug-ins/dbbrowser/procedure-browser.c
	* plug-ins/script-fu/Makefile.am
	* plug-ins/script-fu/script-fu-console.c: changed accordingly.

	* plug-ins/pygimp/Makefile.am
	* plug-ins/pygimp/procbrowser.c: ditto (#if 0'ed stuff so it compiles).

2005-08-02  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.[ch]: some code cleanup; moved
	stroke width to the tool options.

2005-07-31  Manish Singh  <yosh@gimp.org>

	* app/composite/Makefile.am
	* app/composite/make-installer.py: fix code generation filenames.

2005-07-31  Manish Singh  <yosh@gimp.org>

	* acinclude.m4
	* m4macros/Makefile.am
	* m4macros/detectcflags.m4: new macro: GIMP_DETECT_CFLAGS; used
	to detect which of a set of compiler options a compiler supports.

	* configure.in: use the above for the altivec and -fno-strict-aliasing
	flags. Also, use it to detect the presence of -mmmx and -msse, since
	those are needed to compile even MMX/SSE assembly with gcc 4.0. Define
	MMX/SSE_EXTRA_CFLAGS.

	* app/composite/Makefile.am: compile each of the composite flavors
	into their own library, so we can use automake's per-target CFLAGS.
	Use MMX/SSE/ALTIVEC_EXTRA_CFLAGS in the appropriate places. Build
	libappcomposite.a out of the resulting objects.

	* app/composite/gimp-composite-3dnow.c
	* app/composite/gimp-composite-altivec.c
	* app/composite/gimp-composite-mmx.c
	* app/composite/gimp-composite-sse.c
	* app/composite/gimp-composite-sse2.c
	* app/composite/gimp-composite-vis.c
	* app/composite/make-installer.py: move the _init functions into
	the installers, so only actually mmx/sse/etc. code gets compiled
	under the appropriate CFLAGS.

	* app/composite/gimp-composite-3dnow-installer.c
	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-mmx-installer.c
	* app/composite/gimp-composite-sse-installer.c
	* app/composite/gimp-composite-sse2-installer.c
	* app/composite/gimp-composite-vis-installer.c: regenerated.

	* app/composite/gimp-composite.c: remove useless cpu-accel.h include.

2005-07-31  DindinX  <dindinx@gimp.org>

	* app/dialogs/preferences-dialog.c: when the notebook page is changed
	with the mouse wheel, update the title and the selection in the
	treeview.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpforegroundselectoptions.[ch]: added options for
	GimpForegroundSelectionTool.

	* app/tools/gimpforegroundselecttool.c: also allow to classify
	background pixels.

	* app/tools/gimpfreeselecttool.c: implement GimpTool::control and
	reset the points array if the tool is HALTed.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: give some visual feedback
	when the user is drawing. Should use a different GC though.

	* app/tools/gimpdrawtool.[ch]: added some const qualifiers.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.c (gimp_scan_convert_render): pass 255
	as value to gimp_scan_convert_render_internal().

	* app/tools/gimpforegroundselecttool.[ch]: add paint strokes as
	classified foreground area; draw function is missing.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.c: fixed some minor coding style issues.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]: removed the overlay again.
	This needs to be done differently.

	* app/tools/gimpforegroundselecttool.c: changed accordingly.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]: renamed overlay to mask and
	added a different overlay implementation that will be needed to
	finish the new foreground-select tool.

	* app/tools/gimpforegroundselecttool.c: changed accordingly.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptoolcontrol.[ch]: transparently handle cursor
	vs. toggle cursor in the cursor accessor functions.

	* app/tools/gimpconvolvetool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimptool.c: simplifies things here.

	* app/tools/gimpforegroundselecttool.c: set a toggle cursor and
	toggle the tool if a mask is set.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: implement cursor_update().
	Suppress standard selection tool functionality if a mask exists.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: implement oper_update() and
	and give some hints in the statusbar.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]: added
	gimp_display_shell_set_overlay(); allows to overlay a mask over the
	display to visualize a selection.

	* app/tools/gimpforegroundselecttool.[ch]: use the new functionality
	to display the selection. Escape cancels the tool, Enter applies the
	selection.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpbase.def: added missing symbol.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.c (gimp_histogram_calculate_sub_region):
	loop unrolling.

	* app/dialogs/about-dialog.c
	* app/widgets/gimpselectiondata.c
	* plug-ins/bmp/bmpread.c (ReadBMP)
	* plug-ins/gfig/gfig.c (gfig_load)
	* plug-ins/imagemap/imap_preview.c
	* plug-ins/imagemap/imap_selection.c
	* plug-ins/jpeg/jpeg-exif.c
	* plug-ins/common/dicom.c
	* plug/ins/common/screenshot.c: fixed signedness warnings.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/Makefile.am
	* plug-ins/script-fu/scripts/image-structure.scm: removed this
	script (see bug #307016).

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/base/tile-swap.c: increase the size of the swap file in
	chunks of 16MB instead of only 256KB. Check the return value of
	ftruncate().

2005-07-29  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppageselector.c: increased spacing.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* menus/image-menu.xml.in: added "tools-foreground-select" to the
	Selection Tools menu.

	* app/tools/gimpforegroundselecttool.c: resolved clashing mnemonic.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/tools/stock-tool-foreground-select-16.png
	* themes/Default/images/tools/stock-tool-foreground-select-22.png:
	added placeholder for yet-to-be-drawn tool icon.

	* libgimpwidgets/gimpstock.[ch]: register it.

	* app/tools/gimpforegroundselecttool.c: use it.

	* app/widgets/gimpclipboard.[ch] (gimp_clipboard_get_svg): return
	a signed char pointer.

	* app/actions/edit-commands.c
	* app/tools/gimpinkoptions-gui.c: fixed signedness issues.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.c: pass progress_callback
	and progress_data to siox_foreground_extract().

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (add_to_list): keep a tail pointer. Speeds up
	the benchmark by about 50%.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-foreground-extract.[ch]: added a progress
	parameter.

	* app/tools/gimpforegroundselecttool.[ch]: changed the "select"
	method to take a GimpDisplay instead of a GimpImage.

	* tools/pdbgen/pdb/drawable.pdb
	* app/tools/gimpforegroundselecttool.c: changed accordingly.

	* app/pdb/drawable_cmds.c: regenerated.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c: fixed signedness warnings.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpbaseenums.[ch]: added GimpForegroundExtractMode
	in preparation for other implementations to be added in the future.

	* libgimp/gimpenums.c.tail
	* tools/pdbgen/enums.pl: regenerated.

	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselecttool.c
	* tools/pdbgen/pdb/drawable.pdb: added the mode parameter.

	* app/pdb/drawable_cmds.c
	* libgimp/gimpdrawable_pdb.[ch]: regenerated.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-utils.c (gimp_config_string_append_escaped):
	added casts to silent signedness warnings.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpselectionoptions.c (gimp_selection_options_gui): no
	antialiasing for the foreground selection tool (yet).

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: added
	gimp_scan_convert_render_value(), a variant of
	gimp_scan_convert_render() that allows to pass the foreground value.

	* app/tools/gimpfreeselecttool.[ch]: added a virtual "select" method.

	* app/tools/Makefile.am
	* app/tools/gimp-tools.c
	* app/tools/gimpforegroundselecttool.[ch]: added a rough first
	version of foreground selection tool based on the SIOX algorithm.
	Work in progress...

	* app/widgets/gimphelp-ids.h: added help-id for the new tool.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpfreeselecttool.c: minor cleanup.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (siox_foreground_extract): minor cleanup.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpundostack.[ch]: added gimp_undo_stack_get_depth().

	* app/widgets/gimpimagepropview.[ch]: display number and memory
	usage of undo/redo steps.

	* app/core/gimpimage-merge.c: fixed signedness issue.

2005-07-28  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]: accept an offset between pixels and mask,
	work only on the intersection rectangle.

	* app/core/gimpdrawable-foreground-extract.c: pass the drawable
	offsets to siox_foreground_extract().

2005-07-28  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: allow to enable some debug output.

2005-07-27  Manish Singh  <yosh@gimp.org>

	* app/core/gimpdrawable-foreground-extract.c: #include
	gimpimage-colormap.h

2005-07-28  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/cpercep.[ch]: moved cpercep from here ...

	* app/base/Makefile.am
	* app/base/cpercep.[ch]: ... to here.

	* app/base/siox.[ch]: use the cpercep routines for RGB->LAB
	conversion, gives a 20% speedup. Removed normalization which seems
	redundant. Make it work for grayscale and indexed, not only RGB.

	* app/core/gimpdrawable-foreground-extract.c
	* app/core/gimpimage-convert.c: changed accordingly.

2005-07-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: change the cursor with the tool
	(bug #90519).

2005-07-26  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c: fixed signedness warnings.

2005-07-25  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_csim.y: make buffer large enough to hold
	all polygon data.

	* plug-ins/imagemap/imap_csim_parse.[ch]: regenerated. Fixes #169698

2005-07-25  Michael Natterer  <mitch@gimp.org>

	Some DND fixes / cleanup:

	* app/widgets/widgets-enums.h: renamed GIMP_DND_TYPE_TOOL to
	GIMP_DND_TYPE_TOOL_INFO.

	* app/widgets/gimpselectiondata.[ch]: s/tool/tool_info/g. Moved
	private functions to the end of the file. Include GIMP's PID in
	all GtkSelectionData strings which are used to pass around stuff
	by reference. For things which are referenced by name, also encode
	the object's address in the GtkSelectionData so having a brush
	called "Standard" or a named buffer called "Global Buffer" will
	work together with DND.

	* app/widgets/gimpdnd.[ch]: s/tool/tool_info/g. Renamed
	gimp_dnd_get_data_data() to gimp_dnd_get_object_data() since it's
	not limited to GimpData objects. Follow above selection data API
	changes. Cleanup.

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpdrawablecombobox.c
	* libgimp/gimpfontselectbutton.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimpimagecombobox.c
	* libgimp/gimppalettemenu.c
	* libgimp/gimppatternmenu.c: follow GtkSelectionData format change
	and check the dropped things' PID against the return value of
	gimp_getpid().

2005-07-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/misc.pdb: on Win32, include <process.h> for
	getpid().

	* app/pdb/misc_cmds.c: regenerated.

2005-07-25  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/misc.pdb: added gimp_getpid().

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/internal_procs.c
	* app/pdb/misc_cmds.c
	* libgimp/gimpmisc_pdb.[ch]: regenerated.

2005-07-25  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdialog.c (gimp_dialog_add_buttons_valist):
	don't call gtk_widget_hide() on a NULL help button.

2005-07-24  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimppatternmenu.c: put the previews into sunken instead
	of etched-in frames.

2005-07-24  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppattern.c: untabify, minor cleanup.

2005-07-23  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimp
