2005-11-09  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpmodule.c: wrap gimpenv directory functions.

2005-11-09  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: better fixed-aspect behavior.

2005-11-09  Simos Xenitellis  <simos@gnome.org>

	* configure.in: (Re)Added tt (Tatarish) to ALL_LINGUAS, 
	added stubs for missing PO files.

2005-11-09  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c: reverted patch which makes
	alpha=255 when turned off because these functions are not only
	used for display projection. Re-opens bug #143315.
	Fixes bug #307213.

2005-11-08  Michael Natterer  <mitch@gimp.org>

	* configure.in: Removed 'tt' again until all po files are there.

2005-11-08  Simos Xenitellis  <simos@gnome.org>

	* configure.in: Added tt (Tatarish) to ALL_LINGUAS.

2005-11-08  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/guides-new.scm
	* plug-ins/script-fu/scripts/guides-new-percent.scm: look at the
	image's width/height, not the drawable's. Fixes bug #320933.

2005-11-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-modules.c
	* app/menus/menus.c: more output on --verbose

2005-11-06  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcolorpickertool.c (gimp_color_picker_tool_picked):
	when picking FG or BG color from an indexed layer, select its
	index in the colormap editor. Fixes bug #320660.

2005-11-06  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-contexts.c
	* app/core/gimp-documents.c
	* app/core/gimp-parasites.c
	* app/core/gimp-templates.c
	* app/core/gimp-units.c
	* app/core/gimpdatafactory.c
	* app/core/gimptooloptions.c
	* app/gui/color-history.[ch]
	* app/gui/gui.c
	* app/gui/session.c
	* app/plug-in/plug-ins.c
	* app/text/gimp-fonts.c
	* app/tools/gimp-tools.c
	* app/widgets/gimpcontrollers.c
	* app/widgets/gimpdevices.c: when running --verbose, print the
	name of each config file parsed or written.

2005-11-06  Sven Neumann  <sven@gimp.org>

	Added support for binary relocation by means of binreloc, largely
	based on a patch by Hongli Lai:

	* m4macros/Makefile.am
	* m4macros/binreloc.m4: new file providing a macro to check for
	binreloc support.

	* acinclude.m4
	* configure.in: use the macro.

	* libgimpbase/Makefile.am
	* libgimpbase/gimpreloc.[ch]: new files providing binreloc support
	on Linux.

	* libgimpbase/gimpenv.[ch]: use binreloc, provide a function to
	initialize the environment machinery.

	* libgimpbase/gimpbase.def: updated.

	* app/Makefile.am: fiddle with the LDFLAGS for binreloc.

	* app/main.c (main): gimp_env_init(FALSE).

	* libgimp/gimp.c (gimp_main): gimp_env_init(TRUE).

2005-11-06  Sven Neumann  <sven@gimp.org>

	* modules/controller_midi.c (midi_set_device): corrected casting.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am: removed unused variable scriptdata.

	* app/plug-in/plug-ins.c (plug_ins_init): Fixed progress value for
	plug-in query and initialization.

	* plug-ins/common/uniteditor.c (new_unit_dialog): use a
	GtkMessageDialog instead of g_message(). Some string changes.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins.c (plug_ins_init): fine-tuning.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/app.pl: removed calls to the splash update function
	during initialization of internal procedures. This only takes time
	and doesn't provide useful information.

	* app/pdb/internal_procs.[ch]: regenerated.

	* app/pdb/procedural_db.[ch]: changed accordingly.

	* core/gimp.c: call the splash update function from here.

2005-11-05  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c: don't return void in a
	function returning a gboolean.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: added some commented-out debug output that can
	be used to get an idea of where the startup time is being spent.

	* app/core/gimp.c
	* app/pdb/internal_procs.c
	* app/pdb/procedural_db.c
	* app/plug-in/plug-ins.c
	* tools/pdbgen/app.pl: cosmetic changes.

2005-11-05  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c (splash_area_expose): set the clip region
	instead of just the clip rectangle.

	* configure.in: bumped version to 2.3.6.

2005-11-04  Manish Singh  <yosh@gimp.org>

	* app/core/gimpenvirontable.c (gimp_environ_table_load_env_file):
	remove now unused "expanded" variable.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* Made 2.3.5 development release.

2005-11-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontrollereditor.c (gimp_controller_editor_init):
	set the widget's spacing to 12 pixels.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/actions/Makefile.am (libappactions_a_SOURCES): fixed typo.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied a patch by Gerald Friedland that
	changes the code to clear the cache selectively instead of dumping
	it completely if the foreground or background area is changed.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/core/gimpenvirontable.c (gimp_environ_table_load_env_file):
	gimp_config_path_expand() only ever returns NULL if called with a
	NULL path argument.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-dump.c: fixed typo.

2005-11-04  Sven Neumann  <sven@gimp.org>

	* app/errors.c
	* app/sanity.c: s/The GIMP/GIMP/

2005-11-03  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c: set the splash image as back pixmap.

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpaction.c
	* app/widgets/gimpcoloreditor.c
	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontrollerlist.c
	* app/widgets/gimpmenudock.c
	* app/widgets/gimppluginaction.c
	* app/widgets/gimptooloptionseditor.c
	* app/widgets/gimpwidgets-utils.c
	* libgimpwidgets/gimpcellrenderercolor.c: use gtk_widget_get_settings()
	instead of gtk_settings_get_for_screen(gtk_widget_get_screen())

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpclipboard.c (gimp_clipboard_set_text): added
	g_return_if_fail (GIMP_IS_GIMP (gimp)).

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/text/gimptext.c: code cleanup, untabified.

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/actions/data-commands.c
	* app/core/gimpprogress.c: #include "gimp.h" instead of "gimp-gui.h"

2005-11-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/tga.c (save_image): allocate a tile cache.

2005-11-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/actions/data-commands.c: add missing include file.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c
	* app/widgets/gimpimagepropview.c
	* app/widgets/gimpsizebox.c
	* app/widgets/gimptemplateeditor.c: use ngettext() for plural forms.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpmemsize.c (gimp_memsize_to_string): use
	dngettext() for plural form.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* app/core/gimppattern.c: rephrased error message for consistency
	and to avoid another plural form.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.c: use g_utf8_strlen().

	* plug-ins/uri/uri-backend-wget.c: use ngettext().

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpprocbrowserdialog.c
	* libgimpwidgets/gimppropwidgets.c
	* plug-ins/uri/uri-backend-wget.c: use dngettext() for plural
	forms. Fixes bug #320460, bug #320461 and bug #320462.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpclipboard.[ch] (gimp_clipboard_set_text): clear
	the GIMP clipboard. Suppress debug output unless gimp is started
	with the --verbose command-line option.

	* app/actions/data-commands.c
	* app/actions/documents-commands.c: adapt to clipboard API change.

2005-11-02  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.c
	* plug-ins/uri/uri-backend-wget.c: added translator comments for
	plural forms (bug #320461 and bug #320462).

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpsizebox.[ch]: added a GtkSizeGroup member and put
	all labels into the group.

	* app/dialogs/scale-dialog.c: put the "Interpolation:" label into
	the same size box.

2005-11-02  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpprocbrowserdialog.c (browser_search): added comment
	that _("%d procedures") should be translated with a plural form
	for *lots* of procedures. Fixes bug #320460.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushgenerated.c: fixed compiler warning.

	* app/core/gimpobject.c: turned "name" into a construct property.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimpbrushgenerated.c (gimp_brush_generated_load): use
	gimp_brush_generated_new() to create the brush object. Removed
	redundant calls to gimp_data_dirty().

	* app/core/gimpdata.c: freeze the data object during construction.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/actions/data-commands.c
	* app/actions/documents-commands.c
	* app/widgets/gimpclipboard.[ch]: moved text clipboard handling to
	utility function to avoid code duplication.

2005-11-01  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins.c: formatting.

2005-10-31  Michael Natterer  <mitch@gimp.org>

	Applied modified patch from Luis de Bethencourt Guimera which adds
	a "Save document history" prefs option. Fixes bug #140001.

	* app/config/gimprc-blurbs.h
	* app/config/gimpcoreconfig.[ch]: added boolean property
	"save-document-hitory".

	* app/core/gimp.c
	* app/file/file-open.c
	* app/file/file-save.c: don't save the document history and don't
	add files to the desktop-wide list of recently used files if the
	option is FALSE.

	* app/dialogs/preferences-dialog.c: added its toggle to the
	"Environment" page.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpmessagebox.c (gimp_message_box_init): reverted
	the change for bug #302400; it caused bug #319962 to be opened.
	Instead unset the focus chain for the message box.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins.c (plug_ins_init): only call the status
	callback for plug-ins that are actually queried or initialized.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/actions/data-commands.[ch]: added new action command
	data_copy_location_cmd_callback().

	* app/actions/brushes-actions.c
	* app/actions/gradients-actions.c
	* app/actions/palettes-actions.c
	* app/actions/patterns-actions.c
	* app/widgets/gimphelp-ids.h
	* menus/brushes-menu.xml
	* menus/gradients-menu.xml
	* menus/palettes-menu.xml
	* menus/patterns-menu.xml: added Copy Location menu entries to all
	data views. Allows to retrieve the file location for data files.

2005-10-31  Tor Lillqvist  <tml@novell.com>

	* gimptool-win32.c.in: Drop unnecessary <sys/stat.h>.
	(gtk_config): Drop the GIMP 1.2.x and gtk+-1-3-win32-production
	support.
	(get_cflags): Output GIMP's -I switch before GTK's CFLAGS. Use
	"include/gimp-2.0" instead of just "include".
	(get_libs, get_libs_noui): Update the list of libraries to match
	reality, use GIMP_API_VERSION in library names.
	(get_sys_plugin_dir): Use GIMP_PLUGIN_VERSION and not
	GIMP_MAJOR_VERSION.GIMP_MINOR_VERSION in the plug-in folder name.

2005-10-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.[ch]
	* app/core/gimpdatafactory.c: applied a heavily modified version
	of the patch provided by Shlomi Fish in bug #311740. Introduces a
	cache to speed up reloading of data files.

	* app/actions/data-commands.c: set gimp busy while refreshing data
	factories.

	* app/widgets/gimpwidgets-utils.c (gimp_widget_accel_changed):
	free the return value of gimp_get_accel_string().

2005-10-31  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewablebutton.[ch] (gimp_viewable_button_new):
	add GimpViewType parameter.

	* app/widgets/gimptemplateeditor.c
	* app/widgets/gimpviewablebox.c: pass view types, using grid view
	for brushes and patterns ass suggested in bug #315443.

2005-10-30  Michael Natterer  <mitch@gimp.org>

	Fixed bug #316395:

	* app/actions/dialogs-actions.c (dialogs_dockable_actions)
	* app/actions/quick-mask-actions.c (quick_mask_toggle_actions):
	added tooltips to action entries.

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): use
	gimp_widget_set_accel_help() to set the tooltip so it contains
	the accelerator.

	* app/dialogs/dialogs-constructors.c (dialogs_dockable_constructor):
	attach the dialog's identifier to the dockable widget (hack).

	* app/widgets/gimpdockbook.c (gimp_dockbook_get_tab_widget): use
	the attached identifier to find the action for this dockable in
	the dock's UI manager (HACK HACK). Use the found action to set
	a tooltip with accelerator.

	* app/widgets/gimpwidgets-utils.c (gimp_widget_set_accel_help):
	fixed bug in fallback code what should never be used.

2005-10-30  Michael Natterer  <mitch@gimp.org>

	* app/actions/dialogs-actions.c (dialogs_dockable_actions): removed
	shift+ctrl+t accelerator from dialogs-tool-options because it's
	already taken by view-show-guides. Fixes bug #320196.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/user-install-dialog.c: added global "oldgimp_major"
	an "oldgimp_minor" variables.

	(user_install_dialog_run): set them to the version of the gimp
	directory that should be migrated.

	(user_install_migrate_files): skip "menurc" only when migrating
	from 2.0. Fixes bug #317170.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	 Fix bug #145492:

	* app/actions/file-commands.c (file_save_cmd_callback)
	* app/dialogs/file-save-dialog.c (file_save_dialog_save_image):
	set the "file-quit" action insensitive while the image is being
	saved to prevent data loss.

	* app/widgets/gimptoolbox.c (gimp_toolbox_delete_event): activate
	the "file-quit" action instead of calling gimp_exit() directly so
	trying to close the toolbox while saving is impossible too.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpconvolve.c (gimp_convolve_motion): allocate both
	oversize buffers with the right size, instead of one twice with
	the wrong size. Was broken since porting to pixel_region_init_data().
	Spotted by Seth Burgess. Fixes bug #317340.

2005-10-29  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/image.pdb: improved documentation of
	gimp-image-clean-all and gimp-image-is-dirty. Fixes bug #318075.

	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.c: regenerated.

2005-10-28  Michael Natterer  <mitch@gimp.org>

	* app/actions/image-actions.c: removed "colors-transform-menu".

	* menus/image-menu.xml.in: revamped again: Moved desaturate and
	the invert items to the toplevel, into a separator-enclosed group.
	Changed Modify to a placeholder again. Things that have no useful
	category can't go to a sub-menu, so please don't invent one just
	for the sake of it.

	* plug-ins/common/channel_mixer.c: -> Colors/Components
	* plug-ins/common/vinvert.c: -> Colors/Invert

2005-10-28  Carol Spears  <carol@gimp.org>

	* app/actions/image-actions.c: Changed colors-modify-menu to 
        colors-transform-menu

	* menus/image-menu.xml.in: moved Desaturate and Invert into the tools
        section of the colors-menu.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/AlienMap2.c: renamed to "Alien Map".

2005-10-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/hot.c: also moved into Colors/Modify.

	* menus/image-menu.xml.in: moved Info submenu to the bottom.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied a patch by Tobias Lenz that makes use
	of the state that was added to SIOX in order to speed up the tool.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppageselector.[ch]: added new signal "activate"
	and emit it if the user activates an item in the icon view.

	* plug-ins/common/poppler.c
	* plug-ins/common/postscript.c: activate the dialog if the page
	selector emits "activate" as suggested in bug #320080.

2005-10-28  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: handle gimpprint just like other libraries. It
	doesn't make sense any longer to require it.

	* app/paint/gimpink-blob.c: commented out unused code.

2005-10-27  Manish Singh  <yosh@gimp.org>

	* app/paint-funcs/paint-funcs.h: declare component_pixels,
	combine_mask_and_alpha_channel_{stipple,stroke}. Fixes bug #319811.

2005-10-27  Michael Natterer  <mitch@gimp.org>

	* configure.in: check for gnome-keyring.

	* plug-ins/uri/uri-backend.h
	* plug-ins/uri/uri-backend-wget.c
	* plug-ins/uri/uri-backend-gnomevfs.c: added "plugin_name",
	boolean "run" and "run_mode" parameters to uri_backend_init().

	* plug-ins/uri/uri-backend-gnomevfs.c (uri_backend_init):
	initialize the gnome authentication manager only when called
	interactively from "run". Also call gimp_ui_init() when using the
	auth manager, since recent versions seem to require an already
	initialized GTK+. When running noninteractively and gnome-keyring
	is available, implement the needed GnomeVFS authentication
	callbacks ourselves and ask gnome-keyring directly.

	* plug-ins/uri/uri.c: pass the additional parameters to
	uri_backend_init().

2005-10-26  Carol Spears  <carol@gimp.org>

	* app/actions/image-actions.c: added colors-info-menu and 
        colors-modify-menu as children of colors-menu

	* menus/image-menu.xml.in: changed Modify placeholder to 
        colors-modify-menu menuaction and added color-info-menu action to 
        colors-menu

        * plug-ins/common/colortoalpha.c: moved to Colors/Modify in the 
        registration part.

2005-10-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-console.c (script_fu_console_run):
	removed run-mode check.

2005-10-26  Michael Natterer  <mitch@gimp.org>

	Fixed bug #313547:

	* app/widgets/gimpdataeditor.c
	(gimp_data_editor_set_aux_info)
	(gimp_data_editor_get_aux_info): store the state of edit_active
	in sessionrc.

	(gimp_data_editor_constructor): enable edit_active by default.

2005-10-25  Michael Natterer  <mitch@gimp.org>

	Let the data editors optionally follow the active brush, palette
	and gradient. Still needs to be saved in sessionrc and probably
	be enabled by default. Addresses bug #313547.

	* app/widgets/gimpdataeditor.[ch]: added new functions
	gimp_data_editor_set,get_edit_active().

	Make it configurable from the palette and gradient editor menus:

	* app/actions/gradient-editor-actions.c
	* app/actions/palette-editor-actions.c: added actions...

	* app/actions/data-editor-commands.[ch]: ...and callbacks...
	(new file).

	* app/widgets/gimphelp-ids.h: ...help IDs...

	* menus/gradient-editor-menu.xml
	* menus/palette-editor-menu.xml: ...and menu items.

	Add menu to the brush editor and make it configurable there too:

	* app/actions/Makefile.am
	* app/actions/actions.c
	* app/actions/brush-editor-actions.[ch]
	* app/menus/menus.c
	* menus/Makefile.am
	* menus/brush-editor-menu.xml: added all the bits needed for
	the new menu.

	* app/widgets/gimpbrusheditor.[ch]: use the menu. Added menu_factory
	parameter to the contstructor.

	* app/dialogs/dialogs-constructors.c: changed accordingly.

2005-10-25  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-close.c
	* app/widgets/gimpactionview.c
	* modules/controller_midi.c: g_source_unref() GSources after
	attaching them.

2005-10-25  DindinX  <dindinx@gimp.org>

	* app/paint-funcs/scale-funcs.c (subsample_region): correctly pass
	the region offset to pixel_region_get_row().

2005-10-25  Bill skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimppaintoptions-gui.c (jitter_options_gui):
	Use a scale entry instead of spinbutton for jitter amount,
	as discussed in bug #163049.

2005-10-25  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-contiguous-region.c
	(struct ContinuousRegionData)
	(gimp_image_contiguous_region_by_color)
	(contiguous_region_by_color): the color samples are always RGB or
	RGBA, so always compare 3 or 4 bytes of pixel data, and not just
	the number of bytes of the drawable/projection. Fixes "select by
	color" on GRAYA (bug #319683).

2005-10-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/lib.pl: add G_GNUC_INTERNAL to declaration of
	wrapped PDB functions.

	* libgimp/gimpchannel_pdb.h
	* libgimp/gimpdrawable_pdb.h
	* libgimp/gimpgimprc_pdb.h
	* libgimp/gimpimage_pdb.h
	* libgimp/gimplayer_pdb.h
	* libgimp/gimpplugin_pdb.h
	* libgimp/gimpproceduraldb_pdb.h
	* libgimp/gimpprogress_pdb.h
	* libgimp/gimpselection_pdb.h
	* libgimp/gimpunit_pdb.h: regenerated.

	* libgimp/gimptile.h
	* libgimp/gimpunitcache.h
	* libgimpthumb/gimpthumb-utils.h
	* libgimpwidgets/gimpcolorarea.h
	* libgimpwidgets/gimphelpui.h: declare internal functions as such
	using G_GNUC_INTERNAL.

2005-10-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/paths.pdb: added getter and setter for path
	visibility (bug #319617).

	* app/pdb/internal_procs.c
	* app/pdb/paths_cmds.c
	* libgimp/gimppaths_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-10-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/png.c: load and save embedded ICC profiles, based
	on a patch from Ture Pålsson (bug #319580).

	* devel-docs/parasites.txt: document the "icc-profile-name" parasite.

2005-10-24  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-path-16.png
	* themes/Default/images/tools/stock-tool-path-22.png: works on
	dark themes (bug #168981)

2005-10-24  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-airbrush-16.png
	* themes/Default/images/tools/stock-tool-airbrush-22.png: make it
	work on dark background

2005-10-24  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockable.c (gimp_dockable_realize): create the
	title window as GDK_WINDOW_CHILD, not GDK_WINDOW_TEMP.

2005-10-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: add "notify" callbacks for changes
	of width, height, or aspect entries in the tool options.

2005-10-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: 
	* app/tools/gimpnewrectselecttool.c Make clicking inside an existing 
	selection create rect matching the marching ants.

2005-10-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangleoptions.c: remove fixed-center stuff
	from options gui in order to simplify it.
	
2005-10-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/twain/twain.c: renamed menu entry to "Scanner/Camera"
	as suggested in bug #311965.

2005-10-20  Sven Neumann  <sven@gimp.org>

	* app/batch.c (batch_run): always call the batch interpreter in
	NON-INTERACTIVE mode (see bug #167964).

	* plug-ins/script-fu/script-fu-text-console.c: removed the run-mode
	check.

2005-10-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c (title_changed): replace newlines
	with spaces to avoid multiple lines in the combo box.

2005-10-20  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: renamed "multiblob"
	property to "discontinuous" and added a check button for it.

2005-10-19  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.[ch]: move tool_control out of
	rectangle tool and into users of it, and make rect select execute
	on leaving but crop tool not.  Also rename functions and clean up
	formatting a bit.

2005-10-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/plugin-browser.c: strip ellipsis from menu labels.

2005-10-19  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: "execute" the tool if the
	user switches to a different tool or clicks in a different
	image.  Good for rect select, not so sure about crop.

2005-10-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/warp.c: use gimp_drawable_mask_intersect()
	instead of gimp_drawable_mask_bounds().

2005-10-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcurvestool.[ch]: added keyboard control to the
	Curves tool as suggested in bug #154809.

2005-10-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcurvestool.c (gimp_curves_tool_oper_update): set
	cursor modifier and status bar hints to improve discoverability of
	Curves tool features.

2005-10-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/presets.c: added a Save icon.

2005-10-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpaligntool.[ch]: Make buttons insensitive
	until a target item has been selected; fixes bug #309038.

2005-10-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpaligntool.c: Remove bogus stuff about
	weak pointers, and disconnect properly in dispose 
	callback instead of finalize, as suggested by mitch.
	Fixes bug #314880.
	
2005-10-18  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-selection.c: formatting.

2005-10-17  Manish Singh  <yosh@gimp.org>

	* app/core/gimppalette-import.c
	(gimp_palette_import_create_image_palette): delete stray ;

2005-10-17  Manish Singh  <yosh@gimp.org>

	* app/base/siox.c (siox_drb): declare mindistbg, mindistfg, and alpha
	float variables at the start of the block.

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/base/base-enums.h
	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselecttool.[ch]: export stateful SIOX to
	the core API and use it from the foreground selection tool.

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/base/base.c (base_init)
	* app/base/tile-swap.c (tile_swap_init): create temp and swap
	directories using g_mkdir_with_parents() (bug #308658).

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: added "multiblob"
	property to GimpForegroundSelectOptions and pass it to
	gimp_drawable_foreground_extract_siox().

2005-10-17  Sven Neumann  <sven@gimp.org>

	* app/file/file-open.[ch]: added run-mode parameter to
	file_open_layer().

	* app/dialogs/file-open-dialog.c
	* app/display/gimpdisplayshell-dnd.c
	* app/widgets/gimplayertreeview.c: pass GIMP_RUN_INTERACTIVE to
	file_open_layer().

	* tools/pdbgen/pdb/fileops.pdb: export file_open_layer() to the PDB
	as file-load-layer.

	* app/pdb/fileops_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpfileops_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-10-16  Akkana Peck  <akkana@shallowsky.com>

	* plug-ins/pygimp/plug-ins/gimpcons.py
	* plug-ins/pygimp/plug-ins/pdbbrowse.py
	* plug-ins/pygimp/plug-ins/sphere.py
	* plug-ins/script-fu/script-fu.c
	* plug-ins/script-fu/scripts/3d-outline.scm
	* plug-ins/script-fu/scripts/3dTruchet.scm
	* plug-ins/script-fu/scripts/alien-glow-arrow.scm
	* plug-ins/script-fu/scripts/alien-glow-bar.scm
	* plug-ins/script-fu/scripts/alien-glow-bullet.scm
	* plug-ins/script-fu/scripts/alien-glow-button.scm
	* plug-ins/script-fu/scripts/alien-glow-logo.scm
	* plug-ins/script-fu/scripts/alien-neon-logo.scm
	* plug-ins/script-fu/scripts/basic1-logo.scm
	* plug-ins/script-fu/scripts/basic2-logo.scm
	* plug-ins/script-fu/scripts/beveled-button.scm
	* plug-ins/script-fu/scripts/beveled-pattern-arrow.scm
	* plug-ins/script-fu/scripts/beveled-pattern-bullet.scm
	* plug-ins/script-fu/scripts/beveled-pattern-button.scm
	* plug-ins/script-fu/scripts/beveled-pattern-heading.scm
	* plug-ins/script-fu/scripts/beveled-pattern-hrule.scm
	* plug-ins/script-fu/scripts/blended-logo.scm
	* plug-ins/script-fu/scripts/bovinated-logo.scm
	* plug-ins/script-fu/scripts/camo.scm
	* plug-ins/script-fu/scripts/carved-logo.scm
	* plug-ins/script-fu/scripts/chalk.scm
	* plug-ins/script-fu/scripts/chip-away.scm
	* plug-ins/script-fu/scripts/chrome-logo.scm
	* plug-ins/script-fu/scripts/comic-logo.scm
	* plug-ins/script-fu/scripts/coolmetal-logo.scm
	* plug-ins/script-fu/scripts/crystal-logo.scm
	* plug-ins/script-fu/scripts/flatland.scm
	* plug-ins/script-fu/scripts/frosty-logo.scm
	* plug-ins/script-fu/scripts/gimp-headers.scm
	* plug-ins/script-fu/scripts/gimp-labels.scm
	* plug-ins/script-fu/scripts/glossy.scm
	* plug-ins/script-fu/scripts/glowing-logo.scm
	* plug-ins/script-fu/scripts/gradient-bevel-logo.scm
	* plug-ins/script-fu/scripts/i26-gunya2.scm
	* plug-ins/script-fu/scripts/land.scm
	* plug-ins/script-fu/scripts/neon-logo.scm
	* plug-ins/script-fu/scripts/news-text.scm
	* plug-ins/script-fu/scripts/pupi-button.scm
	* plug-ins/script-fu/scripts/rendermap.scm
	* plug-ins/script-fu/scripts/sota-chrome-logo.scm
	* plug-ins/script-fu/scripts/speed-text.scm
	* plug-ins/script-fu/scripts/sphere.scm
	* plug-ins/script-fu/scripts/starburst-logo.scm
	* plug-ins/script-fu/scripts/starscape-logo.scm
	* plug-ins/script-fu/scripts/swirltile.scm
	* plug-ins/script-fu/scripts/swirly-pattern.scm
	* plug-ins/script-fu/scripts/t-o-p-logo.scm
	* plug-ins/script-fu/scripts/test-sphere.scm
	* plug-ins/script-fu/scripts/text-circle.scm
	* plug-ins/script-fu/scripts/textured-logo.scm
	* plug-ins/script-fu/scripts/title-header.scm
	* plug-ins/script-fu/scripts/truchet.scm:
	Move the script categories that were in Xtns->Script-Fu
        directly into Xtns. Language specific tools (e.g. Refresh,
        Console) remain in language-specific menus. Bug 145507.
	
2005-10-15  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimpselectiontool.c: let status info be pushed.
	
2005-10-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/channel_mixer.c: indentation and other cleanups.

2005-10-13  Sven Neumann  <sven@gimp.org>

	* app/dialogs/palette-import-dialog.c: minor dialog tweaks.

2005-10-13  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorarea.[ch]: pass sensitivity to
	_gimp_color_area_render_buf().

	* libgimpwidgets/gimpcellrenderercolor.c
	(gimp_cell_renderer_color_render): respect cell and widget
	sensitivity.

2005-10-13  Sven Neumann  <sven@gimp.org>

	* app/actions/tools-actions.c
	* app/actions/tools-commands.c: special case gimp-rotate-tool
	being called from the Layer menu and set transform type to
	GIMP_TRANSFORM_TYPE_LAYER. Fixes bug #318540.

2005-10-13  Jakub Steiner <jimmac@ximian.com>

	* data/palettes/Tango.gpl: Added the tango icon palette
	  (http://www.tango-project.org)
	
2005-10-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/displace.c: check that displacement maps have
	the same size as the target drawable, return a PDB_CALLING_ERROR
	otherwise. Fixes bug #318644.

2005-10-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/plugin-browser.c: store the installation time in
	the models, not only the string representation. Sort by time, not
	alphabetically. Fixes bug #318652.

2005-10-12  Sven Neumann  <sven@gimp.org>

	* app/base/base-types.h
	* app/base/siox.[ch]: applied patch from Gerald Friedland that
	introduces a state to the SIOX operation.

	* app/core/gimpdrawable-foreground-extract.c: adapted to the new API.

2005-10-11  Michael Natterer  <mitch@gimp.org>

	* libgimpthumb/gimpthumbnail.c: the mime-type is stored in
	"tEXt::Thumb::Mimetype", not in "tEXt::Thumb::Image::Mimetype".
	Fixed this and reordered properties so "tEXt::Thumb" and
	"tEXt::Thumb::Image" stuff is grouped together again.

2005-10-10  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpcolorselection.c: added a pick button, it's
	too useful to be just in the color dockable.

2005-10-10  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpviewable.c (gimp_viewable_get_description): set the
	"tooltip" return value to NULL before calling the virtual function.

	* app/core/gimpbrush.c
	* app/core/gimpbuffer.c
	* app/core/gimpchannel.c
	* app/core/gimplayer.c
	* app/core/gimppaintinfo.c
	* app/core/gimppalette.c
	* app/core/gimppattern.c
	* app/core/gimptoolinfo.c (get_description): don't do it here.

	* app/core/gimpbuffer.c
	* app/core/gimppaintinfo.c: untabbify, cleanup.

	* app/core/gimpobject.c: emit "notify::name" whenerver the name
	changes, clenup.

2005-10-09  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: Enable selection masking, even if it
	looks buggy. It looks to me that the bug is in
	gimp_drawable_get_sub_preview (), not handling the selection drawable
	as a normal drawable.

2005-10-09  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: better handling of selections and
	navigation popup. Still not perfect.

2005-10-09  DindinX  <dindinx@gimp.org>

	* libgimp/gimpdrawablepreview.c: made the navigation popup respect
	the aspect ratio of the selection or the drawable.

2005-10-08  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcroptool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.c: added status bar info to tell the
	user what to do once the rectangle area is drawn. Fixes bug #318267.

2005-10-07  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/grid.pdb: fixed (false) uninitialized variable
	warnings and cleaned up the code a bit.

	* app/pdb/grid_cmds.c: regenerated.

2005-10-07  Sven Neumann  <sven@gimp.org>

	* app/dialogs/palette-import-dialog.c (palette_import_filename_changed)
	(palette_import_file_callback): use UTF8 encoding with GtkEntry.

2005-10-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette-import.[ch]: added new function
	gimp_palette_import_from_drawable(), respecting the selection as
	suggested in bug #316212.

2005-10-06  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/gauss.c: always use RLE if horz or
	vert radius is less than 1.  Fixes bug #315953.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-save.c: can't use smoothing with nonstandard
	sampling ratios. Set the slider sensitivity accordingly (bug #318081).

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/gimpressionist.c: removed About dialog.

	* plug-ins/gimpressionist/Makefile.am
	* plug-ins/gimpressionist/logo.png: removed logo.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/gimpressionist.[ch]
	* plug-ins/gimpressionist/orientation.c
	* plug-ins/gimpressionist/orientmap.[ch]
	* plug-ins/gimpressionist/placement.c
	* plug-ins/gimpressionist/presets.c
	* plug-ins/gimpressionist/preview.c
	* plug-ins/gimpressionist/repaint.c
	* plug-ins/gimpressionist/size.c

	* plug-ins/gimpressionist/sizemap.c: various minor improvements
	like setting all dialogs transient to the main window.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/presets.c
	* app/config/gimprc-blurbs.h
	* app/dialogs/quit-dialog.c
	* app/config/gimpcoreconfig.c: changed "The GIMP" to "GIMP".

	* plug-ins/common/xbm.c: unmarked same string for translation.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimputils.c: gimp_canonicalize_identifier() is new API,
	mark it as such.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprocbrowserdialog.c: capitalization and other string
	changes.

	* libgimpwidgets/gimpbrowser.c: string unification. Set the
	message label italic.

	* plug-ins/common/plugin-browser.c: use ngettext() for plural forms.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* app/dialogs/dialogs-constructors.c
	* app/dialogs/keyboard-shortcuts-dialog.[ch]: include a check
	button for the "save-accels" gimprc property.

2005-10-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/help/domain.c: try to improve the error message that is
	shown for missing help files.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* app/dialogs/about-dialog.c: set application name to "GIMP", the
	expanded acronym is in the comment already.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c: fixed string.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpaspectpreview.c
	* libgimp/gimpzoompreview.c: added missing API docs.

2005-10-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/siod-wrapper.c: reverted changes to handling
	of string arrays to stay backward compatible (see bug #168290 and
	bug #317634).

	* plug-ins/script-fu/scripts/font-map.scm: reverted change that
	was done to adapt to above changes (see bug #308681).

2005-10-04  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpbrushcore.c (gimp_brush_core_start): set
	core->jitter here for all brush-based paint tools.

	(gimp_brush_core_interpolate): cleanup.

	* app/paint/gimpbrushcore.h: removed trailing whitespace.

	* app/paint/gimpclone.c (gimp_clone_motion)
	* app/paint/gimppaintbrush.c (_gimp_paintbrush_motion): removed
	jitter stuff here.

2005-10-04  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: another optimization by Tobias Lenz.

2005-10-04  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: small optimization by Tobias Lenz.

2005-10-03  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppainttool.c (gimp_paint_tool_color_picked):
	fix compile warning by adding default: for unused enum values.

2005-10-03  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* gimp/app/paint/gimpbrushcore.c
	* gimp/app/paint/gimpbrushcore.h
	* gimp/app/paint/gimpclone.c
	* gimp/app/paint/gimppaintbrush.c
	* gimp/app/paint/gimppaintoptions.c
	* gimp/app/paint/gimppaintoptions.h
	* gimp/app/tools/gimppaintoptions-gui.c: Apply patch from
	Adrian Likins to add "jitter" to paint tools (bug #163049),
	with small fixes for coding style and default jitter set
	to 0.2 instead of 0.0.

2005-10-02  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.[ch]: added a new function:
	gimp_zoom_preview_get_factor(), which is a proxy to get the zoom
	factor of the zoom model used by the zoom preview.
	Also renamed the zoom field of the private data of gimpzoompreview to
	model, since it is a gimpzoommodel.

	* libgimp/gimpui.def: added gimp_zoom_preview_get_factor.

	* plug-ins/common/nova.c: use gimp_zoom_preview_get_factor to
	correctly handle the position of the nova at various zoom level.
	There still are problems if there is a selection before when running
	this plugin.

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c: fixed the bogus snaps. One
	should not calculate tangents for points beyond the end of the
	array...

	Don't leak lots of g_arrays...

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c: a segment doesn't necessarily
	have a matching tangent. Check for this when iterating over all
	segments of a path...

	* app/vectors/gimpstroke.c: fix the dispatch of
	_nearest_intersection_get().

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpbezierstroke.c: correctly pass back the
	nearest coordinate. Snapping sortof works.

2005-10-02  Simon Budig  <simon@gimp.org>

	* app/core/gimpcoords.c: use ABS instead of fabs.

	* app/core/gimpimage-snap.c: Use proper default values for the
	coordinates.

	* app/vectors/gimpbezierstroke.c: Fix a bug plus add some debug
	output. For some reason does not snap yet.

2005-10-02  Sven Neumann  <sven@gimp.org>

	* app/file/file-utils.[ch]: introduced variants of
	file_utils_uri_to_utf8_filename() and
	file_utils_uri_to_utf8_basename() that use g_filename_display_name()
	and g_filename_display_basename().

	* app/actions/data-commands.c
	* app/actions/documents-commands.c
	* app/actions/file-actions.c
	* app/actions/file-commands.c
	* app/core/gimpimage.c
	* app/core/gimpimagefile.c
	* app/dialogs/file-open-dialog.c
	* app/dialogs/file-open-location-dialog.c
	* app/dialogs/file-save-dialog.c
	* app/dialogs/palette-import-dialog.c
	* app/display/gimpdisplayshell-close.c
	* app/display/gimpdisplayshell-dnd.c
	* app/display/gimpdisplayshell-title.c
	* app/file/file-open.c
	* app/widgets/gimpdnd-xds.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimpthumbbox.c
	* app/widgets/gimptoolbox-dnd.c
	* app/widgets/gimptoolbox.c
	* app/widgets/gimpviewabledialog.c: use the new functions.

	* plug-ins/help/domain.c: use g_filename_display_name().

2005-10-01  Michael Natterer  <mitch@gimp.org>

	* app/sanity.c (sanity_check_glib): we require 2.8.0 now.

2005-10-01  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpwidgetsmarshal.list: added VOID__DOUBLE_DOUBLE
	marshaller.

	* libgimpwidgets/gimpzoommodel.[ch]: new signal: "zoomed", emitted
	when the zoom factor changes.  This signal have the old factor and the
	new factor as argument.

	* libgimp/gimpzoompreview.c: use the "zoomed" signal instead of the
	"notify::value" one. This allow to use the old and new factors to keep
	the preview centered on the same point.

2005-10-01  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.c: call gtk_adjustment_value_changed in
	addition to gtk_adjustment_changed, so the offsets are correctly
	updated.

2005-09-30  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-pdb.c (pf_call): use canonical name for
	run-mode.

	* plug-ins/pygimp/plug-ins/clothify.py
	* plug-ins/pygimp/plug-ins/foggify.py: revert the below, since
	we eat the run-mode parameter again.

2005-09-30  Carol Spears  <carol@gimp.org>

	* plug-ins/pygimp/plug-ins/clothify.py  
	* plug-ins/pygimp/plug-ins/foggify.py: Added run_mode parameter.

2005-10-01  Simon Budig  <simon@gimp.org>

	* app/core/gimpcoords.[ch]: Added small utility function for the
	manhattan metric.

	* app/vectors/gimpstroke.[ch]: virtualized stubs provided by mitch

	* app/vectors/gimpbezierstroke.c: Reworked some internal functions
	to make it easier to access the parameters for the coordinates of an
	stroke interpolation. Simplified the straight line test. Added an
	implementation of the _nearest_tangent_get () function that does
	not yet seem to work properly. Not sure where the problem is.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/actions/image-commands.c
	* app/actions/layers-commands.c
	* app/actions/view-actions.c
	* app/core/gimpdrawable-foreground-extract.c
	* app/core/gimpimagefile.c
	* app/core/gimpprogress.c
	* app/dialogs/convert-dialog.c
	* app/tools/gimpblendtool.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/tools/gimptransformtool.c
	* app/widgets/gimpthumbbox.c
	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/edit.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: removed '...' from
	progress messages. Removed spaces between the text and the '...'
	in some other places.

	* app/pdb/drawable_transform_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/transform_tools_cmds.c: regenerated.

2005-09-30  Carol Spears  <carol@gimp.org>

	* plug-ins/pygimp/gimpfu.py: removed code that limited plug-in 
        registration.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/vectors/gimpstroke.[ch]: added stubs of two new snapping
	functions.

	* app/core/gimpimage-snap.c: removed their #defines here.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]
	* libgimpbase/gimpbaseenums.[ch]: moved GimpGridStyle enum to
	libgimpbase.

	* app/core/gimpimage-grid.h: indentation.

	* app/pdb/Makefile.am
	* libgimp/Makefile.am
	* tools/pdbgen/Makefile.am
	* tools/pdbgen/pdb/grid.pdb: applied slightly modified patch by
	Sylvain FORET that adds a PDB API for the image grid.

	* app/pdb/grid_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimp_pdb.h
	* libgimp/gimpenums.c.tail
	* libgimp/gimpgrid_pdb.[ch]
	* tools/pdbgen/enums.pl
	* tools/pdbgen/groups.pl: (re)generated.

	* libgimp/gimp.def
	* libgimpbase/gimpbase.def: updated.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gbr.c (save_image): handle RGB drawables and
	implicitely add the alpha channel.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/actions/dialogs-actions.c (dialogs_toplevel_actions): use
	GIMP_STOCK_CHAR_PICKER for the keyboard shortcuts dialog. Not
	quite right but at least greppable when we have a proper icon.

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/dialog.c: removed forgotten foreign registration of
	"gimp-keyboard-shortcuts-dialog".

2005-09-30  Michael Natterer  <mitch@gimp.org>

	* plug-ins/*/*.c: removed '...' from progress messages. They are
	redundant because we are already in a progress. Ported some more
	g_strdup_printf()/gimp_progress_init() to
	gimp_progress_init_printf(). Core will follow...

2005-09-29  Manish Singh  <yosh@gimp.org>

	* plug-ins/uri/uri-backend-wget.c: Finish porting to new progress
	API (and make it build).

	* plug-ins/uri/uri-backend-gnomevfs.c: Convert a g_strdup_printf
	gimp_progress_set_text pair to gimp_progress_set_text_printf.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* app/actions/dialogs-actions.c
	* app/dialogs/dialogs-constructors.[ch]
	* app/dialogs/dialogs.c
	* app/dialogs/keyboard-shortcuts-dialog.[ch]: register the keyboard
	shortcut dialog with the dialog factory as singleton toplevel dialog.

	* app/dialogs/preferences-dialog.c: changed accordingly.

	* menus/image-menu.xml.in: added a "Keyboard Shortcuts" entry to
	the Edit menu.

2005-09-30  Sven Neumann  <sven@gimp.org>

	* app/dialogs/Makefile.am
	* app/dialogs/keyboard-shortcuts-dialog.[ch]
	* app/dialogs/preferences-dialog.c
	* app/widgets/gimphelp-ids.h: moved Keyboard Shortcuts dialog into
	it's own file.

2005-09-29  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/common/autocrop.c:
	It was cropping too much, eliminating the first non-background
	row/column on each edge.

2005-09-29  Sven Neumann  <sven@gimp.org>

	* app/base/tile-cache.c
	* app/base/tile-manager.c
	* app/base/tile-private.h
	* app/base/tile-swap.c
	* app/base/tile.c: keep the data size of a tile in the Tile struct
	instead of recalculating it over and over again. Adds an overhead
	of 4 bytes per tile but speeds up the tile cache significantly.

2005-09-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: optimizations by Tobias Lenz.

2005-09-29  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/progress.pdb: removed the "wrap" from
	gimp_progress_set_text() so it shows up as libgimp function again.

	* libgimp/gimpprogress_pdb.[ch]: regenerated.

	* libgimp/gimpprogress.[ch]: changed the old
	gimp_progress_set_text() to gimp_progress_set_text_printf() and
	added gimp_progress_init_printf(). (did this because the method of
	calling init(NULL) followed by set_text("foo") caused popup
	progress windows to be resized after they were shown).

	* libgimp/gimp.def: changed accordingly.

	* plug-ins/*/*.c: use gimp_progress_init_printf() instead of
	init(NULL) plus set_text(foo) and changed users of set_text() to
	use set_text_printf().	

2005-09-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c: removed the frame
	around the progress bar.

2005-09-29  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/common/zealouscrop.c:
	Update every 20 steps, instead of 19 out of every 20.

2005-09-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-console.c
	(script_fu_browse_callback): don't set the procedure browser
	transient to the script-fu console.

2005-09-28  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpprogressbox.c
	* plug-ins/script-fu/script-fu-interface.c: made progress bars HIG
	compliant (with italic label below).

	* app/widgets/gimpfiledialog.[ch]: use a GimpProgressBox intead of
	implementing the progress bar again.

2005-09-28  Michael Natterer  <mitch@gimp.org>

	* app/actions/dialogs-actions.c (dialogs_dockable_actions): fixed
	action parameter to match both the palette list and grid.
	Fixes bug #317435.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpscanner.c (gimp_scanner_new_file): mmap the
	config file using GMappedFile. Let's see how well this works...

2005-08-28  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/chrome-it.scm: Removed extraneous -
	in register block left when script was renamed.

	* plug-ins/script-fu/scripts/text-circle.scm: Fixed minor errors
	in comments.

2005-09-28  Tor Lillqvist  <tml@novell.com>

	* libgimp/gimp.def: Fix typo.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gqbist.c: use a single random number generator
	for the lifetime of the plug-in. Fixes bug #317355.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* docs/Makefile.am
	* docs/keybindings.txt
	* docs/quick_reference.ps
	* docs/quick_reference.tar.gz: removed outdated documentation that
	is now being maintained in the user manual (bug #316423).

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.c
	(gimp_scrolled_preview_nav_popup_expose): draw the rectangle
	according to the scrollbar adjustments.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.[ch]
	(gimp_scrolled_preview_set_position): must not set the adjustment
	value directly. Instead make sure that the scrollbar adjustments
	are uptodate and use gtk_adjustment_set_value().

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreview.[ch]: renamed newly added function to
	gimp_preview_get_controls(). Increased row padding for controls.

	* libgimpwidgets/gimpwidgets.def
	* libgimp/gimpzoompreview.c: changed accordingly.

	* libgimpbase/gimputils.c (gimp_enum_get_value): ref the enum
	class instead of only peeking at it.

	* libgimpwidgets/gimpzoommodel.c (gimp_zoom_button_new): set a
	tooltip on zoom buttons that only show an icon.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreview.[ch]: added a hbox to the table and
	the "Update Preview" checkbutton there. Added a function to access
	this control box. Increased default size to 200.

	* libgimpwidgets/gimpscrolledpreview.[ch]: added function
	gimp_scrolled_preview_set_policy() to control when the scrollbars
	should be shown.

	* libgimpwidgets/gimpwidgets.def: updated.

	* libgimp/gimpzoompreview.c: pack the zoom buttons into the
	preview's control box. Commented out the label, it shows a bogus
	zoom factor. Set scrollbar policy to ALWAYS to avoid resizing.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimphistogrameditor.[ch]: do not calculate the
	histogram if the histogram dock is invisible.

2005-09-28  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs-generic.h (swap_pixels): replaced
	binary operations with a naive but faster implementation using a
	local variable.

	* app/composite/gimp-composite-generic.c
	(gimp_composite_swap_any_any_any_generic): same change here.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: minor code cleanups by Tobias Lenz.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpintcombobox.c: document how to construct an
	empty GimpIntComboBox using g_object_new().

	* plug-ins/common/aa.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/compose.c
	* plug-ins/common/decompose.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/gflare/gflare.c
	* plug-ins/pagecurl/pagecurl.c: use g_object_new() to construct an
	empty GimpIntComboBox. The old way of doing it caused warnings.

2005-09-27  Michael Natterer  <mitch@gimp.org>

	* app/actions/data-commands.c
	* app/actions/file-commands.c
	* app/actions/templates-commands.c
	* app/dialogs/image-scale-dialog.c
	* app/dialogs/resize-dialog.c
	* app/dialogs/vectors-options-dialog.c
	* app/tools/gimptexttool.c
	* libgimpwidgets/gimpcolorbutton.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/aa.c
	* plug-ins/gimpressionist/orientmap.c
	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/xjt/xjt.c: fixed indentation in calls to
	gtk_dialog_set_alternative_button_order().

2005-09-27  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/buffer.pdb: added gimp-buffers-get-list,
	should probably get its own PDB group.

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/buffer_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpbuffer_pdb.[ch]: regenerated.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-gui.h
	* app/core/gimp-utils.h
	* app/core/gimpimage-undo.h
	* app/text/gimptextlayer.h
	* app/widgets/gimpeditor.h
	* app/widgets/gimpmenufactory.h
	* app/widgets/gimpmessagedialog.h
	* app/widgets/gimpsessioninfo.h
	* app/widgets/gimptooldialog.h
	* app/widgets/gimpviewabledialog.h: use G_GNUC_NULL_TERMINATED
	where appropriate.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprocbrowserdialog.h
	* libgimpwidgets/gimpbrowser.h
	* libgimpwidgets/gimpdialog.h
	* libgimpwidgets/gimpintcombobox.h
	* libgimpwidgets/gimpoldwidgets.h
	* libgimpwidgets/gimpwidgets.h: use G_GNUC_NULL_TERMINATED where
	appropriate.

	* libgimp/gimpprocbrowserdialog.c
	* libgimpwidgets/gimpbrowser.c: added missing API docs.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprocbrowserdialog.[ch]: let
	gimp_proc_browser_dialog_new() take standard dialog parameters,
	similar to gimp_dialog_new().

	* plug-ins/common/procedure-browser.c
	* plug-ins/pygimp/procbrowser.c
	* plug-ins/script-fu/script-fu-console.c: changed accordingly.

2005-09-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c (script_fu_interface):
	use GTK_STOCK_ABOUT for the About button (bug #317339).

2005-09-27  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpbuffer.[ch]: added gimp_buffer_get_bytes()
	and gimp_buffer_get_image_type().

	* tools/pdbgen/pdb/edit.pdb: removed edit_named_rename() and
	edit_named_delete().

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/groups.pl
	* tools/pdbgen/pdb/buffer.pdb: new PDB group featuring
	buffer_rename(), delete(), get_width(), get_height(), get_bytes(),
	get_image_type(). Fixes bug #315130.

	* app/pdb/Makefile.am
	* libgimp/Makefile.am
	* libgimp/gimp.def: changed accordingly.

	* app/pdb/buffer_cmds.c
	* app/pdb/edit_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimp_pdb.h
	* libgimp/gimpbuffer_pdb.[ch]
	* libgimp/gimpedit_pdb.[ch]: (re)generated.

2005-09-27  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.c: zooming out more is zooming out
	three times, not zooming in. Fixes bug #155446.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): applied
	patch from Robert Ögren that works around problem creating guides
	with a tablet on Windows by enabling extension events for the
	rulers.  Fixes the first problem described in bug #168516.

	* configure.in: bumped version to 2.3.5.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* Made 2.3.4 development release.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	Allow to disable the color picker info dialog. Fixes bug #315011:

	* app/tools/tools-enums.[ch] (enum GimpColorPickerMode): added
	value GIMP_COLOR_PICK_MODE_PALETTE.

	* app/tools/gimpcolorpickeroptions.[ch]: deprecated property
	"add-to-palette" and added property "use-info-window". Changed
	tool options GUI accordingly.

	* app/tools/gimpcolorpickertool.c
	(gimp_color_picker_tool_modifier_key): made <shift> toggle
	the use-info-window property.

	(gimp_color_picker_tool_picked): moved palette picking code
	into the pick_mode switch() statement.

	* app/tools/gimpcolortool.c (gimp_color_tool_cursor_update):
	show a "plus" cursor when adding to the palette.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c (script_fu_interface):
	set "activates-default" on all entries.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c: removed some frames
	from the Script-Fu dialogs.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* app/actions/debug-commands.c (debug_dump_menus_cmd_callback)
	(debug_dump_menus_recurse_menu): resurrected.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	Allow plug-ins to register menu entries in the <Brushes>,
	<Gradients>, <Palettes>, <Patterns> and <Fonts> menus:

	* app/actions/actions.c (action_data_get_gimp): return a Gimp
	also if "data" is a GimpContainerView or GimpContainerEditor.

	* app/gui/gui-vtable.c (gui_menus_add_proc)
	* app/plug-in/plug-in-params.c (plug_in_proc_args_check): support
	the new plug-in menu locations.

	* app/menus/menus.c (menus_init): add the "plug-in" action group
	to the resp. UI managers.

	* menus/brushes-menu.xml
	* menus/buffers-menu.xml
	* menus/fonts-menu.xml
	* menus/gradients-menu.xml
	* menus/palettes-menu.xml
	* menus/patterns-menu.xml: added separators at the end of the menus.

	* plug-ins/script-fu/scripts/font-map.scm: -> <Fonts>
	* plug-ins/script-fu/scripts/gradient-example.scm: -> <Gradients>
	* plug-ins/script-fu/scripts/mkbrush.scm: -> <Brushes>

	* plug-ins/script-fu/script-fu.c (script_fu_extension_init): don't
	register the "Make Brush" menu branch.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c
	* tools/test-clipboard.c: use G_OPTION_FLAG_NO_ARG where needed.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/paste-as-brush.scm
	* plug-ins/script-fu/scripts/paste-as-pattern.scm: cleanup.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* app/actions/edit-actions.c: renamed action back to "Paste as
	New" and added a second action with the "New Image" label. The
	original label is needed for <Toolbox>/File/Acquire.

	* menus/image-menu.xml.in: changed accordingly.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-params.c (plug_in_proc_args_check): drop the
	restriction that plug-ins registered in <Image> must have
	RUN-MODE, IMAGE, DRAWABLE parameters because everything but
	RUN-MODE is actually treated as optional be the rest of the code.

	* plug-ins/script-fu/scripts/paste-as-brush.scm
	* plug-ins/script-fu/scripts/paste-as-pattern.scm: removed IMAGE
	and DRAWABLE parameters.

	* plug-ins/common/screenshot.c
	* plug-ins/twain/twain.c
	* plug-ins/winsnap/winsnap.c: register menu entries in
	<Image>/File/Acquire

2005-09-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gqbist.c: minor dialog tweak.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c
	* app/file/file-save.c
	* app/file/file-open.c: use g_access() from gstdio.h.

	* app/config/gimpconfig-file.c (gimp_config_file_copy)
	* libgimpthumb/gimpthumbnail.c: use g_chmod() from gstdio.h.

	* app/file/gimprecentlist.c
	* libgimpconfig/gimpconfigwriter.c: use g_creat() from gstdio.h.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* menus/image-menu.xml.in: added Colors/Modify placeholder.

	* plug-ins/common/vinvert.c: moved to Colors/Modify/Invert.

2005-09-26  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: bumped the required version of glib to 2.8.

	* app/main.c: use G_OPTION_FLAG_NO_ARG with callback options that
	take no argument. Fixes command-line options needed for 'make
	dist', such as '--dump-gimprc'

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/carve-it.scm
	* plug-ins/script-fu/scripts/chrome-it.scm: renamed to "Stencil Carve"
	and "Stencil Chrome" and moved to Filters/Decor.

	* plug-ins/script-fu/script-fu.c: don't register menu branches
	"Filters/Selection" and "Filters/Decor/Stencil Ops".

2005-09-25  Carol Spears  <carol@gimp.org>

	* plug-ins/common/max_rgb.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/borderaverage.c moved menu entry from Colors to
        Colors/Info and added some vital information to the registration
        information.

	* plug-ins/common/channel_mixer.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/colorify.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/fp.c moved menu entry from Colors to
        Colors/Modify.

	* plug-ins/common/retinex.c moved menu entry from Colors to
        Colors/Modify.

2005-09-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/fade-outline.scm: renamed to
	"Fade to Layer Mask..." and moved to the Select menu.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/max_rgb.c: moved it back, the plug-in changes
	the image. Renamed to "Maximum RGB".

2005-09-25  Carol Spears  <carol@gimp.org>

	* plug-ins/common/max_rgb.c moved menu entry from Colors to
        Colors/Info.

	* plug-ins/common/smooth_palette.c moved menu entry from Colors to
        Colors/Info.

	* plug-ins/common/semiflatten.c removed menu entry from Colors and
        added it to Filters/Web

	* plug-ins/pygimp/plug-ins/py-slice.py added the patch from
        Joao S. O. Bueno Calligaris that was attached to bug #159564.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/edit-actions.c
	* menus/image-menu.xml.in: added "Edit/Paste as" submenu and moved
	"Paste as new" there (renamed to "New Image").

	* plug-ins/script-fu/scripts/Makefile.am
	* plug-ins/script-fu/scripts/paste-as-brush.scm
	* plug-ins/script-fu/scripts/paste-as-pattern.scm: new scripts
	roughly derived from select-to-brush and select-to-pattern.

	* plug-ins/script-fu/scripts/select-to-brush.scm
	* plug-ins/script-fu/scripts/select-to-image.scm
	* plug-ins/script-fu/scripts/select-to-pattern.scm: don't register
	menu entries.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]: applied patch from Gerald Friedland and
	Tobias Lenz. Introduces a hash table to speed up the algorithm
	and changes the post-processing so that multiple disjunct objects
	can be selected.

	* app/tools/gimpforegroundselecttool.c: changed tooltip, the tool
	doesn't any longer extract single objects only.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgetsenums.[ch]: removed GimpZoomWidgetType.

	* libgimpwidgets/gimpzoommodel.[ch]: removed gimp_zoom_widget_new()
	in favor of gimp_zoom_button_new().

	* libgimp/gimpzoompreview.c: changed accordingly.

	* libgimpwidgets/gimpwidgets.def: updated.

	* plug-ins/MapObject/mapobject_main.[ch]
	* plug-ins/MapObject/mapobject_preview.c
	* plug-ins/MapObject/mapobject_ui.c: use a GimpZoomModel and let
	it create the zoom buttons.

	* plug-ins/MapObject/mapobject_apply.c
	* plug-ins/MapObject/mapobject_image.c
	* plug-ins/MapObject/mapobject_shade.c: include "gimp/gimpui.h".

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/help/Makefile.am (gimp_help_lookup_LDADD): link
	against libgimpbase now that we use gimp_data_directory().

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/distress-selection.scm: renamed to
	"Distort..." and moved to Select/Modify.

2005-09-24  Hans Breuer  <hans@breuer.org>

	* **makefile.msc : updated
	
	* app/dialogs/user-install-dialog.c : only add the migrate page if
	there is something to migrate from. Avoids on version being NULL.
	
	* app/dialogs/file-save-dialog.c : the g_print() output was crashing
	on the assumption that ->menu_label != NULL. It is for colorhtml.py.
	
	* app/widgets/gimpselectiondata.c : use HAVE_UNISTD_H and move 
	* process.h definition by G_OS_WIN32 below it being defined
	* app/widgets/gimpwidgets-utils.c(gimp_window_get_native) : cast
	return value to (GdkNativeWindow) it is not necessary an int.
	
	* libgimpwidgets/gimpwidgets.def : added gimp_zoom_type_get_type
	
	* plug-ins/help/gimp-help-lookup.c : dynamic lookup of help_root
	instead of hard-coding DATADIR/GIMP_HELP_PREFIX
	
	* plug-ins/xjt/xjt.c : there is no pid_t with msvc, typedef one.
	
2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/plug-in-actions.c
	* menus/image-menu.xml.in: get rid of Filters/Effects because it
	doesn't mean anything. Added Filters/Generic and Filters/Combine
	back instead. Not perfect either but more meaningful.

	* plug-ins/common/depthmerge.c
	* plug-ins/common/film.c: -> Filters/Combine

	* plug-ins/common/convmatrix.c
	* plug-ins/common/vpropagate.c: -> Filters/Generic

	* plug-ins/script-fu/scripts/erase-rows.scm: -> Filters/Distorts

	* plug-ins/script-fu/scripts/predator.scm: -> Filters/Artistic

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/convert-dialog.c
	* app/dialogs/palette-import-dialog.c: added icons to the
	affirmative action buttons.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c (view_zoom_actions): use
	GIMP_STOCK_CHAR_PICKER for the actions which are only there for
	keyboard shortcuts. Not perfect but better than before.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/actions/file-actions.c (file_actions): made Shift+Ctrl+W the
	shortcut for "Close all".

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/psd.c: massively indented and de-uglyfied,
	(not many lines unmodified). Still not the incarnation of
	beautiful code, but more readable for an eye used to Gimp code.
	No logic changes, just formatting.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c (run): set "is_ID" to TRUE, not FALSE
	when decoding the "compose-data" parasite. Fixes Recompose.
	Return error, not success if recomposing fails. Misc cleanups.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpzoommodel.[ch]: added gimp_zoom_model_zoom()
	and changed gimp_zoom_model_get_fraction() to take a model instead
	of the zoom factor.

	* app/display/gimpdisplayshell.[ch]: use a GimpZoomModel for the
	display scale factor.

	* app/actions/image-commands.c
	* app/actions/view-actions.c
	* app/actions/view-commands.c
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-scale.c
	* app/display/gimpdisplayshell-title.c
	* app/display/gimpnavigationeditor.c
	* app/display/gimpstatusbar.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpmagnifytool.c: changed accordingly.

2005-09-25  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcroptool.c: fixed assignment of local variable
	"rectangle_exists".

2005-09-25  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpnewrectselecttool.c: fixed assignment of local
	variable "rectangle_exists".

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): reordered checks for
	the modifiers pressed on <Tab> so NumLock and friends don't
	interfere. Fixes bug #317118.

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgetsenums.h: added more values to the
	GimpZoomType enum.

	* libgimpwidgets/gimpzoommodel.c (gimp_zoom_model_zoom_step):
	handle the new enum values.

	* app/actions/view-commands.c (view_zoom_cmd_callback) use the new
	values.

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): cosmetics. 

2005-09-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpzoommodel.[ch]: minor cleanup, documentation.

2005-09-25  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/quit-dialog.c (quit_close_all_dialog_new): another
	patch from Sylvain Foret that fixes the dialog title for the close
	all dialog. Fixes bug #317137. Also pass the right help IDs to
	gimp_message_dialog_new().

2005-09-24  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpwidgetsenums.h: remove the GIMP_ZOOM_LABEL value
	from GimpZoomWidgetType.

	* libgimpwidgets/gimpwidgetsenums.c: regenerated.

	* libgimp/gimpzoompreview.c: provides two read only properties,
	"fraction" and "percentage" to be used with prop widgets.

	* libgimpwidgets/gimpzoommodel.c: use a gimp_prop_label to show the
	zoom fraction.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/actions/file-actions.c: set "Close all" insensitive when
	there are no displays.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c
	* app/actions/view-commands.[ch]: de-uglify callback names for
	"new" and "close".

2005-09-24  Michael Natterer  <mitch@gimp.org>

	Applied (slightly modified) patch from Sylvain Foret which adds
	"Close All" menu entries and dialog. Fixes bug #163532.

	* app/actions/file-actions.c
	* app/actions/file-commands.[ch]: added "file-close-all" action
	and callback.

	* app/dialogs/dialogs-constructors.[ch]
	* app/dialogs/dialogs.c
	* app/dialogs/quit-dialog.[ch]: added close all dialog which is a
	modified quit dialog.

	* app/widgets/gimphelp-ids.h: added help ID.

	* menus/image-menu.xml.in
	* menus/toolbox-menu.xml.in: add close all next to quit.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-scale.c
	(gimp_display_shell_scale_dialog): set "activates-default" on all
	spinbuttons.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c: fixed some brokenness caused by my
	last "cleanup". Should work as before now.

	* plug-ins/common/decompose.c: cleaned up GUI and code.

2005-09-24  DindinX  <dindinx@gimp.org>

	* app/widgets/widgets-enums.h: Moved the GimpZoomType enum from
	here...

	* libgimpwidgets/gimpwidgetsenums.h: ...to here.

	* app/widgets/widgets-enums.c
	* libgimpwidgets/gimpwidgetsenums.c: regenerated.

	* app/display/gimpdisplayshell-scale.[ch]: removed
	gimp_display_shell_scale_zoom_step and
	gimp_display_shell_scale_get_fraction from here...

	* libgimpwidgets/gimpzoommodel.[ch]: ... to here so we can use these
	utility functions in plug-ins and in the core.
	Also removed the step-size property since the zoom-model now use
	gimp_zoom_model_zoom_step.

	* app/actions/view-commands.c
	* app/display/gimpdisplayshell-title.c
	* app/display/gimpdisplayshell.c
	* app/tools/gimpmagnifytool.c: modified accordingly.

	* libgimp/gimpzoompreview.c: don't pass any argument to the
	gimp_zoom_model_new function.

	* libgimpwidgets/gimpwidgets.def: added gimp_zoom_model_zoom_step
	(gimp_zoom_model_get_fraction was already there)

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintcore.h
	* app/tools/gimpimagemaptool.c
	* tools/test-clipboard.c: indentation fixes.

2005-09-24  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpactiongroup.c
	(gimp_action_group_set_action_hide_empty): renamed from
	set_action_important(). Set the "hide-if-empty" property so
	showing an insensitive "Empty" item instead of hiding the submenu
	works again (did this ever work?).

	* app/actions/tool-options-actions.c (tool_options_actions_setup):
	changed accordingly. Keeps the tool options submenus from
	disappearing.

2005-09-23  Michael Natterer  <mitch@gimp.org>

	* menus/image-menu.xml.in: reordered submenus and placeholders
	so stuff is not grouped that randomly any longer.

	* plug-ins/script-fu/scripts/hsv-graph.scm: move it to the "Info"
	placeholder so it is next to histogram and ccanalyze.

2005-09-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-save.c: added a tooltip that explains how to
	obtain the file size.

2005-09-22  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: added a check for libgnomeprintui.

	* plug-ins/common/gnomeprint.c: added a simple Print plug-in that
	uses libgnomeprint and libgnomeprintui. Needs more work.

	* plug-ins/common/plugin-defs.pl: added the new plug-in.

	* plug-ins/common/Makefile.am: regenerated.

2005-09-22  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.c: renamed the properties "value",
	"minimum" and "maximum".

	* libgimp/gimpzoompreview.c: modified accordingly.

2005-09-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/print.c: canonicalize procedure name and parameters.

2005-09-22  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c: reorganized and cleaned up GUI and code.

2005-09-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd.c
	* plug-ins/common/psd_save.c: don't hardcode unit conversion factors.

2005-09-21  Jay Cox  <jaycox@gimp.org>

	* plug-ins/common/psd.c: Load the resolution properly when it is
	specified in px/cm.
	* plug-ins/common/psd_save.c: Save the resolution of the image in
	the file.  Fixes bug #310426
	
2005-09-21  Sven Neumann  <sven@gimp.org>

	* HACKING: minor update.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/spheredesigner.c: update the preview from an
	idle handler. Removed obsolete "Update Preview" button.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/spheredesigner.c: more compact dialog layout,
	renamed "Textures" to "Layers" and make sure that one is always
	selected.

2005-09-21  Michael Natterer  <mitch@gimp.org>

	Separated the global buffer logic from the clipboard
	implementation:

	* app/widgets/gimpclipboard.[ch]: removed all knowledge about
	gimp->global_buffer. Removed the Gimp::buffer-changed callback.
	Made gimp_clipboard_set_buffer() public and remember the set
	buffer in the GimpClipboard struct. Fixed the has_buffer() and
	has_svg() functions.

	* app/gui/gui.c: connect to Gimp::buffer-changed here and call
	gimp_clipboard_set_buffer() from the callback.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c: use ngettext for plural forms.

2005-09-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/cubism.c: initialize variables.

	* plug-ins/common/depthmerge.c: declare all functions as static.

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimp/gimpzoompreview.[ch]: make use of private data instead
	of struct members. Added a gimp_zoom_preview_get_drawable so we
	can still get the drawable from a preview in plug-ins.

	Also changed gimp_zoom_preview_get_data() to
	gimp_zoom_preview_get_source(), to make it more obvious what it
	returns.

	* libgimp/gimpui.def
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/blinds.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/colorify.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/illusion.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/nova.c
	* plug-ins/common/polar.c
	* plug-ins/common/retinex.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c: changed accordingly.

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.[ch]: use private data instead of
	struct members. Added min-factor and max-factor properties so we can
	set the zoom range. These can be set by a new utility function:
	gimp_zoom_model_set_range.

	* libgimpwidgets/gimpwidgets.def: added gimp_zoom_model_set_range.

	* libgimp/gimpzoompreview.c: use gimp_zoom_model_set_range so we can
	only zoom in.

2005-09-20  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.c (erode_region, dilate_region):
	fixed bug in buffer initialization, spotted by Tobias Lenz.
	
2005-09-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/svg.c: corrected version check (bug #314400).

2005-09-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscale.c: invalidate the buffer when the
	widget's sensitivity changes. Draw a stipple pattern on the
	insensitive color scale.

2005-09-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/raw.c (query): fixed capitalization.

2005-09-20  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compose.c: applied patch from Sylvain Foret
	which allows to use fixed greyscale values instead of drawables
	for color components. Fixes bug #309112.

2005-09-20  Sven Neumann  <sven@gimp.org>

	* app/core/gimpitem.c: added read-only properties for id, width
	and height.

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimp/gimpui.def: added the functions from gimpzoompreview.h

	* libgimpwidgets/gimpwidgets.def: added the functions from
	gimpzoommodel.h

2005-09-20  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpzoommodel.[ch]: New object to handle zoom
	factor, and create widgets to control or view this value.

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h: Added gimpzoommodel.[ch].

	* libgimpwidgets/gimpwidgetsenums.h: new enum: GimpZoomWidgetType.
	This enumerate which knid of widget you can created from the zoom
	model.

	* libgimpwidgets/gimpwidgetsenums.c
	* libgimpwidgets/gimpwidgetstypes.h: regenerated.

	* libgimpwidgets/gimppreview.c: move the update toggle to the bottom
	of the box.

	* libgimp/Makefile.am
	* libgimp/gimpui.h
	* libgimp/gimpuitypes.h
	* libgimp/gimpzoompreview.[ch]: New widget, derivated from
	GimpScrolledPreview, which offer the same functionnalities as the
	GimpAspectPreview widget plus zoom facilities.

	* plug-ins/common/AlienMap2.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/blinds.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/colorify.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/illusion.c
	* plug-ins/common/jigsaw.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/nova.c
	* plug-ins/common/polar.c
	* plug-ins/common/retinex.c
	* plug-ins/common/waves.c
	* plug-ins/common/whirlpinch.c: use a GimpZoomPreview instead of a
	GimpAspectPreview.

2005-09-19  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpclipboard.[ch]: added new public function
	gimp_clipboard_set_svg() and internal stuff to offer and transfer
	the svg data to the clipboard.

	* app/actions/vectors-commands.c (vectors_copy_cmd_callback)
	(vectors_paste_cmd_callback): implement copy/paste of vectors as
	SVG. Fixes bug #316547.

	* app/widgets/gimpvectorstreeview.c
	(gimp_vectors_tree_view_drag_svg): don't add the terminating
	nul-byte of the svg string to svg_data_length, it confuses the XML
	parser.

	* app/actions/vectors-actions.c
	* app/actions/vectors-commands.[ch]
	* menus/vectors-menu.xml: reordered export/import so they are in
	the same order as copy/paste.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: moved toolbar out of main vbox.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* autogen.sh
	* configure.in
	* app/main.c
	* app/widgets/gimptoolbox.c
	* plug-ins/script-fu/scripts/web-browser.scm: changed "The GIMP"
	to "GNU Image Manipulation Program" or just "GIMP".

2005-09-19  Sven Neumann  <sven@gimp.org>

	* app/actions/actions.c: use GTK_STOCK_FILE for File actions.

	* app/actions/dialogs-actions.c
	* plug-ins/gimpressionist/gimpressionist.c
	* plug-ins/print/gimp_main_window.c: use GTK_STOCK_ABOUT for About
	dialogs.

	* app/actions/actions.c
	* app/actions/brushes-actions.c
	* app/actions/channels-actions.c
	* app/actions/channels-commands.c
	* app/actions/colormap-editor-actions.c
	* app/actions/gradients-actions.c
	* app/actions/layers-actions.c
	* app/actions/layers-commands.c
	* app/actions/palette-editor-actions.c
	* app/actions/palettes-actions.c
	* app/actions/patterns-actions.c
	* app/actions/templates-actions.c
	* app/actions/templates-commands.c
	* app/actions/text-editor-actions.c
	* app/actions/tool-options-actions.c
	* app/actions/vectors-actions.c
	* app/actions/vectors-commands.c
	* app/tools/gimptexttool.c
	* app/widgets/gimpcontrollereditor.c
	* app/widgets/gimpcontrollerlist.c
	* plug-ins/flame/flame.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/orientation.c
	* plug-ins/gimpressionist/size.c
	* plug-ins/metadata/interface.c: s/GIMP_STOCK_EDIT/GTK_STOCK_EDIT/

2005-09-19  Michael Natterer  <mitch@gimp.org>

	Did a global s/qmask/quick-mask/:

	* app/actions/qmask-actions.[ch]
	* app/actions/qmask-commands.[ch]
	* app/core/gimpimage-qmask.[ch]
	* menus/qmask-menu.xml
	* themes/Default/images/stock-qmask-off-16.png
	* themes/Default/images/stock-qmask-on-16.png: removed.

	* app/actions/quick-mask-actions.[ch]
	* app/actions/quick-mask-commands.[ch]
	* app/core/gimpimage-quick-mask.[ch]
	* menus/quick-mask-menu.xml
	* themes/Default/images/stock-quick-mask-off-16.png
	* themes/Default/images/stock-quick-mask-on-16.png: added.

	* app/actions/Makefile.am
	* app/actions/actions.c
	* app/core/Makefile.am
	* app/core/core-enums.[ch]
	* app/core/gimpchannel.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-undo.c
	* app/core/gimpimage.[ch]
	* app/core/gimpundo.[ch]
	* app/display/gimpdisplayshell-appearance.c
	* app/display/gimpdisplayshell-callbacks.[ch]
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell.[ch]
	* app/menus/menus.c
	* app/widgets/gimphelp-ids.h
	* libgimpwidgets/gimpstock.[ch]
	* menus/Makefile.am
	* menus/image-menu.xml.in
	* themes/Default/images/Makefile.am: changed accordingly.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_get_new_pixbuf): use
	GTK_STOCK_DIRECTORY for GIMP_THUMB_STATE_FOLDER.

2005-09-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: replaced buttons with toolbar.

2005-09-18  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c (view_zoom_actions): added stock IDs
	and help IDs to the new zoom actions.

	* menus/image-menu.xml.in: removed the <accelerator .../> lines
	again. Actions don't need a visible proxy to be activatable.

2005-09-18  Sven Neumann  <sven@gimp.org>

	* app/actions/view-actions.c (view_zoom_actions): 
	* menus/image-menu.xml.in: added extra Zoom In/Out actions and
	bind them to the Add/Subtract keys on the keypad (bug #316555).

2005-09-17  Michael Natterer  <mitch@gimp.org>

	We don't need two labels for "Toggle Quick Mask":

	* app/actions/qmask-actions.c: removed "qmask-active" action.

	* menus/qmask-menu.xml: use "qmask-toggle" instead.

	* app/actions/actions.c (action_groups): s/QuickMask/Quick Mask/
	Fixes bug #316569.

2005-09-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpactionview.c (gimp_action_view_new): skip
	actions if their name starts with '<' (menu actions created by
	plug-ins have names like "<Image>/Foo/Bar"). Scroll the
	pre-selected action to the center of the view, not to the top.

	* app/widgets/gimpcontrollereditor.c
	(gimp_controller_editor_edit_clicked): make the action editor
	transient to the controller editor. Show the edited event's name
	in the controller editor's header.

	* app/widgets/gimpcontrollerwheel.c: use gimp_get_mod_string()
	instead of hardcoding the modifiers in tons of translatable
	strings. Don't call gettext() in GimpController::get_blurb(),
	the strings are already translated.

	* app/widgets/gimpcontrollerkeyboard.c: removed call to gettext()
	here too.

2005-09-16  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpimagemaptool.c (gimp_image_map_tool_initialize):
	set the imagemap tool dialogs transient to the image window. See
	comments in bug #316521.

2005-09-16  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-utils.[ch] (gimp_widget_set_accel_help):
	mis-named and mis-placed function that sets a widget's tooltip to
	the action's tooltip plus the action's keyboard shortcut.

	* app/widgets/gimptoolbox.c: at least the code is not here any
	more.

	* app/actions/tools-actions.c: use tool_info->help, not ->blurb
	as the action's tooltip so the above works.

2005-09-13  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimpcroptool.c
	* app/tools/gimprectangleoptions.c
	* app/tools/gimprectangletool.c
	* app/tools/gimpnewrectselecttool.c: changed the way we stay inside
	images boundaries so each tool decides whether it does or not.

2005-09-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c (gimp_toolbox_substitute_underscores):
	removed.

2005-09-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-utils.c (gimp_get_mod_name_*): removed
	"<>" around modifiers.

	* app/tools/gimpbucketfilloptions.c
	* app/tools/gimpcolorpickeroptions.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcropoptions.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpflipoptions.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimpmagnifyoptions.c
	* app/tools/gimpmoveoptions.c
	* app/tools/gimpselectionoptions.c
	* app/tools/gimptransformoptions.c
	* app/widgets/gimpeditor.c
	* app/widgets/gimpthumbbox.c: added "()" around the whole modifier
	string where appropriate.

	* app/widgets/gimptoolbox.c (gimp_toolbox_button_accel_changed):
	use gimp_get_mod_string() instead of homebrewn variant of the same
	code.

	* app/widgets/gimpcontrollerkeyboard.c: replaced tons of static
	translatable strings containing modifiers by generated ones using
	gimp_get_mod_string() (traded for some more memory consumption).

2005-09-13  Michael Natterer  <mitch@gimp.org>

	* app/actions/dockable-actions.c (dockable_actions_update): don't
	make "Detach Tab" insensitive if there are other dockbooks in the
	dock.

	* app/widgets/gimpdock.[ch]
	* app/widgets/gimpdockseparator.[ch]: cleanup.

2005-09-13  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: don't modify the rectangle while
	moving, and stick to edges when going out of image boundaries.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/actions/edit-actions.c: use "Undo History" instead of "Undo
	Editor" in user-visible string. Removed wrongly used ellipsis.

	* app/dialogs/offset-dialog.c: added translator comment.

	* app/dialogs/quit-dialog.c: string change.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: allow to disable build of the poppler plug-in.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-close.c (gimp_time_since): use
	ngettext for plural forms.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* modules/colorsel_cmyk.c: added comments for translators.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette-import.c (gimp_palette_import_from_image):
	ignore transparent pixels as suggested in bug #316212.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpbucketfilloptions.c: reorder options as suggested
	in bug #316150.

2005-09-13  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-title.c
	(gimp_display_shell_format_title): use ngettext for plural form.

	* app/dialogs/user-install-dialog.c: string fix (bug #316148).

2005-09-12  Michael Natterer  <mitch@gimp.org>

	Really fix bug #150593:

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpdockseparator.[ch]: new widget implementing the
	droppable separator bar in docks.

	* app/widgets/gimpdock.c: use it and removed local separator
	utility functions.

	* app/widgets/gimptoolbox.c: use GimpDockSeparator API to show/hide
	the label. Expand the separator initially.

	* themes/Default/gtkrc
	* themes/Small/gtkrc: the separator height style property moved
	from GimpDock to GimpDockSeparator.

2005-09-12  Akkana Peck  <akkana@cvs.gnome.org>

	* menus/image-menu.xml.in
	* app/actions/image-actions.c: Move Mode menu from Colors
	back to Image, and rename it back to Mode, as per consensus
	on #gimp.

2005-09-12  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptoolbox.c: set the label style italic. Moved
	separator code into utility functions.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c (gimp_toolbox_book_added)
	(gimp_toolbox_book_removed): if there is no dockbook added, expand
	the separator and add a label telling the user that she can drop
	dockables there. Fixes bug #150593.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.[ch] (enum GimpUndoType): replaced lots of
	bogus strings by properly translatable ones. Many of them are
	fallbacks anyway, but they should be presentable to the user.
	Fixes bug #315964.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpstatusbar.c: don't include "core/gimpmarshal.h",
	replaced '_' by '-' in property name.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/script-fu-interface.c (script_fu_response):
	bail out if the action_area is insensitive. Ignores attempts to
	close the window while the script is running. Fixes bug #308662.

2005-09-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainerbox.c
	(gimp_container_box_set_size_request): take the container's
	border_width into account.

	* app/widgets/gimpcontainergridview.c
	(gimp_container_grid_view_init): make sure GTK_SHADOW_IN is set on
	the scrolled window, not on the viewport, so we get the same
	results for list and grid views when using
	gimp_container_box_set_size_request().

	* app/widgets/gimpcontainerpopup.[ch]: added setters and getters
	for view_type and preview_size, don't allow the preview to grow
	larger than the popup.

	* app/widgets/gimpviewablebutton.[ch]: added "popup-view-type" and
	"popup-preview-size" properties and setters/getters.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewablebox.c: factored out common code in
	preparation of fixing bug #315443.

	* app/widgets/gimpviewablebutton.h (struct GimpViewableButton):
	"popup_preview_size" is a gint, not a GimpViewType.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpiscissorstool.c	(gimp_iscissors_tool_button_release):
	use gimp_draw_tool_on_handle() to figure if we need to close the
	path. Makes sure that the anchor's sensitive area matches its size
	on screen. Fixes bug #134250.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpbase-private.h: GimpUnitVTable -> GimpUnitVtable

	* libgimpbase/gimpbase-private.c
	* libgimp/gimp.c (gimp_main)
	* app/units.c (units_init): changed accordingly.

2005-09-10  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c (gimp_clone_options_gui): moved the
	"Sample merged" toggle below the "Image source" radio button.
	Also fixed capitalization of "Sample merged".

2005-09-10  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprogress.h: match parameter name in .c file.

2005-09-09  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/aa.c
	* plug-ins/common/csource.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gih.c
	* plug-ins/common/gtm.c
	* plug-ins/common/mng.c
	* plug-ins/common/pat.c
	* plug-ins/common/png.c
	* plug-ins/common/pnm.c
	* plug-ins/common/postscript.c
	* plug-ins/common/psp.c
	* plug-ins/common/raw.c
	* plug-ins/common/sunras.c
	* plug-ins/common/tga.c
	* plug-ins/common/tiff.c
	* plug-ins/common/xbm.c
	* plug-ins/common/xpm.c
	* plug-ins/gfli/gfli.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/sgi/sgi.c
	* plug-ins/winicon/icodialog.c: actually call
	gimp_window_set_transient() on save dialogs.
	Really fixes bug #62988.

2005-09-09  Michael Natterer  <mitch@gimp.org>

	Added parent window API to the GimpProgress interface and to
	the libgimp progress stuff. Might look strange, but does
	the right thing in almost all cases (image window, file dialog,
	script-fu dialog etc). Fixes bug #62988.

	* app/core/gimpprogress.[ch]: added GimpProgress::get_window()
	which should return a toplevel window ID if the progress is in a
	window that wants to be the transient parent of plug-in dialogs.

	* app/widgets/gimpwidgets-utils.[ch] (gimp_window_get_native): new
	function which returns the window handle of a GtkWindow's GdkWindow.

	* app/widgets/gimpfiledialog.c: implement ::get_window().

	* app/display/gimpdisplay.[ch]: ditto. Removed window handle API.

	* app/gui/gui-vtable.c: changed accordingly.

	* libgimpbase/gimpbaseenums.[ch] (enum GimpProgressCommand):
	added GIMP_PROGRESS_COMMAND_GET_WINDOW.

	* app/plug-in/plug-in-progress.[ch] (plug_in_progress_get_window):
	new function. Also renamed some functions to match the
	GimpProgress interface, and not the legacy PDB procedure names.

	* tools/pdbgen/pdb/progress.pdb
	* app/core/gimppdbprogress.c: implement get_window() on both
	sides of the wire, keeping backward compatibility (hopefully).

	* libgimp/gimpprogress.[ch]: deprecated gimp_progress_install()
	and added gimp_progress_install_vtable() which takes a vtable with
	padding to be extensible. Added get_window() vtable entry and
	dispatch it accordingly. Also added pulse() which was implemented
	in a hackish way before. Everything is of course backward
	compatible.

	* libgimp/gimpprogressbar.c: inmplement the get_window() stuff
	so a plug-in dialog containing a progress can be the transient
	parent of another dialog in another plug-in.

	* libgimp/gimpui.[ch] (gimp_ui_get_progress_window): new function
	which returns a foreign GdkWindow of this plug-ins progress
	window.

	Renamed gimp_window_set_transient_for_default_display() to
	gimp_window_set_transient() and make it use the progress' window
	handle instead of the display's (which is the right thing to do in
	almost all cases).

	* libgimp/gimp.def
	* libgimp/gimpui.def: add the new functions.

	* tools/pdbgen/enums.pl
	* app/pdb/internal_procs.c
	* app/pdb/progress_cmds.c
	* libgimp/gimpprogress_pdb.[ch]: regenerated.

	* libgimp/gimpexport.c
	* plug-ins/*/*.c: follow API change.

2005-09-09  Tor Lillqvist  <tml@novell.com>

	* gimptool-win32.c.in (get_prefix, maybe_append_exe)
	* libgimpbase/gimpdatafiles.c (is_script): Practice what I preach
	and use g_ascii_strcasecmp() instead of g_strcasecmp().

2005-09-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/print.c (printrc_load): use g_ascii_strcasecmp()
	instead of strcasecmp().

2005-09-09  Michael Natterer  <mitch@gimp.org>

	* configure.in: Removed 'hi' again until all po files are there.

2005-09-09  Rajesh Ranjan  <rajeshkajha@yahoo.com>

	* configure.in: Added 'hi' to ALL_LINGUAS.

2005-09-08  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer-floating-sel.c (floating_sel_boundary): if
	the floating selection has no alpha, manually create BoundSegs of
	its outline instead of calling boundary_find() (which creates a
	boundary of the last channel). Fixes bug #145373.

	* app/widgets/gimplayertreeview.c
	(gimp_layer_tree_view_floating_selection_changed): update all
	layer names' text attributes, not only for layers with alpha.
	Fixes layer name display when making a new layer out of a floating
	selection without alpha.

2005-09-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainertreeview.c: allow to popup the context
	menu from the views' empty area. Fixes bug #314719.

2005-09-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel-combine.c (gimp_channel_combine_ellipse):
	use gimp_rectangle_intersect() instead of just looking at the
	passed in w,h to figure whether nothing needs to be done. While
	the algorithm does nicely with an entirely out-of-image ellipse,
	the channel's bounds were set to a rectangle of zero width or
	height, which caused subsequent calls to gimp_channel_bounds() to
	return broken bounds. Fixes bug #315417.

	(gimp_channel_combine_rect)
	(gimp_channel_combine_mask): use gimp_rectangle_intersect() here
	too instead of the usual unclear CLAMPing on x1,y1,x2,y2.

2005-09-07  Ankit Patel  <ankit644@yahoo.com>

	* configure.in: Added 'gu' to ALL_LINGUAS.

2005-09-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimperrordialog.[ch]: don't set a window icon, the
	dialog should be transient anyway.

	* app/dialogs/dialogs-constructors.c: changed accordingly.

2005-09-06  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/paint-funcs/paint-funcs-generic.h (blend_pixels): change 
	variables from unsigned to signed -- fixes problem described
	in comment 17 of bug #163721.
	
2005-09-06  Sven Neumann  <sven@gimp.org>

	* app/dialogs/stroke-dialog.c (stroke_dialog_new): use
	gtk_object_sink() to destroy a floating widget.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* plug-ins: Call gimp_window_set_transient_for_default_display()
	for most plug-in dialogs. Not yet done are load and save dialogs
	and dialogs created from language bindings.

2005-09-05  Sven Neumann  <sven@gimp.org>

	Address bug #307971:

	* app/core/gimp-gui.[ch]
	* app/display/gimpdisplay.[ch]
	* app/gui/gui-vtable.c
	* tools/pdbgen/pdb/display.pdb: added PDB function to obtain a
	window handle on an image display.

	* app/pdb/display_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpdisplay_pdb.[ch]: regenerated.

	* libgimp/gimpui.[ch]: added functions to set a GtkWindow transient
	to an image display.

	* plug-ins/common/gauss.c: use the new function exemplarily.

	* libgimp/gimp.def
	* libgimp/gimpui.def: updated.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* app/actions/edit-actions.c
	* app/menus/menus.c
	* app/widgets/gimpundoeditor.c
	* menus/Makefile.am
	* menus/undo-editor-menu.xml: added menu for undo editor.

2005-09-05  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/edit.pdb: applied patch from David Gowers which
	adds "gimp-edit-named-delete". Addresses bug #315130. Added
	"gimp-edit-named-rename" additionally.

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/edit_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpedit_pdb.[ch]: regenerated.

2005-09-05  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-edit.c: don't let named cut/copy affect the global
	buffer. Fixes bug #315225. Also make "Global Buffer" translatable.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* app/core/gimp.[ch]
	* app/core/gimpimage-new.c: removed the confusing and redundant
	feature of having the New Image dialog default to the size of the
	global buffer. Please use Paste as New instead. Fixes bug #315106.

2005-09-05  Sven Neumann  <sven@gimp.org>

	* app/tools/gimprectangletool.c: terminate variable argument list.
	Fixes bug #315255.

2005-09-05  Michael Natterer  <mitch@gimp.org>

	* app/actions/edit-actions.c
	* app/actions/edit-commands.[ch]
	* menus/image-menu.xml.in: applied modified patch from David
	Gowers which adds an "edit-named-copy-visible" actions and its
	menu item. Addresses bug #315130.

2005-09-04  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangleoptions.c: evil => GIMP_MAX_IMAGE_SIZE.

2005-09-04  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: stay within image boundaries.

2005-09-04  Michael Natterer  <mitch@gimp.org>

	Cleaned up and fixed the order in which default tool options and
	user context values are initialized, and added loading / saving of
	the global user context.  Fixes bug #165078.

	* app/core/Makefile.am
	* app/core/gimp-contexts.[ch]: new files which manage the global
	contexts. Contains gimp_contexts_init/exit/load/save/clear().

	* app/core/gimp.c: use the new init/exit functions instead of
	implementing the stuff here.

	* app/tools/gimp-tools.c: load/save/clear the user context from
	here so it follows the same logic as the tool options. Reset all
	tool options before loading the user context and copy the user
	context's property to all tool options before loading tool
	options.

	* app/core/gimptoolinfo.c (gimp_tool_info_new): don't initialize
	the tool options with the users context's properties. It's way too
	early here and they will be overwritten later.

	* app/widgets/gimpdevices.c (gimp_devices_restore): initialize all
	device contexts with the user context's properties before loading
	the devices and copying the active one back to the user context.

2005-09-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/coffee.scm
	* plug-ins/script-fu/scripts/fade-outline.scm
	* plug-ins/script-fu/scripts/glossy.scm
	* plug-ins/script-fu/scripts/gradient-bevel-logo.scm
	* plug-ins/script-fu/scripts/select-to-pattern.scm: string fixes as
	pointed out in bug #315211.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/base/temp-buf.c (temp_buf_resize): do new_size calculation
	only when needed.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintcore.c (gimp_paint_core_get_orig_image)
	(gimp_paint_core_get_orig_proj): replaced manual calculation of
	the offset of a pixel in a tile (marked as /* dubious... */ for a
	reason) by simply using the offset parameters of tile_data_pointer().

2005-09-03  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.[ch]
	* app/tools/gimprectangleoptions.[ch]: code cleanup, replace
	virtualization functions with interface properties.

	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpnewrectselecttool.[ch]
	* app/tools/gimpcropoptions.[ch]
	* app/tools/gimpnewrectselectoptions.[ch]: code cleanup, use said
	interface properties.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/base/pixel-surround.c: s/row_stride/rowstride/g.

2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/base/pixel-region.[ch]: some general cleanup.

	(pixel_region_init_temp_buf)
	(pixel_region_init_data): new functions which initialize pixel
	regions on TempBufs and on raw contiguous arrays of pixel data.

	(pixel_region_configure): fixed a bug that has probably been there
	forever: when processing contiguous (non-tiled) data, interpret
	the original x and y coordinates of the region as offsets into
	the data. Before this fix, the initial x and y were simply ignored
	(by using them in a broken way), thus always forcing the upper
	left corner of the region being the beginning of the passed data.

	Lots of code was working around this problem by setting the
	pixel_region's data pointer to the proper starting pixel of the
	region in the middle the buffer.

	* libgimp/gimppixelrgn.c: some general cleanup.

	(gimp_pixel_rgn_configure): same fix as above. Fortunately, nobody
	seems to know that libgimp pixel regions can be used on arrays of
	data, just as core ones. Only two plug-ins were using this
	feature, and they are antique and written by spencer and federico,
	respectively. They both don't use offsets into the buffers and are
	not affected by this change. It's highly unlikely that anybody out
	there knows/uses this feature, so it can IMHO be safely changed.

	* app/base/temp-buf.c
	* app/core/gimpbuffer.c
	* app/core/gimpdrawable-combine.c
	* app/core/gimpdrawable-preview.c
	* app/core/gimpimage-preview.c
	* app/core/gimplayer.c
	* app/paint/gimpbrushcore.c
	* app/paint/gimpclone.c
	* app/paint/gimpconvolve.c
	* app/paint/gimpdodgeburn.c
	* app/paint/gimppaintcore.c
	* app/paint/gimpsmudge.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimppainttool.c: use the pixel_region_init_foo()
	functions instead of initializing regions of TempBufs and raw data
	manually. Removed lots of workarounds for the broken offset
	handling. The changed places of code are much more readable now.

2005-09-03  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimphuesaturationtool.c
	* app/tools/gimptextoptions.c: minor string changes.

2005-09-03  Seth Burgess <sjburges@gimp.org>
	
	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcolorizetool.c
	* app/tools/gimphuesaturationtool.c: change the update policy to 
	GTK_UPDATE_CONTINUOUS for considerably better responsiveness
	
2005-09-03  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-edit.[ch] (gimp_edit_paste_as_new): don't create a
	display here.

	(gimp_edit_named_cut)
	(gimp_edit_named_copy)
	(gimp_edit_named_copy_visible): new functions containing named
	buffer wrappers around the functions affecting the global buffer
	only.

	* app/actions/edit-commands.c: use the new functions instead of
	implementing them here, create a display for the image returned
	by paste as new.

	* app/actions/buffers-commands.c
	* app/widgets/gimptoolbox-dnd.c: create displays here too.

	* tools/pdbgen/pdb/edit.pdb: added wrappers for paste as new and
	wrappers for all the cut/copy/paste named stuff.
	Fixes bug #315130. Cleaned up and de-obfuscated.

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/edit_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpedit_pdb.[ch]: regenerated.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainergridview.c
	* app/widgets/gimpcontainertreeview.c: allow to popup menus on
	empty container views using the standard Shift-F10 keybinding.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* modules/Makefile.am: applied patch that fixes a build issue on
	Cygwin (bug #314893).

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptextoptions.c
	* app/widgets/gimpwidgets-utils.[ch]: dropped the labels from text
	tool options that have icons. Reduces visual clutter.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_expose): draw guides over the grid.

2005-09-02  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c (test_clipboard_copy_callback): don't
	quit the main loop after transferring the data to GTK, it needs a
	running main loop to get the chunks transferred to X.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* app/dialogs/convert-dialog.c
	* app/dialogs/image-merge-layers-dialog.c
	* app/dialogs/layer-add-mask-dialog.c
	* app/dialogs/offset-dialog.c: use verbs instead of "OK" in the
	confirmative dialog button.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* AUTHORS
	* app/dialogs/authors.h: regenerated.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpwrite.c
	* plug-ins/common/aa.c
	* plug-ins/common/csource.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gif.c
	* plug-ins/common/gih.c
	* plug-ins/common/gtm.c
	* plug-ins/common/mail.c
	* plug-ins/common/mng.c
	* plug-ins/common/pat.c
	* plug-ins/common/png.c
	* plug-ins/common/pnm.c
	* plug-ins/common/postscript.c
	* plug-ins/common/psp.c
	* plug-ins/common/raw.c
	* plug-ins/common/sunras.c
	* plug-ins/common/svg.c
	* plug-ins/common/tga.c
	* plug-ins/common/tiff.c
	* plug-ins/common/xbm.c
	* plug-ins/common/xpm.c
	* plug-ins/fits/fits.c
	* plug-ins/gfli/gfli.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/script-fu/script-fu-server.c
	* plug-ins/sgi/sgi.c
	* plug-ins/winicon/icodialog.c
	* plug-ins/xjt/xjt.c: use verbs instead of "OK" in the
	confirmative dialog button.

2005-09-02  Tor Lillqvist  <tml@novell.com>

	* authors.xml: Mark people as documenter or artist, based on
	ChangeLogs and other information. Remove translator names, they
	are in the respective .po files.

2005-09-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c (load_image)
	* plug-ins/jpeg/jpeg-save.c (save_image): removed tile cache again,
	it doesn't help for the way the plug-in accesses the pixels.

2005-09-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette.[ch]: reverted, it duplicates existing
	functionality.

	* app/core/gimppalette-import.c
	(gimp_palette_import_from_indexed_image): name the colors using
	their index in the colormap.

2005-09-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette.[ch]: added gimp_palette_new_from_colormap().

2005-09-01  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c
	* libgimp/gimpprocbrowserdialog.c: use ngettext() for plural forms
	(bug #314764).

2005-08-31  Sven Neumann  <sven@gimp.org>

	* libgimp/gimp.c (gimp_run_procedure2, gimp_run_procedure):
	improved documentation.

2005-08-31  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/preferences-dialog.c
	(prefs_check_button_add_with_icon): added optional size group
	parameter and add the icon to the group.

	(prefs_dialog_new): align the icons on the tool options and
	toolbox pages.

2005-08-29  Michael Natterer  <mitch@gimp.org>

	The previous commit added tons of code just to completely break
	clone align behavior. Reverted lots of the changes and do the
	sample-merged stuff at the innermost place (gimp_clone_motion).
	This change also enables changing sample-merged between paint
	strokes.

	* app/paint/gimpclone.[ch] (struct GimpClone): changed member
	"src_pickable" back to "src_drawable".

	(gimp_clone_paint): completely reverted.

	(gimp_clone_motion): do the drawable/projection -> pickable
	stuff and drawable offset handling here.

	Fixed signal handling to connect to the drawable's "removed"
	signal (not "disconnect", eek). Disconnect from the signal once
	the drawable has been removed.

	* app/tools/gimpclonetool.c: changed accordingly.

2005-08-29  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/gif.c: added toggles which allow to always use
	the frame delay and disposal entered in the dialog, overriding the
	ones specified in the layer names. Fixes bug #314726. Also fixed
	missing and non-working mnemonics.

2005-08-29  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.c: fix canceling the tool.

2005-08-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/poppler.c: retitled dialog to "Import from PDF"
	and changed the confirmative button label to "Import".

2005-08-28  Michael Natterer  <mitch@gimp.org>

	Implement "Sample Merged" for the clone tool. Fixes bug #123627.

	* app/paint/gimppaintcore.[ch] (struct GimpPaintCore): added
	members "saved_proj_tiles" which stores the unmodified projection,
	"orig_proj_buf" which stores the unmodified temp paint application
	buf and "use_saved_proj" which controls if all the additional
	stuff should be allocated and managed.

	(gimp_paint_core_start): allocate the saved_proj_tiles if needed.

	(gimp_paint_core_get_orig_proj): new function like
	gimp_paint_core_get_orig_image() which returns unmodified
	projection pixels for paint application.

	(gimp_paint_core_validate_saved_proj_tiles): new function like
	gimp_paint_core_validate_undo_tiles() which copies the tiles that
	will be dirtied to saved_proj_tiles.

	(gimp_paint_core_paste): call above validate_saved_proj_tiles() so
	projection tiles are saved before dirtying them.

	* app/paint/gimpclone.[ch]: replaced member src_drawable by
	src_pickable and use the image's projection if sample_merged it
	TRUE. Adjust src offsets accordingly and use GimpPaintCore's new
	get_orig_proj() API to get the src pixels.

	* app/paint/gimpcloneoptions.[ch]: added boolean "sample_merged"
	property.

	* app/tools/gimpclonetool.c: follow GimpClone's src_drawable ->
	src_pickable change.

	(gimp_clone_tool_button_press): set the paint_core's
	"use_saved_proj" boolean before chaining up.

	(gimp_clone_options_gui): add a "Sample Merged" toggle button.

2005-08-28  Manish Singh  <yosh@gimp.org>

	* m4macros/pythondev.m4: python headers on Win32 don't live in a
	versioned subdir. Handle that case.

2005-08-27  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewrendererpalette.c
	(gimp_view_renderer_palette_init): initialize renderer->columns
	to != 0 to avoid floating point exceptions on initial layout
	calculation. Fixes bug #314663.

2005-08-27  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/common/gradmap.c: applied a patch by David Gowers,
	which makes palette-map behave the same as gradient-map.
	Fixes bug #313458.

2005-08-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c (load_image)
	* plug-ins/jpeg/jpeg-save.c (save_image): set tile cache.

2005-08-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/svg.c: deal with SVG API change. This is a
	compile-time check and thus somewhat ugly because it requires a
	recompile of the plug-in when updating librsvg. Fixes bug #314400.

2005-08-26  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/about-dialog.c (about_dialog_add_logo): move the
	logo to the top of the dialog.

2005-08-26  Tor Lillqvist  <tml@novell.com>

	* app/plug-in/plug-in.c (plug_in_prep_for_exec, plug_in_open):
	Instead of passing a child_setup function whose body is ifdeffed
	out on Win32 to g_spawn_async(), pass NULL for child_setup on
	Win32. Newer g_spawn_async() implementations on Win32 warn if
	child_setup functions are attempted to be used, as they don't make
	sense because without any fork(), they are called in the parent
	process.

2005-08-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/blend-anim.scm: removed newline from
	description.

2005-08-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/sel2path/curve.c (new_curve_list)
	* plug-ins/sel2path/fit.c (split_at_corners) 
	* plug-ins/winicon/icosave.c (ico_init_data): initialize variables.

2005-08-25  Michael Natterer  <mitch@gimp.org>

	* configure.in: define FOO_DISABLE_DEPRECATED for the new stable
	versions of GTK+ and Pango.

	Check for poppler >= 0.4.1, they did another API change.

	* plug-ins/common/poppler.c: and some more #ifdefs to
	poppler_page_render_to_pixbuf().

2005-08-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpview.[ch]: minor code and formatting cleanup. 

2005-08-25  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpscanconvert.c: fixed API docs.

2005-08-25  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimputils.h (gimp_canonicalize_identifier): sync
	parameter name with implementation to please gtk-doc.

2005-08-24  Tor Lillqvist  <tml@novell.com>

	Make GIMP work on Win32 even if installed in a path containing
	random non-ASCII characters.

	* libgimpbase/gimpenv.c (gimp_toplevel_directory): [Win32] Use
	wide-char API on NT-based Windowses. Keep the toplevel directory
	name in UTF-8. The rest of GIMP assumes it is UTF-8 anyway, and
	for instance passes file names constructed from it to g_open().

	* app/plug-in/plug-in.c (plug_in_open): On Win32, if compiled
	against GLib < 2.8.2, convert the pathname arguments passed to
	g_spawn_async() to locale charset (system codepage). The
	g_spawn*() functions in GLib < 2.8.2 take system codepage
	arguments and not UTF-8.

2005-08-24  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/paint-funcs/paint-funcs-generic.h (blend_pixels):
	Change blending algorithm to fix misbehavior of smudge
	tool, should fix bug #163721.

2005-08-24  Sven Neumann  <sven@gimp.org>

	* app/actions/image-commands.c
	* app/actions/layers-commands.c
	* app/dialogs/image-scale-dialog.c
	* app/dialogs/resize-dialog.[ch]: remember the selected unit for
	scale and resize dialogs on a per-image basis (bug #312950).

2005-08-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/i26-gunya2.scm
	* plug-ins/script-fu/scripts/ripply-anim.scm: reverted the last
	change...

	* plug-ins/common/displace.c: ... and fixed the plug-in instead.
	The number of parameters must not change. Provide a new procedure
	for polar mode instead.

2005-08-24  Tor Lillqvist  <tml@novell.com>

	* plug-ins/script-fu/scripts/i26-gunya2.scm
	* plug-ins/script-fu/scripts/ripply-anim.scm: Add the new last
	parameter to plug-in-displace calls. (See entry for displace.c
	from 2005-02-10 below.)

2005-08-24  Sven Neumann  <sven@gimp.org>

	* configure.in: fixed quotes in AC_DEFINE() macros.

2005-08-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/iwarp.c (iwarp_dialog): added a hint on how to
	use this plug-in.

2005-08-23  Sven Neumann  <sven@gimp.org>

	* [lots of files]: applied capitalization patches contributed by
	Stephan Binner. Fixes bug #309657.

2005-08-23  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: minor optimizations.

	* app/actions/gradients-actions.c
	* app/actions/patterns-actions.c
	* plug-ins/metadata/interface.c: applied patch from Stephan Binner
	that fixes wrong use of ellipsis (bug #309657).

2005-08-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sample_colorize.c: use GTK_STOCK_APPLY and fixed
	capitalization in button label.

2005-08-23  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/poppler.c: added loading of pages as images.
	Addresses bug #138495.

2005-08-22  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/sample_colorize.c (smp_dialog): applied patch
	from David Gowers that adds mnemonics to all action area
	buttons. Fixes bug #314191.

2005-08-22  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: converted comments to gtk-doc
	inline API docs.

2005-08-22  Sven Neumann  <sven@gimp.org>

	* tools/test-clipboard.c: added --version command-line option.

2005-08-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpselectionoptions.c (gimp_selection_options_gui):
	the "Antialias" toggle got lost, resurrect it.

2005-08-21  Jens Seidel  <jseidel@cvs.gnome.org>

	* app/paint/gimpconvolve.c
	* app/tools/gimpiscissorstool.c
	* app/vectors/gimpvectors-import.c
	* libgimp/gimp.c
	* m4macros/gimp-2.0.m4
	* m4macros/gimpprint.m4
	* plug-ins/common/wind.c
	* plug-ins/fits/fitsrw.c
	* plug-ins/metadata/xmp-model.c
	* plug-ins/uri/uri-backend-wget.c: Fixed the typo
	"occured" (also in all effected PO files to avoid fuzzyness)

2005-08-21  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppencil.h
	* app/paint/gimppenciloptions.[ch]
	* app/widgets/widgets-types.h
	* app/widgets/gimptooldialog.h: don't simply typedef object
	instance structs which add no members as their parent instance
	structs. Give them their own instance structs.  Fixes gtk-doc
	confusion.

2005-08-21  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.h: removed HALF_WAY define, it's
	BOUNDARY_HALF_WAY now.

2005-08-20  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_proc_changed):
	when looking for the file extension, only look at the part after
	the last directory separator.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.[ch]: even more cleanup, replaced informal
	comments by API docs.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.[ch]: renamed puclic functions, defines and
	enums to live in a proper "boundary" namespace. Cleaned up and
	simplified internal code even more.

	* app/core/gimpchannel.c
	* app/core/gimpdrawable-stroke.c
	* app/core/gimplayer-floating-sel.c
	* app/paint/gimppaintcore-stroke.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimppainttool.c: changed accordingly.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.c: rename local "ns" variables to "num_segs"
	now that the global "num_segs" is gone.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.c: moved the entire internal state of boundary
	creation and sorting from <eek>global variables</eek> to a new
	"Boundary" struct that needs to be newly allocated for each
	boundary. Yes this allocates and frees memory more often than
	before but the old code was simply one big eek.

2005-08-20  Michael Natterer  <mitch@gimp.org>

	* app/base/boundary.c (sort_boundary): look at the passed "ns"
	variable instead of at the global "num_segs" one to figure if the
	passed array of BoundSegs is empty. Fixes bug #313922 at its root.

2005-08-19  Akkana Peck  <akkana@cvs.gnome.org>

	* app/tools/gimpdrawtool.c: Fix the parameter check at the
	beginning of gimp_draw_tool_draw_boundary, to fix the crash
	described in bug 313922.

2005-08-20  Sven Neumann  <sven@gimp.org>

	* authors.xml: exemplarily added artist and documenter roles to
	some contributors.

	* app/dialogs/authors.xsl: generate arrays for the new roles.

	* app/dialogs/authors.h: regenerated.

	* app/dialogs/about-dialog.c: pass the new arrays to the
	GtkAboutDialog constructor.

2005-08-20  Sven Neumann  <sven@gimp.org>

	* authors.dtd
	* authors.xml: simplified by making dc: the default namespace.

	* authors.xsl
	* app/dialogs/authors.xsl: match the toplevel element in the dc:
	namespace.

2005-08-19  Sven Neumann  <sven@gimp.org>

	* authors.dtd
	* authors.xml: use elements and attributes from Dublin Core.

	* authors.xsl
	* app/dialogs/authors.xsl: changed accordingly.

	* app/dialogs/authors.h: regenerated.

	* app/dialogs/about-dialog.c: Peter and Spencer are now part of
	the list of authors (but listed before everyone else).

2005-08-19  Sven Neumann  <sven@gimp.org>

	* app/dialogs/about-dialog.c: set the role and window position.

2005-08-19  Michael Natterer  <mitch@gimp.org>

	* app/config/gimpguiconfig.c (DEFAULT_WEB_BROWSER): changed to
	"mozilla-firefox %s" (was "mozilla %s").

2005-08-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/curve_bend.c
	* plug-ins/common/plugin-browser.c
	* plug-ins/helpbrowser/dialog.c
	* plug-ins/imagemap/imap_main.c
	* plug-ins/jpeg/jpeg-load.c: use canonical procedure names with
	gimp_run_procedure().

2005-08-19  Sven Neumann  <sven@gimp.org>

	* app/dialogs/authors.xsl: generate a NULL terminated array.

	* app/dialogs/authors.h: regenerated.

	* app/dialogs/about-dialog.[ch]: embedded the about box into a
	GtkAboutDialog.

	* app/dialogs/dialogs-constructors.c: pass a GimpContext to
	about_dialog_create().

2005-08-19  Nathan Summers  <rock@gimp.org>

	* plugins/common/poppler.c: removed some extraneous commas.

2005-08-19  Michael Natterer  <mitch@gimp.org>

	Poppler 0.4 changes the API of poppler_page_render_to_pixbuf():

	* configure.in: define HAVE_POPPLER_0_4 if it is available.

	* plug-ins/common/poppler.c: added some #ifdefs to compile with
	both the new and old version. Can be removed in some weeks
	propably.

2005-08-18  Michael Natterer  <mitch@gimp.org>

	* cursors/Makefile.am
	* cursors/gimp-tool-cursors.xcf
	* cursors/modifier-join.png
	* cursors/xbm/modifier-join-mask.xbm
	* cursors/xbm/modifier-join.xbm: images for a "join" cursor modifier.

	* app/widgets/widgets-enums.h
	* app/widgets/gimpcursor.c: add the cursor.

	* app/tools/gimpvectortool.c: use it for connecting strokes.
	Fixes bug #313252.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: removed reference to SIOX
	algorithm from tooltip, it's an implementation detail.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: updated year in copyright.

	* libgimpwidgets/gimpwidgets-private.c (gimp_widgets_init):
	register the default window icons in descending sizes.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimptemplate.c: go back to using dpi as the default
	resolution unit.

	* app/core/gimp-utils.[ch]: moved the code to determine the unit
	from the locale settings here as gimp_get_default_unit().

	* app/dialogs/print-size-dialog.c
	* app/widgets/gimpimagepropview.c: use the unit returned by the
	new function to display the print size (bug #107497).

2005-08-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/procedure-browser.c (run): reverted last change.

	* libgimp/gimpprocbrowserdialog.[ch]: emit new signal "row-activated"
	instead of emitting "response" with GTK_RESPONSE_APPLY.

	* plug-ins/pygimp/procbrowser.c
	* plug-ins/script-fu/script-fu-console.c: connect to "row-activated"
	and call gtk_dialog_response() with GTK_RESPONSE_APPLY.

2005-08-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/procedure-browser.c (run): only close the dialog
	on GTK_RESPONSE_CLOSE.

2005-08-18  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/animoptimize.c
	* plug-ins/common/pnm.c
	* plug-ins/metadata/interface.c
	* plug-ins/metadata/metadata.c: some forgotten canonical names.

	* plug-ins/metadata/Makefile.am
	* plug-ins/metadata/metadata.h: new header containing the
	procedure name #defines for metadata.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* configure.in: check for langinfo.h and _NL_MEASUREMENT_MEASUREMENT.

	* app/core/gimptemplate.c: try to determine the default unit from
	the locale settings. Supposed to fix bug #107497.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.c (smooth_region): fixed
	initialization of row array.

	* app/base/siox.c: minor cleanups.

2005-08-17  Tor Lillqvist  <tml@novell.com>

	* plug-ins/winsnap/Makefile.am (LDADD): Use $(WINDRES) to handle
	cross-compilation.

	* plug-ins/winsnap/winsnap.rc: Refer to the .ico files in
	lowercase, in case cross-compiling.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: applied patch by Kristian Jantz. Reimplements
	find_max_blob() so that it needs less memory. Slows things down a
	bit, but that can be improved later.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/grid.c: update the progress less frequently.

2005-08-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.c (gimp_palette_view_focus): when
	focussing the widget, select the palette's first entry if none is
	selected. Enables cursor navigation after tabbing in.

2005-08-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/deinterlace.c: fixed boundary conditions.

2005-08-16  Akkana Peck  <akkana@cvs.gnome.org>

	* plug-ins/script-fu/scripts/grid-system.scm: Rename "Grid" to
	"Divisions" to avoid confusion with the existing grid plug-in;
	move into Render->Pattern along with the other Grid plug-in.

2005-08-17  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.c (gimp_palette_view_focus): return
	FALSE on TAB_FORWARD and TAB_BACKWARD. Enables tabbing out of the
	widget.

2005-08-17  Michael Natterer  <mitch@gimp.org>

	* app/actions/layers-actions.c
	* app/actions/plug-in-actions.c
	* app/actions/image-actions.c: moved all color menu actions to
	image-actions.c because that's the place where we collect menu
	actions of menus that don't have its own foo-actions.c file.
	Renamed them all to "colors-foo-menu".

	* menus/image-menu.xml.in: changed accordingly.

2005-08-16  Akkana Peck  <akkana@cvs.gnome.org>

	* menus/image-menu.xml.in
	* app/actions/image-actions.c
	* app/actions/plug-in-actions.c
	* plug-ins/common/compose.c
	* plug-ins/common/decompose.c
	* plug-ins/common/vinvert.c: Remove erroneous extra *compose
	entries, and move *compose into a Components submenu (re IRC
	discussion); move Value Invert to near Invert (suggested by mitch)

2005-08-16  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainerview.[ch]: added utility function
	gimp_container_view_install_properties() to reduce code duplication
	in classes implementing this interface.

	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontainercombobox.c
	* app/widgets/gimpcontainerentry.c: changed accordingly.

2005-08-16  Sven Neumann  <sven@gimp.org>

	* configure.in
	* plug-ins/uri/Makefile.am: redid the libgnomeui and gnome-vfs
	checks so that pkg-config combines the compiler and linker flags
	instead of concatenating them in the Makefile.

2005-08-15  Akkana Peck  <akkana@cvs.gnome.org>

	* app/actions/image-actions.c
	* app/tools/gimpaligntool.c
	* menus/image-menu.xml.in
	* plug-ins/common/AlienMap2.c
	* plug-ins/common/autostretch_hsv.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/c_astretch.c
	* plug-ins/common/ccanalyze.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/color_enhance.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/compose.c
	* plug-ins/common/decompose.c
	* plug-ins/common/exchange.c
	* plug-ins/common/fp.c
	* plug-ins/common/gradmap.c
	* plug-ins/common/hot.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/normalize.c
	* plug-ins/common/retinex.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/smooth_palette.c
	* plug-ins/common/vinvert.c
	* plug-ins/rcm/rcm.c
	* plug-ins/script-fu/scripts/hsv-graph.scm: Move all color-related
	functions from the Image and Filters menus to a new toplevel
	Colors menu (as discussed in bug 116145).

2005-08-16  Sven Neumann  <sven@gimp.org>

	* configure.in: define G_DISABLE_DEPRECATED unless glib >= 2.9.0.

	* app/core/gimpscanconvert.c: added missing include.

	* app/text/gimp-fonts.c 
	* libgimp/gimp.c 
	* libgimpwidgets/gimpcolornotebook.c
	* plug-ins/helpbrowser/dialog.c: fixed signedness warnings.

	* plug-ins/bmp/bmpread.c (ReadBMP): initialize variable.

2005-08-15  Manish Singh  <yosh@gimp.org>

	* configure.in: fix reversed libgnomeui conditional test for
	the AC_DEFINE.

2005-08-16  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/tga.c
	* plug-ins/common/threshold_alpha.c
	* plug-ins/common/tiff.c
	* plug-ins/common/tile.c
	* plug-ins/common/tileit.c
	* plug-ins/common/tiler.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/unsharp.c
	* plug-ins/common/video.c
	* plug-ins/common/vinvert.c
	* plug-ins/common/vpropagate.c
	* plug-ins/common/warp.c
	* plug-ins/common/waves.c
	* plug-ins/common/webbrowser.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/common/wind.c
	* plug-ins/common/winprint.c
	* plug-ins/common/wmf.c
	* plug-ins/common/xbm.c
	* plug-ins/common/xpm.c
	* plug-ins/common/xwd.c
	* plug-ins/common/zealouscrop.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* configure.in: check for libgnomeui-2.0. Added version
	requirements (>= 2.10.0) for libgnomeui and gnome-vfs.

	* plug-ins/uri/Makefile.am
	* plug-ins/uri/uri-backend-gnomevfs.c: if libgnomeui is available,
	call gnome_authentication_manager_init() so the URI plug-in can
	access sites that require authentication.

	(this needs more hacking so packagers can build both versions of
	the uri plug-in at the same time, since they will want to make the
	libgnomeui dependency optional)

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/randomize.c
	* plug-ins/common/raw.c
	* plug-ins/common/retinex.c
	* plug-ins/common/ripple.c
	* plug-ins/common/rotate.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/common/scatter_hsv.c
	* plug-ins/common/screenshot.c
	* plug-ins/common/sel_gauss.c
	* plug-ins/common/semiflatten.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/shift.c
	* plug-ins/common/sinus.c
	* plug-ins/common/smooth_palette.c
	* plug-ins/common/snoise.c
	* plug-ins/common/sobel.c
	* plug-ins/common/softglow.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/spread.c
	* plug-ins/common/struc.c
	* plug-ins/common/sunras.c
	* plug-ins/common/svg.c: canonicalize procedure and parameter
	names. Misc cleanups.

2005-08-15  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/sample_colorize.c (smp_constrain): add an extra
	user data arg, so we fit the GimpDrawableConstraintFunc type.

2005-08-15  Karine Delvare  <kdelvare@nerim.net>

	* app/tools/gimprectangletool.[ch]
	* app/tools/gimprectangleoptions.[ch]: transform into an interface.
	
	* app/tools/gimpcroptool.[ch]
	* app/tools/gimpnewrectselecttool.[ch]: use the rectangletool interface.
	
	* app/tools/gimpcropoptions.[ch]
	* app/tools/gimpnewrectselectoptions.[ch]: use the rectangleoptions
	interface.
	
	* app/tools/Makefile.am: added gimpnewrectselectionoptions.[ch]

2005-08-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/rcm/rcm_callback.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/rcm/rcm_misc.[ch]: redraw the previews if their size
	changes. Fixes bug #172284.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/CML_explorer.c
	* plug-ins/common/cartoon.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/colorify.c
	* plug-ins/common/compose.c
	* plug-ins/common/csource.c
	* plug-ins/flame/flame.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfli/gfli.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/sgi/sgi.c: fix indentation.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/papertile.c
	* plug-ins/common/pat.c
	* plug-ins/common/pcx.c
	* plug-ins/common/photocopy.c
	* plug-ins/common/pix.c
	* plug-ins/common/pixelize.c
	* plug-ins/common/plasma.c
	* plug-ins/common/plugin-browser.c
	* plug-ins/common/png.c
	* plug-ins/common/polar.c
	* plug-ins/common/procedure-browser.c
	* plug-ins/common/psd.c
	* plug-ins/common/psd_save.c
	* plug-ins/common/psp.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/poppler.c: make sure the opened image has a
	filename that cannot be saved (ok, we don't have a PDF save
	plug-in, but PS does the same and this way it's consistent).

	* plug-ins/common/poppler.c
	* plug-ins/common/postscript.c: canonicalize procedure and
	parameter names.

2005-08-15  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/postscript.c: applied patch from Felix Riemann
	that adds page counting and a page selector widget to the load
	dialog.  Fixed some minor issues in the patch and added code that
	names layers and images after the document's pages. Disable undo
	on all created images and set them clean before returning them.
	Addresses bug #138495.

2005-08-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd_save.c: fixed signedness issue.

2005-08-14  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/jigsaw.c
	* plug-ins/common/laplace.c
	* plug-ins/common/lic.c
	* plug-ins/common/mail.c
	* plug-ins/common/mapcolor.c
	* plug-ins/common/max_rgb.c
	* plug-ins/common/mblur.c
	* plug-ins/common/mng.c
	* plug-ins/common/mosaic.c
	* plug-ins/common/neon.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/nlfilt.c
	* plug-ins/common/noisify.c
	* plug-ins/common/normalize.c
	* plug-ins/common/nova.c
	* plug-ins/common/oilify.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  Manish Singh  <yosh@gimp.org>

	* app/core/gimpimage-preview.c (gimp_image_get_new_preview): if the
	offsets of the layer are such that they are just on the border of
	the image, detect that and bail instead of trying to make a
	sub-preview with a 0 dimension. Fixes bug #312144.

2005-08-14  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/gauss.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c
	* plug-ins/common/gif.c
	* plug-ins/common/gifload.c
	* plug-ins/common/gih.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/glob.c
	* plug-ins/common/gqbist.c
	* plug-ins/common/gradmap.c
	* plug-ins/common/grid.c
	* plug-ins/common/gtm.c
	* plug-ins/common/guillotine.c
	* plug-ins/common/header.c
	* plug-ins/common/hot.c
	* plug-ins/common/illusion.c
	* plug-ins/common/iwarp.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/decompose.c
	* plug-ins/common/deinterlace.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/destripe.c
	* plug-ins/common/dicom.c
	* plug-ins/common/diffraction.c
	* plug-ins/common/displace.c
	* plug-ins/common/dog.c
	* plug-ins/common/edge.c
	* plug-ins/common/emboss.c
	* plug-ins/common/engrave.c
	* plug-ins/common/exchange.c
	* plug-ins/common/film.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/fp.c
	* plug-ins/common/fractaltrace.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  DindinX  <dindinx@gimp.org>

	* plug-ins/common/threshold_alpha.c: added a preview, and some minor
	cleanups.

2005-08-13  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/AlienMap2.c
	* plug-ins/common/CEL.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/aa.c
	* plug-ins/common/align_layers.c
	* plug-ins/common/animationplay.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/autocrop.c
	* plug-ins/common/autostretch_hsv.c
	* plug-ins/common/blinds.c
	* plug-ins/common/blur.c
	* plug-ins/common/borderaverage.c
	* plug-ins/common/bumpmap.c
	* plug-ins/common/c_astretch.c
	* plug-ins/common/cartoon.c
	* plug-ins/common/ccanalyze.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/checkerboard.c
	* plug-ins/common/color_enhance.c
	* plug-ins/common/colorify.c
	* plug-ins/common/colortoalpha.c
	* plug-ins/common/compose.c
	* plug-ins/common/compressor.c
	* plug-ins/common/convmatrix.c
	* plug-ins/common/csource.c
	* plug-ins/common/cubism.c
	* plug-ins/common/curve_bend.c: canonicalize procedure and
	parameter names. Misc cleanups.

2005-08-13  DindinX  <dindinx@gimp.org>

	* plug-ins/common/checkerboard.c: added a preview, and some minor
	cleanups.

2005-08-12  DindinX  <dindinx@gimp.org>

	* plug-ins/common/sample_colorize.c: shut up a Gtk-Critical Warning
	that happened after reopening the filter, but only when a gradient had
	been selected on the previous invocation.

2005-08-12  DindinX  <dindinx@gimp.org>

	* plug-ins/common/sample_colorize.c: preliminary clean-ups.

2005-08-12  Michael Natterer  <mitch@gimp.org>

	* plug-ins/bmp/bmp.c
	* plug-ins/faxg3/faxg3.c
	* plug-ins/fits/fits.c
	* plug-ins/flame/flame.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfig/gfig.[ch]
	* plug-ins/gflare/gflare.c
	* plug-ins/gfli/gfli.c
	* plug-ins/help/help.c
	* plug-ins/helpbrowser/helpbrowser.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/jpeg/jpeg.[ch]
	* plug-ins/maze/maze.[ch]
	* plug-ins/maze/maze_face.c
	* plug-ins/pagecurl/pagecurl.c
	* plug-ins/rcm/rcm.[ch]
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/sel2path/sel2path.c
	* plug-ins/sgi/sgi.c
	* plug-ins/uri/uri.c
	* plug-ins/xjt/xjt.c: canonicalize procedure and parameter names.
	#define them instead of repeating the same string several times.
	Minor cleanups.

2005-08-12  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-proc-def.c (plug_in_proc_def_get_help_id):
	removed s/_/-/, proc names are already canonicalized.

2005-08-10  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version to 2.3.4.

2005-08-10  Michael Natterer  <mitch@gimp.org>

	* cursors/tool-paths-anchor.png
	* cursors/tool-paths-control.png
	* cursors/tool-paths-segment.png
	* cursors/tool-paths.png
	* cursors/xbm/tool-paths-control-mask.xbm
	* cursors/xbm/tool-paths-control.xbm: applied Jimmac's changes.

2005-08-10  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/xbm.c (mask_ext_entry_callback): fixed
	copy'n'paste bug that was clearing the identifier prefix when
	editing the mask extension.

2005-08-10  Jakub Steiner <jimmac@ximian.com>

	* cursors/gimp-tool-cursors.xcf: touched up RGBA versions; add
	  color; for controls, change circles to squares.

2005-08-10  Simon Budig  <simon@gimp.org>

	* app/tools/gimpvectortool.c: small fixes to the cursors - now
	the handles have their respective cursor as well.

2005-08-10  Sven Neumann  <sven@gimp.org>

	* Made 2.3.3, the "What The Hack" release.

	* data/images/gimp-splash.png: What The Splash, photo by antenne.

2005-08-10  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/preferences-dialog.c (prefs_dialog_new): don't have
	widgets from different pages in the same size group. Fixes spacing
	on the "Display" page.

2005-08-10  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am: fixed dist-dump-gimprc rule.

2005-08-09  Michael Natterer  <mitch@gimp.org>

	* app/paint-funcs/paint-funcs.[ch] (extract_from_inten_pixels)
	(extract_from_indexed_pixels): pass src_bytes and dest_bytes to
	these functions instead of just the source's bytes and whether it
	has an alpha. Honor dest_bytes when extracting instead of crashing
	by always asuming that the destination has alpha.
	Fixes bug #312392.

	(extract_from_region): removed has_alpha parameter. pass
	src->bytes and dest->bytes to above functions.

	* app/core/gimpselection.c (gimp_selection_extract): changed
	accordingly.

2005-08-09  Michael Natterer  <mitch@gimp.org>

	* cursors/gimp-tool-cursors.xcf: changed path tool cursor to
	actually show a path and added 3 new cursors which are supposed
	to show a path's anchor, handle and segments. Someone really
	needs to beautify these...

	* cursors/tool-paths.png
	* cursors/xbm/tool-paths-mask.xbm
	* cursors/xbm/tool-paths.xbm: changed accordingly.

	* cursors/Makefile.am
	* cursors/tool-paths-anchor.png
	* cursors/tool-paths-control.png
	* cursors/tool-paths-segment.png
	* cursors/xbm/tool-paths-anchor-mask.xbm
	* cursors/xbm/tool-paths-anchor.xbm
	* cursors/xbm/tool-paths-control-mask.xbm
	* cursors/xbm/tool-paths-control.xbm
	* cursors/xbm/tool-paths-segment-mask.xbm
	* cursors/xbm/tool-paths-segment.xbm: new files.

	* app/widgets/widgets-enums.h (enum GimpToolCursorType): added
	PATH_ANCHOR, PATH_CONTROL and PATH_SEGMENTS.

	* app/widgets/gimpcursor.c: added the new cursors.

	* app/tools/gimpvectortool.c (gimp_vector_tool_cursor_update):
	use them. Fixes bug #124972.

2005-08-09  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/xbm.c: make sure the mask file has valid C
	identifiers, too.

2005-08-09  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: renamed Granularity to
	Color Sensitivity, both in the GUI and in the APIs.

2005-08-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/dicom.c: use an empty string instead of "?" for
	the unknown value (bug #313008).

2005-08-09  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.c: reduced default brush
	size a little.

	* app/config/gimpxmlparser.c: fixed signedness warnings.

	* plug-ins/imagemap/imap_browse.c (handle_drop): UTF-8 validate
	the dropped text before setting it on the entry.

2005-08-08  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/psd.c: Generate valid names for aux channels that
	do not have names defined. Fixes bug #312963.

2005-08-09  Sven Neumann  <sven@gimp.org>

	* app/core/gimplayer.c (gimp_layer_transform_color): take image
	type instead of basetype of the source drawable. Handle conversion
	from drawables without alpha channel.
	(gimp_layer_new_from_region): handle source regions without alpha.

2005-08-08  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/tools/stock-tool-foreground-select-16.png
	* themes/Default/images/tools/stock-tool-foreground-select-22.png:
	  icon for the new tool. Hopefully gets the message across.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): optimized further.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: added another call to gimp_progress_update().

	* app/core/gimp.c (gimp_init): fixed harmless cut-n-paste error.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: added the possibility to specify
	a clip rectangle.

	* app/base/siox.c (find_max_blob): use g_try_malloc().

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): optimizations.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): fixed for offsetted regions.
	Do thresholding as part of find_max_blob().

2005-08-08  Michael Natterer  <mitch@gimp.org>

	* cursors/gimp-tool-cursors.xcf: resized all layers to image size.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (find_max_blob): check boundary conditions
	before pushing a pixel to the queue.

2005-08-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdataeditor.c: made hitting Escape in the name
	entry restore the data's original name. Enables undoing of
	accidential editing. Addresses bug #169257.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-draw.c (gimp_display_shell_get_pen_gc)
	* app/tools/gimpforegroundselecttool.c: use round joins for the
	brush strokes.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: do not attempt foreground
	extraction until the user has specificied a foreground area.

2005-08-08  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c
	(gimp_foreground_select_tool_draw): do not use drawable offsets.
	Disabled the rectangle indicating the working area.

2005-08-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-resize.c (gimp_image_resize_with_layers):
	take care of sample points. Addresses bug #137776.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: made variables more local to make the code
	easier to read and to optimize.

2005-08-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.[ch] (gimp_layer_flatten): new function.

	* app/actions/layers-actions.c
	* app/actions/layers-commands.[ch]
	* app/widgets/gimphelp-ids.h
	* menus/image-menu.xml.in
	* menus/layers-menu.xml: added "Remove Alpha Channel" action,
	action callback, help ID and menu items. Fixes bug #309762.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: micro optimizations.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: do not restart draw tool
	unless shell->proximity.

2005-08-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c
	(gimp_foreground_select_tool_draw): show the extents of the working
	area if the user moves the mouse out of it. Is this useful?

	* app/tools/gimpforegroundselectoptions.c: removed colons from labels.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.c: increased default brush
	size and upper limit.

	* app/tools/gimpforegroundselecttool.c: draw a brush outline.

2005-08-06  Manish Singh  <yosh@gimp.org>

	* plug-ins/Makefile.am: remove dbbrowser from SUBDIRS.

2005-08-06  Manish Singh  <yosh@gimp.org>

	* plug-ins/dbbrowser/plugin-browser.c
	* plug-ins/dbbrowser/procedure-browser.c: removed these files...
	
	* plug-ins/common/plugin-browser.c
	* plug-ins/common/procedure-browser.c: ...and added them here.

	* plug-ins/common/mkgen.pl: transform - to _ in makefile variable
	names, and attach optional CFLAGS to only the plugins that need
	them.

	* plug-ins/common/plugin-defs.pl: added plugin-browser and
	procedure-browser, and changed poppler, svg, and wmf to use the new
	CFLAGS stuff.

	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am: regenerated.

	* configure.in: remove plug-ins/dbbrowser reference.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]: reordered parameters to match the order of
	parameters in gimp_drawable_foreground_extract_siox().

	* app/core/gimpdrawable-foreground-extract.c: changed accordingly.

	* app/tools/gimpforegroundselectoptions.[ch]: draw slider value to
	the right.

	* app/tools/gimpfreeselecttool.[ch]: added
	gimp_free_select_tool_select() to call the virtual select() method.

	* app/tools/gimpforegroundselecttool.[ch]: queue an idle select if
	the smoothness or granularity values change in the tool options.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]: expose all
	parameters of the SIOX algorithm. Provide default values.

	* app/tools/gimpforegroundselectoptions.[ch]: added properties and
	user interface for all SIOX parameters.

	* app/tools/gimpforegroundselecttool.c: changed accordingly.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: added a statusbar message
	to encourage the user to draw on the object.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c
	* app/core/gimpdrawable-foreground-extract.c: moved rectangle
	intersection into gimp_drawable_foreground_extract().

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: added gimp_scan_convert_compose(),
	an alternative to gimp_scan_convert_render() that allows to compose
	strokes on a drawable.

	* app/tools/gimpforegroundselecttool.c: use the new function to
	get rid of temporary channels for applying the strokes. Also fixed
	calculation of stroke width from display scale.

2005-08-06  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpuimanager.c (gimp_ui_manager_ui_popup): applied
	patch from Robert Ögren that frees the event returned by
	gtk_get_current_event(). Fixes bug #312017.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-draw.c (gimp_display_shell_draw_pen):
	* app/tools/gimpforegroundselecttool.c: correctly handle a stroke
	consisting of just a single point.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.[ch]
	* libgimpwidgets/gimpwidgets.def: added gimp_prop_hscale_new().

	* app/tools/gimpforegroundselectoptions.c: added a control for the
	stroke width.

	* app/tools/gimpforegroundselecttool.c: cancel the tool if the
	active drawable or the image size changes.

	* app/widgets/gimpcontrollerlist.c: fixed signedness warning.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/display/gimpcanvas.c (gimp_canvas_set_custom_gc) do not
	drop the reference if the same custom GC is being set again.

	* app/display/gimpdisplayshell-draw.[ch]
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell.[ch]: added GC and methods to draw
	on the canvas with a solid pen.

	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.c: draw using the new pen
	functions. Scale the stroke width with the display scale.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette-import.c:
	* app/paint-funcs/paint-funcs-generic.h
	* app/paint-funcs/paint-funcs.c: fixed signedness warnings.

2005-08-05  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/test-sphere.scm: Added missing argument
	in define statement. Fixed spelling errors.

	* ChangeLog: Corrected my e-mail address.

2005-08-06  Sven Neumann  <sven@gimp.org>

	* app/batch.c: canonicalize hardcoded procedure names.

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselecttool.c: restrict the working area
	to the double of the bounding box of the initial selection.

2005-08-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-message.c (plug_in_handle_proc_install):
	canonicalize proc args registered by plug-ins.

	* plug-ins/script-fu/siod-wrapper.c: removed s/_/-/ for proc args.

2005-08-05  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/pdbgen.pl: store canonical names of proc names and
	args in the proc structure.

	* tools/pdbgen/app.pl
	* tools/pdbgen/lib.pl: use the above.

	* app/pdb/*_cmds.c: regenerated.

2005-08-05  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpitem.c (gimp_item_parasite_attach): revert previous
	change. Instead, don't push undos if the item is not attached.

2005-08-05  Sven Neumann  <sven@gimp.org>

	* app/xcf/xcf-load.c (xcf_load_image): disable undo while the
	image is being loaded.

	* app/core/gimpitem.c (gimp_item_parasite_attach): don't try to
	push an undo step if undo is disabled. Gets rid of warnings while
	loading an XCF file with undoable drawable parasites.

2005-08-04  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-rgb.c: don't wrap deprecated function
	gimp_rgb_intensity().

2005-08-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpimagepropview.c: increased spacing between
	property groups to 12 pixels.

2005-08-04  Sven Neumann  <sven@gimp.org>

	* app/xcf/xcf.c: canonicalize PDB parameter names.

2005-08-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.c: added cursor navigation.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* app/vectors/gimpvectors-compat.[ch]
	* app/xcf/xcf-load.c
	* app/xcf/xcf-save.c: fixed signedness warnings.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpbaseenums.h: typo: FOEEGROUND -> FOREGROUND.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_new):
	canonicalize hardcoded procedure names.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/module-dialog.c
	* app/dialogs/palette-import-dialog.c
	* app/gui/gui.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpvectortool.c
	* app/widgets/gimpaction.c
	* app/widgets/gimpcoloreditor.c
	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontainertreeview.c
	* app/widgets/gimpcursorview.c
	* app/widgets/gimpdnd.c
	* app/widgets/gimpdock.c
	* app/widgets/gimpdockbook.c
	* app/widgets/gimpdrawabletreeview.c
	* app/widgets/gimpeditor.c
	* app/widgets/gimpenumaction.c
	* app/widgets/gimperrordialog.c
	* app/widgets/gimpfileprocview.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimpmenudock.c
	* app/widgets/gimpmessagebox.c
	* app/widgets/gimpmessagedialog.c
	* app/widgets/gimppluginaction.c
	* app/widgets/gimpprogressdialog.c
	* app/widgets/gimpsamplepointeditor.c
	* app/widgets/gimpstringaction.c
	* app/widgets/gimptemplateeditor.c
	* app/widgets/gimptoolbox-image-area.c
	* app/widgets/gimptoolbox.c: use canonical names for signals and
	properties.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* plug-ins/help/Makefile.am: link against libgimpcolor. WhyTheHack
	did this work before?

2005-08-03  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]: added GIMP_UNDO_FOREGROUND_SELECT.

	* app/tools/Makefile.am
	* app/tools/gimpforegroundselecttool-undo.[ch]: added stubs for
	undo in the new foreground selection tool.

	* tools/pdbgen/pdb/procedural_db.pdb: include gimpbase.h for
	gimp_canonicalize_identifier().

	* app/pdb/procedural_db_cmds.c: regenerated.

	* app/file/file-utils.c: fixed signedness warning.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* libgimpmath/gimpmd5.c
	* libgimpmath/test-md5.c
	* plug-ins/common/CEL.c
	* plug-ins/common/cartoon.c
	* plug-ins/common/emboss.c
	* plug-ins/common/exchange.c
	* plug-ins/common/gifload.c
	* plug-ins/common/poppler.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/jpeg/jpeg-save.h
	* plug-ins/metadata/interface.c
	* plug-ins/metadata/metadata.c
	* plug-ins/metadata/xmp-model.c
	* plug-ins/script-fu/siod/sliba.c: fixed signedness warnings.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/gimprgb.[ch]: deprecated RGB intensity functions
	and definitions. These coefficients do not accurately compute
	luminance for contemporary monitors. Instead the coefficients from
	the sRGB spec should be used which have now been added.

	* libgimpcolor/gimpcolor.def: updated.

	* libgimp/gimpdrawable.c
	* libgimp/gimppixelfetcher.c
	* app/base/colorize.c
	* app/base/levels.c
	* app/base/temp-buf.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimpdrawable-convert.c
	* app/core/gimpdrawable-desaturate.c
	* app/core/gimpimage-convert.c
	* app/core/gimpimage.c
	* app/gui/splash.c
	* app/widgets/gimpgradienteditor.c
	* modules/colorsel_triangle.c
	* plug-ins/common/aa.c
	* plug-ins/common/bumpmap.c
	* plug-ins/common/colorify.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/displace.c
	* plug-ins/common/engrave.c
	* plug-ins/common/gradmap.c
	* plug-ins/common/grid.c
	* plug-ins/common/mng.c
	* plug-ins/common/newsprint.c
	* plug-ins/common/png.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gfli/gfli.c
	* plug-ins/maze/handy.c
	* plug-ins/pagecurl/pagecurl.c: use gimp_rgb_luminance() and
	friends instead of the deprecated intensity functions.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpprocbrowserdialog.[ch]: removed all parameters from
	gimp_proc_browser_dialog_new() and removed the "scheme_names"
	stuff.

	* plug-ins/dbbrowser/procedure-browser.c
	* plug-ins/pygimp/procbrowser.c
	* plug-ins/script-fu/script-fu-console.c: changed accordingly.

	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-types.h
	* plug-ins/script-fu/siod-wrapper.c: removed all sorts of
	conversions between '-' and '_' for procedure names.

	* plug-ins/script-fu/script-fu.c: use canonical names for
	script-fu's procedures.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	* app/actions/vectors-commands.c
	* app/widgets/gimphelp.c: canonicalized some hardcoded procedure
	names because internal functions accept only canonical names now.

2005-08-03  Michael Natterer  <mitch@gimp.org>

	Changed naming scheme for PDB procedure names from
	random_crap_that_traditionally_has_underscores to
	enforced-canonical-identifiers. I'm pretty sure some things are
	broken after this commit. More changes to come...

	* libgimpbase/gimpbase.def
	* libgimpbase/gimputils.[ch]: added gimp_canonicalize_identifier().

	* app/pdb/procedural_db.[ch] (struct ProcRecord): added
	"gchar *original_name" to keep a procedure's original name as
	reigstered by plug-ins (compat cruft).

	(procedural_db_init_procs): canonicalized list of deprecated
	procedures.

	* app/plug-in/plug-in-proc-def.c (plug_in_proc_def_free): free
	original_name.

	* app/plug-in/plug-in-message.c: canonicalize procedure names
	which are received over the wire.

	* app/plug-in/plug-in-rc.c: serialize the original_name and create
	the canonicalized name on-the-fly when deserializing.

	* app/plug-in/plug-in-run.c: pass the original_name to plug-ins
	when running them because they strcmp() the passed procedure name.

	* app/plug-in/plug-ins.c (plug_ins_add_to_db): pass
	canonical procedure names to procedural_db_execute().

	(plug_ins_file_proc_compare): special-case "gimp-xcf", not "gimp_xcf".

	* app/xcf/xcf.c: changed static XCF procedures accordingly.

	* tools/pdbgen/app.pl
	* tools/pdbgen/lib.pl: do some trivial substitutions to generate
	canonicalized names in app/, and C identifiers with underscores in
	libgimp/.

	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/image.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/patterns.pdb
	* tools/pdbgen/pdb/plug_in.pdb
	* tools/pdbgen/pdb/procedural_db.pdb
	* tools/pdbgen/pdb/text_tool.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: canonicaloized procedure
	names in calls to std_pdb_deprecated() and in procedure names in
	generated C code.

	* app/pdb/*_cmds.c
	* libgimp/*_pdb.c: regenerated.

2005-08-03  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpdrawablecombobox.c
	* libgimp/gimpfontselectbutton.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimpimagecombobox.c
	* libgimp/gimppalettemenu.c
	* libgimp/gimppatternmenu.c: fixed signedness warnings.

2005-08-02  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/procbrowser.c: Quick and dirty restore of browser
	functionality.

2005-08-02  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpuitypes.h: added GimpProcBrowserDialog typedef here.

	* libgimp/gimpprocbrowserdialog.[ch]
	* libgimp/gimpprocview.[ch]: fixed copyright headers, added
	G_BEGIN_DECLS / G_END_DECLS.

2005-08-02  Michael Natterer  <mitch@gimp.org>

	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/dbbrowser/gimpprocbrowser.[ch]
	* plug-ins/dbbrowser/gimpprocview.[ch]: removed these files...

	* libgimp/Makefile.am
	* libgimp/gimpui.h
	* libgimp/gimpui.def
	* libgimp/gimpprocbrowserdialog.[ch]
	* libgimp/gimpprocview.[ch]: ...and added them here. Turned the
	procedure browser into a widget called GimpProcBrowserDialog and
	changed its API completely. Fixes bug #165009.

	* plug-ins/dbbrowser/plugin-browser.c
	* plug-ins/dbbrowser/procedure-browser.c
	* plug-ins/script-fu/Makefile.am
	* plug-ins/script-fu/script-fu-console.c: changed accordingly.

	* plug-ins/pygimp/Makefile.am
	* plug-ins/pygimp/procbrowser.c: ditto (#if 0'ed stuff so it compiles).

2005-08-02  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselectoptions.[ch]
	* app/tools/gimpforegroundselecttool.[ch]: some code cleanup; moved
	stroke width to the tool options.

2005-07-31  Manish Singh  <yosh@gimp.org>

	* app/composite/Makefile.am
	* app/composite/make-installer.py: fix code generation filenames.

2005-07-31  Manish Singh  <yosh@gimp.org>

	* acinclude.m4
	* m4macros/Makefile.am
	* m4macros/detectcflags.m4: new macro: GIMP_DETECT_CFLAGS; used
	to detect which of a set of compiler options a compiler supports.

	* configure.in: use the above for the altivec and -fno-strict-aliasing
	flags. Also, use it to detect the presence of -mmmx and -msse, since
	those are needed to compile even MMX/SSE assembly with gcc 4.0. Define
	MMX/SSE_EXTRA_CFLAGS.

	* app/composite/Makefile.am: compile each of the composite flavors
	into their own library, so we can use automake's per-target CFLAGS.
	Use MMX/SSE/ALTIVEC_EXTRA_CFLAGS in the appropriate places. Build
	libappcomposite.a out of the resulting objects.

	* app/composite/gimp-composite-3dnow.c
	* app/composite/gimp-composite-altivec.c
	* app/composite/gimp-composite-mmx.c
	* app/composite/gimp-composite-sse.c
	* app/composite/gimp-composite-sse2.c
	* app/composite/gimp-composite-vis.c
	* app/composite/make-installer.py: move the _init functions into
	the installers, so only actually mmx/sse/etc. code gets compiled
	under the appropriate CFLAGS.

	* app/composite/gimp-composite-3dnow-installer.c
	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-mmx-installer.c
	* app/composite/gimp-composite-sse-installer.c
	* app/composite/gimp-composite-sse2-installer.c
	* app/composite/gimp-composite-vis-installer.c: regenerated.

	* app/composite/gimp-composite.c: remove useless cpu-accel.h include.

2005-07-31  DindinX  <dindinx@gimp.org>

	* app/dialogs/preferences-dialog.c: when the notebook page is changed
	with the mouse wheel, update the title and the selection in the
	treeview.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/tools/Makefile.am
	* app/tools/gimpforegroundselectoptions.[ch]: added options for
	GimpForegroundSelectionTool.

	* app/tools/gimpforegroundselecttool.c: also allow to classify
	background pixels.

	* app/tools/gimpfreeselecttool.c: implement GimpTool::control and
	reset the points array if the tool is HALTed.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: give some visual feedback
	when the user is drawing. Should use a different GC though.

	* app/tools/gimpdrawtool.[ch]: added some const qualifiers.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.c (gimp_scan_convert_render): pass 255
	as value to gimp_scan_convert_render_internal().

	* app/tools/gimpforegroundselecttool.[ch]: add paint strokes as
	classified foreground area; draw function is missing.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.c: fixed some minor coding style issues.

2005-07-31  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]: removed the overlay again.
	This needs to be done differently.

	* app/tools/gimpforegroundselecttool.c: changed accordingly.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]: renamed overlay to mask and
	added a different overlay implementation that will be needed to
	finish the new foreground-select tool.

	* app/tools/gimpforegroundselecttool.c: changed accordingly.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/tools/gimptoolcontrol.[ch]: transparently handle cursor
	vs. toggle cursor in the cursor accessor functions.

	* app/tools/gimpconvolvetool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpmagnifytool.c
	* app/tools/gimptool.c: simplifies things here.

	* app/tools/gimpforegroundselecttool.c: set a toggle cursor and
	toggle the tool if a mask is set.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: implement cursor_update().
	Suppress standard selection tool functionality if a mask exists.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpforegroundselecttool.c: implement oper_update() and
	and give some hints in the statusbar.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c
	* app/display/gimpdisplayshell.[ch]: added
	gimp_display_shell_set_overlay(); allows to overlay a mask over the
	display to visualize a selection.

	* app/tools/gimpforegroundselecttool.[ch]: use the new functionality
	to display the selection. Escape cancels the tool, Enter applies the
	selection.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpbase.def: added missing symbol.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.c (gimp_histogram_calculate_sub_region):
	loop unrolling.

	* app/dialogs/about-dialog.c 
	* app/widgets/gimpselectiondata.c
	* plug-ins/bmp/bmpread.c (ReadBMP)
	* plug-ins/gfig/gfig.c (gfig_load)
	* plug-ins/imagemap/imap_preview.c 
	* plug-ins/imagemap/imap_selection.c
	* plug-ins/jpeg/jpeg-exif.c
	* plug-ins/common/dicom.c
	* plug/ins/common/screenshot.c: fixed signedness warnings.

2005-07-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/Makefile.am
	* plug-ins/script-fu/scripts/image-structure.scm: removed this
	script (see bug #307016).

2005-07-30  Sven Neumann  <sven@gimp.org>

	* app/base/tile-swap.c: increase the size of the swap file in
	chunks of 16MB instead of only 256KB. Check the return value of
	ftruncate().

2005-07-29  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppageselector.c: increased spacing.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* menus/image-menu.xml.in: added "tools-foreground-select" to the
	Selection Tools menu.

	* app/tools/gimpforegroundselecttool.c: resolved clashing mnemonic.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/tools/stock-tool-foreground-select-16.png
	* themes/Default/images/tools/stock-tool-foreground-select-22.png:
	added placeholder for yet-to-be-drawn tool icon.

	* libgimpwidgets/gimpstock.[ch]: register it.

	* app/tools/gimpforegroundselecttool.c: use it.

	* app/widgets/gimpclipboard.[ch] (gimp_clipboard_get_svg): return
	a signed char pointer.

	* app/actions/edit-commands.c 
	* app/tools/gimpinkoptions-gui.c: fixed signedness issues.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]
	* app/core/gimpdrawable-foreground-extract.c: pass progress_callback
	and progress_data to siox_foreground_extract().

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (add_to_list): keep a tail pointer. Speeds up
	the benchmark by about 50%.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-foreground-extract.[ch]: added a progress
	parameter.

	* app/tools/gimpforegroundselecttool.[ch]: changed the "select"
	method to take a GimpDisplay instead of a GimpImage.

	* tools/pdbgen/pdb/drawable.pdb
	* app/tools/gimpforegroundselecttool.c: changed accordingly.

	* app/pdb/drawable_cmds.c: regenerated.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c: fixed signedness warnings.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpbaseenums.[ch]: added GimpForegroundExtractMode
	in preparation for other implementations to be added in the future.

	* libgimp/gimpenums.c.tail
	* tools/pdbgen/enums.pl: regenerated.

	* app/core/gimpdrawable-foreground-extract.[ch]
	* app/tools/gimpforegroundselecttool.c
	* tools/pdbgen/pdb/drawable.pdb: added the mode parameter.

	* app/pdb/drawable_cmds.c
	* libgimp/gimpdrawable_pdb.[ch]: regenerated.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-utils.c (gimp_config_string_append_escaped):
	added casts to silent signedness warnings.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpselectionoptions.c (gimp_selection_options_gui): no
	antialiasing for the foreground selection tool (yet).

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpscanconvert.[ch]: added
	gimp_scan_convert_render_value(), a variant of
	gimp_scan_convert_render() that allows to pass the foreground value.

	* app/tools/gimpfreeselecttool.[ch]: added a virtual "select" method.

	* app/tools/Makefile.am
	* app/tools/gimp-tools.c
	* app/tools/gimpforegroundselecttool.[ch]: added a rough first
	version of foreground selection tool based on the SIOX algorithm.
	Work in progress...

	* app/widgets/gimphelp-ids.h: added help-id for the new tool.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpfreeselecttool.c: minor cleanup.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c (siox_foreground_extract): minor cleanup.

2005-07-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpundostack.[ch]: added gimp_undo_stack_get_depth().

	* app/widgets/gimpimagepropview.[ch]: display number and memory
	usage of undo/redo steps.

	* app/core/gimpimage-merge.c: fixed signedness issue.

2005-07-28  Sven Neumann  <sven@gimp.org>

	* app/base/siox.[ch]: accept an offset between pixels and mask,
	work only on the intersection rectangle.

	* app/core/gimpdrawable-foreground-extract.c: pass the drawable
	offsets to siox_foreground_extract().

2005-07-28  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: allow to enable some debug output.

2005-07-27  Manish Singh  <yosh@gimp.org>

	* app/core/gimpdrawable-foreground-extract.c: #include
	gimpimage-colormap.h

2005-07-28  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/cpercep.[ch]: moved cpercep from here ...
	
	* app/base/Makefile.am
	* app/base/cpercep.[ch]: ... to here.

	* app/base/siox.[ch]: use the cpercep routines for RGB->LAB
	conversion, gives a 20% speedup. Removed normalization which seems
	redundant. Make it work for grayscale and indexed, not only RGB.

	* app/core/gimpdrawable-foreground-extract.c
	* app/core/gimpimage-convert.c: changed accordingly.

2005-07-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: change the cursor with the tool
	(bug #90519).

2005-07-26  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c: fixed signedness warnings.

2005-07-25  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_csim.y: make buffer large enough to hold
	all polygon data.

	* plug-ins/imagemap/imap_csim_parse.[ch]: regenerated. Fixes #169698

2005-07-25  Michael Natterer  <mitch@gimp.org>

	Some DND fixes / cleanup:

	* app/widgets/widgets-enums.h: renamed GIMP_DND_TYPE_TOOL to
	GIMP_DND_TYPE_TOOL_INFO.

	* app/widgets/gimpselectiondata.[ch]: s/tool/tool_info/g. Moved
	private functions to the end of the file. Include GIMP's PID in
	all GtkSelectionData strings which are used to pass around stuff
	by reference. For things which are referenced by name, also encode
	the object's address in the GtkSelectionData so having a brush
	called "Standard" or a named buffer called "Global Buffer" will
	work together with DND.

	* app/widgets/gimpdnd.[ch]: s/tool/tool_info/g. Renamed
	gimp_dnd_get_data_data() to gimp_dnd_get_object_data() since it's
	not limited to GimpData objects. Follow above selection data API
	changes. Cleanup.

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpdrawablecombobox.c
	* libgimp/gimpfontselectbutton.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimpimagecombobox.c
	* libgimp/gimppalettemenu.c
	* libgimp/gimppatternmenu.c: follow GtkSelectionData format change
	and check the dropped things' PID against the return value of
	gimp_getpid().

2005-07-25  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/misc.pdb: on Win32, include <process.h> for
	getpid().

	* app/pdb/misc_cmds.c: regenerated.

2005-07-25  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/misc.pdb: added gimp_getpid().

	* libgimp/gimp.def: changed accordingly.

	* app/pdb/internal_procs.c
	* app/pdb/misc_cmds.c
	* libgimp/gimpmisc_pdb.[ch]: regenerated.

2005-07-25  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpdialog.c (gimp_dialog_add_buttons_valist):
	don't call gtk_widget_hide() on a NULL help button.

2005-07-24  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimppatternmenu.c: put the previews into sunken instead
	of etched-in frames.

2005-07-24  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppattern.c: untabify, minor cleanup.

2005-07-23  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpselectiondata.c
	(gimp_selection_data_get_buffer): special case the global buffer
	so it can be dropped, not only dragged around.

2005-07-23  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppageselector.c: added a label showing the
	number of selected pages. Allow to enter ranges like "5-" or "-7"
	(treat them as if the user had entered "5-n_pages" or "1-7").
	Minor UI spacing and code cleanup.

2005-07-22  Michael Schumacher  <schumaml@cvs.gnome.org>

	* libgimpwidgets/gimpwidgets.def: added missing
	gimp_page_selector_[get|set]_target 

2005-07-22  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteeditor.c (gimp_palette_editor_init):
	allow to drop palettes onto the palette view again.

2005-07-22  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppaletteeditor.c (gimp_palette_editor_zoom):
	fixed the GIMP_ZOOM_TO case for palettes with a number of colors
	that is not a multiple of the number of columns.

2005-07-22  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewrendererpalette.c
	(gimp_view_renderer_palette_render): reverted my last change here
	and replaced it with a better fix.

2005-07-22  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.c: setup the dnd stuff in
	GimpView::set_viewable() and remove GimpView's automatically added
	GimpPalette drag source. Fixes color dragging (bug #113237).

2005-07-21  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreview.[ch]: added gimp_preview_get_area()
	for the rare case when one needs access to the GimpPreviewArea
	used in the preview.

	* libgimpwidgets/gimpwidgets.def: updated.

2005-07-21  Pawan Chitrakar  <pawan@nplinux.org>

	* configure.in: Added ne in ALL_LINGUAS

2005-07-20  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/poppler.c (run): don't return an execution error
	if the user cancelled the dialog.

2005-07-20  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-dump.c: fixed typo (Debian bug #310018).

2005-07-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig-grid.c: declare variables at the start of the
	scope. Apply GIMP coding style to the new polar grid code.

2005-07-19  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpvectortool.c (gimp_vector_tool_key_press): return
	FALSE if the keypress event isn't handled because the display
	doesn't match.

2005-07-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mng.c (mng_save_image): fixed signedness warnings.

2005-07-19  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/gimprender.[ch]: new files keeping the render
	acceleration check buffers.

	* app/display/gimpdisplayshell-render.[ch]: removed them here.

	* app/gui/gui.c: initialize/shutdown the new buffers.

	* app/widgets/gimpcolormapeditor.c
	* app/widgets/gimpviewrenderer.c
	* app/widgets/gimpviewrenderergradient.c
	* app/actions/view-actions.c
	* app/display/gimpdisplayshell-appearance.c
	* app/display/gimpdisplayshell-draw.c
	* app/display/gimpdisplayshell.c: use the new stuff. Removes
	lots of broken widgets -> display dependencies.

2005-07-19  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolormapeditor.[ch]: renamed member "palette"
	to "preview", cleanup.

2005-07-19  Sven Neumann  <sven@gimp.org>

	* app/actions/edit-actions.c 
	* etc/ps-menurc: changed the default keybinding for Edit->Clear
	from Ctrl-K to Delete (bug #118115).

2005-07-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_menu.c: removed unused include.

2005-07-19  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimphistogrameditor.c: try a different style for the
	info labels below the histogram; mainly to avoid repositioning.

2005-07-18  DindinX  <dindinx@gimp.org>

	* plug-ins/common/gauss.c: don't try to free unallocated space
	(happened when vert or horz were 0.0)

2005-07-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/poppler.c: marked strings for translation.

2005-07-18  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpeditselectiontool.c (gimp_edit_selection_tool_start):
	need to sort the boundary here since gimp_draw_tool_draw_boundary()
	expects a sorted boundary now. Fixes bug #310432.

	* app/tools/gimppainttool.c: formatting.

2005-07-18  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpresolutionentry.c: tweaked spacing and
	alignments to make it look more like our other widgets.

	* plug-ins/common/poppler.c: put the resolution entry into a hbox
	so that it doesn't expand horizontally; removed unused table.

2005-07-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/nlfilt.c
	* plug-ins/common/pat.c
	* plug-ins/common/svg.c
	* plug-ins/common/tiff.c
	* plug-ins/common/tile.c
	* plug-ins/common/uniteditor.c
	* plug-ins/common/wmf.c: fixed signedness warnings.

2005-07-17  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdnd-xds.c: added missing casts.

2005-07-17  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpmodule.c
	* plug-ins/pygimp/pygimp-drawable.c: revert to old behavior of
	parasite_find functions returning None when there isn't a parasite
	found. Fixed bug #310666.

2005-07-17  Nathan Summers  <rock@gimp.org>

	* libgimpwidgets/gimpresolutionentry.[ch]: spiffy new widget that given
	a physical size, displays that size in an arbitrary unit, and lets
	you select a resolution via changing either the corresponding width
	and height or specifying it directly in pixels per your chosen unit.
	
	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.def 
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h: added appropriate files, function,
	headers, and types, respectively

	* devel-docs/libgimpwidgets/libgimpwidgets.types: added
	gimp_resolution_entry_get_type.  A section still needs to be created
	for it.
	
	* plug-ins/common/poppler.c (run): bugfix that accidentally wasn't
	merged in previous commit.

	* plug-ins/common/poppler.c (load_dialog): replaced resolution
	spinbutton with a GimpResolutionEntry.

2005-07-16  Sven Neumann  <sven@gimp.org>

	* app/base/siox.c: added comments about possible improvements.

2005-07-16  Nathan Summers  <rock@gimp.org>

	* plug-ins/common/poppler.c: merged in all the changes in my 
	current gimp-poppler tree that don't need c++ or cause regressions.
	Insignificant code cleanups.
	
	* plug-ins/common/poppler.c (load_dialog): display title of pdf
	at the top of the dialog, and show the page labels in the page
	selector.  The loop for the page labels might be profitably moved
	into another thread, but I haven't actually timed how long it takes
	to be sure.

2005-07-16  Nathan Summers  <rock@gimp.org>

	* plug-ins/common/plugin-defs.pl: added poppler
	
	* plug-ins/common/mkgen.pl: add poppler's CFLAGS, and make the 
	comment about how plug-ins/common/Makefile.am is autogenerated
	more prominent
	
	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am: regenerated

2005-07-16  Nathan Summers  <rock@gimp.org>

	* plug-ins/common/poppler.c: initial import into CVS.  There was much
	rejoicing.

	* configure.in: check for gthread-2.0 in the poppler check, because
	it is not necessarily checked for elsewhere.  Once other threaded
	plugins become available, this probably should be moved.

	Also removed the HAVE_POPPLER am conditional; it wasn't needed.
	
	* plug-ins/common/Makefile.am: added poppler to the build process

2005-07-16  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpimagepropview.[ch]: also show the number of pixels.

2005-07-15  Carol Spears  <carol@gimp.org>

	* docs/Wilber_Construction_Kit.xcf.gz: corrected the spelling of
	the word tassel.

2005-07-15  Carol Spears  <carol@gimp.org>

	* docs/Wilber_Construction_Kit.xcf.gz:  added a tassle and a fez.

2005-07-15  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.c (erode_region) (dilate_region):
	fixed implementations.

	* app/base/siox.c (create_signature): moved comment to the right place.

2005-07-15  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewrendererpalette.c
	(gimp_view_renderer_palette_render): don't crash on empty palettes.

2005-07-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimphistogramview.c
	* app/widgets/gimpnavigationview.c: cleanup.

2005-07-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteview.[ch]: added "entry-clicked" and
	"color-dropped" signals. Completely handle color DND. Cleanup.

	* app/core/gimpmarshal.list: marshallers for above signals.

	* app/widgets/gimppaletteeditor.[ch]: chopped and reassembled.
	Remove tons of code and use a GimpPaletteView instead of the
	deprecated GtkPreview. Addresses bug #102204.

2005-07-14  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]: added erode_region() and
	dilate_region(). Less general than thin_region() and fatten_region()
	but a little faster.

	* app/base/siox.c: use the new functions.

2005-07-14  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimppaletteview.[ch]: new widget which manages the
	selected palette entry itself and emits "selected", "activated"
	and "context" signals. Not used yet.

	* app/widgets/gimpviewrendererpalette.[ch]: reimplemented palette
	drawing: added optional grid drawing and APIs to configure the
	renderer. Should be ready for the palette editor now.

2005-07-13  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpviewrendererpalette.c
	(gimp_view_renderer_palette_render): implement it the same way as
	gimp_palette_get_preview(). Can't be used for the palette editor
	yet.

2005-07-13  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpviewrendererpalette.[ch]: new view renderer,
	does nothing yet except chaining up in ::render().

	* app/widgets/gimpviewrenderer-utils.c
	(gimp_view_renderer_type_by_viewable_type): use it for palettes.

2005-07-13  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfig/gfig-grid.c
	* plug-ins/gfig/gfig.h: applied a patch by Ted Shaneyfelt that
	addresses parts of bug 151092: less sectors on inner, more sectors
	on outer tracks. 

2005-07-13  Sven Neumann  <sven@gimp.org>

	* app/base/Makefile.am
	* app/base/segmentator.[ch]: renamed to siox.[ch].

	* app/base/siox.[ch]: added API docs and a link to the algorithm's
	new homepage. Removed unused code.

	* app/core/gimpdrawable-foreground-extract.c: changed accordingly.

2005-07-13  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppalette.c (gimp_palette_add_entry): actually return
	the added entry, and not always the palette's last entry (argh!).

	* app/widgets/gimppaletteeditor.c: make sure the cursor is always
	on the newly added color. Really fixes #15060 this time.

2005-07-13  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]: added smooth_region(), a
	simple convolution filter to smooth a mask.

	* app/base/segmentator.c (smooth_mask): use the new function.

2005-07-13  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockable.[ch]: added new public function
	gimp_dockable_blink_cancel() which stops title blinking.

	* app/tools/gimpcolorpickertool.c (gimp_color_picker_tool_picked):
	cancel blinking when updating a picked color so the dockable
	doesn't flicker for each cursor movement.

2005-07-13  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimppaletteeditor.c (gimp_palette_editor_pick_color):
	add colors after the cursor. Fixes bug #150608.

2005-07-13  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_init_procs): sorted list
	of deprecated procedures so deprecations since 2.0 and 2.2 are
	grouped together.

2005-07-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu.c: formatting.

2005-07-12  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-edit.c: pass opacity and paint_mode to
	gimp_edit_fill_internal() instead of figuring them in the
	function.

2005-07-12  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpitem.[ch]: removed "context" parameter from
	GimpItem::stroke(), it's not needed any longer.

	* app/core/gimpchannel.c
	* app/core/gimpselection.c
	* app/vectors/gimpvectors.c: changed accordingly.

2005-07-12  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimppaintoptions-gui.c (gimp_paint_options_gui):
	swapped the opacity scale and the paint mode menu to be consistent
	with the layers dialog. Also makes the paint options look more
	balanced.

2005-07-11  Sven Neumann  <sven@gimp.org>

	* app/base/segmentator.c: for now, implement smooth_mask() by
	means of gaussian_blur_region().

2005-07-11  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.c: minor fixes to the API docs.

2005-07-11  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppickable.[ch]: added GimpPickable::get_opacity_at()

	* app/core/gimpchannel.[ch]: removed gimp_channel_value() and
	implement ::get_opacity_at() instead.

	* app/core/gimplayer.[ch]: removed gimp_layer_pick_correlate()
	and implement ::get_opacity_at() instead.

	* app/core/gimpselection.c: GimpChannel::value() doesn't exist
	any more.

	* app/core/gimpprojection.c: implement ::get_opacity_at(), always
	returns OPAQUE.

	* app/core/gimpimage.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpfliptool.c
	* app/tools/gimpiscissorstool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.c
	* app/tools/gimpselectiontool.c
	* app/tools/gimptransformtool.c
	* tools/pdbgen/pdb/selection.pdb: changed accordingly.

	* app/pdb/selection_cmds.c: regenerated.

2005-07-11  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c (gimp_clone_tool_cursor_update):
	simplify check for "inside selected region".

2005-07-11  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.c: added read-only properties "opacity",
	"mode" and "lock-alpha".

2005-07-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gauss.c: plugged memory leaks (bug #309967).
	Invalidate the preview when the algorithm is changed; default to
	RLE since it appears to be faster for the cases I tried.

2005-07-10  Carol Spears  <carol@gimp.org>

	* docs/Wilber_Construction_Kit.xcf.gz

2005-07-10  Manish Singh  <yosh@gimp.org>

	* libgimp/gimplayer.c (gimp_layer_set_preserve_trans): actually
	return a value.

	* plug-ins/pygimp/pygimp-drawable.c: create new lock_alpha attribute,
	and deprecate old preserve_trans attribute.

	* plug-ins/pygimp/plug-ins/shadow_bevel.py: use new lock_alpha API.

2005-07-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimplayertreeview.c (gimp_layer_tree_view_init):
	moved the lock alpha toggle to a separate "Lock:" line.

2005-07-10  Michael Natterer  <mitch@gimp.org>

	* app/actions/layers-actions.c
	* app/actions/layers-commands.[ch]
	* app/core/core-enums.[ch]
	* app/core/gimpimage-undo-push.[ch]
	* app/core/gimplayer-floating-sel.c
	* app/core/gimplayer.[ch]
	* app/text/gimptextlayer-xcf.c
	* app/widgets/gimphelp-ids.h
	* app/widgets/gimplayertreeview.[ch]
	* app/xcf/xcf-load.c
	* app/xcf/xcf-private.h
	* app/xcf/xcf-save.c
	* tools/pdbgen/pdb/layer.pdb
	* menus/image-menu.xml.in
	* libgimp/gimp.def: did a global s/preserve_trans/lock_alpha/ in
	preparation for more layer locking flags.

	* app/pdb/procedural_db.c
	* libgimp/gimplayer.[ch]: added compat stuff for preserve_trans.

	* app/pdb/layer_cmds.c
	* libgimp/gimplayer_pdb.[ch]: regenerated.

	* plug-ins/common/colortoalpha.c
	* plug-ins/common/iwarp.c
	* plug-ins/common/psd.c
	* plug-ins/common/psd_save.c
	* plug-ins/common/psp.c
	* plug-ins/common/rotate.c
	* plug-ins/common/threshold_alpha.c
	* plug-ins/common/vpropagate.c
	* plug-ins/script-fu/scripts/3d-outline.scm
	* plug-ins/script-fu/scripts/alien-glow-bar.scm
	* plug-ins/script-fu/scripts/alien-glow-bullet.scm
	* plug-ins/script-fu/scripts/alien-glow-logo.scm
	* plug-ins/script-fu/scripts/basic1-logo.scm
	* plug-ins/script-fu/scripts/basic2-logo.scm
	* plug-ins/script-fu/scripts/beveled-pattern-button.scm
	* plug-ins/script-fu/scripts/blend-anim.scm
	* plug-ins/script-fu/scripts/blended-logo.scm
	* plug-ins/script-fu/scripts/bovinated-logo.scm
	* plug-ins/script-fu/scripts/burn-in-anim.scm
	* plug-ins/script-fu/scripts/carved-logo.scm
	* plug-ins/script-fu/scripts/chalk.scm
	* plug-ins/script-fu/scripts/chip-away.scm
	* plug-ins/script-fu/scripts/comic-logo.scm
	* plug-ins/script-fu/scripts/coolmetal-logo.scm
	* plug-ins/script-fu/scripts/crystal-logo.scm
	* plug-ins/script-fu/scripts/drop-shadow.scm
	* plug-ins/script-fu/scripts/gimp-headers.scm
	* plug-ins/script-fu/scripts/gimp-labels.scm
	* plug-ins/script-fu/scripts/glowing-logo.scm
	* plug-ins/script-fu/scripts/gradient-bevel-logo.scm
	* plug-ins/script-fu/scripts/image-structure.scm
	* plug-ins/script-fu/scripts/neon-logo.scm
	* plug-ins/script-fu/scripts/perspective-shadow.scm
	* plug-ins/script-fu/scripts/starburst-logo.scm
	* plug-ins/script-fu/scripts/starscape-logo.scm
	* plug-ins/script-fu/scripts/textured-logo.scm
	* plug-ins/script-fu/scripts/title-header.scm
	* plug-ins/script-fu/scripts/waves-anim.scm
	* plug-ins/xjt/xjt.c: changed accordingly.

2005-07-10  Sven Neumann  <sven@gimp.org>

	* app/batch.c (batch_run): unified strings.

2005-07-10  Hans Breuer  <hans@breuer.org>

	* **/makefile.msc app/gimpcore.def : updated
	* app/widgets/gimpcontrollerlist.c : dont include 
	"gimpmessagedialog.c" to avoid redefinitions. 
	Instead include gimpmessagebox.h and gimpmessagedialog.h

	* plug-ins/common/raw.c : include <io.h>
	* plug-ins/common/screenshot.c : make it compile. It
	still has no code to actually work on win32.

2005-07-10  Sven Neumann  <sven@gimp.org>

	* app/base/segmentator.[ch]: ported to GIMP data structures. There
	are still some TODOs, smooth_mask() isn't implemented yet.

	* app/core/Makefile.am
	* app/core/gimpdrawable-foreground-extract.[ch]: thin wrapper around
	the new segmentation algorithm.

	* tools/pdbgen/pdb/drawable.pdb: added a first draft of a PDB API
	for foreground extraction.

	* app/pdb/drawable_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpdrawable_pdb.[ch]: regenerated.

2005-07-09  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.c: removed if(image) checks where the image
	can't be NULL.

2005-07-09  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-surround.[ch]: formatting.

	* app/core/gimpchannel.c (gimp_channel_real_feather):
	gaussian_blur_region() writes to the pixel data, need to initialize
	the pixel region with dirty == TRUE;

	* app/paint-funcs/paint-funcs-generic.h: formatting.

2005-07-09  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpsamplepointeditor.[ch]: added "sample-merged"
	property and API. Pass it to gimp_image_pick_color().

	* app/actions/Makefile.am
	* app/actions/actions.c
	* app/actions/sample-point-editor-actions.[ch]
	* app/actions/sample-point-editor-commands.[ch]: actions and
	callbacks for the sample point editor's menu.

	* app/widgets/gimphelp-ids.h: its help IDs.

	* app/menus/menus.c
	* menus/Makefile.am
	* menus/sample-point-editor-menu.xml: the sample point editor menu.

2005-07-09  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-pick-color.c (gimp_image_pick_color): if
	sample_merged is FALSE and drawable is NULL, just get the image's
	active drawable instead of bailing out.

	* app/widgets/gimpcursorview.c (gimp_cursor_view_update_cursor):
	use gimp_image_pick_color() insted of duplicating its code.

2005-07-09  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewabledialog.c: ellipsize the name label.

2005-07-09  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcursorview.[ch]: added boolean "sample-merged"
	property, API and GUI. Pick from the active drawable if it's
	FALSE.

	* app/actions/Makefile.am
	* app/actions/actions.c
	* app/actions/cursor-info-actions.[ch]
	* app/actions/cursor-info-commands.[ch]: new files with actions
	and callbacks for the cursor info dialog's menu.

	* app/widgets/gimphelp-ids.h: help IDs for above actions.

	* app/actions/dialogs-actions.c
	* app/dialogs/dialogs.c: follow help ID change.

	* app/menus/menus.c
	* menus/Makefile.am
	* menus/cursor-info-menu.xml: add the cursor-info menu.

	* app/dialogs/dialogs-constructors.c: pass the menu factory to
	gimp_cursor_view_new().

2005-07-09  Sven Neumann  <sven@gimp.org>

	* app/base/segmentator.c: plugged memory leaks.

2005-07-08  Sven Neumann  <sven@gimp.org>

	* app/base/segmentator.c: minor cleanup, use a GQueue instead of a
	custom queue implementation.

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcursorview.c (gimp_cursor_view_update_cursor):
	pass the color index value to gimp_color_frame_set_color() so it
	would show up in the frame if we actually picked from indexed
	things.

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpclonetool.c: initialize the parent_class pointer
	with NULL.

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_new): enable
	remote files: set local_only to FALSE if the PDB has
	"file_uri_load/save" procedures (yes, this is questionable).

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* libgimpcolor/gimpbilinear.c
	* libgimpwidgets/gimppreviewarea.c: fix some uninitialized stuff
	gcc 4.0 was choking about.

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppageselector.c (gimp_page_selector_class_init):
	added and fixed some API docs.

2005-07-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: fixed spelling of Fractal.

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.h: include gimpscrolledpreview.h

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* app/actions/edit-commands.c
	* app/actions/tool-options-commands.c: made the "Reset all tool
	options" and "Clear undo history" dialogs modal and simplified the
	code to use gimp_dialog_run() instead of a separate callback
	function.

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppageselector.[ch]: moved all instance members
	to a private struct.

2005-07-08  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppageselector.[ch]: fixed horizontal layout to
	not always use multiples of the default item width. Use the
	maximum thumbnail icon width instead. Also fixes keynav since it
	doesn't trigger a GTK+ bug any more.

2005-07-08  Sven Neumann  <sven@gimp.org>

	* app/base/segmentator.[ch]: applied GIMP coding style, switch to
	glib functions for memory allocation.

2005-07-08  Sven Neumann  <sven@gimp.org>

	* app/base/Makefile.am
	* app/base/segmentator.[ch]: added foreground extraction
	algorithm.  This code is contributed by Gerald Friedland. Please
	see the comments in the code for links to further information.
	This is work in progress. Don't expect it to do anything yet.

2005-07-07  Michael Natterer  <mitch@gimp.org>

	* app/actions/documents-actions.c
	* app/actions/documents-commands.[ch]
	* app/widgets/gimphelp-ids.h
	* menus/documents-menu.xml: added "Copy Image Location" to the
	document history popup menu which copies the image's URI to
	clipbpard and primary.

2005-07-07  Sven Neumann  <sven@gimp.org>

	* app/actions/gradient-editor-commands.c
	* app/widgets/gimpcolordialog.c
	* app/widgets/gimpdock.c
	* plug-ins/gflare/gflare.c
	* plug-ins/script-fu/script-fu-server.c: set alternative button
	order in some places that were missed earlier. Spotted by Stephan
	Binner.

2005-07-06  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpactionview.c (gimp_action_view_new): set a
	search column.

2005-07-06  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpbrowser.c: set the count label in italic.

	* plug-ins/dbbrowser/gimpprocbrowser.c
	* plug-ins/dbbrowser/plugin-browser.c: try to make it more obvious
	that the list is the result of a query by explicitely mentioning
	this in the summary below the list.

2005-07-06  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins-query.c (match_strings): reverted previous
	change, it was bogus.

	* app/pdb/procedural-db-query.c: case-insensitive search for
	procedures.

2005-07-06  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-ins-query.c (match_strings): match
	case-insensitive.

	* libgimpwidgets/gimpbrowser.c: unset "focus-on-click" on the
	filter combo-box.

	* plug-ins/dbbrowser/plugin-browser.c: moved "Insertation Date"
	column all the way to the right and renamed to "Installation Date".

	* plug-ins/common/gauss.c: tweaked dialog packing.

2005-07-05  Manish Singh  <yosh@gimp.org>

	* INSTALL
	* configure.in: Allow gtkhtml2, svg, and lcms features to be disabled
	explicitly at configure time. Based on patch from John N. Laliberte,
	fixes bug #307704.

2005-07-06  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppageselector.c: added a frame around the
	thumbnails. The code is still a bit hackish... Frame stretching
	is a 1:1 copy from app/widgets/gimpviewrenderer-frame.c so it
	can be easily factored out).

2005-07-05  Sven Neumann  <sven@gimp.org>

	* app/core/cpercep.[ch]: renamed cpercep_init_conversions() to
	cpercep_init(); only initialize the tables on the first call.

	* app/core/gimpimage-convert.c: changed accordingly.

2005-07-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd_save.c: removed uesless g_malloc() wrapper.

2005-07-04  Sven Neumann  <sven@gimp.org>

	* configure.in
	* devel-docs/tools/Makefile.am: build the doc-shooter utility
	conditionally and explicitely link it with -lX11.

2005-07-03  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpframe.c: cleanups.

2005-07-01  Nathan Summers  <rock@gimp.org>

	Changes in preparation for integrating gimp-poppler.

	* configure.in: check for libpoppler.

	* plug-ins/common/postscript.c (query): don't register file_load_pdf
	if HAVE_POPPLER is defined

2005-07-02  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppageselector.c: some cleanup and API docs.

2005-07-01  Nathan Summers  <rock@gimp.org>

	* app/batch.c
	* app/config/gimprc-blurbs.h
	* app/core/gimpimage-convert.c
	* app/dialogs/user-install-dialog.c: grammar and other pedantic string
	changes.

2005-07-01  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version number to 2.3.3.

2005-07-01  Sven Neumann  <sven@gimp.org>

	* Made 2.3.2 development release.

2005-07-01  Akkana Peck  <akkana@cvs.gnome.org>

	* app/actions/plug-in-actions.c
	* menus/image-menu.xml.in: Rename Effects menu's action to
	plug-in-effects-menu (missed during image menu reorg).

2005-07-01  Sven Neumann  <sven@gimp.org>

	* Makefile.am (SUBDIRS): added po-tips.

	* app/Makefile.am (dist-dump-gimprc): don't needlessly write to
	the source directory.

	* data/tips/Makefile.am (EXTRA_DIST): added tipsdata_DATA.

2005-07-01  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppageselector.c: added more API documentation.

2005-07-01  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c: load an embedded ICC profile and
	attach it using the "icc-profile" parasite.

	* plug-ins/jpeg/jpeg-save.c: look for the "icc-profile" parasite
	and embed the profile in the JPEG file if it is available.

2005-07-01  Manish Singh  <yosh@gimp.org>

	* plug-ins/jpeg/jpeg-save.c: Initialize restart markers check button
	accordingly from defaults. Fixes bug #309091, patch from
	David 'Bombe' Roden.

2005-06-30  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimppageselector.[ch]: added API to set/get
	the label for each page.

2005-06-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/Makefile.am
	* plug-ins/jpeg/jpeg-icc.[ch]: copied code from lcms that reads
	and writes ICC profiles from/to JPEG files. Not yet used at all.

2005-06-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/*/*.c: use the canonical form of signal names.

2005-06-28  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgetsenums.[ch]: added enum
	GimpPageSelectorTarget which can be one of { LAYERS, IMAGES }
	(suggestions for a better name welcome).

	* libgimpwidgets/gimppageselector.[ch]: added "target" property
	and a combo box to select a target. Removed GimpFrame around inner
	widgets again. Set a minimum width on the items so the "Page xxx"
	text doesn't wrap for pages smaller than 1000.

2005-06-27  Michael Schumacher  <schumaml@cvs.gnome.org>
	
	* libgimpwidgets/gimppageselector.c: fixed a typo: 
	thmbnail -> thumbnail

2005-06-27  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimppageselector.[ch]: made range API public.

2005-06-27  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppageselector.[ch]: added "Select All/None"
	buttons and a "Select Range" entry which allows entering of page
	ranges manually (e.g. "1,6,8,10-16").

2005-06-27  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimpwidgets-constructors.c: added missing casts.

2005-06-27  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h
	* libgimpwidgets/gimppageselector.[ch]: new widget, GimpPageSelector
	which will be used to select which pages to open from multi-page
	documents (e.g. PS, PDF, TIFF). Work in progress!

2005-06-27  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpenumcombobox.[ch]: added new constructor
	gimp_enum_combo_box_new_with_model(). Also override the "model"
	property to make it clear that GimpEnumComboBox expects to be
	used with GimpEnumStore.

	* libgimpwidgets/gimpwidgets.def: updated.

	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimpwidgets-constructors.c: use the new constructor.

	* libgimpwidgets/gimpenumlabel.h
	* libgimpwidgets/gimpenumstore.h
	* libgimpwidgets/gimpintcombobox.h
	* libgimpwidgets/gimpintstore.h: use "parent_class", not
	"parent_instance" when including the parent struct.

2005-06-27  Sven Neumann  <sven@gimp.org>

	* app/actions/debug-commands.c: fixed memory profile debug action.

2005-06-27  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_lcms.c (cdisplay_lcms_configure): gracefully
	handle a NULL config until we have fixed creation of color display
	modules so that they always have a reference to GimpColorConfig.

2005-06-27  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolordisplayeditor.c: dialog layout tweaks.

2005-06-26  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/Makefile.am: actually define pygimpdir in terms
	of pygimpbase.

2005-06-27  Sven Neumann  <sven@gimp.org>

	* menus/Makefile.am
	* menus/menus.xsl
	* menus/toolbox-menu.xml.in: readded the Debug menu but changed
	the XSLT and the build rules so that it is only included in the
	development versions.

2005-06-26  Manish Singh  <yosh@gimp.org>

	* app/core/gimpenvirontable.c: feed environment values through
	gimp_config_path_expand, so ${gimp..} variables can be used.

	* plug-ins/pygimp/Makefile.am: define PYTHONPATH in terms of
	${gimp_plug_in_dir}. Use ; as a path separator on windows.

	With this final changes, pygimp should work out of the box on
	Win32 now. Thanks to Michael Schumacher and lode leroy for
	figuring out the high level details and testing.

2005-06-27  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-dump.c (dump_gimprc_manpage): don't dump
	properties that have the GIMP_PARAM_IGNORE flag set.

2005-06-26  Sven Neumann  <sven@gimp.org>

	* libgimp/gimp.def: added gimp_get_color_configuration.

2005-06-25  Karine Delvare  <kdelvare@nerim.net>

	* plug-ins/FractalExplorer/FractalExplorer.c: Add an apply button
	and remove the frame around the scrolled window.

2005-06-26  Manish Singh  <yosh@gimp.org>

	* libgimp/gimpgimprc.c (gimp_get_color_configuration): cast to
	GIMP_CONFIG() for gimp_config_deserialize_string().

2005-06-26  Sven Neumann  <sven@gimp.org>

	* data/tips/Makefile.am
	* data/tips/fortunes.xsl: let the transformation work on the
	multi-language XML file and pass a language parameter to it.

2005-06-26  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.c: use dgettext() instead of
	gettext() and try to obtain the translation domain from the type.
	Fixes i18n of tooltips on property widgets (bug #307756).

	* libgimpconfig/gimpcolorconfig.c: set a translation domain.

2005-06-26  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_lcms.c: added tooltips with more information on
	the used profiles.

2005-06-26  Tor Lillqvist  <tml@novell.com>

	* app/tools/gimppainttool.c (gimp_paint_tool_draw): Store the
	GimpBrushCore::brush_bound_segs as sorted (the result of
	sort_boundary), as the only place where it is used
	(gimp_draw_tool_draw_boundary()) would sort it each time it is
	called anyway.

	* app/tools/gimpdrawtool.c (gimp_draw_tool_draw_boundary):
	Correspondingly we now don't have to sort the boundary here.

2005-06-26  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/gimprc.pdb: allow to access (read-only) the
	current color management configuration through the PDB.

	* libgimp/gimpgimprc_pdb.[ch]
	* app/pdb/gimprc_cmds.c
	* app/pdb/internal_procs.c: regenerated.

	* libgimp/Makefile.am
	* libgimp/gimp.h
	* libgimp/gimpgimprc.[ch]: wrap the new PDB function to make it
	easier to use from plug-ins. This change adds a dependency on
	libgimpconfig to libgimp.

	* gimp.pc.in: changed accordingly.

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gflare/gflare.c: no need to include gimpconfig.h
	explicitely any longer.

	* libgimp/gimpfontselectbutton.c: fixed gtk-doc comments.

2005-06-26  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_lcms.c: also use bold, right-aligned labels here.

2005-06-25  Manish Singh  <yosh@gimp.org>

	* app/core/gimpinterpreterdb.c: eat CRs too, since they might be
	there on Win32 systems.

2005-06-25  Manish Singh  <yosh@gimp.org>

	* configure.in: introduce a notion of runtime path to the python
	interpreter, for the pygimp.interp file.

	* plug-ins/pygimp/Makefile.am: use it here.

2005-06-25  Manish Singh  <yosh@gimp.org>

	* configure.in: attempt to work around weird escaping behavior
	in the windows shell when converting backslashes to forward
	slashes.

2005-06-25  Manish Singh  <yosh@gimp.org>

	* configure.in: convert backslashes to forward slashes for python
	stuff on Win32.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpimagepropview.c: use bold and right-aligned
	labels for the label titles.

2005-06-25  Michael Natterer  <mitch@gimp.org>

	* Makefile.am: added all-local target which rebuilds AUTHORS.

2005-06-25  Karine Delvare  <kdelvare@nerim.net>

	* AUTHORS
	* app/dialogs/authors.h: regenerated.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpimagepropview.c (gimp_image_prop_view_update):
	use gimp_enum_get_value() to avoid string duplication.

2005-06-25  Karine Delvare  <kdelvare@nerim.net>

	* authors.xml: added Akkana Peck to contributors and updated my
	last name.
	
	* po/fr.po: fixed typo.

2005-06-25  Karine Delvare  <kdelvare@cvs.gimp.org>

	* plug-ins/FractalExplorer/FractalExplorer.c: activate fractal on
	double-click rather than select.

2005-06-25  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/maze/maze_face.c: First step in changing the UI to match
	the layout suggested in bug #82591.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolordisplayeditor.c: shortened bold labels.

2005-06-24  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/Makefile.am: drop the module suffix from the
	filename of the dynamic libraries.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c
	* modules/cdisplay_lcms.c: use italic text for info labels.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolordisplayeditor.c: use a GtkVPaned.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_lcms.c (cdisplay_lcms_configure): show the names
	of the color profiles that are used.

2005-06-24  Tor Lillqvist  <tml@novell.com>

	* app/display/gimpcanvas.h: Add new GimpCanvasStyle value,
	GIMP_CANVAS_STYLE_XOR_DOTTED.

	* app/display/gimpcanvas.c (gimp_canvas_gc_new): Implement it like
	GIMP_CANVAS_STYLE_XOR_DASHED, except that we set the dash pattern
	to a single-pixel on-off one.

	* app/tools/gimpdrawtool.c (gimp_draw_tool_draw_boundary): Sort
	the boundary so that we can draw each connected group of segments
	using gimp_canvas_draw_lines(). (Even if we would still use
	gimp_canvas_draw_segments(), the boundary would have to be sorted
	so that the XOR drawing and GDK_CAP_NOT_LAST cooperate properly.)

	Use GIMP_CANVAS_STYLE_XOR_DOTTED so the outline doesn't look too
	heavy.

	Remove the dubious code snippet that offset some segments by one
	pixel. It didn't do what the comment claimed, and why one would
	need to do what the comment said, or what it actually did, is
	unclear.

	Now brush outlines shouldn't have gaps any longer. (#308710)

2005-06-24  Manish Singh  <yosh@gimp.org>

	* configure.in: define PYLINK_LIBS on Win32, since DLLs need to have
	all their symbols fully resolved at link time.

	* plug-ins/pygimp/Makefile.am: link python modules with PYLINK_LIBS.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: relabel the profile used for
	softproofing to "Print simulation profile".

	* libgimpconfig/gimpcolorconfig.c: improved blurb.
	
	* modules/cdisplay_lcms.c (cdisplay_lcms_configure): show filenames
	of profiles; will be replaced by real profile information.

2005-06-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h
	* libgimpwidgets/gimpenumlabel.[ch]: added new widget GimpEnumLabel.

	* libgimpwidgets/gimppropwidgets.[ch]: added
	gimp_prop_enum_label_new().

	* libgimpwidgets/gimpwidgets.def: updated.

	* modules/cdisplay_lcms.c (cdisplay_lcms_configure): started to
	add a view on the current color managment configuration.

2005-06-24  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/Makefile.am: build all libraries with no-undefined.
	Ignore doc stuff for now, since it's ancient and needs to be massively
	revised.

	* configure.in: don't generate plug-ins/pygimp/doc/Makefile

2005-06-24  Manish Singh  <yosh@gimp.org>

	* acinclude.m4: split out into separate files...

	* m4macros/alsa.m4
	* m4macros/gimpprint.m4
	* m4macros/gtk-doc.m4
	* m4macros/pythondev.m4: ... and put them here.

	* m4macros/Makefile.am: dist the above files.

2005-06-24  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/text-circle.scm: Incorporated changes
	made by Daniel P. Stasinski in his text-circle2.scm script. Letters
	are now placed properly for both positive and negative fill angles.
	Last(?) fix for bug #144588.

2005-06-24  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: added a mnemonic.

	* libgimpwidgets/gimppropwidgets.c
	(gimp_prop_file_chooser_button_new): embed the button in an
	event-box if the param_spec provides a blurb to be used as a
	tooltip.

	* libgimpconfig/gimpcolorconfig.c: improved blurbs.

2005-06-24  Manish Singh  <yosh@gimp.org>

	* libgimpcolor/gimpcolor.def: add gimp_rgba_parse_css

2005-06-24  Sven Neumann  <sven@gimp.org>

	* app/actions/image-actions.c
	* app/actions/layers-actions.c
	* app/dialogs/image-properties-dialog.c: use GTK_STOCK_PROPERTIES
	as stock icon for property menu items and dialogs.

2005-06-24  Sven Neumann  <sven@gimp.org>

	* app/core/gimppdbprogress.[ch]: removed an incomplete and unused
	function.

2005-06-24  Sven Neumann  <sven@gimp.org>

	* app/pdb/procedural_db.c (procedural_db_execute): if we end up
	without any return values, assume an execution error instead of
	crashing (bug #308904).

2005-06-24  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_lcms.c (cdisplay_lcms_get_display_profile):
	increased maximum property size, added debug output.

2005-06-24  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_lcms.c: implement the configure method and tell
	the user where this module can be configured.

2005-06-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/png.c: some code cleanup, no real changes. 

2005-06-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/png.c (save_image): 
	* app/dialogs/preferences-dialog.c: added a check button to control
	the "display-profile-from-gdk" option.

	* modules/cdisplay_lcms.c (cdisplay_lcms_get_display_profile):
	fixed use of gdk_property_get(). Return NULL if no display profile
	can be obtained.

2005-06-24  Sven Neumann  <sven@gimp.org>

	Added basic support for the proposed ICC Profiles In X Specification
	(http://burtonini.com/temp/xicc-specification-0.1.html).
	
	* libgimpconfig/gimpcolorconfig.[ch]: added a configuration option
	"display-profile-from-gdk", default to TRUE.

	* modules/cdisplay_lcms.c: try to retrieve the display color
	profile from the "_ICC_PROFILE" property on the default screen.

2005-06-23  Akkana Peck  <akkana@shallowsky.com>

	* app/actions/plug-in-actions.c
	* menus/image-menu.xml.in
	* plug-ins/Lighting/lighting_main.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/convmatrix.c
	* plug-ins/common/depthmerge.c
	* plug-ins/common/film.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/lic.c
	* plug-ins/common/nova.c
	* plug-ins/common/sparkle.c
	* plug-ins/common/vpropagate.c
	* plug-ins/gflare/gflare.c
	* plug-ins/pygimp/doc/pygimp.sgml
	* plug-ins/pygimp/doc/pygimp.html
	* plug-ins/pygimp/doc/structure-of-plugin.html
	* plug-ins/pygimp/plug-ins/clothify.py
	* plug-ins/pygimp/plug-ins/shadow_bevel.py
	* plug-ins/script-fu/script-fu.c
	* plug-ins/script-fu/scripts/clothify.scm
	* plug-ins/script-fu/scripts/drop-shadow.scm
	* plug-ins/script-fu/scripts/erase-rows.scm
	* plug-ins/script-fu/scripts/perspective-shadow.scm
	* plug-ins/script-fu/scripts/predator.scm
	* plug-ins/script-fu/scripts/weave.scm
	* plug-ins/script-fu/scripts/xach-effect.scm: Reorganize
	the Image window's Filters menu, as discussed in bug #116145.

2005-06-23  Sven Neumann  <sven@gimp.org>

	* app/actions/plug-in-actions.c (plug_in_actions_last_changed): call
	plug_in_actions_update() to update the sensitivity of the last used
	plug-in entries.

2005-06-23  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/font-map.scm: Updated to fix problems
	related to change in handling of string arrays (see bug #168290).
	Fixes bug #308681.

2005-06-23  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpintcombobox.c (gimp_int_combo_box_new_valist)
	(gimp_int_combo_box_new_array): no need to create a new list store;
	gimp_int_combo_box_init() already did that for us.

2005-06-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/grid.c: draw the intersection on top of the grid.
	Fixes bug #308754.

2005-06-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/shift.c: shift whole rows/columns, instead of
	tiles. Fixes bug #308748.

2005-06-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-console.c: removed redundant labels.

2005-06-23  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpbrowser.[ch]: added the widget living in the
	right_vbox to the GimpBrowser struct instead of attaching it to
	the browser.

2005-06-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/FractalExplorer.c: applied a patch from
	Karine Delvare that removes an obsolete frame.

	* plug-ins/FractalExplorer/Makefile.am
	* plug-ins/FractalExplorer/logo.h: removed logo now that the About
	dialog is gone.
	
2005-06-22  Michael Natterer  <mitch@gimp.org>

	* libgimpconfig/gimpconfig-deserialize.h
	* libgimpconfig/gimpconfig-error.h
	* libgimpconfig/gimpconfig-iface.h
	* libgimpconfig/gimpconfig-params.h
	* libgimpconfig/gimpconfig-path.h
	* libgimpconfig/gimpconfig-serialize.h
	* libgimpconfig/gimpconfig-utils.h: added G_BEGIN_DECLS/G_END_DECLS.

2005-06-22  Sven Neumann  <sven@gimp.org>

	* menus/image-menu.xml.in: added Edit->Preferences since that
	seems to be the standard location nowadays (bug #157613).

2005-06-22  Sven Neumann  <sven@gimp.org>

	* app/actions/plug-in-actions.c: unified spelling of "Re-Show".

2005-06-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mblur.c: switch to a more compact dialog layout.

2005-06-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/mblur.c: add option of blurring inward
	or outward for zoom, should fix bug #142968.
	
2005-06-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/FractalExplorer/FractalExplorer.[ch]: merged in a patch
	from Karine Delvare with further UI improvements (see bug #140202).

2005-06-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/newsprint.c: remove "optimization" that interacts
	badly with preview; fixes bug #161573.
	
2005-06-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/retinex.c:  initialize memory before using.
	Fixes bug #157915.

2005-06-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimplayer-floating-sel.c: set "Keep Transparency"
	FALSE when creating floating sel; see bug #161042.

2005-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c: minor changes, mainly to the
	Rescan dialog.

2005-06-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/FractalExplorer.c: applied a patch from
	Karine Delvare that ports the list to GtkTreeView and replaces the
	XPM icons with stock icons. Fixes bug #140202.

	* plug-ins/FractalExplorer/Makefile.am
	* plug-ins/FractalExplorer/pix_data.h: removed this file.

2005-06-21  Sven Neumann  <sven@gimp.org>

	* app/actions/documents-commands.c: added a second text to the
	confirmation dialog; changed the primary text.

2005-06-21  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimphelp-ids.h: added missing id to fix the build.

2005-06-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/laplace.c: don't normalize the result.
	Fixes bug #306874?

2005-06-20  Michael Natterer  <mitch@gimp.org>

	* app/actions/documents-actions.c
	* app/actions/documents-commands.[ch]
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimphelp-ids.h
	* menus/documents-menu.xml: added "Clear document history" action,
	button, menu item and confirm dialog (bug #140001).

2005-06-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/noisify.c: rename as "plug-in-rgb-noise"
	with menu entry "RGB Noise".  Leave "plug-in-noisify" for
	backward compatibility.

	* plug-ins/common/scatter_hsv.c: rename as "plug-in-hsv-noise"
	with menu entry "HSV Noise".  Leave "plug-in-scatter-hsv" for
	backward compatibility.

2005-06-20  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_new): set the
	gravity of the image window to CENTER. Gives much better behaviour
	for "resize-windows-on-zoom".

2005-06-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_get_new_pixbuf):
	simplified, use the eek wilber icon if the file doesn't exist.

2005-06-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c: string fixes (bug #308134).

2005-06-17  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]: pass GimpImageBaseType to
	extract_from_region() instead of some anonymous integer. Added
	some const qualifiers.

2005-06-17  Sven Neumann  <sven@gimp.org>

	* app/core/gimpselection.c (gimp_selection_extract): fixed
	long-standing bug in the calculation of the depth of the
	tile-manager created when copying from an indexed drawable.

2005-06-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/unsharp-mask.scm: removed menu
	registration (bug #307535).

2005-06-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gee.c
	* plug-ins/common/gee_zoom.c: don't register any menu entries
	(see bug #307998).

	* app/actions/plug-in-actions.c
	* menus/image-menu.xml.in: removed Toys submenu.

2005-06-17  Sven Neumann  <sven@gimp.org>

	* menus/image-menu.xml.in
	* plug-ins/Lighting/lighting_main.c
	* plug-ins/common/apply_lens.c
	* plug-ins/common/flarefx.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/nova.c
	* plug-ins/common/sparkle.c
	* plug-ins/gflare/gflare.c
	* plug-ins/pygimp/plug-ins/clothify.py
	* plug-ins/pygimp/plug-ins/foggify.py
	* plug-ins/pygimp/plug-ins/shadow_bevel.py
	* plug-ins/pygimp/plug-ins/whirlpinch.py
	* plug-ins/script-fu/script-fu.c
	* plug-ins/script-fu/scripts/*.scm: applied menu reorganization
	patch done by Akkana Peck (bug #116145).

	* plug-ins/common/film.c: renamed filter to "Filmstrip".

2005-06-16  Sven Neumann  <sven@gimp.org>

	* desktop/gimp.applications.in: expand the GIMP acronym.

	* desktop/gimp.keys.in: removed some cruft.

2005-06-16  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in
	* desktop/Makefile.am: allow to skip installation of desktop files
	by passing --without-desktop-dir.

2005-06-16  Sven Neumann  <sven@gimp.org>

	Redid the framework that deals with installing desktop files.
	Fixes bug #307705:

	* data/misc/*: removed.

	* desktop/*: readded the desktop files in a new directory.

	* Makefile.am
	* configure.in
	* data/Makefile.am: changed accordingly.

2005-06-16  Michael Natterer  <mitch@gimp.org>

	* tools/pdb/pdbgen/edit.pdb: revert accidential commit.

2005-06-16  Sven Neumann  <sven@gimp.org>

	* tools/test-clipboard.c (test_clipboard_copy_callback): exit from
	main loop if g_file_get_contents() fails.

2005-06-16  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-close.c: capitalization.

2005-06-15  Sven Neumann  <sven@gimp.org>

	* app/actions/file-actions.c
	* app/actions/plug-in-actions.c
	* app/actions/tool-options-actions.c: removed ellipsis from commands
	that only present a confirmation dialog.

	* app/actions/file-actions.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimpgrideditor.c: capitalization.

2005-06-15  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: fix capitalization on the
	Color Management page.

2005-06-15  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimplayertreeview.[ch]: there's no need to keep a
	reference to the anchor button.

2005-06-15  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_load_thumb): 
	* app/widgets/gimpthumbbox.c (gimp_thumb_box_auto_thumbnail):
	don't display a preview and don't attempt to create one if the
	image file does not exist any longer (bug #307672).

2005-06-15  Sven Neumann  <sven@gimp.org>

	* app/actions/dockable-actions.c (dockable_actions_update): set the
	"Detach Tab" action insensitive if the dockable is alone in its dock.

2005-06-15  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c (prefs_input_devices_dialog):
	changed window title as suggested in bug #307701.

2005-06-15  Michael Natterer  <mitch@gimp.org>

	* libgimpmodule/gimpmodule.[ch] (gimp_module_register_enum):
	deprecated. Changed implementation to simply call
	g_type_module_register_enum().

	* modules/cdisplay_colorblind.c
	* modules/cdisplay_proof.c: use g_type_module_register_enum() instead.

2005-06-14  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage.c (gimp_image_raise_layer)
	(gimp_image_raise_layer_to_top): allow to raise a layer w/o an
	alpha channel.

2005-06-14  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-gradients.c: renamed internal keys.

2005-06-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c: some dialog changes, hopefully to
	the better.

2005-06-13  Michael Natterer  <mitch@gimp.org>

	* app/core/gimplayer.c (gimp_layer_transform_color): copy the
	alpha channel from the correct source.

2005-06-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-transform-resize.c: added missing brackets in macros.

2005-06-11  Manish Singh  <yosh@gimp.org>

	* configure.in: if any of the pygimp dependencies aren't fulfilled,
	display a more informative message.

	* autogen.sh: depend on automake 1.8, so AM_PATH_PYTHON has a user
	defined failure mode. Also prefer automake 1.9.

2005-06-11  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.c: connect to "selection-changed"
	instead of "file-activated". Fixes bug #307146.

2005-06-11  Michael Natterer  <mitch@gimp.org>

	Allow to use the selected font in the text editor (bug #170299):

	* app/widgets/gimptexteditor.[ch]: added a "Use selected font"
	toggle and an API to set/get the selected font name.

	* app/tools/gimptextoptions.c: update the editor's font when the
	text option's font changes. Renamed text editor callbacks to
	gimp_text_options_editor_foo().

2005-06-10  Michael Natterer  <mitch@gimp.org>

	* configure.in: don't try to generate tips/Makefile.

2005-06-10  Sven Neumann  <sven@gimp.org>

	Switch to a more standard way of treating the translations for the
	startup tips (bug #171846):

	* Makefile.am
	* configure.in: removed tips directory; added data/tips and po-tips
	directories instead.

	* data/Makefile.am
	* data/AUTHORS
	* data/ChangeLog
	* data/README: removed these three outdated files.

	* data/tips: gimp.tips.xml and related files live here now.

	* po-tips: translations of the tips are found here now.

	* README.i18n: changed accordingly.

2005-06-10  Michael Natterer  <mitch@gimp.org>

	Fix bug #134304, as far as it's fixable:

	* app/core/gimp-edit.c (gimp_edit_paste_as_new): handle pasting
	buffers without alpha. Also don't uselessly convert all buffers
	to RGB but create an image in the buffer's color space.

	(gimp_edit_extract): call gimp_selection_extract() with
	add_alpha = FALSE.

	* app/core/gimpselection.c (gimp_selection_extract): set add_alpha
	to TRUE if there is a selection, because the selection could have
	any shape.

2005-06-09  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version number to 2.3.2.

2005-06-09  Sven Neumann  <sven@gimp.org>

	* Made 2.3.1 development release.

2005-06-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/laplace.c: minor code cleanup.

2005-06-08  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h: removed blurbs for unused preferences.

	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.c: changed accordingly.

2005-06-08  Sven Neumann  <sven@gimp.org>

	Removed "stingy-memory-use" all over the place. This feature was
	really not that useful anymore. The GUI for the preference option
	was already removed for GIMP 2.2.  Fixes bug #306617.

	* app/config/gimpbaseconfig.[ch]: set IGNORE flag on
	"stingy-memory-use".

	* app/config/gimpcoreconfig.h: added a comment that the
	font_path_writable variable is unused.

	* app/base/temp-buf.[ch]: removed code that used to deal with
	swapping temp-bufs to disk.

	* app/base/base.c: made base_config a static variable.
	
	* app/core/gimpdata.[ch]
	* app/core/gimpdatafactory.[ch]: removed stingy_memory_use
	parameter from data construction methods.

	* app/core/gimp-gradients.c
	* app/core/gimpbrush-load.[ch]
	* app/core/gimpbrush.[ch]
	* app/core/gimpbrushgenerated.[ch]
	* app/core/gimpbrushpipe.[ch]
	* app/core/gimpcontext.c
	* app/core/gimpgradient-load.[ch]
	* app/core/gimpgradient.[ch]
	* app/core/gimppalette-import.c
	* app/core/gimppalette.[ch]
	* app/core/gimppattern.[ch]: changed accordingly.

2005-06-05  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpaligntool.[ch]: improve layout of controls.  Add
	radio buttons allowing selection of reference layer without
	using Ctrl modifier.  Handle removal of target or reference
	layers from image more correctly.  More to come.
	
2005-06-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmp.c
	* plug-ins/bmp/bmpread.c
	* plug-ins/bmp/bmpwrite.c: applied a (slightly modified) patch
	contributed by Brandon that adds support for reading and writing
	RGBA BMP files (bug #306339).

2005-06-07  Manish Singh  <yosh@gimp.org>

	* app/base/cpu-accel.[ch]: detect SSE3.

2005-06-07  Manish Singh  <yosh@gimp.org>

	* app/actions/dockable-actions.c (dockable_actions_update): cast
	the result of gtk_bin_get_child ().

2005-06-06  Michael Natterer  <mitch@gimp.org>

	* app/actions/dockable-actions.c (dockable_toggle_actions): use
	'B' instead of 'S' as mnemonic for "Show Button Bar".

2005-06-06  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_grid.[ch]
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_menu.[ch]
	* plug-ins/imagemap/imap_menu_funcs.[ch]
	* plug-ins/imagemap/imap_object_popup.[ch]
	* plug-ins/imagemap/imap_polygon.[ch]: more conversion to action based
	menus. Almost done.

2005-06-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig.c (gfig_load_from_parasite): only create the
	temporary file if there is a parasite to load.

2005-06-06  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcellrendererdashes.c: removed unused variable.

2005-06-06  Tor Lillqvist  <tml@novell.com>

	* libgimp/gimpui.def: Add gimp_font_select_button_*.

2005-06-05  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpfu.py
	* plug-ins/pygimp/gimpenums.py
	* plug-ins/pygimp/gimpenumsmodule.c: use old pygtk enum API so we
	still work with older pygtk versions.

2005-06-05  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/screenshot.c: make " no decorations" option
	work; problem pointed out by Jean-Luc Coulon on dev list.

2005-06-05  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewrendererbrush.c
	(gimp_view_renderer_brush_render_timeout): if the area is larger
	than the brush, center the brush.

2005-06-05  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcoloreditor.c
	* app/widgets/gimpcursorview.c
	* app/widgets/gimpdataeditor.c
	* app/widgets/gimpeditor.c
	* app/widgets/gimphistogrameditor.c
	* app/widgets/gimppaletteeditor.c: peek at the default interface to
	get the parent interface. Unconditionally chain up in get_aux_info()
	and set_aux_info() methods.

2005-06-04  Manish Singh  <yosh@gimp.org>

	* libgimp/Makefile.am: reorder to get the marshal files built first.

2005-06-04  Manish Singh  <yosh@gimp.org>

	* libgimp/gimpfontselectbutton.[ch]: new formal widget based on
	gimpfontmenu.[ch].

	* libgimp/gimpuimarshal.list: needed for new signal in above.

	* libgimp/gimpfontmenu.[ch]: deprecate, and thinly wrap around
	new GimpFontSelectButton for compatibility.

	* libgimp/gimpuitypes.h: add GimpFontSelectButton, as well
	as types for the future SelectButtons.

	* libgimp/gimpui.h
	* libgimp/Makefile.am: hook in the new widget.

	* plug-ins/common/film.c
	* plug-ins/script-fu/script-fu-interface.c: use new API.

2005-06-05  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdocked.[ch]
	* app/widgets/gimpeditor.[ch]: moved button-bar API to the
	GimpDocked interface.

	* app/widgets/gimpcontainereditor.c: implement the new interface
	methods and proxy them to the embedded docked.

	* app/actions/dockable-actions.c
	* app/actions/dockable-commands.c: changed accordingly.

2005-06-04  Manish Singh  <yosh@gimp.org>

	* libgimp/gimpimagecombobox.h
	* libgimp/gimpdrawablecombobox.h: fix the type macros so they work.

2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainerview.h: don't include gimpeditor.h.

	* app/widgets/gimpbufferview.c
	* app/widgets/gimpdocumentview.c
	* app/widgets/gimpfontview.c: include it here instead.

2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/actions/dockable-actions.c
	* app/actions/dockable-commands.[ch]
	* app/widgets/gimpeditor.[ch]
	* app/widgets/gimphelp-ids.h
	* menus/dockable-menu.xml.in: allow to show/hide the button-bar in
	GimpEditor. Should be merged into the GimpDocked interface.

2005-06-04  Manish Singh  <yosh@gimp.org>

	* plug-ins/helpbrowser/dialog.c: define _O_BINARY ourselves if
	it's not defined by any headers, and use that instead of #ifdefed
	calls to g_open.

2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpwidgets-utils.c (gimp_text_buffer_load):
	validate the iter after appending to the text buffer.

2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpmagnifytool.c (gimp_magnify_tool_button_release):
	fix calculation of zoom offsets in the case that dot-for-dot mode
	is not enabled (bug #306476).

2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdnd.c (gimp_dnd_get_viewable_icon): use the
	viewable's description in the drag icon. Use a larger preview.

	* app/widgets/gimpdockbook.c: tweak spacing and border-width of
	the tab widget if it is being used as drag icon.

2005-06-04  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorarea.[ch]: invalidate the buffer when
	the widget's sensitivity changes. Draw a stipple pattern on the
	insensitive color area.

	* libgimpwidgets/gimpcellrenderercolor.c: follow internal API change.

	* libgimpwidgets/gimpcolorbutton.c: pass GDK_BUTTON1_MASK as
	drag-mask. Doesn't work for whatever reason but it didn't work
	with GDK_BUTTON2_MASK either.

2005-06-04  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/common/webbrowser.c: use GetDesktopWindow() and SW_SHOW
	as suggested in bug #171200. Applied to both branches.

2005-06-04  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/helpbrowser/dialog.c: added #ifdef G_OS_WIN32 because
	O_BINARY isn't available on other platforms

2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdnd.c (gimp_dnd_get_viewable_icon): reduced the
	number of characters to show before ellipsizing the label.

	* libgimpwidgets/gimpcolorarea.c: added a "draw-border" property.

	* app/widgets/gimpcolorframe.c: draw a border around the color area.

2005-06-03  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/helpbrowser/dialog.c: added a O_BINARY to make sure
	that images are loaded correctly

2005-06-03  Manish Singh  <yosh@gimp.org>

	* libgimp/gimpdrawablecombobox.c: create the layer combo with the
	right type.

2005-06-03  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/Makefile.am
	* tools/pdbgen/enumcode-py.pl: removed, unneeded now.

2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolorframe.[ch]: added property for "mode",
	fixed some implementation issues.

	* app/widgets/gimpsamplepointeditor.c: create the color frames
	using g_object_new().

2005-06-03  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-api.h
	* plug-ins/pygimp/gimpmodule.c: export our API to other modules
	in a saner fashion. Also add checks_get_shades method.

	* plug-ins/pygimp/procbrowser.c: Use new export API.

	* plug-ins/pygimp/pygimp-drawable.c (drw_mask_intersect):
	use Py_BuildValue to build the tuple.

	* plug-ins/pygimp/pygimp-image.c (img_repr): capitalization fix.

	* plug-ins/pygimp/pygimp-rgb.c
	* plug-ins/pygimp/pygimpcolor.h
	* plug-ins/pygimp/gimpcolormodule.c: beginnings of a wrapper to
	libgimpcolor.

	* plug-ins/pygimp/gimpfu.py
	* plug-ins/pygimp/gimpenums.py
	* plug-ins/pygimp/gimpenumsmodule.c: use gimp enum API to find out
	our enums.

	* plug-ins/pygimp/Makefile.am: hook in all of the above.

2005-06-03  Manish Singh  <yosh@gimp.org>

	* configure.in: build pygimp by default.

2005-06-03  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimpcolorframe.[ch]: add "has-color-area" property,
	FALSE by default.

	* app/widgets/gimpsamplepointeditor.c: explicitly add a color
	area to the color frames.
	
2005-06-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdnd.c (gimp_dnd_get_viewable_icon): show the
	viewable's name in the drag icon.

2005-06-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainertreeview-dnd.c
	(gimp_container_tree_view_drop_status): bail out early if the view
	has no container (instead of crashing).

2005-06-03  Manish Singh  <yosh@gimp.org>

	* libgimpcolor/gimprgb.h: whitespace fix.

	* libgimpwidgets/gimpchainbutton.h
	* libgimpwidgets/gimpwidgetsenums.[ch]: move GimpChainPosition
	to a registered enum, and register GimpSizeEntryUpdatePolicy as
	as well.

	* libgimp/gimpuitypes.h
	* libgimp/gimpdrawablecombobox.[ch]: turn these into GObjects
	with their own types.

	* libgimp/gimpimagecombobox.c: use G_DEFINE_TYPE.

2005-06-03  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/enumcode.pl: make _gimp_enums_init public, so 
	language bindings can do early enum registration if needed.

	* libgimp/gimpenums.h
	* libgimp/gimpenums.c.tail: regenerated

	* gimp.c: call gimp_enums_init instead of _gimp_enums_init.

	* gimp.def: add newly exported function.

2005-06-03  Manish Singh  <yosh@gimp.org>

	* configure.in: require python 2.2.1, so True and False are always 
	there. Check for pygtk codegen stuff, we'll be using that in the
	future.

	* plug-ins/pygimp/plug-ins/*.py: Use True and False instead of
	TRUE and FALSE.

2005-06-03  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpitem-align.c
	* app/core/gimpitem-align.h (gimp_item_align): remove push_undo
	arg, useless as pointed out by mitch.

	* app/tools/gimpaligntool.c: changed correspondingly.

2005-06-04  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolorframe.[ch]: added API to show a number in
	front of the color area.

	* app/widgets/gimpsamplepointeditor.c: use the new API to put the
	sample points' numbers there.

2005-06-03  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpitem-align.[ch]: newly created to
	hold code for gimp_item_align().

	* app/core/Makefile.am: add new files
	
	* app/core/gimpitem.[ch]: remove code from here.

	* app/tools/gimpaligntool.c: fix includes and remove
	unneeded includes.
	
2005-06-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolorframe.c (gimp_color_frame_init): pack the
	color area and the labels into different vboxes to make the widget
	compact again.

2005-06-03  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* gimp/app/tools/Makefile.am
	* gimp/app/tools/gimp-tools.c
	* gimp/app/tools/gimpalignoptions.c
	* gimp/app/tools/gimpalignoptions.h
	* gimp/app/tools/gimpaligntool.c
	* gimp/app/tools/gimpaligntool.h: Add new tool for
	aligning layers etc, as described in bug #147437.

	* gimp/app/core/gimpitem.c
	* gimp/app/core/gimpitem.h (gimp_item_align): add
	function required by new tool.

	* gimp/app/core/core-enums.c
	* gimp/app/core/core-enums.h: add enum for alignment
	types.

	* gimp/themes/Default/images/stock-hcenter-24.png
	* gimp/themes/Default/images/stock-vcenter-24.png
	* gimp/libgimpwidgets/gimpstock.c
	* gimp/libgimpwidgets/gimpstock.h
	* gimp/themes/Default/images/Makefile.am
	* gimp/themes/Default/images/makefile.msc: add two
	stock symbols, modeled on the gravity symbols.

2005-06-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c (gimp_rectangle_tool_motion):
	Don't change function before creating new rectangle;
	cause of problem identified by Karine Delvare.
	
2005-06-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/screenshot.c: trap errors when running
	XGrabKey, to prevent bail-out on BadAccess error as
	reported by Jean-Luc Coulon on developers list; solution
	suggested by Simon Budig.
	
2005-06-02  Raphaël Quinet  <raphael@gimp.org>

	* data/images/gimp-splash.png: New splash.  A twist on the
	original PixelPusher concept by jimmac.

2005-06-01  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimpcolorframe.[ch]: add a color area, to make 
	sample points dialog show a swatch of color for each point.
	
2005-06-01  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpvectors.c: cosmetic change: Make the stroke IDs
	start from 1.

	* tools/pdbgen/pdb/vectors.pdb: Two more wrappers:
	vectors_stroke_remove and vectors_stroke_interpolate. Undo still
	unsolved.

	* app/pdb/internal_procs.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpvectors_pdb.[ch]: regenerated.

2005-05-31  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpbrightnesscontrasttool.[ch]: Allow tool to be 
	operating by clicking and dragging inside the image, as
	described in bug #165330.

2005-05-31  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/common/CEL.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gee.c
	* plug-ins/common/hot.c
	* plug-ins/common/pat.c
	* plug-ins/common/pcx.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/tiler.c
	* plug-ins/common/zealouscrop.c: GPL license added for plug-ins
	without any license. If any of the authors objects we will
	probably have to remove the plug-in.

2005-05-31  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/gfig/gfig-dobject.c: plug memory leak: Fixes #305990

2005-05-31  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_selection.c: plug memory leak. Fixes #305995.

2005-05-31  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c (select_window_x11): use XGrabKey()
	to grab the Escape key instead of doing a full keyboard grab.

2005-05-31  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpaction.c (gimp_action_set_proxy): added missing
	cast.

	* app/core/gimpprojection-construct.c: code cleanup.

2005-05-31  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpstatusbar.c (gimp_statusbar_init): enable
	ellipsation on the progressbar. Fixes initial display width
	calculation for long statusbar strings.

2005-05-31  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpaction.c (gimp_action_set_proxy): re-enabled
	tooltips on the "Open Recent" menu items, using an evil but
	documented heuristic.

2005-05-31  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpenumwidgets.c
	(gimp_enum_stock_box_set_child_padding): don't leak the return
	value of gtk_container_get_children (bug #305994, spotted by Ted
	Kremenek).

	* app/config/gimprc-serialize.c (gimp_rc_serialize_properties_diff):
	don't leak the GList in the unlikely case of an error (bug #305992,
	spotted by Ted Kremenek).

2005-05-31  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette-import.c: applied patch from Joao
	S. O. Bueno Calligaris that adds support for loading PSP color
	palette files (bug #305956).

2005-05-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c: capitalization and mnemonics.

2005-05-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdnd.c (gimp_dnd_get_color_icon): pass
	GIMP_COLOR_AREA_CHECKS_SMALL instead of TRUE for the type of the
	GimpColorArea.

	* app/widgets/gimpcoloreditor.c: added a "context" property.

	* libgimpwidgets/gimpcolorarea.c (gimp_color_area_set_color):
	always use gimp_rgba_distance(), regardless of the area's type.

2005-05-28  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpmodule.c
	* plug-ins/pygimp/procbrowser.c: use DL_EXPORT for the init functions,
	maybe this will help Win32 builds. Also some minor cleanups.

2005-05-28  Manish Singh  <yosh@gimp.org>

	* libgimp/gimpuitypes.h
	* libgimp/gimpimagecombobox.[ch]: turn this into a GObject with its
	own type.

2005-05-28  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_about.c: use gtk_about_dialog instead of
	home-brewn stuff.

	* plug-ins/imagemap/imap_main.c 	
	* plug-ins/imagemap/imap_menu.c: minor clean-up.

2005-05-27  Sven Neumann  <sven@gimp.org>

	* (lots of files): Use the canonical form for signal names.
	
2005-05-27  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimphistogrameditor.[ch]: connect to "name-changed"
	of the active drawable and change the name displayed in the editor.

2005-05-27  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpeditor.[ch]: added a name label (with properties
	to show/hide and to set it).

	* app/widgets/gimpcontainergridview.[ch]
	* app/widgets/gimphistogrameditor.[ch]: removed the label here and
	use the functionality now provided by GimpEditor instead.

	* app/widgets/gimpcontainerpopup.c: changed accordingly.

2005-05-27  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimphistogrameditor.c: use a smaller font for the
	statistics.

2005-05-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c: reverted previous change for now.

2005-05-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c: mark properties as serializable.

2005-05-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c
	* plug-ins/helpbrowser/queue.[ch]: store the scroll offset in the
	history and set it when using the Back and Forward actions. Fixes
	bug #165022.

2005-05-26  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_set_highlight):
	destroy the regions allocated here.

2005-05-26  Sven Neumann  <sven@gimp.org>

	* app/dialogs/channel-options-dialog.c: fixed capitalization,
	removed trailing whitespace.

	* app/actions/channels-commands.c (channels_new_channel_response):
	also set the channel color if creating the channel by duplicating
	the selection.

	* app/actions/channels-commands.c
	* app/actions/qmask-commands.c: added mnemonics.

2005-05-26  Nathan Summers  <rock@gimp.org>

	* app/dialogs/channel-options-dialog.[ch]: added an "initialize from
	selection" option to the new channel dialog.

	* app/actions/channels-commands.c
	* app/actions/qmask-commands.c: modified accordingly.

2005-05-26  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c: added more properties.

2005-05-26  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.[ch]: added MIME type as a construct property
	to GimpData.

	* app/core/gimpbrush-load.c
	* app/core/gimpbrushgenerated.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpgradient-load.c
	* app/core/gimppalette.c
	* app/core/gimppattern.c: set the MIME type when loading a data
	object from file. MIME types need review and GimpPalette isn't
	quite done yet...

	* app/core/gimpdashpattern.c: cosmetics.

2005-05-25  Nathan Summers  <rock@gimp.org>

	* app/sanity.c (sanity_check_filename_encoding): made the
	G_FILENAME_ENCODING not or incorrectly set error message more
	idiomatic.

2005-05-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpoffsetarea.c (gimp_offset_area_expose_event):
	correctly handle very small target sizes.

2005-05-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpclipboard.[ch]: fixed gtk-doc comments.

2005-05-25  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpviewable.[ch]: added virtual function
	GimpViewable::get_size() and public API gimp_viewable_get_size()
	which return width and height and a boolean indicating if the
	viewable has a size at all.
	Added default implementation of GimpViewable::get_popup_size()
	using the new get_size() API.

	* app/core/gimpbrush.c
	* app/core/gimpbuffer.c
	* app/core/gimpdrawable.c
	* app/core/gimpimage.c
	* app/core/gimppattern.c: implement GimpViewable::get_size().

	* app/core/gimpbrush.c
	* app/core/gimppattern.c: removed GimpViewable::get_popup_size()
	implementations, the default one is good enough.

	* app/core/gimpbrushpipe.c (gimp_brush_pipe_get_popup_size):
	redirect to gimp_viewable_get_size() instead of duplicating its
	return values.

	* app/widgets/gimpcontainertreeview.c
	* app/widgets/gimpview.c: allow pixbuf dragging out of any
	viewable that has a size.

	* app/widgets/gimpdrawabletreeview.c: removed pixbuf dragging code
	here.

	* app/widgets/gimpdnd.c: set gimp busy around encoding/decoding
	pixbufs into/from GtkSelectionData, because it can be a time
	consuming operation.

2005-05-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox-dnd.c (gimp_toolbox_drop_pixbuf): fixed
	type of the dropped layer.

2005-05-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.c: ellipsize the dockable title if it
	is too wide.

	* app/widgets/gimpstrokeeditor.c: added mnemonic for the presets
	combo.

2005-05-25  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox-dnd.c: implemented dropping of pixbufs.
	Bail out early from all callbacks if gimp->busy is TRUE.

2005-05-25  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c: added --store option which tries to
	store a file in the clipboard manager, improved error reporting.

2005-05-24  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorselect.c: only set a horizontal size
	request on the vertical color bar.

2005-05-24  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpcolorconfig.c (gimp_color_config_set_property):
	plugged a small memleak.

2005-05-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfig/gfig.c: initialize GimpRGB and GFigContext structs
	before using them.

2005-05-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c (select_window_x11): also grab the
	keyboard and allow to cancel the operation using the Escape key.

2005-05-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c: always apply the selected delay.

2005-05-23  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcellrendererdashes.[ch]: we don't actually need to
	keep a pointer to the dashes array.
	(gimp_cell_renderer_dashes_render): respect horizontal padding.

	* app/widgets/gimpstrokeeditor.c: added 2 pixels horizontal
	padding for the dashes cell-renderer.

2005-05-23  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/helpbrowser/Makefile.am: added the missing -mwindows
	for OS_WIN32

2005-05-23  Tor Lillqvist  <tml@novell.com>

	* gimptool-win32.c.in (get_prefix): Don't crash if gimp.exe isn't
	found in PATH either.

2005-05-22  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/Makefile.am: changed gimpwidgetsenums.c rule to
	include the bits for "desc" and "help" support.

	* libgimpwidgets/gimpwidgetsenums.h: added "desc" and "help"
	strings for the GimpColorSelectorChannel enum.

	* libgimpwidgets/gimpwidgetsenums.c: added to CVS because it
	contains translatable strings now.

	* libgimpwidgets/gimpwidgets.def: changed accordingly.

	* libgimpwidgets/gimpcolorscales.c
	* libgimpwidgets/gimpcolorselect.c: removed duplicated arrays of
	strings here and get them from the type system.

2005-05-22  Sven Neumann  <sven@gimp.org>

	* tools/gimp-mkenums (parse_trigraph): use quotewords() from
	Text::ParseWords to split the trigraph. This function correctly
	deals with commas inside quotes.

	* app/core/core-enums.[ch]: tweaked descriptions in the
	GimpDashPreset enum.

2005-05-22  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdashpattern.c: minor cleanup.

	* app/widgets/gimpcellrendererdashes.c: don't draw a background,
	draw the dash pattern twice, use the correct widget state.

2005-05-21  Manish Singh  <yosh@gimp.org>

	* plug-ins/metadata/metadata.c (run): don't do pointer arithmetic
	with void *. Fixes bug #305005.

2005-05-22  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c: added --selection-type option which
	allows operating on any of PRIMARY, SECONDARY and CLIPBOARD.

2005-05-21  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdashpattern.[ch]: added utility functions to copy
	and to free a dash pattern.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h 
	* app/widgets/gimpcellrendererdashes.[ch]: added a simple cell
	renderer to visualize a dash pattern.

	* app/widgets/gimpstrokeeditor.c: show previews of the dash
	presets in the combo-box.

2005-05-21  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c (main): NULL terminate the options array.

2005-05-21  Sven Neumann  <sven@gimp.org>

	Allow to paste a new image using Ctrl-V (bug #169477):

	* menus/toolbox-menu.xml.in: added an accelerator for "edit-paste".

	* app/actions/edit-actions.c: keep "edit-paste" always enabled,
	even if no image is present.

	* app/actions/edit-commands.c (edit_paste_cmd_callback): forward
	to "edit-paste-as-new" if we are being called from the toolbox.
	
2005-05-21  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpuimanager.c: improved reporting of errors while
	parsing the menu definitions.

2005-05-21  Sven Neumann  <sven@gimp.org>

	* app/dialogs/convert-dialog.c: 
	* libgimp/gimpexport.c (export_convert_indexed): changed default
	dithering to GIMP_NO_DITHER (bug #303063).

2005-05-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorarea.c
	* libgimpwidgets/gimpcolorbutton.c: more object properties.

2005-05-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgetsenums.h
	* libgimpwidgets/gimpwidgetstypes.h: moved enums to a new file and
	register the GimpColorAreaType enum with the type system.

	* libgimpwidgets/gimpwidgets.def: updated.

	* libgimpwidgets/gimpcolorarea.c: added an object property.

2005-05-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorbutton.c: started to add object properties.

2005-05-20  Manish Singh  <yosh@gimp.org>

	* plug-ins/uri/uri-backend-wget.c (uri_backend_load_image): Fix ytpo
	in wget command line so it actually works.

2005-05-20  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpdashpattern.c: don't include "libgimpbase/gimpbase.h"

2005-05-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorbutton.c (gimp_color_button_clicked):
	made the color selection dialog transient to the window that
	contains the color button.

2005-05-20  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcoloreditor.c: moved the color picker button out
	of the row of notebook switching buttons next to the hex entry.

2005-05-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorselection.c: put the hex entry above the
	color history again.

	* libgimpwidgets/gimpcolorscales.c: do not allocate row spacing
	for the alpha row if it isn't visible.

2005-05-19  Manish Singh  <yosh@gimp.org>

	* plug-ins/jpeg/jpeg-save.c (save_image): don't do pointer arithmetic
	with void *. Fixes bug #304701.

2005-05-19  Manish Singh  <yosh@gimp.org>

	* app/config/test-config.c: Add casts to G_OBJECT() for
	gimp_config_diff().

2005-05-19  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolorscales.c: removed the hex entry from the
	GimpColorScales widget.

	* libgimpwidgets/gimpcolorselection.c: added it here instead.

	* app/widgets/gimpcoloreditor.[ch]: and here, next to the FG/BG
	editor.

2005-05-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpstrokeoptions.[ch]: renamed property "miter" to
	"miter-limit" and added a description to be used as a tooltip in
	the stroke editor.

	* app/core/gimpdrawable-stroke.c
	* app/widgets/gimpstrokeeditor.c: changed accordingly.

2005-05-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpstrokeoptions.[ch]
	* app/widgets/gimpdasheditor.c
	* app/widgets/gimpstrokeeditor.c: small change to the internal API
	to reduce code and conversion between GArray and GValueArray.

2005-05-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdashpattern.[ch]
	* app/widgets/gimpdasheditor.c: moved more code out of
	GimpDashEditor to gimpdashpattern.c. Fixed bug in last commit.

2005-05-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdashpattern.[ch]
	* app/widgets/gimpdasheditor.c: moved code out of GimpDashEditor
	to gimpdashpattern.c.

2005-05-19  Michael Natterer  <mitch@gimp.org>

	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/dbbrowser/gimpbrowser.[ch]: removed again...

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgetstypes.h
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetsmarshal.list
	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpbrowser.[ch]: ...and added here.

	* plug-ins/dbbrowser/gimpprocbrowser.c
	* plug-ins/dbbrowser/plugin-browser.c: changed accordingly.

	* plug-ins/dbbrowser/gimpprocbrowser.c: fixed searching by help.

2005-05-19  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdasheditor.c: use code from gimpdashpattern.c
	instead of duplicating it.

2005-05-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdashpattern.[ch]
	* app/core/gimpstrokeoptions.c: moved more code to the new files.

2005-05-19  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpdashpattern.[ch]: new files with code split out of
	gimpstrokeoptions.c.

	* app/core/gimpstrokeoptions.c: use gimp_dash_pattern_from_preset().

2005-05-19  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c: don't allow copy and paste at the same
	time, fixed exit codes.

2005-05-19  Michael Natterer  <mitch@gimp.org>

	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/dbbrowser/gimpprocbox.[ch]: removed.

	* plug-ins/dbbrowser/gimpbrowser.[ch]: new widget derived from
	GtkHPaned. Contains lots of common code from the procedure and
	plug-in browsers.

	* plug-ins/dbbrowser/gimpprocbrowser.c
	* plug-ins/dbbrowser/plugin-browser.c: use a GimpBrowser, lots of
	cleanups.

	* plug-ins/dbbrowser/gimpprocbrowser.c: support all possible search
	types. Addresses bug #301201.

2005-05-18  Sven Neumann  <sven@gimp.org>

	* app/actions/file-commands.c (file_open_dialog_show): set the
	file dialogs transient for the parent window (display or toolbox).

2005-05-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-snap.c: fix compilation on IRIX (bug #304685).

2005-05-18  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-appearance.c
	* app/display/gimpdisplayshell.c: removed the 2px border and
	replaced it with a 1px spacing in the main vbox. Makes the screen
	edges active when working in fullscreen mode (bug #165774).

2005-05-18  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell.c: hack around with gtk+ widget
	styles to get rid of the menubar padding in fullscreen mode.

2005-05-18  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c: implemented pasting.
	s/mime-type/target/g because that's what it is.

2005-05-18  Michael Natterer  <mitch@gimp.org>

	* tools/test-clipboard.c: cleanup.

2005-05-18  Michael Natterer  <mitch@gimp.org>

	* tools/Makefile.am
	* tools/test-clipboard.c: new file, a test hack for clipboard
	debugging.

2005-05-17  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/gimp-composite-sse2.c:
	Trying to be more flexible in register use so the compiler can do
	reloads without running out of registers when using optimisation
	modes other than 2.

	Avoid the message "error: can't find a register in class
	`GENERAL_REGS' while reloading `asm'"

	* app/composite/gimp-composite-x86.h
	Use more newlines in asm() macros to ensure that gcc gets the
	instruction count correct.  This is partially complete as of this
	commit.

2005-05-17  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version number to 2.3.1.

2005-05-17  Simon Budig  <simon@gimp.org>

	* tools/pdbgen/pdb/vectors.pdb: Make gimp_vectors_get_strokes()
	work, add gimp_vectors_stroke_translate()  (I am not sure if this
	stays in the API, I am currently testing undo and freeze/thaw
	issues...)

	* app/pdb/internal_procs.c
	* app/pdb/vectors_cmds.c
	* libgimp/gimpvectors_pdb.[ch]: regenerated.

2005-05-17  Simon Budig  <simon@gimp.org>

	* app/vectors/gimpvectors.[ch]: added gimp_vectors_get_n_strokes ();
	* tools/pdbgen/pdb/vectors.pdb: Attempt to fill an array with IDs,
	does not yet work.

	* app/pdb/vectors_cmds.c
	* libgimp/gimpvectors_pdb.c: regenerated.

2005-05-16  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/jpeg/jpeg-load.c: Don't detach from drawable if
	it belongs to a preview layer.  Fixes bug #304352.
	
2005-05-16  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/procedural_db.pdb: fixed typo in API docs.

	* app/pdb/procedural_db_cmds.c
	* libgimp/gimpproceduraldb_pdb.c: regenerated.

2005-05-16  Sven Neumann  <sven@gimp.org>

	* app/config/gimpxmlparser.c (gimp_xml_parser_parse_buffer): check
	encoding being not NULL before accessing it; added gtk-doc comment.

2005-05-16  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpclipboard.[ch]: added gimp_clipboard_has_svg()
	and gimp_clipboard_get_svg().

	* app/actions/edit-commands.c (edit_paste_cmd_callback): enabled
	pasting of SVG data using gimp_vectors_import_buffer().

2005-05-14  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-altivec-test.c: reverted to working
	versions.  Currently, if you regenerate the installers and
	testers, only those that work on your current machine will be
	generated properly.


2005-05-15  Michael Natterer  <mitch@gimp.org>

	* app/pdb/Makefile.am
	* app/pdb/procedural-db-query.[ch]: new files containing all the
	evil string matching and DB dump code.

	* tools/pdbgen/pdb/procedural_db.pdb: removed the evilness here
	and use the new functions.

	* app/pdb/procedural_db_cmds.c: regenerated.

2005-05-14  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/gimp-composite-generic.c:
	Fixed signedness problems is calls to gimp_rgb_to_hsv_int() and the like.
	
	* app/composite/gimp-composite-mmx.[ch]:
	Small fixes to register clobber lists.
	Added gimp_composite_subtract_va8_va8_va8_mmx.

	Regenerated

2005-05-14  Sven Neumann  <sven@gimp.org>

	* Made 2.3.0 development release.

2005-05-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/pygimp/gimpenums.py: reverted a change that I had
	committed accidentally.

2005-05-14  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpbaseenums.[ch]: register descriptions for the
	GimpPDBProcType enum.

	* plug-ins/dbbrowser/gimpprocview.c
	* tools/pdbgen/pdb/procedural_db.pdb: get rid of all selfmade
	enum->string mapping. Get the strings from the GType system instead.

	* app/pdb/procedural_db_cmds.c
	* libgimp/gimpproceduraldb_pdb.c: regenerated.

2005-05-13  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/gimp-composite-sse2.c:
	Updated with proper register clobber lists.  Some code clean-up
	(removing dead code, commented out code).

2005-05-14  Michael Natterer  <mitch@gimp.org>

	* app/pdb/procedural_db.h
	* tools/pdbgen/pdb/procedural_db.pdb: removed pdb_type_name()
	uglyness.

	* app/pdb/procedural_db.c: add private function
	procedural_db_type_name() instead which uses gimp_enum_get_value()
	and always returns a newly allocated string. Use it for the error
	messages.

	* app/pdb/procedural_db_cmds.c: regenerated.

2005-05-13  Michael Natterer  <mitch@gimp.org>

	* plug-ins/dbbrowser/gimpprocbrowser.c
	* plug-ins/dbbrowser/plugin-browser.c: implement typeahead search
	and get rid of the search buttons in the action area. Cleaned up
	dialog layout and code. Fixes bug #301287.

2005-05-13  Tor Lillqvist  <tml@novell.com>

	* configure.in: Don't bother looking for fd_set on Win32, we won't
	find it in sys/types.h or (the nonexistent) sys/select.h
	anyway. (It's in winsock2.h.)

	* plug-ins/common/xpm.c: Include gdkconfig.h for GDK_WINDOWING_WIN32.

	* plug-ins/script-fu/script-fu-server.c: Give it a chance to work
	on Win32 by covering for the differences between the WinSock and
	Unix socket APIs. Use recv() and send() instead of read() and
	write() on sockets. On Win32, use closesocket() for sockets
	instead of close(). Don't use perror() or look at errno after
	socket API errors on Win32. No EINTR failure mode with WinSock 2.
	(print_socket_api_error): New function. On Unix, just call
	perror(). On Win32, call WSAGetLastError() and produce an
	appropriate error message on stderr.

	* plug-ins/script-fu/Makefile.am (WINSOCK_LIBS): Link with the
	winsock2 library, as we compile with the winsock2 header.

2005-05-13  Michael Natterer  <mitch@gimp.org>

	* themes/Default/gtkrc
	* themes/Small/gtkrc: s/GimpImageDock/GimpMenuDock/ (Renaming this
	widget apparently was an incompatible change, gtkrc-wise, but I
	think we can live with that...).

2005-05-13  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-ins-query.c (plug_ins_query): don't crash on
	invalid regular expressions.

2005-05-13  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpwrite.c (WriteBMP): added missing brackets.
	Fixes bug #303972.

2005-05-13  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/procedural_db.pdb (procedural_db_query): don't
	crash on invalid regular expressions.

	* app/pdb/procedural_db_cmds.c: regenerated.

2005-05-13  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontrollerlist.c
	(gimp_controller_list_remove_clicked): implement removing of
	controllers, confirmed by a dialog.

	* app/widgets/gimpcontrollereditor.c
	(gimp_controller_editor_edit_clicked): set an alternative button
	order for the event mapping dialog.

2005-05-12  Simon Budig  <simon@gimp.org>

	* app/tools/gimpvectortool.c: reset the vector tool to Design
	mode whenever a new vectors object gets connected to the tool.
	This time also when you pick a path in Edit mode (Oops).

2005-05-12  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdialogfactory.c: refactoring.

2005-05-12  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpimagedock.c: request notification about changes
	to the "transient-docks" preference and react accordingly.

2005-05-12  Sven Neumann  <sven@gimp.org>

	* app/config/gimpguiconfig.[ch]
	* app/config/gimprc-blurbs.h: added new gimprc option
	"transient-docks".
	
	* app/widgets/gimpimagedock.c (gimp_image_dock_display_changed):
	as an experiment, obey the "transient-docks" preference and set
	the dock window transient to the active display shell. Please
	comment on the behaviour you observe.

	* app/dialogs/preferences-dialog.c (prefs_dialog_new): added a
	view on the new gimprc property.

	* app/config/gimpguiconfig.[ch]: set the IGNORE flag on the
	"info-window-per-display" property; it isn't used any longer.

	* app/config/gimpconfig-dump.c (dump_gimprc_system): don't dump
	properties that have the GIMP_CONFIG_PARAM_IGNORE flag set.

2005-05-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-exif.c (jpeg_query): split the message into
	primary and secondary label.

2005-05-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpuimanager.c (gimp_ui_manager_find_action): allow
	to pass a NULL group_name and iterate all action groups to find
	the action in that case.

	* app/widgets/gimpcontrollereditor.c: show the action's stock icon
	in the "Action" column, using above function.

2005-05-11  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplay.c: added a read-only property to access
	the display-shell w/o having to include gimpdisplay.h.

2005-05-11  Michael Natterer  <mitch@gimp.org>

	Some dock refactoring which separates the docking logic from
	active image and UI manager stuff:

	* app/widgets/gimpmenudock.[ch]: new widget renamed from
	GimpImageDock, zero changes except the name change.

	* app/widgets/gimpimagedock.[ch]: new widget derived from
	GimpDock. Keeps the UI manager.

	* app/widgets/gimpdock.[ch]: removed the UI manager. GimpDock only
	contains the basic docking logic again.

	* app/widgets/gimpmenudock.[ch]
	* app/widgets/gimptoolbox.[ch]: derive them from GimpImageDock.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/actions/dialogs-commands.c
	* app/actions/dock-actions.c
	* app/actions/dock-commands.c
	* app/actions/dockable-commands.c
	* app/dialogs/dialogs-constructors.c: changed accordingly.

2005-05-11  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-scale.c (gimp_display_shell_scale):
	also zoom on mouse position if the event originates from the canvas
	(see bug #79384).

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): replaced a g_warning()
	with g_return_if_fail().

2005-05-11  Simon Budig  <simon@gimp.org>

	* app/tools/gimpvectortool.c: reset the vector tool to Design
	mode whenever a new vectors object gets connected to the tool.

	Attempt to fix #300663, please report there if you like / dislike
	the new behaviour.

2005-05-11  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_shrink_wrap):
	return silently instead of warning if the window hasn't been
	realized. This happens as part of the setup process if
	"resize-windows-on-zoom" is selected in the prefs.

2005-05-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontrollerinfo.[ch]: added API to set an event
	snooper which, if set, receives any controller event first, even
	if event dispatching is disabled for the controller.

	* app/widgets/gimpcontrollereditor.[ch]: use the new API to
	implement a "Grab Event" button, which takes the next event from
	the controller and selects it in the event mapping tree view.

2005-05-10  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontrollerlist.[ch]: some more stuff: up/down
	buttons, remember the dialogs' size and positions, misc stuff.

	* app/widgets/gimpcontrollereditor.c
	(gimp_controller_editor_edit_clicked): use a GimpViewableDialog
	now that GimpControllerInfo is a GimpViewable.

	* app/dialogs/dialogs.c: added a foreign entry for the controller
	editor dialog. Allow the controller editors and its event mapping
	dialogs to exist multiple times.

	* app/dialogs/preferences-dialog.c (prefs_notebook_append_page):
	create the pages' event boxes with input-only windows.

2005-05-09  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/gimp-composite-sse2.c: Repaired a latent bug in
	gimp_composite_lighten_rgba8_rgba8_rgba8_sse2 where setting up
	the alpha masks were not done correctly.  A redundant (better?)
	fix to bug #164061

	Use movntq instructions to avoid processor cache pollution.

	Some adjustments to register allocation specifications.

2005-05-09  DindinX  <dindinx@gimp.org>

	* plug-ins/common/grid.c: use the correct bounds for the spinners.
	This is related to #114225. Spotted by Lomaxx.

2005-05-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/tiff.c: sprinkled some const qualifiers.

2005-05-09  Michael Natterer  <mitch@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpcontrollerlist.[ch]: new widget which allows
	adding/removing controllers using two lists of available/active
	controllers. Work in progress...

	* app/widgets/gimpcontrollerinfo.[ch]: derive it from GimpViewable
	so it can have an icon (unfinished). Added convenience constructor
	gimp_controller_info_new().

	* app/dialogs/preferences-dialog.c: use a GimpControllerList
	instead of a notebook of GimpControllerEditors.

2005-05-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/Makefile.am: removed traces of plug-ins/common,

2005-05-09  Sven Neumann  <sven@gimp.org>

	* app/base/tile-manager.c: inline tile_manager_get_tile_num().

	* app/display/gimpdisplayshell-render.c (render_image_tile_fault):
	reverted one of the changes I did here earlier.

2005-05-08  Sven Neumann  <sven@gimp.org>

	* app/dialogs/layer-options-dialog.c (layer_options_dialog_new):
	always set "activates-default" on the name entry.

2005-05-08  Sven Neumann  <sven@gimp.org>

	* app/base/tile-manager.[ch]: some code cleanup.

2005-05-08  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimppropwidgets.c (gimp_prop_entry_new)
	(gimp_prop_entry_notify): don't call gtk_entry_set_text() with a
	NULL text.

2005-05-08  Sven Neumann  <sven@gimp.org>

	* app/config/gimpbaseconfig.c: limit the tile-cache-size to
	G_MAXULONG or GIMP_MAX_MEMSIZE, whatever is smaller. Fixes
	bug #303371.

2005-05-07  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/pdb/image.pdb: Fix a typo reported in bug #303379.

	* app/pdb/image_cmds.c
	* libgimp/gimpimage_pdb.c: regenerated.

2005-05-07  Sven Neumann  <sven@gimp.org>

	* app/actions/edit-commands.c (edit_undo_clear_cmd_callback): tell
	the user how much memory will be freed by clearing the undo history.

2005-05-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimppainttool.[ch]
	* app/tools/gimptool.[ch]: unified tool and paint-tool statusbar APIs.

	* app/tools/gimpblendtool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcolortool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpeditselectiontool.c
	* app/tools/gimpfuzzyselecttool.c
	* app/tools/gimpmeasuretool.c
	* app/tools/gimpmovetool.c
	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.c
	* app/tools/gimprectselecttool.c
	* app/tools/gimpvectortool.c: changed accordingly.

	* app/tools/gimpselectiontool.c: give more hints in the statusbar.
	Some of the selection tools should probably override these.

2005-05-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimppreviewcache.c: minor code cleanup.

2005-05-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpselectionoptions.c: added modifier keys to the
	tooltips of the selection mode buttons.

	* app/dialogs/preferences-dialog.c: removed the GUI for the
	"default-threshold" preference.

	* app/tools/gimpmagnifyoptions.c: removed the GUI for the
	Threshold option; it was more confusing than useful.

	* app/config/gimpguiconfig.c: changed the default value for
	"save-tool-options" to FALSE. This is a major source of confusion;
	let's try if disabling it is an improvement.

2005-05-07  Jay Cox  <jaycox@gimp.org>

	* plug-ins/common/psd.c: add comments describing thumbnail resource.

2005-05-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icoload.c
	* plug-ins/winicon/main.c: added a thumbnail loader for .ico files
	Fixes bug #158191.

2005-05-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icoload.[ch]
	* plug-ins/winicon/main.c: code cleanup, prepare for thumbnail
	loading.

2005-05-06  Sven Neumann  <sven@gimp.org>

	* app/actions/layers-actions.c
	* app/core/gimpimage.c (gimp_image_position_layer)
	* app/widgets/gimplayertreeview.c (gimp_layer_tree_view_drop_possible):
	drop the limitation that layers not at the bottom of the stack
	have to have an alpha channel. Allow the user to move the
	background layer up in the stack or reposition it using DND.

	* tips/gimp-tips.xml.in: changed the relevant tip and some more.

2005-05-06  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/compressor.c: use G_DIR_SEPARATOR instead of '/'.

	* plug-ins/common/mail.c: ditto. Fixed some coding style issues.
	Special case .bz2 files just as .gz ones.

2005-05-06  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-merge.c: removed redundant casts.

2005-05-06  Michael Natterer  <mitch@gimp.org>

	* app/actions/gradient-editor-commands.h: added enum for the
	"load_color" actions.

	* app/actions/gradient-editor-actions.c
	* app/actions/gradient-editor-commands.c: use the new enum instead
	of magic values, cleanup.

	* app/actions/palette-editor-commands.c: cleanup.

	* app/widgets/gimpbrusheditor.c
	* app/widgets/gimpdataeditor.c: cleanup.

	* app/widgets/gimpgradienteditor.c: added GtkObject::destroy() and
	GtkWidget::unmap() implementations which destroy the color dialog.
	Destroy color dialogs by cancelling them via gtk_dialog_response(),
	so temporarily changed colors are restored correctly. Refactored
	my last commit below a bit. Various cleanups.

	* app/widgets/gimppaletteeditor.[ch]: no need to remember the
	buttons in the GimpPaletteEditor struct.

2005-05-06  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-scale.c
	(gimp_display_shell_scale_by_values): abort early if the values are
	all setup already. Fixes bug #164281.

2005-05-06  Sven Neumann  <sven@gimp.org>

	* app/composite/gimp-composite-sse2.c
	(gimp_composite_lighten_rgba8_rgba8_rgba8_sse2): applied a patch
	from Joao S. O. Bueno Calligaris that changes the SSE2 code to
	load the proper register. Fixes bug #164061.

2005-05-05  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpgradienteditor.c (control_draw)
	(control_draw_normal_handle)
	(control_draw_middle_handle): changed handle colors to be always
	black and white. Fixes bug #303118. Also changed the handle bar's
	background and the handles' outlines to theme colors which should
	make the handles distinguishable from the background for all
	themes.

	Various unrelated cleanups.

2005-05-04  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-proc-def.[ch] (plug_in_proc_def_find): new
	function which finds a proc_def in a GSList by its procedure name.

	* app/plug-in/plug-in-message.c
	* app/plug-in/plug-ins.c
	* tools/pdbgen/pdb/plug_in.pdb: use it instead of iterating and
	comparing manually.

	* app/pdb/plug_in_cmds.c: regenerated.

	* app/plug-in/plug-in-def.c: minor cleanups.

2005-05-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfgbgeditor.c (gimp_fg_bg_editor_button_press):
	emit "color-clicked" on first click.

	* app/widgets/gimptoolbox.c: changed tooltip accordingly.

2005-05-04  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/plug-in-proc-def.[ch] (plug_in_proc_def_set_icon):
	new function.

	* tools/pdbgen/pdb/plug_in.pdb: removed the same code here and use
	the new function.

	* app/pdb/plug_in_cmds.c: regenerated.

2005-05-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolordisplayeditor.h: include the parent class,
	not gimpeditor.h

	* app/widgets/gimpcolordisplayeditor.c: include gimpeditor.h here

2005-05-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/pygimp/gimpfu.py (progress_update): special case
	percentage < 0 and pulse progress.

2005-04-30  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpread.c: applied a patch from David Costanzo that
	adds missing error handling to the BMP loader, allowing it to deal
	gracefully with incomplete BMP image files.

2005-04-29  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icodialog.c
	* plug-ins/winicon/icosave.c: changed dialog layout.

2005-04-29  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/enumcode.pl: declared function array as const.

	* libgimp/gimpenums.c.tail: regenerated.

2005-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpprojection-construct.c (gimp_projection_construct):
	use copy_region() instead of using tile_manager_map_over_tile()
	directly.

2005-04-29  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpmessagebox.c (gimp_message_box_init): unset
	"can-focus" on the message labels. Fixes bug #302400.

2005-04-29  Sven Neumann  <sven@gimp.org>

	* app/core/gimpprojection-construct.c: save COW projection code from
	bit-rotting. It can now be enabled again (but is definitely broken).

2005-04-28  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/plug-ins/clothify.py: don't reset the passed
	parameters to default values. Spotted by Joao S. O. Bueno Calligaris.

2005-04-28  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-scale.h: corrected variable names.

2005-04-28  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-load.c (load_image): detach from the drawable.

2005-04-28  Sven Neumann  <sven@gimp.org>

	* app/core/gimptemplate.c (gimp_template_create_image): fill the
	layer before adding it to the image.

2005-04-28  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c (render_image_rgb): fixed
	an oversight from yesterday's changes.

2005-04-28  Sven Neumann  <sven@gimp.org>

	* app/core/gimpunit.c
	* libgimp/gimpunitcache.c: built-in units are const.

2005-04-28  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c: spare a few CPU cycles.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* app/base/tile-manager.c (tile_manager_get_tile): removed
	redundant check.

	* app/display/gimpdisplayshell-render.c: don't access the next
	tile if we are at the end of the render loop anyway.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-render.c: removed unused byte_order
	variables.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-colormap.[ch]: declared the return value of
	gimp_image_get_colormap() as const.

	* app/display/gimpdisplayshell-render.c: added some const qualifiers.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpclipboard.c (gimp_clipboard_free): free all
	memory allocated for GimpClipboard.

	* libgimpwidgets/gimppatheditor.c (gimp_path_editor_set_path):
	always free old_path.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpunitstore.c: don't call va_arg() too often.

	* libgimpconfig/gimpcolorconfig.c (gimp_color_config_finalize):
	free the string allocated for the display module.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/image.pdb: plugged a small memleak.

	* app/pdb/image_cmds.c: regenerated.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: added more standard keybindings.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/metadata/metadata.c: don't mark the menu identifier for
	translation.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* app/actions/context-actions.c
	* app/actions/context-commands.[ch]: applied a patch from Aron
	Stansvik that adds actions to control hue, saturation and value
	of the foreground and background colors.

2005-04-27  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: use the same terms for the
	checkerboard parameters as used in the GimpPreviewArea popup menu
	(bug #302141).

2005-04-26  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: reviewed strings, simplified
	if possible.

2005-04-26  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colortoalpha.c: use the standard order of
	"static" and "inline" qualifiers.

2005-04-25  DindinX  <dindinx@gimp.org>

	* plug-ins/common/colortoalpha.c: update the preview continuously
	when the color changes in the color selector.

2005-04-25  Michael Natterer  <mitch@gimp.org>

	* app/app_procs.c (app_libs_init): call g_thread_init() only if
	the GThread system is not already initialized.

2005-04-25  Sven Neumann  <sven@gimp.org>

	* app/file/gimprecentlist.c (gimp_recent_list_add_item): close the
	file descriptor if we fail to obtain the lock (bug #151767).

2005-04-25  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in-proc-def.h: added a boolean flag to the
	ProcDef struct to identify file procedures.

	* app/xcf/xcf.c: changed accordingly.

	* app/plug-in/plug-ins.c: look at the new flag instead of checking
	extensions, prefixes and magics being non-NULL. A file plug-in
	doesn't necessarily have any of these fields set.

	* app/plug-in/plug-in-rc.c: changed pluginrc format to contain an
	extra section for file procedures. Moved all file related info there.

2005-04-25  Manish Singh  <yosh@gimp.org>

	* plug-in/common/tiff.c: Only store compression types we can actually
	handle in the save options parasite. Fixes bug #301557.

2005-04-24  Sven Neumann  <sven@gimp.org>

	* app/base/temp-buf.c (generate_unique_tmp_filename): removed the
	local pid_t variable and the msvc definition for it.

2005-04-24  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/fileops.pdb
	* app/pdb/fileops_cmds.c: spelling.

2005-04-24  Hans Breuer  <hans@breuer.org>

	* menus/makefile.msc : build menus with nmake, too
	* menus/Makefile.am : added to EXTRA_DIST

	* **/makefile.msc app/gimpcore.def : updated

	* app/base/temp-buf.c : there is no pid_t with msvc so typedef one

2005-04-23  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablepreview.c (gimp_drawable_preview_draw_thumb):
	respect the selection (fixes bug #301523).

2005-04-23  Raphaël Quinet  <raphael@gimp.org>

	* plug-ins/metadata/xmp-schemas.[ch]: Added definition of
	properties from IPTC Core XMP schema (Iptc4xmpCore).

	* plug-ins/metadata/base64.[ch]: Added option to ignore invalid
	characters in base64 encoded text.

	* plug-ins/metadata/xmp-encode.c
	* plug-ins/metadata/xmp-parse.c
	* plug-ins/metadata/testbase64.c: Updated accordingly.

2005-04-22  Sven Neumann  <sven@gimp.org>

	* configure.in
	* plug-ins/common/Makefile.am
	* plug-ins/common/plugin-defs.pl
	* plug-ins/common/winclipboard.c: removed winclipboard plug-in
	from CVS. It is not any longer needed as long as GTK+ >= 2.6.5
	is being used. Fixes bug #165219.

2005-04-22  Raphaël Quinet  <raphael@gimp.org>

	* plug-ins/metadata/xmp-model.[ch]: Fixed crash occuring after a
	double free of some structured XMP properties.  Added new type
	XMP_TYPE_GENERIC_STRUCTURE for unknown structured properties.  Be
	more tolerant in parsing incorrectly written schema URIs and try
	to extract a valid URI from them.  Converted to use g_print().
	Moved the definitions of standard XMP schemas from here...

	* plug-ins/metadata/xmp-schemas.[ch]: ...to these new files.

	* plug-ins/metadata/xmp-encode.[ch]: Rewritten using GString
	instead of fixed buffers.

	* plug-ins/metadata/metadata.c
	* plug-ins/metadata/interface.c: Adapted to the new function
	xmp_generate_block() using GString.

	* plug-ins/metadata/base64.c (base64_encode): Fixed incorrect
	encoding of bytes with the sign bit set.

	* plug-ins/metadata/testbase64.c
	* plug-ins/metadata/Makefile.am: Added xmp-schema.[ch] and test
	program testbase64.c (testing base64 encoding and decoding).

	* plug-ins/metadata/xmpdump.c: Converted to use g_print().

	* plug-ins/metadata/xmp-parse.c: Added some #ifdef's around
	debugging code, added more comments.

2005-04-22  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpbaseenums.h (GimpTransformDirection): removed
	(traditional) and (corrective) from the enum descriptions.

2005-04-22  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpintstore.c: removed the "row_deleted" handler
	which used to take care of reinserting the "Empty" item when the
	last row gets deleted. This doesn't work any longer with GTK+ 2.6
	and I see no way to make it work again. Fixes bug #301524.

2005-04-22  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.[ch]: removed Close button from
	dockables as suggested in bug #301348.

2005-04-21  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/postscript.c: pass -dUseCropBox when loading PDF
	files, to match Acrobat Reader's behavior in honoring CropBox over
	MediaBox. Fixes bug #301432.

2005-04-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/dbbrowser/gimpprocview.c: make more labels selectable.

2005-04-21  Nathan Summers  <rock@gimp.org>

	* data/images/gimp-splash.png: removed flare effect
	
2005-04-20  Nathan Summers  <rock@gimp.org>

	* data/images/gimp-splash.png: new splash

2005-04-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/Lighting/images/Makefile.am
	* plug-ins/gfig/images/Makefile.am
	* plug-ins/gimpressionist/Makefile.am
	* plug-ins/imagemap/images/Makefile.am
	* plug-ins/pagecurl/Makefile.am
	* plug-ins/rcm/images/Makefile.am: use $(GDK_PIXBUF_CSOURCE) as
	defined by the configure script.

	* plug-ins/helpbrowser/Makefile.am
	* plug-ins/helpbrowser/wilber-reading.png: added icon.

	* plug-ins/helpbrowser/gimpthrobber.[ch]: added API to set an image
	to be used instead of the stock-id.

	* plug-ins/helpbrowser/dialog.c: use the Reading Wilber icon for
	the throbber and as window icon.

2005-04-20  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpstock.c
	* themes/Default/images/Makefile.am: reverted the change to
	register a wilber icon in button size; it broke the color selector.

2005-04-20  Sven Neumann  <sven@gimp.org>

	* libgimpcolor/gimprgb-parse.c: fixed typos in comments.

2005-04-20  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpui.c (gimp_ensure_modules): cosmetics.

2005-04-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mail.c: set charset to UTF-8. Initialize the
	filename from the image's filename. Don't set From: if the Sender
	entry remains blank. Reordered dialog.

2005-04-20  Michael Natterer  <mitch@gimp.org>

	* app/xcf/xcf-load.c (xcf_load_layer): initialize text_layer_flags
	with 0 so it doesn't contain random garbage if the text layer
	flags in the XCF have default values (are not saved at all). Fixes
	bug #301028. Initialize other stuff too for the sake of sanity.

2005-04-19  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/color.pdb: applied patch from Karine Delvare
	which adds gimp_desaturate_full(). Fixes bug #155507.

	* app/pdb/color_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpcolor_pdb.[ch]: regenerated.

	* libgimp/gimp.def: added the new symbol.

2005-04-19  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-snap.c: bail out early if the coords are
	out-of-image plus a border of the snapping epsilon, and not just
	out-of-image. Fixes bug #169892.

2005-04-18  Manish Singh  <yosh@gimp.org>

	* libgimpwidgets/gimpsizeentry.c: #include gimpwidgets.h for
	gimp_spin_button_new().

	* plug-ins/jpeg/jpeg-load.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/metadata/interface.c
	* plug-ins/metadata/xmp-parse.c: 64-bit safety for some of the
	debugging g_prints.

2005-04-18  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/newsprint.c: Redo comment for spot_PSsquare
	and spot_PSdiamonds, since the code was not a derived work in
	the copyright sense. It is a C implementation of the same
	algorithm.

2005-04-18  Raphaël Quinet  <raphael@gimp.org>

	* plug-ins/common/newsprint.c: Added comment to clarify the
	copyright notice (bug #301076).

2005-04-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage.c (gimp_image_real_colormap_changed):
	invalidate layer previews when the colormap changes. Fixes
	bug #301033.

2005-04-18  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpsamplepointeditor.[ch]: Connect to the
	GimpImage::update-sample-point and GimpProjection::update signals
	and idle-pick colors at the sample points' coordinates.
	Addresses bug #137776.

2005-04-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: restrict the menus to 15 items.

2005-04-18  Raphaël Quinet  <raphael@gimp.org>

	* plug-ins/metadata/base64.[ch]: Added parameter 'columns' to
	base64_encode() to add optional line breaks in the output.
	Improved documentation.

2005-04-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: workaround a GTK+ bug to make the
	tooltips for the Back and Forward buttons appear.

2005-04-17  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpsizeentry.c: use gimp_spin_button_new() which
	calls gtk_spin_button_set_numeric() for us. Part of a fix for bug
	#300935.

	* libgimpwidgets/gimpwidgets.c: improved the API docs for
	gimp_spin_button_new().

	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimplevelstool.c
	* plug-ins/common/screenshot.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/rcm/rcm_dialog.c
	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/winsnap/winsnap.c: use gimp_spin_button_new().

2005-04-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: set a busy cursor while loading a
	page. Offer drags as "text/uri-list" in addition to "_NETSCAPE_URL".

2005-04-17  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpstock.c
	* themes/Default/images/Makefile.am: register a wilber icon in
	button size.

	* plug-ins/helpbrowser/gimpthrobber.c: choose a slightly larger
	icon than the configured size for toolbars.

2005-04-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: added actions to zoom in/out.

	* plug-ins/helpbrowser/gimpthrobberaction.[ch]: fixed handling of
	overflow menu items.

2005-04-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/Makefile.am
	* plug-ins/helpbrowser/gimpthrobber.[ch]
	* plug-ins/helpbrowser/gimpthrobberaction.[ch]: new files
	implementing a custom GtkToolItem and a GtkAction to use it.

	* plug-ins/helpbrowser/dialog.c: use the new widget.

2005-04-17  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpaction.h
	* app/widgets/gimpactiongroup.h
	* app/widgets/gimpcellrendereraccel.h
	* app/widgets/gimpenumaction.h
	* app/widgets/gimppluginaction.h
	* app/widgets/gimpstringaction.h
	* app/widgets/gimpuimanager.h: declare get_type() function as
	G_GNUC_CONST.

2005-04-17  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/guides-new-percent.scm
	* plug-ins/script-fu/scripts/guides-new.scm: don't use undo
	groups. It's useless for a single operation and it's wrong to use
	the undo group unconditionally, but add the guides conditionally.

2005-04-16  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpcontext.c (gimp_context_real_set_brush)
	(gimp_context_real_set_pattern): no need to get base_config twice
	in the same function.

	* app/widgets/gimpblobeditor.h: include the parent class.

	* app/widgets/gimpdataeditor.c (gimp_data_editor_init): set the
	name entry insensitive.

2005-04-16  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdataeditor.[ch]: implement
	GimpDocked::get_title() and add "(read only)" to the dialog's
	title if the data is not editable. Fixes bug #164003.

	(gimp_data_editor_real_set_data): call gimp_docked_title_changed()
	when the editable state changes.

	(struct GimpDataEditorClass): added "const gchar *title" member.

	* app/widgets/gimpbrusheditor.c
	* app/widgets/gimpgradienteditor.c
	* app/widgets/gimppaletteeditor.c (class_init): set titles.

2005-04-16  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpbase.def: added gimp_desaturate_mode_get_type.

2005-04-16  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: use a GimpFileEntry to
	configure the web-browser setting. GtkFileChooserButton just
	doesn't work for it.

2005-04-16  Michael Natterer  <mitch@gimp.org>

	* plug-ins/helpbrowser/dialog.c: removed the "Close" button and
	added a "Wilber" button instead which opens the online docs in the
	web browser. Added accelerators ctrl+w and ctrl+q which close the
	help browser.

	* plug-ins/helpbrowser/queue.[ch]: updated my email address.

2005-04-16  Sven Neumann  <sven@gimp.org>

	* app/dialogs/desaturate-dialog.c: added an icon to the action
	button.

	* app/vectors/gimpvectors-import.c: reduce the number of string
	comparisons by using switches on the first character.

2005-04-16  Sven Neumann  <sven@gimp.org>

	Applied a patch (with minor modifications) from Karine Delvare
	that makes it possible to choose between various ways to remove
	color from a drawable (bug #155507):

	* libgimpbase/gimpbaseenums.h: added new enum GimpDesaturateMode.

	* libgimpbase/gimpbaseenums.c
	* libgimp/gimpenums.c.tail
	* plug-ins/pygimp/gimpenums.py
	* tools/pdbgen/enums.pl: regenerated.

	* app/core/gimpdrawable-desaturate.[ch]: implement other formulas
	to remove colors from a drawable.

	* tools/pdbgen/pdb/color.pdb: let gimp_desaturate() call
	gimp_drawable_desaturate() with GIMP_DESATURATE_LIGHTNESS so that
	it behaves like it always did.

	* app/pdb/color_cmds.c: regenerated.

	* app/dialogs/Makefile.am
	* app/dialogs/desaturate-dialog.[ch]: new files that define a simple
	dialog to choose a mode for desaturation.

	* app/actions/drawable-actions.[ch]: use the new dialog.

2005-04-16  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/vectors.pdb: let pdbgen create the code to
	initialize the variables.

	* app/pdb/vectors_cmds.c: regenerated.

2005-04-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c
	* plug-ins/helpbrowser/queue.[ch]: finished menu implementation.

2005-04-15  Manish Singh  <yosh@gimp.org>

	* plug-ins/helpbrowser/queue.c: call has_next/prev functions with
	arguments.

2005-04-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c
	* plug-ins/helpbrowser/queue.[ch]: added menu toolbar buttons; not
	functional yet.

2005-04-15  Michael Natterer  <mitch@gimp.org>

	Added loading of Photoshop brushes. Fixes bug #163047:

	* app/core/Makefile.am
	* app/core/gimpbrush-load.[ch]: new files holding all brush
	loading code. Added .abr loader based on a patch by Adrian
	Likins. Didn't add a new brush subclass as in the original patch,
	but only a loading function which loads the brushes into standard
	GimpBrush objects. Did misc fixes to the code, needs further
	cleanup.

	* app/core/gimpbrush.[ch]: removed brush loading code here.

	* app/core/gimpbrushpipe.c: changed #includes accordingly.

	* app/core/gimp.c (gimp_real_initialize): register the new load
	functions and their extensions with the brush factory.

2005-04-15  Simon Budig  <simon@gimp.org>

	* app/tools/gimpnewrectselecttool.c: NULLified the Keyboard
	Shortcut for the new rect select tool (clash with the Crop tool).

2005-04-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: added a simple right-click menu.

2005-04-14  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_cmd_unselect_all.c 
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_object_popup.c: removed bunch of
	compilation warnings (spotted by Sven Neumann).

2005-04-14  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawable.[ch] (gimp_drawable_get_tile)
	(gimp_drawable_get_tile2): cleanup gint/gboolean confusion (spotted
	by Maurits Rijk).

2005-04-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/helpbrowser/dialog.c: use a GtkUIManager to construct the
	toolbar.

	* plug-ins/ifscompose/ifscompose.c: use gtk_action_set_sensitive().

2005-04-14  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/dialogs/image-new-dialog.c
	* app/dialogs/image-scale-dialog.c
	* app/widgets/gtkhwrapbox.c
	* app/widgets/gtkvwrapbox.c: s/choosen/chosen/g; fixes bug #300608.

2005-04-14  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.c (gimp_display_shell_set_property):
	don't call gimp_display_shell_scale() if the display isn't
	completely setup yet.

	* app/display/gimpdisplayshell-scale.c (gimp_display_shell_scale):
	hack around to find out whether we should pass the pointer location
	or the center of the display to gimp_display_shell_scale_to().

2005-04-14  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-scale.c (gimp_display_shell_scale):
	changed to use the location of the pointer instead of the display
	center. This is the behaviour requested in bug #79384.

2005-04-14  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-scale.[ch]: reduced code duplication.

2005-04-14  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-scale.c (gimp_display_shell_scale_to): 
	changed to keep the point under the mouse at the same location,
	rather than to center it. Also added API docs.

2005-04-14  Simon Budig  <simon@gimp.org>

	Started a PDB api for vectors/strokes. Not yet functional, this
	commit is to get the infrastructure up and running.

	* app/vectors/gimpstroke.[ch]
	* app/vectors/gimpvectors.[ch]: Added IDs to the strokes
	
	* tools/pdbgen/pdb.pl: corrected "vectors" type, deleted "path" type.
	* tools/pdbgen/pdb/image.pdb: added gimp_image_get_vectors()
	* tools/pdbgen/pdb/vectors.pdb: New file for the vectors API
	(just a stub for now)

	* tools/pdbgen/Makefile.am: Added vectors.pdb
	* tools/pdbgen/groups.pl: regenerated.

	* plug-ins/script-fu/siod-wrapper.c: Enable the Path/Vectors type.

	* libgimp/gimpvectors_pdb.[ch]
	* app/pdb/vectors_cmds.c: new autogenerated files.
	
	* libgimp/Makefile.am
	* app/pdb/Makefile.am: Added new autogenerated file.

	* libgimp/gimp_pdb.h
	* libgimp/gimpimage_pdb.[ch]
	* app/pdb/image_cmds.c
	* app/pdb/internal_procs.c: regenerated.

2005-04-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimplayer.c: fixed gtk-doc comment.

2005-04-13  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-scale.[ch]: when using Ctrl-wheel
	to zoom in/out, center on the mouse position (bug #79384).

2005-04-13  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added "xh" to ALL_LINGUAS.

2005-04-13  Sven Neumann  <sven@gimp.org>

	* app/config/gimpcoreconfig.c: set GIMP_CONFIG_PARAM_CONFIRM on
	the "font-path" property. Set GIMP_CONFIG_PARAM_IGNORE for
	"font-path-writable".

	* app/dialogs/preferences-dialog.c: don't use "font-path-writable".

	* app/core/gimp.c (gimp_restore)
	* app/text/gimp-fonts.c: handle --no-fonts similar to --no-data
	and allow to load the fonts later by pressing "Refresh" in the
	fonts dialog.

2005-04-13  Sven Neumann  <sven@gimp.org>

	* app/app_procs.c: register handler for the "GimpPaint" log domain.

	* app/core/gimpdatafactory.c (gimp_data_factory_init): don't load
	any data if TRUE is passed for no_data.

	* app/tools/gimppainttool.c (gimp_paint_tool_draw): handle a NULL
	brush gracefully.

2005-04-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c (gimp_image_convert): handle a NULL
	palette with GIMP_CUSTOM_PALETTE type, use the builtin mono
	palette as fallback.

	* app/dialogs/convert-dialog.c: handle empty palette container.

	* app/gui/gui-vtable.c (gui_pdb_dialog_new): removed unused code.

	* tools/pdbgen/pdb/convert.pdb: don't load the palettes implicitely.

	* app/pdb/convert_cmds.c: regenerated.

2005-04-13  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpimagedock.c (gimp_image_dock_image_changed):
	don't use the image container as display container.

2005-04-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdatafactory.[ch]: added gimp_data_factory_refresh().

	* app/actions/data-commands.c
	* tools/pdbgen/pdb/brushes.pdb
	* tools/pdbgen/pdb/convert.pdb
	* tools/pdbgen/pdb/gradients.pdb
	* tools/pdbgen/pdb/palettes.pdb
	* tools/pdbgen/pdb/patterns.pdb: use the new function.

	* app/pdb/brushes_cmds.c
	* app/pdb/convert_cmds.c
	* app/pdb/gradients_cmds.c
	* app/pdb/palettes_cmds.c
	* app/pdb/patterns_cmds.c: regenerated.

2005-04-12  Sven Neumann  <sven@gimp.org>

	* app/core/gimpcontainer.[ch]: added gimp_container_is_empty().

	* app/core/gimpcontext.c
	* app/core/gimpimage.c
	* app/dialogs/palette-import-dialog.c
	* app/text/gimptextlayer.c
	* app/widgets/gimpimagedock.c: use the new function.

2005-04-12  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-transform-utils.c
	(gimp_transform_matrix_perspective): undo the "cosmetic changes"
	of 2005-03-20. Fixes bug #300269.

2005-04-12  Raphaël Quinet  <raphael@gimp.org>

	* configure.in: updated test for libjpeg so that it requires
	version 6b (27-Mar-1998) or later.

	* plug-ins/jpeg/jpeg.h
	* plug-ins/jpeg/jpeg.c
	* plug-ins/jpeg/jpeg-load.c
	* plug-ins/jpeg/jpeg-save.h
	* plug-ins/jpeg/jpeg-save.c: added support for loading and saving
	XMP packets in JPEG APP1 markers, simplified the code that reads
	comments from COM markers and removed #ifdef HAVE_PROGRESSIVE_JPEG
	because we require jpeg-6b, which includes progressive support.

2005-04-11  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/Lighting/lighting_shade.c:  Fix typo responsible for
	bug #300122, also revise env-mapping code to make it perform
	better.

2005-04-11  DindinX  <dindinx@gimp.org>

	* plug-ins/common/convmatrix.c: small cleanups, more will come.

2005-04-11  Michael Natterer  <mitch@gimp.org>

	Let the user decide whether tool options are persistant or not as
	suggested in bug #165078:

	* app/config/gimprc-blurbs.h
	* app/config/gimpguiconfig.[ch]: added "gboolean save_tool_options".

	* app/tools/gimp-tools.[ch]: implement the same logic as for
	devicerc and sessionrc: added gimp_tools_clear() which deletes the
	stored tool options and added "save_tool_options" and
	"always_save" parameters to gimp_tools_save(). Everything affects
	just the primary tool options, *not* the separately saved presets
	for each tool.

	* app/gui/gui.c (gui_exit_callback): changed accordingly.

	* app/dialogs/preferences-dialog.c: added GUI for the stuff above
	in the style of the devicerc and seccionrc prefs GUIs.

2005-04-11  Raphaël Quinet  <raphael@gimp.org>

	* plug-ins/metadata/base64.h
	* plug-ins/metadata/base64.c: Added implementation of
	base64_encode(), use gsize or gssize for sizes.

2005-04-11  Raphaël Quinet  <raphael@gimp.org>

	* plug-ins/metadata/metadata.c: Register plug_in_metadata_import
	and plug_in_metadata_export in the PDB.

	* plug-ins/metadata/Makefile.am
	* plug-ins/metadata/base64.h
	* plug-ins/metadata/base64.c: Added base64 decoder, needed for
	reading the thumbnail images (base64 encoded inside XML element).
	
	* plug-ins/metadata/xmp-parse.h
	* plug-ins/metadata/xmp-parse.c: Added XMP_PTYPE_ALT_THUMBS for
	parsing a list of thumbnail images.  Decode and store the base64
	encoded images.

	* plug-ins/metadata/xmpdump.c
	* plug-ins/metadata/xmp-model.h
	* plug-ins/metadata/xmp-model.c: Added support for thumbnails,
	defined global symbols for standard XMP schema URIs.

	* plug-ins/metadata/interface.c: Preliminary support for widget
	cross-references just for testing - it does not save anything yet.
	Added thumbnail tab, although the thumbnail image is not displayed
	yet.

2005-04-11  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpclipboard.c: don't include "core/gimpviewable.h"

2005-04-11  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpfuzzyselecttool.c: added a hint to the statusbar.
	Closes bug #300125.

2005-04-10  DindinX  <dindinx@gimp.org>

	* plug-ins/common/convmatrix.c: added a preview, but this plug-in
	certainly need some more work.

2005-04-10  DindinX  <dindinx@gimp.org>

	* plug-ins/common/convmatrix.c: preliminary cleanup before
	implementing a preview.

2005-04-10  Sven Neumann  <sven@gimp.org>

	* app/actions/drawable-commands.h: removed duplicate function
	declarations (spotted by Karine Delvare).

2005-04-10  Sven Neumann  <sven@gimp.org>

	Merged from gimp-2-2 branch:

	* plug-ins/print/print.c: reverted the previous change, it was wrong
	(see bug #169909).

2005-04-10  Michael Natterer  <mitch@gimp.org>

	* app/file/file-utils.c
	* app/tools/gimpfliptool.c
	* app/widgets/gimpcontainertreeview.c
	* app/widgets/gimppaletteselect.c: removed unneeded base/ includes.

2005-04-09  Sven Neumann  <sven@gimp.org>

	Merged from gimp-2-2 branch:

	* menus/Makefile.am
	* tips/Makefile.am: changed the validate rules to work with srcdir
	!= builddir.

2005-04-09  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpbuffer.[ch]: added gimp_buffer_new_from_pixbuf().

	* app/widgets/gimpclipboard.c: removed
	tile_manager_new_from_pixbuf() and base/ dependency.

2005-04-09  Manish Singh  <yosh@gimp.org>

	* app/widgets/gimppixbuf.c: #include <string.h> for strcmp, and
	fix gdk_atom_intern usage.

2005-04-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/print/print.c: quote the shell command passed to execl().
	Fixes bug #169909.

2005-04-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpnewrectselecttool.[ch]
	* app/tools/gimprectangletool.[ch]: more work on rectangle
	tool ui.
	
2005-04-09  Michael Natterer  <mitch@gimp.org>

	Implement dragging and dropping in any GdkPixbuf supported format.
	Fixes bug #172794 and bug #172795.

	* app/core/gimplayer.[ch] (gimp_layer_new_from_region): new
	function which contains all stuff that was in
	gimp_layer_new_from_tiles().

	(gimp_layer_new_from_tiles): use above function.
	(gimp_layer_new_from_pixbuf): new function.

	* app/widgets/Makefile.am
	* app/widgets/gimppixbuf.[ch]: new files containing GdkPixbuf
	utility functions for clipboard and DnD.

	* app/widgets/gimpselectiondata.[ch]: removed
	gimp_selection_data_set,get_pixbuf(), GTK+ provides the same API.
	Also removed GdkAtom parameters all over the place because it's
	always the same as selection_data->target.

	* app/widgets/gimpclipboard.c: use the new pixbuf utility
	functions and gtk_selection_data_set,get_pixbuf().

	* app/widgets/widgets-enums.h
	* app/widgets/gimpdnd.[ch]: removed never-implemented
	GIMP_DND_TYPE_PNG and added a generic GIMP_DND_TYPE_PIXBUF
	instead. Added API to drag and drop GdkPixbufs which transparently
	converts from/to any GdkPixbuf-supported image format. Removed
	passing around of GdkAtoms, since they were always the same
	as selection_data->target.

	* app/widgets/gimpdnd-xds.[ch]: follow GdkAtom parameter removal.

	* app/widgets/gimpcontainertreeview.[ch]: added virtual function
	GimpContainerTreeView::drop_pixbuf().

	* app/widgets/gimpcontainertreeview-dnd.c: dispatch drop_pixbuf().

	* app/widgets/gimplayertreeview.c: implement drop_pixbuf().

	* app/widgets/gimpdrawabletreeview.c: allow to drag all drawables
	as pixbufs.

	* app/display/gimpdisplayshell-dnd.c: allow dropping of pixbufs.

2005-04-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/screenshot.c: Change default back to Window
	rather than Root.  When shooting window, delay after instead
	of before selecting, so shooting menus etc becomes possible.

2005-04-09  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/gifload.c (GetCode): GetDataBlock returns -1 on
	error, so count should be an int, not an unsigned char. Fixes
	bug #173119.

2005-04-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icosave.c: implement color counting without
	changing the image-type to RGB. A save plug-in must not change the
	image.

2005-04-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icodialog.c: rewrote preview code to use
	GtkImage and pixbufs. The previous implementation was severily
	broken.

	* plug-ins/winicon/icosave.c: cosmetics.

2005-04-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icoload.c: code cleanup, no real changes.

2005-04-08  Simon Budig  <simon@gimp.org>

	* app/tools/gimpvectortool.[ch]: Applied Patch by Sven Neumann
	to use the new statusbar functionality.

2005-04-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/animationplay.c: coding style, no real changes.

2005-04-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gauss.c: fixed preview for zero blur radii
	(bug #173039).

2005-04-08  Sven Neumann  <sven@gimp.org>

	* app/base/base.c: include libgimpbase/gimpwin32-io.h.

2005-04-07  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-path.c: added API documentation.

2005-04-07  Sven Neumann  <sven@gimp.org>

	* app/config/gimpcoreconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimppluginconfig.c: need to free the return value of
	gimp_config_build_foo_path() now that gimp_param_spec_path() is
	sane and doesn't take ownership of the passed string any longer.

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/utils.c: use gimp_config_build_data_path().

	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/common/CML_explorer.c
	* plug-ins/common/channel_mixer.c
	* plug-ins/common/curve_bend.c
	* plug-ins/common/gqbist.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/flame/flame.c
	* plug-ins/gimpressionist/brush.c
	* plug-ins/ifscompose/ifscompose.c
	* plug-ins/imagemap/imap_browse.c
	* plug-ins/imagemap/imap_file.c
	* plug-ins/print/gimp_main_window.c: set alternative button order
	on file-chooser dialogs (as well as default response where missing).

2005-04-07  Sven Neumann  <sven@gimp.org>

	* docs/gimp.1.in: fixed typos and improved explanation of parasiterc.

2005-04-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolorframe.c
	(gimp_color_frame_set_color) (gimp_color_frame_set_invalid): only
	update the view if there's actually a change.

2005-04-07  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-utils.[ch]: changed GimpConfig utility
	functions to take GObject variables instead of GimpConfig. There's
	nothing GimpConfig specific about these utilities.

	* app/actions/templates-commands.c
	* app/actions/tool-options-commands.c
	* app/base/base.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimprc.c
	* app/config/gimprc-serialize.c
	* app/core/gimpimage-grid.c
	* app/core/gimpimage-new.c
	* app/core/gimpstrokedesc.c
	* app/dialogs/grid-dialog.c
	* app/dialogs/image-new-dialog.c
	* app/dialogs/stroke-dialog.c
	* app/dialogs/preferences-dialog.c
	* app/display/gimpdisplayshell.c
	* app/text/gimptextlayer.c
	* app/text/gimptextundo.c
	* app/tools/gimptextoptions.c
	* app/tools/gimptexttool.c: 
	* libgimpconfig/gimpconfig-iface.c: changed accordingly.

2005-04-07  Sven Neumann  <sven@gimp.org>

	* app/actions/plug-in-actions.c (plug_in_actions_add_branch)
	* app/core/gimpinterpreterdb.c (resolve_extension)
	* app/widgets/gimpcolorframe.c (gimp_color_frame_update): plugged
	memleaks.

2005-04-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpmessagebox.c: plugged a small memleak.

	* libgimpwidgets/gimpcontroller.c: added a finalizer and free the
	allocated strings.

2005-04-06  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-utils.[ch]: added new function to reset
	a single property to its default value.

	* libgimpconfig/gimpconfig.def: updated.

	* app/config/gimpbaseconfig.[ch]: reverted last change.

	* app/base/base.c: use gimp_config_reset_property() instead.

2005-04-06  Sven Neumann  <sven@gimp.org>

	* app/Makefile.am: don't use -mwindows when linking gimp-console.

2005-04-06  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-path.[ch] (gimp_param_spec_config_path):
	declare default_value as const and allocate a copy.

	* app/config/gimpbaseconfig.[ch]: gives access to the default values
	for temp and swap path.

	* app/base/base.c (base_init): create the temp directory if it
	doesn't exist (bug #172682).

	* plug-ins/uri/uri-backend-gnomevfs.c: fixed path in error message.

2005-04-06  Sven Neumann  <sven@gimp.org>

	* docs/Makefile.am: install a link to the gimp(1) man-page for
	gimp-console(1).

	* docs/gimp.1.in: mention gimp-console.

2005-04-06  Sven Neumann  <sven@gimp.org>

	* app/main.c: improved "--help" output.

	* docs/gimp.1.in: updated.

2005-04-05  Sven Neumann  <sven@gimp.org>

	* INSTALL
	* configure.in: build and install gimp-console by default.

2005-04-05  Michael Natterer  <mitch@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-ins-query.[ch]: new files containing
	plug_ins_query().

	* tools/pdbgen/pdb/plug_in.pdb (plugins_query): remove all code
	and use above function.

	* app/pdb/plug_in_cmds.c: regenerated.

2005-04-05  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/plug_in.pdb (plugins_query): strip the menu
	strings from underlines before matching. Fixed function to not
	match all procedures twice.

	* app/pdb/plug_in_cmds.c: regenerated.

2005-04-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/dbbrowser/gimpprocbrowser.c: s/Blurb/Description/

	* plug-ins/dbbrowser/gimpprocview.c: allow to select the menu path
	label.

2005-04-05  Sven Neumann  <sven@gimp.org>

	* app/dialogs/image-properties-dialog.c: shorter dialog title.

2005-04-05  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptemplateeditor.c: s/Colorspace/Color space/

2005-04-05  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/Makefile.am
	* app/dialogs/info-window.[ch]: removed.

	* app/actions/view-actions.c
	* app/actions/view-commands.[ch]
	* menus/image-menu.xml.in: removed its action and menu stuff.

	* app/display/gimpdisplayshell-cursor.c
	* app/display/gimpdisplayshell-title.c
	* app/display/gimpdisplayshell.[ch]: removed info window stuff.
	This was the last display -> dialogs dependency.

	* app/dialogs/dialogs.c: added ugly hack that references
	info_dialog. Otherwise the still existing tools -> dialogs
	dependency breaks the build.

2005-04-05  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.[ch]
	* app/core/gimpimage.c
	(gimp_image_remove_layer, gimp_image_remove_channel): handle a
	floating selection attached to the layer or channel that is being
	removed.  Fixes bug #168582 but doesn't handle floating selections
	attached to layer masks.

2005-04-05  Sven Neumann  <sven@gimp.org>

	* configure.in: renamed localedir to gimplocaledir.

	* libgimpbase/Makefile.am (AM_CPPFLAGS)
	* tools/Makefile.am (AM_CPPFLAGS): changed accordingly.

	* gimp.pc.in: added gimplocaledir to the pkg-config file to give
	plug-ins a chance to get gimp_locale_directory() at compile time.

2005-04-05  Sven Neumann  <sven@gimp.org>

	* configure.in: select localedir according to the format of the
	gettext message catalogs. Closes bug #169274 again.

2005-04-05  Michael Natterer  <mitch@gimp.org>

	More unfinished replacement for the info window:

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpimagepropview.[ch]: new widget showing an image's
	size, resolution, mode, memsize etc.

	* app/dialogs/Makefile.am
	* app/dialogs/image-properties-dialog.[ch]: a dialog keeping the
	widget.

	* app/widgets/gimphelp-ids.h: a help ID for the dialog.

	* app/actions/image-actions.c
	* app/actions/image-commands.[ch]
	* menus/image-menu.xml.in: action and menu entry for the dialog.

2005-04-04  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpclonetool.c (gimp_clone_tool_oper_update): check
	for options->clone_type.

2005-04-04  Sven Neumann  <sven@gimp.org>

	* app/tools/gimppainttool.[ch] export paint tool statusbar API.
	
	* app/tools/gimpclonetool.c: added statusbar hint.

2005-04-04  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpenv.c (gimp_directory): use g_ascii_isalnum()
	instead of isalnum(). Rephrased some comments.

2005-04-04  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_edit_area_info.c
	* plug-ins/imagemap/imap_menu.c
	* plug-ins/imagemap/imap_stock.c: replaced 2 icons by GIMP stock
	icons

	* plug-ins/imagemap/images/Makefile.am: changed accordingly
	
	* plug-ins/imagemap/images/stock-arrow.png
	* plug-ins/imagemap/images/stock-link.png: removed accordingly
	
2005-04-04  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdata.c (gimp_data_create_filename): return early if
	called for an internal data object. Fixes bug #172581.

2005-04-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/deinterlace.c (deinterlace): fixed boundary
	conditions that led to incorrect preview (bug #172589).

2005-04-04  Tor Lillqvist  <tml@novell.com>

	* app/widgets/gimpclipboard.c (gimp_clipboard_format_compare): On
	Win32, move the "bmp" format to the front. Means less conversion
	in most cases, as other apps on Win32 typically provide/want the
	BMP format on the Clipboard. (Actually CF_DIB, but that's the
	same, just without the BMP file header.) See also bug #168173.

2005-04-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/FractalExplorer.c: fixed typo that
	caused a crash when deleting a fractal from the list (bug #172347).

2005-04-03  Sven Neumann  <sven@gimp.org>

	* configure.in (ALL_LINGUAS): readded "rw" (Kinyarwanda).

2005-04-03  Jakub Steiner <jimmac@ximian.com>

	* themes/Default/images/stock-cursor-16.png
	* themes/Default/images/stock-cursor-24.png
	* themes/Default/images/stock-sample-point-16.png
	* themes/Default/images/stock-sample-point-24.png: touch up a
	little.

2005-04-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcursorview.[ch]: fixed spacings and update them
	in GtkWidget::style_set(). Removed lots of cruft from the widget
	this files were copied from, including the GimpContext param
	to gimp_cursor_view_new(). Remember the state of the two color
	frames as aux-info in sessionrc.

	* app/dialogs/dialogs-constructors.c: changed accordingly.

2005-04-03  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcolorframe.c (gimp_color_frame_init): switch
	from a table to a vbox containing hboxes, so the widget's width is
	not determined by the longest label *plus* the longest value.

2005-04-03  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage.[ch]: added new signals "sample-point-added"
	and "sample-point-removed" and public functions to emit them.

	* app/core/gimpimage-sample-points.c (gimp_image_add_sample_point)
	(gimp_image_remove_sample_point): emit them accordingly.

	* app/core/gimpimage-undo-push.c (undo_pop_image_sample_point):
	ditto.

	(undo_pop_image_guide)
	(undo_pop_image_sample_point): added comments why we add/remove
	stuff manually instead of using the GimpImage APIs.

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpcursorview.[ch]
	* app/widgets/gimpsamplepointeditor.[ch]: new widgets.
	GimpCursorView is a replacement for the info window's "Cursor"
	page, GimpSamplePointEditor is a view on an image's sample points.
	The sample point editor does nothing yet except keeping a 2x2 grid
	of GimpColorFrames. Addresses bug #137776.

	* app/dialogs/dialogs.c
	* app/dialogs/dialogs-constructors.[ch]: register the new widgets
	as dockable dialogs.

	* app/actions/dialogs-actions.c (dialogs_dockable_actions)
	* menus/dialogs-menuitems.xml: added actions and menu items for
	the new dialogs.

	* app/display/gimpdisplayshell-cursor.c
	(gimp_display_shell_update_cursor)
	(gimp_display_shell_clear_cursor): update the new cursor view.

	* app/widgets/gimphelp-ids.h: help IDs for the new dialogs.

	* app/widgets/widgets-enums.[ch] (enum GimpColorFrameMode):
	changed description "Pixel values" to "Pixel" because the former
	was too long.

2005-04-02  Michael Natterer  <mitch@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/stock-cursor-16.png
	* themes/Default/images/stock-cursor-24.png
	* themes/Default/images/stock-sample-point-16.png
	* themes/Default/images/stock-sample-point-24.png: new icons for
	new dockables which are about to be added. Jimmac, I made them
	as ugly as possible, as you said :)

	* libgimpwidgets/gimpstock.[ch]: add them as stock icons.

2005-04-01  Michael Natterer  <mitch@gimp.org>

	* configure.in: revert previous commit because not all po files
	were added and the ALL_LINGUAS change was broken too.

2005-04-01  Steve Murphy  <murf@e-tools.com>

	* configure.in: Added "rw" to ALL_LINGUAS.

2005-04-01  Sven Neumann  <sven@gimp.org>

	* app/display/gimpstatusbar.c (gimp_statusbar_push): do nothing if
	this message is at the top of the stack already.

2005-04-01  Sven Neumann  <sven@gimp.org>

	* app/tools/gimppainttool.c: added a statusbar message suggesting
	to use Shift to draw a straight line.

2005-04-01  Sven Neumann  <sven@gimp.org>

	* plug-ins/rcm/rcm_dialog.c: keep the previews from expanding. Fixes
	bug #172284.

2005-04-01  Sven Neumann  <sven@gimp.org>

	* configure.in (ALL_LINGUAS): removed "sl" until all required files
	have been added to CVS.

2005-03-31  Manish Singh  <yosh@gimp.org>

	* app/dialogs/quit-dialog.c (quit_dialog_new): cast to
	GIMP_CONTAINER_VIEW for gimp_container_view_get_dnd_widget()

2005-03-31  Sven Neumann  <sven@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/gimpfgbgview.[ch]
	* app/widgets/widgets-types.h: added new widget GimpFgBgView;
	somewhat similar to GimpFgBgEditor but a lot simpler.

	* app/widgets/gimpcoloreditor.c: use GimpFgBgView as preview widget.
	Closes bug #168592.

	* app/widgets/gimpfgbgeditor.c: gracefully handle a very small
	size allocation.

2005-03-31  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c: enable save via DND from the image
	list in the quit dialog.

2005-03-31  Sven Neumann  <sven@gimp.org>

	* app/dialogs/quit-dialog.c: use GTK_STOCK_DELETE for the "Discard
	Changes" button.

2005-03-31  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-close.c
	(gimp_display_shell_close_dialog): use GTK_STOCK_DELETE for the
	"Don't Save" button.

2005-03-30  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpwidgets.c (gimp_label_set_attributes): fixed
	copy-n-paste bug that affected PANGO_ATTR_SIZE.

2005-03-30  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpvectortool.c (gimp_vector_tool_status_update):
	set a different help message in polygonal mode. Fixes bug #172051.

2005-03-30  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpclipboard.c: when GIMP exits and a clipboard
	manager is available, store the clipboard content.

2005-03-28  Sven Neumann  <sven@gimp.org>

	* app/dialogs/resize-dialog.c (resize_dialog_new): handle
	gimp_viewable_get_pixbuf() returning NULL. Fixes bug #171827.

2005-03-26  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c (script_fu_find_scripts):
	removed menu branch registering here (this function is called on
	each refresh).

	* plug-ins/script-fu/script-fu.c (script_fu_extension_init):
	renamed from script_fu_auxillary_init(), this function is only
	called once when the extension starts up. Register the menu
	branches here.

2005-03-26  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c (lut_lookup): actually do a binary
	search, not a linear search starting in the middle.

2005-03-26  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-close.c
	(gimp_display_shell_close_dialog): added an icon to the "Don't Save"
	button.

2005-03-26  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdnd.c: don't add the same target multiple times.
	This used to happen when  gimp_dnd_foo_source_add() is called
	after calling gimp_dnd_drag_source_set_by_type().

2005-03-26  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablecombobox.c
	* libgimp/gimpimagecombobox.c: accept DND of image / drawable IDs.

2005-03-26  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptoolbox-image-area.c: added a hint about XDS to
	the tooltip, but only if compiled for X11.

2005-03-26  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c: use the same LUT for all color
	channels. Do a binary search in the LUT for the backward
	transformation.

2005-03-26  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c: applied a modified version of
	a patch by Gautier Portet that introduces a LUT for the gamma
	correction (bug #101256). Also moved constants out of the
	CdisplayColorblind struct.

2005-03-26  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_lcms.c: disconnect from the config in dispose
	instead of in finalize.

2005-03-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpread.c: better error message (bug #171646).

2005-03-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.c (gimp_dockable_add): initialize the
	tab style to a supported one. Fixes bug #171567.

2005-03-25  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpread.c: applied patch from David Costanzo that
	initializes unspecified pixels in RLE bitmaps. Fixes bug #171562.

2005-03-25  Sven Neumann  <sven@gimp.org>

	* app/dialogs/file-save-dialog.c
	* app/widgets/gimpfiledialog.[ch]: moved overwrite confirmation
	dialog to app/widgets.

	* app/widgets/gimpdnd-xds.c: set "Untitled.xcf" as default name
	for untitled images; ask for confirmation before overwriting a
	local file.

2005-03-25  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/emboss.c: fix usage of RGBA data,
	change to premultiplied alpha for embossing, hopefully
	fixes bug #72864.

2005-03-25  Sven Neumann  <sven@gimp.org>

	* app/core/gimpmarshal.list: added VOID: OBJECT, OBJECT.

	* app/widgets/gimpview.[ch]: pass old and new viewable in the
	"set-viewable" signal.

	* app/widgets/gimptoolbox-image-area.c: don't add the XDS drag source
	more than once.

2005-03-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdnd-xds.c (gimp_dnd_xds_save_image): in case of
	an error, answer with E (error) instead of F (failure).

2005-03-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpview.[ch]: virtualized GimpView::set_viewable.

	* app/widgets/gimptoolbox-image-area.c: hook into "set_viewable"
	and add an XDS drag source.

	* app/widgets/gimpdnd-xds.c
	* app/widgets/gimpdnd.c: unset the XdndDirectSave0 property when
	the drag ends, minor cleanups.

	* app/widgets/gimpimageview.c: removed unused function prototype.

2005-03-25  Sven Neumann  <sven@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/gimpdnd-xds.[ch]: new files.

	* app/widgets/gimpdnd.[ch]
	* app/widgets/widgets-enums.h: added a basic XDS (Direct Save
	Protocol) implementation.

	* app/widgets/gimpimageview.c: allow to save images by dragging
	them from the Images dialog to an XDS capable file manager.

2005-03-25  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/common/displace.c: Fixed off-by-one error in check for
	number of passed parameters.

2005-03-25  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.[ch]: added
	gimp_prop_file_chooser_button_new(), a convenience constructor for
	GtkFileChooserButton.

	* libgimpwidgets/gimpwidgets.def: updated.

	* app/dialogs/preferences-dialog.c: use the new prop widget on the
	color management page.

2005-03-24  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* configure.in
	* plug-ins/common/screenshot.c: allow option of screenshot
	without decorations if libXmu is present (fixes bug #133626),
	clean up code a bit.

2005-03-24  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.[ch]
	* app/core/gimpimage-undo-push.[ch]
	* app/core/gimplayermask.[ch]: eek, my fault... removed
	GIMP_UNDO_LAYER_MASK_EDIT stuff again because that just determines
	the active drawable, which must not affect undo.

	* app/pdb/pdb_glue.h
	* app/actions/layers-commands.c (layers_mask_edit_cmd_callback):
	changed accordingly.

	(layers_mask_disable_cmd_callback): reverted last change. the old
	code was correct.

2005-03-24  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.[ch] (enum GimpUndoType) : reordered values
	so layer and layer mask undos are grouped together.

	* app/core/gimpimage-undo-push.[ch]: same here. Changed the new
	layer mask undos to have 3 simple push functions for the 3
	properties, just as the layer property undos. Also made the code
	look like the layer properties undo stuff.

	* app/core/gimplayermask.c (gimp_layer_mask_set_apply,edit,show):
	changed accordingly.

2005-03-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmp.h (Bitmap_Head_Struct)
	* plug-ins/bmp/bmpread.c: use a signed long for width and height
	and check that width is > 0 (negative height is allowed and
	handled by our code). Fixes bug #171453.

2005-03-24  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpimage-undo-push.[ch]
	* app/core/gimplayermask.c: fix compile warnings. 

2005-03-24  Sven Neumann  <sven@gimp.org>

	* app/display/gimpstatusbar.c (gimp_statusbar_push_coords) 
	(gimp_statusbar_set_cursor): use RINT() instead of ROUND() to get
	proper rounding of negative values. Fixes bug #171497.

2005-03-24  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/core-enums.[ch]
	* app/core/gimpimage-undo-push.[ch]
	* app/core/gimplayermask.[ch]: 
	* app/pdb/pdb_glue.h
	* app/actions/layers-commands.c: try again from clean tree;
	hopefully will work this time.  (bug #148852)
	
2005-03-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/*.scm: don't mark menu branches for
	translation; the translatable branch name is registered by the
	Script-Fu extension.

2005-03-24  Michael Natterer  <mitch@gimp.org>

	Added API to explicitly register dynamic menu items hierarchies.
	Fixes bug #170623.

	* app/core/gimp.h: added "GSList *plug_in_menu_branches".

	* app/plug-in/plug-in-types.h
	* app/plug-in/plug-ins.[ch]: added API to register plug-in menu
	branches, just as for locale and help domains. Cleaned up handling
	of locale and help domains.

	(plug_ins_exit): free the registered menu branches.

	* app/actions/plug-in-actions.[ch] (plug_in_actions_add_branch):
	new function to explicitly add a menu branch action.

	(plug_in_actions_setup): add the registered menu branches to each
	new action group.

	(plug_in_actions_build_path): always strip the untranslated menu
	path from underlines before using it as hash table key or action
	name.

	* app/menus/plug-in-menus.c (plug_in_menus_add_proc): changed
	accordingly: strip underlines from untranslated menu paths before
	passing them to plug_in_menus_build_path().

	* app/core/gimp-gui.[ch]: added gimp_menus_create_branch() plus
	vtable entry to access the new stuff from the core. Renamed the
	functions desling with items from gimp_foo_entry() to
	gimp_foo_item().

	* app/gui/gui-vtable.c: implement create_branch() and add the
	branch action to all existing "plug-in" action groups. Note that
	we don't need to create any menus because that happens implicitly
	when adding menu items.

	* tools/pdbgen/pdb/plug_in.pdb (plugin_menu_branch_register): new
	PDB wrapper to access branch registering from plug-ins.

	* app/pdb/internal_procs.c
	* app/pdb/plug_in_cmds.c
	* libgimp/gimpplugin_pdb.[ch]: regenerated.

	* libgimp/gimp.def: changed accordingly.

	* plug-ins/script-fu/script-fu-scripts.c (script_fu_find_scripts):
	register the menu branches for all included scripts.

2005-03-24  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcolormapeditor.c: use a GimpColorHexEntry widget.

2005-03-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpread.c: applied a patch from David Costanzo that
	fixes handling of odd-length pixel encodings in "absolute mode" of
	RLE4 compressed data (bug #171306).

2005-03-24  Sven Neumann  <sven@gimp.org>

	Merged from gimp-2-2 branch:

	* app/widgets/gimphistogrameditor.c: change to the Value channel
	if the current channel becomes invalid due to an image mode change.
	Fixes bug #170116.

2005-03-24  Sven Neumann  <sven@gimp.org>

	* app/actions/layers-commands.c
	* app/core/core-enums.[ch]
	* app/core/gimpimage-undo-push.[ch]
	* app/pdb/pdb_glue.h: reverted Bill's changes to fix the build.

2005-03-23  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/core-enums.[ch]
	* app/core/gimpimage-undo-push.[ch]
	* app/pdb/pdb_glue.h
	* app/actions/layers-commands.c: make layer mask property changes
	undoable, should fix bug #148852.  Note that a little shape-layer
	stuff is in core-enums, will be needed shortly.
	
2005-03-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c: seperated platform specific code into
	individual functions; should make it easier to contribute the missing
	platform specific code ...

2005-03-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/alien-glow-logo.scm
	* plug-ins/script-fu/scripts/alien-neon-logo.scm
	* plug-ins/script-fu/scripts/basic1-logo.scm
	* plug-ins/script-fu/scripts/basic2-logo.scm
	* plug-ins/script-fu/scripts/blended-logo.scm
	* plug-ins/script-fu/scripts/bovinated-logo.scm
	* plug-ins/script-fu/scripts/chalk.scm
	* plug-ins/script-fu/scripts/chip-away.scm
	* plug-ins/script-fu/scripts/chrome-logo.scm
	* plug-ins/script-fu/scripts/comic-logo.scm
	* plug-ins/script-fu/scripts/coolmetal-logo.scm
	* plug-ins/script-fu/scripts/frosty-logo.scm
	* plug-ins/script-fu/scripts/glossy.scm
	* plug-ins/script-fu/scripts/gradient-bevel-logo.scm
	* plug-ins/script-fu/scripts/neon-logo.scm
	* plug-ins/script-fu/scripts/starburst-logo.scm
	* plug-ins/script-fu/scripts/starscape-logo.scm
	* plug-ins/script-fu/scripts/t-o-p-logo.scm
	* plug-ins/script-fu/scripts/textured-logo.scm: no need to set the
	text as name of the text layer. The text layer is created with that
	name already.

2005-03-24  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpmessagebox.h
	* libgimpconfig/gimpconfigwriter.h: added G_GNUC_PRINTF attributes.

2005-03-23  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/screenshot.c: add ability to define region
	by pointer-dragging.  UI may need tweaking.

2005-03-23  Sven Neumann  <sven@gimp.org>

	* app/display/gimpcanvas.[ch] (gimp_canvas_draw_text): fixed
	gtk-doc comments; added G_GNUC_PRINTF attribute.

2005-03-23  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpselectiondata.c (gimp_selection_data_get_image)
	(gimp_selection_data_get_component)
	(gimp_selection_data_get_item): same fix as below for ID-based DND
	types.

2005-03-23  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpfontmenu.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimppalettemenu.c
	* libgimp/gimppatternmenu.c: accept names passed over DND no matter
	whether they are NULL-terminated or not.

	* app/widgets/gimpselectiondata.c: same change here, also
	UTF8-validate the selection data before accepting it.

2005-03-23  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpbrushmenu.c
	* libgimp/gimpfontmenu.c
	* libgimp/gimpgradientmenu.c
	* libgimp/gimppalettemenu.c
	* libgimp/gimppatternmenu.c: accept drops on selection widgets as
	requested in bug #10677.

2005-03-23  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpmenu.c: added gtk-doc comments explaining what
	functions to use instead of these deprecated ones.

2005-03-23  Sven Neumann  <sven@gimp.org>

	* app/base/tile-swap.c (tile_swap_init): create the swap directory
	if it doesn't exist. Will still fail if the parent directory is not
	available. Still good enough to close bug #167506.

	* app/app_procs.c: tweaked error message.

2005-03-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colortoalpha.c: unset "Keep transparency", it is
	not what the user wants if this plug-in is being used (bug #151910).

2005-03-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/screenshot.c: removed global variables; added a
	short delay after destroying the dialog so that the root window
	gets redrawn; moved camera icon to the action button.

2005-03-22  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/screenshot.c: always derive image from root
	window, fixes bug #144788.
	
2005-03-22  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpactiongroup.c
	* app/widgets/gimpcolorpanel.c: use gtk_action_set_sensitive()
	and gtk_action_set_visible() instead of setting the respective
	properties.

2005-03-22  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* configure.in: raise required librsvg version to 2.8.0
	* plug-ins/common/svg.c: change deprecated librsvg api,
	fixes bug #147662.
	
2005-03-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/sparkle.c
	* plug-ins/common/spheredesigner.c
	* plug-ins/common/struc.c
	* plug-ins/common/tileit.c
	* plug-ins/common/warp.c
	* plug-ins/common/whirlpinch.c
	* plug-ins/common/wind.c: handle situation where intersection
	of selection and drawable is empty; progress on bug #155733.

2005-03-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimptransformtool.c
	* app/tools/gimpfliptool.c
	* app/core/gimpdrawabletransform.c: avoid messages and critical
	error when transforming a drawable that does not intersect
	the selection.  

2005-03-21  Sven Neumann  <sven@gimp.org>

	* app/paint/gimpink.c: changed time-smoother code to use guint32
	time values externally, guint64 internally. Proper fix for bug
	#164272.

2005-03-21  Sven Neumann  <sven@gimp.org>

	* app/actions/dialogs-actions.h: bail out if
	widgets/gimpactiongroup.h has not been included beforehand.

	* app/actions/actions.c: include widgets/gimpactiongroup.h. Fixes
	build with amd64/gcc-4.0 (Debian bug report #300227).

2005-03-21  Sven Neumann  <sven@gimp.org>

	* etc/controllerrc: fixed defaults for mouse wheel controller (bug
	#171083, fix spotted by Michael Schumacher).

2005-03-21  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainertreeview.c
	(gimp_container_tree_view_constructor): disable search for tree
	views so that treeview typeahead doesn't collide with global
	accelerators. Fixes bug #169339 and would suck less if bug #170435
	was fixed.

2005-03-21  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-transform-utils.[ch]: changed all transform
	utilities to modify the passed transform matrix instead of
	creating a new one.

	* app/text/gimptextlayer-transform.c
	* app/tools/gimpperspectivetool.c
	* app/tools/gimprotatetool.c
	* app/tools/gimpscaletool.c
	* app/tools/gimpsheartool.c
	* app/vectors/gimpvectors.c
	* tools/pdbgen/pdb/drawable_transform.pdb
	* tools/pdbgen/pdb/transform_tools.pdb: changed accordingly.

	* app/pdb/drawable_transform_cmds.c
	* app/pdb/transform_tools_cmds.c: regenerated.

2005-03-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icosave.c (ico_create_palette): fixed parameter
	check, NULL is valid for an empty palette. Fixes bug #170812.

2005-03-21  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c (gimp_image_convert): added missing
	period in newly added message.

	* app/dialogs/convert-dialog.c (convert_dialog_palette_filter): don't
	show empty palettes (bug #170973).

2005-03-21  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpmeasuretool.[ch]: added width and height to the
	info displayed in the statusbar and the info window.
	Fixes bug #165275.

2005-03-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpwidgets/gimpcolorscales.c (gimp_color_scales_update_scales):
	Block callback when updating hex entry, fixes bug #169882.
	
2005-03-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpimage-convert.c: check for non-empty palette
	before converting to indexed using custom palette, otherwise
	show warning and abort;	fixes bug #170973.

2005-03-20  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpimage-convert.c: applied patch from Adam
	Moss converning gray->indexed conversion,
	fixes bug #170825.

2005-03-20  Sven Neumann  <sven@gimp.org>

	* app/text/gimptext.[ch]
	* app/text/gimptextlayer-transform.[ch]: some infrastructure for
	text transforms.

2005-03-20  Sven Neumann  <sven@gimp.org>

	* app/core/gimp-transform-utils.c (gimp_transform_matrix_perspective):
	cosmetic changes.

	* libgimpmath/gimpmatrix.[ch]
	* libgimpmath/gimpmath.def: added gimp_matrix_is_affine().

2005-03-19  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-sample-points.c
	* app/display/gimpdisplayshell-draw.c
	* app/display/gimpdisplayshell.c
	* app/tools/gimpcolortool.c: make sure sample points always have
	coordinates in the range [0..width/height-1], also added lots of
	+0.5 because they live at the pixels' centers, not at their
	borders. Fixed drawing of sample points at the display borders.

2005-03-19  Manish Singh  <yosh@gimp.org>

	* app/config/Makefile.am: actually link test program with
	libgimpconfig.

	* app/Makefile.am
	* libgimpwidgets/Makefile.am: reordered library link order to be
	consistent with shared library dependencies.

	* plug-ins/common/mkgen.pl: Cosmetic fix to the generated Makefile.am.

	* plug-ins/common/Makefile.am: regenerated.

2005-03-19  Manish Singh  <yosh@gimp.org>

	* gimp.spec.in: Remove outdated file.

2005-03-19  Manish Singh  <yosh@gimp.org>

	* app/composite/gimp-composite-altivec.[ch]: More accelerated functions
	(screen, grain_merge, grain_extract, divide, dodge) from Frederic
	Leroy.

	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-altivec-test.c: regenerated.

2005-03-19  Manish Singh  <yosh@gimp.org>

	* app/composite/gimp-composite-altivec.[ch]: More accelerated functions
	(multiply, blend) from Frederic Leroy.

	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-altivec-test.c: regenerated.

2005-03-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/fp.c: use callbacks to handle
	"size-allocate" for preview size changes, fixes 
	bug #160032.
	
2005-03-18  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpimage-convert.c:  when converting grayscale
	to mono, treat the palette as gray rather than rgb, giving
	more than tenfold speedup.  Fixes bug #170801.

2005-03-18  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainerview.c: make "preview-size" and
	"preview-border-width" construct properties. Fixes creation
	using g_object_new().

	* app/widgets/gimpcontainerentry.c
	* app/widgets/gimpcontainertreeview.c
	* app/widgets/gimplayertreeview.c (set_preview_size): handle
	unset model and/or view gracefully.

	* app/dialogs/image-new-dialog.c: unset "focus-on-click" on the
	template combo-box.

2005-03-17  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/fp.c:  major code cleanup, make it
	Repeat and Re-Show properly.  Should fix bug #141032.

2005-03-17  Sven Neumann  <sven@gimp.org>

	* app/actions/layers-actions.c
	* app/actions/plug-in-actions.c
	* app/actions/view-actions.c
	* plug-ins/common/compose.c
	* plug-ins/common/dog.c
	* plug-ins/pygimp/plug-ins/py-slice.py
	* plug-ins/script-fu/scripts/i26-gunya2.scm
	* plug-ins/script-fu/scripts/news-text.scm
	* plug-ins/script-fu/scripts/text-circle.scm: applied patch from
	Michael Terry that adds missing mnemonics (bug #106991).

2005-03-16  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.c: fixed checks for uncalculated histogram.
	Fixes bug #170570.

2005-03-14  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpnewrectselecttool.c
	* app/tools/gimprectangletool.[ch]: improve cursor handling and
	other aspects of ui for rectangle tools.

2005-03-14  Shlomi Fish  <shlomif@iglu.org.il>

	* app/paint-funcs/paint-funcs.c
	* app/paint-funcs/paint-funcs-generic.h: fix bug #143315. When the
	visibility of the Alpha channel is turned off, it should make
	alpha=255.

2005-03-13  Manish Singh  <yosh@gimp.org>

	* app/composite/gimp-composite-altivec.[ch]: More accelerated functions
	from Frederic Leroy.

	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-altivec-test.c: regenerated.

2005-03-13  Sven Neumann  <sven@gimp.org>

	* app/dialogs/print-size-dialog.c (print_size_dialog_response):
	handle the resolution unit correctly, fixes bug #170200.

2005-03-13  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/drawable_transform.pdb
	(drawable_transform_scale)
	(drawable_transform_scale_default): applied fix from Theodor de
	Ment which fixes a wrong precondition check which made certain
	scale operations impossible. Fixes bug #170195.

	* tools/pdbgen/pdb/transform_tools.pdb (scale): fixed the same
	copy & paste bug here.

	* app/pdb/drawable_transform_cmds.c
	* app/pdb/transform_tools_cmds.c: regenerated.

2005-03-12  Michael Schumacher  <schumaml@cvs.gnome.org>

	* plug-ins/common/winclipboard.c: applied a patch from 
	Sven Neumann that removes the paste functionality from the
	plug-in. Since GTK+ 2.6.x, this isn't needed anymore. 
	Fixes bug #168488.  

2005-03-12  Sven Neumann  <sven@gimp.org>

	* app/base/hue-saturation.[ch]
	* app/tools/gimphuesaturationtool.[ch]: applied a patch from Joao
	S. O. Bueno Calligaris and modified it a little. This adds a way
	to control the overlap between hue ranges in the Hue Saturation
	tool (bug #166628).

2005-03-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/despeckle.c: test intensity against white and
	black level, not only the red channel. Improved border behavior.
	Iterate over the pixels row-by-row, instead of jumping through the
	data column-wise.

2005-03-11  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpstrokedesc.h
	* app/core/gimpstrokedesc.c (gimp_stroke_desc_duplicate):
	New function, will be needed for shape layers.
	
2005-03-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/deinterlace.c
	* plug-ins/common/despeckle.c
	* plug-ins/common/laplace.c
	* plug-ins/common/neon.c
	* plug-ins/common/sobel.c
	* plug-ins/common/dog.c: update progress less frequently.

2005-03-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/despeckle.c: minor cleanup, inline
	pixel_intensity() and pixel_copy().

2005-03-10  Manish Singh  <yosh@gimp.org>

	* plug-ins/uri/url-backend-wget.c: force the server-response wget
	option off so it doesn't screw up our parsing.

2005-03-10  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c: lots of code for dealing
	with constraints.  Almost functional now ...
	
2005-03-10  Sven Neumann  <sven@gimp.org>

	* app/composite/gimp-composite-altivec.c: delete trailing whitespace.

2005-03-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimptexttool.c (gimp_text_tool_create_vectors_warped):
	make created path visible and active.
	
2005-03-09  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpfu.py: initialize button variable before using
	it in PF_BUTTON code. Fixes bug #169793. Thanks to Joao S. O. Bueno
	Calligaris.

2005-03-10  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpsizeentry.c (gimp_size_entry_show_unit_menu):
	added "Since: GIMP 2.4" to the docs.

	* libgimpwidgets/gimpwidgets.def: added the new symbol.

2005-03-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpwidgets/gimpsizeentry.[ch]: added function
	gimp_size_entry_show_unit_menu() for convenience.

	* app/tools/gimprectangleoptions.[ch]
	* app/tools/gimprectangletool.[ch]:  more work on 
	controls in Tool Options.  Can now resize rectangle 
	by dragging any corner or edge -- move rectangle by
	clicking inside and dragging.

2005-03-09  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainerview.c
	* app/widgets/gimpimagedock.c
	* app/widgets/gimptoolbox.c
	* app/widgets/gtkwrapbox.c
	* libgimpwidgets/gimpcellrenderercolor.c
	* libgimpwidgets/gimpcellrenderertoggle.c
	* libgimpwidgets/gimpframe.c: use canonical names when registering
	param specs.

2005-03-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/vectors/gimpvectors-warp.c
	* app/vectors/gimpvectors-warp.h: new files implementing
	"path along a path" functionality.

	* app/vectors/Makefile.am: new stuff added
	
	* gimp/app/vectors/gimpvectors.[ch]: actually implement
	gimp_vectors_real_stroke_get_length().

	* app/tools/gimptexttool.c
	* app/tools/gimptextoptions.c: first pass at "text
	along a path", using new functions.  See bug #169616.

2005-03-09  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette.[ch]: renamed again, to
	gimp_palette_[gs]et_columns this time.

	* app/dialogs/palette-import-dialog.c
	* app/widgets/gimppaletteeditor.c: changed accordingly.

	* tools/pdbgen/pdb/palette.pdb: renamed newly added PDB function.
	Also added a getter for the columns.

	* app/pdb/internal_procs.c
	* app/pdb/palette_cmds.c
	* libgimp/gimppalette_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-03-09  Michael Natterer  <mitch@gimp.org>

	More sample point stuff. Addresses bug #137776.

	* app/core/gimpimage-sample-points.c
	* app/core/gimpimage-undo-push.c: append, not prepend the sample
	points to the image's list because their index matters. Update
	sample points when their index changes.

	* app/display/gimpcanvas.[ch]: added own sytles for the sample
	points.  Added gimp_canvas_draw_text() which uses a PangoLayout
	which is cached in the canvas.

	* app/display/gimpdisplayshell-draw.c
	(gimp_display_shell_draw_sample_point): draw the sample points
	more distinct from guides using the new canvas APIs above.

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_[hv]ruler_button_press): factored out all
	code to

	(gimp_display_shell_ruler_burron_press): which takes a boolean
	"horizontal" variable and allows to add sample points with
	<control>+drag.

	* app/tools/gimpcolortool.[ch]: implement adding, moving and
	removing of sample points in the same way as the move tool moves
	guides.

	* app/tools/gimpcolorpickertool.c
	(gimp_color_picker_tool_oper_update): chain up.

2005-03-08  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/metadata/interface.c: fix spelling error
	noted in bug #169656.
	
2005-03-08  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.[ch]
	* app/tools/gimprectangleoptions.[ch]: add size entry in
	options to control dimensions.  Still work in progress.
	
2005-03-09  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell.[ch]: added
	gimp_display_shell_get_unit(), for completeness.

2005-03-08  Sven Neumann  <sven@gimp.org>

	* app/core/gimpgradient.c (gimp_gradient_segment_split_uniform):
	fixed brokeness introduced when eliminating gradient->last_visited.

2005-03-08  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimpviewrenderergradient.c: revert previous
	change.  Didn't read the code carefully enough.
	
2005-03-08  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimpviewrenderergradient.c: 
	(gimp_view_renderer_gradient_render): Make sure specified
	point lies within specified gradient segment; should
	fix bug #167604.

2005-03-08  Sven Neumann  <sven@gimp.org>

	* app/file/file-open.c (file_open_layer): open images interactively.
	Fixes bug #168936.

2005-03-08  Sven Neumann  <sven@gimp.org>

	* app/tools/gimppaintoptions-gui.c (fade_options_gui)
	(gradient_options_gui)
	* app/tools/gimpselectionoptions.c (gimp_selection_options_gui):
	call gimp_unit_menu_set_pixel_digits() after connecting up the
	spinbuttons and the unitmenu. Fixes initial display (bug #169066).

2005-03-08  Sven Neumann  <sven@gimp.org>

	* app/core/gimppalette.[ch]: renamed gimp_palette_[gs]et_n_columns
	to gimp_palette_[gs]et_num_columns().

	* app/dialogs/palette-import-dialog.c
	* app/widgets/gimppaletteeditor.c: changed accordingly.

	* tools/pdbgen/pdb/palette.pdb: added new PDB function to control
	the number of columns used when displaying a palette (bug #169370).

	* app/pdb/internal_procs.c
	* app/pdb/palette_cmds.c
	* libgimp/gimppalette_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-03-08  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpcurvestool.c (gimp_curves_tool_dialog)
	* app/tools/gimplevelstool.c (gimp_levels_tool_dialog): added
	mnemonics for the Channels menu.

2005-03-07  Manish Singh  <yosh@gimp.org>

	* plug-ins/metadata/interface.c
	* plug-ins/metadata/xmp-model.c: fix some gssize confusion.

2005-03-07  Sven Neumann  <sven@gimp.org>

	* app/tools/gimpellipseselecttool.c
	* app/tools/gimprectselecttool.[ch]: applied a patch by Nils
	Bjorklund that should fix bug #143887 (selection rectangle "moves"
	when starting at the top-right corner).

2005-03-07  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/perspective-shadow.scm: Reverting previous
	change as I was mixing up two different versions of GIMP at the time.

2005-03-07  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/scripts/perspective-shadow.scm: Fixed the
	options for SF-ENUM in the register block which were changed (read
	broken) when the entry was changed from SF-OPTION.

2005-03-07  RaphaÃ«l Quinet  <raphael@gimp.org>

	* configure.in
	* plug-ins/Makefile.am (SUBDIRS): Enable build of metadata plug-in.

	* plug-ins/metadata/xmp-gen.c 
	* plug-ins/metadata/xmp-gen.h 
	* plug-ins/metadata/xmp-encode.c 
	* plug-ins/metadata/xmp-encode.h: Renamed xmp-gen.[ch] to
	xmp-encode.[ch].

	* plug-ins/metadata/Makefile.am 
	* plug-ins/metadata/metadata.c 
	* plug-ins/metadata/interface.c: Updated accordingly + minor fixes.

2005-03-07  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcolortool.c: converted tabs to spaces, stylistic
	cleanups.

2005-03-06  Manish Singh  <yosh@gimp.org>

	* app/composite/gimp-composite-altivec.c: contort it to compile with
	Apple's weirdo gcc.

	* app/composite/gimp-composite-altivec.h: honor USE_ALTIVEC.

2005-03-06  Manish Singh  <yosh@gimp.org>

	* configure.in: rework AltiVec tests some.

2005-03-06  Manish Singh  <yosh@gimp.org>

	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-altivec-test.c: regenerated so the new
	implementation is actually used.
	
2005-03-06  Manish Singh  <yosh@gimp.org>

	* configure.in: revised tests for AltiVec. Define ALTIVEC_EXTRA_CFLAGS
	for the extra compiler options needed. Also, support runtime checking
	for AltiVec through the sysctl on Mac OS X, instead of SIGILL assembly
	instruction checking, which needs GNU as.

	* app/base/cpu_accel.c: use the sysctl if available.

	* app/composite/Makefile.am: use ALTIVEC_EXTRA_CFLAGS.

	* app/composite/gimp-composite-altivec.c: conditionally #include
	altivec.h

2005-03-05  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/gimp-composite-altivec.[ch]
	* app/composite/gimp-composite-altivec-installer.c
	* app/composite/gimp-composite-altivec-test.c:
	Added updates from starox-gimp@starox.org
	(Frederic Leroy) to implement Altivec instruction optimisations.

	Regenerated sources.

	* app/composite/gimp-composite-mmx.c: Replaced a pesky movntq
	instruction with a movq.  Movntq is an SSE instruction, not an MMX
	instruction.

2005-03-05  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/siod/sliba.c: Oops...one 'case tc_string:' was
	lost while fixing handling of string arrays.

2005-03-05  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/gimp-composite-generic.c
	* app/composite/gimp-composite-mmx.c
	* app/composite/gimp-composite-sse.c
	Incorporated a very clean patch from starox-gimp@starox.org
	(Frederic Leroy) which improves the generic performance of the
	burn compositing function.  Speed is improved at a cost of a 64k
	look-up table which is probably manageable for 8bpp images, but at
	larger bpp images (which currently are not supported by the GIMP)
	this is unlikely to be tolerable.

	The generic C implementation of the burn function uses this
	look-up table, the mmx/sse implementations have been commented
	out.

2005-03-05  Sven Neumann  <sven@gimp.org>

	Fix for bug #169274:

	* configure.in: updated definition of localedir.

	* po/Makefile.in.in: updated.

	* po-libgimp/Makefile.in.in
	* po-plug-ins/Makefile.in.in
	* po-script-fu/Makefile.in.in: synchronized with po/Makefile.in.in.

2005-03-05  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/*: Update or add missing copyright and GPL comments.

2005-03-05  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp-drawable.c: default args for layer
	constructor.

2005-03-04  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/enumcode-py.pl: include Parasite flag values.

	* plug-ins/pygimp/gimpenums.py: regenerated.

	* plug-ins/pygimp/pygimp-drawable.c: minor change for type
	consistency.

	* plug-ins/pygimp/pygimp-image.c: add keyword args, is_dirty getter.

2005-03-04  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/gimpmodule.c: wrap fonts_refresh and fonts_get_list,
	clean up some of the other resource list plugins.

	* plug-ins/pygimp/pygimp-drawable.c: more keyword args and better
	exception messages.

	* plug-ins/pygimp/pygimp-parasite.c: support keyword args for
	parasite constructor.

2005-03-04  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/pdb/layer.pdb: fix documentation of edit_mask
	accessors.

	* libgimp/gimplayer_pdb.c
	* app/pdb/layer_cmds.c: regenerated.

2005-03-05  Sven Neumann  <sven@gimp.org>

	* plug-ins/metadata/interface.c: specify alternative button order
	for the new dialogs.

2005-03-04  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/Makefile.am: no need to export PLUG_IN_INFO symbol.

	* plug-ins/pygimp/pygimp-image.c: more descriptive exception for
	Image constructor.

	* plug-ins/pygimp/pygimp-pdb.c: cosmetic changes.

	* plug-ins/pygimp/pygimp-drawable.c: wrap transform API, add keyword
	arguments to several drawable methods, wrap
	layer_resize_to_image_size.

2005-03-05  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c
	* app/actions/view-commands.[ch]
	* app/config/gimprc-blurbs.h
	* app/core/core-enums.[ch]
	* app/core/gimp.c
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-undo-push.[ch]
	* app/core/gimpimage.c
	* app/display/gimpdisplayoptions.[ch]
	* app/display/gimpdisplayshell-appearance.[ch]
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-draw.[ch]
	* app/widgets/gimphelp-ids.h
	* menus/image-menu.xml.in: reordered stuff to be in guides, grid,
	sample points order. Some cleanup and indentation.

2005-03-04  RaphaÃ«l Quinet  <raphael@gimp.org>

	* plug-ins/metadata/xmpdump.c: test program that tries to extract
	XMP metadata from files (image files, AI files, PDF documents...)

	* menus/image-menu.xml.in: Added placeholder for file properties.

	* plug-ins/metadata/.cvsignore
	* plug-ins/metadata/Makefile.am
	* plug-ins/metadata/README
	* plug-ins/metadata/interface.c
	* plug-ins/metadata/interface.h
	* plug-ins/metadata/metadata.c
	* plug-ins/metadata/xmp-model.c
	* plug-ins/metadata/xmp-model.h
	* plug-ins/metadata/xmp-parse.c
	* plug-ins/metadata/xmp-parse.h
	* plug-ins/metadata/xmp-gen.c
	* plug-ins/metadata/xmp-gen.h: First import of metadata editor.
	Currently, it cannot read metadata (except for XMP), it cannot
	edit metadata and it cannot save metadata (just export).  But this
	might improve later...  The README file contains some info.

2005-03-04  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c
	* app/file/gimprecentlist.c
	* app/widgets/gimpwidgets-utils.c
	* modules/controller_linux_input.c
	* modules/controller_midi.c
	* plug-ins/common/compressor.c
	* plug-ins/common/mail.c
	* plug-ins/common/psp.c
	* plug-ins/common/raw.c
	* plug-ins/helpbrowser/dialog.c
	* plug-ins/imagemap/imap_cern.y
	* plug-ins/imagemap/imap_cern_parse.[ch]
	* plug-ins/imagemap/imap_csim.y
	* plug-ins/imagemap/imap_csim_parse.[ch]
	* plug-ins/imagemap/imap_main.c
	* plug-ins/imagemap/imap_ncsa.y
	* plug-ins/imagemap/imap_ncsa_parse.[ch]
	* plug-ins/uri/uri.c
	* plug-ins/xjt/xjt.c: ported the remaining functions to gstdio.

2005-03-04  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptoolcontrol.[ch]: in the spirit of the fix for bug
	#165618 below, allow tools to specify up to two "object actions"
	(actions which select brushes, patterns, ...).

	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpclonetool.c
	* app/tools/gimppainttool.c
	* app/tools/gimptexttool.c: set actions where appropriate.

	* app/actions/actions.c (action_select_object): allow objects to
	be selected by index.

	* app/actions/context-actions.c: added actions which select
	objects by index. Not really used but the same actions can be used
	to generically pass any GimpActionSelectType enum value to the
	action callbacks.

	* app/actions/tools-actions.c
	* app/actions/tools-commands.[ch]: added actions and callbacks
	for the new generic tool objects.

	Also fixed and cleaned up the new generic tool value code.

2005-03-04  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/gqbist.c: #include gstdio.h

2005-03-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/CEL.c
	* plug-ins/common/gbr.c
	* plug-ins/common/gih.c
	* plug-ins/common/gqbist.c
	* plug-ins/common/pat.c
	* plug-ins/common/pnm.c
	* plug-ins/common/postscript.c
	* plug-ins/common/raw.c
	* plug-ins/common/sample_colorize.c
	* plug-ins/faxg3/faxg3.c
	* plug-ins/imagemap/imap_preferences.c
	* plug-ins/print/print.c: added missing parameter to g_open() calls,
	ported some functions I missed earlier.

2005-03-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpimage.c
	* app/display/gimpdisplayoptions.c: re-order code so 
	sample-point stuff comes directly after guide stuff.
	
2005-03-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/siod/slib.c (vload) (fopen_c): ported to
	g_stdio. Also disabled code that attempts to load scripts from
	SIOD_LIB.

2005-03-04  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-path.c (gimp_config_path_expand_only):
	handle g_get_home_dir() returning NULL and enable it for the Win32
	platform as well.

2005-03-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer/Dialogs.c
	* plug-ins/Lighting/lighting_ui.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gflare/gflare.c
	* plug-ins/gimpressionist/utils.c: same fix for path encoding as
	done in Script-Fu (see bug #165002).

2005-03-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/core/gimpimage-sample-points.c
	* app/core/gimpimage-sample-points.h: new files

	* app/actions/view-actions.c
	* app/actions/view-commands.c
	* app/actions/view-commands.h
	* app/config/gimprc-blurbs.h
	* app/core/Makefile.am
	* app/core/core-enums.c
	* app/core/core-enums.h
	* app/core/core-types.h
	* app/core/gimp.c
	* app/core/gimp.h
	* app/core/gimpimage-crop.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-flip.c
	* app/core/gimpimage-rotate.c
	* app/core/gimpimage-scale.c
	* app/core/gimpimage-undo-push.c
	* app/core/gimpimage-undo-push.h
	* app/core/gimpimage.c
	* app/core/gimpimage.h
	* app/display/gimpdisplayoptions.c
	* app/display/gimpdisplayoptions.h
	* app/display/gimpdisplayshell-appearance.c
	* app/display/gimpdisplayshell-appearance.h
	* app/display/gimpdisplayshell-callbacks.c
	* app/display/gimpdisplayshell-draw.c
	* app/display/gimpdisplayshell-draw.h
	* app/display/gimpdisplayshell-handlers.c
	* app/display/gimpdisplayshell.c
	* app/display/gimpdisplayshell.h
	* app/widgets/gimphelp-ids.h
	* menus/image-menu.xml.in: add support for a list of "sample
	points" in each image, coded and handled very similarly to
	guides, for use mainly in color correction.  See bug #137776.

2005-03-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c (script_fu_find_scripts):
	need to convert script-fu-path to filesystem encoding. Should fix
	bug #165002.

2005-03-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/*: ported to gstdio, removed unnecessary includes.

2005-03-04  Sven Neumann  <sven@gimp.org>

	* plug-ins/FractalExplorer
	* plug-ins/Lighting
	* plug-ins/bmp
	* plug-ins/dbbrowser
	* plug-ins/faxg3
	* plug-ins/fits
	* plug-ins/flame
	* plug-ins/gfig
	* plug-ins/gflare
	* plug-ins/gfli
	* plug-ins/gimpressionist
	* plug-ins/ifscompose
	* plug-ins/jpeg
	* plug-ins/maze
	* plug-ins/pagecurl
	* plug-ins/print
	* plug-ins/rcm
	* plug-ins/script-fu
	* plug-ins/sel2path
	* plug-ins/sgi
	* plug-ins/twain
	* plug-ins/winicon
	* plug-ins/xjt: ported to gstdio, removed unnecessary includes,
	minor fixes to filename handling here and there.

2005-03-04  Michael Natterer  <mitch@gimp.org>

	Fixed bug #165618:

	* app/tools/gimptoolcontrol.[ch]: added new functions
	gimp_tool_control_set/get_action_value_1/2/3/4() which allow tools
	to specify their primary, secondary etc. "values" using
	action-identifying strings like "context/context-brush-radius-set".

	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c
	* app/tools/gimpcolortool.c
	* app/tools/gimpinktool.c
	* app/tools/gimppainttool.c: set actions where appropriate. Still
	needs some way to document the mapping in a user-visible way.

	* app/tools/gimpblendtool.c
	* app/tools/gimpbucketfilltool.c: tab removal and minor cleanups.

	* app/actions/actions.[ch]: added utility function
	action_select_property().

	* app/actions/tools-actions.c
	* app/actions/tools-commands.[ch]: added actions and callbacks for
	setting the ink blob size, aspect and angle. Also added actions
	and callbacks for the new generic tool values.

2005-03-03  Helvetix Victorinox  <helvetix@gimp.org>

	* app/composite/make-installer.py:Applied patch from
	starox-gimp@starox.org (Frederic Leroy) which fixed the parser of
	the nm programme output to understand the output on 64bit
	machines.  Fixes bug #168529
	
	* app/composite/ns.py: 
	Applied patch from starox-gimp@starox.org (Frederic Leroy) which
	fixed a bug that would appear when only one compositing function
	was implemented.  Fixes bug #168529

	Regenerated app/composite function tables.

2005-03-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/gifload.c (ReadImage): added a sanity check for
	bogus frame dimensions. Fixes bug #169113.

2005-03-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/autocrop.c: allocate tile-cache size more
	intelligently.

2005-03-03  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-params.h: removed linebreak from macro
	definition; gtk-doc doesn't like this.

2005-03-03  Sven Neumann  <sven@gimp.org>

	* app/base/curves.c: minor code cleanup.

2005-03-03  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/paths.pdb: use boolean values to indicate
	whether a path is linked ("locked").

	* app/pdb/drawable_cmds.c
	* app/pdb/paths_cmds.c
	* libgimp/gimpdrawable_pdb.c
	* libgimp/gimppaths_pdb.[ch]: regenerated.

2005-03-03  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/paths.pdb: added new PDB function
	gimp_path_import_string() to allow to easily import dynamically
	created SVG.

	* app/pdb/internal_procs.c
	* app/pdb/paths_cmds.c
	* libgimp/gimppaths_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

	* plug-ins/script-fu/siod-wrapper.c (marshall_proc_db_call):
	removed unused variable.

2005-03-03  Manish Singh  <yosh@gimp.org>

	* configure.in: Add check for ppc64.

2005-03-03  Manish Singh  <yosh@gimp.org>

	* tools/pdbgen/pdb/drawable.pdb: fix a typo in the docs.

2005-03-03  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/pygimp.h: Make a compatibility wrapper for
	PyBool_FromLong for pre-2.3 versions of python.

	* plug-ins/pygimp/gimpfu.py
	* plug-ins/pygimp/gimpui.py: Update to use some more modern python
	features.

	* plug-ins/pygimp/gimpmodule.c
	* plug-ins/pygimp/pygimp-display.c
	* plug-ins/pygimp/pygimp-drawable.c
	* plug-ins/pygimp/pygimp-image.c
	* plug-ins/pygimp/pygimp-parasite.c
	* plug-ins/pygimp/pygimp-pdb.c
	* plug-ins/pygimp/pygimp-tile.c: Throw exceptions on failures for
	libgimp wrappers (fixes bug #160136), and make the exception strings
	a lot more descriptive to aid debugging. Also return proper Bools when
	appropriate. Some new API wrapped as well. Still a work in progress.

	* plug-ins/pygimp/gimpplugin.py
	* plug-ins/pygimp/gimpshelf.py
	* plug-ins/pygimp/plug-ins/clothify.py
	* plug-ins/pygimp/plug-ins/foggify.py
	* plug-ins/pygimp/plug-ins/sphere.py: Add some whitespace to make
	things more readable.

2005-03-03  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablecombobox.c
	* libgimp/gimpimagecombobox.c: set a width request on the combo boxes.
	
	* plug-ins/common/bumpmap.c (SCALE_WIDTH): set a minimum width on
	the scales.

2005-03-02  Manish Singh  <yosh@gimp.org>

	* libgimp/gimp.[ch]
	* libgimp/gimpdrawable.[ch]
	* libgimp/gimpimage.[ch]: changed attach_new_parasite variants
	to return success or failure.

2005-03-02  Sven Neumann  <sven@gimp.org>

	* app/dialogs/resize-dialog.c (resize_dialog_reset)
	* app/dialogs/scale-dialog.c (scale_dialog_reset): don't rely on
	GObject internals about the order in which properties are being
	set. Fixes one aspect of bug #169011.

2005-03-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/tools-enums.[ch]: oops, missed in previous 
	commit.
	
2005-03-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimprectangletool.c
	* app/tools/gimprectangletool.h
	* app/tools/gimprectangleoptions.c
	* app/tools/gimprectangleoptions.h: new code for base
	class for rectangle tools.

	* app/tools/gimpnewrectselecttool.[ch]: modified to
	derive from GimpRectangleTool.

	* app/tools/Makefile.am: modified accordingly

	* app/tools/gimpselectionoptions.[ch]: remove stuff
	no longer needed by new rect select tool.

	This is work in progress.
	
2005-03-02  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimpgradienteditor.c: allow dnd of colors
	into preview and control areas, as described in
	bug #119470.

2005-03-02  Sven Neumann  <sven@gimp.org>

	* app/text/gimptextlayout.c
	* app/tools/gimptextoptions.[ch]: allow to adjust letter-spacing.

2005-03-01  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/mail.c: use g_spawn_async_with_pipes instead of
	popen. Addresses bug #108659. Also some general cleanup.

	* plug-ins/common/mblur.c: Fix some typos in comments.

2005-03-01  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.[ch]: added VISIBLE and LINKED to the
	GimpImageResizeLayers enum.

	* app/core/gimpimage-resize.c (gimp_image_resize_with_layers):
	changed accordingly. Also looks nicer now.

2005-03-01  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.[ch]
	* plug-ins/ifscompose/ifscompose_utils.c: purely cosmetic coding
	style changes.

2005-03-01  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/siod-wrapper.c: Fixed marshalling code to
	treat string arrays as arrays instead of lists of strings. Last
	part of the fix for bug #168290.

2005-03-01  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpenumcombobox.[ch]: removed 
	gimp_enum_combo_box_set_visible().

	* libgimpwidgets/gimpintcombobox.[ch]: added
	gimp_int_combo_box_set_sensitivity() instead.

	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimphistogrameditor.c: changed accordingly.

	* libgimpwidgets/gimpenumstore.h: added padding for future expansion.

	* libgimpwidgets/gimpwidgets.def: updated.

2005-02-28  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-blend.c: major speedup for dithering code
	thanks to a suggestion from Jay Cox.

2005-02-28  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimphelp.c (gimp_help_get_locales): use
	g_get_language_names().

	* plug-ins/help/locales.c (locales_parse): simplified;
	g_get_language_names() already takes care of this.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpintcombobox.c: allow to change ellipsation
	mode after the combo has been created.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_menu.c (menu_build_mru_items): another
	build fix for compilers that don't support C99 extensions.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpintcombobox.c: added an "ellipsize" construct
	property and changed the default behaviour back to not doing
	ellipsation on the text.

	* libgimp/gimpimagecombobox.c
	* libgimp/gimpdrawablecombobox.c: set "ellipsize" to middle for
	drawable and image combo boxes.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-blend.c: improved readability by
	introducing a macro for the dithering code.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-blend.c: fixed rounding errors in the
	non-dithered case and optimized the dithering code.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-blend.c: (hopefully) improve the threaded
	performance by using a dedicated RNG per tile.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert-fsdither.h
	* app/core/gimpimage-convertc: save a kilobyte of data by using
	guchar for the range array.

2005-02-27  Daniel Egger  <de@axiros.com>

	* app/base/Makefile.am
	* app/composite/Makefile.am
	* app/config/Makefile.am
	* app/core/Makefile.am
	* app/display/Makefile.am
	* app/file/Makefile.am
	* app/paint-funcs/Makefile.am
	* app/pdb/Makefile.am
	* app/plug-in/Makefile.am
	* app/text/Makefile.am
	* app/tools/Makefile.am
	* app/vectors/Makefile.am
	* app/xcf/Makefile.am: Commonized include paths to always look
	in the builddir also to cater for srcdir != builddir builds.

2005-02-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpgradient.[ch]: removed the "last_visited" field
	from GimpGradient. Instead added a segment parameter to
	gimp_gradient_get_color_at() that allows the caller to do the same
	optimization.

	* app/actions/gradient-editor-commands.c
	* app/core/gimpdrawable-blend.c
	* app/core/gimppalette-import.c
	* app/paint/gimppaintoptions.c
	* app/widgets/gimpgradienteditor.c
	* app/widgets/gimpgradientselect.c
	* app/widgets/gimpviewrenderergradient.c: changed accordingly.

	* app/pdb/gradient_cmds.c
	* app/pdb/gradients_cmds.c: regenerated.

2005-02-26  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/png.c: revert change to read images one row at a
	time, it didn't really fix the bug.

2005-02-26  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-blend.c: minor code cleanup.

2005-02-26  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.c (do_parallel_regions): obtain a lock
	on the pool mutex while signalling the termination condition.

2005-02-25  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/png.c: read non-interlaced files one row
	at a time instead of in 64-row chunks; fixes bug #137327.

2005-02-25  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/siod/siod.h
	* plug-ins/script-fu/siod/sliba.c: Creation and manipulation of
	string arrays was seriously broken. Fixes bug #168290.

2005-02-25  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.c: fixed indentation.

2005-02-24  Jay Cox  <jaycox@gimp.org>

	* app/base/pixel-processor.c: fixed potential race condition on
	processor->threads.  Changed mutex to a GMutex from a GStaticMutex
	because it needs to be initialized anyway.  Placed g_cond_wait
	calls inside while loops to handle g_cond_wait returning prematurely.

2005-02-24  Manish Singh  <yosh@gimp.org>

	* plug-ins/uri/uri-backend-wget.c: Handle large file sizes, and
	update the downloaded size for unknown file sizes.

2005-02-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/uri/uri-backend-wget.c (uri_backend_load_image): pulse
	the progress while downloading an unspecified amount of data.

2005-02-24  Manish Singh  <yosh@gimp.org>

	* plug-ins/uri/uri-backend-wget.c: Handle HTTP 302 Redirect output
	from wget properly. Also give a little more informative display for
	unspecified sizes. Fixes bug #168322.

2005-02-24  Sven Neumann  <sven@gimp.org>

	* app/actions/file-commands.c (file_open_as_layer_cmd_callback):
	preselect the image just as in file_open_from_image_cmd_callback().

2005-02-24  Michael Natterer  <mitch@gimp.org>

	Allow to resize layers with the image. Fixes bug #87789.
	Based on patch by Akkana Peck.

	* app/core/core-enums.[ch]: added enum GimpImageResizeLayers which
	can be one of { NONE, MATCHING, ALL }.

	* app/core/gimpimage-resize.[ch]: added new function
	gimp_image_resize_with_layers().

	* app/dialogs/resize-dialog.[ch]: added a "Layers" frame
	containing a "Resize Layers" combo box offering the choices above.
	Changed GimpResizeCallback signature accordingly.

	* app/actions/image-commands.c
	* app/actions/layers-commands.c: changed accordingly.

2005-02-23  Michael Natterer  <mitch@gimp.org>

	* libgimpwidgets/gimpbutton.c (gimp_button_button_press): don't
	reset button->press_state on double clicks because
	GDK_2BUTTON_PRESS always arrive immediately after
	GDK_BUTTON_PRESS, so resetting the state causes the second click
	of a double click to be always interpreted as "clicked", not
	"extended-clicked", breaking e.g. adding of multiple layers by
	shift-clicking the layers dialog's "new" button. Phew, too much
	text for a one-liner bug fix, blah... Spotted by Jimmac.
	Cleaned up this antique file a bit.

2005-02-23  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/*/Makefile.am
	* plug-ins/common/mkgen.pl: add libgimpmath deps
	needed because libgimpconfig links it.

2005-02-23  Shlomi Fish  <shlomif@iglu.org.il>

	* plug-ins/common/displace.c: fixed the numbers of parameters check
	in RUN_NONINTERACTIVE. (it was a typo).

2005-02-22  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c: removed redundant casts,
	made gimp_display_shell_compress_motion() static.

2005-02-22  Shlomi Fish  <shlomif@iglu.org.il>

	* tools/pdbgen/pdb/channel.pdb: add the 
	gimp_channel_new_from_component() PDB function.

	* libgimp/gimpchannel_pdb.[ch]
	* app/pdb/channel_cmds.c: resultant files.

	* libgimp/gimp.def: add the new function to the def file

2005-02-22  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpmagnifytool.c (gimp_magnify_tool_init)
	* app/tools/gimpmeasuretool.c (gimp_measure_tool_init)
	* app/tools/gimpvectortool.c (gimp_vector_tool_init): set
	handles_empty_image to TRUE because all these tools work fine
	without active drawable.

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): also look at
	handles_empty_image, not only at gimp_image_is_empty() before
	setting the BAD cursor.

2005-02-21  Manish Singh  <yosh@gimp.org>

	* app/text/gimpfont-utils.[ch]: be smarter about finding trailing
	numbers that look like sizes, so we don't have spurious commas.

	* app/text/gimpfontlist.c: As an optimization, figure out if
	pango needs a workaround, and if not, just call it directly.

2005-02-21  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): put back some important
	code that was accidentially removed when fixing bug #162823. Also
	moved the calls to gtk_grab_add() and gtk_grab_remove() around a
	bit.

2005-02-21  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimptoolbox.c (toolbox_area_notify): apply evil
	size_request hacks to the color/image/foo areas' wrapbox because
	its child requisition/allocation code is apparently broken. Works
	around bug #162500.

2005-02-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/emboss.c: fixed emboss on small images (bug #168022).

2005-02-21  Sven Neumann  <sven@gimp.org>

	* libgimpthumb/gimpthumb-utils.c (gimp_thumb_init): workaround for
	bug #167973: if no valid home directory exists, use the folder for
	temporary files to store thumbnails.

2005-02-21  Michael Natterer  <mitch@gimp.org>

	* app/actions/context-actions.c
	* app/actions/context-commands.[ch]: removed the newly added color
	picker radius actions...

	* app/actions/tools-actions.c
	* app/actions/tools-commands.[ch]: ...and added them here.

2005-02-20  Manish Singh  <yosh@gimp.org>

	Support for custom plug-in interpreters, independent of OS support.

	* app/core/Makefile.am
	* app/core/core-types.h
	* app/core/gimpinterpreterdb.[ch]: implemented GimpInterpreterDB,
	which handles registering and resolving custom plug-in interpreters.

	* app/core/gimp.[ch]: keep a GimpInterpreterDB around.

	* app/config/gimpcoreconfig.[ch]
	* app/config/gimprc-blurbs.h
	* app/dialogs/preferences-dialog.c
	* app/dialogs/user-install-dialog.c
	* app/widgets/gimphelp-ids.h: interpreter-path config stuff.

	* app/plug-in/plug-in.c: use registered interpreters when running
	plug-ins.

	* themes/Default/images/preferences/Makefile.am
	* themes/Default/images/preferences/folders-interp.png: just copied
	folders-plug-ins.png here, need a better one.

	* data/interpreters/Makefile.am: creates system interpreter directory.

	* data/interpreters/default.interp: sample interpreter file info.

	* data/Makefile.am
	* configure.in: add data/interpreters directory.

	* plug-ins/pygimp/Makefile.am: install pygimp.interp, which configures
	the python interpreter to point to the python we were built with. Also
	register the .py extension.

	* etc/gimprc
	* docs/gimprc.5.in: regenerated

2005-02-20  Jay Cox  <jaycox@gimp.org>

	* plug-ins/common/psd.c: Fix layer mask support.  Addresses bug
	#166976

2005-02-21  Sven Neumann  <sven@gimp.org>

	Another step towards color management:

	* modules/Makefile.am
	* modules/cdisplay_lcms.c: added new color display module that
	implements color management for the image displays. Still work
	in progress...

	* modules/cdisplay_proof.c: no need to include <string.h> here.

	* libgimpconfig/gimpcolorconfig.[ch]: added new property
	"display-module" to configure the display color management module.

	* app/display/gimpdisplayshell-filter.[ch]
	* app/display/gimpdisplayshell.c: create the configured color
	management display filter for each display.

2005-02-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/gimpressionist/presets.c (get_object_name): use
	g_filename_display_basename().

2005-02-20  Sven Neumann  <sven@gimp.org>

	* app/core/gimpgradient-load.c
	* app/core/gimppalette.c
	* app/core/gimppattern.c
	* app/plug-in/plug-in.c
	* libgimpbase/gimputils.c
	* libgimpmodule/gimpmodule.c
	* libgimpwidgets/gimppatheditor.c
	* tools/pdbgen/pdb/image.pdb: use g_filename_display_name() or
	g_filename_display_basename() where appropriate.

	* app/pdb/image_cmds.c: regenerated.

2005-02-20  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.c: better error reporting.

2005-02-20  Sven Neumann  <sven@gimp.org>

	* app/actions/context-actions.c
	* app/actions/context-commands.c[ch]: added actions to control the
	average radius of color picker tools (bug #167765).

	* app/actions/tool-options-actions.c: fixed a typo in a comment.

2005-02-20  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/Makefile.am: attempt to support Win32 (untested).

2005-02-19  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/plug-ins/gtkcons.py
	* plug-ins/pygimp/plug-ins/gimpcons.py: Use newer gtkcons widget
	from pygtk. Some cosmetic additions.

2005-02-19  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/plug-ins/py-slice.py: Ignore guides at or beyond
	image bounds, since those aren't valid slicing bounds. Fixes bug
	#167843.

2005-02-20  Sven Neumann  <sven@gimp.org>

	* app/dialogs/user-install-dialog.c: migrate gimp-2.2 settings if
	available. Pass the version to gimp_templates_migrate().

	* app/core/gimp-templates.[ch] (gimp_templates_migrate): if
	migrating templaterc from ~/.gimp-2.0, do a case-insensitive match
	on template names to accommodate for the fact that we changed the
	spelling of some default templates between 2.0 and 2.2.

2005-02-19  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimptexttool.c (gimp_text_tool_create_layer): block
	the "active-layer-changed" callback while anchoring the floating
	selection so the callback doesn't reset the text tool in the
	middle of adding a new text layer. Fixes bug #166829.

2005-02-19  Hans Breuer  <hans@breuer.org>

	* plug-ins/makefile.msc plug-ins/script-fu/script-fu-server.c :
	now that I'm aware of script-fu-server running on win32 make it
	compile with msvc, too ;)

2005-02-19  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdockable.c
	* app/widgets/gimphelp-ids.h: added a tooltip and a help-id for the
	dockable menu.

2005-02-19  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu.c
	* plug-ins/script-fu/siod-wrapper.c: there is script-fu server on
	Win32. Reverted this change, again!

2005-02-19  Hans Breuer  <hans@breuer.org>

	* app/base/pixel-processor.c : TILE_WIDTH is used unconditionally
	so always include "tile.h"
	* app/base/tile-swap.c : WIN32 needs <process.h> for _getpid()

	* app/dialogs/user-install-dialog.c : include gimpwin32-io.h
	* libgimpbase/gimpwin32-io.h : there are no group or other
	flags in msvcrt, define S_IGRP etc in terms of _S_IREAD etc

	* plug-ins/script-fu/script-fu.c plug-ins/script-fu/siod-wrapper.c :
	no script-fu server on win32, make respective function calls conditional

	* libgimpconfig/makefile.msc : new file
	* **/makefile.msc app/gimpcore.def : updated, gimp builds 
	and runs once more with ms toolchain

2005-02-18  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mng.c (mng_save_image): write a DEFI chunk to
	set the frame offset if the layer offsets are != 0, not only if
	they are > 0. Fixes bug #166059.

2005-02-18  Sven Neumann  <sven@gimp.org>

	* app/display/gimpstatusbar.c: unset the CAN_FOCUS flag on the
	combo boxes and the cancel button. Set "focus-on-click" to FALSE
	for the combo boxes. Fixes bug #167809.

2005-02-18  Michael Natterer  <mitch@gimp.org>

	* libgimp/gimpexport.c (export_dialog): applied patch from Patrice
	Tremblay which sets an alternative button order for the export
	dialog (bug #166678).

2005-02-18  Sven Neumann  <sven@gimp.org>

	* app/core/Makefile.am
	* app/core/gimpdrawable-convert.[ch]: new files holding 
	gimp_drawable_convert_rgb() and gimp_drawable_convert_grayscale()
	moved out of gimpimage-convert.[ch].

	* app/core/gimpchannel.c
	* app/core/gimpimage-convert.[ch]
	* app/core/gimplayer.c: changed accordingly.

2005-02-18  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-convert.c: some simple loop unrolling,
	converted tabs to spaces and sprinkled the code with const
	qualifiers.

2005-02-17  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpviewrenderergradient.c
	(gimp_view_renderer_gradient_render): don't attempt to read beyond
	the pre-calculated render buffers, even if the gradient somehow
	has out-of-bounds values. Fixes the crash reported in bug #167604.

2005-02-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_main.c: fixed the build for compilers that
	don't support C99 extensions.

2005-02-16  Kevin Cozens  <kcozens@cvs.gnome.org>

	* plug-ins/script-fu/siod-wrapper.c: Added constants MIN-IMAGE-SIZE,
	MAX-IMAGE-SIZE, MIN-RESOLUTION, and MAX-RESOLUTION for use in Script-Fu
	scripts. See comment #4 in bug #167529.

2005-02-17  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainercombobox.c
	* libgimpwidgets/gimpintcombobox.c: set the "ellipsize" property
	on the text cell-renderer. Not sure if it's a good idea to
	hardcode this for GimpIntComboBox, but let's give it a try. Fixes
	bug #136676.

2005-02-17  Sven Neumann  <sven@gimp.org>

	* plug-ins/help/gimp-help-lookup.c: use GOptionContext to parse
	the command-line.

2005-02-16  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.c: switched to using a thread pool.
	Enables the progress callback for the threaded case.

2005-02-16  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/plug-ins/script-fu/scripts/guides-new.scm:  committted
	slightly modified patch from  Joao S. O. Bueno Calligaris
	to raise guide position limit to 262144.
	
2005-02-16  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpclonetool.[ch]: make sure clone source is
	shown in correct display, fixes bug #167002.

2005-02-16  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.[ch]: added a variant of
	pixel_regions_process_parallel() that takes a progress callback and
	progress data. Does only work for the single-threaded case yet.

	* app/core/gimpdrawable-blend.c (gradient_fill_region): parallelized.

2005-02-16  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimage-contiguous-region.c
	(gimp_image_contiguous_region_by_color): parallelized.

	* app/core/gimpdrawable-desaturate.c (gimp_drawable_desaturate):
	parallelized.

2005-02-16  Sven Neumann  <sven@gimp.org>

	* app/core/gimplayer.c (gimp_layer_transform_color): code cleanup.

2005-02-15  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/paint-funcs.[ch]: formatting.

2005-02-15  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagemap.[ch]: changed GimpImageMapApplyFunc to
	be compatible with PixelProcessorFunc.

	* app/base/color-balance.[ch]
	* app/base/colorize.[ch]
	* app/base/gimplut.[ch]
	* app/base/hue-saturation.[ch]
	* app/base/threshold.[ch]: removed wrappers that used to
	shift parameters around to match GimpImageMapApplyFunc and
	PixelProcessorFunc signatures.

	* app/tools/gimpbrightnesscontrasttool.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpposterizetool.c
	* app/tools/gimpthresholdtool.c: changed accordingly.

	* tools/pdbgen/pdb/color.pdb: use pixel_region_process_parallel()
	for all color operations.

	* app/pdb/color_cmds.c: regenerated.

2005-02-15  Sven Neumann  <sven@gimp.org>

	* app/main.c (gimp_init_malloc): added a comment about the use of
	mallopt() and what could be done instead. Use the TILE_WIDTH and
	TILE_HEIGHT defines to determine the M_MMAP_THRESHOLD value.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.c: allocate histogram slots in one large
	block instead of multiple smaller chunks. Hide pointer arithmetic
	in macros.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/dialogs/resolution-calibrate-dialog.c: fix for setups with
	multiple monitors on the same screen (bug #167339).

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppropwidgets.c: fixed gtk-doc comment.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/config/gimprc-blurbs.h
	* app/dialogs/offset-dialog.c
	* plug-ins/common/displace.c
	* plug-ins/script-fu/scripts/rendermap.scm
	* plug-ins/script-fu/scripts/ripply-anim.scm: use the american
	spelling of "behaviour". Fixes bug #167267.

2005-02-14  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/file-save-dialog.c (file_save_dialog_check_uri):
	when appending an extension, update the filename entry so the user
	can see what's going on. Added even more debugging output.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.c: simplified the code and avoid
	excessive memory allocations for the threaded case.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.[ch]: allocate temporary histogram slots
	on demand and provide an array with enough slots for the maximum
	number of threads. gimp_histogram_new() doesn't need a
	GimpBaseConfig parameter any longer.

	* app/core/gimpdrawable-equalize.c
	* app/core/gimpdrawable-levels.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpthresholdtool.c
	* app/widgets/gimphistogrameditor.c
	* tools/pdbgen/pdb/color.pdb: changed accordingly.

	* app/pdb/color_cmds.c: regenerated.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.[ch]: define the maximum number of
	threads in the header file.

	* app/config/gimpbaseconfig.c: use the #define.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.c
	* app/base/pixel-processor.c: use static mutexes.

2005-02-14  Sven Neumann  <sven@gimp.org>

	* configure.in: allow to enable the threaded tile-swapper code
	(use at your own risk).

2005-02-13  Sven Neumann  <sven@gimp.org>

	* configure.in
	* app/base/tile-cache.c
	* app/base/tile-private.h
	* app/base/tile-swap.c
	* app/base/tile.c: in an attempt to save this code from bit-rot,
	ported the experimental threaded tile-swapper to gthread.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* app/base/gimphistogram.c: port this code to gthread as well.

2005-02-13  Jay Cox  <jaycox@gimp.org>

	* plug-ins/common/psd_save.c: Rewrote all the code that deals with
	pixels to be stingy with memory and operate on tile-size chunks.
	Create a flattened copy of the image when necessary. Fixes file
	corruption bug #167139 and memory bug #121871.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.c: some more cleanup; introduced a
	#define to control the number of tiles per thread.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* app/base/base.c: fixed typo.

	* app/config/gimpbaseconfig.c: reverted last change,
	"num-processor" doesn't need a confirmation.

2005-02-13  Michael Natterer  <mitch@gimp.org>

	* app/file/file-save.[ch]: removed file_save() and renamed
	file_save_as() to file_save() which always requires "uri" and
	"file_proc" to be passed. This functions does no more file_proc by
	extension finding and stuff.

	* app/actions/file-commands.c (file_save_cmd_callback): only call
	file_save() if the image has both uri and save_proc, fall back to
	file_save_as_cmd_callback() otherwise.

	* app/dialogs/file-save-dialog.c: completely chopped and
	reconstructed. Added tons of checks for extension vs. save_proc
	consistency and ask the user if she really wants to save weird
	stuff. Added masive debugging output because I'm far from certain
	that everything is correct.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* libgimp*/Makefile.am: s/GIMP_THREAD_FLAGS/GTHREAD_CFLAGS/

2005-02-13  Sven Neumann  <sven@gimp.org>

	* app/base/base.c
	* app/base/tile-swap.[ch]: moved some code from base_init() into
	tile_swap_init().

	* app/base/pixel-processor.[ch]: prepared for porting to GThreadPool.

	* app/config/gimpbaseconfig.c: changed "num-processors" option to
	require a confirmation before being changed.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* configure.in: check for gthread-2.0 unless the --disable-mp
	option is given.

	* app/app_procs.c (app_libs_init): call g_thread_init().

	* app/base/pixel-processor.c: ported to GThread.

	* app/Makefile.am
	* app/*/Makefile.am: use @GTHREAD_CFLAGS@.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpprogress.c (gimp_progress_install): fixed typos in
	comment.

	* libgimp/gimpprogress.[ch]: gimp_progress_set_text() has boolean
	return value.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-exif.c: use context specific labels for the
	action buttons in the rotate confirmation dialog.

2005-02-13  Sven Neumann  <sven@gimp.org>

	* app/core/gimpprogress.c (gimp_progress_start): accept an empty
	string.

	* app/plug-in/plug-in-progress.c: if NULL is passed as message to
	plug_in_progress_start(), set an empty string on the progress.

	* tools/pdbgen/pdb/progress.pdb:
	* libgimp/gimpprogress.[ch]: wrap the new gimp_progress_set_text()
	PDP function with a function that accepts printf-like arguments.

	* libgimp/gimpprogress_pdb.[ch]: regenerated.

	* lots of plug-ins, most of them file plug-ins:
	use gimp_progress_init(NULL) followed by gimp_progress_set_text()
	to initialize the progress using the new API instead of constructing
	a temporary string.

2005-02-12  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/file-save-dialog.c (file_save_dialog_response): use
	gtk_file_chooser_set_uri() to check if a file exists. Seems to
	work reliably even for remote files and fixes the issue i
	mentioned below.

2005-02-12  Sven Neumann  <sven@gimp.org>

	Changes suggested in bug #167200:

	* plug-ins/common/unsharp.c: increased maximum value for Amount.

	* app/tools/gimplevelstool.c: changed increments for gamma
	spinbutton.

	* app/tools/gimpcoloroptions.c: increased maximum radius for color
	picking to 300 pixels and made the slider logarithmic.

2005-02-12  Sven Neumann  <sven@gimp.org>

	* plug-ins/uri/uri-backend-gnomevfs.c: use gimp_progress_set_text().

2005-02-12  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in-progress.[ch]
	* tools/pdbgen/pdb/progress.pdb: added new PDB function
	gimp_progress_set_text().

	* app/pdb/internal_procs.c
	* app/pdb/progress_cmds.c
	* libgimp/gimpprogress_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-02-12  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in-progress.c (plug_in_progress_start): only
	set progress value to 0.0 if it isn't 0.0 already. Allows to use
	gimp_progress_init() to change the progress message w/o causing
	gtk_progress_bar_set_fraction() to be called.

	* plug-ins/uri/uri-backend-gnomevfs.c: use gimp_progress_pulse()
	if the filesize is unknown. Also limit frequency of progress
	updates.

2005-02-12  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.c: fixed a bug I introduced with my
	latest changes and cleaned up the code further.

2005-02-12  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/file-open-dialog.c (file_open_dialog_response)
	* app/dialogs/file-save-dialog.c (file_save_dialog_response):
	don't bail out if filename_from_uri() returns NULL. Perform
	checks for G_FILE_TEST_IS_REGULAR and G_FILE_TEST_EXISTS
	only on local files.

	(This brings up the problem that we will overwrite existing remote
	files without warning. Need to fix that before enabling remote
	files in GimpFileDialog).

2005-02-12  Michael Natterer  <mitch@gimp.org>

	* libgimpbase/gimpbaseenums.h (enum GimpProgressCommand):
	added GIMP_PROGRESS_COMMAND_PULSE.

	* libgimpbase/gimpbaseenums.c
	* plug-ins/pygimp/gimpenums.py
	* tools/pdbgen/enums.pl: regenerated.

	* app/core/gimppdbprogress.c: implement GimpProgress::pulse()
	and send a PULSE command to the callback.

	* libgimp/gimpprogress.c: handle PULSE by calling the set_value()
	callback with a value of -1 and document that hack in the API docs.

	* libgimp/gimpprogressbar.c: interpret -1 as request to pulse.

2005-02-12  Sven Neumann  <sven@gimp.org>

	* app/core/gimpprogress.[ch]: added GimpProgress::pulse.

	* app/display/gimpdisplay.c
	* app/display/gimpstatusbar.c
	* app/widgets/gimpfiledialog.c
	* app/widgets/gimpprogressbox.c
	* app/widgets/gimpprogressdialog.c
	* app/widgets/gimpthumbbox.c: implement it in the classes that
	implement the GimpProgress interface.

	* app/plug-in/plug-in-progress.[ch]: allow plug-ins to pulse their
	progress.

	* tools/pdbgen/pdb/progress.pdb: added a procedure for the new
	functionality.

	* app/pdb/internal_procs.c
	* app/pdb/progress_cmds.c
	* libgimp/gimpprogress_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-02-11  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.[ch]: code cleanup. Removed unused code,
	renamed variables and types.

	* app/base/gimphistogram.c
	* app/core/gimpchannel-combine.c
	* app/core/gimpchannel.c
	* app/core/gimpdrawable-equalize.c
	* app/core/gimpdrawable-invert.c
	* app/core/gimpdrawable-levels.c
	* app/paint-funcs/paint-funcs.c
	* tools/pdbgen/pdb/color.pdb: changed accordingly.

	* app/pdb/color_cmds.c: regenerated.

2005-02-11  Sven Neumann  <sven@gimp.org>

	* app/base/pixel-processor.c: include <string.h>.

2005-02-11  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: reordered pages in an attempt
	to list important settings first.

2005-02-11  Sven Neumann  <sven@gimp.org>

	* configure.in: enable support for multiple processors by default.
	Hyperthreading and multicore CPUs are becoming common and we
	should try to give this as much testing as possible.

	* app/config/gimpbaseconfig.c: use two processors by default. Also
	increased default tile-cache-size to 256MB.

2005-02-11  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptoolbox.c (toolbox_paste_received): drop
	everything after the first newline and strip leading and trailing
	whitespace from the pasted text.

2005-02-11  Michael Natterer  <mitch@gimp.org>

	* app/actions/layers-actions.c (layers_actions): fixed
	"layers-duplicate" action entry.

2005-02-11  Sven Neumann  <sven@gimp.org>

	* app/actions/layers-actions.c
	* app/actions/view-actions.c: added shortcuts for New
	Layer (Shift-Ctrl-N, used to be the Navigation Dialog) and
	Duplicate Layer (Shift-Ctrl-D).

2005-02-11  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptoolbox.c: allow to paste URLs and filenames to
	the toolbox using the middle mouse button.

2005-02-10  Manish Singh  <yosh@gimp.org>

	* app/file/file-save.c (file_save_as): Make sure filename is
	initialized before use.

2005-02-10  Michael Natterer  <mitch@gimp.org>

	* plug-ins/uri/uri-backend-gnomevfs.c: use gimp_memsize_to_string()
	instead of always showing bytes with a translatable %llu format
	string. Increased BUFSIZE to 4096.

	* plug-ins/uri/uri-backend-wget.c (uri_backend_load_image): don't
	leak the memsize string. Use sizeof(buf) instead of BUFSIZE.

2005-02-10  Michael Natterer  <mitch@gimp.org>

	* app/tools/gimpcroptool.c
	* app/tools/gimptransformtool.c: alternative button order for
	the info dialogs (bug #166678).

2005-02-10  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/displace.c: applied a modified patch from Joao
	S. O. Bueno Calligaris that adds a polar mode to the Displace
	plug-in (bug #161131).

2005-02-10  Sven Neumann  <sven@gimp.org>

	* app/file/file-save.c (file_save_as): applied a (slightly
	modified) patch from Shlomi Fish that automatically adds the .xcf
	extension if none is given (bug #165684).

2005-02-10  Sven Neumann  <sven@gimp.org>

	* app/actions/data-commands.c
	* app/actions/edit-commands.c
	* app/actions/error-console-commands.c
	* app/actions/file-commands.c
	* app/actions/gradient-editor-commands.c
	* app/actions/gradients-commands.c
	* app/actions/plug-in-commands.c
	* app/actions/templates-commands.c
	* app/actions/text-editor-commands.c
	* app/actions/tool-options-commands.c
	* app/dialogs/image-new-dialog.c
	* app/dialogs/resize-dialog.c
	* app/display/gimpdisplayshell-close.c
	* app/display/gimpdisplayshell-filter-dialog.c
	* app/display/gimpdisplayshell-scale.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimptexttool.c
	* libgimp/gimpexport.c
	* libgimpwidgets/gimpcolorbutton.c
	* libgimpwidgets/gimpfileentry.c
	* libgimpwidgets/gimpquerybox.c
	* libgimpwidgets/gimpunitmenu.c: applied another patch by Patrice
	Tremblay to make more dialogs obey the alternative button order
	setting (bug #166678).

2005-02-09  Manish Singh  <yosh@gimp.org>

	* app/text/gimpfont-utils.[ch]: new function to workaround pango
	bug #166540, by tacking on a ',' to font names that end in numbers,
	so pango_font_description_from_string doesn't interpret it as a size.

	* app/text/Makefile.am: add above files.

	* app/text/gimpfontlist.c
	* app/text/gimptext-compat.c: use new function.

	* app/text/gimptext-xlfd.c: also make sure font names pulled out
	from XLFD don't end in numbers.

	* app/text/gimpfont.c
	* app/text/gimptextlayout.c: remove some redundant checks.

2005-02-09  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/display/gimpdisplayshell-callbacks.c 
	(gimp_display_shell_canvas_tool_events):  For testing, apply
	patch switching display-wide grab to app-wide grab while
	handling button-release event, see bug #162823.

2005-02-09  DindinX  <dindinx@gimp.org>

	* plug-ins/common/pixelize.c: added a preview.

2005-02-09  Sven Neumann  <sven@gimp.org>

	* plug-ins/uri/uri-backend-wget.c: marked strings for translation.

2005-02-09  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpsizeentry.[ch]
	* libgimpwidgets/gimpwidgets.def: added new function
	gimp_size_entry_set_activates_default().

	* app/dialogs/image-new-dialog.c: set the initial focus on the
	Width entry and set the activates_default flag for the size entry.
	Fixes bug #165748.

2005-02-09  Sven Neumann  <sven@gimp.org>

	* app/display/gimpscalecombobox.[ch]
	* app/display/gimpstatusbar.c: pass an action label to
	gimp_scale_combo_box_add_action().

2005-02-09  Sven Neumann  <sven@gimp.org>

	* app/display/gimpscalecombobox.c: fixed brokeness introduced by
	the latest changes.

2005-02-09  Sven Neumann  <sven@gimp.org>

	* app/display/gimpscalecombobox.[ch]
	* app/display/gimpstatusbar.c: add an "Other..." item to the scale
	menu in the image window. Somewhat hackish but fixes bug #143747.

2005-02-09  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimagefile.c
	* app/widgets/gimpthumbbox.c: enable explicit (not automatic while
	browsing the list of files) thumbnailing of remote files

2005-02-08  Sven Neumann  <sven@gimp.org>

	* app/app_procs.[ch]
	* app/gui/gui.[ch]
	* app/main.c: simplified initialization by passing GOptionContext
	to app_libs_init() and gui_libs_init().

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* app/main.c: removed SIGCHLD handler which used to call
	waitpid(-1,...) because this breaks all waitpid(pid,...) calls
	in a non-deterministic way. Apparently it is possible to use both
	SIG_DFL *and* SA_RESTART (SA_RESTART being the original reason
	why the call to sigaction() was introduced).

	* app/plug-in/plug-in.c (plug_in_close): don't have a million
	subsequent if(plug_in->pid) blocks. Put everything into one big
	if(plug_in->pid) block instead. Call g_spawn_close_pid() on all
	platforms instead of using the Win32 CloseHandle().

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* app/actions/file-actions.c
	* app/actions/image-actions.c
	* app/actions/qmask-actions.c
	* app/actions/tools-actions.c: removed ugly accel_path hacks
	(don't g_object_set_data(action, "gimp-accel-path", "foo")).

	* app/widgets/gimpactionview.c (gimp_action_view_accel_edited):
	simply use gtk_action_get_accel_path() instead of doing even more
	ugly stuff than above.

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* app/actions/actions.c (action_data_get_widget): return the
	active display's shell instead of the toolbox when called from the
	<Image> popup. Fall back to the toolbox if there is no active
	display. Fixes bug #166012.

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* HACKING: updated info about stable CVS branches of modules we
	depend on.

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpuimanager.[ch]: removed gimp_ui_manager_ui_get()
	and implement the new virtual functions GtkUIManager::get_widget()
	and ::get_action() instead. Menu loading happens transparently now.

	* app/display/gimpdisplayshell.c
	* app/widgets/gimpdockable.c
	* app/widgets/gimptexteditor.c
	* app/widgets/gimptoolbox.c
	* app/widgets/gimptooloptionseditor.c: use
	gtk_ui_manager_get_widget() instead of the removed
	gimp_ui_manager_ui_get().

2005-02-08  Sven Neumann  <sven@gimp.org>

	Applied a patch from Patrice Tremblay that makes (almost) all
	dialogs obey the "gtk-alternative-button-order" setting
	(bug #166678). Changes too many files to list them all...

2005-02-08  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c: add the gtk+ options to the GOptionContext.

2005-02-08  Sven Neumann  <sven@gimp.org>

	* INSTALL: updated.

2005-02-08  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpgradienteditor.c (gimp_gradient_editor_init):
	use "single-line-mode" for the hint labels. Should fix bug #157570.

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-constructors.[ch]: undeprecated the
	paint mode menu (ported to GimpEnumComboBox with separators).
	The separator code is quite hackish and therefore still
	implemented privately here.

	* app/widgets/gimpbrushselect.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimppropwidgets.c: changed accordingly.

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* configure.in: depend on GTK+ >= 2.6.0 and pango >= 1.8.0.

	* app/gui/gui.c (gui_sanity_check): changed accordingly.

2005-02-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icosave.c: minor cleanup.

2005-02-08  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/plug-ins/Makefile.am: install sphere.py in unstable
	releases only.

2005-02-08  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/plug-ins/sphere.py
	* plug-ins/pygimp/plug-ins/gimpcons.py
	* plug-ins/pygimp/plug-ins/pdbbrowse.py: Just leave imagetypes empty,
	since we don't operate on existing images here. Fixes bug #166650.

2005-02-08  Michael Natterer  <mitch@gimp.org>

	* app/gui/gui.c (gui_display_changed): if display became NULL
	(e.g. by closing a view) and we decide to activate another view
	of the same image, stop the emission of the original
	"display-changed" signal so it doesn't affect the toolbox'
	UI manager. Fixes bug #159304.

2005-02-08  Sven Neumann  <sven@gimp.org>

	* plug-ins/winicon/icosave.c (ico_image_get_reduced_buf): fixed
	bug in save routine for 256-slot palette (bug #162742).

2005-02-08  Sven Neumann  <sven@gimp.org>

	* configure.in: added automake conditional GIMP_UNSTABLE.

	* plug-ins/script-fu/scripts/Makefile.am: install test-sphere.scm
	in unstable releases only.

2005-02-08  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpcolorconfig-enums.[ch]: gimp-mkenums doesn't
	seem to like newlines in enum definitions.

	* libgimpconfig/gimpcolorconfig.[ch]: removed the "profile-path"
	property for now. It doesn't work too well with GimpFileEntry.
	We can add it back later if it turns out that we really need it.

	* app/dialogs/preferences-dialog.c
	* app/widgets/gimphelp-ids.h: added a color management page to the
	preferences dialog.

2005-02-07  Michael Natterer  <mitch@gimp.org>

	* plug-ins/uri/uri-backend.h: added backend methods for saving to
	URIs.

	* plug-ins/uri/uri.c: register a save procecure if the save method
	is available, using some code from compressor.c

	* plug-ins/uri/uri-backend-gnomevfs.c: implement saving.

	* plug-ins/uri/uri-backend-wget.c: added saving stubs which always
	fail.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_add_filters): add
	an "All Images" filter and select it by default.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpselectiondata.c
	* plug-ins/help/domain.c
	* plug-ins/helpbrowser/dialog.c: fixed my latest changes.

2005-02-07  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/file-open-location-dialog.c
	(file_open_location_dialog_new): set "activates-default" on the
	URI entry.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/help/domain.c
	* plug-ins/helpbrowser/dialog.c: same trick here; should allow to
	work with help files installed in an UNC path.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* app/dialogs/file-open-dialog.c
	* app/dialogs/file-save-dialog.c
	* app/widgets/gimpthumbbox.c: use file_utils_filename_from_uri()
	in some more places.

	* app/dialogs/file-open-location-dialog.c
	* app/widgets/gimpselectiondata.c: deal with hostname in URIs.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagefile.c (gimp_imagefile_get_desc_string):
	changed "Remote Image" to "Remote File". The state of the
	thumbnail doesn't tell us if this is an image file at all.

	* app/widgets/gimpthumbbox.c: don't auto-thumbnail remote files.

	* libgimpthumb/gimpthumb-utils.[ch]
	* libgimpthumb/gimpthumbnail.c: do the same workaround for UNC
	paths as in file_utils_filename_from_uri().

2005-02-07  Michael Natterer  <mitch@gimp.org>

	* plug-ins/uri/uri-backend.h: added backend methods
	uri_backend_init() and uri_backend_shutdown().

	* plug-ins/uri/uri.c: call them around using other backend
	functions (both in query() and run()).

	* plug-ins/uri/uri-backend-gnomevfs.c: moved init()/shutdown() of
	GnomeVFS into the new backend methods. Create the list of
	supported protocols dynamically. Get rid of one translatable
	string.

	* plug-ins/uri/uri-backend-wget.c: implement the new methods as
	empty stubs which always succeed.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/Makefile.am
	* libgimpconfig/gimpconfig.def
	* libgimpconfig/gimpconfig.h
	* libgimpconfig/gimpconfigtypes.h: install the GimpColorConfig
	header and include it.

	* libgimpconfig/gimpcolorconfig.[ch]: commented out some options
	that will only be needed later and that will most likely undergo
	some changes.

	* app/config/gimpcoreconfig.[ch]
	* app/config/gimprc-blurbs.h: added GimpColorConfig to GimpRc.

2005-02-07  Michael Natterer  <mitch@gimp.org>

	* plug-ins/uri/uri-backend-gnomevfs.c: fixed wrong use of
	GnomeVFSFileInfo (it wants to be allocated and unrefed). Extended
	the list of supported prefixes (still conceptually broken).

2005-02-07  Sven Neumann  <sven@gimp.org>

	* HACKING
	* autogen.sh: dropped support for automake 1.6, automake >= 1.7 is
	now required.

	* configure.in: removed cruft that was there only for automake 1.6.

2005-02-07  Michael Natterer  <mitch@gimp.org>

	* configure.in: check for gnome-vfs-2.0

	* plug-ins/uri/Makefile.am
	* plug-ins/uri/uri-backend-gnomevfs.c: new file which is built
	instead of the wget backend if GnomeVFS is available.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-file.c
	* app/file/file-utils.c
	* app/gui/themes.c
	* app/tools/gimpimagemaptool.c
	* app/vectors/gimpvectors-export.c
	* app/widgets/gimpwidgets-utils.c
	* app/xcf/xcf.c
	* tools/pdbgen/pdb/procedural_db.pdb: use gstdio wrappers.

	* app/pdb/procedural_db_cmds.c: regenerated.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* app/base/base.c
	* app/base/temp-buf.c
	* app/base/tile-swap.c
	* app/config/gimpconfig-file.c
	* app/core/gimpbrush.c
	* app/core/gimpbrushgenerated.c
	* app/core/gimpbrushpipe.c
	* app/core/gimpdata.c
	* app/core/gimpenvirontable.c
	* app/core/gimpgradient-load.c
	* app/core/gimpgradient-save.c
	* app/core/gimppalette-import.c
	* app/core/gimppalette.c
	* app/core/gimppattern.c
	* app/dialogs/user-install-dialog.c
	* app/gui/session.c
	* app/menus/menus.c
	* app/widgets/gimpdevices.c: use gstdio wrappers.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpdatafiles.c
	* libgimpbase/gimpenv.c
	* libgimpconfig/gimpconfigwriter.c
	* libgimpconfig/gimpscanner.c
	* libgimpthumb/gimpthumb-utils.c
	* libgimpthumb/gimpthumbnail.c: include gstdio.h.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpdatafiles.c
	* libgimpbase/gimpenv.c
	* libgimpconfig/gimpconfigwriter.c
	* libgimpconfig/gimpscanner.c
	* libgimpthumb/gimpthumb-utils.c
	* libgimpthumb/gimpthumbnail.c: use gstdio wrappers.
	Unfortunately this causes compiler warnings, see bug #166512.

2005-02-07  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/preferences/Makefile.am
	* themes/Default/images/preferences/color-management.png: added
	icon for the yet to be added color management preferences page.
	Icon kindly provided by Alastair M. Robinson (bug #78265).

2005-02-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimptooldialog.c (gimp_tool_dialog_new): unset the
	"focus-on-map" property for tool dialogs. Fixes bug #154651 (on
	window managers supporting this hint).

2005-02-06  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/Makefile.am
	* libgimpconfig/gimpcolorconfig-enums.[ch]
	* libgimpconfig/gimpcolorconfig.[ch]: added a first draft of a
	color management configuration object. Not yet installed nor used
	by anything. This is based on an older patch by Stefan DÃ¶hla.

2005-02-06  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/unsharp.c:  apply speedup proposed 
	by Peter Heckert in bug #166406.  

2005-02-06  Sven Neumann  <sven@gimp.org>

	* configure.in: removed traces of url plug-in.

	* plug-ins/Makefile.am: don't build uri on Win32 (for now).

2005-02-06  Sven Neumann  <sven@gimp.org>

	* configure.in: added $(EXEEXT) to gimp-remote so it can be built
	on Win32 when compiling for GTK+-X11.

2005-02-06  Michael Natterer  <mitch@gimp.org>

	* plug-ins/common/url.c: removed.

	* plug-ins/common/plugin-defs.pl: changed accordingly.

	* plug-ins/common/.cvsignore
	* plug-ins/common/Makefile.am: regenerated.

	* configure.in
	* plug-ins/Makefile.am: added the "uri" subdir.

	* plug-ins/uri/.cvsignore
	* plug-ins/uri/Makefile.am
	* plug-ins/uri/uri-backend-wget.c
	* plug-ins/uri/uri-backend.h
	* plug-ins/uri/uri.c: new files: split uri plug-in into common and
	backend-specific code that will soon optionally use gnomre-vfs.

	Also treat everything after the basename's first dot as extension,
	not after the last dot, so opening "foo.ext.gz" doesn't trigger
	warnings from the compressor plug-in.

2005-02-06  Sven Neumann  <sven@gimp.org>

	* app/main.c: moved call to sanity_check() after the
	initialization of gtk+ so that the error message can be displayed.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontrollers.c (gimp_controllers_init): removed
	some eeeky code that used to fiddle with the GimpController type.

	* libgimpwidgets/gimpcontroller.c (gimp_controller_get_type): add
	the GimpConfig interface here, where it belongs.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c
	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/cdisplay_proof.c: there's no longer a need to keep a
	pointer to the widget returned by GimpColorDisplay::configure.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolordisplay.[ch]: deprecate the
	implementation of the class methods clone, load_state, save_state
	and configure_reset and implement them in the base class using the
	GimpConfigInterface.

	* modules/cdisplay_colorblind.c
	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/cdisplay_proof.c: removed deprecated implementations here.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcolordisplay.c: add the GimpConfig interface
	in the GimpColorDisplay class...

	* modules/cdisplay_colorblind.c
	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/cdisplay_proof.c: ... instead of adding it in each
	implementation.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c
	(gimp_display_shell_canvas_tool_events): switched meaning of Ctrl
	and Shift modifiers used with the mouse scroll wheel. The HIG
	suggests to use Ctrl for zooming and it makes GIMP more consistent
	with other apps (for example Inkscape).

2005-02-05  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-params.h: renamed GIMP_PARAM_ #defines
	to GIMP_CONFIG_PARAM_.

	* app/config/gimpbaseconfig.c
	* app/config/gimpconfig-dump.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimprc-deserialize.c
	* app/config/gimprc-serialize.c
	* app/config/gimprc.c
	* app/core/gimp.c
	* app/core/gimpstrokedesc.c
	* app/dialogs/preferences-dialog.c
	* app/text/gimptext.c
	* app/tools/gimptextoptions.c
	* libgimpconfig/gimpconfig-deserialize.c
	* libgimpconfig/gimpconfig-iface.c
	* libgimpconfig/gimpconfig-serialize.c
	* libgimpconfig/gimpconfig-utils.c: changed accordingly.

	* libgimpmodule/gimpmoduletypes.h: deprecate the
	GIMP_MODULE_PARAM_SERIALIZE #define, GIMP_CONFIG_PARAM_SERIALIZE
	should be used instead.

	* modules/controller_linux_input.c
	* modules/controller_midi.c: changed accordingly.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* modules/cdisplay_colorblind.c
	* modules/cdisplay_gamma.c
	* modules/cdisplay_highcontrast.c
	* modules/cdisplay_proof.c: ported all ColorDisplay modules to
	GimpConfig.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* modules/Makefile.am: link ColorDisplay modules with libgimpconfig.

	* modules/cdisplay_colorblind.c: added the GimpConfig interface
	and use it.

2005-02-05  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppropwidgets.[ch]: documentation fixes.

2005-02-05  Dave Neary  <bolsh@gimp.org>

	* tools/gimp-remote.c: Added locale.h to the headers
	included - fixes the build.

2005-02-04  Manish Singh  <yosh@gimp.org>

	* app/widgets/gimppropwidgets.h: readd declaration of
	gimp_prop_paint_mode_menu_new().

2005-02-04  Manish Singh  <yosh@gimp.org>

	* gimpui.pc.in: add libgimpconfig to Libs.

2005-02-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	added dependencies in wrong spot, fixed.  Same list of
	files as for previous commit.
	
2005-02-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpwidgets/Makefile.am
	* plug-ins/FractalExplorer/Makefile.am
	* plug-ins/Lighting/Makefile.am
	* plug-ins/MapObject/Makefile.am
	* plug-ins/bmp/Makefile.am
	* plug-ins/common/Makefile.am
	* plug-ins/common/mkgen.pl
	* plug-ins/dbbrowser/Makefile.am
	* plug-ins/faxg3/Makefile.am
	* plug-ins/fits/Makefile.am
	* plug-ins/flame/Makefile.am
	* plug-ins/gfig/Makefile.am
	* plug-ins/gflare/Makefile.am
	* plug-ins/gfli/Makefile.am
	* plug-ins/gimpressionist/Makefile.am
	* plug-ins/helpbrowser/Makefile.am
	* plug-ins/ifscompose/Makefile.am
	* plug-ins/imagemap/Makefile.am
	* plug-ins/jpeg/Makefile.am
	* plug-ins/maze/Makefile.am
	* plug-ins/pagecurl/Makefile.am
	* plug-ins/print/Makefile.am
	* plug-ins/pygimp/Makefile.am
	* plug-ins/rcm/Makefile.am
	* plug-ins/script-fu/Makefile.am
	* plug-ins/sel2path/Makefile.am
	* plug-ins/sgi/Makefile.am
	* plug-ins/twain/Makefile.am
	* plug-ins/winicon/Makefile.am
	* plug-ins/winsnap/Makefile.am
	* plug-ins/xjt/Makefile.am: ouch, broke build badly, needed to
	add libgimpconfig dependencies after moving gimppropwidgets.

2005-02-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpwidgets/gimppropwidgets.[ch]: oops, use libgimp header.
	
2005-02-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpwidgets/gimppropwidgets.[ch]: magic-copied from app/widgets
	and un-movable things then removed.
	
	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpwidgets.h: corresponding changes

	* app/widgets/gimppropwidgets.[ch]: remove functions that were
	moved.

	* app/dialogs/stroke-dialog.c
	* app/dialogs/tips-dialog.c
	* app/dialogs/user-install-dialog.c
	* app/tools/gimpairbrushtool.c
	* app/tools/gimpblendoptions.c
	* app/tools/gimpbucketfilloptions.c
	* app/tools/gimpclonetool.c
	* app/tools/gimpcoloroptions.c
	* app/tools/gimpcolorpickeroptions.c
	* app/tools/gimpconvolvetool.c
	* app/tools/gimpcropoptions.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimpdodgeburntool.c
	* app/tools/gimperasertool.c
	* app/tools/gimpflipoptions.c
	* app/tools/gimphistogramoptions.c
	* app/tools/gimpimagemaptool.c
	* app/tools/gimpinkoptions-gui.c
	* app/tools/gimplevelstool.c
	* app/tools/gimpmagnifyoptions.c
	* app/tools/gimpmeasureoptions.c
	* app/tools/gimpmoveoptions.c
	* app/tools/gimpselectionoptions.c
	* app/tools/gimpsmudgetool.c
	* app/tools/gimpthresholdtool.c
	* app/tools/gimptransformoptions.c
	* app/tools/gimpvectoroptions.c
	* app/widgets/gimpcontainerbox.c
	* app/widgets/gimpcontrollereditor.c
	* app/widgets/gimpdevicestatus.c
	* app/widgets/gimpgrideditor.c
	* app/widgets/gimphistogrambox.c
	* app/widgets/gimphistogrameditor.c
	* app/widgets/gimpsizebox.c
	* app/widgets/gimpstrokeeditor.c
	* app/widgets/gimptemplateeditor.c
	* app/widgets/gimptooloptionseditor.c: fix includes.

2005-02-04  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/jpeg/jpeg-exif.c: check validity of orientation
	value before using, see bug #166248.
	
2005-02-03  Sven Neumann  <sven@gimp.org>

	* app/file/file-utils.[ch]: added new utility function
	file_utils_filename_from_uri().
	
	* app/file/file-open.c (file_open_image)
	* app/file/file-save.c (file_save_as):
	* app/file/file-utils.c (file_utils_find_proc)
	(file_utils_uri_to_utf8_filename): replaced calls to
	g_filename_from_uri() with file_utils_filename_from_uri().

2005-02-03  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimppropwidgets.c:  add gtk-doc comments to 
	public functions in prep for moving to libgimpwidgets.

2005-02-03  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/print-size-dialog.c
	* app/dialogs/resize-dialog.c
	* app/dialogs/scale-dialog.c: moved "Reset" buttons left of "Cancel".

2005-02-03  Sven Neumann  <sven@gimp.org>

	* tools/Makefile.am
	* tools/gimp-remote.c: allow to localize gimp-remote.

	* app/main.c: changed a string so it can be shared with gimp-remote.

2005-02-03  Michael Natterer  <mitch@gimp.org>

	* app/actions/help-commands.c (help_context_help_cmd_callback):
	for consistency, use return_if_no_widget() instead of
	action_data_get_widget()

2005-02-03  Michael Natterer  <mitch@gimp.org>

	* app/dialogs/image-scale-dialog.c (image_scale_dialog_new): use
	the passed parent widget instead of display->shell.

2005-02-03  Sven Neumann  <sven@gimp.org>

	* tools/gimp-remote.c: ported to GOption command-line parser.

2005-02-03  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagemap.c (gimp_image_map_do): fixed handling of
	pixel region that broke with my latest change. Fixes bug #166126.

2005-02-03  Sven Neumann  <sven@gimp.org>

	* app/main.c: some cleanup in main().

2005-02-03  Michael Natterer  <mitch@gimp.org>

	* app/sanity.c (sanity_check_glib): there is no such thing as GLib+

2005-02-03  Sven Neumann  <sven@gimp.org>

	* app/app_procs.[ch]
	* app/main.c: let the GLib command-line parser deal with the
	remaining arguments and pass a string array to app_run().

2005-02-03  Sven Neumann  <sven@gimp.org>

	* app/main.c: more work on the command-line option parser.

2005-02-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-utils.[ch] (gimp_check_glib_version): removed this
	function.

	* app/sanity.c (sanity_check_glib): use glib_check_version()
	instead and set required version to 2.6.0.

2005-02-02  Sven Neumann  <sven@gimp.org>

	* configure.in: depend on glib >= 2.6.0.

	* app/main.c: use the new GLib commandline option parser. Still
	work in progress.

2005-02-02  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-convert.c (gimp_image_convert): relax/rigor
	the floating selection around the convert operations so color
	analysis for indexed conversion works on the floating selection's
	drawable original pixels, and not on the composited one.
	Fixes bug #165342.

2005-02-02  Sven Neumann  <sven@gimp.org>

	* data/misc/gimp.desktop.in.in (_Name): experimentally expand the
	GIMP acronym. Not sure if this is a good idea at all...

2005-02-01  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagemap.c (gimp_image_map_do): tiny optimization
	based on a patch by Bill Skaggs. Process up to 16 tiles in one go
	before updating the display.

2005-01-31  Sven Neumann  <sven@gimp.org>

	* themes/Default/images/Makefile.am
	* themes/Default/images/tools/stock-tool-new-rect-select-16.png
	* themes/Default/images/tools/stock-tool-new-rect-select-22.png
	* libgimpwidgets/gimpstock.[ch]: removed the new icon again;
	there's no point in adding a stock icon temporarily.

	* app/tools/gimpnewrectselecttool.c: changed accordingly.

2005-01-31  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpnewrectselecttool.[ch]: new rectangle select tool

	* app/tools/Makefile.am
	* app/tools/gimp-tools.c: add it to toolbox

	* app/tools/gimpselectionoptions.[ch]: set its options
	
	* themes/Default/images/tools/stock-tool-new-rect-select-16.png
	* themes/Default/images/tools/stock-tool-new-rect-select-22.png:
	toolbox icon
	
	* libgimpwidgets/gimpstock.[ch]
	* themes/Default/images/Makefile.am: add the toolbox icon

2005-01-31  Michael Natterer  <mitch@gimp.org>

	Some cleanup to make plug-in menu creation less hackish and
	finally enable registering plug-in menu entries in much more UI
	managers (not only in the image and toolbox menus):

	* app/menus/menus.c: added a <Toolbox> UI manager instead of
	creating the toolbox menu from the <Image> UI manager.

	* app/widgets/gimpimagedock.[ch]: removed the ui_manager and the
	signal connections to update it...

	* app/widgets/gimpdock.[ch]: ...and added them here so all docks
	have their own UI manager. Determine which manager to create from
	looking at GimpDockClass::ui_manager_name (defaults to <Dock>).

	* app/widgets/gimptoolbox.c: set ui_manager_name to <Toolbox> and
	use the UI manager created by our parent class instead of using
	the <Image> one.

	(toolbox_create_tools): use gimp_action_get_accel_closure()
	instead of doing evil hacks.

	* app/gui/gui-vtable.c
	* app/menus/plug-in-menus.c: removed lots of special casing of the
	<Image> UI manager. The code is almost ready for allowing plug-in
	menus under <Layers>, <Channels>, <Brushes> etc.

2005-01-30  Sven Neumann  <sven@gimp.org>

	* app/core/gimpimagemap.c: formatting.

2005-01-29  Michael Schumacher  <schumaml@cvs.gnome.org>

	* libgimpbase/gimpbase.def: added gimp_path_parse 
	* libgimpmath/gimpmath.def: added gimp_param_spec_matrix2

2005-01-29  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-deserialize.c
	* libgimpconfig/gimpconfig-error.c
	* libgimpconfig/gimpconfig-iface.c
	* libgimpconfig/gimpconfig-path.c
	* libgimpconfig/gimpconfig-serialize.c
	* libgimpconfig/gimpconfig-utils.c
	* libgimpconfig/gimpconfigwriter.c
	* libgimpconfig/gimpscanner.c: use libgimp header,
	added "Since: GIMP 2.4" to the gtk-doc comments.

2005-01-29  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpenumwidgets.[ch]: use libgimp header,
	added "Since: GIMP 2.4" to the gtk-doc comments.

2005-01-28  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimpenumwidgets.c
	* app/widgets/gimpenumwidgets.h: magic-moved from here...

	* libgimpwidgets/gimpenumwidgets.c
	* libgimpwidgets/gimpenumwidgets.h: ...to here.

	* app/dialogs/convert-dialog.c
	* app/dialogs/layer-add-mask-dialog.c
	* app/dialogs/layer-options-dialog.c
	* app/tools/gimpcolorbalancetool.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/widgets/Makefile.am
	* app/widgets/gimpbrusheditor.c
	* app/widgets/gimpeditor.c
	* app/widgets/gimppropwidgets.c
	* app/widgets/gimptemplateeditor.c
	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpwidgets.h: all changed accordingly.
	Still need to do devel-docs.

2005-01-28  Michael Natterer  <mitch@gimp.org>

	* app/actions/Makefile.am
	* app/actions/window-actions.[ch]: new files holding utility
	functions to create actions to move windows to other screens.

	* app/actions/dock-actions.c
	* app/actions/dock-commands.[ch]
	* app/actions/view-actions.c
	* app/actions/view-commands.[ch]: use the new actions instead of
	the change screen dialog.

	* app/menus/Makefile.am
	* app/menus/window-menu.[ch]: new files which create menu items
	for above actions.

	* app/menus/dockable-menu.[ch]: new files using above window-menu
	utility functions.

	* app/menus/image-menu.c: use them here too.

	* app/menus/menus.c: set a setup_func for the "<Dockable>"
	UI manager.

	* menus/dockable-menu.xml.in
	* menus/image-menu.xml.in: changed accordingly.

2005-01-28  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimp/gimpdrawablepreview.c: set preview bounds correctly
	when previewed drawable extends beyond image edges, 
	fixes bug #165372.
	
2005-01-27  Manish Singh  <yosh@gimp.org>

	* README: update ancient IRC info.

2005-01-27  Sven Neumann  <sven@gimp.org>

	* app/core/gimpgrid.c: changed default grid distance to 32 as
	suggested in bug #165367.

2005-01-26  Manish Singh  <yosh@gimp.org>

	* libgimpconfig/Makefile.am: make LIBADD really work.

	* Makefile.am: build libgimpconfig after libgimpcolor and libgimpmath.

2005-01-26  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* plug-ins/jpeg/jpeg-exif.c:  libexif can return a result
	even for files without exif, need to validate it.
	
2005-01-26  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpconfig/Makefile.am: add necessary stuff to 
	LIBADD -- reported by schumaml, fix explained by yosh.

2005-01-26  Michael Natterer  <mitch@gimp.org>

	* tools/pdbgen/pdb/fileops.pdb
	* tools/pdbgen/pdb/gimprc.pdb: fixed includes after libgimpconfig
	file moving. Reported by Volker Sturm.

	* app/pdb/gimprc_cmds.c: regenerated.

2005-01-26  Michael Natterer  <mitch@gimp.org>

	* app/actions/dockable-actions.c
	* app/actions/dockable-commands.[ch]: removed dock-related
	actions (show-image-menu, auto-follow-active and move-to-screen).

	* app/actions/dock-actions.c
	* app/actions/dock-commands.[ch]: and added them here.

	* app/menus/menus.c: add the "dock" action group to the
	"<Dockable>" UI Manager.

	* app/widgets/gimphelp-ids.h: reordered to match the new grouping.

	* menus/dockable-menu.xml.in: changed accordingly.

2005-01-26  RaphaÃ«l Quinet  <raphael@gimp.org>

	* app/composite/gimp-composite-generic.c: minor doc fix for
	formula used by gimp_composite_multiply_any_any_any_generic().

2005-01-26  Sven Neumann  <sven@gimp.org>

	* libgimpconfig/gimpconfig-path.h: added declarations for the
	gimp_config_build_path functions.

	* app/config/Makefile.am
	* app/config/gimprc-utils.[ch]: removed these two files again;
	they used to duplicate functionality from libgimpconfig.

	* app/config/gimpcoreconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimppluginconfig.c: changed accordingly.

2005-01-26  Sven Neumann  <sven@gimp.org>

	* libgimpbase/Makefile.am
	* libgimpbase/gimppath.[ch]: removed these two files again.

	* libgimpconfig/gimpconfig-path.[ch]: merged the path type and
	param spec here. Renamed to GimpConfigPath and GimpParamConfigPath.

	* libgimpbase/gimpbase.h
	* libgimpbase/gimpbasetypes.[ch]
	* libgimpconfig/gimpconfig-deserialize.c
	* libgimpconfig/gimpconfig-params.h
	* app/config/gimpbaseconfig.c
	* app/config/gimpconfig-dump.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimppluginconfig.c
	* app/widgets/gimppropwidgets.c: changed accordingly.

	* libgimpbase/gimpbase.def: updated.

2005-01-25  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpconfig/gimpconfig.def: added
	
2005-01-25  Michael Natterer  <mitch@gimp.org>

	* libgimpconfig/gimpconfigtypes.h: new file holding the opaque
	typedefs for libgimpconfig. Includes "libgimpbase/gimpbasetypes.h"

	* libgimpconfig/Makefile.am: added the new file. Removed stuff
	that is not needed.

	* libgimpconfig/gimpconfigwriter.h
	* libgimpconfig/gimpconfig-iface.h: removed typedefs here.

	* libgimpconfig/gimpconfig-deserialize.c
	* libgimpconfig/gimpconfig-iface.c
	* libgimpconfig/gimpconfig-serialize.c
	* libgimpconfig/gimpconfig-utils.c
	* libgimpconfig/gimpconfig.h
	* libgimpconfig/gimpconfigwriter.c: include it before including
	any other libgimpconfig stuff.

	* app/config/config-types.h: #include "libgimpbase/gimpbasetypes.h"

	* app/config/gimpconfig-utils.h: changed include guards to
	__APP_GIMP_CONFIG_UTILS_H__.

	* app/dialogs/tips-parser.c: include <glib-object.h> instead of
	just <glib.h>.

	* app/tools/gimphistogramoptions.c
	* app/tools/gimptextoptions.c: include "config/gimpconfig-utils.h"

	* app/widgets/gimpdialogfactory.h
	* app/widgets/gimpsessioninfo.h: removed inclusion of
	"libgimpconfig/gimpconfig.h".

2005-01-25  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-deserialize.h
	* app/config/gimpconfig-error.c
	* app/config/gimpconfig-error.h
	* app/config/gimpconfig-params.h
	* app/config/gimpconfig-path.c
	* app/config/gimpconfig-path.h
	* app/config/gimpconfig-serialize.c
	* app/config/gimpconfig-serialize.h
	* app/config/gimpconfig.c
	* app/config/gimpconfig.h
	* app/config/gimpconfigwriter.c
	* app/config/gimpconfigwriter.h
	* app/config/gimpscanner.c
	* app/config/gimpscanner.h: removed

	* libgimpconfig/gimpconfig-deserialize.c
	* libgimpconfig/gimpconfig-deserialize.h
	* libgimpconfig/gimpconfig-error.h
	* libgimpconfig/gimpconfig-iface.c
	* libgimpconfig/gimpconfig-iface.h
	* libgimpconfig/gimpconfig-params.h
	* libgimpconfig/gimpconfig-path.c
	* libgimpconfig/gimpconfig-path.h
	* libgimpconfig/gimpconfig-serialize.c
	* libgimpconfig/gimpconfig-serialize.h
	* libgimpconfig/gimpconfig-utils.c
	* libgimpconfig/gimpconfig-utils.h
	* libgimpconfig/gimpconfig.h
	* libgimpconfig/gimpconfigwriter.c
	* libgimpconfig/gimpconfigwriter.h
	* libgimpconfig/gimpscanner.c
	* libgimpconfig/gimpscanner.h: copied from app/config
	by yosh.

	* libgimpconfig/.cvsignore: added
	
	* libgimpconfig/Makefile.am: modified

	* Makefile.am
	* configure.in
	* app/Makefile.am
	* app/actions/templates-commands.c
	* app/actions/tool-options-commands.c
	* app/base/base.c
	* app/base/temp-buf.c
	* app/config/Makefile.am
	* app/config/config-types.h
	* app/config/gimpconfig-utils.c
	* app/config/gimpconfig-utils.h
	* app/config/gimpconfig-file.c
	* app/config/gimpconfig-dump.c
	* app/config/gimpbaseconfig.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpdisplayconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimppluginconfig.c
	* app/config/gimprc-deserialize.c
	* app/config/gimprc-serialize.c
	* app/config/gimprc-unknown.c
	* app/config/gimprc.c
	* app/config/test-config.c
	* app/core/gimp-documents.c
	* app/core/gimp-modules.c
	* app/core/gimp-parasites.c
	* app/core/gimp-templates.c
	* app/core/gimp-units.c
	* app/core/gimp.c
	* app/core/gimpcontainer.c
	* app/core/gimpcontext.c
	* app/core/gimpdatafactory.c
	* app/core/gimpdocumentlist.c
	* app/core/gimpgrid.c
	* app/core/gimpimage-duplicate.c
	* app/core/gimpimage-grid.c
	* app/core/gimpimage-new.c
	* app/core/gimpimage-undo-push.c
	* app/core/gimpimage.c
	* app/core/gimpparasitelist.c
	* app/core/gimpstrokedesc.c
	* app/core/gimpstrokeoptions.c
	* app/core/gimptemplate.c
	* app/core/gimptoolinfo.c
	* app/core/gimptooloptions.c
	* app/core/gimpviewable.c
	* app/dialogs/grid-dialog.c
	* app/dialogs/image-new-dialog.c
	* app/dialogs/preferences-dialog.c
	* app/dialogs/stroke-dialog.c
	* app/dialogs/template-options-dialog.c
	* app/display/gimpdisplayoptions.c
	* app/display/gimpdisplayshell.c
	* app/gui/color-history.c
	* app/gui/session.c
	* app/gui/themes.c
	* app/paint/gimpairbrushoptions.c
	* app/paint/gimpcloneoptions.c
	* app/paint/gimpconvolveoptions.c
	* app/paint/gimpdodgeburnoptions.c
	* app/paint/gimperaseroptions.c
	* app/paint/gimpinkoptions.c
	* app/paint/gimppaintoptions.c
	* app/paint/gimppenciloptions.c
	* app/paint/gimpsmudgeoptions.c
	* app/pdb/fileops_cmds.c
	* app/pdb/gimprc_cmds.c
	* app/plug-in/plug-in-rc.c
	* app/plug-in/plug-ins.c
	* app/text/gimp-fonts.c
	* app/text/gimptext-parasite.c
	* app/text/gimptext.c
	* app/text/gimptextlayer.c
	* app/text/gimptextundo.c
	* app/tools/gimp-tools.c
	* app/tools/gimpblendoptions.c
	* app/tools/gimpbucketfilloptions.c
	* app/tools/gimpcoloroptions.c
	* app/tools/gimpcolorpickeroptions.c
	* app/tools/gimpcolorpickertool.c
	* app/tools/gimpcropoptions.c
	* app/tools/gimpcroptool.c
	* app/tools/gimpflipoptions.c
	* app/tools/gimphistogramoptions.c
	* app/tools/gimpimagemapoptions.c
	* app/tools/gimpmagnifyoptions.c
	* app/tools/gimpmeasureoptions.c
	* app/tools/gimpmoveoptions.c
	* app/tools/gimppaintoptions-gui.c
	* app/tools/gimpselectionoptions.c
	* app/tools/gimptextoptions.c
	* app/tools/gimptexttool.c
	* app/tools/gimptransformoptions.c
	* app/tools/gimptransformtool.c
	* app/tools/gimpvectoroptions.c
	* app/widgets/gimpcolorbar.c
	* app/widgets/gimpcontrollerinfo.c
	* app/widgets/gimpcontrollers.c
	* app/widgets/gimpdasheditor.c
	* app/widgets/gimpdeviceinfo.c
	* app/widgets/gimpdevices.c
	* app/widgets/gimpdialogfactory.h
	* app/widgets/gimppropwidgets.c
	* app/widgets/gimpsessioninfo.c
	* app/widgets/gimpsessioninfo.h
	* app/widgets/gimpsizebox.c
	* app/widgets/gimptemplateeditor.c
	* app/widgets/gimptemplateview.c: changed accordingly

	Moving things from app/config to libgimpconfig.

2005-01-24  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* libgimpconfig/Makefile.am
	* libgimpconfig/gimpconfig.h: setting up for libgimpconfig
	
2005-01-24  Sven Neumann  <sven@gimp.org>

	* app/config/Makefile.am
	* app/config/gimpconfig-file.[ch]
	* app/config/gimprc-utils.[ch]: more new files, code factored out
	of gimpconfig-utils.[ch].

	* app/config/gimpconfig-path.[ch]
	* app/config/gimpconfig-utils.[ch]
	* app/config/gimpcoreconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimppluginconfig.c
	* app/config/gimprc.c
	* app/core/gimp-units.c
	* app/dialogs/user-install-dialog.c
	* app/gui/session.c: changed accordingly.

2005-01-24  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.[ch]: removed an unused parameter.

	* app/config/gimpconfig.c: changed accordingly.

2005-01-24  Sven Neumann  <sven@gimp.org>

	* app/config/gimpconfig-deserialize.[ch]
	* app/config/gimpconfig-serialize.[ch]
	* app/config/gimpconfig.[ch]: factored out some rather obscure
	GimpConfig features that were added solely for gimprc.

	* app/config/Makefile.am
	* app/config/gimprc-deserialize.[ch]
	* app/config/gimprc-serialize.[ch]
	* app/config/gimprc-unknown.[ch]: moved gimprc-specific code to
	these new files.

	* app/config/gimprc.c
	* app/config/test-config.c: changed accordingly.

2005-01-24  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpenumcombobox.c
	* libgimpwidgets/gimpenumstore.[ch]: improved API docs.

2005-01-24  Michael Natterer  <mitch@gimp.org>

	Enabled closing docks with Ctrl-W:

	* app/actions/Makefile.am
	* app/actions/dock-actions.[ch]
	* app/actions/dock-commands.[ch]: added new action group which
	holds a single action, "dock-close".

	* app/actions/actions.c: register the "dock" group.

	* app/menus/menus.c: add it to the "<Dock>" UI manager.

	* app/widgets/gimphelp-ids.h: added GIMP_HELP_DOCK_CLOSE.

2005-01-23  Bill Skaggs  <weskaggs@primate.ucdavis.edu>

	* app/tools/gimpcroptool.c (crop_aspect_changed): don't 
	accept aspect ratios that make image less than 1 byte high, 
	fixes bug #164827.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/MapObject/Makefile.am (MapObject_SOURCES): added
	arcball.c; it isn't used but it doesn't hurt to have it in the
	tarball in case someone wants to resurrect this functionality.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/edge.c: don't read beyond the src buffer. Fixes
	bug #164963.

2005-01-23  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_toolbar.[ch]
	* plug-ins/imagemap/imap_tools.[ch]: removed

	* plug-ins/imagemap/Makefile.am
	* po-plug-ins/POTFILES.in: changed accordingly

	* plug-ins/imagemap/imap_grid.c
	* plug-ins/imagemap/imap_main.[ch]
	* plug-ins/imagemap/imap_menu.[ch]
	* plug-ins/imagemap/imap_misc.[ch]
	* plug-ins/imagemap/imap_object_popup.c
	* plug-ins/imagemap/imap_selection.c: more conversion to action based
	menus. Still have to attach some actions.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* libgimpbase/Makefile.am
	* libgimpbase/gimpbaseparams.[ch]: removed this file again.

	* libgimpbase/gimpmemsize.[ch]
	* libgimpbase/gimppath.[ch]
	* libgimpbase/gimpunit.[ch]: moved the paramspec definitions to
	the types they belong to.

	* libgimpbase/gimpbase.h: changed accordingly.

	* libgimpwidgets/Makefile.am (libgimpwidgetsinclude_HEADERS):
	install the new header files.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* app/text/text-enums.h
	* libgimpbase/gimpbaseenums.h: moved enum to libgimpbase (from
	app/text and libgimp).

	* libgimp/gimpenums.h
	* libgimpbase/gimpbaseenums.c
	* tools/pdbgen/enums.pl: regenerated.

	* libgimpbase/gimpbase.def
	* libgimp/gimp.def: updated.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* app/actions/dialogs-actions.c (dialogs_actions): set Ctrl-B as
	default shortcut to raise the Toolbox (as suggested in bug #163368).

2005-01-23  Sven Neumann  <sven@gimp.org>

	* app/paint/paint-enums.h
	* libgimpbase/gimpbaseenums.h: moved enums to libgimpbase (from
	app/paint and libgimp). The remaining enums in
	app/paint/paint-enums.h need special treatment.

	* app/paint/paint-enums.c:
	* libgimp/gimpenums.h
	* libgimpbase/gimpbaseenums.c
	* tools/pdbgen/enums.pl: regenerated.

	* libgimpbase/gimpbase.def
	* libgimp/gimp.def: updated.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* app/plug-in/Makefile.am
	* app/plug-in/plug-in-enums.h: new file with enums moved from ...

	* app/plug-in/plug-in-types.h: ... here.

	* tools/pdbgen/Makefile.am (enum_headers): changed accordingly.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* app/core/core-enums.h
	* libgimpbase/gimpbaseenums.h: moved enums to libgimpbase (from
	app/core and libgimp). The remaining enums in app/core/core-enums.h
	need special treatment.

	* app/core/core-enums.c:
	* libgimp/gimpenums.h
	* libgimpbase/gimpbaseenums.c
	* tools/pdbgen/enums.pl: regenerated.

	* libgimpbase/gimpbase.def
	* libgimp/gimp.def: updated.

2005-01-23  Sven Neumann  <sven@gimp.org>

	* app/base/base-enums.h
	* libgimpbase/gimpbaseenums.h: moved GimpInterpolationType and
	GimpTransferMode to libgimpbase (from app/base and libgimp). The
	remaining enums in app/base/base-enums.h need special treatment.

	* app/base/base-enums.c
	* libgimp/gimpenums.h
	* libgimpbase/gimpbaseenums.c
	* tools/pdbgen/enums.pl: regenerated.

	* libgimpbase/gimpbase.def
	* libgimp/gimp.def: updated.

2005-01-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-enums.h
	* plug-ins/script-fu/script-fu-interface.c
	* plug-ins/script-fu/script-fu-scripts.c
	* plug-ins/script-fu/script-fu-types.h
	* plug-ins/script-fu/siod-wrapper.c: added new script-fu
	parameter SF-ENUM that allows to easily create a combo-box to
	choose values from registered enums. For this to work correctly,
	another change is needed that I will commit separately.

	* plug-ins/script-fu/scripts/perspective-shadow.scm
	* plug-ins/script-fu/scripts/test-sphere.scm: use the new SF-ENUM
	parameter.

2005-01-22  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimppropwidgets.[ch]: added gimp_prop_expander_new().

	* app/paint/gimppaintoptions.[ch]: added a property to track the
	state of the "Pressure sensitivity" expander.

	* app/tools/gimppaintoptions-gui.c: use gimp_prop_expander_new()
	to create the "Pressure sensitivity" expander.

2005-01-22  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_file.c 
	* plug-ins/imagemap/imap_main.c 
	* plug-ins/imagemap/imap_menu.c 
	* plug-ins/imagemap/imap_menu_funcs.[ch]
	* plug-ins/imagemap/imap_misc.[ch] 
	* plug-ins/imagemap/imap_object.[ch]
	* plug-ins/imagemap/imap_selection.c: cleaning up code, mostly
	replacing homebrewn stuff that is now in either GTK or one of the
	GIMP libs. More to come.

2005-01-22  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpselectiondata.c: include <stdio.h> for sscanf().

2005-01-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/jpeg-save.c (save_dialog): update the preview (and
	thus the filesize) if the EXIF or thumbnail toggles are being used.
	Fixes bug #164914.

2005-01-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_file.c: fixed overwrite confirmation
	dialog (bug #164864).

2005-01-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_file.c (do_file_save_as_dialog): use
	GTK_STOCK_SAVE for the save dialog (bug #164864).

2005-01-21  Manish Singh  <yosh@gimp.org>

	* app/display/gimpdisplayshell.c: #include gimpbase.h for declaration
	of gimp_param_spec_unit().

2005-01-22  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpenumwidgets.c: added more gtk-doc comments.

2005-01-22  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpbase.def
	* libgimpcolor/gimpcolor.def
	* libgimpmath/gimpmath.def: added new symbols.

2005-01-22  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimputils.c (gimp_enum_value_get_help): same fix here.

2005-01-21  Bill Skaggs  <weskaggs@primate.ucdavis.edu>
	
	* app/config/gimpconfig-types.c
	* app/config/gimpconfig-types.h: removed...

	* libgimpbase/gimpbasetypes.c
	* libgimpbase/gimpbasetypes.h: and contents merged
	into here.
	
	* app/config/gimpconfig-params.c: removed...

	* libgimpbase/gimpbaseparams.c
	* libgimpcolor/gimprgb.c
	* libgimpmath/gimpmatrix.c: and contents merged
	into here.

	* app/config/gimpconfig-params.h: part removed...

	* libgimpbase/gimpbaseparams.h
	* libgimpcolor/gimprgb.h
	* libgimpmath/gimpmatrix.h: and merged into here

	* libgimpbase/Makefile.am
	* libgimpbase/gimpbase.h
	* libgimpcolor/gimpbilinear.c
	* libgimpcolor/gimpcmyk.c
	* libgimpmath/gimpvector.c
	* app/config/Makefile.am
	* app/config/gimpconfig-deserialize.c
	* app/config/gimpconfig-dump.c
	* app/config/gimpconfig-serialize.c
	* app/config/gimpcoreconfig.c
	* app/config/gimpguiconfig.c
	* app/config/gimppluginconfig.c
	* app/core/gimp-utils.c
	* app/core/gimpcontext.c
	* app/tools/tools-utils.c
	* app/widgets/gimpaction.c
	* plug-ins/gimpressionist/utils.c: dependencies changed
	accordingly.

	First step in config migration out of core.  Need to fix
	devel-docs to reflect these changes.

2005-01-22  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimputils.c (gimp_enum_value_get_desc): no point in
	crashing if gimp_enum_get_desc() returns NULL.

	* modules/cdisplay_colorblind.c
	* modules/cdisplay_proof.c: register enum descriptions, use
	GimpEnumComboBox.

2005-01-21  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimppreviewarea.c: improved docs.

2005-01-21  Sven Neumann  <sven@gimp.org>

	* app/widgets/Makefile.am
	* app/widgets/widgets-types.h
	* app/widgets/gimpenumcombobox.[ch]
	* app/widgets/gimpenumstore.[ch]: moved GimpEnumStore and
	GimpEnumComboBox from here ...

	* libgimpwidgets/Makefile.am
	* libgimpwidgets/gimpwidgets.def
	* libgimpwidgets/gimpwidgets.h
	* libgimpwidgets/gimpwidgetstypes.h
	* libgimpwidgets/gimpenumcombobox.[ch]
	* libgimpwidgets/gimpenumstore.[ch]: ... to libgimpwidgets.

	* app/dialogs/convert-dialog.c
	* app/dialogs/scale-dialog.c
	* app/tools/gimpblendoptions.c
	* app/tools/gimpcurvestool.c
	* app/tools/gimplevelstool.c
	* app/widgets/gimpcolorframe.c
	* app/widgets/gimphistogrameditor.c
	* app/widgets/gimppropwidgets.c
	* app/widgets/gimpstrokeeditor.c
	* data/images/gimp-splash.png: changed includes accordingly.

2005-01-21  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpwidgets-utils.[ch] (gimp_action_get_accel_closure):
	new function as workaround for missing GTK+ API	(see bug #141750).

	* app/widgets/gimpactionview.[ch]: use the function instead of
	having this ugly hack here. Store the accel_closure instead of the
	hackish menu_item in the tree store. Removed cruft and cleaned up
	a bit.

2005-01-21  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-transform.c: applied a patch from Geert
	Jordaens that seems to fix drawable transformation using the new
	Lanczos interpolation routine :)

2005-01-20  Sven Neumann  <sven@gimp.org>

	* HACKING
	* Makefile.am
	* acinclude.m4
	* autogen.sh: applied (modified) patch from Raphaël Quinet that
	allows to build GIMP from CVS without having gtk-doc installed.
	If you need to do this, pass --disable-gtk-doc to autogen.sh.

	* configure.in: removed --disable-devel-docs option since it has
	become obsolete now.

	* devel-docs/Makefile.am: require gtk-doc when running 'make dist'.

2005-01-20  Sven Neumann  <sven@gimp.org>

	* app/paint-funcs/scale-funcs.[ch]: applied patch from Geert
	Jordaens that improves results of the Lanczos interpolation
	routine.

2005-01-20  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcomponenteditor.c
	(gimp_component_editor_button_press): call gimp_image_flush() after
	setting the active component since this might unselect the active
	channel. Fixes bug #164195.

2005-01-19  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-transform.c: applied a patch from Geert
	Jordaens that fixes the crash in the drawable transformations
	using the Lanczos interpolation type. The result is somewhat wrong
	though :(

2005-01-18  Manish Singh  <yosh@gimp.org>

	* plug-ins/jpeg/jpeg-save.[ch]: Adapted the code from the stable
	branch (based on a patch from Nils Philippsen) that makes sure that
	the EXIF thumbnail doesn't cause the EXIF data block to grow beyond
	its maximum size. Fixes bug #164087.

2005-01-19  Sven Neumann  <sven@gimp.org>

	* app/display/gimpscalecombobox.c (gimp_scale_combo_box_set_scale):
	don't use == to compare floating point values.

2005-01-18  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/bumpmap.c: make sure bumpmap_init_params()
	is called when necessary, fixes bug #162285.
	
2005-01-18  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpparasitelist.c (parasite_serialize): use
	gimp_config_writer_data() to write the parasite data because
	it's binary and can contain '\0'.

	(gimp_parasite_list_deserialize): use gimp_scanner_parse_data() to
	read it. Still accepts the old file format for backward
	compatibility. Fixes bug #163131.

2005-01-18  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockable.c (gimp_dockable_expose_event): blink
	more correctly.

2005-01-18  Carol Spears  <carol@gimp.org>

	* data/images/gimp-splash.png a different splash for the
        developers branch.

	* data/images/gimp-splash.png fixed a commit conflict.

2005-01-18  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* gimp/plug-ins/jpeg/gimpexif.c
	* gimp/plug-ins/jpeg/gimpexif.h: new files with prototype
	interface code for metadata system.

	* gimp/plug-ins/jpeg/Makefile.am
	* gimp/plug-ins/jpeg/jpeg-exif.c
	* gimp/plug-ins/jpeg/jpeg.c: adapted to metadata interface
	as described on gimp-dev mailing list.

2005-01-18  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* libgimpwidgets/gimpwidgets.c (gimp_coordinates_callback):
	Make sure last_x and last_y are set to values that match
	those returned by gimp_size_entry_get_refval(), 
	fixes bug #163951.
	
2005-01-18  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/dialogs/info-dialog.c: disconnect callbacks to prevent crash
	when destroying dialog, fixes bug #163617.
	
2005-01-18  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdockable.[ch]: added new function
	gimp_dockable_blink() which lets the dockable's title_area blink.

	* app/widgets/gimpdialogfactory.c
	(gimp_dialog_factory_dialog_new_internal): let wilber blink at the
	user :) Fixes bug #164156.

2005-01-18  Alexander Shopov  <ash@contact.bg>

	* configure.in (ALL_LINGUAS): Added "bg" (Bulgarian)

2005-01-17  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/xjt/xjt.c: use gimp_temp_name instead of trying to
	create temp dir at loc of file, fixes bug #164116.
	
2005-01-17  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/spheredesigner.c: add basic validity check
	when attempting to open a preset; let's say this fixes
	bug #148984.

2005-01-17  Michael Natterer  <mitch@gimp.org>

	Allow to drop stuff onto empty layers, channels and paths dialogs
	to create new items:

	* app/widgets/gimpcontainertreeview.h (struct GimpContainerTreeView):
	added "gboolean dnd_drop_to_empty".

	* app/widgets/gimpcontainertreeview-dnd.c: if "dnd_drop_to_empty"
	is TRUE, dispatch drops to empty views and to the empty area below
	all items.

	* app/widgets/gimpitemtreeview.c (gimp_item_tree_view_init): set
	"dnd_drop_to_empty" to TRUE.

	* app/widgets/gimpitemtreeview.c
	* app/widgets/gimpchanneltreeview.c
	* app/widgets/gimpdrawabletreeview.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimpvectorstreeview.c: made all drop functions work
	with "dest_viewable" being NULL and changed drop_possible()
	implementations accordingly. Cleaned up the whole DND code a bit.

	* app/widgets/gimplayertreeview.c: removed color and pattern
	drop code...

	* app/widgets/gimpdrawabletreeview.c: and added it here so colors
	and patterns can be dropped to the channels dialog too.

2005-01-16  Sven Neumann  <sven@gimp.org>

	* app/tools/gimppaintoptions-gui.c (pressure_options_gui): added a
	toggle to control whether pressure affects opacity of the Airbrush
	tool (bug #164237).

2005-01-16  Sven Neumann  <sven@gimp.org>

	* app/config/gimpdisplayconfig.[ch]
	* app/dialogs/preferences-dialog.c: also list the default image
	title and statusbar formats.

2005-01-16  Sven Neumann  <sven@gimp.org>

	* app/dialogs/preferences-dialog.c: renamed default image title
	and statusbar format as suggested in bug #150679.

2005-01-16  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/curve_bend.c: applied patch from Jan Heller that
	fixes broken expose event handling (bug #164207).

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.c: implement GimpItem::convert(). Handles
	any drawable, including conversion to GRAY, flattening and
	resizing.

	* app/widgets/gimpchanneltreeview.c: implement dropping of all
	kinds of drawables as new channels. Fixes bug #158133.

	Simplified component dropping by removing stuff which is done by
	gimp_item_convert() now.

2005-01-15  Sven Neumann  <sven@gimp.org>

	* app/core/gimpdrawable-transform.c
	* app/paint-funcs/scale-funcs.c: minor cleanups to the new Lanczos
	interpolation routines. Drawable transformations do still crash :(

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-dnd.[ch]: added new function
	gimp_display_shell_dnd_init() which connects all DND callbacks.
	Made all DND callbacks static.

	* app/display/gimpdisplayshell.c (gimp_display_shell_init): call
	above function instead of connecting all DND callbacks here. Removed
	lots of now unused #includes.

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpitem.c
	* app/core/gimpdrawable.c
	* app/vectors/gimpvectors.c: made GimpItem::scale() and ::resize()
	work on unattached items.

	* app/widgets/gimplayertreeview.c
	(gimp_layer_tree_view_drop_component): fix drop index.

	* app/widgets/gimpchanneltreeview.c: implement dropping of
	components as new channels. Fixes bug #158483.

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpcontainertreeview.[ch]: added virtual function
	GimpContainerTreeView::drop_component(). Added EEKy "dnd_gimp"
	needed for gimp_selection_data_get_component().

	* app/widgets/gimpitemtreeview.c (gimp_item_tree_view_set_context):
	set the "dnd_gimp" pointer if it is NULL.

	* app/widgets/gimpcontainertreeview-dnd.c: handle component drops
	and dispatch ::drop_component() accordingly.

	* app/widgets/gimplayertreeview.c: implement dropping of
	components as new layers. Addresses bugs #158483 and #158133.

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell.c
	* app/display/gimpdisplayshell-dnd.[ch]
	* app/widgets/gimptoolbox-dnd.c: enabled dropping of components
	to the display and the toolbox. Addresses bug #158483.

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpchannel.c (gimp_channel_new*): don't require a
	non-NULL color parameter (just leave the default color untouched
	if NULL is passed).

	* app/actions/channels-commands.c
	* app/core/gimpchannel-select.c: pass NULL as color for temporary
	channels or channels where we used to pass black.

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpdnd.c: added gimp_dnd_get_component_icon().

	* app/widgets/gimpcomponenteditor.c: allow to drag
	components. They can't be dropped anywhere yet.

2005-01-15  Sven Neumann  <sven@gimp.org>

	* libgimp/gimptile.c (gimp_tile_put)
	* libgimp/gimp.c (gimp_loop) (gimp_read_expect_msg): added missing
	calls to wire_destroy(). Plugs memory leaks in the wire protocol.

2005-01-15  Sven Neumann  <sven@gimp.org>

	* libgimpbase/gimpprotocol.c: formatting.

2005-01-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/script-fu-scripts.c (script_fu_free_script)
	* plug-ins/script-fu/siod-wrapper.c (init_procedures): plugged
	memory leaks.

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpitemtreeview.c
	(gimp_item_tree_view_drop_viewable): handle drops of items of all
	types from all images and convert them if needed.

	* app/widgets/gimplayertreeview.c: enable dropping of all kinds of
	drawables. Addresses bug #158133.

2005-01-15  Michael Natterer  <mitch@gimp.org>

	* app/widgets/widgets-enums.h (enum GimpDndType): reordered so
	COMPONENT is after IMAGE.

	* app/widgets/gimpdnd.[ch]
	* app/widgets/gimpselectiondata.[ch]: added API for passing
	components around via DND. Speaks in terms of a
	(GimpImage,GimpChannelType) tuple.

2005-01-15  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/psd_save.c: fixed array out-of-bounds access and
	some mem-leaks reported by valgrind.

2005-01-14  Jay Cox  <jaycox@gimp.org>

	* plug-ins/common/psd_save.c: Much less wasted memory.  Save guides.
	Fixes bug #151904.

2005-01-14  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimppaintcore-undo.c: doesn't need "gimp-intl.h" either.

2005-01-14  Sven Neumann  <sven@gimp.org>

	* app/paint/gimpink-undo.c: doesn't need to include "gimp-intl.h".

2005-01-14  Michael Natterer  <mitch@gimp.org>

	* app/core/core-enums.[ch] (enum GimpUndoType): added GIMP_UNDO_INK.

	* app/paint/gimppaintcore.[ch]: added virtual function
	GimpPaintCore::push_undo() and call it.

	* app/paint/gimppaintcore-undo.[ch]: made it the default
	implementation.

	* app/paint/gimpink-blob.[ch]: added blob_duplicate().

	* app/paint/gimpink.[ch]: added a "start_blob" (just like
	GimpPaintCore::start_coords) which gets set whenever we start a
	new stroke or line. Removed ink->lastx and ink->lasty because
	they are the same as paint_core->last_coords.

	* app/paint/Makefile.am
	* app/paint/gimpink-undo.[ch]: new files implementing an
	undo step for ink which restores the last blob used along
	with the whole ink state. Fixes bug #163670.

2005-01-14  Michael Natterer  <mitch@gimp.org>

	* app/actions/buffers-commands.[ch]
	* app/actions/data-commands.[ch]
	* app/actions/documents-commands.[ch]
	* app/actions/palettes-commands.[ch]
	* app/actions/templates-commands.[ch]: changed the remaining
	callbacks to follow a consistent naming scheme
	(e.g. buffers_delete_buffer_cmd_callback ->
	buffers_delete_cmd_callback).

	* app/actions/brushes-actions.c
	* app/actions/buffers-actions.c
	* app/actions/documents-actions.c
	* app/actions/gradients-actions.c
	* app/actions/palettes-actions.c
	* app/actions/patterns-actions.c
	* app/actions/templates-actions.c: changed accordingly.

2005-01-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/retinex.c (run): fixed check for number of
	parameters in non-interactive mode.

2005-01-13  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/channel_mixer.c: Add a Reset button. Addresses
	bug #163045.

2005-01-14  Sven Neumann  <sven@gimp.org>

	* plug-ins/bmp/bmpread.c: removed obscure error codes from
	translatable error messages.

2005-01-13  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/Lighting/lighting_shade.c: remove artifacts
	when light strikes underside of bumpmapped surface;
	should fix bug #163877.
	
2005-01-13  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/bmp/bmp.h
	* plug-ins/bmp/bmpread.c: handle negative height values
	as per spec, fixes bug #158033
	
2005-01-13  Michael Natterer  <mitch@gimp.org>

	Allow to easily open brushes and patterns as images.
	Fixes bug #163059.

	* app/actions/brushes-actions.c
	* app/actions/patterns-actions.c: added "brushes-open-as-image"
	and "patterns-open-as-image" actions.

	* app/actions/data-commands.[ch]: added
	data_open_as_image_cmd_callback() which tries to load
	data->filename as image.

	* app/widgets/gimphelp-ids.h: added help IDs for the new actions.

	* app/widgets/gimpdatafactoryview.c: added buttons.

	* menus/brushes-menu.xml
	* menus/patterns-menu.xml: added them to the menus.

2005-01-13  Michael Natterer  <mitch@gimp.org>

	Splitting GimpItem::convert() into two virtual functions was
	apparently buggy over-engineering. Reverted that stuff and
	implement item conversion much simpler:

	* app/core/gimpitem.[ch]: have a single virtual function,
	GimpItem::convert(), which takes a newly duplicated item and the
	destination image.

	(gimp_item_convert): simply call GimpItem::convert() on the result
	of gimp_item_duplicate().

	(gimp_item_real_convert): set the item's new image.

	* app/core/gimplayer.c (gimp_layer_convert)
	* app/vectors/gimpvectors.c (gimp_vectors_convert): changed
	accordingly and chain up after, not before doing our own stuff
	so the old image is still available as item->image for stuff
	like colormap conversion. Fixes bug #163879.

2005-01-13  Michael Natterer  <mitch@gimp.org>

	Made the file open and save dialogs use the last used folder
	instead of defaulting to current directory. Fixes bug #162385.

	* app/widgets/gimpfiledialog.[ch] (gimp_file_dialog_set_uri):
	removed this function because it had no functionality except
	creating usability problems.

	* app/actions/file-commands.c: use gtk_file_chooser_set_uri()
	instead but *only* if we already have an uri from an alread open
	image or the document hinstory.

	* app/widgets/gimpfiledialog.c (gimp_file_dialog_set_image): set
	the file chooser's uri only if we have an uri from the image
	itself. Leave the current folder untouched otherwise and just set
	the current name (e.g. "Untitled").

	* app/dialogs/file-save-dialog.c (file_save_dialog_save_image): on
	successful save, remember the used uri by attaching it to the
	"gimp" instance.

	(file_save_dialog_new): set the last saved uri's folder on the
	newly created file save dialog.

2005-01-13  Sven Neumann  <sven@gimp.org>

	* app/units.c
	* app/core/gimp-units.c
	* app/core/gimp.c
	* app/core/gimpunit.[ch]: added a utility function that frees the
	memory allocated for user units. Minor cleanups.

2005-01-13  Sven Neumann  <sven@gimp.org>

	* configure.in (ALL_LINGUAS): added mk (Macedonian).

2005-01-11  Sven Neumann  <sven@gimp.org>

	* app/pdb/drawable_transform_cmds.c
	* libgimp/gimpenums.h
	* plug-ins/pygimp/gimpenums.py
	* tools/pdbgen/enums.pl: regenerated after change of
	GimpInterpolationType enum.

2005-01-11  Sven Neumann  <sven@gimp.org>

	* app/base/base-enums.[ch]
	* app/core/gimpdrawable-transform.c
	* app/core/gimpdrawable.c
	* app/paint-funcs/Makefile.am
	* app/paint-funcs/paint-funcs.[ch]
	* app/paint-funcs/scale-funcs.[ch]: applied patch by Geert Jordaens
	(after a good deal of reformatting for coding style compliance).
	This factors the scale routines into their own file and adds a
	sinc-based (Lanczos) interpolation routine (bug #162250).

2005-01-11  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/siod/slib.c (help): removed wrong URL from
	help output.

2005-01-10  Manish Singh  <yosh@gimp.org>

	* modules/controller_midi.c: #include <time.h> to make sure all
	the types are there for the alsa headers. Should address bug
	#163593.

2005-01-10  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/text_tool.pdb: explicitely mention the encoding.

	* app/pdb/text_tool_cmds.c
	* libgimp/gimptexttool_pdb.c: regenerated.

2005-01-10  DindinX  <dindinx@gimp.org>

	* plug-ins/common/sparkle.c: update the preview when a parameter
	change.  Updating the preview is now disabled by default since it
	can be very slow.

2005-01-09  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpgradientmenu.c: fixed out-of-bounds access in
	gradient selection widget. Presumably fixes bug #163427.

2005-01-09  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontrollerkeyboard.c: changed "Key" to "Cursor".

2005-01-09  DindinX  <dindinx@gimp.org>

	* plug-ins/common/sparkle.c: added a preview. This will need more
	testing.  Shlomi Fish, can you please try to test this plug-in again?

2005-01-09  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpactionview.c (gimp_action_view_new): connect to
	"button_press_event" and start editing immidiately instead of
	waiting for a second click. Fixes bug #163385.

2005-01-09  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpdialogfactory.c (gimp_dialog_factories_toggle):
	if called with (ensure_visibility == TRUE), raise the toolbox.
	Fixes bug #163381.

2005-01-08  DindinX  <dindinx@gimp.org>

	* plug-ins/common/mosaic.c: made the preview fast enough to be useful.

2005-01-08  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainertreeview.c
	(gimp_container_tree_view_button_press): fixed handling of clicks
	into a horizontally scrolled treeview.

	(gimp_container_tree_view_find_click_cell): really fix handling of
	RTL layouts (bug #162663).

2005-01-08  Sven Neumann  <sven@gimp.org>

	* app/dialogs/scale-dialog.c: use a GimpMessageBox to display the
	informative message when scaling an indexed image.

2005-01-07  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainertreeview.c
	(gimp_container_tree_view_button_press): handle RTL layouts (fixes
	bug #162663).

2005-01-07  Shlomi Fish  <shlomif@iglu.org.il>

	* plug-ins/script-fu/scripts/frosty-logo.scm: made sure the shadow
	is given enough space and then truncated instead of translated to
	the center of the image, thus preventing the display of shadows
	with a completely horizontal or vertical edge.
	Fixes bug #132145.

2005-01-07  Michael Natterer  <mitch@gimp.org>

	* app/core/gimpimage-snap.c: moved variables to local scopes,
	assign the snapped coords unconditionally (also if we don't snap),
	cleanup.

	(gimp_image_snap_rectangle): entirely rewritten to use local
	mindist_x, mindist_y variables instead of fiddling with lots of
	boolean variables. Implemented vectors snapping as if the required
	GimpStroke functions existed (#defined them). Simon, your turn :)

2005-01-07  Michael Natterer  <mitch@gimp.org>

	* app/actions/plug-in-commands.c
	* app/actions/vectors-commands.c: GIMP_PROGRESS(NULL) is perfectly
	valid, no need to say gdisp ? GIMP_PROGRESS(gdisp) : NULL.

	* app/actions/plug-in-commands.c (plug_in_run_cmd_callback):
	remember the last plug-in if it has at least 3 args, not 2.
	Cleaned up the whole function and removed cruft.

2005-01-07  Sven Neumann  <sven@gimp.org>

	* app/composite/gimp-composite-x86.h
	* app/composite/gimp-composite-sse.c: applied patch from Andreas
	Jochens that fixes the build on amd64 with gcc-4.0 (bug #163041).

2005-01-07  Sven Neumann  <sven@gimp.org>

	* data/misc/gimp.desktop.in.in: changed Comment field as suggested
	in bug #160990.

2005-01-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/mail.c: just some minor formatting changes.

2005-01-07  Sven Neumann  <sven@gimp.org>

	* plug-ins/jpeg/Makefile.am
	* plug-ins/jpeg/jpeg-exif.c
	* plug-ins/jpeg/jpeg-load.c
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/jpeg/jpeg.[ch]: some code cleanup.

2005-01-06  Manish Singh  <yosh@gimp.org>

	* libgimpwidgets/gimpdialog.c: flush the display in dispose if we're
	no longer in a main loop, so the dialog doesn't hang around while
	possibly long running calculations are being done. Fixes bug #163084.

2005-01-06  Michael Schumacher <schumaml@cvs.gnome.org>

	* libgimpwidgets/gimpwidgets.def: added
	gimp_scrolled_preview_set_position 

2005-01-06  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sparkle.c: applied patch from Shlomi Fish that
	fixes more regressions in Sparkle plug-in (bug #132145).

2005-01-05  DindinX  <dindinx@gimp.org>

	* libgimpwidgets/gimpscrolledpreview.[ch]: new function:
	gimp_scrolled_preview_set_position () to set the position of the
	preview content wrt the drawable.  This function might be moved to a
	virtual function of GimpPreview in a near future.

	* libgimp/gimpdrawablepreview.c: use this function, so a preview
	remembers its position from one invocation to the next.  This is done
	using the current executable name as a key for gimp_set/get_data () so
	each plug-in can have its preview on a different place.

	More informations could be saved this way: the update toggle, the
	checks, etc.

	Addresses bug #162286.

	* libgimpwidgets/gimppreview.c: smallish cleanup.

2005-01-04  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* configure.in: add check for libexif version >= 0.6.0,
	necessary because of nasty incompatible api change.
	
	* plug-ins/jpeg/exif-handling.txt: removed from here...

	* devel-docs/exif-handling.txt: ...and added here
	
	* plug-ins/jpeg/jpeg-exif.c
	* plug-ins/jpeg/Makefile.am
	* plug-ins/jpeg/jpeg-load.c
	* plug-ins/jpeg/jpeg.c
	* plug-ins/jpeg/jpeg.h: extract info from exif on loading,
	and add info to exif on saving, addresses bug #56433,
	bug #61499, and bug #121810.
	
2005-01-04  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-close.c
	(gimp_display_shell_close_dialog): set the default response to
	Cancel in order to reduce the risk of accidentally saving an
	image (bug #162872).

2005-01-04  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpcontainertreeview.c: prepared code for fixing
	bug #162663.

2005-01-03  DindinX  <dindinx@gimp.org>

	* plug-ins/common/mosaic.c: invalidate the preview when a parameter
	changes.  Disabled updating the preview by default. There is room
	for optimisations, but this fixes #162710.

2005-01-03  Sven Neumann  <sven@gimp.org>

	* libgimpwidgets/gimpcellrenderertoggle.c
	(gimp_cell_renderer_toggle_get_size): made the code look more
	similar to GtkCellRendererToggle to allow for easy comparison.

2005-01-03  Sven Neumann  <sven@gimp.org>

	* app/menus/plug-in-menus.c: made the code a little more robust by
	not relying on certain properties of the menu path.

2005-01-03  Sven Neumann  <sven@gimp.org>

	* tools/pdbgen/pdb/gradient.pdb: do actually add the new procedure
	gimp_gradient_is_editable().

	* app/pdb/gradient_cmds.c
	* app/pdb/internal_procs.c
	* libgimp/gimpgradient_pdb.[ch]: regenerated.

	* libgimp/gimp.def: updated.

2005-01-03  Michael Natterer  <mitch@gimp.org>

	* app/actions/view-actions.c
	* app/actions/view-commands.[ch]
	* app/display/gimpdisplayshell-appearance.[ch]
	* menus/image-menu.xml.in: reordered actions, functions and menu
	items so the "show" and "snap" actions are grouped.

2005-01-03  Michael Natterer  <mitch@gimp.org>

	Implemented "Snap to Canvas Edges" (fixes bug #152971) and
	"Snap to Active Path" (half way done):

	* app/core/gimpimage-snap.[ch]: added boolean snap_to_canvas and
	snap_to_vectors parameters (snap_to_vectors works fine when
	snapping to a point, but is unimplemented for snapping to a
	rectangle).

	* app/display/gimpdisplayshell.[ch] (struct GimpDisplayShell):
	added snap_to_canvas and snap_to_vectors booleans.

	* app/display/gimpdisplayshell-appearance.[ch]: added API to
	get/set them.

	* app/actions/view-actions.c
	* app/actions/view-commands.[ch]
	* app/widgets/gimphelp-ids.h: added actions, callbacks and help IDs.

	* menus/image-menu.xml.in: added them to Image->View.

2005-01-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/ifscompose/ifscompose.c: use g_free() to release memory
	allocated using g_malloc().

2005-01-03  Michael Natterer  <mitch@gimp.org>

	* app/display/gimpdisplayshell-autoscroll.c
	(gimp_display_shell_autoscroll_timeout): need to snap the
	coordinates before passing them to the active tool.

2005-01-03  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/fp.c: removed GtkFrame from dialog and replaced
	a call to free() by g_free().

2005-01-03  Michael Natterer  <mitch@gimp.org>

	* app/paint/gimpbrushcore.c
	* app/paint/gimppaintoptions.[ch]
	* app/tools/gimppaintoptions-gui.c: renamed "invsize" to
	"inverse-size" and reordered it to be after "size".

2005-01-03  Sven Neumann  <sven@gimp.org>

	* etc/ps-menurc: another update from Eric Pierce.

2005-01-03  Sven Neumann  <sven@gimp.org>

	* app/paint/gimpink.[ch]: handle event time as guint32. That's the
	type we deal with here and it avoids a crash that occured when
	autoscrolling with the Ink tool.

	* app/display/gimpdisplayshell-autoscroll.c: cosmetics.

2005-01-02  Michael Natterer  <mitch@gimp.org>

	* app/display/Makefile.am
	* app/display/gimpdisplayshell-autoscroll.[ch]
	* app/display/gimpdisplayshell-coords.[ch]: new files factored out
	of gimpdisplayshell-callbacks.c

	* app/display/gimpdisplayshell.h (struct GimpDisplayShell): added
	"gpointer scroll_info" needed by autoscroll.

	* app/display/gimpdisplayshell-callbacks.c: removed the stuff
	above. Also removed the static autoscroll struct because it's not
	needed any longer.

2005-01-02  DindinX  <dindinx@gimp.org>

	* plug-ins/common/mosaic.c: Added a preview.  This still needs some
	work and some testing.  Calculating the preview takes ages.

2005-01-01  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/jpeg/exif-handling.txt:  added summary of how Gimp should
	handle each exif field according to the specs.
	
2005-01-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpsizebox.c
	* app/widgets/gimptemplateeditor.c: round displayed resolution
	instead of just casting to integer values. Use image size limits
	from libgimpbase/gimplimits.h instead of some arbitrary numbers.

2005-01-02  Manish Singh  <yosh@gimp.org>

	* plug-ins/pygimp/plug-ins/clothify.py
	* plug-ins/pygimp/plug-ins/foggify.py: Add layers to images before
	using them. Fixes bug #162707.

2005-01-02  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_about.c: bumped version number

	* plug-ins/imagemap/AUTHORS
	* plug-ins/imagemap/NEWS
	* plug-ins/imagemap/README
	* plug-ins/imagemap/TODO: removed since they don't contain relevant
	information anymore.

	* plug-ins/imagemap/imap_popup.[ch]: removed

	* plug-ins/imagemap/Makefile.am
	* po-plug-ins/POTFILES.in: changed accordingly

	* plug-ins/imagemap/imap_grid.c
	* plug-ins/imagemap/imap_main.[ch]
	* plug-ins/imagemap/imap_menu.[ch]
	* plug-ins/imagemap/imap_object_popup.c
	* plug-ins/imagemap/imap_preview.c
	* plug-ins/imagemap/imap_toolbar.[ch]
	* plug-ins/imagemap/imap_tools.[ch]: first set of changes to fix
	#138841 (Use action based menus in Imagemap plug-in).
	
2005-01-02  Sven Neumann  <sven@gimp.org>

	* app/gui/splash.c (splash_update): fixed display of progress
	labels in RTL environment.

2005-01-02  Sven Neumann  <sven@gimp.org>

	* etc/ps-menurc: updated PS keybindings contributed by Eric Pierce.

2005-01-02  Sven Neumann  <sven@gimp.org>

	* app/widgets/gimpsizebox.c (gimp_size_box_constructor): fixed
	position of pixel and resolution labels.

2005-01-02  Sven Neumann  <sven@gimp.org>

	* app/display/gimpdisplayshell-callbacks.c: fixed auto-scrolling
	for left and bottom display edges. Remove the timeout on
	button-release event, some minor cleanups.

2005-01-01  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/jpeg/jpeg_load.c
	* plug-ins/jpeg/jpeg_load.h
	* plug-ins/jpeg/jpeg_save.c
	* plug-ins/jpeg/jpeg_save.h: removed
	
	* plug-ins/jpeg/jpeg-load.c
	* plug-ins/jpeg/jpeg-load.h
	* plug-ins/jpeg/jpeg-save.c
	* plug-ins/jpeg/jpeg-save.h: added (changing _ to -)

	* plug-ins/jpeg/Makefile.am
	* plug-ins/jpeg/jpeg.c
	* po-plug-ins/POTFILES.in: changed accordingly

2005-01-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/sparkle.c: applied patch from Shlomi Fish that
	fixes regressions in Sparkle plug-in (bug #132145).

2005-01-02  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/plugin-defs.pl: changed for move of JPEG plug-in.

2005-01-01  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/Lighting/lighting_ui.c: add a control for
	viewpoint distance.  Should finish fixing bug #4044.

2005-01-01  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/jpeg/Makefile.am
	* plug-ins/jpeg/NEWS
	* plug-ins/jpeg/jpeg.c
	* plug-ins/jpeg/jpeg.h
	* plug-ins/jpeg/jpeg_load.c
	* plug-ins/jpeg/jpeg_load.h
	* plug-ins/jpeg/jpeg_save.c
	* plug-ins/jpeg/jpeg_save.h: moved jpeg code into new
	dir and split up, already too large and a good bit more 
	will be needed for proper exif handling.
	
	* plug-ins/common/jpeg.c: removed

	* configure.in
	* plug-ins/Makefile.am
	* plug-ins/common/Makefile.am: changed accordingly

2005-01-01  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/tiff.c: Revert incorrect optimization from previous
	change.

2005-01-01  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/gradmap.c: added procedure plug_in_palettemap
	that does the same thing as gradmap except using the current
	palette; should resolve bug #68879.
	
2005-01-02  Manish Singh  <yosh@gimp.org>

	* plug-ins/common/tiff.c: Special case 1-bit black & white indexed
	images to save out as 1-bit grayscale MINISWHITE tiffs. Also load
	these images as indexed images into GIMP. Fixes bug #150865.

2005-01-01  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/display/gimpdisplayshell-callbacks.c: use a timeout for
	autoscrolling, to fix bug #8269.  Happy new year!

2004-12-31  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/paint/gimpbrushcore.c
	* app/paint/gimppaintoptions.c
	* app/paint/gimppaintoptions.h
	* app/tools/gimppaintoptions-gui.c: reverted last change, and
	applied full patch from Dave Ahlswede in bug #149576.

2004-12-31  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* tools/pdbgen/pdb/gradient.pdb: added gradient-is-editable

	* tools/pdbgen/pdb/brush.pdb
	* tools/pdbgen/pdb/palette.pdb: changed mitch_misc to bill_misc
	where correct.

	* app/pdb/brush_cmds.c
	* app/pdb/palette_cmds.c
	* libgimp/gimpbrush_pdb.c
	* libgimp/gimppalette_pdb.c: regenerated.

2004-12-31  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/paint/gimpbrushcore.c: make previously committed change
	in pressure-size relationship apply only to airbrush, as
	intended.
	
2004-12-31  Michael Natterer  <mitch@gimp.org>

	* app/actions/plug-in-actions.c: use the orininal string if
	plug_in_actions_check_translation() fails instead of bailing out.
	Fixes bug #162590.

2004-12-31  Michael Natterer  <mitch@gimp.org>

	* app/core/gimppalette.[ch]: removed the just added
	gimp_palette_insert_entry() and added a "gint position" parameter
	to gimp_palette_add_entry() instead (no need to have two almost
	identical functions).

	* app/actions/palette-editor-commands.c
	* app/core/gimppalette-import.c
	* app/widgets/gimppaletteeditor.c
	* tools/pdbgen/pdb/palette.pdb: changed accordingly.

	* app/pdb/palette_cmds.c: regenerated.

2004-12-31  Michael Natterer  <mitch@gimp.org>

	* app/widgets/gimpfgbgeditor.[ch]: use the coordinates passed in
	the color drop callback instead of remembering them in the
	drag_motion handler.

2004-12-31  Sven Neumann  <sven@gimp.org>

	* tools/kernelgen.c: fixed rounding so that all brush kernels are
	created with a constant sum of 256.

	* app/paint/gimpbrushcore-kernels.h: regenerated.

	* app/paint/gimpbrushcore.c (gimp_brush_core_subsample_mask): use
	the constant defined in app/paint/gimpbrushcore-kernels.h. Should
	give a tiny speedup.

2004-12-31  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/paint/gimpbrushcore.c: invert dependence of brush size on
	pressure, using formula from Dave Ahlswede in bug #149576.
	
2004-12-31  Michael Natterer  <mitch@gimp.org>

	Applied modified patch from Ben Campbell which adds drop
	coordinates to the color drop callback and uses it to insert
	colors in the palette editor. Extended the patch to add drop
	coordinates to all drop callbacks.

	* app/core/gimppalette.[ch]: added gimp_palette_insert_entry().

	* app/display/gimpdisplayshell-dnd.[ch]: added drop coordinates
	to all drop callbacks.

	* app/dialogs/palette-import-dialog.c
	* app/widgets/gimpcolormapeditor.c
	* app/widgets/gimpcontainerview.c
	* app/widgets/gimpdnd.[ch]
	* app/widgets/gimpdrawabletreeview.c
	* app/widgets/gimpfgbgeditor.c
	* app/widgets/gimpgradienteditor.c
	* app/widgets/gimpitemtreeview.c
	* app/widgets/gimppaletteeditor.c
	* app/widgets/gimppropwidgets.c
	* app/widgets/gimpselectioneditor.c
	* app/widgets/gimptoolbox-dnd.c
	* app/widgets/gimptoolbox-image-area.c
	* app/widgets/gimptoolbox-indicator-area.c
	* app/widgets/gimptooloptionseditor.c
	* libgimpwidgets/gimpcolorselect.c: changed accordingly. The passed
	drop coordiantes are so far unused.

	* app/widgets/gimppaletteeditor.c: use the drop coordinates to
	insert the new color into the palette at the right place instead
	of always appending. Fixes bug #150030.

2004-12-31  Michael Natterer  <mitch@gimp.org>

	* app/actions/tools-actions.c
	* app/actions/tools-commands.[ch]
	* app/widgets/gimptoolview.[ch]: applied a (modified) patch from
	Joao S. O. Bueno which adds "raise" and "lower" actions and
	their buttons in the tool dialog. Fixes bug #158666.
	Cleaned up the tool action callbacks.

2004-12-31  Sven Neumann  <sven@gimp.org>

	* plug-ins/imagemap/imap_preview.c (render_rgb_image): use the proper
	image type and rowstride. Fixes bug #162592.

2004-12-30  Manish Singh  <yosh@gimp.org>

	* tools/Makefile.am
	* app/Makefile.am: build binaries with 2.3 versions.

2004-12-30  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/widgets/gimpsizebox.c: give correct arguments to
	gimp_coordinates_new().  Fixes problem described in
	comment 6 of bug #162387.
	
2004-12-31  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped gimp_app_version and gimp_user_version to 2.3.

	* app/Makefile.am
	* tools/Makefile.am: changed to 2.3.

2004-12-30  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* tools/pdbgen/pdb/brush.pdb: added api for changing properties
	of generated brushes.
	
	* tools/pdbgen/pdb/palette.pdb: added palette_is_editable().

	* app/pdb/brush_cmds.c
	* app/pdb/internal_procs.c
	* app/pdb/palette_cmds.c
	* libgimp/gimpbrush_pdb.c
	* libgimp/gimpbrush_pdb.h
	* libgimp/gimppalette_pdb.c
	* libgimp/gimppalette_pdb.h: autogenerated.

2004-12-29  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version to 2.3.0.

2004-12-29  Sven Neumann  <sven@gimp.org>

	* app/dialogs/file-save-dialog.c (file_save_dialog_response):
	handle a NULL return value from gtk_file_chooser_get_uri(). Fixes
	bug #162443.

2004-12-29  Maurits Rijk  <m.rijk@chello.nl>

	* plug-ins/imagemap/imap_preferences.[ch]: replace home-brewn color
	selection by GimpColorButton.

2004-12-29  DindinX  <dindinx@gimp.org>

	* plug-ins/gfig/gfig-rectangle.[ch]
	* plug-ins/gfig/images/stock-rectangle.png: news files to implement a
	rectangle tool to gfig.

	* plug-ins/gfig/gfig-stock.c
	* plug-ins/gfig/gfig-stock.h
	* plug-ins/gfig/Makefile.am: modified accordingly.

	* plug-ins/gfig/gfig-circle.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfig/gfig-dobject.c
	* plug-ins/gfig/gfig-ellipse.c
	* plug-ins/gfig/gfig-poly.c
	* plug-ins/gfig/gfig-star.c
	* plug-ins/gfig/gfig-types.h
	* plug-ins/gfig/gfig.c
	* plug-ins/gfig/gfig.h: modified to support the new shape and
	implement two new filling types: vertical and horizontal gradients.
	These gradients are imho much more useful than the shapeburst one.

2004-12-28  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/compose.c: Recompose did not properly 
	handle case where layer with alpha is decomposed into
	something that does not encode alpha -- now does.

	
2004-12-28  Michael Natterer  <mitch@gimp.org>

	* app/core/gimp-edit.c (gimp_edit_set_buffer): new utility
	function instead of code duplication.

2004-12-28  Michael Natterer  <mitch@gimp.org>

	* app/base/base-enums.[ch]: added translatable strings to the
	GimpLayerModeEffects enum because they will soon disappear from
	widgets/gimpwidgets-constructors.c

2004-12-28  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/compose.c: add "Recompose" (plug_in_recompose) 
	as described on dev mailing list.

	* plug-ins/common/decompose.c: add "decompose-data" parasite
	when decoposing, to support Recompose.  Also add missing 
	alpha channels to newly produced layers
	
2004-12-28  Sven Neumann  <sven@gimp.org>

	* Made 2.2.1 release.

2004-12-28  Sven Neumann  <sven@gimp.org>

	* libgimp/gimp.[ch] (gimp_install_procedure, gimp_install_temp_proc):
	renamed menu_path parameter to menu_label and added a pointer to
	gimp_plugin_menu_register()

	* app/widgets/gimpsizebox.c (gimp_size_box_constructor): removed
	unused variables.

2004-12-28  Sven Neumann  <sven@gimp.org>

	* app/paint/gimpbrushcore.c (gimp_brush_core_subsample_mask):
	reverted Bill's change since it is obviously not the right fix.
	Allocate the array larger to avoid the crash. We need to
	investigate bug #161323 further.

2004-12-27  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/paint/gimpbrushcore.c (gimp_brush_core_subsample_mask):
	don't set array outside its bounds.  Should fix bug #161323.
	Credit to Robert Ãgren for figuring out what was wrong.
	
2004-12-27  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/colortoalpha.c: if possible, use
	gimp_preview_draw_buffer() so that the selection mask is correctly
	previewed. Minor cleanups.

2004-12-27  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpregioniterator.c: added some checks to avoid
	division by zero.

	* libgimpwidgets/gimppreviewarea.[ch]: minor cleanups, improved
	API documentation.

2004-12-26  DindinX  <dindinx@gimp.org>

	* plug-ins/gfig/gfig-arc.c
	* plug-ins/gfig/gfig-bezier.c
	* plug-ins/gfig/gfig-circle.c
	* plug-ins/gfig/gfig-dialog.c
	* plug-ins/gfig/gfig-ellipse.c
	* plug-ins/gfig/gfig-line.c
	* plug-ins/gfig/gfig-poly.c
	* plug-ins/gfig/gfig-spiral.c
	* plug-ins/gfig/gfig-star.c
	* plug-ins/gfig/gfig-style.h
	* plug-ins/gfig/gfig.h: plugged some memory-leaks, and done some
	cleanups.

2004-12-26  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/core/gimpbrush.c: don't ask for preview with
	zero width or height, fixes bug #162232.

	* app/base/brush-scale.c: remove tabs and trailing
	whitespace.

2004-12-26  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/actions/documents-commands.c
	* app/actions/file-commands.c
	* app/dialogs/file-open-dialog.c
	* app/dialogs/file-open-location-dialog.c
	* app/display/gimpdisplayshell-dnd.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimptoolbox-dnd.c: undo changes of 12-24,
	in favor of a better fix.

	* app/widgets/gimperrordialog.c: fix bug #162147 properly,
	as suggested by mitch.

2004-12-25  Michael Natterer  <mitch@gimp.org>

	* plug-ins/script-fu/scripts/weave.scm: limit the "Thread
	intensity" parameter to [0..100] because it's used as layer
	opacity. Fixes bug #162182.

2004-12-24  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* app/actions/documents-commands.c
	* app/actions/file-commands.c
	* app/dialogs/file-open-dialog.c
	* app/dialogs/file-open-location-dialog.c
	* app/display/gimpdisplayshell-dnd.c
	* app/widgets/gimplayertreeview.c
	* app/widgets/gimptoolbox-dnd.c: replace % with space
	in file name before showing error message, 
	fixes bug #162147.

	* app/core/gimp-gui.c
	* app/widgets/gimpmessagebox.c: be a bit more paranoid
	about validating utf8 for messages.

2004-12-23  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* gimp/app/widgets/gimpsizebox.c: fix incorrect Update
	Policy for size entry as pointed out by mitch.
	
2004-12-23  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/cartoon.c
	* plug-ins/common/cubism.c
	* plug-ins/common/displace.c
	* plug-ins/common/dog.c
	* plug-ins/common/emboss.c
	* plug-ins/common/engrave.c
	* plug-ins/common/gauss.c
	* plug-ins/common/glasstile.c
	* plug-ins/common/neon.c
	* plug-ins/common/noisify.c
	* plug-ins/common/oilify.c
	* plug-ins/common/photocopy.c
	* plug-ins/common/ripple.c
	* plug-ins/common/sharpen.c
	* plug-ins/common/shift.c
	* plug-ins/common/sobel.c
	* plug-ins/common/softglow.c
	* plug-ins/common/spread.c
	* plug-ins/common/tileit.c
	* plug-ins/common/whirlpinch.c: make sure tile cache is allocated
	before preview is shown -- significant speedup in some cases,
	minimal in others.

	* plug-ins/common/sel_gauss.c: give it a tile cache (didn't
	have one).  Still very slow but a little better.
	
2004-12-24  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/despeckle.c (despeckle_median): don't call
	gimp_progress_update() for each and every pixel. Every few rows
	should be enough. Fixes bug #162129.

	* plug-ins/common/blur.c: set progress to 1.0 when done, not to 100.

2004-12-23  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* plug-ins/common/mblur.c: set up tile cache before
	creating dialog -- major speedup in preview.
	
2004-12-23  Bill Skaggs <weskaggs@primate.ucdavis.edu>

	* gimp/app/widgets/gimpsizebox.c: use gimp_coordinates_new()
	instead of duplicating a lot of code.  Fixes bug #161756.
	
	* gimp/app/widgets/gimppropwidgets.c: small change in 
	chainbutton handling to make above work.

2004-12-23  Sven Neumann  <sven@gimp.org>

	* app/plug-in/plug-in-proc-frame.[ch]: made plug_in_proc_frame_free()
	a static function.

2004-12-23  Michael Natterer  <mitch@gimp.org>

	Item conversion depends on the old *and* the new item type, so
	it can't live in the old item's vtable only:

	* app/core/gimpitem.[ch]: split GimpItem::convert() into
	GimpItem::convert_from() (which is called on the old item and
	creates the new item) and GimpItem::convert_to() (which is called
	on the new item). This way functions from the old *and* new items'
	vtables are called and it's possible to convert between item types
	which live on different branches of the class hierarchy or to item
	types which live further down the class tree than the old item.

	(gimp_item_convert): call ::convert_to() on the new item created
	by ::convert_from().

	* app/vectors/gimpvectors.c: changed ::convert() implementation
	to ::convert_from().

	* app/core/gimplayer.c: changed ::convert() to ::convert_to().
	Fixes bug #161877.

2004-12-22  Sven Neumann  <sven@gimp.org>

	* plug-ins/script-fu/scripts/Makefile.am
	* plug-ins/script-fu/scripts/asc2img.scm: removed this script as it
	is broken beyond repair and the functionality is provided by the
	text tool itself.

2004-12-22  Sven Neumann  <sven@gimp.org>

	* NEWS: added NEWS for the stable branch (no, we haven't branched
	yet).

	* Makefile.am
	* NEWS.pre-2.2: moved old NEWS here.
	
2004-12-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c (blur_line): fixed the degenerate case
	where the source image is smaller than the blurred area. This used
	to give artefacts at the borders.

2004-12-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c: more code cleanup and micro
	optimizations.

2004-12-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c: reverted the last change since it
	introduced artefacts. Even had to increase the border around the
	previewed area. Fixed a bug in unsharp_region() where it was using
	the wrong source region for blurring.

2004-12-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c: compute preview for the displayed area
	only, some more code cleanup.

2004-12-21  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c (preview_update): fixed bug #157910.
	More code cleanup and some trivial optimizations.

2004-12-21  Michael Natterer  <mitch@gimp.org>

	* app/actions/gradient-editor-actions.c
	(gradient_editor_actions_update): if the dialog is insensitive,
	disable all actions which modify the gradient. Fixes bug #161411.

	* app/actions/gradient-editor-commands.c: update the UI manager
	after setting the dialog sensitive/insensitive so te above works.

2004-12-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c: more code cleanup.

2004-12-20  Sven Neumann  <sven@gimp.org>

	* libgimp/gimpdrawablepreview.c (gimp_drawable_preview_draw_region):
	unset the dirty flag on the GimpPixelRgn used to iterate the region.

	* libgimp/gimppixelrgn.c (gimp_pixel_rgn_init): improved docs.

2004-12-20  Sven Neumann  <sven@gimp.org>

	* plug-ins/common/unsharp.c: code cleanup, no real changes.

2004-12-20  Sven Neumann  <sven@gimp.org>

	* configure.in: bumped version to 2.2.1.

	* plug-ins/FractalExplorer/FractalExplorer.c: applied patch from
	Yeti that fixes a memory corruption (bug #161729).

2004-12-19  Sven Neumann  <sven@gimp.org>

	* Made 2.2.0 release.
